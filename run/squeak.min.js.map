{"version":3,"file":"squeak.min.js","sources":["../squeak.js","../plugins/SocketPlugin.js","../plugins/SpeechPlugin.js","../plugins/SqueakSSL.js","../vm.js","../jit.js","../plugins/ADPCMCodecPlugin.js","../plugins/B2DPlugin.js","../plugins/BitBltPlugin.js","../plugins/FFTPlugin.js","../plugins/FloatArrayPlugin.js","../plugins/GeniePlugin.js","../plugins/JPEGReaderPlugin.js","../plugins/KedamaPlugin.js","../plugins/KedamaPlugin2.js","../plugins/Klatt.js","../plugins/LargeIntegers.js","../plugins/Matrix2x3Plugin.js","../plugins/MiscPrimitivePlugin.js","../plugins/ScratchPlugin.js","../plugins/SoundGenerationPlugin.js","../plugins/StarSqueakPlugin.js","../plugins/ZipPlugin.js","../lib/lz-string.js","../lib/jszip.js"],"names":["SocketPlugin","getModuleName","interpreterProxy","primHandler","handleCounter","needProxy","Set","lastLookup","TCP_Socket_Type","Resolver_Uninitialized","Resolver_Ready","Resolver_Busy","Resolver_Error","Socket_InvalidSocket","Socket_Unconnected","Socket_WaitingForConnection","Socket_Connected","Socket_OtherEndClosed","Socket_ThisEndClosed","setInterpreter","anInterpreter","this","vm","_newSocketHandle","sendBufSize","connSemaIdx","readSemaIdx","writeSemaIdx","plugin","host","port","connSemaIndex","readSemaIndex","writeSemaIndex","sendBuffer","sendTimeout","response","responseReadUntil","responseReceived","status","_signalSemaphore","semaIndex","signalSemaphoreWithIndex","_signalConnSemaphore","_signalReadSemaphore","_signalWriteSemaphore","_otherEndClosed","_hostAndPort","_requestNeedsProxy","has","_getURL","targetURL","isRetry","url","proxy","SqueakJS","options","_performRequest","request","TextDecoder","decode","headerLines","split","firstHeaderLineItems","httpMethod","data","i","length","line","match","contentLength","parseInt","substr","end","byteLength","subarray","window","fetch","_performFetchAPIRequest","_performXMLHTTPRequest","requestLines","thisHandle","headers","lineItems","trim","init","method","body","mode","then","_handleFetchAPIResponse","bind","catch","console","warn","res","log","add","header","statusText","forEach","value","key","concat","push","TextEncoder","encode","join","_readIncremental","getReader","reader","read","result","done","contentType","encodeURIComponent","httpRequest","XMLHttpRequest","open","undefined","setRequestHeader","responseType","onload","_handleXMLHTTPResponse","onerror","retry","error","send","content","getAllResponseHeaders","Uint8Array","set","connect","close","destroy","dataAvailable","responseSentCompletly","recv","count","rest","shift","start","clearTimeout","lastSend","Date","now","newBytes","bytes","newLength","newBuffer","setTimeout","primitiveHasSocketAccess","popthenPush","trueObject","primitiveInitializeNetwork","pop","primitiveResolverNameLookupResult","argCount","inet","makeStString","nilObject","primitiveResolverStartNameLookup","stackValue","bytesAsString","primitiveResolverStatus","primitiveSocketConnectionStatus","handle","stackObjectValue","primitiveSocketConnectToPort","stackIntegerValue","primitiveSocketCloseConnection","primitiveSocketCreate3Semaphores","socketType","name","sqHandle","primitiveSocketDestroy","primitiveSocketReceiveDataAvailable","ret","falseObject","primitiveSocketReceiveDataBufCount","target","primitiveSocketSendDataBufCount","primitiveSocketSendDone","registerSocketPlugin","Squeak","registerExternalModule","SpeechPlugin","voiceInput","semaphoreIndex","shouldListen","recognition","synth","speechSynthesis","primitiveSpeak","text","voice","voiceName","getVoices","filter","msg","SpeechSynthesisUtterance","speak","primitiveRegisterSemaphore","primitiveUnregisterSemaphore","primitiveGetLastRecognitionResult","stString","makeStArray","primitiveStartListening","webkitSpeechRecognition","lang","interimResults","onresult","_onRecognitionResult","event","onend","resultIndex","results","sqResult","isFinal","j","transcript","confidence","primitiveStopListening","stop","registerSpeechPlugin","SqueakSSL","SQSSL_OK","SQSSL_NEED_MORE_DATA","SQSSL_INVALID_STATE","SQSSL_BUFFER_TOO_SMALL","SQSSL_INPUT_TOO_LARGE","SQSSL_GENERIC_ERROR","SQSSL_OUT_OF_MEMORY","SQSSL_PROP_VERSION","SQSSL_PROP_LOGLEVEL","SQSSL_PROP_SSLSTATE","SQSSL_PROP_CERTSTATE","SQSSL_PROP_PEERNAME","SQSSL_PROP_CERTNAME","SQSSL_PROP_SERVERNAME","primitiveCreate","primitiveConnect","primitiveDestroy","primitiveGetIntProperty","propID","primitiveGetStringProperty","primitiveEncrypt","srcBuf","dstBuf","primitiveDecrypt","registerSqueakSSL","module","dottedPath","path","parent","self","loaded","pending","requires","req","toRun","code","load","f","Object","extend","obj","arguments","Function","prototype","subclass","classPath","initialize","apply","protoclass","modulePath","className","scripts","document","getElementsByTagName","squeakjs","vmDir","src","replace","filename","script","createElement","setAttribute","appendChild","setupFullscreen","display","canvas","fullscreenChange","fullscreen","box","style","background","footer","fullscreenCheckbox","checked","onresize","parentElement","fullscreenEvent","fullscreenElement","fullscreenEnabled","requestFullscreen","webkitRequestFullscreen","exit","webkitExitFullscreen","evt","elem","enable","mozRequestFullScreen","mozCancelFullScreen","msRequestFullscreen","msExitFullscreen","browser","exitFullscreen","checkFullscreen","addEventListener","isFullscreen","onclick","setupSwapButtons","swapCheckbox","imageName","localStorage","settings","JSON","parse","swapButtons","stringify","recordModifiers","shiftPressed","shiftKey","ctrlPressed","ctrlKey","altKey","cmdPressed","metaKey","modifiers","Keyboard_Shift","Keyboard_Ctrl","Keyboard_Cmd","buttons","Keyboard_All","updateMousePos","evtX","canUseMouseOffset","offsetX","layerX","evtY","offsetY","layerY","cursorCanvas","left","offsetLeft","cursorOffsetX","top","offsetTop","cursorOffsetY","x","width","offsetWidth","y","height","offsetHeight","mouseX","Math","max","min","mouseY","recordMouseEvent","what","eventQueue","Mouse_All","button","Mouse_Red","Mouse_Yellow","Mouse_Blue","EventTypeMouse","timeStamp","signalInputEvent","idle","runFor","runNow","recordKeyboardEvent","timestamp","interruptKeycode","interruptPending","EventTypeKeyboard","EventKeyChar","keys","recordDragDropEvent","type","EventTypeDragDropFiles","droppedFiles","fakeCmdOrCtrlKey","makeSqueakEvent","sqEvtBuf","sqTimeOffset","MillisecondClockMask","createSqueakDisplay","touchToMouse","touches","touch","pageX","pageY","dd","ax","ay","bx","by","sqrt","dist","a","b","adjustDisplay","l","t","w","h","scale","pixelated","classList","remove","zoomStart","down","orig","right","bottom","zoomMove","minScale","nowScale","maxZoom","zoomEnd","dragEventHasFiles","dataTransfer","types","margin","backgroundColor","ontouchmove","preventDefault","context","getContext","clipboardString","clipboardStringChanged","cursor","reset","lastTick","getNextEvent","firstEvtBuf","firstOffset","offset","evtBuf","timeOffset","EventTypeNone","fullscreenRequest","thenDo","resizeTodo","resizeTodoTimeout","resizeDone","todo","clear","showBanner","ctx","clearRect","fillStyle","color","font","textAlign","textBaseline","fillText","showProgress","fillRect","lineWidth","strokeStyle","strokeRect","executeClipboardPaste","charCodeAt","err","executeClipboardCopy","interpret","onmousedown","onmouseup","onmousemove","oncontextmenu","state","ontouchstart","e","changedTouches","first","didMove","abs","ontouchend","ontouchcancel","position","pointerEvents","onkeypress","test","String","fromCharCode","charCode","onkeydown","squeakCode",8,9,13,27,33,34,35,36,37,38,39,40,45,46,"keyCode","keyIdentifier","slice","onkeyup","oncopy","clipboardData","setData","oncut","onpaste","getData","ondragover","dropEffect","EventDragMove","ondragenter","EventDragEnter","ondragleave","EventDragLeave","ondrop","image","files","call","FileReader","buffer","filePut","confirm","appName","runImage","EventDragDrop","readAsArrayBuffer","debounceWidth","innerWidth","debounceHeight","innerHeight","paddingX","paddingY","fixedWidth","fixedHeight","wantRatio","haveRatio","floor","preserveScreen","imgData","getImageData","putImageData","setupSpinner","spinner","updateSpinner","idleMS","busy","animating","becameBusy","spinnerAngle","webkitTransform","transform","processOptions","search","location","hash","args","keyAndVal","val","decodeURIComponent","root","splitFilePath","fullname","dirCreate","fetchTemplates","templates","constructor","Array","fetchTemplateDir","processFile","file","zip","processZip","JSZip","loadAsync","forceDownload","fileExists","async","unzipped","checkExisting","ifExists","ifNotExists","fileGet","fileDelete","downloadFile","rq","onprogress","lengthComputable","total","alert","fetchFiles","getNextFile","Error","loop","navigator","userAgent","onbeforeunload","returnValue","Image","readFromBuffer","run","quitFlag","onQuit","ms","Interpreter","milliseconds","stoptime","runSqueak","imageUrl","protocol","basename","baseUrl","zips","unshift","docName","documentName","fsck","quitSqueak","applicationCache","reload","users","bert","vmVersion","vmBuild","vmPath","vmFile","platformName","platformSubtype","osVersion","windowSystem","HeaderTypeMask","HeaderTypeSizeAndClass","HeaderTypeClass","HeaderTypeFree","HeaderTypeShort","splOb_NilObject","splOb_FalseObject","splOb_TrueObject","splOb_SchedulerAssociation","splOb_ClassBitmap","splOb_ClassInteger","splOb_ClassString","splOb_ClassArray","splOb_SmalltalkDictionary","splOb_ClassFloat","splOb_ClassMethodContext","splOb_ClassBlockContext","splOb_ClassPoint","splOb_ClassLargePositiveInteger","splOb_TheDisplay","splOb_ClassMessage","splOb_ClassCompiledMethod","splOb_TheLowSpaceSemaphore","splOb_ClassSemaphore","splOb_ClassCharacter","splOb_SelectorDoesNotUnderstand","splOb_SelectorCannotReturn","splOb_TheInputSemaphore","splOb_SpecialSelectors","splOb_CharacterTable","splOb_SelectorMustBeBoolean","splOb_ClassByteArray","splOb_ClassProcess","splOb_CompactClasses","splOb_TheTimerSemaphore","splOb_TheInterruptSemaphore","splOb_FloatProto","splOb_SelectorCannotInterpret","splOb_MethodContextProto","splOb_ClassBlockClosure","splOb_BlockContextProto","splOb_ExternalObjectsArray","splOb_ClassPseudoContext","splOb_ClassTranslatedMethod","splOb_TheFinalizationSemaphore","splOb_ClassLargeNegativeInteger","splOb_ClassExternalAddress","splOb_ClassExternalStructure","splOb_ClassExternalData","splOb_ClassExternalFunction","splOb_ClassExternalLibrary","splOb_SelectorAboutToReturn","splOb_SelectorRunWithIn","splOb_SelectorAttemptToAssign","splOb_PrimErrTableIndex","splOb_ClassAlien","splOb_InvokeCallbackSelector","splOb_ClassUnsafeAlien","splOb_ClassWeakFinalizer","Class_superclass","Class_mdict","Class_format","Class_instVars","Class_name","Context_sender","Context_instructionPointer","Context_stackPointer","Context_method","Context_closure","Context_receiver","Context_tempFrameStart","Context_smallFrameSize","Context_largeFrameSize","BlockContext_caller","BlockContext_argumentCount","BlockContext_initialIP","BlockContext_home","Closure_outerContext","Closure_startpc","Closure_numArgs","Closure_firstCopiedValue","Stream_array","Stream_position","Stream_limit","ProcSched_processLists","ProcSched_activeProcess","Link_nextLink","LinkedList_firstLink","LinkedList_lastLink","Semaphore_excessSignals","Mutex_owner","Proc_suspendedContext","Proc_priority","Proc_myList","Assn_key","Assn_value","MethodDict_array","MethodDict_selectorStart","Message_selector","Message_arguments","Message_lookupClass","Point_x","Point_y","LargeInteger_bytes","LargeInteger_neg","BitBlt_dest","BitBlt_source","BitBlt_halftone","BitBlt_combinationRule","BitBlt_destX","BitBlt_destY","BitBlt_width","BitBlt_height","BitBlt_sourceX","BitBlt_sourceY","BitBlt_clipX","BitBlt_clipY","BitBlt_clipW","BitBlt_clipH","BitBlt_colorMap","BitBlt_warpBase","Form_bits","Form_width","Form_height","Form_depth","Form_offset","WeakFinalizationList_first","WeakFinalizerItem_list","WeakFinalizerItem_next","Keyboard_Alt","EventKeyDown","EventKeyUp","MinSmallInt","MaxSmallInt","NonSmallInt","externalModules","whenDone","dir","stats","dirs","deleted","indexedDB","dbTransaction","fileStore","cursorReq","openCursor","onsuccess","continue","entries","dirList","isDir","exists","dirDelete","toFixed","orphaned","delete","description","transactionFunc","completionFunc","fakeTransaction","dbFake","startTransaction","trans","SqueakDB","transaction","objectStore","oncomplete","onabort","openReq","onversionchange","onupgradeneeded","db","createObjectStore","onblocked","SqueakDBFake","bigFiles","bigFileThreshold","get","string","compressed","LZString","decompressFromUTF16","put","compressToUTF16","filepath","errorDo","getReq","fetchTemplateFile","template","fakeReq","contents","optSuccess","directory","dirname","entry","totalSeconds","entryOnly","fileRename","from","to","oldpath","newpath","olddir","samedir","newdir","dirpath","withParents","children","child","includeTemplates","addEntries","hasOwnProperty","localEntries","matches","flushFile","modified","size","ArrayBuffer","flushAllFiles","SqueakFiles","closeAllFiles","ensureTemplateParent","checkSubTemplates","index","ifFound","ifNotFound","timeout","onreadystatechange","readyState","DONE","startAudioOut","audioOutContext","ctxProto","AudioContext","webkitAudioContext","mozAudioContext","msAudioContext","startAudioIn","audioInContext","audioInSource","disconnect","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","audio","toString","stream","createMediaStreamSource","stopAudio","Epoch","UTC","getTimezoneOffset","EpochUTC","chars","about","totalMemory","gcCount","gcTenured","gcMilliseconds","allocationCount","oldSpaceCount","newSpaceCount","hasNewInstances","arraybuffer","progressDo","mapSomeObjects","installFromImage","oopMap","compactClasses","floatClass","littleEndian","nativeFloats","nextObject","specialObjectsArray","splObs","decorateKnownObjects","isSpur","fixSkippedOops","oopAdjust","fixCompiledMethods","fixCompactOops","mapSomeObjectsAsync","startupTime","DataView","pos","readWord","int","getUint32","readBits","nWords","isPointers","oops","bits","Uint32Array","versions","version","fileHeaderSize","indexOf","hasClosures","imageHeaderSize","objectMemorySize","oldBaseAddr","specialObjectsOopInt","lastHash","savedHeaderWords","prevObj","firstSegSize","headerSize","oldSpaceBytes","segmentEnd","addressOffset","freePageList","classPages","skippedBytes","objPos","formatAndClass","sizeAndHash","oop","format","classID","object","ObjectSpur","initFromImage","deltaWords","segmentBytes","deltaBytes","firstOldObject","lastOldObject","classInt","cc","renamedObj","renameFromImage","charClass","initCharacterTable","spurClassTable","getCharacter","initSpurOverrides","splObjs","pointers","isNil","isTrue","isFalse","isFloatClass","isCompact","Number","sqInstName","defineProperty","enumerable","adjust","hadCompactHeader","mightBeCompact","sqClass","snapshotSize","compiledMethodClass","isMethod","addr","totalBytes","partialGC","fullGC","reason","addMessage","newObjects","markReachableObjects","removeUnmarkedOldObjects","appendToOldObjects","finalizeWeakReferences","storeContextRegisters","activeContext","mark","n","nonWeakSize","isContext","contextSizeWithStack","nilObj","sort","removedCount","removedBytes","next","corpse","oldObj","newObj","setAddr","weakObj","isWeak","firstWeak","classInstSize","finalized","pendingFinalizationSignals","list","specialObjects","items","forceInterruptCheck","registerObject","registerObjectSpur","instantiateClass","aClass","indexableSize","filler","newObject","classInstProto","initInstanceOf","clone","initAsClone","bulkBecome","fromArray","toArray","twoWay","copyHash","mutations","fromHash","mut","flushMethodCacheAfterBecome","objectAfter","someInstanceOf","clsObj","nextObjectWithGCFor","nextInstanceAfter","allInstancesOf","writeToBuffer","writeWord","word","setUint32","formatVersion","objectToOop","writeTo","bytesLeft","segmentVersion","dnu","wholeWord","loadImageSegment","segmentWordArray","outPointerArray","words","segment","fakeClsOop","compactClassOops","map","cls","roots","writeToBufferSpur","classes","p","page","maybeClass","_format","classIndex","knownClass","classTable","classTableIndex","enterIntoClassTable","newClass","table","characterClass","characterTable","unicode","char","instProto","initInstanceOfChar","maxClassIndex","classTableBytes","pages","writeFreeLists","writeClassTable","objToOop","nilFalseTrueBytes","freeListBytes","majorTableSlots","minorTableSlots","majorTableBytes","minorTableBytes","firstPageOop","classObj","hiddenSize","trailerSize","freeListsSize","time","instSpec","instSize","fillArray","isFloat","float","original","fmt","hsh","classNameFromImage","decodeBytes","ccArray","ccInt","decodePointers","methodHeader","decodeWords","numLits","decodeFloat","decodeFloatDeoptimized","theBits","ptrs","byteOffset","wordOffset","fmtLowBits","nBytes","wordsAsBytes","getFloat64","swapped","array","isWords","isBytes","isWordsOrBytes","sameFormats","sameFormatAs","sameShapeAs","classSameShapeAs","classInstFormat","bytesAsNumberString","negative","hex","digits","sign","approx","assnKeyAsString","slotNameAt","allInstVarNames","str","pointersSize","bytesSize","wordsSize","allowAccessBeyondSP","floatData","setFloat64","wordsAsFloat32Array","float32Array","Float32Array","wordsAsFloat64Array","float64Array","Float64Array","wordsAsInt32Array","int32Array","Int32Array","wordsAsInt16Array","int16Array","Int16Array","wordsAsUint16Array","uint16Array","Uint16Array","wordsAsUint8Array","uint8Array","wordsOrBytes","uint32Array","extraHeader","beforePos","formatAndHash","setUint8","spec","instVarNames","each","superclass","clsIndex","defaultInst","proto","safeName","methodNumLits","methodNumArgs","methodPrimitiveIndex","primBits","methodClassForSuper","assn","methodNeedsLargeFrame","methodAddPointers","headerAndLits","methodTempCount","methodGetLiteral","zeroBasedIndex","methodGetSelector","contextHome","contextIsBlock","contextMethod","contextSender","sp","rawHeader","shortsSize","Primitives","loadImageState","hackImage","initVMState","loadInitialContext","initCompiler","specialSelectors","falseObj","trueObj","globals","findGlobals","findMethod","emulateMac","reverseDisplay","byteCodeCount","sendCount","interruptCheckCounter","interruptCheckCounterFeedBackReset","interruptChecksEveryNms","nextPollTick","nextWakeupTick","freeContexts","freeLargeContexts","reclaimableContextCount","nRecycledContexts","nAllocatedContexts","methodCacheSize","methodCacheMask","methodCacheRandomish","methodCache","lkupClass","selector","primIndex","mClass","breakOutOfInterpreter","breakOutTick","breakOnMethod","breakOnNewMethod","breakOnContextChanged","breakOnContextReturned","messages","schedAssn","sched","proc","fetchContextRegisters","smalltalk","smalltalkClass","globalsClass","Compiler","kObjPerSec","compiler","m","primitive","interpretOne","singleStep","compiled","enableSingleStepping","breakNow","b2","nextByte","receiver","homeContext","doReturn","nono","extendedPush","extendedStore","extendedStorePop","doubleExtendedDoAnything","exportThisContext","pushNewArray","pc","pushClosureCopy","jumpIfFalse","checkForInterrupts","jumpIfTrue","success","resultIsFloat","pop2AndPushNumResult","stackIntOrFloat","sendSpecial","pop2AndPushBoolResult","pop2AndPushIntResult","quickDivide","stackInteger","mod","primitiveMakePoint","safeShift","div","quickSendOther","forMilliseconds","frozen","isIdle","millisecondClockValue","goIdle","hadTimer","hasTimer","breakOut","freeze","frozenDo","continueFunc","unfreeze","sema","synchronousSignal","semaphoresToSignal","signalExternalSemaphores","compile","lobits","byte2","byte3","delta","popValues","popN","numArgsNumCopied","numArgs","numCopied","blockSizeHigh","blockSize","initialPC","encodeSqueakPC","closure","newClosure","doSuper","newRcvr","lookupClass","getClass","findSelectorInClass","verifyAtSelector","verifyAtClass","executeNewMethod","sendAsPrimitiveFailure","rcvr","startingClass","cacheEntry","findMethodCacheEntry","mDict","currentClass","cantInterpSel","cantInterpMsg","createActualMessage","popNandPush","newMethod","lookupSelectorInDict","currentSelector","currentLookupClass","dnuSel","dnuMsg","messageSelector","dictSize","mask","hasWrapped","nextSelector","methArray","argumentCount","primitiveIndex","optClass","optSel","printMethod","logSends","tryPrimitive","newContext","allocateOrRecycleContext","tempCount","newPC","newSP","arrayCopy","arrayFill","targetContext","cannotReturn","thisContext","isUnwindMarked","aboutToReturnThrough","nextContext","recycleIfPossible","resultObj","aContext","aboutToReturnSel","cannotReturnSel","doPrimitive","message","argArray","primitivePerform","trueArgCount","selectorIndex","stack","primitivePerformWithArgs","supered","primitiveInvokeObjectAsMethod","orgArgs","orgReceiver","orgSelector","runWithIn","firstProbe","probe","flushMethodCache","flushMethodCacheForSelector","flushMethodCacheForMethod","isMethodContext","newActiveContext","ctxt","meth","isSmallInt","decodeSqueakPC","decodeSqueakSP","encodeSqueakSP","intPC","squeakPC","intSP","squeakSP","needsLarge","freebie","nToPop","depthIntoStack","checkSmallInt","num","intResult","canBeSmallInt","numResult","makeFloat","unsigned","lgIntClass","lgIntObj","boolResult","anInt","maybeSmallInt","arg","smallInt","shiftCount","shifted","fromIndex","toIndex","srcPos","dest","destPos","warnOnce","aMethod","optContext","found","allMethodsDo","methodObj","selectorObj","callback","globalNamed","instances","inst","allGlobalsDo","nameObj","globalObj","globalNameObj","clsAndMeta","c","mdict","methods","selectors","printStack","limit","contexts","hardLimit","extra","block","classAndMethodString","methodName","breakOn","breakOnReturnFromThisContext","breakOnSendOrReturn","printActiveContext","maxWidth","printObj","isBlock","isClosure","homeCtx","stackBottom","stackTop","firstTemp","lastTemp","label","nArgs","firstArg","lastArg","printAllProcesses","activeProc","printProcess","lists","priority","process","semaClass","active","printByteCodes","optionalIndent","optionalHighlight","optionalPC","printer","InstructionPrinter","printInstructions","willSendOrReturn","byte","litIndex","nextSendSelector","oldPrims","deferDisplayUpdates","initDisplay","initAtCache","initModules","charFromInt","charFromIntSpur","charToInt","charToIntSpur","identityHash","identityHashSpur","loadedModules","builtinModules","JavaScriptPlugin","findPluginFunctions","FilePlugin","DropPlugin","SoundPlugin","JPEGReadWriter2Plugin","SecurityPlugin","primitiveDisableImageWrite","fakePrimitive","patchModules","ScratchPlugin","InterpreterProxy","prefix","bindLate","regex","RegExp","funcName","primName","toLowerCase","indexedColors","popNandPushIfOK","objectAt","objectAtPut","objectSize","pop2andPushBoolIfOK","doBlockCopy","primitiveBlockValue","primMethod","popNandPushIntIfOK","doBitAnd","doBitOr","doBitXor","doBitShift","primitiveLessThanLargeIntegers","primitiveGreaterThanLargeIntegers","primitiveLessOrEqualLargeIntegers","primitiveGreaterOrEqualLargeIntegers","primitiveEqualLargeIntegers","primitiveNotEqualLargeIntegers","popNandPushFloatIfOK","stackFloat","safeFDiv","floatAsSmallInt","frexp_exponent","ldexp","sin","atan","exp","stackNonInteger","stackPos32BitInt","primitiveArrayBecome","primitiveStoreStackp","primitiveNewMethod","primitiveBlockValueWithArgs","primitiveSignal","primitiveWait","primitiveResume","primitiveSuspend","primitiveMousePoint","primitiveTestDisplayDepth","primitiveInputSemaphore","primitiveGetNextEvent","primitiveInputWord","namedPrimitive","primitiveSnapshot","primitiveLoadImageSegment","primitiveBeCursor","primitiveBeDisplay","doStringReplace","primitiveScreenSize","primitiveMouseButtons","primitiveKeyboardNext","primitiveKeyboardPeek","primitiveQuit","primitiveExitToDebugger","primitiveChangeClass","doNamedPrimitive","primitiveDoPrimitiveWithArgs","primitiveImageName","primitiveReverseDisplay","registerSemaphore","setLowSpaceThreshold","primitiveDeferDisplayUpdates","primitiveShowDisplayRect","primitiveFullGC","pointsTo","primitiveSignalAtMilliseconds","secondClock","someObject","primitiveBeep","primitiveClipboardText","filenameToSqueak","primitiveShortAtAndPut","primitiveConstantFill","primitiveGetAttribute","primitiveFileAtEnd","primitiveFileClose","primitiveFileGetPosition","primitiveFileOpen","primitiveFileRead","primitiveFileSetPosition","primitiveFileDelete","primitiveFileSize","primitiveFileWrite","primitiveFileRename","primitiveDirectoryCreate","primitiveAdoptInstance","primitiveDirectoryDelimitor","primitiveDirectoryLookup","primitiveDirectoryDelete","primitiveIntegerAtAndPut","primitiveCopyObject","primitiveDirectorySetMacTypeAndCreator","primitiveAsCharacter","behaviorHash","primitiveExitCriticalSection","primitiveEnterCriticalSection","primitiveTestAndSetOwnershipOfCriticalSection","primitiveExecuteMethodArgsArray","primitiveExecuteMethod","primitiveClosureCopyWithCopiedValues","primitiveClosureValue","primitiveClosureValueWithArgs","primitiveClosureValueNoContextSwitch","primitiveRelinquishProcessorForMicroseconds","primitiveForceDisplayUpdate","primitiveSetFullScreen","microsecondClockUTC","microsecondClockLocal","primitiveSignalAtUTCMicroseconds","primitiveVMParameter","primitiveUnloadModule","primitiveListBuiltinModule","primitiveListLoadedModule","modName","functionName","loadModule","firstLiteral","moduleName","prim","retVal","makeStObject","patchModule","initFunc","initialiseModule","failed","patch","unloadModule","unloadFunc","loadFunctionFrom","func","popNIfOK","moduleNames","bool","nDeep","checkNonInteger","positive32BitValueOf","pos32BitIntFor","signed32","pos64BitIntFor","longlong","sz","stackSigned32BitInt","stackVal","isA","signed32BitIntegerFor","checkFloat","stackBoolean","checkBoolean","stackSigned53BitInt","dividend","divisor","truncated","ceil","ensureSmallInt","pow","exponent","mantissa","floatOrInt","maybeFloat","maybeSmall","isKindOf","classOrSuper","theClass","isAssociation","number","ascii","charTable","newFloat","makeLargeIfNeeded","integer","makeLargeInt","makePointWithXandY","pointClass","newPoint","jsArray","proxyClass","jsString","stObj","jsObject","asUint8Array","unixpath","slash","filenameFromSqueak","cameFromBytecode","convertChars","includeInstVars","info","atCache","atCacheMask","makeAtCacheInfo","ivarOffset","atPutCache","wordToPut","objToPut","intToPut","atCacheSize","nonCachedInfo","clearAtCache","atOrPutCache","atOrPutSelector","cacheable","someInstance","nextInstance","newObjectHash","random","checkNumbers","newStackp","stackp","argumentArray","primIdx","arraySize","cntxSize","bytecodeCount","litCount","argsArray","doBothWays","dst","dstPos","totalLength","srcInstSize","dstInstSize","sqArgCount","homeCtxt","newBlock","blockArgCount","initialIP","blockClosure","activateNewClosureMethod","outerContext","where","resume","activeProcess","transferTo","wakeHighestPriority","oldList","removeProcessFromList","getScheduler","newProc","activePriority","newPriority","putToSleep","aProcess","processLists","processList","linkProcessToList","oldProc","schedLists","isEmptyList","removeFirstLinkOfList","aList","lastLink","aLinkedList","last","temp","specialObjIndex","excessSignals","signalAtMilliseconds","msTime","usecsUTC","semaphores","mutex","owningProcess","criticalSection","attr","lowSpaceThreshold","paramsArraySize","arrayObj","vmParameterAt","parm","extraVMMemory","primitiveSetGCBiasToGrow","primitiveSetGCBiasToGrowGCLimit","cursorForm","loadForm","maskForm","bounds","depth","cursorMergeMask","showForm","bit","merged","msb","pixPerWord","pitch","displayObj","redrawDisplay","rect","theDisplay","displayUpdate","form","cursorColors","srcX","srcY","srcW","srcH","pixels","createImageData","pixelData","colors","swappedColors","argb","abgr","reversedColors","leftSrcShift","srcIndex","srcShift","dstIndex","rgb","opaque","flag","supportedDepths","formObj","withOffset","displayDirty","beep","createOscillator","destination","frequency","currentTime","stringObj","inputEventSemaIndex","millisecondClockValueSet","clock","millis","dirNameObj","dirName","delimitor","primitiveDirectoryEntry","sqDirName","filePos","fileConsoleFlush","fileClose","fileNameObj","fileName","primitiveFileFlush","makeFileHandle","writeFlag","fileWrite","fileOpen","startIndex","fileContentsDo","srcArray","dstArray","oldNameObj","newNameObj","oldName","newName","primitiveFileStdioHandles","handles","primitiveFileTruncate","primitiveDisableFileAccess","fileConsoleWrite","newSize","refCount","fileConsoleBuffer","logOrError","lines","primitiveDropRequestFileHandle","fileNames","primitiveDropRequestFileName","snd_primitiveSoundStart","snd_primitiveSoundStartWithSemaphore","bufFrames","samplesPerSec","stereoFlag","audioContext","audioSema","audioNextTimeSlot","audioBuffersReady","audioBuffersUnused","createBuffer","snd_playNextBuffer","source","createBufferSource","duration","snd_primitiveSoundAvailableSpace","available","buf","numberOfChannels","snd_primitiveSoundPlaySamples","sqSamples","channels","channel","jsSamples","getChannelData","snd_primitiveSoundPlaySilence","snd_primitiveSoundStop","snd_primitiveSoundStartRecording","audioInSema","audioInBuffers","audioInBufferIndex","audioInOverSample","sampleRate","bufferSize","audioInProcessor","createScriptProcessor","onaudioprocess","snd_recordNextBuffer","inputBuffer","audioBuffer","snd_primitiveSoundGetRecordingSampleRate","actualRate","snd_primitiveSoundRecordSamples","sqStartIndex","sampleCount","sqStep","jsStep","sqCount","jsCount","jsIndex","sqIndex","snd_primitiveSoundStopRecording","snd_primitiveSoundSetRecordLevel","jpeg2_primJPEGPluginIsPresent","jpeg2_primImageHeight","decompressStruct","jpeg2_primImageWidth","jpeg2_primJPEGCompressStructSize","jpeg2_primJPEGDecompressStructSize","jpeg2_primJPEGErrorMgr2StructSize","jpeg2_primJPEGReadHeaderfromByteArrayerrorMgr","jpeg2_readImageFromBytes","jpeg2state","img","jpeg2_primJPEGReadImagefromByteArrayonFormdoDitheringerrorMgr","ditherFlag","jpeg2_getPixelsFromImage","formBits","jpeg2_copyPixelsToForm32","jpeg2_ditherPixelsToForm16","jpeg2_copyPixelsToForm16","jpeg2_primJPEGWriteImageonByteArrayformqualityprogressiveJPEGerrorMgr","blob","Blob","URL","webkitURL","createObjectURL","drawImage","r","g","r1","g1","b1","r2","g2","formPix","ditherMatrix1","ditherMatrix2","di","dmi","dmo","v","dmv1","dmv2","scratch_primitiveOpenURL","scratch_primitiveGetFolderPath","js_primitiveDoUnderstand","js_objectOrGlobal","isGlobal","jsResult","propName","js_setError","propValue","js_fromStArray","js_fromStObject","newArgs","stResult","js_primitiveAsString","js_primitiveTypeof","js_primitiveAt","jsRcvr","jsPropName","jsPropValue","js_primitiveAtPut","js_primitiveSqueakAsJSObject","js_primitiveInitCallbacks","js_callbackSema","js_activeCallback","js_primitiveGetActiveCallbackBlock","js_primitiveGetActiveCallbackArgs","js_primitiveReturnFromCallback","js_primitiveGetError","js_error","js_fromStBlock","objs","maybeDict","js_fromStDict","jsDict","assoc","jsKey","jsValue","squeak","Promise","resolve","reject","evalAsync","js_executeCallbackAsync","again","js_executeCallback","sqObject","primitiveFloatArrayAt","primitiveFloatArrayMulFloatArray","primitiveFloatArrayAddScalar","primitiveFloatArrayDivFloatArray","primitiveFloatArrayDivScalar","primitiveFloatArrayHash","primitiveFloatArrayAtPut","primitiveFloatArrayMulScalar","primitiveFloatArrayAddFloatArray","primitiveFloatArraySubScalar","primitiveFloatArraySubFloatArray","primitiveFloatArrayEqual","primitiveFloatArrayDotProduct","m23PrimitiveInvertRectInto","m23PrimitiveTransformPoint","m23PrimitiveIsPureTranslation","m23PrimitiveComposeMatrix","m23PrimitiveTransformRectInto","m23PrimitiveIsIdentity","m23PrimitiveInvertPoint","primitiveDeflateBlock","primitiveDeflateUpdateHashTable","primitiveUpdateGZipCrc32","primitiveInflateDecompressBlock","primitiveZipSendBlock","primitiveFFTTransformData","primitiveFFTScaleData","primitiveFFTPermuteData","gePrimitiveMergeFillFrom","gePrimitiveCopyBuffer","gePrimitiveAddRect","gePrimitiveAddGradientFill","gePrimitiveSetClipRect","gePrimitiveSetBitBltPlugin","gePrimitiveRegisterExternalEdge","gePrimitiveGetClipRect","gePrimitiveAddBezier","gePrimitiveInitializeProcessing","gePrimitiveRenderImage","gePrimitiveGetOffset","gePrimitiveSetDepth","gePrimitiveAddBezierShape","gePrimitiveSetEdgeTransform","gePrimitiveGetTimes","gePrimitiveNextActiveEdgeEntry","gePrimitiveAddBitmapFill","gePrimitiveGetDepth","gePrimitiveAbortProcessing","gePrimitiveNextGlobalEdgeEntry","gePrimitiveGetFailureReason","gePrimitiveDisplaySpanBuffer","gePrimitiveGetCounts","gePrimitiveChangedActiveEdgeEntry","gePrimitiveRenderScanline","gePrimitiveGetBezierStats","gePrimitiveFinishedProcessing","gePrimitiveNeedsFlush","gePrimitiveAddLine","gePrimitiveSetOffset","gePrimitiveNextFillEntry","gePrimitiveInitializeBuffer","gePrimitiveDoProfileStats","gePrimitiveAddActiveEdgeEntry","gePrimitiveSetAALevel","gePrimitiveNeedsFlushPut","gePrimitiveAddCompressedShape","gePrimitiveSetColorTransform","gePrimitiveAddOval","gePrimitiveRegisterExternalFill","gePrimitiveAddPolygon","gePrimitiveGetAALevel","VM_PROXY_MAJOR","VM_PROXY_MINOR","remappableOops","majorVersion","minorVersion","successFlag","primitiveFail","primitiveFailFor","boolean","pushBool","pushInteger","pushFloat","floatObjectOf","stackFloatValue","stackBytes","stackWords","stackInt32Array","stackInt16Array","stackUint16Array","isIntegerValue","isArray","isMemberOf","nameBytes","booleanValueOf","positive32BitIntegerFor","floatValueOf","fetchPointerofObject","fetchBytesofObject","fetchWordsofObject","fetchInt32ArrayofObject","fetchInt16ArrayofObject","fetchUint16ArrayofObject","fetchIntegerofObject","fetchLong32ofObject","fetchFloatofObject","storeIntegerofObjectwithValue","storePointerofObjectwithValue","stObjectatput","classArray","isKindOfInteger","classLargeNegativeInteger","classLargePositiveInteger","classBitmap","classSmallInteger","classPoint","classString","instantiateClassindexableSize","methodArgumentCount","makePointwithxValueyValue","pushRemappableOop","popRemappableOop","showDisplayBitsLeftTopRightBottom","ioLoadFunctionFrom","pluginName","indent","highlight","highlightPC","innerIndents","scanner","InstructionStream","oldPC","endPC","interpretNextInstructionFor","print","instruction","toUpperCase","blockReturnTop","doDup","doPop","jump","jumpIf","condition","methodReturnReceiver","methodReturnTop","methodReturnConstant","popIntoLiteralVariable","anAssociation","popIntoReceiverVariable","popIntoTemporaryVariable","pushActiveContext","pushConstant","pushLiteralVariable","pushReceiver","pushReceiverVariable","pushTemporaryVariable","numberArguments","storeIntoLiteralVariable","storeIntoReceiverVariable","storeIntoTemporaryVariable","popIntoNewArray","numElements","pushRemoteTemp","arrayOffset","storeIntoRemoteTemp","popIntoRemoteTemp","callPrimitive","specialConstants","client","interpretExtension","offset2","byte4","comments","isHot","debug","clsName","sel","generate","canSingleStep","clsAndSel","functionNameFor","op","repl","|","~","<","=",">","&","@","*","+","\\","-",",","/","?","prevPC","sourceLabels","needsLabel","needsBreak","generatePush","generatePopInto","generateReturn","generateBlockReturn","generateExtended","generateJump","generateJumpIf","generateNumericOp","generateQuickPrim","generateSend","deleteUnneededLabels","bytecode","generateStoreInto","generateInstruction","generateClosureTemps","generateCallPrimitive","generateClosureCopy","arg1","suffix1","arg2","suffix2","generateDebugCode","generateLabel","distance","suffix","superSend","comment","bytecodes","instr","SHL","SHR","indexForDeltaFromto","thisSample","nextSample","bestIndex","diff","stepSizeTable","nextBits","remaining","bitPosition","currentByte","encodedBytes","byteIndex","nextBitsput","anInteger","bitsAvailable","bufBits","primitiveDecodeMono","predictedDelta","step","bitsPerSample","deltaSignMask","deltaValueHighBit","deltaValueMask","frameSizeMask","indexTable","predicted","sampleIndex","samples","primitiveDecodeStereo","deltaLeft","deltaRight","indexLeft","indexRight","predictedDeltaLeft","predictedDeltaRight","predictedLeft","predictedRight","stepLeft","stepRight","rightSamples","primitiveEncodeMono","primitiveEncodeStereo","ok","CLASSOF","SIZEOF","BYTESIZEOF","DIV","MOD","PTR_ADD","FPTR_ADD","aaColorMaskGet","workBuffer","GWAAColorMask","aaColorMaskPut","aaColorShiftGet","GWAAColorShift","aaColorShiftPut","aaFirstPixelFromto","leftX","rightX","firstPixel","aaLevelGet","aaHalfPixelPut","GWAAHalfPixel","aaLastPixelFromto","GWAALevel","aaLevelPut","aaScanMaskGet","GWAAScanMask","aaScanMaskPut","aaShiftGet","GWAAShift","aaShiftPut","absoluteSquared8Dot24","word1","word2","accurateLengthOfwith","deltaX","deltaY","length2","computeSqrt","addEdgeToGET","edge","allocateGETEntry","getBuffer","getUsedGet","getUsedPut","adjustWideBezierLeftwidthoffsetendX","bezier","lineOffset","endX","lastX","lastY","bezierUpdateDataOf","GBUpdateX","wideBezierUpdateDataOf","GBUpdateY","bezierFinalXOfput","adjustWideBezierRightwidthoffsetendX","adjustWideLineafterSteppingFromto","nextX","baseWidth","xDir","yEntry","yExit","wideLineEntryOf","wideLineExitOf","wideLineExtentOf","offsetFromWidth","wideLineWidthOf","lineXDirectionOf","edgeXValueOfput","lineXIncrementOf","wideLineWidthOfput","aetStartGet","GWAETStart","aetStartPut","aetUsedGet","GWAETUsed","aetUsedPut","allocateAETEntry","nSlots","needAvailableSpace","allocateBezier","allocateObjEntry","GBBaseSize","objUsed","objectTypeOfput","GEPrimitiveBezier","objectIndexOfput","objectLengthOfput","allocateBezierStackEntry","wbStackPush","wbStackSize","allocateBitmapFillcolormap","cmSize","cmBits","cm","fill","fillSize","GBMBaseSize","GEPrimitiveClippedBitmapFill","colormapOf","hasColorTransform","transformColor","bitmapCmSizeOfput","iLimiT","aetBuffer","allocateGradientFillrampWidthisRadial","ramp","rampWidth","isRadial","rampPtr","GGBaseSize","GEPrimitiveRadialGradientFill","GEPrimitiveLinearGradientFill","gradientRampOf","gradientRampLengthOfput","allocateLine","GLBaseSize","GEPrimitiveLine","allocateStackEntry","allocateStackFillEntry","stackFillEntryLength","allocateWideBezier","GBWideSize","GEPrimitiveWideBezier","allocateWideLine","GLWideSize","GEPrimitiveWideLine","areEdgeFillsValid","objectHeaderOf","GEEdgeFillsInvalid","assureValuebetweenand","val1","val2","val3","bezierEndXOf","objat","GBEndX","bezierEndXOfput","objatput","bezierEndYOf","GBEndY","bezierEndYOfput","bezierFinalXOf","GBFinalX","objBuffer","GBUpdateData","bezierViaXOf","GBViaX","bezierViaXOfput","bezierViaYOf","GBViaY","bezierViaYOfput","bitmapCmSizeOf","bmFill","GBColormapSize","bitmapDepthOf","GBBitmapDepth","bitmapDepthOfput","bitmapHeightOf","GBBitmapHeight","bitmapHeightOfput","bitmapRasterOf","GBBitmapRaster","bitmapRasterOfput","bitmapSizeOf","GBBitmapSize","bitmapSizeOfput","bitmapTileFlagOf","GBTileFlag","bitmapTileFlagOfput","bitmapValuebitsatXy","xp","yp","bmDepth","bmRaster","cMask","rShift","uncheckedTransformColor","rShiftTable","bitmapWidthOf","GBBitmapWidth","bitmapWidthOfput","bzEndX","wbStackValue","bzEndXput","wbStackValueput","bzEndY","bzEndYput","bzStartX","bzStartXput","bzStartY","bzStartYput","bzViaX","bzViaXput","bzViaY","bzViaYput","checkCompressedFillIndexListmaxsegments","fillList","maxIndex","nSegs","fillPtr","nFills","runLength","runValue","shortRunLengthAtfrom","shortRunValueAtfrom","checkCompressedFills","indexList","fillIndex","isFillOkay","checkCompressedLineWidthssegments","lineWidthList","nSegments","nItems","ptr","checkCompressedPointssegments","points","pSize","checkCompressedShapesegmentsleftFillsrightFillslineWidthslineFillsfillIndexList","leftFills","rightFills","lineWidths","lineFills","fillIndexList","maxFillIndex","checkedAddBezierToGET","isWide","wideBezierExtentOf","fillMinYGet","edgeXValueOf","fillMaxXGet","checkedAddEdgeToGET","isLine","checkedAddLineToGET","isBezier","lineEndYOf","lineEndXOf","circleCosTable","theTable","circleSinTable","clampValuemax","maxValue","clearSpanBuffer","x0","x1","spanStartGet","spanEndGet","spanSizeGet","spanBuffer","spanStartPut","spanEndPut","clearSpanBufferGet","GWClearSpanBuffer","clearSpanBufferPut","clipMaxXGet","GWClipMaxX","clipMaxXPut","clipMaxYGet","GWClipMaxY","clipMaxYPut","clipMinXGet","GWClipMinX","clipMinXPut","clipMinYGet","GWClipMinY","clipMinYPut","colorTransform","GWColorTransform","GBColormapOffset","computeBeziersplitAt","param","endY","leftViaX","leftViaY","newIndex","rightViaX","rightViaY","sharedX","sharedY","startX","startY","viaX","viaY","engineStopped","computeBezierSplitAtHalf","computeFinalWideBezierValueswidth","wideBezierWidthOfput","smallSqrtTable","copyBitsFromtoat","yValue","copyBitsFn","createGlobalEdgeTable","isEdge","edgeYValueOf","fillMaxYGet","objectLengthOf","currentYGet","GWCurrentY","currentYPut","currentZGet","GWCurrentZ","currentZPut","destOffsetXGet","GWDestOffsetX","destOffsetXPut","destOffsetYGet","GWDestOffsetY","destOffsetYPut","displaySpanBufferAt","targetX0","targetX1","targetY","edgeFillsInvalidate","objectTypeOf","edgeFillsValidate","edgeLeftFillOf","GEFillIndexLeft","edgeLeftFillOfput","edgeNumLinesOf","GENumLines","edgeNumLinesOfput","edgeRightFillOf","GEFillIndexRight","edgeRightFillOfput","edgeTransform","GWEdgeTransform","edgeTypeOf","GEXValue","GEYValue","edgeYValueOfput","edgeZValueOf","GEZValue","edgeZValueOfput","errorWrongIndex","fillAllFromto","stopX","topFill","topRightX","fillSpanfromto","quickRemoveInvalidFillsAt","fillBitmapSpan","fillBitmapSpanfromtoat","lastExportedFillGet","lastExportedLeftXGet","lastExportedRightXGet","fillBitmapSpanfromto","baseShift","bitX","colorMask","colorShift","fillValue","spanEndAAGet","spanEndAAPut","bmHeight","bmWidth","ds","dsX","dt","dtX","tileFlag","fillBitmapSpanAAfromtoat","loadBitsFrom","fillOriginXOf","fillOriginYOf","fillDirectionXOf","fillNormalXOf","fillDirectionYOf","fillNormalYOf","repeatValuemax","aaLevel","cShift","idx","lastPixel","fillColorSpanfromto","pixelValue32","fillColorSpanAAx0x1","pv32","GFDirectionX","fillDirectionXOfput","GFDirectionY","fillDirectionYOfput","fillLinearGradient","fillLinearGradientfromtoat","rampIndex","rampSize","gradientRampLengthOf","fillLinearGradientAArampdsdsXfromto","deltaS","rampValue","GWFillMaxX","fillMaxXPut","GWFillMaxY","fillMaxYPut","fillMinXGet","GWFillMinX","fillMinXPut","GWFillMinY","fillMinYPut","GFNormalX","fillNormalXOfput","GFNormalY","fillNormalYOfput","GFOriginX","fillOriginXOfput","GFOriginY","fillOriginYOfput","fillRadialDecreasingrampdeltaSTdsXdtXfromto","deltaST","nextLength","squaredLengthOfwith","fillRadialDecreasingAArampdeltaSTdsXdtXfromto","fillRadialGradient","fillRadialGradientfromtoat","point1Get","fillRadialIncreasingrampdeltaSTdsXdtXfromto","fillRadialIncreasingAArampdeltaSTdsXdtXfromto","lastLength","fillSortsbefore","fillEntry1","fillEntry2","stackFillDepth","stackFillValue","isFillColor","lastExportedFillPut","lastExportedLeftXPut","lastExportedRightXPut","fillTypeOf","GEPrimitiveFillMask","findNextExternalEntryFromGET","getStartGet","GEPrimitiveWideMask","GEPrimitiveEdge","stepToFirstLine","stepToFirstWideLine","stepToFirstBezier","stepToFirstWideBezier","insertEdgeIntoAET","getStartPut","findNextExternalFillFromAET","leftEdge","rightEdge","toggleWideFillOf","toggleFillsOf","findNextExternalUpdateFromAET","removeFirstAETEntry","stepToNextLine","stepToNextWideLine","stepToNextBezier","stepToNextWideBezier","resortFirstAETEntry","findStackFilldepth","stackFillSize","finishedProcessing","stateGet","GEStateCompleted","freeStackFillEntry","wbStackPop","getSortsbefore","edge1","edge2","GWGETStart","GWGETUsed","GFRampLength","GFRampOffset","hasColorTransformGet","GWHasColorTransform","hasColorTransformPut","hasEdgeTransform","hasEdgeTransformGet","GWHasEdgeTransform","hasEdgeTransformPut","hideFilldepth","newDepth","newRightX","newTop","newTopIndex","stackFillValueput","stackFillDepthput","stackFillRightXput","stackFillRightX","topFillValue","topFillValuePut","topFillDepth","topFillDepthPut","topFillRightX","topFillRightXPut","incrementStatby","statIndex","indexForInsertingIntoAET","initialX","initColorTransform","initEdgeTransform","loadBBFn","bbPluginName","initializeGETProcessing","setAALevel","sortGlobalEdgeTable","insertToAETbeforeIndex","GEPrimitiveEdgeMask","isFill","isRealFill","isObject","GEPrimitiveWide","lastExportedEdgeGet","GWLastExportedEdge","lastExportedEdgePut","GWLastExportedFill","GWLastExportedLeftX","GWLastExportedRightX","GLEndX","lineEndXOfput","GLEndY","lineEndYOfput","lineErrorAdjDownOf","GLErrorAdjDown","lineErrorAdjDownOfput","lineErrorAdjUpOf","GLErrorAdjUp","lineErrorAdjUpOfput","lineErrorOf","GLError","lineErrorOfput","GLXDirection","lineXDirectionOfput","GLXIncrement","lineXIncrementOfput","lineYDirectionOfput","GLYDirection","loadAndSubdivideBezierFromviatoisWide","point1","point2","point3","wideFlag","bz1","bz2","index1","index2","subdivideToBeMonotoninX","subdivideBezierFrom","loadArrayPolygonnPointsfilllineWidthlineFill","nPoints","lineFill","y0","y1","loadPointfrom","point2Get","transformPoints","loadWideLinefromtolineFillleftFillrightFill","loadArrayShapenSegmentsfilllineWidthlineFill","pointOop","segs","x2","y2","point3Get","loadWideBezierlineFillleftFillrightFilln","loadArrayTransformFromintolength","transformOop","destPtr","loadBeziersegmentleftFillrightFilloffset","leftFillIndex","rightFillIndex","yOffset","loadBitBltFrom","bbObj","loadBitmapFillcolormaptilefromalongnormalxIndex","formOop","cmOop","xIndex","bmBits","bmBitsSize","ppw","loadFillOrientationfromalongnormalwidthheight","bitsLen","bitsOop","objectIndexOf","formArray","loadColorTransformFrom","okay","loadTransformFromintolength","loadCompressedSegmentfromshortleftFillrightFilllineWidthlineColor","segmentIndex","pointsShort","leftFill","rightFill","loadCompressedShapesegmentsleftFillsrightFillslineWidthslineFillsfillIndexListpointShort","leftLength","leftRun","leftValue","lineFillLength","lineFillRun","lineFillValue","rightLength","rightRun","rightValue","widthLength","widthRun","widthValue","transformWidth","loadEdgeStateFrom","edgeOop","ETBalloonEdgeDataSize","ETXValueIndex","ETYValueIndex","ETZValueIndex","ETLinesIndex","loadEdgeTransformFrom","fillWidth","fillHeight","dirX","dirY","dsLength2","dsY","dtLength2","dtY","nrmX","nrmY","transformPoint","loadFormsFrom","arrayOop","loadGradientFillfromalongnormalisRadial","rampOop","loadLinefromtooffsetleftFillrightFill","p1","p2","yDir","loadOvallineFillleftFillrightFill","cx","cy","loadOvalSegmentwhcxcy","seg","pointArray","loadPolygonnPointsfilllineWidthlineFillpointsShort","isShort","loadRectanglelineFillleftFillrightFill","point4Get","loadRenderingState","failCode","fillOop","PrimErrBadNumArgs","quickLoadEngineFrom","PrimErrBadArgument","loadSpanBufferFrom","BESpanIndex","engine","BEBitBltIndex","BEFormsIndex","GEFEdgeDataTooSmall","FTBalloonFillDataSize","GEFFillDataTooSmall","GEStateWaitingForEdge","GEStateWaitingForFill","GEStateWaitingChange","GEFWrongState","GEFFormLoadFailed","GEFBitBltLoadFailed","loadShapenSegmentsfilllineWidthlineFillpointsShort","spanOop","GEFClassMismatch","spanSizePut","loadWordTransformFromintolength","wide","wideBezierFillOfput","wideBezierExtentOfput","wbStackClear","wideLineFillOfput","wideLineExtentOfput","srcPtr","loadWorkBufferFrom","wbOop","GEFWorkBufferIsInteger","GWMinimalSize","GEFWorkBufferTooSmall","workBufferPut","magicNumberGet","GWMagicNumber","GEFWorkBufferBadMagic","wbSizeGet","GEFWorkBufferWrongSize","objStartGet","GWHeaderSize","GEFWorkBufferStartWrong","objUsedGet","GEFWorkTooBig","GEFWorkBufferIsPointers","GWMagicIndex","magicNumberPut","moduleUnloaded","aModuleName","strcmp","moveAETEntryFromedgex","xValue","wbTopGet","stopBecauseOf","GErrorNoMoreSpace","needsFlush","needsFlushGet","GWNeedsFlush","needsFlushPut","GWObjStart","objStartPut","GWObjUsed","objUsedPut","GEObjectType","GEObjectIndex","GEObjectLength","GEPrimitiveTypeMask","GWPoint1","GWPoint2","GWPoint3","GWPoint4","postDisplayAction","statePut","primitiveAbortProcessing","failureCode","storeEngineStateInto","primitiveAddActiveEdgeEntry","doProfileStats","geProfileTime","ioMicroMSecs","quickLoadEngineFromrequiredState","GEFEngineStopped","GEStateAddingFromGET","GWCountAddAETEntry","GWTimeAddAETEntry","primitiveAddBezier","endOop","startOop","viaOop","GEStateUnlocked","GEFEntityLoadFailed","GEFWrongFill","primitiveAddBezierShape","pointsIsArray","segSize","primitiveAddBitmapFill","dirOop","nrmOop","originOop","GEFBadPoint","primitiveAddCompressedShape","GEFEntityCheckFailed","primitiveAddGradientFill","primitiveAddLine","primitiveAddOval","borderIndex","borderWidth","primitiveAddPolygon","primitiveAddRect","primitiveChangedActiveEdgeEntry","GEStateUpdateEdges","GWCountChangeAETEntry","GWTimeChangeAETEntry","primitiveCopyBuffer","buf1","buf2","GEFSizeMismatch","GWBufferTop","GWSize","primitiveDisplaySpanBuffer","GEStateBlitBuffer","GWCountDisplaySpan","GWTimeDisplaySpan","primitiveDoProfileStats","newValue","oldValue","primitiveFinishedProcessing","finished","GWCountFinishTest","GWTimeFinishTest","primitiveGetAALevel","primitiveGetBezierStats","statOop","GWBezierMonotonSubdivisions","GWBezierHeightSubdivisions","GWBezierOverflowSubdivisions","GWBezierLineConversions","primitiveGetClipRect","rectOop","topRemappableOop","primitiveGetCounts","GWCountInitializing","GWCountNextGETEntry","GWCountNextFillEntry","GWCountMergeFill","GWCountNextAETEntry","primitiveGetDepth","primitiveGetFailureReason","GEFEngineIsInteger","BEBalloonEngineSize","GEFEngineTooSmall","BEWorkBufferIndex","stopReasonGet","GEFEngineIsWords","primitiveGetOffset","primitiveGetTimes","GWTimeInitializing","GWTimeNextGETEntry","GWTimeNextFillEntry","GWTimeMergeFill","GWTimeNextAETEntry","primitiveInitializeBuffer","wbSizePut","wbTopPut","GEPrimitiveFill","stopReasonPut","resetGraphicsEngineStats","primitiveInitializeProcessing","primitiveMergeFillFrom","FTIndexIndex","FTMinXIndex","FTMaxXIndex","GEStateScanningAET","primitiveNeedsFlush","needFlush","primitiveNeedsFlushPut","primitiveNextActiveEdgeEntry","hasEdge","quickLoadEngineFromrequiredStateor","storeEdgeStateFrominto","primitiveNextFillEntry","hasFill","storeFillStateInto","primitiveNextGlobalEdgeEntry","GEFWrongEdge","primitiveRegisterExternalEdge","initialY","initialZ","GEBaseEdgeSize","primitiveRegisterExternalFill","GEBaseFillSize","primitiveRenderImage","proceedRenderingScanline","storeRenderingState","proceedRenderingImage","primitiveRenderScanline","primitiveSetAALevel","level","primitiveSetBitBltPlugin","needReload","newPluginName","primitiveSetClipRect","primitiveSetColorTransform","primitiveSetDepth","primitiveSetEdgeTransform","primitiveSetOffset","external","GErrorGETEntry","GErrorFillEntry","GErrorAETEntry","engineOop","GEFAlreadyFailed","requiredState","GErrorBadState","alternativeState","topDepth","quickSortGlobalEdgeTablefromto","before","dij","dj","ij","k","tmp","tt","newDelta","returnWideBezierFill","dispatchReturnValue","wideBezierFillOf","dispatchedValue","returnWideBezierWidth","wideBezierWidthOf","returnWideLineFill","wideLineFillOf","returnWideLineWidth","runArray","showFilldepthrightX","GWSpanEndAA","GWSpanEnd","GWSpanSize","GWSpanStart","GWState","stepToFirstBezierInat","fwDDx","fwDDy","fwDx","fwDy","fwX1","fwX2","fwY1","fwY2","maxSteps","scaledStepSize","squaredStepSize","updateData","GBUpdateDX","GBUpdateDY","GBUpdateDDX","GBUpdateDDY","stepToNextBezierInat","stepToFirstLineInat","errorAdjUp","widthX","xInc","stepToNextLineInat","stepToFirstWideBezierInat","nLines","wideBezierEntryOfput","wideBezierExitOfput","stepToNextWideBezierInat","stepToFirstWideLineInat","wideLineEntryOfput","wideLineExitOfput","stepToNextWideLineInat","stepToNextBezierForwardat","minY","wideBezierEntryOf","wideBezierExitOf","stopReason","GWStopReason","ETIndexIndex","FTYValueIndex","storeStopStateIntoEdgefill","subdivideBezier","otherIndex","base","doTestX","base2","subdivideToBeMonotonInY","subdivideToBeMonotonInX","denom","dx1","dx2","dy1","dy2","toggleFilldepthrightX","hidden","alphaScale","GErrorNeedFlush","point","transformPointinto","srcPoint","dstPoint","transformPointXyinto","dstWidth","dstWidth2","GBWideEntry","GBWideExit","GBWideExtent","GBWideFill","GBWideUpdateData","GBWideWidth","GLWideEntry","GLWideExit","GLWideExtent","GLWideFill","GLWideWidth","SHIFT","OLDrgbDiffwith","sourceWord","destinationWord","pixMask","destDepth","maskTable","bitCount","partitionedSubfromnBitsnPartitions","OLDtallyIntoMapwith","mapIndex","shiftWord","cmFlags","ColorMapPresent","ColorMapIndexedPart","cmMask","destPPW","tallyMapAtput","tallyMapAt","rgbMapfromto","cmBitsPerColor","addWordwith","alphaBlendwith","unAlpha","blendRB","blendAG","alpha","alphaBlendConstwith","alphaBlendConstwithpaintMode","paintMode","rgbMask","pixBlend","sourceShifted","sourcePixVal","destPixVal","bitsPerColor","blend","destShifted","maskShifted","sourceAlpha","destMask","alphaBlendScaledwith","rb","ag","alphaPaintConstwith","alphaSourceBlendBits16","ditherBase","ditherThreshold","srcAlpha","dstMask","destWord","dstY","ditherIndex","bbH","sy","dy","dx","destMSB","mask1","sourcePitch","sx","destPitch","bbW","ditherMatrix4x4","sourceBits","dither32To16threshold","dstLongAtputmask","destBits","alphaSourceBlendBits32","alphaSourceBlendBits8","mappingTable","mapperFlags","default8To32Table","ColorMapNewStyle","mask2","AllOnes","mapPixelflags","bitAndwith","bitAndInvertwith","bitInvertAndwith","bitInvertAndInvertwith","bitInvertDestinationwith","bitInvertOrwith","bitInvertOrInvertwith","bitInvertSourcewith","bitInvertXorwith","bitOrwith","bitOrInvertwith","bitXorwith","checkSourceOverlap","sourceForm","destForm","vDir","hDir","destIndex","destDelta","clearWordwith","clipRange","destX","clipX","sourceX","clipWidth","destY","clipY","sourceY","clipHeight","noSource","sourceWidth","sourceHeight","copyBits","affectedL","affectedR","affectedT","affectedB","lockSurfaces","copyBitsLockedAndClipped","unlockSurfaces","showDisplayBits","copyBitsRule41Test","tryCopyingBitsQuickly","combinationRule","performCopyLoop","ungammaLookupTableOop","gammaLookupTableOop","componentAlphaModeAlpha","componentAlphaModeColor","gammaLookupTable","ungammaLookupTable","copyLoop","mergeWord","skewWord","skewMask","halftoneWord","unskew","mergeFnwith","hInc","prevWord","thisWord","notSkewMask","opTable","skew","noHalftone","halftoneHeight","halftoneAt","preload","sourceIndex","sourceDelta","copyLoopNoSource","copyLoopPixMap","srcShiftInc","dstShiftLeft","sourcePixMask","nSourceIncs","startBits","dstShift","destPixMask","dstShiftInc","endBits","nPix","scrStartBits","sourcePPW","sourceDepth","sourceMSB","srcBitShift","dstBitShift","pickSourcePixelsflagssrcMaskdestMasksrcShiftIncdstShiftInc","deltaFromtonSteps","FixedPt1","destMaskAndPointerInit","pixPerM1","destinationWordwith","srcWord","ditherValue","addThreshold","dither8Lookup","drawLoopXY","xDelta","yDelta","P","affT","px","affR","affL","py","affB","BBDestXIndex","bitBltOop","BBDestYIndex","srcValue","dstValue","expensiveDither32To16threshold","pv","threshold","out","ditherThresholds16","ditherValues16","fetchIntOrFloatofObject","fieldIndex","objectPointer","floatValue","fieldOop","fetchIntOrFloatofObjectifNil","defaultValue","fixAlphawith","halftoneBase","ignoreSourceOrHalftone","formPointer","initBBOpTable","sourceWordwith","subWordwith","rgbAddwith","rgbSubwith","pixPaintwith","pixMaskwith","rgbMaxwith","rgbMinwith","rgbMinInvertwith","rgbDiffwith","tallyIntoMapwith","rgbMulwith","pixSwapwith","pixClearwith","rgbComponentAlphawith","initDither8Lookup","isIdentityMapwith","shifts","masks","RedIndex","GreenIndex","BlueIndex","AlphaIndex","loadBitBltDestForm","destBitsSize","FormBitsIndex","destWidth","FormWidthIndex","destHeight","FormHeightIndex","FormDepthIndex","queryDestSurface","loadBitBltFromwarping","aBool","isWarping","BBRuleIndex","OpTableSize","BBSourceFormIndex","halftoneForm","BBHalftoneFormIndex","BBDestFormIndex","BBWidthIndex","BBHeightIndex","loadBitBltSourceForm","loadColorMap","setupColorMasks","BBSourceXIndex","BBSourceYIndex","loadHalftoneForm","BBClipXIndex","BBClipYIndex","BBClipWidthIndex","BBClipHeightIndex","sourceBitsSize","querySourceSurface","oldStyle","cmShiftTable","cmMaskTable","cmLookupTable","BBColorMapIndex","loadColorMapShiftOrMaskFrom","ColorMapFixedPart","mapOop","halftoneBits","loadSurfacePlugin","querySurfaceFn","lockSurfaceFn","unlockSurfaceFn","loadWarpBltFrom","destHandle","sourceHandle","fn","hasSurfaceLock","sourcePixel","rgbMapPixelflags","partitionedANDtonBitsnPartitions","nBits","nParts","partitionedAddtonBitscomponentMaskcarryOverflowMask","componentMask","carryOverflowMask","w2","carryOverflow","sum","w1","partitionedMaxwithnBitsnPartitions","partitionedMinwithnBitsnPartitions","partitionedMulwithnBitsnPartitions","dMask","product","sMask","partitionedRgbComponentAlphadestnBitsnPartitions","rgbMap16To32","rgbComponentAlpha32with","sourceSkewAndPointerInit","nPixels","srcMask","sourcePix","destPix","pickWarpPixelAtXy","xx","yy","warpAlignShift","warpBitShiftTable","warpAlignMask","warpSrcMask","lowMask","highMask","primitiveCopyBits","primitiveDisplayString","charIndex","sourcePtr","stopIndex","xTable","maxGlyph","quickBlt","glyphIndex","glyphMap","kernDelta","sourceString","primitiveDrawLoop","primitivePixelValueAt","pixel","bitmap","ppW","stride","bitsSize","xVal","yVal","_return_value","primitiveWarpBits","warpBits","d","rgbComponentAlpha16","rgbComponentAlpha32","srcColor","aG","aA","aR","aB","answer","s","rgbComponentAlpha8","rgbMap32To32","nBitsIn","nBitsOut","srcPix","wordToInvert","targetBits","setupColorMasksFromto","srcBits","deltaBits","dxLowBits","sxLowBits","dWid","pixVal","destLocked","ns","warpLoop","nSteps","deltaP43y","deltaP43x","pBy","pAy","pBx","sourceMapOop","pAx","deltaP12y","deltaP12x","smoothingCount","BBWarpBase","warpLoopSetup","warpPickSourcePixelsxDeltahyDeltahxDeltavyDeltavdstShiftIncflags","warpPickSmoothPixelsxDeltahyDeltahxDeltavyDeltavsourceMapsmoothingdstShiftInc","warpSrcShift","xDeltah","yDeltah","xDeltav","yDeltav","sourceMap","xdh","ydh","xdv","ydv","checkedFloatPtrOf","checkedWordPtrOf","loadFFTFrom","fftOop","nu","fftSize","sinTableSize","sinTable","permTableSize","permTable","realDataSize","realData","imagDataSize","imagData","permuteData","scaleData","forward","transformData","realN","transformForward","fftScale","fftSize2","fftSize4","ii","imagT","imagU","ip","lev","lev1","realT","realU","theta","primitiveAddFloatArray","argPtr","rcvrPtr","primitiveAddScalar","primitiveAt","floatPtr","primitiveAtPut","primitiveDivFloatArray","primitiveDivScalar","inverse","primitiveDotProduct","primitiveEqual","primitiveHashArray","primitiveLength","primitiveMulFloatArray","primitiveMulScalar","primitiveNormalize","len","primitiveSubFloatArray","primitiveSubScalar","primitiveSum","cSquaredDistanceFromto","aPoint","bPoint","aPointX","bPointX","xDiff","aPointY","bPointY","yDiff","cSubstAngleFactorFromto","startDegreeNumber","endDegreeNumber","absDiff","majorNO","minorNO","primSameClassAbsoluteStrokeDistanceMyPoints_otherPoints_myVectors_otherVectors_mySquaredLengths_otherSquaredLengths_myAngles_otherAngles_maxSizeAndReferenceFlag_rowBase_rowInsertRemove_rowInsertRemoveCount","otherAngles","otherSquaredLengthsSize","forReference","jM1","iM1","jM1T2","insert","otherVectors","otherVectorsSize","otherSquaredLengths","rowBaseSize","myPoints","jLimiT","mySquaredLengths","additionalMultiInsertRemoveCost","otherPoints","otherPointsSize","myVectors","rowInsertRemoveCount","rowBase","maxDist","iM1T2","insertRemove","myVectorsSize","subst","maxSize","removeBase","substBase","myAngles","insertRemoveCount","rowInsertRemove","insertBase","myPointsOop","otherPointsOop","myVectorsOop","otherVectorsOop","mySquaredLengthsOop","otherSquaredLengthsOop","myAnglesOop","otherAnglesOop","maxSizeAndRefFlag","rowBaseOop","rowInsertRemoveOop","rowInsertRemoveCountOop","primVersionNO","cbColorComponentFrom","colorComponentfrom","cbComponent","colorComponentBlocksfrom","cbBlocks","aColorComponent","MinComponentSize","CurrentXIndex","CurrentYIndex","HScaleIndex","VScaleIndex","BlockWidthIndex","MCUWidthIndex","PriorDCValueIndex","blocks","blockOop","MCUBlockIndex","MaxMCUBlocks","DCTSize2","colorConvertGrayscaleMCU","yComponent","jpegBitsSize","nextSampleY","residuals","MaxSample","ditherMask","jpegBits","colorConvertMCU","blue","cb","cr","green","red","crComponent","nextSampleCb","SampleOffset","nextSampleCr","FIXn1n40200","FIXn0n34414","FIXn0n71414","FIXn1n77200","crColorComponentFrom","crBlocks","decodeBlockIntocomponent","anArray","zeroCount","jpegDecodeValueFromsize","dcTable","dcTableSize","getBits","scaleAndSignExtendinFieldWidth","acTable","acTableSize","jpegNaturalOrder","fillBuffer","jsBitCount","jsReadLimit","jsPosition","jsCollection","jsBitBuffer","requestedBits","idctBlockIntqt","qt","anACTerm","dcval","row","t0","t1","t10","t11","t12","t13","t2","t3","z1","z2","z3","z4","z5","ws","DCTSize","FIXn0n541196100","FIXn1n847759065","FIXn0n765366865","FIXn1n175875602","FIXn0n298631336","FIXn2n053119869","FIXn3n072711026","FIXn1n501321110","FIXn0n899976223","FIXn2n562915447","FIXn1n961570560","FIXn0n390180644","tableSize","bitsNeeded","tableIndex","MaxBits","loadJPEGStreamFrom","streamOop","blockIndex","curX","sample","yBlocks","primitiveColorConvertGrayscaleMCU","stInit","yColorComponentFrom","primitiveColorConvertMCU","primitiveDecodeMCU","storeJPEGStreamOn","primitiveIdctInt","aNumber","degreesFromXy","tanVal","degreesToRadians","degrees","deg","headingRadians","q","drawTurtlesInArray","bitsIndex","colorArray","colorOop","destOop","visible","visibleArray","visibleOop","xArray","xOop","yArray","yOop","getHeadingArrayInto","heading","headingArray","headingOop","resultArray","resultOop","getScalarHeading","radiansToDegrees","kedamaRandomSeed","randA","randM","randQ","randR","kedamaRandom2","range","hi","lo","kedamaSetRandomSeed","seed","makeMask","dOrigin","dataBits","dataSize","mOrigin","maskBits","maskSize","shiftAmount","makeMaskLog","maxFirst","maxLog","maxOop","makeTurtlesMap","whoArray","whoOop","primPixelAtXY","xPos","yPos","primPixelAtXYPut","primPixelsAtXY","bitsHeight","bitsWidth","destWords","destWordsOop","xArrayOop","yArrayOop","primScalarForward","bottomEdgeMode","leftEdgeMode","newX","newY","rightEdgeMode","topEdgeMode","cos","scalarXAtxArrayheadingArrayvaluedestWidthleftEdgeModerightEdgeMode","scalarYAtyArrayheadingArrayvaluedestHeighttopEdgeModebottomEdgeMode","primSetPixelsAtXY","intValue","isValueInt","valueOop","wordsValue","primTurtlesForward","isValVector","valArray","valOop","primUpHill","maxVal","maxValX","maxValY","rowOffset","sniffRange","tH","tX","tY","thisVal","turtleX","turtleY","primitiveAddArrays","argOop","floatsArg","floatsRcvr","floatsResult","isArgWords","isRcvrWords","rcvrOop","wordsArg","wordsRcvr","wordsResult","floatArg","intArg","isArgInt","primitiveDivArrays","primitiveMulArrays","primitiveSubArrays","radians","randomIntoFloatArray","factor","floatArray","floatArrayOop","randomIntoIntegerArray","integerArray","integerArrayOop","randomRange","scalarGetAngleTo","fromX","fromY","toX","toY","scalarGetDistanceTo","setHeadingArrayFrom","setScalarHeading","shutdownModule","turtleScalarSetX","turtleScalarSetY","yIndex","turtlesSetX","turtlesSetY","vectorGetAngleTo","isVector","pX","pXOop","pY","pYOop","ppx","ppy","vectorGetDistanceTo","zoomBitmap","dstSize","dummy","sHeight","sOrigin","sWidth","srcOrigin","srcSize","xFactor","yFactor","floatsValue","fv","isValueWordArray","pArray","pArrayOop","pOop","primitiveAndByteArray","length1","otherArray","otherOop","rcvrArray","primitiveEQArrays","bytesResult","primitiveEQScalar","primitiveGEArrays","primitiveGEScalar","primitiveGTArrays","primitiveGTScalar","primitiveLEArrays","primitiveLEScalar","primitiveLTArrays","primitiveLTScalar","primitiveNEArrays","primitiveNEScalar","primitiveNotByteArray","primitiveOrByteArray","primitivePredicateAtAllPutBoolean","predicates","predicatesOop","values","valuesOop","primitivePredicateAtAllPutColor","primitivePredicateAtAllPutNumber","primitivePredicateAtAllPutObject","primitivePredicateReplaceBytes","predicatesSize","repOop","repStart","replacement","replacementSize","valuesSize","primitivePredicateReplaceWords","floatReplacement","floatValues","rIsFloat","vIsFloat","primitiveRemArrays","floatRcvr","floatResult","wordArg","wordRcvr","wordResult","primitiveRemScalar","isWordVector","wordValArray","addAmplitudeDiplophonia","periodCount","frame","Diplophonia","addFlutter","asin","bsin","csin","deltaF0","timeCount","samplesCount","samplingRate","PI","Flutter","F0","addFrequencyDiplophonia","Ro","addJitter","nextRandom","Jitter","addShimmer","Shimmer","antiResonatorfrequencybandwidth","freq","bw","resonatorAput","resonatorBput","resonatorCput","antiResonatorvalue","aFloat","resonatorA","resonatorB","resonatorP1","resonatorC","resonatorP2","resonatorP2put","resonatorP1put","cascadeBranch","cascade","Rnz","resonatorvalue","Rnpc","Rtz","Rtpc","R8c","R7c","R6c","R5c","R4c","R3c","R2c","R1c","checkedShortPtrOf","glottalSource","nopen","nper","a1","a2","c1","pitchSynchronousReset","linearFromdB","loadFrom","klattOop","resonators","nmod","glast","vlast","nlast","samplesPerFrame","normalizeGlottalPulse","ingore","s0","s1","s2","parallelFrictionBranch","R2fp","R3fp","R4fp","R5fp","R6fp","parallelVoicedBranch","R1vp","R2vp","R3vp","R4vp","Rnpp","Rtpp","voicedPitchSynchronousReset","primitiveSynthesizeFrameIntoStartingAt","aKlattFrame","bufferOop","synthesizeFrameintostartingAt","saveTo","quphicosphisinphirphid","u","phi","cosphi","sinphi","rphid","expuphi","resonatorfrequencybandwidth","resonatorfrequencybandwidthgain","gain","rorark","roNumber","raNumber","rkNumber","gamma","gammapwr","ra","rho","rk","ro","te","zeroQphicosphisinphirphid","origKlattOop","a1Oop","a2Oop","b1Oop","c1Oop","glastOop","nlastOop","pitchOop","vlastOop","x1Oop","x2Oop","setCurrentFrame","ampF1V","ampF2F","ampF2V","ampF3F","ampF3V","ampF4F","ampF4V","ampF5F","ampF6F","ampFNV","ampFTV","Anv","Atv","A1v","A2v","A3v","A4v","A2f","A3f","A4f","A5f","A6f","F6","B6","F5","B5","F4","B4","F3","B3","F2","B2","F1","B1","Fnp","Bnp","Ftp","Btp","Fnz","Bnz","Ftz","Btz","B2f","B3f","B4f","B5f","B6f","ampGain","aspiration","aspirationNoise","bypass","friction","frictionNoise","glotout","noise","parGlotout","parVoicing","turbulence","voicing","Voicing","Turbulence","Friction","Aspiration","Bypass","Gain","Rout","Ra","Rk","qa","qb","qc","qzero","ua","ub","uc","Epsilon","anyBitOfBytesfromto","aBytesOop","stopArg","lastByteIx","digit","magnitude","leftShift","rightShift","firstByteIx","ix","highBitOfBytes","digitOfBytesat","bytesgrowTo","aBytesObject","newLen","oldLen","copyLen","cDigitCopyFromtolen","bytesOrIntgrowTo","sq_class","cCopyIntValtoBytes","pByte","ixLimiT","cDigitLengthOfCSI","cDigitOfCSIat","cDigitAddlenwithleninto","pByteShort","shortLen","pByteLong","longLen","pByteRes","accum","cDigitComparewithlen","pFirst","pSecond","firstDigit","secondDigit","pFrom","pTo","cDigitDivlenremlenquolen","pDiv","divLen","pRem","remLen","pQuo","quoLen","dnh","r3","mul","cond","dl","ql","r1r2","dh","cDigitHighBitlen","lastDigit","realLength","cHighBit","csi","cDigitLshiftfromlentolen","lenFrom","lenTo","digitShift","carry","bitShift","rshift","cDigitReplacefromtowithstartingAt","cDigitMontgomerylentimeslenmodulolenmInvModBinto","pBytesFirst","firstLen","pBytesSecond","secondLen","pBytesThird","thirdLen","mInv","pBytesRes","lastByte","limit3","limit2","limit1","cDigitMultiplylenwithleninto","ab","limitLong","limitShort","cDigitOpshortlenlongleninto","opIndex","andOpIndex","orOpIndex","xorOpIndex","cDigitRshiftfromlentolen","fromLen","toLen","cDigitSublenwithleninto","pByteSmall","smallLen","pByteLarge","largeLen","z","uint","bitNo","createLargeFromSmallInteger","anOop","digitLshift","highBit","digitRshiftlookfirst","newOop","oldDigitLen","newByteLen","newBitLen","oldBitLen","digitAddLargewith","firstInteger","secondInteger","over","shortInt","resClass","newSum","longInt","digitBitLogicwithopIndex","opIx","shortLarge","firstLarge","secondLarge","longLarge","normalizePositive","digitCompareLargewith","digitDivLargewithnegative","neg","resultClass","rem","quo","unsafeByteOfat","digitLength","digitMontgomerytimesmodulomInvModB","thirdLarge","prod","digitMultiplyLargewithnegative","normalize","digitSubLargewith","smallerLen","larger","smaller","resLen","largerLen","firstNeg","normalizeNegative","isNormalized","sLen","minVal","aLargeInteger","aLargeNegativeInteger","aLargePositiveInteger","primAnyBitFromTo","large","primAsLargeInteger","primCheckIfCModuleExists","_primDigitBitShift","aLarge","primDigitAdd","primDigitAddWith","primDigitBitAnd","primDigitBitLogicWithOp","primDigitBitOr","primDigitBitShift","primDigitBitShiftMagnitude","primDigitBitXor","primDigitCompare","firstVal","secondVal","primDigitCompareWith","primDigitDivNegative","firstAsLargeInteger","secondAsLargeInteger","primDigitDivWithNegative","primDigitMultiplyNegative","primDigitMultiplyWithNegative","primDigitSubtract","primDigitSubtractWith","primGetModuleName","strPtr","strLen","strOop","strlen","primMontgomeryTimesModulo","secondOperandInteger","thirdModuloInteger","smallInverseInteger","primNormalize","primNormalizeNegative","primNormalizePositive","bytesOop","pointer","loadArgumentMatrix","matrix","loadArgumentPoint","isInt","m23ArgX","m23ArgY","matrix2x3ComposeMatrixwithinto","m1","m2","m3","a11","a12","a13","a21","a22","a23","matrix2x3InvertPoint","det","detX","detY","m23ResultX","m23ResultY","matrix2x3TransformPoint","okayIntValue","primitiveComposeMatrix","primitiveInvertPoint","roundAndStoreResultPoint","primitiveInvertRectInto","cornerX","cornerY","dstOop","maxX","maxY","minX","originX","originY","srcOop","roundAndStoreResultRectx0y0x1y1","primitiveIsIdentity","primitiveIsPureTranslation","primitiveTransformPoint","primitiveTransformRectInto","nItemsToPop","cornerOop","encodeBytesOfinat","ba","encodeIntinat","primitiveCompareString","string1","string2","order","c2","len1","len2","primitiveCompressToByteArray","bm","eqBytes","lowByte","primitiveConvert8BitSigned","aByteArray","aSoundBuffer","primitiveDecompressFromByteArray","pastEnd","primitiveFindFirstInString","aString","inclusionMap","stringSize","primitiveFindSubstring","matchTable","primitiveIndexOfAsciiInString","primitiveStringHash","speciesHash","byteArraySize","low","primitiveTranslateStringWithTable","bitmapatputHsv","hue","saturation","brightness","hF","hI","outPix","checkedUnsignedIntPtrOf","hueFromRGBminmax","span","interpolateandfrac","pix1","pix2","frac2","frac1","interpolatedFromxywidthheight","xFixed","yFixed","bottomPix","topPix","xFrac","yFrac","primitiveBlur","bTotal","dX","dY","gTotal","in_","inOop","outOop","pix","rTotal","primitiveBrightnessShift","primitiveCondenseSound","_src","_dst","primitiveDoubleSize","baseIndex","dstX","inH","inW","outH","outW","primitiveExtractChannel","rightFlag","primitiveFisheye","ang","centerX","centerY","power","scaledPower","atan2","primitiveHalfSizeAverage","dstH","dstW","primitiveHalfSizeDiagonal","primitiveHueShift","primitiveInterpolate","primitiveSaturationShift","primitiveScale","inX","inY","outX","outY","p3","p4","tWeight","w3","w4","xIncr","yIncr","primitiveWaterRipples1","aArOop","aArray","allPix","bArOop","bArray","blops","newLoc","ripply","primitiveWhirl","cosa","radius","radiusSquared","scaleX","scaleY","sina","whirlRadians","primitiveApplyReverb","delayedLeft","delayedRight","sliceIndex","tapGain","tapIndex","bufferIndex","leftBuffer","rightBuffer","tapCount","tapDelays","tapGains","primitiveMixFMSound","leftVol","rightVol","doingFM","lastIndex","normalizedModulation","scaledIndex","scaledIndexIncr","scaledOffsetIndex","scaledOffsetIndexIncr","scaledVol","scaledVolIncr","scaledVolLimit","scaledWaveTableSize","waveTable","primitiveMixLoopedSampledSound","compositeLeftVol","compositeRightVol","isInStereo","leftVal","nextSampleIndex","rightVal","lastSample","leftSamples","loopEnd","releaseCount","scaledLoopLength","LoopIndexFractionMask","LoopIndexScaleFactor","primitiveMixPluckedSound","average","scaledNextIndex","scaledThisIndex","ring","scaledIndexLimit","ScaleFactor","primitiveMixSampledSound","outIndex","overflow","indexHighBits","samplesSize","scaledIncrement","ScaledIndexOverflow","primitiveDiffuseFromToWidthHeightDelta","area","rowStart","primitiveEvaporateRate","patchVar","patchVarOop","rate","primitiveMapFromToWidthHeightPatchSizeRgbFlagsShift","patchSize","rgbFlags","rgbMult","comparewithmin","here","matchPos","minLength","zipCollection","DeflateMaxMatch","deflateBlockchainLengthgoodMatch","chainLength","goodMatch","flushNeeded","hasMatch","hereLength","hereMatch","matchResult","newMatch","zipBlockPos","zipLiteralCount","zipLiteralSize","findMatchlastLengthlastMatchchainLengthgoodMatch","DeflateMinMatch","insertStringAt","encodeMatchdistance","encodeLiteral","determineSizeOfReadStream","readStreamInstSize","determineSizeOfWriteStream","writeStreamInstSize","lit","zipLiterals","zipDistances","zipLiteralFreq","shouldFlush","literal","zipMatchLengthCodes","zipDistanceCodes","zipDistanceFreq","zipMatchCount","lastMatch","maxChainLength","bestLength","zipHashHead","updateHashAt","DeflateMaxDistance","zipPosition","zipHashTail","DeflateWindowMask","prevEntry","zipHashValue","loadDeflateStreamFrom","zipCollectionSize","zipReadLimit","DeflateHashTableSize","DeflateWindowSize","DeflateMaxLiteralCodes","DeflateMaxDistanceCodes","loadZipEncoderFrom","zipBitBuf","zipBitPos","nextZipBitsput","tablePtr","zipDistTable","zipDistTableSize","zipLitTable","zipLitTableSize","zipState","zipSourcePos","zipSourceLimit","zipSource","zipDecompressBlock","primitiveUpdateAdler32","adler32","bytePtr","collection","crc","zipCrcTable","distStream","distTree","litStream","litTree","sendBlockwithwithwith","literalStream","distanceStream","distArray","distBitLengths","distBlCount","distCodes","litArray","litBlCount","litLimit","litPos","llBitLengths","llCodes","zipExtraLengthBits","zipBaseLength","zipExtraDistanceBits","zipBaseDistance","nLits","updateHash","nextValue","DeflateHashMask","zipDecodeValueFromsize","zipNextBits","oldBitPos","oldBits","oldPos","StateNoMoreData","_keyStr","_f","compressToBase64","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","compress","NaN","isNaN","charAt","decompressFromBase64","output_","ol","decompress","current","uncompressed","context_dictionary","context_dictionaryToCreate","context_c","context_wc","context_w","context_enlargeIn","context_dictSize","context_numBits","context_data_string","context_data_val","context_data_position","resb","maxpower","dictionary","enlargeIn","numBits","exports","define","amd","global","o","require",1,"utils","support","remainingBytes","getTypeOf","uint8array","./support","./utils",2,"CompressedObject","compressedSize","uncompressedSize","crc32","compression","compressedContent","DataWorker","DataLengthProbe","Crc32Probe","getContentWorker","worker","pipe","uncompressWorker","that","on","streamInfo","getCompressedWorker","withStreamInfo","createWorkerFrom","uncompressedWorker","compressionOptions","compressWorker","./external","./stream/Crc32Probe","./stream/DataLengthProbe","./stream/DataWorker",3,"GenericWorker","STORE","magic","DEFLATE","./flate","./stream/GenericWorker",4,"makeTable","crcTable","crc32str",5,"base64","binary","createFolders","date","unixPermissions","dosPermissions",6,"ES6Promise","es6-promise",7,"FlateWorker","action","_pako","pako","raw","meta","onData","USE_TYPEDARRAY","ARRAY_TYPE","inherits","processChunk","chunk","transformTo","flush","cleanUp","ZipFileWorker","streamFiles","platform","encodeFileName","bytesWritten","zipComment","zipPlatform","accumulate","contentBuffer","dirRecords","currentSourceOffset","entriesCount","currentFile","_sources","utf8","signature","decToHex","dec","generateUnixExternalFileAttr","generateDosExternalFileAttr","generateZipParts","streamedContent","streamingEnded","dosTime","dosDate","useCustomEncoding","utf8encode","encodedFileName","utfEncodedFileName","encodedComment","utfEncodedComment","useUTF8ForFileName","useUTF8ForComment","extraFields","unicodePathExtraField","unicodeCommentExtraField","dataInfo","bitflag","extFileAttr","versionMadeBy","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCFullYear","getUTCMonth","getUTCDate","fileRecord","LOCAL_FILE_HEADER","dirRecord","CENTRAL_FILE_HEADER","generateCentralDirectoryEnd","centralDirLength","localDirLength","dirEnd","CENTRAL_DIRECTORY_END","generateDataDescriptors","descriptor","DATA_DESCRIPTOR","currentFilePercent","percent","remainingFiles","openedSource","record","closedSource","prepareNextSource","previous","isPaused","pause","registerPrevious","generatedError","sources","lock","../crc32","../signature","../stream/GenericWorker","../utf8","../utils","compressions","getCompression","fileCompression","zipCompression","compressionName","generateWorker","zipFileWorker","relativePath","_compressWorker","../compressions","./ZipFileWorker",10,"defaults","./defaults","./load","./object",11,"checkEntryCRC32","zipEntry","decompressed","ZipEntries","nodejsUtils","checkCRC32","optimizedBinaryString","decodeFileName","utf8decode","isNode","isStream","prepareContent","zipEntries","promises","all","fileNameStr","fileCommentStr","./nodejsUtils","./utf8","./zipEntries",12,"Buffer","encoding","isBuffer","isRegExp","StreamHelper","ZipObject","NodejsStreamInputAdapter","fileAdd","dataType","forceTrailingSlash","parentFolder","folderAdd","isUnicodeString","isCompressedEmpty","zipObjectContent","substring","lastSlash","lastIndexOf","regexp","folder","newFolder","kids","generateInternalStream","opts","mimeType","checkSupport","generateAsync","onUpdate","generateNodeStream","toNodejsStream","./compressedObject","./generate","./nodejs/NodejsStreamInputAdapter","./stream/StreamHelper","./zipObject",14,"ArrayReader","DataReader","byteAt","zero","lastIndexOfSignature","sig","sig0","sig1","sig2","sig3","readAndCheckSignature","readData","checkOffset","./DataReader",15,"checkIndex","setIndex","skip","readInt","readString","readDate","dostime",16,"NodeBufferReader","Uint8ArrayReader","./Uint8ArrayReader",17,"StringReader",18,"./ArrayReader",19,"../support","./NodeBufferReader","./StringReader",20,"ZIP64_CENTRAL_DIRECTORY_LOCATOR","ZIP64_CENTRAL_DIRECTORY_END",21,"ConvertWorker","destType","./GenericWorker",22,23,24,"dataP","dataIsReady","_tickScheduled","_tickAndRepeat","DEFAULT_BLOCK_SIZE","delay","isFinished","_tick","nextIndex",25,"extraStreamInfo","isLocked","_listeners","emit","listener","mergeStreamInfo","withError","me",26,"transformZipOutput","newBlob","dataArray","helper","updateCallback","chunkType","_internalType","resultType","_outputType","_mimeType","outputType","internalType","_worker","NodejsStreamOutputAdapter","updateCb","objectMode","../base64","../external","../nodejs/NodejsStreamOutputAdapter","./ConvertWorker","nodebuffer","Builder","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","builder","append","getBlob","nodestream","./nodejs/NodejsStreamOutputAdapter",28,"Utf8DecodeWorker","leftOver","Utf8EncodeWorker","_utf8len","string2buf","m_pos","str_len","buf_len","utf8border","buf2string","c_len","utf16buf","applyFromCharCode","previousData","nextBoundary","usableData",29,"string2binary","stringToArrayLike","identity","arrayLikeToString","canUseApply","arrayToStringHelper","applyCanBeUsed","stringifyByChunk","stringifyByChar","arrayLikeToArrayLike","arrayFrom","arrayTo","asap","part","resultStr","inputType","supported","MAX_VALUE_16BITS","MAX_VALUE_32BITS","pretty","ctor","superCtor","Obj","inputData","isBinary","isOptimizedBinaryString","isBase64","promise","./base64",30,"loadOptions","readerFor","ZipEntry","checkSignature","expectedSignature","isSignature","askedIndex","currentIndex","readBlockEndOfCentral","diskNumber","diskWithCentralDirStart","centralDirRecordsOnThisDisk","centralDirRecords","centralDirSize","centralDirOffset","zipCommentLength","decodeParamType","decodeContent","readBlockZip64EndOfCentral","zip64EndOfCentralSize","zip64ExtensibleData","extraFieldId","extraFieldLength","extraFieldValue","extraDataSize","id","readBlockZip64EndOfCentralLocator","diskWithZip64CentralDirStart","relativeOffsetEndOfZip64CentralDir","disksCount","readLocalFiles","localHeaderOffset","readLocalPart","handleUTF8","processAttributes","readCentralDir","zip64","readCentralPart","readEndOfCentral","isGarbage","endOfCentralDirOffset","expectedEndOfCentralDirOffset","extraBytes","prepareReader","./reader/readerFor","./signature","./zipEntry",31,"crc32fn","MADE_BY_DOS","MADE_BY_UNIX","findCompression","compressionMethod","isEncrypted","bitFlag","useUTF8","localExtraFieldsLength","fileNameLength","extraFieldsLength","fileCommentLength","diskNumberStart","internalFileAttributes","externalFileAttributes","readExtraFields","parseZIP64ExtraField","fileComment","madeBy","extraReader","upath","findExtraFieldUnicodePath","fileNameByteArray","ucomment","findExtraFieldUnicodeComment","commentByteArray","upathField","ucommentField","./compressions","./crc32",32,"_data","_dataBinary","internalStream","askUnicodeString","_decompressWorker","nodeStream","removedMethods","removedFn","throwFirstError","pendingErrors","task","rawTask","freeTasks","RawTask","rawAsap","requestErrorThrow","makeRequestCallFromTimer","./raw","queue","requestFlush","flushing","capacity","scan","makeRequestCallFromMutationObserver","toggle","observer","BrowserMutationObserver","node","createTextNode","observe","characterData","handleTimer","timeoutHandle","clearInterval","intervalHandle","setInterval","MutationObserver","WebKitMutationObserver","cleanUpNextTick","draining","currentQueue","queueIndex","drainQueue","Item","fun","noop","nextTick","title","env","argv","addListener","once","off","removeListener","removeAllListeners","binding","cwd","chdir","umask","lib$es6$promise$utils$$objectOrFunction","lib$es6$promise$utils$$isFunction","lib$es6$promise$utils$$isMaybeThenable","lib$es6$promise$asap$$setScheduler","scheduleFn","lib$es6$promise$asap$$customSchedulerFn","lib$es6$promise$asap$$setAsap","asapFn","lib$es6$promise$asap$$asap","lib$es6$promise$asap$$useNextTick","lib$es6$promise$asap$$flush","lib$es6$promise$asap$$useVertxTimer","lib$es6$promise$asap$$vertxNext","lib$es6$promise$asap$$useMutationObserver","iterations","lib$es6$promise$asap$$BrowserMutationObserver","lib$es6$promise$asap$$useMessageChannel","MessageChannel","port1","onmessage","port2","postMessage","lib$es6$promise$asap$$useSetTimeout","lib$es6$promise$asap$$len","lib$es6$promise$asap$$queue","lib$es6$promise$asap$$attemptVertx","vertx","runOnLoop","runOnContext","lib$es6$promise$$internal$$noop","lib$es6$promise$$internal$$selfFulfillment","TypeError","lib$es6$promise$$internal$$cannotReturnOwn","lib$es6$promise$$internal$$getThen","lib$es6$promise$$internal$$GET_THEN_ERROR","lib$es6$promise$$internal$$tryThen","fulfillmentHandler","rejectionHandler","lib$es6$promise$$internal$$handleForeignThenable","thenable","sealed","lib$es6$promise$$internal$$resolve","lib$es6$promise$$internal$$fulfill","lib$es6$promise$$internal$$reject","_label","lib$es6$promise$$internal$$handleOwnThenable","_state","lib$es6$promise$$internal$$FULFILLED","_result","lib$es6$promise$$internal$$REJECTED","lib$es6$promise$$internal$$subscribe","lib$es6$promise$$internal$$handleMaybeThenable","maybeThenable","lib$es6$promise$$internal$$publishRejection","_onerror","lib$es6$promise$$internal$$publish","lib$es6$promise$$internal$$PENDING","_subscribers","onFulfillment","onRejection","subscribers","settled","detail","lib$es6$promise$$internal$$invokeCallback","lib$es6$promise$$internal$$ErrorObject","lib$es6$promise$$internal$$tryCatch","lib$es6$promise$$internal$$TRY_CATCH_ERROR","succeeded","hasCallback","lib$es6$promise$$internal$$initializePromise","resolver","lib$es6$promise$enumerator$$Enumerator","Constructor","enumerator","_instanceConstructor","_validateInput","_input","_remaining","_init","_enumerate","_validationError","lib$es6$promise$promise$all$$all","lib$es6$promise$enumerator$$default","lib$es6$promise$promise$race$$race","lib$es6$promise$utils$$isArray","lib$es6$promise$promise$resolve$$resolve","lib$es6$promise$promise$reject$$reject","lib$es6$promise$promise$$needsResolver","lib$es6$promise$promise$$needsNew","lib$es6$promise$promise$$Promise","_id","lib$es6$promise$promise$$counter","lib$es6$promise$polyfill$$polyfill","local","cast","lib$es6$promise$promise$$default","lib$es6$promise$utils$$_isArray","lib$es6$promise$asap$$scheduleFlush","lib$es6$promise$asap$$browserWindow","lib$es6$promise$asap$$browserGlobal","lib$es6$promise$asap$$isNode","lib$es6$promise$asap$$isWorker","Uint8ClampedArray","importScripts","_eachEntry","_settledAt","_willSettleAt","lib$es6$promise$promise$all$$default","lib$es6$promise$promise$race$$default","lib$es6$promise$promise$resolve$$default","lib$es6$promise$promise$reject$$default","race","_setScheduler","_setAsap","_asap","lib$es6$promise$polyfill$$default","lib$es6$promise$umd$$ES6Promise","polyfill","_process","assign","deflate","inflate","constants","./lib/deflate","./lib/inflate","./lib/utils/common","./lib/zlib/constants","Deflate","Z_DEFAULT_COMPRESSION","Z_DEFLATED","chunkSize","windowBits","memLevel","strategy","Z_DEFAULT_STRATEGY","opt","gzip","ended","chunks","strm","ZStream","avail_out","zlib_deflate","deflateInit2","Z_OK","deflateSetHeader","dict","strings","deflateSetDictionary","_dict_set","deflator","deflateRaw","Z_NO_FLUSH","Z_FINISH","Z_STREAM_END","Z_SYNC_FLUSH","_mode","next_in","avail_in","Buf8","next_out","onEnd","buf2binstring","shrinkBuf","deflateEnd","flattenChunks","./utils/common","./utils/strings","./zlib/deflate","./zlib/messages","./zlib/zstream","Inflate","zlib_inflate","inflateInit2","GZheader","inflateGetHeader","inflator","inflateRaw","next_out_utf8","tail","utf8str","allowBufError","binstring2buf","Z_NEED_DICT","inflateSetDictionary","Z_BUF_ERROR","arraySet","inflateEnd","ungzip","./zlib/constants","./zlib/gzheader","./zlib/inflate",41,"TYPED_OK","fnTyped","src_offs","dest_offs","fnUntyped","setTyped","Buf16","Buf32",42,"STR_APPLY_UIA_OK","STR_APPLY_OK","__","./common",43,"adler",44,"Z_PARTIAL_FLUSH","Z_FULL_FLUSH","Z_BLOCK","Z_TREES","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_BINARY","Z_TEXT","Z_UNKNOWN","errorCode","rank","flush_pending","pending_buf","pending_out","total_out","flush_block_only","trees","_tr_flush_block","block_start","strstart","put_byte","putShortMSB","read_buf","wrap","total_in","longest_match","cur_match","chain_length","max_chain_length","best_len","prev_length","nice_match","w_size","MIN_LOOKAHEAD","_win","wmask","w_mask","prev","strend","MAX_MATCH","scan_end1","scan_end","good_match","lookahead","match_start","fill_window","more","_w_size","window_size","hash_size","head","MIN_MATCH","ins_h","hash_shift","hash_mask","deflate_stored","max_block_size","pending_buf_size","BS_NEED_MORE","max_start","BS_FINISH_STARTED","BS_FINISH_DONE","deflate_fast","hash_head","bflush","match_length","_tr_tally","max_lazy_match","last_lit","BS_BLOCK_DONE","deflate_slow","max_insert","prev_match","match_available","deflate_rle","deflate_huff","Config","good_length","max_lazy","nice_length","max_chain","lm_init","configuration_table","DeflateState","gzhead","gzindex","last_flush","w_bits","hash_bits","dyn_ltree","HEAP_SIZE","dyn_dtree","D_CODES","bl_tree","BL_CODES","l_desc","d_desc","bl_desc","bl_count","MAX_BITS","heap","L_CODES","heap_len","heap_max","l_buf","lit_bufsize","d_buf","opt_len","static_len","bi_buf","bi_valid","deflateResetKeep","data_type","INIT_STATE","BUSY_STATE","_tr_init","deflateReset","MAX_MEM_LEVEL","deflateInit","MAX_WBITS","DEF_MEM_LEVEL","old_flush","beg","FINISH_STATE","hcrc","os","EXTRA_STATE","OS_CODE","level_flags","PRESET_DICT","NAME_STATE","COMMENT_STATE","HCRC_STATE","bstate","_tr_align","_tr_stored_block","avail","tmpDict","dictLength","LENGTH_CODES","LITERALS","deflateInfo","../utils/common","./adler32","./messages","./trees",47,"xflags","extra_len",48,"BAD","TYPE","_in","_out","dmax","wsize","whave","wnext","s_window","hold","lcode","dcode","lmask","dmask","from_source","lencode","distcode","lenbits","distbits","dolen","dodist","sane",49,"zswap32","InflateState","havedict","flags","check","wbits","ncode","nlen","ndist","have","lens","work","lendyn","distdyn","back","was","inflateResetKeep","HEAD","ENOUGH_LENS","ENOUGH_DISTS","inflateReset","inflateReset2","inflateInit","DEF_WBITS","fixedtables","virgin","sym","lenfix","distfix","inflate_table","LENS","DISTS","updatewindow","copy","here_bits","here_op","here_val","last_bits","last_op","last_val","hbuf","TYPEDO","inf_leave","FLAGS","DICTID","TIME","OS","EXLEN","EXTRA","NAME","COMMENT","HCRC","DICT","CHECK","STORED","LEN_","TABLE","COPY_","COPY","LENLENS","CODES","CODELENS","LEN","inflate_fast","LIT","LENEXT","DIST","DISTEXT","MATCH","LENGTH","MEM","Z_MEM_ERROR","SYNC","dictid","inflateInfo","./inffast","./inftrees",50,"MAXBITS","lbase","lext","dbase","dext","lens_index","codes","table_index","incr","curr","drop","used","huff","base_index","offs","extra_index",51,"-1","-2","-3","-4","-5","-6",52,"StaticTreeDesc","static_tree","extra_bits","extra_base","elems","max_length","has_stree","TreeDesc","dyn_tree","stat_desc","max_code","d_code","_dist_code","put_short","send_bits","Buf_size","send_code","tree","bi_reverse","bi_flush","gen_bitlen","desc","xbits","stree","gen_codes","next_code","tr_static_init","base_length","extra_lbits","_length_code","base_dist","extra_dbits","static_ltree","static_dtree","static_l_desc","static_d_desc","static_bl_desc","extra_blbits","MAX_BL_BITS","init_block","END_BLOCK","bi_windup","copy_block","_n2","_m2","pqdownheap","compress_block","ltree","dtree","lc","lx","build_tree","scan_tree","curlen","prevlen","nextlen","max_count","min_count","REP_3_6","REPZ_3_10","REPZ_11_138","send_tree","build_bl_tree","max_blindex","bl_order","send_all_trees","lcodes","dcodes","blcodes","detect_data_type","black_mask","static_init_done","stored_len","STORED_BLOCK","STATIC_TREES","opt_lenb","static_lenb","DYN_TREES","DIST_CODE_LEN",53],"mappings":"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C5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC1D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5D,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GA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","sourcesContent":["/*\n * Copyright (c) 2013-2016 Bert Freudenberg\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n\"use strict\";    \n\n//////////////////////////////////////////////////////////////////////////////\n// these functions fake the Lively module and class system\n// just enough so the loading of vm.js succeeds\n//////////////////////////////////////////////////////////////////////////////\n\nwindow.module = function(dottedPath) {\n    if (dottedPath === \"\") return window;\n    var path = dottedPath.split(\".\"),\n        name = path.pop(),\n        parent = module(path.join(\".\")),\n        self = parent[name];\n    if (!self) parent[name] = self = {\n        loaded: false,\n        pending: [],\n        requires: function(req) {\n            return {\n                toRun: function(code) {\n                    function load() {\n                        code();\n                        self.loaded = true;\n                        self.pending.forEach(function(f){f();});\n                    }\n                    if (req && !module(req).loaded) {\n                        module(req).pending.push(load);\n                    } else {\n                        load();\n                    }\n                }\n            };\n        },\n    };\n    return self;\n};\n\nObject.extend = function(obj /* + more args */ ) {\n    // skip arg 0, copy properties of other args to obj\n    for (var i = 1; i < arguments.length; i++)\n        if (typeof arguments[i] == 'object')\n            for (var name in arguments[i])\n                obj[name] = arguments[i][name];\n};\n\nFunction.prototype.subclass = function(classPath /* + more args */ ) {\n    // create subclass\n    var subclass = function() {\n        if (this.initialize) this.initialize.apply(this, arguments);\n        return this;\n    };\n    // set up prototype\n    var protoclass = function() { };\n    protoclass.prototype = this.prototype;\n    subclass.prototype = new protoclass();\n    // skip arg 0, copy properties of other args to prototype\n    for (var i = 1; i < arguments.length; i++)\n        Object.extend(subclass.prototype, arguments[i]);\n    // add class to module\n    var modulePath = classPath.split(\".\"),\n        className = modulePath.pop();\n    module(modulePath.join('.'))[className] = subclass;\n    return subclass;\n};\n\n//////////////////////////////////////////////////////////////////////////////\n// load vm, plugins, and other libraries\n//////////////////////////////////////////////////////////////////////////////\n\n(function(){\n    var scripts = document.getElementsByTagName(\"script\"),\n        squeakjs = scripts[scripts.length - 1],\n        vmDir = squeakjs.src.replace(/[^\\/]*$/, \"\");\n    if (squeakjs.src.match(/squeak\\.min\\.js$/)) return;\n    [   \"vm.js\",\n        \"jit.js\",\n        \"plugins/ADPCMCodecPlugin.js\",\n        \"plugins/B2DPlugin.js\",\n        \"plugins/BitBltPlugin.js\",\n        \"plugins/FFTPlugin.js\",\n        \"plugins/FloatArrayPlugin.js\",\n        \"plugins/GeniePlugin.js\",\n        \"plugins/JPEGReaderPlugin.js\",\n        \"plugins/KedamaPlugin.js\",\n        \"plugins/KedamaPlugin2.js\",\n        \"plugins/Klatt.js\",\n        \"plugins/LargeIntegers.js\",\n        \"plugins/Matrix2x3Plugin.js\",\n        \"plugins/MiscPrimitivePlugin.js\",\n        \"plugins/ScratchPlugin.js\",\n        \"plugins/SocketPlugin.js\",\n        \"plugins/SpeechPlugin.js\",\n        \"plugins/SqueakSSL.js\",\n        \"plugins/SoundGenerationPlugin.js\",\n        \"plugins/StarSqueakPlugin.js\",\n        \"plugins/ZipPlugin.js\",\n        \"lib/lz-string.js\",\n        \"lib/jszip.js\",\n    ].forEach(function(filename) {\n        var script = document.createElement('script');\n        script.setAttribute(\"type\",\"text/javascript\");\n        script.setAttribute(\"src\", vmDir + filename);\n        document.getElementsByTagName(\"head\")[0].appendChild(script);\n    });\n})();\n\nmodule(\"SqueakJS\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\n// if in private mode set localStorage to a regular dict\nvar localStorage = window.localStorage;\ntry {\n  localStorage[\"squeak-foo:\"] = \"bar\";\n  if (localStorage[\"squeak-foo:\"] !== \"bar\") throw Error();\n  delete localStorage[\"squeak-foo:\"];\n} catch(e) {\n  localStorage = {};\n}\n\n//////////////////////////////////////////////////////////////////////////////\n// display & event setup\n//////////////////////////////////////////////////////////////////////////////\n\nfunction setupFullscreen(display, canvas, options) {\n    // Fullscreen can only be enabled in an event handler. So we check the\n    // fullscreen flag on every mouse down/up and keyboard event.\n    var box = canvas.parentElement,\n        fullscreenEvent = \"fullscreenchange\",\n        fullscreenElement = \"fullscreenElement\",\n        fullscreenEnabled = \"fullscreenEnabled\";\n\n    if (!box.requestFullscreen) {\n        [    // Fullscreen support is still very browser-dependent\n            {req: box.webkitRequestFullscreen, exit: document.webkitExitFullscreen,\n                evt: \"webkitfullscreenchange\", elem: \"webkitFullscreenElement\", enable: \"webkitFullscreenEnabled\"},\n            {req: box.mozRequestFullScreen, exit: document.mozCancelFullScreen,\n                evt: \"mozfullscreenchange\", elem: \"mozFullScreenElement\", enable: \"mozFullScreenEnabled\"},\n            {req: box.msRequestFullscreen, exit: document.msExitFullscreen,\n                evt: \"MSFullscreenChange\", elem: \"msFullscreenElement\", enable: \"msFullscreenEnabled\"},\n        ].forEach(function(browser) {\n            if (browser.req) {\n                box.requestFullscreen = browser.req;\n                document.exitFullscreen = browser.exit;\n                fullscreenEvent = browser.evt;\n                fullscreenElement = browser.elem;\n                fullscreenEnabled = browser.enable;\n            }\n        });\n    }\n\n    // If the user canceled fullscreen, turn off the fullscreen flag so\n    // we don't try to enable it again in the next event\n    function fullscreenChange(fullscreen) {\n        display.fullscreen = fullscreen;\n        box.style.background = fullscreen ? 'black' : '';\n        if (options.header) options.header.style.display = fullscreen ? 'none' : '';\n        if (options.footer) options.footer.style.display = fullscreen ? 'none' : '';\n        if (options.fullscreenCheckbox) options.fullscreenCheckbox.checked = fullscreen;\n        setTimeout(window.onresize, 0);\n    }\n    \n    var checkFullscreen;\n    \n    if (box.requestFullscreen) {\n        document.addEventListener(fullscreenEvent, function(){fullscreenChange(box == document[fullscreenElement]);});\n        checkFullscreen = function() {\n            if (document[fullscreenEnabled] && (box == document[fullscreenElement]) != display.fullscreen) {\n                if (display.fullscreen) box.requestFullscreen();\n                else document.exitFullscreen();\n            }\n        };\n    } else {\n        var isFullscreen = false;\n        checkFullscreen = function() {\n            if ((options.header || options.footer) && isFullscreen != display.fullscreen) {\n                isFullscreen = display.fullscreen;\n                fullscreenChange(isFullscreen);\n            }\n        };\n    }\n\n    if (options.fullscreenCheckbox) options.fullscreenCheckbox.onclick = function() {\n        display.fullscreen = options.fullscreenCheckbox.checked;\n        checkFullscreen();\n    };\n\n    return checkFullscreen;\n}\n\nfunction setupSwapButtons(options) {\n    if (options.swapCheckbox) {\n        var imageName = localStorage[\"squeakImageName\"] || \"default\",\n            settings = JSON.parse(localStorage[\"squeakSettings:\" + imageName] || \"{}\");\n        if (\"swapButtons\" in settings) options.swapButtons = settings.swapButtons;\n        options.swapCheckbox.checked = options.swapButtons;\n        options.swapCheckbox.onclick = function() {\n            options.swapButtons = options.swapCheckbox.checked;\n            settings[\"swapButtons\"] = options.swapButtons;\n            localStorage[\"squeakSettings:\" + imageName] = JSON.stringify(settings);\n        };\n    }\n}\n\nfunction recordModifiers(evt, display) {\n    var shiftPressed = evt.shiftKey,\n        ctrlPressed = evt.ctrlKey && !evt.altKey,\n        cmdPressed = evt.metaKey || (evt.altKey && !evt.ctrlKey),\n        modifiers =\n            (shiftPressed ? Squeak.Keyboard_Shift : 0) +\n            (ctrlPressed ? Squeak.Keyboard_Ctrl : 0) +\n            (cmdPressed ? Squeak.Keyboard_Cmd : 0);\n    display.buttons = (display.buttons & ~Squeak.Keyboard_All) | modifiers;\n    return modifiers;\n}\n\nvar canUseMouseOffset = navigator.userAgent.match(\"AppleWebKit/\");\n\nfunction updateMousePos(evt, canvas, display) {\n    var evtX = canUseMouseOffset ? evt.offsetX : evt.layerX,\n        evtY = canUseMouseOffset ? evt.offsetY : evt.layerY;\n    if (display.cursorCanvas) {\n        display.cursorCanvas.style.left = (evtX + canvas.offsetLeft + display.cursorOffsetX) + \"px\";\n        display.cursorCanvas.style.top = (evtY + canvas.offsetTop + display.cursorOffsetY) + \"px\";\n    }\n    var x = (evtX * canvas.width / canvas.offsetWidth) | 0,\n        y = (evtY * canvas.height / canvas.offsetHeight) | 0;\n    // clamp to display size\n    display.mouseX = Math.max(0, Math.min(display.width, x));\n    display.mouseY = Math.max(0, Math.min(display.height, y));\n}\n\nfunction recordMouseEvent(what, evt, canvas, display, eventQueue, options) {\n    updateMousePos(evt, canvas, display);\n    if (!display.vm) return;\n    var buttons = display.buttons & Squeak.Mouse_All;\n    switch (what) {\n        case 'mousedown':\n            switch (evt.button || 0) {\n                case 0: buttons = Squeak.Mouse_Red; break;      // left\n                case 1: buttons = Squeak.Mouse_Yellow; break;   // middle\n                case 2: buttons = Squeak.Mouse_Blue; break;     // right\n            }\n            if (options.swapButtons)\n                if (buttons == Squeak.Mouse_Yellow) buttons = Squeak.Mouse_Blue;\n                else if (buttons == Squeak.Mouse_Blue) buttons = Squeak.Mouse_Yellow;\n            break;\n        case 'mousemove':\n            break; // nothing more to do\n        case 'mouseup':\n            buttons = 0;\n            break;\n    }\n    display.buttons = buttons | recordModifiers(evt, display);\n    if (eventQueue) {\n        eventQueue.push([\n            Squeak.EventTypeMouse,\n            evt.timeStamp,  // converted to Squeak time in makeSqueakEvent()\n            display.mouseX,\n            display.mouseY,\n            display.buttons & Squeak.Mouse_All,\n            display.buttons >> 3,\n        ]);\n        if (display.signalInputEvent)\n            display.signalInputEvent();\n    }\n    display.idle = 0;\n    if (what == 'mouseup') {\n        if (display.runFor) display.runFor(100); // maybe we catch the fullscreen flag change\n    } else {\n        if (display.runNow) display.runNow();   // don't wait for timeout to run\n    }\n}\n\nfunction recordKeyboardEvent(key, timestamp, display, eventQueue) {\n    if (!display.vm) return;\n    var code = (display.buttons >> 3) << 8 | key;\n    if (code === display.vm.interruptKeycode) {\n        display.vm.interruptPending = true;\n    } else if (eventQueue) {\n        eventQueue.push([\n            Squeak.EventTypeKeyboard,\n            timestamp,  // converted to Squeak time in makeSqueakEvent()\n            key, // MacRoman\n            Squeak.EventKeyChar,\n            display.buttons >> 3,\n            key,  // Unicode\n        ]);\n        if (display.signalInputEvent)\n            display.signalInputEvent();\n    } else {\n        // no event queue, queue keys the old-fashioned way\n        display.keys.push(code);\n    }\n    display.idle = 0;\n    if (display.runNow) display.runNow(); // don't wait for timeout to run\n}\n\nfunction recordDragDropEvent(type, evt, canvas, display, eventQueue) {\n    if (!display.vm || !eventQueue) return;\n    updateMousePos(evt, canvas, display);\n    eventQueue.push([\n        Squeak.EventTypeDragDropFiles,\n        evt.timeStamp,  // converted to Squeak time in makeSqueakEvent()\n        type,\n        display.mouseX,\n        display.mouseY,\n        display.buttons >> 3,\n        display.droppedFiles.length,\n    ]);\n    if (display.signalInputEvent)\n        display.signalInputEvent();\n}\n\nfunction fakeCmdOrCtrlKey(key, timestamp, display, eventQueue) {\n    // set both Cmd and Ctrl bit, because we don't know what the image wants\n    display.buttons &= ~Squeak.Keyboard_All;  // remove all modifiers\n    display.buttons |= Squeak.Keyboard_Cmd | Squeak.Keyboard_Ctrl;\n    display.keys = []; //  flush other keys\n    recordKeyboardEvent(key, timestamp, display, eventQueue);\n}\n\nfunction makeSqueakEvent(evt, sqEvtBuf, sqTimeOffset) {\n    sqEvtBuf[0] = evt[0];\n    sqEvtBuf[1] = (evt[1] - sqTimeOffset) & Squeak.MillisecondClockMask;\n    for (var i = 2; i < evt.length; i++)\n        sqEvtBuf[i] = evt[i];\n}\n\nfunction createSqueakDisplay(canvas, options) {\n    options = options || {};\n    if (options.fullscreen) {\n        document.body.style.margin = 0;\n        document.body.style.backgroundColor = 'black';\n        document.ontouchmove = function(evt) { evt.preventDefault(); };\n        if (options.header) options.header.style.display = 'none';\n        if (options.footer) options.footer.style.display = 'none';\n    }\n    var display = {\n        context: canvas.getContext(\"2d\"),\n        fullscreen: false,\n        width: 0,   // if 0, VM uses canvas.width\n        height: 0,  // if 0, VM uses canvas.height\n        mouseX: 0,\n        mouseY: 0,\n        buttons: 0,\n        keys: [],\n        clipboardString: '',\n        clipboardStringChanged: false,\n        cursorCanvas: options.cursor !== false && document.createElement(\"canvas\"),\n        cursorOffsetX: 0,\n        cursorOffsetY: 0,\n        droppedFiles: [],\n        signalInputEvent: null, // function set by VM\n        // additional functions added below\n    };\n    setupSwapButtons(options);\n    if (options.pixelated) {\n        canvas.classList.add(\"pixelated\");\n        display.cursorCanvas && display.cursorCanvas.classList.add(\"pixelated\");\n    }\n\n    var eventQueue = null;\n    display.reset = function() {\n        eventQueue = null;\n        display.signalInputEvent = null;\n        display.lastTick = 0;\n        display.getNextEvent = function(firstEvtBuf, firstOffset) {\n            // might be called from VM to get queued event\n            eventQueue = []; // create queue on first call\n            eventQueue.push = function(evt) {\n                eventQueue.offset = Date.now() - evt[1]; // get epoch from first event\n                delete eventQueue.push;                  // use original push from now on\n                eventQueue.push(evt);\n            };\n            display.getNextEvent = function(evtBuf, timeOffset) {\n                var evt = eventQueue.shift();\n                if (evt) makeSqueakEvent(evt, evtBuf, timeOffset - eventQueue.offset);\n                else evtBuf[0] = Squeak.EventTypeNone;\n            };\n            display.getNextEvent(firstEvtBuf, firstOffset);\n        };\n    };\n    display.reset();\n\n    var checkFullscreen = setupFullscreen(display, canvas, options);\n    display.fullscreenRequest = function(fullscreen, thenDo) {\n        // called from primitive to change fullscreen mode\n        if (display.fullscreen != fullscreen) {\n            display.fullscreen = fullscreen;\n            display.resizeTodo = thenDo;    // called after resizing\n            display.resizeTodoTimeout = setTimeout(display.resizeDone, 1000);\n            checkFullscreen();\n        } else thenDo();\n    };\n    display.resizeDone = function() {\n        clearTimeout(display.resizeTodoTimeout);\n        var todo = display.resizeTodo;\n        if (todo) {\n            display.resizeTodo = null;\n            todo();\n        }\n    };\n    display.clear = function() {\n        canvas.width = canvas.width;\n    };\n    display.showBanner = function(msg, style) {\n        style = style || {};\n        var ctx = display.context;\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.fillStyle = style.color || \"#F90\";\n        ctx.font = style.font || 'bold 48px sans-serif';\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        ctx.fillText(msg, canvas.width / 2, canvas.height / 2);\n    };\n    display.showProgress = function(value, style) {\n        style = style || {};\n        var ctx = display.context,\n            w = (canvas.width / 3) | 0,\n            h = 24,\n            x = canvas.width * 0.5 - w / 2,\n            y = canvas.height * 0.5 + 2 * h;\n        ctx.fillStyle = style.background || \"#000\";\n        ctx.fillRect(x, y, w, h);\n        ctx.lineWidth = 2;\n        ctx.strokeStyle = style.color || \"#F90\";\n        ctx.strokeRect(x, y, w, h);\n        ctx.fillStyle = style.color || \"#F90\";\n        ctx.fillRect(x, y, w * value, h);\n    };\n    display.executeClipboardPaste = function(text, timestamp) {\n        if (!display.vm) return true;\n        try {\n            display.clipboardString = text;\n            // simulate paste event for Squeak\n            fakeCmdOrCtrlKey('v'.charCodeAt(0), timestamp, display, eventQueue);\n        } catch(err) {\n            console.error(\"paste error \" + err);\n        }\n    };\n    display.executeClipboardCopy = function(key, timestamp) {\n        if (!display.vm) return true;\n        // simulate copy event for Squeak so it places its text in clipboard\n        display.clipboardStringChanged = false;\n        fakeCmdOrCtrlKey((key || 'c').charCodeAt(0), timestamp, display, eventQueue);\n        var start = Date.now();\n        // now interpret until Squeak has copied to the clipboard\n        while (!display.clipboardStringChanged && Date.now() - start < 500)\n            display.vm.interpret(20);\n        if (!display.clipboardStringChanged) return;\n        // got it, now copy to the system clipboard\n        try {\n            return display.clipboardString;\n        } catch(err) {\n            console.error(\"copy error \" + err);\n        }\n    };\n    canvas.onmousedown = function(evt) {\n        checkFullscreen();\n        recordMouseEvent('mousedown', evt, canvas, display, eventQueue, options);\n        evt.preventDefault();\n        return false;\n    };\n    canvas.onmouseup = function(evt) {\n        recordMouseEvent('mouseup', evt, canvas, display, eventQueue, options);\n        checkFullscreen();\n        evt.preventDefault();\n    };\n    canvas.onmousemove = function(evt) {\n        recordMouseEvent('mousemove', evt, canvas, display, eventQueue, options);\n        evt.preventDefault();\n    };\n    canvas.oncontextmenu = function() {\n        return false;\n    };\n    // touch event handling\n    var touch = {\n        state: 'idle',\n        button: 0,\n        x: 0,\n        y: 0,\n        dist: 0,\n        down: {},\n    };\n    function touchToMouse(evt) {\n        if (evt.touches.length) {\n            // average all touch positions\n            touch.x = touch.y = 0;\n            for (var i = 0; i < evt.touches.length; i++) {\n                touch.x += evt.touches[i].pageX / evt.touches.length;\n                touch.y += evt.touches[i].pageY / evt.touches.length;\n            }\n        }\n        return {\n            timeStamp: evt.timeStamp,\n            button: touch.button,\n            offsetX: touch.x - canvas.offsetLeft,\n            offsetY: touch.y - canvas.offsetTop,\n        };\n    }\n    function dd(ax, ay, bx, by) {var x = ax - bx, y = ay - by; return Math.sqrt(x*x + y*y);}\n    function dist(a, b) {return dd(a.pageX, a.pageY, b.pageX, b.pageY);}\n    function dent(n, l, t, u) { return n < l ? n + t - l : n > u ? n + t - u : t; }\n    function adjustDisplay(l, t, w, h) {\n        var cursorCanvas = display.cursorCanvas,\n            scale = w / canvas.width;\n        canvas.style.left = (l|0) + \"px\";\n        canvas.style.top = (t|0) + \"px\";\n        canvas.style.width = (w|0) + \"px\";\n        canvas.style.height = (h|0) + \"px\";\n        if (cursorCanvas) {\n            cursorCanvas.style.left = (l + display.cursorOffsetX + display.mouseX * scale|0) + \"px\";\n            cursorCanvas.style.top = (t + display.cursorOffsetY + display.mouseY * scale|0) + \"px\";\n            cursorCanvas.style.width = (cursorCanvas.width * scale|0) + \"px\";\n            cursorCanvas.style.height = (cursorCanvas.height * scale|0) + \"px\";\n        }\n        if (!options.pixelated) {\n            if (scale >= 3) {\n                canvas.classList.add(\"pixelated\");\n                cursorCanvas && cursorCanvas.classList.add(\"pixelated\");\n            } else {\n                canvas.classList.remove(\"pixelated\");\n                cursorCanvas && display.cursorCanvas.classList.remove(\"pixelated\");\n            }\n        }\n    }\n    // zooming/panning with two fingers\n    var maxZoom = 5;\n    function zoomStart(evt) {\n        touch.dist = dist(evt.touches[0], evt.touches[1]);\n        touch.down.x = touch.x;\n        touch.down.y = touch.y;\n        touch.down.dist = touch.dist;\n        touch.down.left = canvas.offsetLeft;\n        touch.down.top = canvas.offsetTop;\n        touch.down.width = canvas.offsetWidth;\n        touch.down.height = canvas.offsetHeight;\n        // store original canvas bounds\n        if (!touch.orig) touch.orig = {\n            left: touch.down.left,\n            top: touch.down.top,\n            right: touch.down.left + touch.down.width,\n            bottom: touch.down.top + touch.down.height,\n            width: touch.down.width,\n            height: touch.down.height,\n        };\n    }\n    function zoomMove(evt) {\n        if (evt.touches.length < 2) return;\n        touch.dist = dist(evt.touches[0], evt.touches[1]);\n        var minScale = touch.orig.width / touch.down.width,\n            //nowScale = dent(touch.dist / touch.down.dist, 0.8, 1, 1.5),\n            nowScale = touch.dist / touch.down.dist,\n            scale = Math.min(Math.max(nowScale, minScale * 0.95), minScale * maxZoom),\n            w = touch.down.width * scale,\n            h = touch.orig.height * w / touch.orig.width,\n            l = touch.down.left - (touch.down.x - touch.down.left) * (scale - 1) + (touch.x - touch.down.x),\n            t = touch.down.top - (touch.down.y - touch.down.top) * (scale - 1) + (touch.y - touch.down.y);\n        // allow to rubber-band by 20px for feedback\n        l = Math.max(Math.min(l, touch.orig.left + 20), touch.orig.right - w - 20);\n        t = Math.max(Math.min(t, touch.orig.top + 20), touch.orig.bottom - h - 20);\n        adjustDisplay(l, t, w, h);\n    }\n    function zoomEnd(evt) {\n        var l = canvas.offsetLeft,\n            t = canvas.offsetTop,\n            w = canvas.offsetWidth,\n            h = canvas.offsetHeight;\n        w = Math.min(Math.max(w, touch.orig.width), touch.orig.width * maxZoom);\n        h = touch.orig.height * w / touch.orig.width;\n        l = Math.max(Math.min(l, touch.orig.left), touch.orig.right - w);\n        t = Math.max(Math.min(t, touch.orig.top), touch.orig.bottom - h);\n        adjustDisplay(l, t, w, h);\n    }\n    // State machine to distinguish between 1st/2nd mouse button and zoom/pan:\n    // * if moved, or no 2nd finger within 100ms of 1st down, start mousing\n    // * if fingers moved significantly within 200ms of 2nd down, start zooming\n    // * if touch ended within this time, generate click (down+up)\n    // * otherwise, start mousing with 2nd button\n    // When mousing, always generate a move event before down event so that\n    // mouseover eventhandlers in image work better \n    canvas.ontouchstart = function(evt) {\n        evt.preventDefault();\n        var e = touchToMouse(evt);\n        for (var i = 0; i < evt.changedTouches.length; i++) {\n            switch (touch.state) {\n                case 'idle':\n                    touch.state = 'got1stFinger';\n                    touch.first = e;\n                    setTimeout(function(){\n                        if (touch.state !== 'got1stFinger') return;\n                        touch.state = 'mousing';\n                        touch.button = e.button = 0;\n                        recordMouseEvent('mousemove', e, canvas, display, eventQueue, options);\n                        recordMouseEvent('mousedown', e, canvas, display, eventQueue, options);\n                    }, 100);\n                    break;\n                case 'got1stFinger':\n                    touch.state = 'got2ndFinger';\n                    zoomStart(evt);\n                    setTimeout(function(){\n                        if (touch.state !== 'got2ndFinger') return;\n                        var didMove = Math.abs(touch.down.dist - touch.dist) > 10 ||\n                            dd(touch.down.x, touch.down.y, touch.x, touch.y) > 10;\n                        if (didMove) {\n                            touch.state = 'zooming';\n                        } else {\n                            touch.state = 'mousing';\n                            touch.button = e.button = 2;\n                            recordMouseEvent('mousemove', e, canvas, display, eventQueue, options);\n                            recordMouseEvent('mousedown', e, canvas, display, eventQueue, options);\n                        }\n                    }, 200);\n                    break;\n            }\n        }\n    };\n    canvas.ontouchmove = function(evt) {\n        evt.preventDefault();\n        var e = touchToMouse(evt);\n        switch (touch.state) {\n            case 'got1stFinger': \n                touch.state = 'mousing';\n                touch.button = e.button = 0;\n                recordMouseEvent('mousemove', e, canvas, display, eventQueue, options);\n                recordMouseEvent('mousedown', e, canvas, display, eventQueue, options);\n                break;\n            case 'mousing':\n                recordMouseEvent('mousemove', e, canvas, display, eventQueue, options);\n                return;\n            case 'got2ndFinger':\n                if (evt.touches.length > 1)\n                    touch.dist = dist(evt.touches[0], evt.touches[1]);\n                return;\n            case 'zooming':\n                zoomMove(evt);\n                return;\n        }\n    };\n    canvas.ontouchend = function(evt) {\n        evt.preventDefault();\n        checkFullscreen();\n        var e = touchToMouse(evt);\n        for (var i = 0; i < evt.changedTouches.length; i++) {\n            switch (touch.state) {\n                case 'mousing':\n                    if (evt.touches.length > 0) break;\n                    touch.state = 'idle';\n                    recordMouseEvent('mouseup', e, canvas, display, eventQueue, options);\n                    return;\n                case 'got1stFinger': \n                    touch.state = 'idle';\n                    touch.button = e.button = 0;\n                    recordMouseEvent('mousemove', e, canvas, display, eventQueue, options);\n                    recordMouseEvent('mousedown', e, canvas, display, eventQueue, options);\n                    recordMouseEvent('mouseup', e, canvas, display, eventQueue, options);\n                    return;\n                case 'got2ndFinger':\n                    touch.state = 'mousing';\n                    touch.button = e.button = 2;\n                    recordMouseEvent('mousemove', e, canvas, display, eventQueue, options);\n                    recordMouseEvent('mousedown', e, canvas, display, eventQueue, options);\n                    break;\n                case 'zooming':\n                    if (evt.touches.length > 0) break;\n                    touch.state = 'idle';\n                    zoomEnd(evt);\n                    return;\n            }\n        }\n    };\n    canvas.ontouchcancel = function(evt) {\n        canvas.ontouchend(evt);\n    };\n    // cursorCanvas shows Squeak cursor\n    if (display.cursorCanvas) {\n        display.cursorCanvas.style.display = \"block\";\n        display.cursorCanvas.style.position = \"absolute\";\n        display.cursorCanvas.style.cursor = \"none\";\n        display.cursorCanvas.style.background = \"transparent\";\n        display.cursorCanvas.style.pointerEvents = \"none\";\n        canvas.parentElement.appendChild(display.cursorCanvas);\n        canvas.style.cursor = \"none\";\n    }\n    // keyboard stuff\n    document.onkeypress = function(evt) {\n        if (!display.vm) return true;\n        // check for ctrl-x/c/v/r\n        if (/[CXVR]/.test(String.fromCharCode(evt.charCode + 64)))\n            return true;  // let browser handle cut/copy/paste/reload\n        recordModifiers(evt, display);\n        recordKeyboardEvent(evt.charCode, evt.timeStamp, display, eventQueue);\n        evt.preventDefault();\n    };\n    document.onkeydown = function(evt) {\n        checkFullscreen();\n        if (!display.vm) return true;\n        recordModifiers(evt, display);\n        var squeakCode = ({\n            8: 8,   // Backspace\n            9: 9,   // Tab\n            13: 13, // Return\n            27: 27, // Escape\n            33: 11, // PageUp\n            34: 12, // PageDown\n            35: 4,  // End\n            36: 1,  // Home\n            37: 28, // Left\n            38: 30, // Up\n            39: 29, // Right\n            40: 31, // Down\n            45: 5,  // Insert\n            46: 127, // Delete\n        })[evt.keyCode];\n        if (squeakCode) { // special key pressed\n            recordKeyboardEvent(squeakCode, evt.timeStamp, display, eventQueue);\n            return evt.preventDefault();\n        }\n        if ((evt.metaKey || (evt.altKey && !evt.ctrlKey))) {\n            var key = evt.key; // only supported in FireFox, others have keyIdentifier\n            if (!key && evt.keyIdentifier && evt.keyIdentifier.slice(0,2) == 'U+')\n                key = String.fromCharCode(parseInt(evt.keyIdentifier.slice(2), 16));\n            if (key && key.length == 1) {\n                if (/[CXVR]/i.test(key))\n                    return true;  // let browser handle cut/copy/paste/reload\n                var code = key.charCodeAt(0);\n                if (/[A-Z]/.test(key) && !evt.shiftKey) code += 32;  // make lower-case\n                recordKeyboardEvent(code, evt.timeStamp, display, eventQueue);\n                return evt.preventDefault();\n            }\n        }\n    };\n    document.onkeyup = function(evt) {\n        if (!display.vm) return true;\n        recordModifiers(evt, display);\n    };\n    document.oncopy = function(evt, key) {\n        var text = display.executeClipboardCopy(key, evt.timeStamp);\n        if (typeof text === 'string') {\n            evt.clipboardData.setData(\"Text\", text);\n        }\n        evt.preventDefault();\n    };\n    document.oncut = function(evt) {\n        if (!display.vm) return true;\n        document.oncopy(evt, 'x');\n    };\n    document.onpaste = function(evt) {\n        var text = evt.clipboardData.getData('Text');\n        display.executeClipboardPaste(text, evt.timeStamp);\n        evt.preventDefault();\n    };\n    // do not use addEventListener, we want to replace any previous drop handler\n    function dragEventHasFiles(evt) {\n        for (var i = 0; i < evt.dataTransfer.types.length; i++)\n            if (evt.dataTransfer.types[i] == 'Files') return true;\n        return false;\n    }\n    document.ondragover = function(evt) {\n        evt.preventDefault();\n        if (!dragEventHasFiles(evt)) {\n            evt.dataTransfer.dropEffect = 'none';\n        } else {\n            evt.dataTransfer.dropEffect = 'copy';\n            recordDragDropEvent(Squeak.EventDragMove, evt, canvas, display, eventQueue);\n        }\n    };\n    document.ondragenter = function(evt) {\n        if (!dragEventHasFiles(evt)) return;\n        recordDragDropEvent(Squeak.EventDragEnter, evt, canvas, display, eventQueue);\n    };\n    document.ondragleave = function(evt) {\n        if (!dragEventHasFiles(evt)) return;\n        recordDragDropEvent(Squeak.EventDragLeave, evt, canvas, display, eventQueue);\n    };\n    document.ondrop = function(evt) {\n        evt.preventDefault();\n        if (!dragEventHasFiles(evt)) return false;\n        var files = [].slice.call(evt.dataTransfer.files),\n            loaded = [],\n            image, imageName = null;\n        display.droppedFiles = [];\n        files.forEach(function(f) {\n            display.droppedFiles.push(f.name);\n            var reader = new FileReader();\n            reader.onload = function () {\n                var buffer = this.result;\n                Squeak.filePut(f.name, buffer);\n                loaded.push(f.name);\n                if (!image && /.*image$/.test(f.name) && (!display.vm || confirm(\"Run \" + f.name + \" now?\\n(cancel to use as file)\"))) {\n                    image = buffer;\n                    imageName = f.name;\n                }\n                if (loaded.length == files.length) {                \n                    if (image) {\n                        SqueakJS.appName = imageName.slice(0, -6);\n                        SqueakJS.runImage(image, imageName, display, options);\n                    } else {\n                        recordDragDropEvent(Squeak.EventDragDrop, evt, canvas, display, eventQueue);\n                    }\n                }\n            };\n            reader.readAsArrayBuffer(f);\n        });\n        return false;\n    };\n    window.onresize = function() {\n        if (touch.orig) return; // manually resized\n        // call resizeDone only if window size didn't change for 300ms\n        var debounceWidth = window.innerWidth,\n            debounceHeight = window.innerHeight;\n        setTimeout(function() {\n            if (debounceWidth == window.innerWidth && debounceHeight == window.innerHeight)\n                display.resizeDone();\n        }, 300);\n        // if no fancy layout, don't bother\n        if ((!options.header || !options.footer) && !options.fullscreen) {\n            display.width = canvas.width;\n            display.height = canvas.height;\n            return;\n        }\n        // CSS won't let us do what we want so we will layout the canvas ourselves.\n        var fullscreen = options.fullscreen || display.fullscreen,\n            x = 0,\n            y = fullscreen ? 0 : options.header.offsetTop + options.header.offsetHeight,\n            w = window.innerWidth,\n            h = fullscreen ? window.innerHeight : Math.max(100, options.footer.offsetTop - y),\n            paddingX = 0, // padding outside canvas\n            paddingY = 0;\n        // above are the default values for laying out the canvas\n        if (!options.fixedWidth) { // set canvas resolution\n            display.width = w;\n            display.height = h;\n        } else { // fixed resolution and aspect ratio\n            display.width = options.fixedWidth;\n            display.height = options.fixedHeight;\n            var wantRatio = display.width / display.height,\n                haveRatio = w / h;\n            if (haveRatio > wantRatio) {\n                paddingX = w - Math.floor(h * wantRatio);\n            } else {\n                paddingY = h - Math.floor(w / wantRatio);\n            }\n        }\n        // set size and position\n        canvas.style.left = (x + Math.floor(paddingX / 2)) + \"px\";\n        canvas.style.top = (y + Math.floor(paddingY / 2)) + \"px\";\n        canvas.style.width = (w - paddingX) + \"px\";\n        canvas.style.height = (h - paddingY) + \"px\";\n        // set resolution\n        if (canvas.width != display.width || canvas.height != display.height) {\n            var preserveScreen = options.fixedWidth || !display.resizeTodo, // preserve unless changing fullscreen\n                imgData = preserveScreen && display.context.getImageData(0, 0, canvas.width, canvas.height);\n            canvas.width = display.width;\n            canvas.height = display.height;\n            if (imgData) display.context.putImageData(imgData, 0, 0);\n        }\n        // set cursor scale\n        if (display.cursorCanvas && options.fixedWidth) {\n            var cursorCanvas = display.cursorCanvas,\n                scale = canvas.offsetWidth / canvas.width;\n            cursorCanvas.style.width = (cursorCanvas.width * scale) + \"px\";\n            cursorCanvas.style.height = (cursorCanvas.height * scale) + \"px\";\n        }\n    };\n    window.onresize();\n    return display;\n}\n\nfunction setupSpinner(vm, options) {\n    var spinner = options.spinner;\n    if (!spinner) return null;\n    spinner.onmousedown = function(evt) {\n        if (confirm(SqueakJS.appName + \" is busy. Interrupt?\"))\n            vm.interruptPending = true;\n    };\n    return spinner.style;\n}\n\nvar spinnerAngle = 0,\n    becameBusy = 0;\nfunction updateSpinner(spinner, idleMS, vm, display) {\n    var busy = idleMS === 0,\n        animating = vm.lastTick - display.lastTick < 500;\n    if (!busy || animating) {\n        spinner.display = \"none\";\n        becameBusy = 0;\n    } else {\n        if (becameBusy === 0) {\n            becameBusy = vm.lastTick;\n        } else if (vm.lastTick - becameBusy > 1000) {\n            spinner.display = \"block\";\n            spinnerAngle = (spinnerAngle + 30) % 360;\n            spinner.webkitTransform = spinner.transform = \"rotate(\" + spinnerAngle + \"deg)\";\n        }\n    }\n}\n\n//////////////////////////////////////////////////////////////////////////////\n// main loop\n//////////////////////////////////////////////////////////////////////////////\n\nvar loop; // holds timeout for main loop\n\nSqueakJS.runImage = function(buffer, name, display, options) {\n    window.onbeforeunload = function(evt) {\n        var msg = SqueakJS.appName + \" is still running\";  \n        evt.returnValue = msg;\n        return msg;\n    };\n    window.clearTimeout(loop);\n    display.reset();\n    display.clear();\n    display.showBanner(\"Loading \" + SqueakJS.appName);\n    display.showProgress(0);\n    var self = this;\n    window.setTimeout(function() {\n        var image = new Squeak.Image(name);\n        image.readFromBuffer(buffer, function() {\n            display.quitFlag = false;\n            var vm = new Squeak.Interpreter(image, display);\n            SqueakJS.vm = vm;\n            localStorage[\"squeakImageName\"] = name;\n            setupSwapButtons(options);\n            display.clear();\n            display.showBanner(\"Starting \" + SqueakJS.appName);\n            var spinner = setupSpinner(vm, options);\n            function run() {\n                try {\n                    if (display.quitFlag) self.onQuit(vm, display, options);\n                    else vm.interpret(50, function(ms) {\n                        if (ms == \"sleep\") ms = 200;\n                        if (spinner) updateSpinner(spinner, ms, vm, display);\n                        loop = window.setTimeout(run, ms);\n                    });\n                } catch(error) {\n                    console.error(error);\n                    alert(error);\n                }\n            }\n            display.runNow = function() {\n                window.clearTimeout(loop);\n                run();\n            };\n            display.runFor = function(milliseconds) {\n                var stoptime = Date.now() + milliseconds;\n                do {\n                    display.runNow();\n                } while (Date.now() < stoptime);\n            };\n            run();\n        },\n        function readProgress(value) {display.showProgress(value);});\n    }, 0);\n};\n\nfunction processOptions(options) {\n    var search = window.location.hash.slice(1),\n        args = search && search.split(\"&\");\n    if (args) for (var i = 0; i < args.length; i++) {\n        var keyAndVal = args[i].split(\"=\"),\n            key = keyAndVal[0],\n            val = true;\n        if (keyAndVal.length > 1) {\n            val = decodeURIComponent(keyAndVal.slice(1).join(\"=\"));\n            if (val.match(/^(true|false|null|[0-9\"[{].*)$/))\n                try { val = JSON.parse(val); } catch(e) {\n                    if (val[0] === \"[\") val = val.slice(1,-1).split(\",\"); // handle string arrays\n                    // if not JSON use string itself\n                }\n        }\n        options[key] = val;\n    }\n    var root = Squeak.splitFilePath(options.root || \"/\").fullname;\n    Squeak.dirCreate(root, true);\n    if (!/\\/$/.test(root)) root += \"/\";\n    options.root = root;\n    if (options.url && options.files && !options.image)\n        options.image = options.url + \"/\" + options.files[0];\n}\n\nfunction fetchTemplates(options) {\n    if (options.templates) {\n        if (options.templates.constructor === Array) {\n            var templates = {};\n            options.templates.forEach(function(path){ templates[path] = path; });\n            options.templates = templates;\n        }\n        for (var path in options.templates)\n            Squeak.fetchTemplateDir(path[0] == \"/\" ? path : options.root + path, options.templates[path]);\n    }\n}\n\nfunction processFile(file, options, thenDo) {\n    Squeak.filePut(options.root + file.name, file.data, function() {\n        console.log(\"Stored \" + options.root + file.name);\n        if (file.zip) {\n            processZip(file, options, thenDo);\n        } else {\n            thenDo();\n        }\n    });\n}\n\nfunction processZip(file, options, thenDo) {\n    JSZip().loadAsync(file.data).then(function(zip) {\n        var todo = [];\n        zip.forEach(function(filename){\n            if (options.forceDownload || !Squeak.fileExists(options.root + filename))\n                todo.push(filename);\n            });\n        if (todo.length === 0) return thenDo();\n        var done = 0;\n        todo.forEach(function(filename){\n            console.log(\"Inflating \" + file.name + \": \" + filename);\n            zip.file(filename).async(\"arraybuffer\").then(function(buffer){\n                console.log(\"Expanded size of \" + filename + \": \" + buffer.byteLength);\n                var unzipped = {name: filename, data: buffer};\n                processFile(unzipped, options, function() {\n                    if (++done === todo.length) thenDo();\n                });\n            });\n        });\n    });\n}\n\nfunction checkExisting(file, options, ifExists, ifNotExists) {\n    if (!Squeak.fileExists(options.root + file.name))\n        return ifNotExists();\n    if (file.image || file.zip) {\n        // if it's the image or a zip, load from file storage\n        Squeak.fileGet(options.root + file.name, function(data) {\n            file.data = data;\n            if (file.zip) processZip(file, options, ifExists);\n            else ifExists();\n        }, function onError() {\n            // if error, download it\n            Squeak.fileDelete(options.root + file.name);\n            return ifNotExists();\n        });\n    } else {\n       // for all other files assume they're okay\n       ifExists();\n    }\n}\n\nfunction downloadFile(file, display, options, thenDo) {\n    display.showBanner(\"Downloading \" + file.name);\n    var rq = new XMLHttpRequest(),\n        proxy = options.proxy || \"\";\n    rq.open('GET', proxy + file.url);\n    rq.responseType = 'arraybuffer';\n    rq.onprogress = function(e) {\n        if (e.lengthComputable) display.showProgress(e.loaded / e.total);\n    };\n    rq.onload = function(e) {\n        if (this.status == 200) {\n            file.data = this.response;\n            processFile(file, options, thenDo);\n        }\n        else this.onerror(this.statusText);\n    };\n    rq.onerror = function(e) {\n        if (options.proxy) return alert(\"Failed to download:\\n\" + file.url);\n        console.warn('Retrying with CORS proxy: ' + file.url);\n        var proxy = 'https://crossorigin.me/',\n            retry = new XMLHttpRequest();\n        retry.open('GET', proxy + file.url);\n        retry.responseType = rq.responseType;\n        retry.onprogress = rq.onprogress;\n        retry.onload = rq.onload;\n        retry.onerror = function() {alert(\"Failed to download:\\n\" + file.url)};\n        retry.send();\n    };\n    rq.send();\n}\n\nfunction fetchFiles(files, display, options, thenDo) {\n    // check if files exist locally and download if nessecary\n    function getNextFile() {\n        if (files.length === 0) return thenDo();\n        var file = files.shift(),\n            forceDownload = options.forceDownload || file.forceDownload;\n        if (forceDownload) downloadFile(file, display, options, getNextFile);\n        else checkExisting(file, options,\n            function ifExists() {\n                getNextFile();\n            },\n            function ifNotExists() {\n                downloadFile(file, display, options, getNextFile);\n            });\n    }\n    getNextFile();\n}\n\nSqueakJS.runSqueak = function(imageUrl, canvas, options) {\n    // we need to fetch all files first, then run the image\n    processOptions(options);\n    if (options.image) imageUrl = options.image;\n    else options.image = imageUrl;\n    if (imageUrl.match(/^http:/) && location.protocol.match(/^https/)) {\n        location.protocol = 'http';\n        return;\n    }\n    SqueakJS.options = options;\n    SqueakJS.appName = options.appName || imageUrl.replace(/.*\\//, \"\").replace(/\\.image$/, \"\");\n    fetchTemplates(options);\n    var display = createSqueakDisplay(canvas, options),\n        imageName = Squeak.splitFilePath(imageUrl).basename,\n        image = {url: imageUrl, name: imageName, image: true},\n        baseUrl = options.url || imageUrl.replace(/[^\\/]*$/, \"\"),\n        files = [image];\n    if (options.files) {\n        options.files.forEach(function(f) { if (f !== imageName) files.push({url: baseUrl + f, name: f}); });\n    }\n    if (options.zip) {\n        var zips = typeof options.zip === \"string\" ? [options.zip] : options.zip;\n        zips.forEach(function(f) { files.unshift({url: baseUrl + f, name: f, zip: true}); });\n    }\n    if (options.document) {\n        var docName = Squeak.splitFilePath(options.document).basename;\n        files.push({url: options.document, name: docName, forceDownload: options.forceDownload !== false});\n        display.documentName = options.root + docName;\n    }\n    fetchFiles(files, display, options, function thenDo() {\n        Squeak.fsck();\n        if (!image.data) return alert(\"could not find image \" + imageName);\n        SqueakJS.runImage(image.data, options.root + imageName, display, options);\n    });\n    return display;\n};\n\nSqueakJS.quitSqueak = function() {\n    SqueakJS.vm.quitFlag = true;\n};\n\nSqueakJS.onQuit = function(vm, display, options) {\n    window.onbeforeunload = null;\n    display.vm = null;\n    if (options.spinner) options.spinner.style.display = \"none\";\n    if (options.onQuit) options.onQuit(vm, display, options);\n    else display.showBanner(SqueakJS.appName + \" stopped.\");\n};\n\n}); // end module\n\n//////////////////////////////////////////////////////////////////////////////\n// browser stuff\n//////////////////////////////////////////////////////////////////////////////\n\nif (window.applicationCache) {\n    applicationCache.addEventListener('updateready', function() {\n        // use original appName from options\n        var appName = window.SqueakJS && SqueakJS.options && SqueakJS.options.appName || \"SqueakJS\";\n        if (confirm(appName + ' has been updated. Restart now?')) {\n            window.onbeforeunload = null;\n            window.location.reload();\n        }\n    });\n}\n","/*\n * This Socket plugin only fulfills http:/https: requests by intercepting them\n * and sending as XMLHttpRequest. To make connections to servers without CORS,\n * it uses the crossorigin.me proxy.\n */\n\nfunction SocketPlugin() {\n  \"use strict\";\n\n  return {\n    getModuleName: function() { return 'SocketPlugin (http-only)'; },\n    interpreterProxy: null,\n    primHandler: null,\n\n    handleCounter: 0,\n    needProxy: new Set(),\n\n    // DNS Lookup\n    lastLookup: null,\n\n    // Constants\n    TCP_Socket_Type: 0,\n    Resolver_Uninitialized: 0,\n    Resolver_Ready: 1,\n    Resolver_Busy: 2,\n    Resolver_Error: 3,\n    Socket_InvalidSocket: -1,\n    Socket_Unconnected: 0,\n    Socket_WaitingForConnection: 1,\n    Socket_Connected: 2,\n    Socket_OtherEndClosed: 3,\n    Socket_ThisEndClosed: 4,\n\n    setInterpreter: function(anInterpreter) {\n      this.interpreterProxy = anInterpreter;\n      this.primHandler = this.interpreterProxy.vm.primHandler;\n      return true;\n    },\n\n    // A socket handle emulates socket behavior\n    _newSocketHandle: function(sendBufSize, connSemaIdx, readSemaIdx, writeSemaIdx) {\n      var plugin = this;\n      return {\n        host: null,\n        port: null,\n\n        connSemaIndex: connSemaIdx,\n        readSemaIndex: readSemaIdx,\n        writeSemaIndex: writeSemaIdx,\n\n        sendBuffer: null,\n        sendTimeout: null,\n\n        response: null,\n        responseReadUntil: 0,\n        responseReceived: false,\n\n        status: plugin.Socket_Unconnected,\n\n        _signalSemaphore: function(semaIndex) {\n          if (semaIndex <= 0) return;\n          plugin.primHandler.signalSemaphoreWithIndex(semaIndex);\n        },\n        _signalConnSemaphore: function() { this._signalSemaphore(this.connSemaIndex); },\n        _signalReadSemaphore: function() { this._signalSemaphore(this.readSemaIndex); },\n        _signalWriteSemaphore: function() { this._signalSemaphore(this.writeSemaIndex); },\n\n        _otherEndClosed: function() {\n          this.status = plugin.Socket_OtherEndClosed;\n          this._signalConnSemaphore();\n        },\n\n        _hostAndPort: function() { return this.host + ':' + this.port; },\n\n        _requestNeedsProxy: function() {\n          return plugin.needProxy.has(this._hostAndPort());\n        },\n\n        _getURL: function(targetURL, isRetry) {\n          var url = '';\n          if (isRetry || this._requestNeedsProxy()) {\n            var proxy = typeof SqueakJS === \"object\" && SqueakJS.options.proxy;\n            url += proxy || 'https://crossorigin.me/';\n          }\n          if (this.port !== 443) {\n            url += 'http://' + this._hostAndPort() + targetURL;\n          } else {\n            url += 'https://' + this.host + targetURL;\n          }\n          return url;\n        },\n\n        _performRequest: function() {\n          var request = new TextDecoder(\"utf-8\").decode(this.sendBuffer);\n          var headerLines = request.split('\\r\\n\\r\\n')[0].split('\\n');\n          // Split header lines and parse first line\n          var firstHeaderLineItems = headerLines[0].split(' ');\n          var httpMethod = firstHeaderLineItems[0];\n          if (httpMethod !== 'GET' && httpMethod !== 'PUT' &&\n              httpMethod !== 'POST') {\n            this._otherEndClosed();\n            return -1;\n          }\n          var targetURL = firstHeaderLineItems[1];\n\n          // Extract possible data to send\n          var data = null;\n          for (var i = 1; i < headerLines.length; i++) {\n            var line = headerLines[i];\n            if (line.match(/Content-Length:/i)) {\n              var contentLength = parseInt(line.substr(16));\n              var end = this.sendBuffer.byteLength;\n              data = this.sendBuffer.subarray(end - contentLength, end);\n              break;\n            }\n          }\n\n          if (window.fetch) {\n            this._performFetchAPIRequest(targetURL, httpMethod, data, headerLines);\n          } else {\n            this._performXMLHTTPRequest(targetURL, httpMethod, data, headerLines);\n          }\n        },\n\n        _performFetchAPIRequest: function(targetURL, httpMethod, data, requestLines) {\n          var thisHandle = this;\n          var headers = {};\n          for (var i = 1; i < requestLines.length; i++) {\n            var lineItems = requestLines[i].split(':');\n            if (lineItems.length === 2) {\n              headers[lineItems[0]] = lineItems[1].trim();\n            }\n          }\n          var init = {\n            method: httpMethod,\n            headers: headers,\n            body: data,\n            mode: 'cors'\n          };\n\n          fetch(this._getURL(targetURL), init)\n          .then(thisHandle._handleFetchAPIResponse.bind(thisHandle))\n          .catch(function (e) { \n            var url = thisHandle._getURL(targetURL, true);\n            console.warn('Retrying with CORS proxy: ' + url);\n            fetch(url, init)\n            .then(function(res) {\n              console.log('Success: ' + url);\n              thisHandle._handleFetchAPIResponse(res);\n              plugin.needProxy.add(thisHandle._hostAndPort());\n            })\n            .catch(function (e) {\n              // KLUDGE! This is just a workaround for a broken\n              // proxy server - we should remove it when\n              // crossorigin.me is fixed\n              console.warn('Fetch API failed, retrying with XMLHttpRequest');\n              thisHandle._performXMLHTTPRequest(targetURL, httpMethod, data, requestLines);\n            });\n          });\n        },\n\n        _handleFetchAPIResponse: function(res) {\n          if (this.response === null) {\n            var header = ['HTTP/1.0 ', res.status, ' ', res.statusText, '\\r\\n'];\n            res.headers.forEach(function(value, key, array) {\n              header = header.concat([key, ': ', value, '\\r\\n']);\n            });\n            header.push('\\r\\n');\n            this.response = [new TextEncoder('utf-8').encode(header.join(''))];\n          }\n          this._readIncremental(res.body.getReader());\n        },\n\n        _readIncremental: function(reader) {\n          var thisHandle = this;\n          return reader.read().then(function (result) {\n            if (result.done) {\n              thisHandle.responseReceived = true;\n              return;\n            }\n            thisHandle.response.push(result.value);\n            thisHandle._signalReadSemaphore();\n            return thisHandle._readIncremental(reader);\n          });\n        },\n\n        _performXMLHTTPRequest: function(targetURL, httpMethod, data, requestLines){\n          var thisHandle = this;\n\n          var contentType;\n          for (var i = 1; i < requestLines.length; i++) {\n            var line = requestLines[i];\n            if (line.match(/Content-Type:/i)) {\n              contentType = encodeURIComponent(line.substr(14));\n              break;\n            }\n          }\n\n          var httpRequest = new XMLHttpRequest();\n          httpRequest.open(httpMethod, this._getURL(targetURL));\n          if (contentType !== undefined) {\n            httpRequest.setRequestHeader('Content-type', contentType);\n          }\n          httpRequest.responseType = \"arraybuffer\";\n\n          httpRequest.onload = function (oEvent) {\n            thisHandle._handleXMLHTTPResponse(this);\n          };\n\n          httpRequest.onerror = function(e) {\n            var url = thisHandle._getURL(targetURL, true);\n            console.warn('Retrying with CORS proxy: ' + url);\n            var retry = new XMLHttpRequest();\n            retry.open(httpMethod, url);\n            retry.responseType = httpRequest.responseType;\n            retry.onload = function(oEvent) {\n              console.log('Success: ' + url);\n              thisHandle._handleXMLHTTPResponse(this);\n              plugin.needProxy.add(thisHandle._hostAndPort());\n            };\n            retry.onerror = function() {\n              thisHandle._otherEndClosed();\n              console.error(\"Failed to download:\\n\" + url);\n            };\n            retry.send(data);\n          };\n\n          httpRequest.send(data);\n        },\n\n        _handleXMLHTTPResponse: function(response) {\n          this.responseReceived = true;\n\n          var content = response.response;\n          if (!content) {\n            this._otherEndClosed();\n            return;\n          }\n          // Recreate header\n          var header = new TextEncoder('utf-8').encode(\n            'HTTP/1.0 ' + response.status + ' ' + response.statusText +\n            '\\r\\n' + response.getAllResponseHeaders() + '\\r\\n');\n          // Concat header and response\n          var res = new Uint8Array(header.byteLength + content.byteLength);\n          res.set(header, 0);\n          res.set(new Uint8Array(content), header.byteLength);\n\n          this.response = [res];\n          this._signalReadSemaphore();\n        },\n\n        connect: function(host, port) {\n          this.host = host;\n          this.port = port;\n          this.status = plugin.Socket_Connected;\n          this._signalConnSemaphore();\n          this._signalWriteSemaphore(); // Immediately ready to write\n        },\n\n        close: function() {\n          if (this.status == plugin.Socket_Connected ||\n              this.status == plugin.Socket_OtherEndClosed ||\n              this.status == plugin.Socket_WaitingForConnection) {\n            this.status = plugin.Socket_Unconnected;\n            this._signalConnSemaphore();\n          }\n        },\n\n        destroy: function() {\n          this.status = plugin.Socket_InvalidSocket;\n        },\n\n        dataAvailable: function() {\n          if (this.status == plugin.Socket_InvalidSocket) return false;\n          if (this.status == plugin.Socket_Connected) {\n            if (this.response && this.response.length > 0) {\n              this._signalReadSemaphore();\n              return true; \n            }\n            if (this.responseSentCompletly) {\n              // Signal older Socket implementations that they reached the end\n              this.status = plugin.Socket_OtherEndClosed;\n              this._signalConnSemaphore();\n            }\n          }\n          return false;\n        },\n\n        recv: function(count) {\n          if (this.response === null) return [];\n          var data = this.response[0];\n          if (data.length > count) {\n            var rest = data.subarray(count);\n            if (rest) {\n              this.response[0] = rest;\n            } else {\n              this.response.shift();\n            }\n            data = data.subarray(0, count);\n          } else {\n            this.response.shift();\n          }\n          if (this.responseReceived && this.response.length === 0) {\n            this.responseSentCompletly = true;\n          }\n\n          return data;\n        },\n\n        send: function(data, start, end) {\n          if (this.sendTimeout !== null) {\n            window.clearTimeout(this.sendTimeout);\n          }\n          this.lastSend = Date.now();\n          var newBytes = data.bytes.subarray(start, end);\n          if (this.sendBuffer === null) {\n            this.sendBuffer = newBytes;\n          } else {\n            var newLength = this.sendBuffer.byteLength + newBytes.byteLength;\n            var newBuffer = new Uint8Array(newLength);\n            newBuffer.set(this.sendBuffer, 0);\n            newBuffer.set(newBytes, this.sendBuffer.byteLength);\n            this.sendBuffer = newBuffer;\n          }\n          // Give image some time to send more data before performing requests\n          this.sendTimeout = setTimeout(this._performRequest.bind(this), 50);\n          return newBytes.byteLength;\n        }\n      };\n    },\n\n    primitiveHasSocketAccess: function(argCount) {\n      this.interpreterProxy.popthenPush(1, this.interpreterProxy.trueObject());\n      return true;\n    },\n\n    primitiveInitializeNetwork: function(argCount) {\n      this.interpreterProxy.pop(1);\n      return true;\n    },\n\n    primitiveResolverNameLookupResult: function(argCount) {\n      if (argCount !== 0) return false;\n      var inet;\n      if (this.lastLookup !== null) {\n        inet = this.primHandler.makeStString(this.lastLookup);\n        this.lastLookup = null;\n      } else {\n        inet = this.interpreterProxy.nilObject();\n      }\n      this.interpreterProxy.popthenPush(1, inet);\n      return true;\n    },\n\n    primitiveResolverStartNameLookup: function(argCount) {\n      if (argCount !== 1) return false;\n      this.lastLookup = this.interpreterProxy.stackValue(0).bytesAsString();\n      this.interpreterProxy.popthenPush(1, this.interpreterProxy.nilObject());\n      return true;\n    },\n\n    primitiveResolverStatus: function(argCount) {\n      this.interpreterProxy.popthenPush(1, this.Resolver_Ready);\n      return true;\n    },\n\n    primitiveSocketConnectionStatus: function(argCount) {\n      if (argCount !== 1) return false;\n      var handle = this.interpreterProxy.stackObjectValue(0).handle;\n      var status = handle.status;\n      if (status === undefined) status = this.Socket_InvalidSocket;\n      this.interpreterProxy.popthenPush(1, status);\n      return true;\n    },\n\n    primitiveSocketConnectToPort: function(argCount) {\n      if (argCount !== 3) return false;\n      var handle = this.interpreterProxy.stackObjectValue(2).handle;\n      if (handle === undefined) return false;\n      var host = this.interpreterProxy.stackObjectValue(1).bytesAsString();\n      var port = this.interpreterProxy.stackIntegerValue(0);\n      handle.connect(host, port);\n      this.interpreterProxy.popthenPush(argCount,\n                                        this.interpreterProxy.nilObject());\n      return true;\n    },\n\n    primitiveSocketCloseConnection: function(argCount) {\n      if (argCount !== 1) return false;\n      var handle = this.interpreterProxy.stackObjectValue(0).handle;\n      if (handle === undefined) return false;\n      handle.close();\n      this.interpreterProxy.popthenPush(1, this.interpreterProxy.nilObject());\n      return true;\n    },\n\n    primitiveSocketCreate3Semaphores: function(argCount) {\n      if (argCount !== 7) return false;\n      var writeSemaIndex = this.interpreterProxy.stackIntegerValue(0);\n      var readSemaIndex = this.interpreterProxy.stackIntegerValue(1);\n      var semaIndex = this.interpreterProxy.stackIntegerValue(2);\n      var sendBufSize = this.interpreterProxy.stackIntegerValue(3);\n      var socketType = this.interpreterProxy.stackIntegerValue(5);\n      if (socketType !== this.TCP_Socket_Type) return false;\n      var name = '{SqueakJS Socket #' + (++this.handleCounter) + '}';\n      var sqHandle = this.primHandler.makeStString(name);\n      sqHandle.handle = this._newSocketHandle(sendBufSize, semaIndex,\n                                              readSemaIndex, writeSemaIndex);\n      this.interpreterProxy.popthenPush(argCount, sqHandle);\n      return true;\n    },\n\n    primitiveSocketDestroy: function(argCount) {\n      if (argCount !== 1) return false;\n      var handle = this.interpreterProxy.stackObjectValue(0).handle;\n      if (handle === undefined) return false;\n      handle.destroy();\n      this.interpreterProxy.popthenPush(1, handle.status);\n      return true;\n    },\n\n    primitiveSocketReceiveDataAvailable: function(argCount) {\n      if (argCount !== 1) return false;\n      var handle = this.interpreterProxy.stackObjectValue(0).handle;\n      if (handle === undefined) return false;\n      var ret = this.interpreterProxy.falseObject();\n      if (handle.dataAvailable()) {\n        ret = this.interpreterProxy.trueObject();\n      }\n      this.interpreterProxy.popthenPush(1, ret);\n      return true;\n    },\n\n    primitiveSocketReceiveDataBufCount: function(argCount) {\n      if (argCount !== 4) return false;\n      var handle = this.interpreterProxy.stackObjectValue(3).handle;\n      if (handle === undefined) return false;\n      var target = this.interpreterProxy.stackObjectValue(2);\n      var start = this.interpreterProxy.stackIntegerValue(1) - 1;\n      var count = this.interpreterProxy.stackIntegerValue(0);\n      if ((start + count) > target.bytes.length) return false;\n      var bytes = handle.recv(count);\n      target.bytes.set(bytes, start);\n      this.interpreterProxy.popthenPush(argCount, bytes.length);\n      return true;\n    },\n\n    primitiveSocketSendDataBufCount: function(argCount) {\n      if (argCount !== 4) return false;\n      var handle = this.interpreterProxy.stackObjectValue(3).handle;\n      if (handle === undefined) return false;\n      var data = this.interpreterProxy.stackObjectValue(2);\n      var start = this.interpreterProxy.stackIntegerValue(1) - 1;\n      if (start < 0 ) return false;\n      var count = this.interpreterProxy.stackIntegerValue(0);\n      var end = start + count;\n      if (end > data.length) return false;\n\n      var res = handle.send(data, start, end);\n      this.interpreterProxy.popthenPush(1, res);\n      return true;\n    },\n\n    primitiveSocketSendDone: function(argCount) {\n      if (argCount !== 1) return false;\n      this.interpreterProxy.popthenPush(1, this.interpreterProxy.trueObject());\n      return true;\n    },\n  };\n}\n\nfunction registerSocketPlugin() {\n    if (typeof Squeak === \"object\" && Squeak.registerExternalModule) {\n        Squeak.registerExternalModule('SocketPlugin', SocketPlugin());\n    } else window.setTimeout(registerSocketPlugin, 100);\n};\n\nregisterSocketPlugin();\n","function SpeechPlugin() {\n  'use strict';\n\n  return {\n    getModuleName: function() { return 'SpeechPlugin'; },\n    interpreterProxy: null,\n    primHandler: null,\n\n    voiceInput: null,\n    semaphoreIndex: null,\n    shouldListen: false,\n    recognition: null,\n    synth: window.speechSynthesis,\n\n    setInterpreter: function(anInterpreter) {\n      this.interpreterProxy = anInterpreter;\n      this.primHandler = this.interpreterProxy.vm.primHandler;\n      return true;\n    },\n\n    /*\n     * Speech Synthesis Primitive\n     */\n\n    primitiveSpeak: function(argCount) {\n      var text, voice;\n      if (argCount === 1) {\n        text = this.interpreterProxy.stackValue(0).bytesAsString();\n      } else if (argCount === 2) {\n        text = this.interpreterProxy.stackValue(1).bytesAsString();\n        var voiceName = this.interpreterProxy.stackValue(0).bytesAsString();\n        voice = this.synth.getVoices().filter(function(voice) {\n            return voice.name === voiceName;\n        });\n      } else {\n        return false;\n      }\n      var msg = new SpeechSynthesisUtterance(text);\n      if (voice && voice.length > 0) { msg.voice = voice[0]; }\n      this.synth.speak(msg);\n      this.interpreterProxy.pop(argCount);\n      return true;\n    },\n\n    /*\n     * Speech Recognition Primitives\n     */\n\n    primitiveRegisterSemaphore: function(argCount) {\n      if (argCount !== 1) return false;\n      this.semaphoreIndex = this.interpreterProxy.stackIntegerValue(0);\n      return true;\n    },\n\n    primitiveUnregisterSemaphore: function(argCount) {\n      if (argCount !== 0) return false;\n      this.semaphoreIndex = null;\n      return true;\n    },\n\n    primitiveGetLastRecognitionResult: function(argCount) {\n      if (argCount !== 0) return false;\n      if (this.semaphoreIndex === null) return false;\n      if (this.voiceInput === null) return false;\n      var stString = this.primHandler.makeStArray(this.voiceInput);\n      this.voiceInput = [];\n      this.interpreterProxy.popthenPush(1, stString);\n      return true;\n    },\n\n    primitiveStartListening: function(argCount) {\n      if (argCount !== 0) return false;\n      this.recognition = new webkitSpeechRecognition();\n      this.recognition.lang = 'en-US'; // en-GB\n      this.recognition.interimResults = true;\n      // this.recognition.maxAlternatives = 1;\n      this.recognition.onresult = this._onRecognitionResult.bind(this);\n      this.recognition.onerror = function(event) { console.log(event); };\n      /*\n       * Imitate `this.recognition.continuous = true` because it is currently\n       * only supported by Google Chrome.\n       */\n      this.recognition.onend = function(event) {\n        if (this.shouldListen) {\n          this.recognition.start();\n        }\n      }.bind(this);\n      this.shouldListen = true;\n      this.recognition.start();\n      return true;\n    },\n\n    _onRecognitionResult: function(event) {\n      this.voiceInput = [];\n      for (var i = event.resultIndex; i < event.results.length; i++) {\n        var result = event.results[i];\n        var sqResult = [result.isFinal, []];\n        for (var j = 0; j < result.length; j++) {\n          var transcript = result[j].transcript;\n          var now = Date.now();\n          sqResult[1].push([transcript, result[j].confidence]);\n        }\n        if (sqResult[1].length > 0) {\n          this.voiceInput.push(sqResult);\n        }\n      }\n      if (this.semaphoreIndex !== null && this.voiceInput.length > 0) {\n        this.primHandler.signalSemaphoreWithIndex(this.semaphoreIndex);\n      }\n    },\n\n    primitiveStopListening: function(argCount) {\n      if (argCount !== 0) return false;\n      this.voiceInput = [];\n      this.recognition.stop();\n      this.shouldListen = false;\n      return true;\n    },\n  };\n}\n\nfunction registerSpeechPlugin() {\n    if (typeof Squeak === \"object\" && Squeak.registerExternalModule) {\n        if (('webkitSpeechRecognition' in window)) {\n          Squeak.registerExternalModule('SpeechPlugin', SpeechPlugin());\n        } else {\n          console.warn('SpeechPlugin: Web Speech API is not supported by this browser.');\n        }\n    } else window.setTimeout(registerSpeechPlugin, 100);\n};\n\nregisterSpeechPlugin();\n","/*\n * This is a fake SSL plugin, actual authentication and crypto\n * is handled by browser and SocketPlugin\n */\n\nfunction SqueakSSL() {\n  \"use strict\";\n\n  return {\n    getModuleName: function() { return 'SqueakSSL (fake)'; },\n    interpreterProxy: null,\n    primHandler: null,\n\n    handleCounter: 0,\n\n    // Return codes from the core SSL functions\n    SQSSL_OK: 0,\n    SQSSL_NEED_MORE_DATA: -1,\n    SQSSL_INVALID_STATE: -2,\n    SQSSL_BUFFER_TOO_SMALL: -3,\n    SQSSL_INPUT_TOO_LARGE: -4,\n    SQSSL_GENERIC_ERROR: -5,\n    SQSSL_OUT_OF_MEMORY: -6,\n    // SqueakSSL getInt/setInt property IDs\n    SQSSL_PROP_VERSION:  0,\n    SQSSL_PROP_LOGLEVEL: 1,\n    SQSSL_PROP_SSLSTATE: 2,\n    SQSSL_PROP_CERTSTATE: 3,\n    // SqueakSSL getString/setString property IDs\n    SQSSL_PROP_PEERNAME: 0,\n    SQSSL_PROP_CERTNAME: 1,\n    SQSSL_PROP_SERVERNAME: 2,\n\n    setInterpreter: function(anInterpreter) {\n      this.interpreterProxy = anInterpreter;\n      this.primHandler = this.interpreterProxy.vm.primHandler;\n      return true;\n    },\n\n    primitiveCreate: function(argCount) {\n      var name = '{SqueakJS SSL #' + (++this.handleCounter) + '}';\n      var sqHandle = this.primHandler.makeStString(name);\n      sqHandle.handle = true;\n      this.interpreterProxy.popthenPush(argCount, sqHandle);\n      return true;\n    },\n\n    primitiveConnect: function(argCount) {\n      if (argCount !== 5) return false;\n      this.interpreterProxy.popthenPush(argCount, 0);\n      return true;\n    },\n\n    primitiveDestroy: function(argCount) {\n      if (argCount !== 1) return false;\n      this.interpreterProxy.popthenPush(1, 1); // Non-zero if successful\n      return true;\n    },\n\n    primitiveGetIntProperty: function(argCount) {\n      if (argCount !== 2) return false;\n      var handle = this.interpreterProxy.stackObjectValue(1).handle;\n      if (handle === undefined) return false;\n      var propID = this.interpreterProxy.stackIntegerValue(0);\n\n      var res;\n      if (propID === this.SQSSL_PROP_CERTSTATE) {\n        res = this.SQSSL_OK; // Always valid\n      } else {\n        res = 0;\n      }\n      this.interpreterProxy.popthenPush(argCount, res);\n      return true;\n    },\n\n    primitiveGetStringProperty: function(argCount) {\n      if (argCount !== 2) return false;\n      var handle = this.interpreterProxy.stackObjectValue(1).handle;\n      if (handle === undefined) return false;\n      var propID = this.interpreterProxy.stackIntegerValue(0);\n\n      var res;\n      if (propID === this.SQSSL_PROP_PEERNAME) {\n        res = this.primHandler.makeStString('*'); // Match all\n      } else {\n        res = this.interpreterProxy.nilObject();\n      }\n      this.interpreterProxy.popthenPush(argCount, res);\n      return true;\n    },\n\n    primitiveEncrypt: function(argCount) {\n      if (argCount !== 5) return false;\n      var handle = this.interpreterProxy.stackObjectValue(4).handle;\n      if (handle === undefined) return false;\n      var srcBuf = this.interpreterProxy.stackObjectValue(3);\n      var start = this.interpreterProxy.stackIntegerValue(2) - 1;\n      var length = this.interpreterProxy.stackIntegerValue(1);\n      var dstBuf = this.interpreterProxy.stackObjectValue(0);\n      dstBuf.bytes = srcBuf.bytes; // Just copy all there is\n      this.interpreterProxy.popthenPush(argCount, length);\n      return true;\n    },\n\n    primitiveDecrypt: function(argCount) {\n      if (argCount !== 5) return false;\n      var handle = this.interpreterProxy.stackObjectValue(4).handle;\n      if (handle === undefined) return false;\n      var srcBuf = this.interpreterProxy.stackObjectValue(3);\n      var start = this.interpreterProxy.stackIntegerValue(2) - 1;\n      var length = this.interpreterProxy.stackIntegerValue(1);\n      var dstBuf = this.interpreterProxy.stackObjectValue(0);\n      dstBuf.bytes = srcBuf.bytes; // Just copy all there is\n      this.interpreterProxy.popthenPush(argCount, length);\n      return true;\n    }\n  };\n}\n\nfunction registerSqueakSSL() {\n    if (typeof Squeak === \"object\" && Squeak.registerExternalModule) {\n        Squeak.registerExternalModule('SqueakSSL', SqueakSSL());\n    } else window.setTimeout(registerSqueakSSL, 100);\n};\n\nregisterSqueakSSL();\n","module('users.bert.SqueakJS.vm').requires().toRun(function() {\n\"use strict\";\n/*\n * Copyright (c) 2013-2016 Bert Freudenberg\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n// shorter name for convenience\nwindow.Squeak = users.bert.SqueakJS.vm;\n\n// if in private mode set localStorage to a regular dict\nvar localStorage = window.localStorage;\ntry {\n  localStorage[\"squeak-foo:\"] = \"bar\";\n  if (localStorage[\"squeak-foo:\"] !== \"bar\") throw Error();\n  delete localStorage[\"squeak-foo:\"];\n} catch(e) {\n  console.warn(\"localStorage not available, faking\");\n  localStorage = {};\n}\n\nObject.extend(Squeak,\n\"version\", {\n    // system attributes\n    vmVersion: \"SqueakJS 0.9\",\n    vmBuild: \"unknown\",                 // replace at runtime by last-modified?\n    vmPath: \"/\",\n    vmFile: \"vm.js\",\n    platformName: \"Web\",\n    platformSubtype: \"unknown\",\n    osVersion: navigator.userAgent,     // might want to parse\n    windowSystem: \"HTML\",\n},\n\"object header\", {\n    // object headers\n    HeaderTypeMask: 3,\n    HeaderTypeSizeAndClass: 0, //3-word header\n    HeaderTypeClass: 1,        //2-word header\n    HeaderTypeFree: 2,         //free block\n    HeaderTypeShort: 3,        //1-word header\n},\n\"special objects\", {\n    // Indices into SpecialObjects array\n    splOb_NilObject: 0,\n    splOb_FalseObject: 1,\n    splOb_TrueObject: 2,\n    splOb_SchedulerAssociation: 3,\n    splOb_ClassBitmap: 4,\n    splOb_ClassInteger: 5,\n    splOb_ClassString: 6,\n    splOb_ClassArray: 7,\n    splOb_SmalltalkDictionary: 8,\n    splOb_ClassFloat: 9,\n    splOb_ClassMethodContext: 10,\n    splOb_ClassBlockContext: 11,\n    splOb_ClassPoint: 12,\n    splOb_ClassLargePositiveInteger: 13,\n    splOb_TheDisplay: 14,\n    splOb_ClassMessage: 15,\n    splOb_ClassCompiledMethod: 16,\n    splOb_TheLowSpaceSemaphore: 17,\n    splOb_ClassSemaphore: 18,\n    splOb_ClassCharacter: 19,\n    splOb_SelectorDoesNotUnderstand: 20,\n    splOb_SelectorCannotReturn: 21,\n    splOb_TheInputSemaphore: 22,\n    splOb_SpecialSelectors: 23,\n    splOb_CharacterTable: 24,\n    splOb_SelectorMustBeBoolean: 25,\n    splOb_ClassByteArray: 26,\n    splOb_ClassProcess: 27,\n    splOb_CompactClasses: 28,\n    splOb_TheTimerSemaphore: 29,\n    splOb_TheInterruptSemaphore: 30,\n    splOb_FloatProto: 31,\n    splOb_SelectorCannotInterpret: 34,\n    splOb_MethodContextProto: 35,\n    splOb_ClassBlockClosure: 36,\n    splOb_BlockContextProto: 37,\n    splOb_ExternalObjectsArray: 38,\n    splOb_ClassPseudoContext: 39,\n    splOb_ClassTranslatedMethod: 40,\n    splOb_TheFinalizationSemaphore: 41,\n    splOb_ClassLargeNegativeInteger: 42,\n    splOb_ClassExternalAddress: 43,\n    splOb_ClassExternalStructure: 44,\n    splOb_ClassExternalData: 45,\n    splOb_ClassExternalFunction: 46,\n    splOb_ClassExternalLibrary: 47,\n    splOb_SelectorAboutToReturn: 48,\n    splOb_SelectorRunWithIn: 49,\n    splOb_SelectorAttemptToAssign: 50,\n    splOb_PrimErrTableIndex: 51,\n    splOb_ClassAlien: 52,\n    splOb_InvokeCallbackSelector: 53,\n    splOb_ClassUnsafeAlien: 54,\n    splOb_ClassWeakFinalizer: 55,\n},\n\"known classes\", {\n    // Class layout:\n    Class_superclass: 0,\n    Class_mdict: 1,\n    Class_format: 2,\n    Class_instVars: null,   // 3 or 4 depending on image, see instVarNames()\n    Class_name: 6,\n    // Context layout:\n    Context_sender: 0,\n    Context_instructionPointer: 1,\n    Context_stackPointer: 2,\n    Context_method: 3,\n    Context_closure: 4,\n    Context_receiver: 5,\n    Context_tempFrameStart: 6,\n    Context_smallFrameSize: 16,\n    Context_largeFrameSize: 56,\n    BlockContext_caller: 0,\n    BlockContext_argumentCount: 3,\n    BlockContext_initialIP: 4,\n    BlockContext_home: 5,\n    // Closure layout:\n    Closure_outerContext: 0,\n    Closure_startpc: 1,\n    Closure_numArgs: 2,\n    Closure_firstCopiedValue: 3,\n    // Stream layout:\n    Stream_array: 0,\n    Stream_position: 1,\n    Stream_limit: 2,\n    //ProcessorScheduler layout:\n    ProcSched_processLists: 0,\n    ProcSched_activeProcess: 1,\n    //Link layout:\n    Link_nextLink: 0,\n    //LinkedList layout:\n    LinkedList_firstLink: 0,\n    LinkedList_lastLink: 1,\n    //Semaphore layout:\n    Semaphore_excessSignals: 2,\n    //Mutex layout:\n    Mutex_owner: 2,\n    //Process layout:\n    Proc_suspendedContext: 1,\n    Proc_priority: 2,\n    Proc_myList: 3,\n    // Association layout:\n    Assn_key: 0,\n    Assn_value: 1,\n    // MethodDict layout:\n    MethodDict_array: 1,\n    MethodDict_selectorStart: 2,\n    // Message layout\n    Message_selector: 0,\n    Message_arguments: 1,\n    Message_lookupClass: 2,\n    // Point layout:\n    Point_x: 0,\n    Point_y: 1,\n    // LargeInteger layout:\n    LargeInteger_bytes: 0,\n    LargeInteger_neg: 1,\n    // BitBlt layout:\n    BitBlt_dest: 0,\n    BitBlt_source: 1,\n    BitBlt_halftone: 2,\n    BitBlt_combinationRule: 3,\n    BitBlt_destX: 4,\n    BitBlt_destY: 5,\n    BitBlt_width: 6,\n    BitBlt_height: 7,\n    BitBlt_sourceX: 8,\n    BitBlt_sourceY: 9,\n    BitBlt_clipX: 10,\n    BitBlt_clipY: 11,\n    BitBlt_clipW: 12,\n    BitBlt_clipH: 13,\n    BitBlt_colorMap: 14,\n    BitBlt_warpBase: 15,\n    // Form layout:\n    Form_bits: 0,\n    Form_width: 1,\n    Form_height: 2,\n    Form_depth: 3,\n    Form_offset: 4,\n    // WeakFinalizationList layout:\n    WeakFinalizationList_first: 0,\n    // WeakFinalizerItem layout:\n    WeakFinalizerItem_list: 0,\n    WeakFinalizerItem_next: 1,\n},\n\"events\", {\n    Mouse_Blue: 1,\n    Mouse_Yellow: 2,\n    Mouse_Red: 4,\n    Keyboard_Shift: 8,\n    Keyboard_Ctrl: 16,\n    Keyboard_Alt: 32,\n    Keyboard_Cmd: 64,\n    Mouse_All: 1 + 2 + 4,\n    Keyboard_All: 8 + 16 + 32 + 64,\n    EventTypeNone: 0,\n    EventTypeMouse: 1,\n    EventTypeKeyboard: 2,\n    EventTypeDragDropFiles: 3,\n    EventKeyChar: 0,\n    EventKeyDown: 1,\n    EventKeyUp: 2,\n    EventDragEnter: 1,\n    EventDragMove: 2,\n    EventDragLeave: 3,\n    EventDragDrop: 4,\n},\n\"constants\", {\n    MinSmallInt: -0x40000000,\n    MaxSmallInt:  0x3FFFFFFF,\n    NonSmallInt: -0x50000000,           // non-small and neg (so non pos32 too)\n    MillisecondClockMask: 0x1FFFFFFF,\n},\n\"modules\", {\n    // don't clobber registered modules\n    externalModules: Squeak.externalModules || {},\n    registerExternalModule: function(name, module) {\n        this.externalModules[name] = module;\n    },\n},\n\"files\", {\n    fsck: function(whenDone, dir, files, stats) {\n        dir = dir || \"\";\n        stats = stats || {dirs: 0, files: 0, bytes: 0, deleted: 0};\n        if (!files) {\n            // find existing files\n            files = {};\n            for (var key in localStorage) {\n                var match = key.match(/squeak-file(\\.lz)?:(.*)$/);\n                if (match) {files[match[2]] = true};\n            }\n            if (typeof indexedDB !== \"undefined\") {\n                return this.dbTransaction(\"readonly\", \"fsck cursor\", function(fileStore) {\n                    var cursorReq = fileStore.openCursor();\n                    cursorReq.onsuccess = function(e) {\n                        var cursor = e.target.result;\n                        if (cursor) {\n                            files[cursor.key] = true;\n                            cursor.continue();\n                        } else { // done\n                            Squeak.fsck(whenDone, dir, files, stats);\n                        }\n                    }\n                    cursorReq.onerror = function(e) {\n                        console.error(\"fsck failed\");\n                    }\n                });\n            }\n        }\n        // check directories\n        var entries = Squeak.dirList(dir);\n        for (var name in entries) {\n            var path = dir + \"/\" + name,\n                isDir = entries[name][3];\n            if (isDir) {\n                var exists = \"squeak:\" + path in localStorage;\n                if (exists) {\n                    Squeak.fsck(null, path, files, stats);\n                    stats.dirs++;\n                } else {\n                    console.log(\"Deleting stale directory \" + path);\n                    Squeak.dirDelete(path);\n                    stats.deleted++;\n                }\n            } else {\n                if (!files[path]) {\n                    console.log(\"Deleting stale file entry \" + path);\n                    Squeak.fileDelete(path, true);\n                    stats.deleted++;\n                } else {\n                    files[path] = false; // mark as visited\n                    stats.files++;\n                    stats.bytes += entries[name][4];\n                }\n            }\n        }\n        // check orphaned files\n        if (dir === \"\") {\n            console.log(\"squeak fsck: \" + stats.dirs + \" directories, \" + stats.files + \" files, \" + (stats.bytes/1000000).toFixed(1) + \" MBytes\");\n            var orphaned = [],\n                total = 0;\n            for (var path in files) {\n                total++;\n                if (files[path]) orphaned.push(path); // not marked visited\n            }\n            if (orphaned.length > 0) {\n                for (var i = 0; i < orphaned.length; i++) {\n                    console.log(\"Deleting orphaned file \" + orphaned[i]);\n                    delete localStorage[\"squeak-file:\" + orphaned[i]];\n                    delete localStorage[\"squeak-file.lz:\" + orphaned[i]];\n                    stats.deleted++;\n                }\n                if (typeof indexedDB !== \"undefined\") {\n                    this.dbTransaction(\"readwrite\", \"fsck delete\", function(fileStore) {\n                        for (var i = 0; i < orphaned.length; i++) {\n                            fileStore.delete(orphaned[i]);\n                        };\n                    });\n                }\n            }\n            if (whenDone) whenDone(stats);\n        }\n    },\n    dbTransaction: function(mode, description, transactionFunc, completionFunc) {\n        // File contents is stored in the IndexedDB named \"squeak\" in object store \"files\"\n        // and directory entries in localStorage with prefix \"squeak:\"\n        function fakeTransaction() {\n            transactionFunc(Squeak.dbFake());\n            if (completionFunc) completionFunc();\n        }\n\n        if (typeof indexedDB == \"undefined\") {\n            return fakeTransaction();\n        }\n\n        function startTransaction() {\n            var trans = SqueakDB.transaction(\"files\", mode),\n                fileStore = trans.objectStore(\"files\");\n            trans.oncomplete = function(e) { if (completionFunc) completionFunc(); }\n            trans.onerror = function(e) { console.error(e.target.error.name + \": \" + description) }\n            trans.onabort = function(e) {\n                console.error(e.target.error.name + \": aborting \" + description);\n                // fall back to local/memory storage\n                transactionFunc(Squeak.dbFake());\n                if (completionFunc) completionFunc();\n            }\n            transactionFunc(fileStore);\n        };\n\n        // if database connection already opened, just do transaction\n        if (window.SqueakDB) return startTransaction();\n\n        // otherwise, open SqueakDB first\n        var openReq = indexedDB.open(\"squeak\");\n\n        // UIWebView implements the interface but only returns null\n        // https://stackoverflow.com/questions/27415998/indexeddb-open-returns-null-on-safari-ios-8-1-1-and-halts-execution-on-cordova\n        if (!openReq) {\n            return fakeTransaction();\n        }\n\n        openReq.onsuccess = function(e) {\n            console.log(\"Opened files database.\");\n            window.SqueakDB = this.result;\n            SqueakDB.onversionchange = function(e) {\n                delete window.SqueakDB;\n                this.close();\n            };\n            SqueakDB.onerror = function(e) {\n                console.error(\"Error accessing database: \" + e.target.error.name);\n            };\n            startTransaction();\n        };\n        openReq.onupgradeneeded = function (e) {\n            // run only first time, or when version changed\n            console.log(\"Creating files database\");\n            var db = e.target.result;\n            db.createObjectStore(\"files\");\n        };\n        openReq.onerror = function(e) {\n            console.error(e.target.error.name + \": cannot open files database\");\n            console.warn(\"Falling back to local storage\");\n            fakeTransaction();\n        };\n        openReq.onblocked = function(e) {\n            // If some other tab is loaded with the database, then it needs to be closed\n            // before we can proceed upgrading the database.\n            console.log(\"Database upgrade needed, but was blocked.\");\n            console.warn(\"Falling back to local storage\");\n            fakeTransaction();\n        };\n    },\n    dbFake: function() {\n        // indexedDB is not supported by this browser, fake it using localStorage\n        // since localStorage space is severly limited, use LZString if loaded\n        // see https://github.com/pieroxy/lz-string\n        if (typeof SqueakDBFake == \"undefined\") {\n            if (typeof indexedDB == \"undefined\")\n                console.warn(\"IndexedDB not supported by this browser, using localStorage\");\n            window.SqueakDBFake = {\n                bigFiles: {},\n                bigFileThreshold: 100000,\n                get: function(filename) {\n                    var buffer = SqueakDBFake.bigFiles[filename];\n                    if (!buffer) {\n                        var string = localStorage[\"squeak-file:\" + filename];\n                        if (!string) {\n                            var compressed = localStorage[\"squeak-file.lz:\" + filename];\n                            if (compressed) {\n                                if (typeof LZString == \"object\") {\n                                    string = LZString.decompressFromUTF16(compressed);\n                                } else {\n                                    console.error(\"LZString not loaded: cannot decompress \" + filename);\n                                }\n                            }\n                        }\n                        if (string) {\n                            var bytes = new Uint8Array(string.length);\n                            for (var i = 0; i < bytes.length; i++)\n                                bytes[i] = string.charCodeAt(i) & 0xFF;\n                            buffer = bytes.buffer;\n                        }\n                    }\n                    var req = {result: buffer};\n                    setTimeout(function(){\n                        if (req.onsuccess) req.onsuccess({target: req});\n                    }, 0);\n                    return req;\n                },\n                put: function(buffer, filename) {\n                    if (buffer.byteLength > SqueakDBFake.bigFileThreshold) {\n                        if (!SqueakDBFake.bigFiles[filename])\n                            console.log(\"File \" + filename + \" (\" + buffer.byteLength + \" bytes) too large, storing in memory only\");\n                        SqueakDBFake.bigFiles[filename] = buffer;\n                    } else {\n                        var string = Squeak.bytesAsString(new Uint8Array(buffer));\n                        if (typeof LZString == \"object\") {\n                            var compressed = LZString.compressToUTF16(string);\n                            localStorage[\"squeak-file.lz:\" + filename] = compressed;\n                            delete localStorage[\"squeak-file:\" + filename];\n                        } else {\n                            localStorage[\"squeak-file:\" + filename] = string;\n                        }\n                    }\n                    var req = {};\n                    setTimeout(function(){if (req.onsuccess) req.onsuccess()}, 0);\n                    return req;\n                },\n                delete: function(filename) {\n                    delete localStorage[\"squeak-file:\" + filename];\n                    delete localStorage[\"squeak-file.lz:\" + filename];\n                    delete SqueakDBFake.bigFiles[filename];\n                    var req = {};\n                    setTimeout(function(){if (req.onsuccess) req.onsuccess()}, 0);\n                    return req;\n                },\n                openCursor: function() {\n                    var req = {};\n                    setTimeout(function(){if (req.onsuccess) req.onsuccess({target: req})}, 0);\n                    return req;\n                },\n            }\n        }\n        return SqueakDBFake;\n    },\n    fileGet: function(filepath, thenDo, errorDo) {\n        if (!errorDo) errorDo = function(err) { console.log(err) };\n        var path = this.splitFilePath(filepath);\n        if (!path.basename) return errorDo(\"Invalid path: \" + filepath);\n        // if we have been writing to memory, return that version\n        if (window.SqueakDBFake && SqueakDBFake.bigFiles[path.fullname])\n            return thenDo(SqueakDBFake.bigFiles[path.fullname]);\n        this.dbTransaction(\"readonly\", \"get \" + filepath, function(fileStore) {\n            var getReq = fileStore.get(path.fullname);\n            getReq.onerror = function(e) { errorDo(e.target.error.name) };\n            getReq.onsuccess = function(e) {\n                if (this.result !== undefined) return thenDo(this.result);\n                // might be a template\n                Squeak.fetchTemplateFile(path.fullname,\n                    function gotTemplate(template) {thenDo(template)},\n                    function noTemplate() {\n                        // if no indexedDB then we have checked fake db already\n                        if (typeof indexedDB == \"undefined\") return errorDo(\"file not found: \" + path.fullname);\n                        // fall back on fake db, may be file is there\n                        var fakeReq = Squeak.dbFake().get(path.fullname);\n                        fakeReq.onerror = function(e) { errorDo(\"file not found: \" + path.fullname) };\n                        fakeReq.onsuccess = function(e) { thenDo(this.result); }\n                    });\n            };\n        });\n    },\n    filePut: function(filepath, contents, optSuccess) {\n        // store file, return dir entry if successful\n        var path = this.splitFilePath(filepath); if (!path.basename) return null;\n        var directory = this.dirList(path.dirname); if (!directory) return null;\n        // get or create entry\n        var entry = directory[path.basename],\n            now = this.totalSeconds();\n        if (!entry) { // new file\n            entry = [/*name*/ path.basename, /*ctime*/ now, /*mtime*/ 0, /*dir*/ false, /*size*/ 0];\n            directory[path.basename] = entry;\n        } else if (entry[3]) // is a directory\n            return null;\n        // update directory entry\n        entry[2] = now; // modification time\n        entry[4] = contents.byteLength || contents.length || 0;\n        localStorage[\"squeak:\" + path.dirname] = JSON.stringify(directory);\n        // put file contents (async)\n        this.dbTransaction(\"readwrite\", \"put \" + filepath,\n            function(fileStore) {\n                fileStore.put(contents, path.fullname);\n            },\n            function transactionComplete() {\n                if (optSuccess) optSuccess();\n            });\n        return entry;\n    },\n    fileDelete: function(filepath, entryOnly) {\n        var path = this.splitFilePath(filepath); if (!path.basename) return false;\n        var directory = this.dirList(path.dirname); if (!directory) return false;\n        var entry = directory[path.basename]; if (!entry || entry[3]) return false; // not found or is a directory\n        // delete entry from directory\n        delete directory[path.basename];\n        localStorage[\"squeak:\" + path.dirname] = JSON.stringify(directory);\n        if (entryOnly) return true;\n        // delete file contents (async)\n        this.dbTransaction(\"readwrite\", \"delete \" + filepath, function(fileStore) {\n            fileStore.delete(path.fullname);\n        });\n        return true;\n    },\n    fileRename: function(from, to) {\n        var oldpath = this.splitFilePath(from); if (!oldpath.basename) return false;\n        var newpath = this.splitFilePath(to); if (!newpath.basename) return false;\n        var olddir = this.dirList(oldpath.dirname); if (!olddir) return false;\n        var entry = olddir[oldpath.basename]; if (!entry || entry[3]) return false; // not found or is a directory\n        var samedir = oldpath.dirname == newpath.dirname;\n        var newdir = samedir ? olddir : this.dirList(newpath.dirname); if (!newdir) return false;\n        if (newdir[newpath.basename]) return false; // exists already\n        delete olddir[oldpath.basename];            // delete old entry\n        entry[0] = newpath.basename;                // rename entry\n        newdir[newpath.basename] = entry;           // add new entry\n        localStorage[\"squeak:\" + newpath.dirname] = JSON.stringify(newdir);\n        if (!samedir) localStorage[\"squeak:\" + oldpath.dirname] = JSON.stringify(olddir);\n        // move file contents (async)\n        this.fileGet(oldpath.fullname,\n            function success(contents) {\n                this.dbTransaction(\"readwrite\", \"rename \" + oldpath.fullname + \" to \" + newpath.fullname, function(fileStore) {\n                    fileStore.delete(oldpath.fullname);\n                    fileStore.put(contents, newpath.fullname);\n                });\n            }.bind(this),\n            function error(msg) {\n                console.log(\"File rename failed: \" + msg);\n            }.bind(this));\n        return true;\n    },\n    fileExists: function(filepath) {\n        var path = this.splitFilePath(filepath); if (!path.basename) return false;\n        var directory = this.dirList(path.dirname); if (!directory) return false;\n        var entry = directory[path.basename]; if (!entry || entry[3]) return false; // not found or is a directory\n        return true;\n    },\n    dirCreate: function(dirpath, withParents) {\n        var path = this.splitFilePath(dirpath); if (!path.basename) return false;\n        if (withParents && !localStorage[\"squeak:\" + path.dirname]) Squeak.dirCreate(path.dirname, true);\n        var directory = this.dirList(path.dirname); if (!directory) return false;\n        if (directory[path.basename]) return false;\n        var now = this.totalSeconds(),\n            entry = [/*name*/ path.basename, /*ctime*/ now, /*mtime*/ now, /*dir*/ true, /*size*/ 0];\n        directory[path.basename] = entry;\n        localStorage[\"squeak:\" + path.fullname] = JSON.stringify({});\n        localStorage[\"squeak:\" + path.dirname] = JSON.stringify(directory);\n        return true;\n    },\n    dirDelete: function(dirpath) {\n        var path = this.splitFilePath(dirpath); if (!path.basename) return false;\n        var directory = this.dirList(path.dirname); if (!directory) return false;\n        if (!directory[path.basename]) return false;\n        var children = this.dirList(path.fullname);\n        if (!children) return false;\n        for (var child in children) return false; // not empty\n        // delete from parent\n        delete directory[path.basename];\n        localStorage[\"squeak:\" + path.dirname] = JSON.stringify(directory);\n        // delete itself\n        delete localStorage[\"squeak:\" + path.fullname];\n        return true;\n    },\n    dirList: function(dirpath, includeTemplates) {\n        // return directory entries or null\n        var path = this.splitFilePath(dirpath),\n            localEntries = localStorage[\"squeak:\" + path.fullname],\n            template = includeTemplates && localStorage[\"squeak-template:\" + path.fullname];\n        function addEntries(dir, entries) {\n            for (var key in entries) {\n                if (entries.hasOwnProperty(key)) {\n                    var entry = entries[key];\n                    dir[entry[0]] = entry;\n                }\n            }\n        }\n        if (localEntries || template) {\n            // local entries override templates\n            var dir = {};\n            if (template) addEntries(dir, JSON.parse(template).entries);\n            if (localEntries) addEntries(dir, JSON.parse(localEntries));\n            return dir;\n        }\n        if (path.fullname == \"/\") return {};\n        return null;\n    },\n    splitFilePath: function(filepath) {\n        if (filepath[0] !== '/') filepath = '/' + filepath;\n        filepath = filepath.replace(/\\/\\//ig, '/');      // replace double-slashes\n        var matches = filepath.match(/(.*)\\/(.*)/),\n            dirname = matches[1].length ? matches[1] : '/',\n            basename = matches[2].length ? matches[2] : null;\n        return {fullname: filepath, dirname: dirname, basename: basename};\n    },\n    flushFile: function(file) {\n        if (file.modified) {\n            var buffer = file.contents.buffer;\n            if (buffer.byteLength !== file.size) {\n                buffer = new ArrayBuffer(file.size);\n                (new Uint8Array(buffer)).set(file.contents.subarray(0, file.size));\n            }\n            Squeak.filePut(file.name, buffer);\n            // if (/SqueakDebug.log/.test(file.name)) {\n            //     var chars = Squeak.bytesAsString(new Uint8Array(buffer));\n            //     console.warn(chars.replace(/\\r/g, '\\n'));\n            // }\n            file.modified = false;\n        }\n    },\n    flushAllFiles: function() {\n        if (typeof SqueakFiles == 'undefined') return;\n        for (var name in SqueakFiles)\n            this.flushFile(SqueakFiles[name]);\n    },\n    closeAllFiles: function() {\n        // close the files held open in memory\n        Squeak.flushAllFiles();\n        delete window.SqueakFiles;\n    },\n    fetchTemplateDir: function(path, url) {\n        // Called on app startup. Fetch url/sqindex.json and\n        // cache all subdirectory entries in localStorage.\n        // File contents is only fetched on demand\n        path = Squeak.splitFilePath(path).fullname;\n        function ensureTemplateParent(template) {\n            var path = Squeak.splitFilePath(template);\n            if (path.dirname !== \"/\") ensureTemplateParent(path.dirname);\n            var template = JSON.parse(localStorage[\"squeak-template:\" + path.dirname] || '{\"entries\": {}}');\n            if (!template.entries[path.basename]) {\n                var now = Squeak.totalSeconds();\n                template.entries[path.basename] = [path.basename, now, now, true, 0];\n                localStorage[\"squeak-template:\" + path.dirname] = JSON.stringify(template);\n            }\n        }\n        function checkSubTemplates(path, url) {\n            var template = JSON.parse(localStorage[\"squeak-template:\" + path]);\n            for (var key in template.entries) {\n                var entry = template.entries[key];\n                if (entry[3]) Squeak.fetchTemplateDir(path + \"/\" + entry[0], url + \"/\" + entry[0]);\n            };\n        }\n        if (localStorage[\"squeak-template:\" + path]) {\n            checkSubTemplates(path, url);\n        } else  {\n            var index = url + \"/sqindex.json\";\n            var rq = new XMLHttpRequest();\n            rq.open('GET', index, true);\n            rq.onload = function(e) {\n                if (rq.status == 200) {\n                    console.log(\"adding template \" + path);\n                    ensureTemplateParent(path);\n                    var entries = JSON.parse(rq.response),\n                        template = {url: url, entries: {}};\n                    for (var key in entries) {\n                        var entry = entries[key];\n                        template.entries[entry[0]] = entry;\n                    }\n                    localStorage[\"squeak-template:\" + path] = JSON.stringify(template);\n                    checkSubTemplates(path, url);\n                }\n                else rq.onerror(rq.statusText);\n            };\n            rq.onerror = function(e) {\n                console.log(\"cannot load template index \" + index);\n            }\n            rq.send();\n        }\n    },\n    fetchTemplateFile: function(path, ifFound, ifNotFound) {\n        path = Squeak.splitFilePath(path);\n        var template = localStorage[\"squeak-template:\" + path.dirname];\n        if (!template) return ifNotFound();\n        var url = JSON.parse(template).url;\n        if (!url) return ifNotFound();\n        url += \"/\" + path.basename;\n        var rq = new XMLHttpRequest();\n        rq.open(\"get\", url, true);\n        rq.responseType = \"arraybuffer\";\n        rq.timeout = 30000;\n        rq.onreadystatechange = function() {\n            if (this.readyState != this.DONE) return;\n            if (this.status == 200) {\n                var buffer = this.response;\n                console.log(\"Got \" + buffer.byteLength + \" bytes from \" + url);\n                Squeak.dirCreate(path.dirname, true);\n                Squeak.filePut(path.fullname, buffer);\n                ifFound(buffer);\n            } else {\n                alert(\"Download failed (\" + this.status + \") \" + url);\n                ifNotFound();\n            }\n        }\n        console.log(\"Fetching \" + url);\n        rq.send();\n    },\n},\n\"audio\", {\n    startAudioOut: function() {\n        if (!this.audioOutContext) {\n            var ctxProto = window.AudioContext || window.webkitAudioContext\n                || window.mozAudioContext || window.msAudioContext;\n            this.audioOutContext = ctxProto && new ctxProto();\n        }\n        return this.audioOutContext;\n    },\n    startAudioIn: function(thenDo, errorDo) {\n        if (this.audioInContext) {\n            this.audioInSource.disconnect();\n            return thenDo(this.audioInContext, this.audioInSource);\n        }\n        navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia\n            || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n        if (!navigator.getUserMedia) return errorDo(\"test: audio input not supported\");\n        navigator.getUserMedia({audio: true, toString: function() {return \"audio\"}},\n            function onSuccess(stream) {\n                var ctxProto = window.AudioContext || window.webkitAudioContext\n                    || window.mozAudioContext || window.msAudioContext;\n                this.audioInContext = ctxProto && new ctxProto();\n                this.audioInSource = this.audioInContext.createMediaStreamSource(stream);\n                thenDo(this.audioInContext, this.audioInSource);\n            },\n            function onError() {\n                errorDo(\"cannot access microphone\");\n            });\n    },\n    stopAudio: function() {\n        if (this.audioInSource)\n            this.audioInSource.disconnect();\n    },\n},\n\"time\", {\n    Epoch: Date.UTC(1901,0,1) + (new Date()).getTimezoneOffset()*60000,        // local timezone\n    EpochUTC: Date.UTC(1901,0,1),\n    totalSeconds: function() {\n        // seconds since 1901-01-01, local time\n        return Math.floor((Date.now() - Squeak.Epoch) / 1000);\n    },\n},\n\"utils\", {\n    bytesAsString: function(bytes) {\n        var chars = [];\n            for (var i = 0; i < bytes.length; i++)\n                chars.push(String.fromCharCode(bytes[i]));\n        return chars.join('');\n    },\n});\n\n\nObject.subclass('Squeak.Image',\n'about', {\n    about: function() {\n    /*\n    Object Format\n    =============\n    Each Squeak object is a Squeak.Object instance, only SmallIntegers are JS numbers.\n    Instance variables/fields reference other objects directly via the \"pointers\" property.\n    A Spur image uses Squeak.ObjectSpur instances instead. Characters are not immediate,\n    but made identical using a character table. They are created with their mark bit set to\n    true, so are ignored by the GC.\n    {\n        sqClass: reference to class object\n        format: format integer as in Squeak oop header\n        hash: identity hash integer\n        pointers: (optional) Array referencing inst vars + indexable fields\n        words: (optional) Array of numbers (words)\n        bytes: (optional) Array of numbers (bytes)\n        float: (optional) float value if this is a Float object\n        isNil: (optional) true if this is the nil object\n        isTrue: (optional) true if this is the true object\n        isFalse: (optional) true if this is the false object\n        isFloat: (optional) true if this is a Float object\n        isFloatClass: (optional) true if this is the Float class\n        isCompact: (optional) true if this is a compact class\n        oop: identifies this object in a snapshot (assigned on GC, new space object oops are negative)\n        mark: boolean (used only during GC, otherwise false)\n        nextObject: linked list of objects in old space (new space objects do not have this yet)\n    }\n\n    Object Table\n    ============\n    There is no actual object table. Instead, objects in old space are a linked list.\n    New objects are only referenced by other objects' pointers, and thus can be garbage-collected\n    at any time by the Javascript GC.\n\n    Weak references are only finalized during a full GC.\n\n    */\n    }\n},\n'initializing', {\n    initialize: function(name) {\n        this.totalMemory = 100000000;\n        this.name = name;\n        this.gcCount = 0;\n        this.gcTenured = 0;\n        this.gcMilliseconds = 0;\n        this.allocationCount = 0;\n        this.oldSpaceCount = 0;\n        this.newSpaceCount = 0;\n        this.hasNewInstances = {};\n    },\n    readFromBuffer: function(arraybuffer, thenDo, progressDo) {\n        console.log('squeak: reading ' + this.name + ' (' + arraybuffer.byteLength + ' bytes)');\n        this.startupTime = Date.now();\n        var data = new DataView(arraybuffer),\n            littleEndian = false,\n            pos = 0;\n        var readWord = function() {\n            var int = data.getUint32(pos, littleEndian);\n            pos += 4;\n            return int;\n        };\n        var readBits = function(nWords, isPointers) {\n            if (isPointers) { // do endian conversion\n                var oops = [];\n                while (oops.length < nWords)\n                    oops.push(readWord());\n                return oops;\n            } else { // words (no endian conversion yet)\n                var bits = new Uint32Array(arraybuffer, pos, nWords);\n                pos += nWords*4;\n                return bits;\n            }\n        };\n        // read version and determine endianness\n        var versions = [6501, 6502, 6504, 6505, 6521, 68000, 68002, 68003, 68021],\n            version = 0,\n            fileHeaderSize = 0;\n        while (true) {  // try all four endianness + header combos\n            littleEndian = !littleEndian;\n            pos = fileHeaderSize;\n            version = readWord();\n            if (versions.indexOf(version) >= 0) break;\n            if (!littleEndian) fileHeaderSize += 512;\n            if (fileHeaderSize > 512) throw Error(\"bad image version\");\n        };\n        this.version = version;\n        var nativeFloats = [6505, 6521, 68003, 68021].indexOf(version) >= 0;\n        this.hasClosures = [6504, 6505, 6521, 68002, 68003, 68021].indexOf(version) >= 0;\n        this.isSpur = [6521, 68021].indexOf(version) >= 0;\n        if (version >= 68000) throw Error(\"64 bit images not supported yet\");\n        // parse image header\n        var imageHeaderSize = readWord();\n        var objectMemorySize = readWord(); //first unused location in heap\n        var oldBaseAddr = readWord(); //object memory base address of image\n        var specialObjectsOopInt = readWord(); //oop of array of special oops\n        this.lastHash = readWord(); //Should be loaded from, and saved to the image header\n        this.savedHeaderWords = [];\n        for (var i = 0; i < 6; i++)\n            this.savedHeaderWords.push(readWord());\n        var firstSegSize = readWord();\n        var prevObj;\n        var oopMap = {};\n        var headerSize = fileHeaderSize + imageHeaderSize;\n        pos = headerSize;\n        if (!this.isSpur) {\n            // read traditional object memory\n            while (pos < headerSize + objectMemorySize) {\n                var nWords = 0;\n                var classInt = 0;\n                var header = readWord();\n                switch (header & Squeak.HeaderTypeMask) {\n                    case Squeak.HeaderTypeSizeAndClass:\n                        nWords = header >>> 2;\n                        classInt = readWord();\n                        header = readWord();\n                        break;\n                    case Squeak.HeaderTypeClass:\n                        classInt = header - Squeak.HeaderTypeClass;\n                        header = readWord();\n                        nWords = (header >>> 2) & 63;\n                        break;\n                    case Squeak.HeaderTypeShort:\n                        nWords = (header >>> 2) & 63;\n                        classInt = (header >>> 12) & 31; //compact class index\n                        //Note classInt<32 implies compact class index\n                        break;\n                    case Squeak.HeaderTypeFree:\n                        throw Error(\"Unexpected free block\");\n                }\n                nWords--;  //length includes base header which we have already read\n                var oop = pos - 4 - headerSize, //0-rel byte oop of this object (base header)\n                    format = (header>>>8) & 15,\n                    hash = (header>>>17) & 4095,\n                    bits = readBits(nWords, format < 5);\n                var object = new Squeak.Object();\n                object.initFromImage(oop, classInt, format, hash, bits);\n                if (classInt < 32) object.hash |= 0x10000000;    // see fixCompactOops()\n                if (prevObj) prevObj.nextObject = object;\n                this.oldSpaceCount++;\n                prevObj = object;\n                //oopMap is from old oops to actual objects\n                oopMap[oldBaseAddr + oop] = object;\n            }\n            this.firstOldObject = oopMap[oldBaseAddr+4];\n            this.lastOldObject = object;\n            this.oldSpaceBytes = objectMemorySize;\n        } else {\n            // Read all Spur object memory segments\n            this.oldSpaceBytes = firstSegSize - 16;\n            var segmentEnd = pos + firstSegSize,\n                addressOffset = 0,\n                freePageList = null,\n                classPages = null,\n                skippedBytes = 0,\n                oopAdjust = {};\n            while (pos < segmentEnd) {\n                while (pos < segmentEnd - 16) {\n                    // read objects in segment\n                    var objPos = pos,\n                        formatAndClass = readWord(),\n                        sizeAndHash = readWord(),\n                        size = sizeAndHash >>> 24;\n                    if (size === 255) { // reinterpret word as size, read header again\n                        size = formatAndClass;\n                        formatAndClass = readWord();\n                        sizeAndHash = readWord();\n                    }\n                    var oop = addressOffset + pos - 8 - headerSize,\n                        format = (formatAndClass >>> 24) & 0x1F,\n                        classID = formatAndClass & 0x003FFFFF,\n                        hash = sizeAndHash & 0x003FFFFF;\n                    var bits = readBits(size, format < 10 && classID > 0);\n                    pos += (size < 2 ? 2 - size : size & 1) * 4; // align on 8 bytes, 16 min\n                    // low class ids are internal to Spur\n                    if (classID >= 32) {\n                        var object = new Squeak.ObjectSpur();\n                        object.initFromImage(oop, classID, format, hash, bits);\n                        if (prevObj) prevObj.nextObject = object;\n                        this.oldSpaceCount++;\n                        prevObj = object;\n                        //oopMap is from old oops to actual objects\n                        oopMap[oldBaseAddr + oop] = object;\n                        oopAdjust[oop] = skippedBytes;\n                    } else {\n                        skippedBytes += pos - objPos;\n                        if (!freePageList) freePageList = bits;       // first hidden obj\n                        else if (!classPages) classPages = bits;      // second hidden obj\n                        oopMap[oldBaseAddr + oop] = bits;             // used in spurClassTable()\n                    }\n                }\n                if (pos !== segmentEnd - 16) throw Error(\"invalid segment\");\n                // last 16 bytes in segment is a bridge object\n                var deltaWords = readWord(),\n                    deltaWordsHi = readWord(),\n                    segmentBytes = readWord(),\n                    segmentBytesHi = readWord();\n                //  if segmentBytes is zero, the end of the image has been reached\n                if (segmentBytes === 0) {\n                    if (deltaWords !== 0x4A000003) throw Error(\"Magic number at image end not found\");\n                } else {\n                    var deltaBytes = deltaWords * 4;\n                    segmentEnd += segmentBytes;\n                    addressOffset += deltaBytes;\n                    skippedBytes += 16 + deltaBytes;\n                    this.oldSpaceBytes += deltaBytes + segmentBytes;\n                }\n            }\n            this.oldSpaceBytes -= skippedBytes;\n            this.firstOldObject = oopMap[oldBaseAddr];\n            this.lastOldObject = object;\n        }\n\n        if (!this.isSpur) {\n            // For debugging: re-create all objects from named prototypes\n            var cc = oopMap[oopMap[specialObjectsOopInt].bits[Squeak.splOb_CompactClasses]].bits;\n            var renamedObj = null;\n            object = this.firstOldObject;\n            prevObj = null;\n            while (object) {\n                prevObj = renamedObj;\n                renamedObj = object.renameFromImage(oopMap, cc);\n                if (prevObj) prevObj.nextObject = renamedObj;\n                oopMap[oldBaseAddr + object.oop] = renamedObj;\n                object = object.nextObject;\n            }\n            this.firstOldObject = oopMap[oldBaseAddr+4];\n            this.lastOldObject = renamedObj;\n        }\n\n        // properly link objects by mapping via oopMap\n        var splObs         = oopMap[specialObjectsOopInt];\n        var compactClasses = oopMap[splObs.bits[Squeak.splOb_CompactClasses]].bits;\n        var floatClass     = oopMap[splObs.bits[Squeak.splOb_ClassFloat]];\n        // Spur needs different arguments for installFromImage()\n        if (this.isSpur) {\n            var charClass = oopMap[splObs.bits[Squeak.splOb_ClassCharacter]];\n            this.initCharacterTable(charClass);\n            compactClasses = this.spurClassTable(oopMap, classPages, splObs);\n            nativeFloats = this.getCharacter.bind(this);\n            this.initSpurOverrides();\n        }\n        var obj = this.firstOldObject,\n            done = 0,\n            self = this;\n        function mapSomeObjects() {\n            if (obj) {\n                var stop = done + (self.oldSpaceCount / 20 | 0);    // do it in 20 chunks\n                while (obj && done < stop) {\n                    obj.installFromImage(oopMap, compactClasses, floatClass, littleEndian, nativeFloats);\n                    obj = obj.nextObject;\n                    done++;\n                }\n                if (progressDo) progressDo(done / self.oldSpaceCount);\n                return true;    // do more\n            } else { // done\n                self.specialObjectsArray = splObs;\n                self.decorateKnownObjects();\n                if (self.isSpur) {\n                    self.fixSkippedOops(oopAdjust);\n                } else {\n                    self.fixCompiledMethods();\n                    self.fixCompactOops();\n                }\n                return false;   // don't do more\n            }\n        };\n        function mapSomeObjectsAsync() {\n            if (mapSomeObjects()) {\n                window.setTimeout(mapSomeObjectsAsync, 0);\n            } else {\n                if (thenDo) thenDo();\n            }\n        };\n        if (!progressDo) {\n            while (mapSomeObjects());   // do it synchronously\n            if (thenDo) thenDo();\n        } else {\n            window.setTimeout(mapSomeObjectsAsync, 0);\n        }\n    },\n    decorateKnownObjects: function() {\n        var splObjs = this.specialObjectsArray.pointers;\n        splObjs[Squeak.splOb_NilObject].isNil = true;\n        splObjs[Squeak.splOb_TrueObject].isTrue = true;\n        splObjs[Squeak.splOb_FalseObject].isFalse = true;\n        splObjs[Squeak.splOb_ClassFloat].isFloatClass = true;\n        if (!this.isSpur) {\n            this.compactClasses = this.specialObjectsArray.pointers[Squeak.splOb_CompactClasses].pointers;\n            for (var i = 0; i < this.compactClasses.length; i++)\n                if (!this.compactClasses[i].isNil)\n                    this.compactClasses[i].isCompact = true;\n        }\n        if (!Number.prototype.sqInstName)\n            Object.defineProperty(Number.prototype, 'sqInstName', {\n                enumerable: false,\n                value: function() { return this.toString() }\n            });\n    },\n    fixCompactOops: function() {\n        // instances of compact classes might have been saved with a non-compact header\n        // fix their oops here so validation succeeds later\n        if (this.isSpur) return;\n        var obj = this.firstOldObject,\n            adjust = 0;\n        while (obj) {\n            var hadCompactHeader = obj.hash > 0x0FFFFFFF,\n                mightBeCompact = !!obj.sqClass.isCompact;\n            if (hadCompactHeader !== mightBeCompact) {\n                var isCompact = obj.snapshotSize().header === 0;\n                if (hadCompactHeader !== isCompact) {\n                    adjust += isCompact ? -4 : 4;\n                }\n            }\n            obj.hash &= 0x0FFFFFFF;\n            obj.oop += adjust;\n            obj = obj.nextObject;\n        }\n        this.oldSpaceBytes += adjust;\n    },\n    fixCompiledMethods: function() {\n        // in the 6501 pre-release image, some CompiledMethods\n        // do not have the proper class\n        if (this.version >= 6502) return;\n        var obj = this.firstOldObject,\n            compiledMethodClass = this.specialObjectsArray.pointers[Squeak.splOb_ClassCompiledMethod];\n        while (obj) {\n            if (obj.isMethod()) obj.sqClass = compiledMethodClass;\n            obj = obj.nextObject;\n        }\n    },\n    fixSkippedOops: function(oopAdjust) {\n        // reading Spur skips some internal objects\n        // we adjust the oops of following objects here\n        // this is like the compaction phase of our GC\n        var obj = this.firstOldObject;\n        while (obj) {\n            obj.oop -= oopAdjust[obj.oop];\n            obj = obj.nextObject;\n        }\n        // do a sanity check\n        obj = this.lastOldObject;\n        if (obj.addr() + obj.totalBytes() !== this.oldSpaceBytes)\n            throw Error(\"image size doesn't match object sizes\")\n    },\n},\n'garbage collection', {\n    partialGC: function() {\n        // no partial GC needed since new space uses the Javascript GC\n        return this.totalMemory - this.oldSpaceBytes;\n    },\n    fullGC: function(reason) {\n        // Collect garbage and return first tenured object (to support object enumeration)\n        // Old space is a linked list of objects - each object has an \"nextObject\" reference.\n        // New space objects do not have that pointer, they are garbage-collected by JavaScript.\n        // But they have an allocation id so the survivors can be ordered on tenure.\n        // The \"nextObject\" references are created by collecting all new objects,\n        // sorting them by id, and then linking them into old space.\n\n        this.vm.addMessage(\"fullGC: \" + reason);\n        var start = Date.now();\n        var newObjects = this.markReachableObjects();\n        this.removeUnmarkedOldObjects();\n        this.appendToOldObjects(newObjects);\n        this.finalizeWeakReferences();\n        this.allocationCount += this.newSpaceCount;\n        this.newSpaceCount = 0;\n        this.hasNewInstances = {};\n        this.gcCount++;\n        this.gcMilliseconds += Date.now() - start;\n        return newObjects.length > 0 ? newObjects[0] : null;\n    },\n    markReachableObjects: function() {\n        // Visit all reachable objects and mark them.\n        // Return surviving new objects\n        // Contexts are handled specially: they have garbage beyond the stack pointer\n        // which must not be traced, and is cleared out here\n        // In weak objects, only the inst vars are traced\n        this.vm.storeContextRegisters();        // update active context\n        var todo = [this.specialObjectsArray, this.vm.activeContext];\n        var newObjects = [];\n        while (todo.length > 0) {\n            var object = todo.pop();\n            if (object.mark) continue;             // objects are added to todo more than once\n            if (!object.nextObject && object !== this.lastOldObject)       // it's a new object\n                newObjects.push(object);\n            object.mark = true;           // mark it\n            if (!object.sqClass.mark)     // trace class if not marked\n                todo.push(object.sqClass);\n            var body = object.pointers;\n            if (body) {                   // trace all unmarked pointers\n                var n = object.nonWeakSize();               // do not trace weak fields\n                if (this.vm.isContext(object)) {            // contexts have garbage beyond SP\n                    n = object.contextSizeWithStack();\n                    for (var i = n; i < body.length; i++)   // clean up that garbage\n                        body[i] = this.vm.nilObj;\n                }\n                for (var i = 0; i < n; i++)\n                    if (typeof body[i] === \"object\" && !body[i].mark)      // except immediates\n                        todo.push(body[i]);\n                // Note: \"immediate\" character objects in Spur always stay marked\n            }\n        }\n        // sort by oop to preserve creation order\n        return newObjects.sort(function(a,b){return b.oop - a.oop});\n    },\n    removeUnmarkedOldObjects: function() {\n        // Unlink unmarked old objects from the nextObject linked list\n        // Reset marks of remaining objects, and adjust their oops\n        // Set this.lastOldObject to last old object\n        var removedCount = 0,\n            removedBytes = 0,\n            obj = this.firstOldObject;\n        obj.mark = false; // we know the first object (nil) was marked\n        while (true) {\n            var next = obj.nextObject;\n            if (!next) {// we're done\n                this.lastOldObject = obj;\n                this.oldSpaceBytes -= removedBytes;\n                this.oldSpaceCount -= removedCount;\n                return;\n            }\n            // if marked, continue with next object\n            if (next.mark) {\n                obj = next;\n                obj.mark = false;           // unmark for next GC\n                obj.oop -= removedBytes;    // compact oops\n            } else { // otherwise, remove it\n                var corpse = next;\n                obj.nextObject = corpse.nextObject;     // drop from old-space list\n                corpse.oop = -(++this.newSpaceCount);   // move to new-space for finalizing\n                removedBytes += corpse.totalBytes();\n                removedCount++;\n                //console.log(\"removing \" + removedCount + \" \" + removedBytes + \" \" + corpse.totalBytes() + \" \" + corpse.toString())\n            }\n        }\n    },\n    appendToOldObjects: function(newObjects) {\n        // append new objects to linked list of old objects\n        // and unmark them\n        var oldObj = this.lastOldObject;\n        //var oldBytes = this.oldSpaceBytes;\n        for (var i = 0; i < newObjects.length; i++) {\n            var newObj = newObjects[i];\n            newObj.mark = false;\n            this.oldSpaceBytes = newObj.setAddr(this.oldSpaceBytes);     // add at end of memory\n            oldObj.nextObject = newObj;\n            oldObj = newObj;\n            //console.log(\"tenuring \" + (i+1) + \" \" + (this.oldSpaceBytes - oldBytes) + \" \" + newObj.totalBytes() + \" \" + newObj.toString());\n        }\n        this.lastOldObject = oldObj;\n        this.oldSpaceCount += newObjects.length;\n        this.gcTenured += newObjects.length;\n    },\n    finalizeWeakReferences: function() {\n        // nil out all weak fields that did not survive GC\n        var weakObj = this.firstOldObject;\n        while (weakObj) {\n            if (weakObj.isWeak()) {\n                var pointers = weakObj.pointers || [],\n                    firstWeak = weakObj.sqClass.classInstSize(),\n                    finalized = false;\n                for (var i = firstWeak; i < pointers.length; i++) {\n                    if (pointers[i].oop < 0) {    // ref is not in old-space\n                        pointers[i] = this.vm.nilObj;\n                        finalized = true;\n                    }\n                }\n                if (finalized) {\n                    this.vm.pendingFinalizationSignals++;\n                    if (firstWeak >= 2) { // check if weak obj is a finalizer item\n                        var list = weakObj.pointers[Squeak.WeakFinalizerItem_list];\n                        if (list.sqClass == this.vm.specialObjects[Squeak.splOb_ClassWeakFinalizer]) {\n                            // add weak obj as first in the finalization list\n                            var items = list.pointers[Squeak.WeakFinalizationList_first];\n                            weakObj.pointers[Squeak.WeakFinalizerItem_next] = items;\n                            list.pointers[Squeak.WeakFinalizationList_first] = weakObj;\n                        }\n                    }\n                }\n            }\n            weakObj = weakObj.nextObject;\n        };\n        if (this.vm.pendingFinalizationSignals > 0) {\n            this.vm.forceInterruptCheck();                      // run finalizer asap\n        }\n    },\n},\n'creating', {\n    registerObject: function(obj) {\n        // We don't actually register the object yet, because that would prevent\n        // it from being garbage-collected by the Javascript collector\n        obj.oop = -(++this.newSpaceCount); // temp oops are negative. Real oop assigned when surviving GC\n        // Note this is also done in loadImageSegment()\n        this.lastHash = (13849 + (27181 * this.lastHash)) & 0xFFFFFFFF;\n        return this.lastHash & 0xFFF;\n    },\n    registerObjectSpur: function(obj) {\n        // We don't actually register the object yet, because that would prevent\n        // it from being garbage-collected by the Javascript collector\n        obj.oop = -(++this.newSpaceCount); // temp oops are negative. Real oop assigned when surviving GC\n        // Note this is also done in loadImageSegment()\n        return 0; // actual hash created on demand\n    },\n    instantiateClass: function(aClass, indexableSize, filler) {\n        var newObject = new (aClass.classInstProto()); // Squeak.Object\n        var hash = this.registerObject(newObject);\n        newObject.initInstanceOf(aClass, indexableSize, hash, filler);\n        this.hasNewInstances[aClass.oop] = true;   // need GC to find all instances\n        return newObject;\n    },\n    clone: function(object) {\n        var newObject = new (object.sqClass.classInstProto()); // Squeak.Object\n        var hash = this.registerObject(newObject);\n        newObject.initAsClone(object, hash);\n        this.hasNewInstances[newObject.sqClass.oop] = true;   // need GC to find all instances\n        return newObject;\n    },\n},\n'operations', {\n    bulkBecome: function(fromArray, toArray, twoWay, copyHash) {\n        if (!fromArray)\n            return !toArray;\n        var n = fromArray.length;\n        if (n !== toArray.length)\n            return false;\n        // need to visit all objects, so ensure new objects have\n        // nextObject pointers and permanent oops\n        if (this.newSpaceCount > 0)\n            this.fullGC(\"become\");              // does update context\n        else\n            this.vm.storeContextRegisters();    // still need to update active context\n        // obj.oop used as dict key here is why we store them\n        // rather than just calculating at image snapshot time\n        var mutations = {};\n        for (var i = 0; i < n; i++) {\n            var obj = fromArray[i];\n            if (!obj.sqClass) return false;  //non-objects in from array\n            if (mutations[obj.oop]) return false; //repeated oops in from array\n            else mutations[obj.oop] = toArray[i];\n        }\n        if (twoWay) for (var i = 0; i < n; i++) {\n            var obj = toArray[i];\n            if (!obj.sqClass) return false;  //non-objects in to array\n            if (mutations[obj.oop]) return false; //repeated oops in to array\n            else mutations[obj.oop] = fromArray[i];\n        }\n        // unless copyHash is false, make hash stay with the reference, not with the object\n        if (copyHash) for (var i = 0; i < n; i++) {\n            if (!toArray[i].sqClass) return false; //cannot change hash of non-objects\n            var fromHash = fromArray[i].hash;\n            fromArray[i].hash = toArray[i].hash;\n            toArray[i].hash = fromHash;\n        }\n        // Now, for every object...\n        var obj = this.firstOldObject;\n        while (obj) {\n            // mutate the class\n            var mut = mutations[obj.sqClass.oop];\n            if (mut) obj.sqClass = mut;\n            // and mutate body pointers\n            var body = obj.pointers;\n            if (body) for (var j = 0; j < body.length; j++) {\n                mut = mutations[body[j].oop];\n                if (mut) body[j] = mut;\n            }\n            obj = obj.nextObject;\n        }\n        this.vm.flushMethodCacheAfterBecome(mutations);\n        return true;\n    },\n    objectAfter: function(obj) {\n        // if this was the last old object, tenure new objects and try again\n        return obj.nextObject || (this.newSpaceCount > 0 && this.fullGC(\"nextObject\"));\n    },\n    someInstanceOf: function(clsObj) {\n        var obj = this.firstOldObject;\n        while (obj) {\n            if (obj.sqClass === clsObj)\n                return obj;\n            obj = obj.nextObject || this.nextObjectWithGCFor(clsObj);\n        }\n        return null;\n    },\n    nextInstanceAfter: function(obj) {\n        var clsObj = obj.sqClass;\n        while (true) {\n            obj = obj.nextObject || this.nextObjectWithGCFor(clsObj);\n            if (!obj) return null;\n            if (obj.sqClass === clsObj)\n                return obj;\n        }\n    },\n    nextObjectWithGCFor: function(clsObj) {\n        if (this.newSpaceCount === 0 || !this.hasNewInstances[clsObj.oop]) return null;\n        return this.fullGC(\"instance of \" + clsObj.className());\n    },\n    allInstancesOf: function(clsObj) {\n        var obj = this.firstOldObject,\n            result = [];\n        while (obj) {\n            if (obj.sqClass === clsObj) result.push(obj);\n            obj = obj.nextObject || this.nextObjectWithGCFor(clsObj);\n        }\n        return result;\n    },\n    writeToBuffer: function() {\n        var headerSize = 64,\n            data = new DataView(new ArrayBuffer(headerSize + this.oldSpaceBytes)),\n            pos = 0;\n        var writeWord = function(word) {\n            data.setUint32(pos, word);\n            pos += 4;\n        };\n        writeWord(this.formatVersion()); // magic number\n        writeWord(headerSize);\n        writeWord(this.oldSpaceBytes); // end of memory\n        writeWord(this.firstOldObject.addr()); // base addr (0)\n        writeWord(this.objectToOop(this.specialObjectsArray));\n        writeWord(this.lastHash);\n        writeWord((800 << 16) + 600);  // window size\n        while (pos < headerSize)\n            writeWord(0);\n        // objects\n        var obj = this.firstOldObject,\n            n = 0;\n        while (obj) {\n            pos = obj.writeTo(data, pos, this);\n            obj = obj.nextObject;\n            n++;\n        }\n        if (pos !== data.byteLength) throw Error(\"wrong image size\");\n        if (n !== this.oldSpaceCount) throw Error(\"wrong object count\");\n        return data.buffer;\n    },\n    objectToOop: function(obj) {\n        // unsigned word for use in snapshot\n        if (typeof obj ===  \"number\")\n            return obj << 1 | 1; // add tag bit\n        if (obj.oop < 0) throw Error(\"temporary oop\");\n        return obj.oop;\n    },\n    bytesLeft: function() {\n        return this.totalMemory - this.oldSpaceBytes;\n    },\n    formatVersion: function() {\n        return this.isSpur ? 6521 : this.hasClosures ? 6504 : 6502;\n    },\n    segmentVersion: function() {\n        var dnu = this.specialObjectsArray.pointers[Squeak.splOb_SelectorDoesNotUnderstand],\n            wholeWord = new Uint32Array(dnu.bytes.buffer, 0, 1);\n        return this.formatVersion() | (wholeWord[0] & 0xFF000000);\n    },\n    loadImageSegment: function(segmentWordArray, outPointerArray) {\n        // The C VM creates real objects from the segment in-place. We need to create\n        // real objects, which we just put in new space.\n        // The code below is almost the same as readFromBuffer() ... should unify\n        var data = new DataView(segmentWordArray.words.buffer),\n            littleEndian = false,\n            nativeFloats = false,\n            pos = 0;\n        var readWord = function() {\n            var int = data.getUint32(pos, littleEndian);\n            pos += 4;\n            return int;\n        };\n        var readBits = function(nWords, format) {\n            if (format < 5) { // pointers (do endian conversion)\n                var oops = [];\n                while (oops.length < nWords)\n                    oops.push(readWord());\n                return oops;\n            } else { // words (no endian conversion yet)\n                var bits = new Uint32Array(data.buffer, pos, nWords);\n                pos += nWords * 4;\n                return bits;\n            }\n        };\n        // check version\n        var version = readWord();\n        if (version & 0xFFFF !== 6502) {\n            littleEndian = true; pos = 0;\n            version = readWord();\n            if (version & 0xFFFF !== 6502) {\n                console.error(\"image segment format not supported\");\n                return null;\n            }\n        }\n        // read objects\n        var segment = [],\n            oopMap = {};\n        while (pos < data.byteLength) {\n            var nWords = 0,\n                classInt = 0,\n                header = readWord();\n            switch (header & Squeak.HeaderTypeMask) {\n                case Squeak.HeaderTypeSizeAndClass:\n                    nWords = header >>> 2;\n                    classInt = readWord();\n                    header = readWord();\n                    break;\n                case Squeak.HeaderTypeClass:\n                    classInt = header - Squeak.HeaderTypeClass;\n                    header = readWord();\n                    nWords = (header >>> 2) & 63;\n                    break;\n                case Squeak.HeaderTypeShort:\n                    nWords = (header >>> 2) & 63;\n                    classInt = (header >>> 12) & 31; //compact class index\n                    //Note classInt<32 implies compact class index\n                    break;\n                case Squeak.HeaderTypeFree:\n                    throw Error(\"Unexpected free block\");\n            }\n            nWords--;  //length includes base header which we have already read\n            var oop = pos, //0-rel byte oop of this object (base header)\n                format = (header>>>8) & 15,\n                hash = (header>>>17) & 4095,\n                bits = readBits(nWords, format);\n\n            var object = new Squeak.Object();\n            object.initFromImage(oop, classInt, format, hash, bits);\n            segment.push(object);\n            oopMap[oop] = object;\n        }\n        // add outPointers to oopMap\n        for (var i = 0; i < outPointerArray.pointers.length; i++)\n            oopMap[0x80000004 + i * 4] = outPointerArray.pointers[i];\n        // add compactClasses to oopMap\n        var compactClasses = this.specialObjectsArray.pointers[Squeak.splOb_CompactClasses].pointers,\n            fakeClsOop = 0, // make up a compact-classes array with oops, as if loading an image\n            compactClassOops = compactClasses.map(function(cls) {\n                oopMap[--fakeClsOop] = cls; return fakeClsOop; });\n        // map objects using oopMap, and assign new oops\n        var roots = oopMap[8] || oopMap[12] || oopMap[16],      // might be 1/2/3 header words\n            floatClass = this.specialObjectsArray.pointers[Squeak.splOb_ClassFloat];\n        for (var i = 0; i < segment.length; i++) {\n            var obj = segment[i];\n            obj.installFromImage(oopMap, compactClassOops, floatClass, littleEndian, nativeFloats);\n            obj.oop = -(++this.newSpaceCount);  // make this a proper new-space object (see registerObject)\n            this.hasNewInstances[obj.sqClass.oop] = true;   // need GC to find all instances\n        }\n        // don't truncate segmentWordArray now like the C VM does. It does not seem to be\n        // worth the trouble of adjusting the following oops\n        return roots;\n    },\n},\n'spur support',\n{\n    initSpurOverrides: function() {\n        this.registerObject = this.registerObjectSpur;\n        this.writeToBuffer = this.writeToBufferSpur;\n    },\n    spurClassTable: function(oopMap, classPages, splObjs) {\n        var classes = {};\n        // read class table pages\n        for (var p = 0; p < 4096; p++) {\n            var page = oopMap[classPages[p]];\n            if (page.length === 1024) for (var i = 0; i < 1024; i++) {\n                var maybeClass = oopMap[page[i]]\n                if (maybeClass._format === 1) {\n                    var classIndex = p * 1024 + i;\n                    classes[classIndex] = maybeClass;\n                }\n            }\n        }\n        // add known classes which may not be in the table\n        for (var key in Squeak) {\n            if (/^splOb_Class/.test(key)) {\n                var knownClass = oopMap[splObjs.bits[Squeak[key]]];\n                if (knownClass._format === 1) {\n                    var classIndex = knownClass.hash;\n                    if (classIndex > 0 && classIndex < 1024)\n                        classes[classIndex] = knownClass;\n                }\n            }\n        }\n        this.classTable = classes;\n        this.classTableIndex = 1024;  // first page is special\n        return classes;\n    },\n    enterIntoClassTable: function(newClass) {\n        var index = this.classTableIndex,\n            table = this.classTable;\n        while (index <= 0x3FFFFF) {\n            if (!table[index]) {\n                table[index] = newClass;\n                newClass.hash = index;\n                this.classTableIndex = index;\n                return index;\n            }\n            index++;\n        }\n        console.error(\"class table full?\"); // todo: clean out old class table entries\n        return null;\n    },\n    initCharacterTable: function(characterClass) {\n        characterClass.classInstProto(\"Character\"); // provide name\n        this.characterClass = characterClass;\n        this.characterTable = {};\n    },\n    getCharacter: function(unicode) {\n        var char = this.characterTable[unicode];\n        if (!char) {\n            char = new this.characterClass.instProto;\n            char.initInstanceOfChar(this.characterClass, unicode);\n            this.characterTable[unicode] = char;\n        }\n        return char;\n    },\n    maxClassIndex: function() {\n        var index = 1024,\n            table = this.classTable;\n        for (var key in table) {\n            var classID = table[key].hash;\n            if (classID > index) index = classID;\n        }\n        return index;\n    },\n    classTableBytes: function() {\n        // space needed for master table and minor pages\n        var pages = (this.maxClassIndex() >> 10) + 1;\n        return (4 + 4104 + pages * (4 + 1024)) * 4;\n    },\n    writeFreeLists: function(data, pos, littleEndian, oopOffset) {\n        // we fake an empty free lists object\n        data.setUint32(pos, 0x0A000012, littleEndian); pos += 4;\n        data.setUint32(pos, 0x20000000, littleEndian); pos += 4;\n        pos += 32 * 4;  // 32 zeros\n        return pos;\n    },\n    writeClassTable: function(data, pos, littleEndian, objToOop) {\n        // write class tables as Spur expects them, faking their oops\n        var pages = (this.maxClassIndex() >> 10) + 1,\n            nilFalseTrueBytes = 3 * 16,\n            freeListBytes = 8 + 32 * 4,\n            majorTableSlots = 4096 + 8,         // class pages plus 8 hiddenRootSlots\n            minorTableSlots = 1024,\n            majorTableBytes = 16 + majorTableSlots * 4,\n            minorTableBytes = 16 + minorTableSlots * 4,\n            firstPageOop = nilFalseTrueBytes + freeListBytes + majorTableBytes + 8;\n        // major table\n        data.setUint32(pos, majorTableSlots, littleEndian); pos += 4;\n        data.setUint32(pos,      0xFF000000, littleEndian); pos += 4;\n        data.setUint32(pos,      0x02000010, littleEndian); pos += 4;\n        data.setUint32(pos,      0xFF000000, littleEndian); pos += 4;\n        for (var p = 0; p < pages; p++) {\n            data.setUint32(pos, firstPageOop + p * minorTableBytes, littleEndian); pos += 4;\n        }\n        pos += (majorTableSlots - pages) * 4;  // rest is nil\n        // minor tables\n        var classID = 0;\n        for (var p = 0; p < pages; p++) {\n            data.setUint32(pos, minorTableSlots, littleEndian); pos += 4;\n            data.setUint32(pos,      0xFF000000, littleEndian); pos += 4;\n            data.setUint32(pos,      0x02000010, littleEndian); pos += 4;\n            data.setUint32(pos,      0xFF000000, littleEndian); pos += 4;\n            for (var i = 0; i < minorTableSlots; i++) {\n                var classObj = this.classTable[classID];\n                if (classObj && classObj.pointers) {\n                    if (!classObj.hash) throw Error(\"class without id\");\n                    if (classObj.hash !== classID && classID >= 32) {\n                        console.warn(\"freeing class index \" + classID + \" \" + classObj.className());\n                        classObj = null;\n                    }\n                }\n                if (classObj) data.setUint32(pos, objToOop(classObj), littleEndian); \n                pos += 4;\n                classID++;\n            }\n        }\n        return pos;\n    },\n    writeToBufferSpur: function() {\n        var headerSize = 64,\n            trailerSize = 16,\n            freeListsSize = 136,\n            hiddenSize = freeListsSize + this.classTableBytes(),\n            data = new DataView(new ArrayBuffer(headerSize + hiddenSize + this.oldSpaceBytes + trailerSize)),\n            littleEndian = true,\n            start = Date.now(),\n            pos = 0;\n        function writeWord(word) {\n            data.setUint32(pos, word, littleEndian);\n            pos += 4;\n        };\n        function objToOop(obj) {\n            if (typeof obj === \"number\")\n                return obj << 1 | 1; // add tag bit\n            if (obj._format === 7) {\n                if (obj.hash !== (obj.oop >> 2) || (obj.oop & 3) !== 2)\n                    throw Error(\"Bad immediate char\");\n                return obj.oop;\n            }\n            if (obj.oop < 0) throw Error(\"temporary oop\");\n            // oops after nil/false/true are shifted by size of hidden objects\n            return obj.oop < 48 ? obj.oop : obj.oop + hiddenSize;\n        };\n        writeWord(this.formatVersion()); // magic number\n        writeWord(headerSize);\n        writeWord(hiddenSize + this.oldSpaceBytes + trailerSize); // end of memory\n        writeWord(this.firstOldObject.addr()); // base addr (0)\n        writeWord(objToOop(this.specialObjectsArray));\n        writeWord(this.lastHash);\n        this.savedHeaderWords.forEach(writeWord);\n        writeWord(hiddenSize + this.oldSpaceBytes + trailerSize); //first segment size\n        while (pos < headerSize)\n            writeWord(0);\n        // write objects\n        var obj = this.firstOldObject,\n            n = 0;\n        pos = obj.writeTo(data, pos, littleEndian, objToOop); obj = obj.nextObject; n++; // write nil\n        pos = obj.writeTo(data, pos, littleEndian, objToOop); obj = obj.nextObject; n++; // write false\n        pos = obj.writeTo(data, pos, littleEndian, objToOop); obj = obj.nextObject; n++; // write true\n        pos = this.writeFreeLists(data, pos, littleEndian, objToOop); // write hidden free list\n        pos = this.writeClassTable(data, pos, littleEndian, objToOop); // write hidden class table\n        while (obj) {\n            pos = obj.writeTo(data, pos, littleEndian, objToOop);\n            obj = obj.nextObject;\n            n++;\n        }\n        // write segement trailer\n        writeWord(0x4A000003);\n        writeWord(0x00800000);\n        writeWord(0);\n        writeWord(0);\n        // done\n        if (pos !== data.byteLength) throw Error(\"wrong image size\");\n        if (n !== this.oldSpaceCount) throw Error(\"wrong object count\");\n        var time = Date.now() - start;\n        console.log(\"Wrote \" + n + \" objects in \" + time + \" ms, image size \" + pos + \" bytes\")\n        return data.buffer;\n    },\n});\n\nObject.subclass('Squeak.Object',\n'initialization', {\n    initInstanceOf: function(aClass, indexableSize, hash, nilObj) {\n        this.sqClass = aClass;\n        this.hash = hash;\n        var instSpec = aClass.pointers[Squeak.Class_format],\n            instSize = ((instSpec>>1) & 0x3F) + ((instSpec>>10) & 0xC0) - 1; //0-255\n        this._format = (instSpec>>7) & 0xF; //This is the 0-15 code\n\n        if (this._format < 8) {\n            if (this._format != 6) {\n                if (instSize + indexableSize > 0)\n                    this.pointers = this.fillArray(instSize + indexableSize, nilObj);\n            } else // Words\n                if (indexableSize > 0)\n                    if (aClass.isFloatClass) {\n                        this.isFloat = true;\n                        this.float = 0.0;\n                    } else\n                        this.words = new Uint32Array(indexableSize);\n        } else // Bytes\n            if (indexableSize > 0) {\n                // this._format |= -indexableSize & 3;       //deferred to writeTo()\n                this.bytes = new Uint8Array(indexableSize); //Methods require further init of pointers\n            }\n\n//      Definition of Squeak's format code...\n//\n//      Pointers only...\n//        0      no fields\n//        1      fixed fields only (all containing pointers)\n//        2      indexable fields only (all containing pointers)\n//        3      both fixed and indexable fields (all containing pointers)\n//        4      both fixed and indexable weak fields (all containing pointers).\n//        5      unused\n//      Bits only...\n//        6      indexable word fields only (no pointers)\n//        7      unused\n//        8-11   indexable byte fields only (no pointers) (low 2 bits are low 2 bits of size)\n//      Pointer and bits (CompiledMethods only)...\n//       12-15   compiled methods:\n//               # of literal oops specified in method header,\n//               followed by indexable bytes (same interpretation of low 2 bits as above)\n    },\n    initAsClone: function(original, hash) {\n        this.sqClass = original.sqClass;\n        this.hash = hash;\n        this._format = original._format;\n        if (original.isFloat) {\n            this.isFloat = original.isFloat;\n            this.float = original.float;\n        } else {\n            if (original.pointers) this.pointers = original.pointers.slice(0);   // copy\n            if (original.words) this.words = new Uint32Array(original.words);    // copy\n            if (original.bytes) this.bytes = new Uint8Array(original.bytes);     // copy\n        }\n    },\n    initFromImage: function(oop, cls, fmt, hsh, data) {\n        // initial creation from Image, with unmapped data\n        this.oop = oop;\n        this.sqClass = cls;\n        this._format = fmt;\n        this.hash = hsh;\n        this.bits = data;\n    },\n    classNameFromImage: function(oopMap) {\n        var name = oopMap[this.bits[Squeak.Class_name]];\n        if (name && name._format >= 8 && name._format < 12) {\n            var bytes = name.decodeBytes(name.bits.length, name.bits, 0, name._format & 3);\n            return Squeak.bytesAsString(bytes);\n        }\n        return \"Class\";\n    },\n    renameFromImage: function(oopMap, ccArray) {\n        var classObj = this.sqClass < 32 ? oopMap[ccArray[this.sqClass-1]] : oopMap[this.sqClass];\n        var instProto = classObj.instProto || classObj.classInstProto(classObj.classNameFromImage(oopMap));\n        if (!instProto) return this;\n        var renamedObj = new instProto; // Squeak.Object\n        renamedObj.oop = this.oop;\n        renamedObj.sqClass = this.sqClass;\n        renamedObj._format = this._format;\n        renamedObj.hash = this.hash;\n        renamedObj.bits = this.bits;\n        return renamedObj;\n    },\n    installFromImage: function(oopMap, ccArray, floatClass, littleEndian, nativeFloats) {\n        //Install this object by decoding format, and rectifying pointers\n        var ccInt = this.sqClass;\n        // map compact classes\n        if ((ccInt>0) && (ccInt<32))\n            this.sqClass = oopMap[ccArray[ccInt-1]];\n        else\n            this.sqClass = oopMap[ccInt];\n        var nWords = this.bits.length;\n        if (this._format < 5) {\n            //Formats 0...4 -- Pointer fields\n            if (nWords > 0) {\n                var oops = this.bits; // endian conversion was already done\n                this.pointers = this.decodePointers(nWords, oops, oopMap);\n            }\n        } else if (this._format >= 12) {\n            //Formats 12-15 -- CompiledMethods both pointers and bits\n            var methodHeader = this.decodeWords(1, this.bits, littleEndian)[0],\n                numLits = (methodHeader>>10) & 255,\n                oops = this.decodeWords(numLits+1, this.bits, littleEndian);\n            this.pointers = this.decodePointers(numLits+1, oops, oopMap); //header+lits\n            this.bytes = this.decodeBytes(nWords-(numLits+1), this.bits, numLits+1, this._format & 3);\n        } else if (this._format >= 8) {\n            //Formats 8..11 -- ByteArrays (and ByteStrings)\n            if (nWords > 0)\n                this.bytes = this.decodeBytes(nWords, this.bits, 0, this._format & 3);\n        } else if (this.sqClass == floatClass) {\n            //These words are actually a Float\n            this.isFloat = true;\n            this.float = this.decodeFloat(this.bits, littleEndian, nativeFloats);\n            if (this.float == 1.3797216632888e-310) {\n                if (/noFloatDecodeWorkaround/.test(window.location.hash)) {\n                    // floatDecode workaround disabled\n                } else {\n                    this.constructor.prototype.decodeFloat = this.decodeFloatDeoptimized;\n                    this.float = this.decodeFloat(this.bits, littleEndian, nativeFloats);\n                    if (this.float == 1.3797216632888e-310)\n                        throw Error(\"Cannot deoptimize decodeFloat\");\n                }\n            }\n        } else {\n            if (nWords > 0)\n                this.words = this.decodeWords(nWords, this.bits, littleEndian);\n        }\n        delete this.bits;\n        this.mark = false; // for GC\n    },\n    decodePointers: function(nWords, theBits, oopMap) {\n        //Convert small ints and look up object pointers in oopMap\n        var ptrs = new Array(nWords);\n        for (var i = 0; i < nWords; i++) {\n            var oop = theBits[i];\n            if ((oop & 1) === 1) {          // SmallInteger\n                ptrs[i] = oop >> 1;\n            } else {                        // Object\n                ptrs[i] = oopMap[oop] || 42424242;\n                // when loading a context from image segment, there is\n                // garbage beyond its stack pointer, resulting in the oop\n                // not being found in oopMap. We just fill in an arbitrary\n                // SmallInteger - it's never accessed anyway\n            }\n        }\n        return ptrs;\n    },\n    decodeWords: function(nWords, theBits, littleEndian) {\n        var data = new DataView(theBits.buffer, theBits.byteOffset),\n            words = new Uint32Array(nWords);\n        for (var i = 0; i < nWords; i++)\n            words[i] = data.getUint32(i*4, littleEndian);\n        return words;\n    },\n    decodeBytes: function (nWords, theBits, wordOffset, fmtLowBits) {\n        // Adjust size for low bits and make a copy\n        var nBytes = (nWords * 4) - fmtLowBits,\n            wordsAsBytes = new Uint8Array(theBits.buffer, theBits.byteOffset + wordOffset * 4, nBytes),\n            bytes = new Uint8Array(nBytes);\n        bytes.set(wordsAsBytes);\n        return bytes;\n    },\n    decodeFloat: function(theBits, littleEndian, nativeFloats) {\n        var data = new DataView(theBits.buffer, theBits.byteOffset);\n        // it's either big endian ...\n        if (!littleEndian) return data.getFloat64(0, false);\n        // or real little endian\n        if (nativeFloats) return data.getFloat64(0, true);\n        // or little endian, but with swapped words\n        var buffer = new ArrayBuffer(8),\n            swapped = new DataView(buffer);\n        swapped.setUint32(0, data.getUint32(4));\n        swapped.setUint32(4, data.getUint32(0));\n        return swapped.getFloat64(0, true);\n    },\n    decodeFloatDeoptimized: function(theBits, littleEndian, nativeFloats) {\n        var data = new DataView(theBits.buffer, theBits.byteOffset);\n        // it's either big endian ...\n        if (!littleEndian) return data.getFloat64(0, false);\n        // or real little endian\n        if (nativeFloats) return data.getFloat64(0, true);\n        // or little endian, but with swapped words\n        var buffer = new ArrayBuffer(8),\n            swapped = new DataView(buffer);\n        // wrap in function to defeat Safari's optimizer, which always\n        // answers 1.3797216632888e-310 if called more than 25000 times\n        (function() {\n            swapped.setUint32(0, data.getUint32(4));\n            swapped.setUint32(4, data.getUint32(0));\n        })();\n        return swapped.getFloat64(0, true);\n    },\n    fillArray: function(length, filler) {\n        for (var array = [], i = 0; i < length; i++)\n            array[i] = filler;\n        return array;\n    },\n},\n'testing', {\n    isWords: function() {\n        return this._format === 6;\n    },\n    isBytes: function() {\n        var fmt = this._format;\n        return fmt >= 8 && fmt <= 11;\n    },\n    isWordsOrBytes: function() {\n        var fmt = this._format;\n        return fmt == 6  || (fmt >= 8 && fmt <= 11);\n    },\n    isPointers: function() {\n        return this._format <= 4;\n    },\n    isWeak: function() {\n        return this._format === 4;\n    },\n    isMethod: function() {\n        return this._format >= 12;\n    },\n    sameFormats: function(a, b) {\n        return a < 8 ? a === b : (a & 0xC) === (b & 0xC);\n    },\n    sameFormatAs: function(obj) {\n        return this.sameFormats(this._format, obj._format);\n    },\n    sameShapeAs: function(obj) {\n        // can we change my class to that of obj?\n        return this.sameFormatAs(obj) &&\n            this.sqClass.isCompact === obj.sqClass.isCompact &&\n            this.sqClass.classInstSize() === obj.sqClass.classInstSize();\n    },\n    classSameShapeAs: function(obj) {\n        // can we change obj's class to this?\n        return this.sameFormats(this.classInstFormat(), obj._format) &&\n            this.isCompact === obj.sqClass.isCompact &&\n            this.classInstSize() === obj.sqClass.classInstSize();\n    },\n},\n'printing', {\n    toString: function() {\n        return this.sqInstName();\n    },\n    bytesAsString: function() {\n        if (!this.bytes) return '';\n        return Squeak.bytesAsString(this.bytes);\n    },\n    bytesAsNumberString: function(negative) {\n        if (!this.bytes) return '';\n        var hex = '0123456789ABCDEF',\n            digits = [],\n            value = 0;\n        for (var i = this.bytes.length - 1; i >= 0; i--) {\n            digits.push(hex[this.bytes[i] >> 4]);\n            digits.push(hex[this.bytes[i] & 15]);\n            value = value * 256 + this.bytes[i];\n        }\n        var sign = negative ? '-' : '',\n            approx = value >= 9007199254740992 ? '' : '';\n        return sign + '16r' + digits.join('') + ' (' + approx + sign + value + 'L)';\n    },\n    assnKeyAsString: function() {\n        return this.pointers[Squeak.Assn_key].bytesAsString();\n    },\n    slotNameAt: function(index) {\n        // one-based index\n        var instSize = this.instSize();\n        if (index <= instSize)\n            return this.sqClass.allInstVarNames()[index - 1];\n        else\n            return (index - instSize).toString();\n    },\n    sqInstName: function() {\n        if (this.isNil) return \"nil\";\n        if (this.isTrue) return \"true\";\n        if (this.isFalse) return \"false\";\n        if (this.isFloat) {var str = this.float.toString(); if (!/\\./.test(str)) str += '.0'; return str; }\n        var className = this.sqClass.className();\n        if (/ /.test(className))\n            return 'the ' + className;\n        switch (className) {\n            case 'String':\n            case 'ByteString': return \"'\" + this.bytesAsString() + \"'\";\n            case 'Symbol':\n            case 'ByteSymbol':  return \"#\" + this.bytesAsString();\n            case 'Point': return this.pointers.join(\"@\");\n            case 'Rectangle': return this.pointers.join(\" corner: \");\n            case 'Association':\n            case 'ReadOnlyVariableBinding': return this.pointers.join(\"->\");\n            case 'LargePositiveInteger': return this.bytesAsNumberString(false);\n            case 'LargeNegativeInteger': return this.bytesAsNumberString(true);\n            case 'Character': var unicode = this.pointers ? this.pointers[0] : this.hash; // Spur\n                return \"$\" + String.fromCharCode(unicode) + \" (\" + unicode.toString() + \")\";\n        }\n        return  /^[aeiou]/i.test(className) ? 'an' + className : 'a' + className;\n    },\n},\n'accessing', {\n    pointersSize: function() {\n        return this.pointers ? this.pointers.length : 0;\n    },\n    nonWeakSize: function() {\n        if (!this.pointers) return 0;\n        return this._format === 4           // weak?\n            ? this.sqClass.classInstSize()  // only inst vars\n            : this.pointers.length;         // all fields\n    },\n    bytesSize: function() {\n        return this.bytes ? this.bytes.length : 0;\n    },\n    wordsSize: function() {\n        return this.isFloat ? 2 : this.words ? this.words.length : 0;\n    },\n    instSize: function() {//same as class.classInstSize, but faster from format\n        var fmt = this._format;\n        if (fmt > 4 || fmt === 2) return 0;      //indexable fields only\n        if (fmt < 2) return this.pointersSize(); //fixed fields only\n        return this.sqClass.classInstSize(); \n    },\n    indexableSize: function(primHandler) {\n        var fmt = this._format;\n        if (fmt < 2) return -1; //not indexable\n        if (fmt === 3 && primHandler.vm.isContext(this) && !primHandler.allowAccessBeyondSP)\n            return this.pointers[Squeak.Context_stackPointer]; // no access beyond top of stacks\n        if (fmt < 6) return this.pointersSize() - this.instSize(); // pointers\n        if (fmt < 8) return this.wordsSize(); // words\n        if (fmt < 12) return this.bytesSize(); // bytes\n        return this.bytesSize() + (4 * this.pointersSize()); // methods\n    },\n    floatData: function() {\n        var buffer = new ArrayBuffer(8);\n        var data = new DataView(buffer);\n        data.setFloat64(0, this.float, false);\n        //1st word is data.getUint32(0, false);\n        //2nd word is data.getUint32(4, false);\n        return data;\n    },\n    wordsAsFloat32Array: function() {\n        return this.float32Array\n            || (this.words && (this.float32Array = new Float32Array(this.words.buffer)));\n    },\n    wordsAsFloat64Array: function() {\n        return this.float64Array\n            || (this.words && (this.float64Array = new Float64Array(this.words.buffer)));\n    },\n    wordsAsInt32Array: function() {\n        return this.int32Array\n            || (this.words && (this.int32Array = new Int32Array(this.words.buffer)));\n    },\n    wordsAsInt16Array: function() {\n        return this.int16Array\n            || (this.words && (this.int16Array = new Int16Array(this.words.buffer)));\n    },\n    wordsAsUint16Array: function() {\n        return this.uint16Array\n            || (this.words && (this.uint16Array = new Uint16Array(this.words.buffer)));\n    },\n    wordsAsUint8Array: function() {\n        return this.uint8Array\n            || (this.words && (this.uint8Array = new Uint8Array(this.words.buffer)));\n    },\n    wordsOrBytes: function() {\n        if (this.words) return this.words;\n        if (this.uint32Array) return this.uint32Array;\n        if (!this.bytes) return null;\n        return this.uint32Array = new Uint32Array(this.bytes.buffer, 0, this.bytes.length >>> 2);\n    },\n    setAddr: function(addr) {\n        // Move this object to addr by setting its oop. Answer address after this object.\n        // Used to assign an oop for the first time when tenuring this object during GC.\n        // When compacting, the oop is adjusted directly, since header size does not change.\n        var words = this.snapshotSize();\n        this.oop = addr + words.header * 4;\n        return addr + (words.header + words.body) * 4;\n    },\n    snapshotSize: function() {\n        // words of extra object header and body this object would take up in image snapshot\n        // body size includes one header word that is always present\n        var nWords =\n            this.isFloat ? 2 :\n            this.words ? this.words.length :\n            this.pointers ? this.pointers.length : 0;\n        // methods have both pointers and bytes\n        if (this.bytes) nWords += (this.bytes.length + 3) >>> 2;\n        nWords++; // one header word always present\n        var extraHeader = nWords > 63 ? 2 : this.sqClass.isCompact ? 0 : 1;\n        return {header: extraHeader, body: nWords};\n    },\n    addr: function() { // start addr of this object in a snapshot\n        return this.oop - this.snapshotSize().header * 4;\n    },\n    totalBytes: function() {\n        // size in bytes this object would take up in image snapshot\n        var words = this.snapshotSize();\n        return (words.header + words.body) * 4;\n    },\n    writeTo: function(data, pos, image) {\n        // Write 1 to 3 header words encoding type, class, and size, then instance data\n        if (this.bytes) this._format |= -this.bytes.length & 3;\n        var beforePos = pos,\n            size = this.snapshotSize(),\n            formatAndHash = ((this._format & 15) << 8) | ((this.hash & 4095) << 17);\n        // write header words first\n        switch (size.header) {\n            case 2:\n                data.setUint32(pos, size.body << 2 | Squeak.HeaderTypeSizeAndClass); pos += 4;\n                data.setUint32(pos, this.sqClass.oop | Squeak.HeaderTypeSizeAndClass); pos += 4;\n                data.setUint32(pos, formatAndHash | Squeak.HeaderTypeSizeAndClass); pos += 4;\n                break;\n            case 1:\n                data.setUint32(pos, this.sqClass.oop | Squeak.HeaderTypeClass); pos += 4;\n                data.setUint32(pos, formatAndHash | size.body << 2 | Squeak.HeaderTypeClass); pos += 4;\n                break;\n            case 0:\n                var classIndex = image.compactClasses.indexOf(this.sqClass) + 1;\n                data.setUint32(pos, formatAndHash | classIndex << 12 | size.body << 2 | Squeak.HeaderTypeShort); pos += 4;\n        }\n        // now write body, if any\n        if (this.isFloat) {\n            data.setFloat64(pos, this.float); pos += 8;\n        } else if (this.words) {\n            for (var i = 0; i < this.words.length; i++) {\n                data.setUint32(pos, this.words[i]); pos += 4;\n            }\n        } else if (this.pointers) {\n            for (var i = 0; i < this.pointers.length; i++) {\n                data.setUint32(pos, image.objectToOop(this.pointers[i])); pos += 4;\n            }\n        }\n        // no \"else\" because CompiledMethods have both pointers and bytes\n        if (this.bytes) {\n            for (var i = 0; i < this.bytes.length; i++)\n                data.setUint8(pos++, this.bytes[i]);\n            // skip to next word\n            pos += -this.bytes.length & 3;\n        }\n        // done\n        if (pos !== beforePos + this.totalBytes()) throw Error(\"written size does not match\");\n        return pos;\n    },\n},\n'as class', {\n    classInstFormat: function() {\n        return (this.pointers[Squeak.Class_format] >> 7) & 0xF;\n    },\n    classInstSize: function() {\n        // this is a class, answer number of named inst vars\n        var spec = this.pointers[Squeak.Class_format];\n        return ((spec >> 10) & 0xC0) + ((spec >> 1) & 0x3F) - 1;\n    },\n    instVarNames: function() {\n        var index = this.pointers.length > 12 ? 4 :\n            this.pointers.length > 9 ? 3 : 4; // index changed in newer images\n        return (this.pointers[index].pointers || []).map(function(each) {\n            return each.bytesAsString();\n        });\n    },\n    allInstVarNames: function() {\n        var superclass = this.superclass();\n        if (superclass.isNil)\n            return this.instVarNames();\n        else\n            return superclass.allInstVarNames().concat(this.instVarNames());\n    },\n    superclass: function() {\n        return this.pointers[0];\n    },\n    className: function() {\n        if (!this.pointers) return \"_NOTACLASS_\";\n        var name = this.pointers[Squeak.Class_name];\n        if (name && name.bytes) return name.bytesAsString();\n        // must be meta class\n        for (var clsIndex = 5; clsIndex <= 6; clsIndex++) {\n            var cls = this.pointers[clsIndex];\n            if (cls && cls.pointers) {\n                name = cls.pointers[Squeak.Class_name];\n                if (name && name.bytes) return name.bytesAsString() + \" class\";\n            }\n        }\n        return \"_SOMECLASS_\";\n    },\n    defaultInst: function() {\n        return Squeak.Object;\n    },\n    classInstProto: function(className) {\n        if (this.instProto) return this.instProto;\n        var proto = this.defaultInst();  // in case below fails\n        try {\n            if (!className) className = this.className();\n            var safeName = className.replace(/[^A-Za-z0-9]/g,'_');\n            if (safeName === \"UndefinedObject\") safeName = \"nil\";\n            else if (safeName === \"True\") safeName = \"true_\";\n            else if (safeName === \"False\") safeName = \"false_\";\n            else safeName = ((/^[AEIOU]/.test(safeName)) ? 'an' : 'a') + safeName;\n            // fail okay if no eval()\n            proto = new Function(\"return function \" + safeName + \"() {};\")();\n            proto.prototype = this.defaultInst().prototype;\n        } catch(e) {}\n        Object.defineProperty(this, 'instProto', { value: proto });\n        return proto;\n    },\n},\n'as method', {\n    methodNumLits: function() {\n        return (this.pointers[0]>>9) & 0xFF;\n    },\n    methodNumArgs: function() {\n        return (this.pointers[0]>>24) & 0xF;\n    },\n    methodPrimitiveIndex: function() {\n        var primBits = this.pointers[0] & 0x300001FF;\n        if (primBits > 0x1FF)\n            return (primBits & 0x1FF) + (primBits >> 19);\n        else\n            return primBits;\n    },\n    methodClassForSuper: function() {//assn found in last literal\n        var assn = this.pointers[this.methodNumLits()];\n        return assn.pointers[Squeak.Assn_value];\n    },\n    methodNeedsLargeFrame: function() {\n        return (this.pointers[0] & 0x20000) > 0;\n    },\n    methodAddPointers: function(headerAndLits) {\n        this.pointers = headerAndLits;\n    },\n    methodTempCount: function() {\n        return (this.pointers[0]>>18) & 63;\n    },\n    methodGetLiteral: function(zeroBasedIndex) {\n        return this.pointers[1+zeroBasedIndex]; // step over header\n    },\n    methodGetSelector: function(zeroBasedIndex) {\n        return this.pointers[1+zeroBasedIndex]; // step over header\n    },\n},\n'as context',\n{\n    contextHome: function() {\n        return this.contextIsBlock() ? this.pointers[Squeak.BlockContext_home] : this;\n    },\n    contextIsBlock: function() {\n        return typeof this.pointers[Squeak.BlockContext_argumentCount] === 'number';\n    },\n    contextMethod: function() {\n        return this.contextHome().pointers[Squeak.Context_method];\n    },\n    contextSender: function() {\n        return this.pointers[Squeak.Context_sender];\n    },\n    contextSizeWithStack: function(vm) {\n        // Actual context size is inst vars + stack size. Slots beyond that may contain garbage.\n        // If passing in a VM, and this is the activeContext, use the VM's current value.\n        if (vm && vm.activeContext === this)\n            return vm.sp + 1;\n        // following is same as decodeSqueakSP() but works without vm ref\n        var sp = this.pointers[Squeak.Context_stackPointer];\n        return Squeak.Context_tempFrameStart + (typeof sp === \"number\" ? sp : 0);\n    },\n});\n\nSqueak.Object.subclass('Squeak.ObjectSpur',\n'initialization',\n{\n    initInstanceOf: function(aClass, indexableSize, hash, nilObj) {\n        this.sqClass = aClass;\n        this.hash = hash;\n        var instSpec = aClass.pointers[Squeak.Class_format],\n            instSize = instSpec & 0xFFFF,\n            format = (instSpec>>16) & 0x1F\n        this._format = format;\n        if (format < 12) {\n            if (format < 10) {\n                if (instSize + indexableSize > 0)\n                    this.pointers = this.fillArray(instSize + indexableSize, nilObj);\n            } else // Words\n                if (indexableSize > 0)\n                    if (aClass.isFloatClass) {\n                        this.isFloat = true;\n                        this.float = 0.0;\n                    } else\n                        this.words = new Uint32Array(indexableSize);\n        } else // Bytes\n            if (indexableSize > 0) {\n                // this._format |= -indexableSize & 3;       //deferred to writeTo()\n                this.bytes = new Uint8Array(indexableSize);  //Methods require further init of pointers\n            }\n//      Definition of Spur's format code...\n//\n// \t\t0\t= 0 sized objects (UndefinedObject True False et al)\n// \t\t1\t= non-indexable objects with inst vars (Point et al)\n// \t\t2\t= indexable objects with no inst vars (Array et al)\n// \t\t3\t= indexable objects with inst vars (MethodContext AdditionalMethodState et al)\n// \t\t4\t= weak indexable objects with inst vars (WeakArray et al)\n// \t\t5\t= weak non-indexable objects with inst vars (ephemerons) (Ephemeron)\n// \t\t6\t= unused\n// \t\t7\t= immediates (SmallInteger, Character)\n// \t\t8\t= unused\n// \t\t9\t= 64-bit indexable\n// \t10-11\t= 32-bit indexable (Bitmap)\t\t\t\t\t(plus one odd bit, unused in 32-bits)\n// \t12-15\t= 16-bit indexable\t\t\t\t\t\t\t(plus two odd bits, one unused in 32-bits)\n// \t16-23\t= 8-bit indexable\t\t\t\t\t\t\t(plus three odd bits, one unused in 32-bits)\n// \t24-31\t= compiled methods (CompiledMethod)\t(plus three odd bits, one unused in 32-bits)\n    },\n    installFromImage: function(oopMap, classTable, floatClass, littleEndian, getCharacter) {\n        //Install this object by decoding format, and rectifying pointers\n        var classID = this.sqClass;\n        if (classID < 32) throw Error(\"Invalid class ID\");\n        this.sqClass = classTable[classID];\n        if (!this.sqClass) throw Error(\"Invalid class ID\");\n        var nWords = this.bits.length;\n        switch (this._format) {\n            case 0: // zero sized object\n                break;\n            case 1: // only inst vars\n            case 2: // only indexed vars\n            case 3: // inst vars and indexed vars\n            case 4: // only indexed vars (weak)\n            case 5: // only inst vars (weak)\n                if (nWords > 0) {\n                    var oops = this.bits; // endian conversion was already done\n                    this.pointers = this.decodePointers(nWords, oops, oopMap, getCharacter);\n                }\n                break;\n            case 10: // 32 bit array\n                if (this.sqClass === floatClass) {\n                    //These words are actually a Float\n                    this.isFloat = true;\n                    this.float = this.decodeFloat(this.bits, littleEndian, true);\n                    if (this.float == 1.3797216632888e-310) {\n                        if (/noFloatDecodeWorkaround/.test(window.location.hash)) {\n                            // floatDecode workaround disabled\n                        } else {\n                            this.constructor.prototype.decodeFloat = this.decodeFloatDeoptimized;\n                            this.float = this.decodeFloat(this.bits, littleEndian, true);\n                            if (this.float == 1.3797216632888e-310)\n                                throw Error(\"Cannot deoptimize decodeFloat\");\n                        }\n                    }\n                } else if (nWords > 0) {\n                    this.words = this.decodeWords(nWords, this.bits, littleEndian);\n                }\n                break\n            case 12: // 16 bit array\n            case 13: // 16 bit array (odd length)\n                throw Error(\"16 bit arrays not supported yet\");\n            case 16: // 8 bit array\n            case 17: // ... length-1\n            case 18: // ... length-2\n            case 19: // ... length-3\n                if (nWords > 0)\n                    this.bytes = this.decodeBytes(nWords, this.bits, 0, this._format & 3);\n                break;\n            case 24: // CompiledMethod\n            case 25: // CompiledMethod\n            case 26: // CompiledMethod\n            case 27: // CompiledMethod\n                var rawHeader = this.decodeWords(1, this.bits, littleEndian)[0];\n                if (rawHeader & 0x80000000) throw Error(\"Alternate bytecode set not supported\")\n                var numLits = (rawHeader >> 1) & 0x7FFF,\n                    oops = this.decodeWords(numLits+1, this.bits, littleEndian);\n                this.pointers = this.decodePointers(numLits+1, oops, oopMap, getCharacter); //header+lits\n                this.bytes = this.decodeBytes(nWords-(numLits+1), this.bits, numLits+1, this._format & 3);\n                break\n            default:\n                throw Error(\"Unknown object format: \" + this._format);\n\n        }\n        delete this.bits;\n        this.mark = false; // for GC\n    },\n    decodePointers: function(nWords, theBits, oopMap, getCharacter) {\n        //Convert immediate objects and look up object pointers in oopMap\n        var ptrs = new Array(nWords);\n        for (var i = 0; i < nWords; i++) {\n            var oop = theBits[i];\n            if ((oop & 1) === 1) {          // SmallInteger\n                ptrs[i] = oop >> 1;\n            } else if ((oop & 3) === 2) {   // Character\n                ptrs[i] = getCharacter(oop >>> 2);\n            } else {                        // Object\n                ptrs[i] = oopMap[oop] || 42424242;\n                // when loading a context from image segment, there is\n                // garbage beyond its stack pointer, resulting in the oop\n                // not being found in oopMap. We just fill in an arbitrary\n                // SmallInteger - it's never accessed anyway\n            }\n        }\n        return ptrs;\n    },\n    initInstanceOfChar: function(charClass, unicode) {\n        this.oop = (unicode << 2) | 2;\n        this.sqClass = charClass;\n        this.hash = unicode;\n        this._format = 7;\n        this.mark = true;   // stays always marked so not traced by GC\n    },\n},\n'accessing', {\n    instSize: function() {//same as class.classInstSize, but faster from format\n        if (this._format < 2) return this.pointersSize(); //fixed fields only\n        return this.sqClass.classInstSize();\n    },\n    indexableSize: function(primHandler) {\n        var fmt = this._format;\n        if (fmt < 2) return -1; //not indexable\n        if (fmt === 3 && primHandler.vm.isContext(this) && !primHandler.allowAccessBeyondSP)\n            return this.pointers[Squeak.Context_stackPointer]; // no access beyond top of stacks\n        if (fmt < 6) return this.pointersSize() - this.instSize(); // pointers\n        if (fmt < 12) return this.wordsSize(); // words\n        if (fmt < 16) return this.shortsSize(); // shorts\n        if (fmt < 24) return this.bytesSize(); // bytes\n        return 4 * this.pointersSize() + this.bytesSize(); // methods\n    },\n    snapshotSize: function() {\n        // words of extra object header and body this object would take up in image snapshot\n        // body size includes header size that is always present\n        var nWords =\n            this.isFloat ? 2 :\n            this.words ? this.words.length :\n            this.pointers ? this.pointers.length : 0;\n        // methods have both pointers and bytes\n        if (this.bytes) nWords += (this.bytes.length + 3) >>> 2;\n        var extraHeader = nWords >= 255 ? 2 : 0;\n        nWords += nWords & 1; // align to 8 bytes\n        nWords += 2; // one 64 bit header always present\n        if (nWords < 4) nWords = 4; // minimum object size\n        return {header: extraHeader, body: nWords};\n    },\n    writeTo: function(data, pos, littleEndian, objToOop) {\n        var nWords =\n            this.isFloat ? 2 :\n            this.words ? this.words.length :\n            this.pointers ? this.pointers.length : 0;\n        if (this.bytes) {\n            nWords += (this.bytes.length + 3) >>> 2;\n            this._format |= -this.bytes.length & 3;\n        }\n        var beforePos = pos,\n            formatAndClass = (this._format << 24) | (this.sqClass.hash & 0x003FFFFF),\n            sizeAndHash = (nWords << 24) | (this.hash & 0x003FFFFF);\n        // write extra header if needed\n        if (nWords >= 255) {\n            data.setUint32(pos, nWords, littleEndian); pos += 4;\n            sizeAndHash = (255 << 24) | (this.hash & 0x003FFFFF);\n            data.setUint32(pos, sizeAndHash, littleEndian); pos += 4;\n        }\n        // write regular header\n        data.setUint32(pos, formatAndClass, littleEndian); pos += 4;\n        data.setUint32(pos, sizeAndHash, littleEndian); pos += 4;\n        // now write body, if any\n        if (this.isFloat) {\n            data.setFloat64(pos, this.float, littleEndian); pos += 8;\n        } else if (this.words) {\n            for (var i = 0; i < this.words.length; i++) {\n                data.setUint32(pos, this.words[i], littleEndian); pos += 4;\n            }\n        } else if (this.pointers) {\n            for (var i = 0; i < this.pointers.length; i++) {\n                data.setUint32(pos, objToOop(this.pointers[i]), littleEndian); pos += 4;\n            }\n        }\n        // no \"else\" because CompiledMethods have both pointers and bytes\n        if (this.bytes) {\n            for (var i = 0; i < this.bytes.length; i++)\n                data.setUint8(pos++, this.bytes[i]);\n            // skip to next word\n            pos += -this.bytes.length & 3;\n        }\n        // minimum object size is 16, align to 8 bytes\n        if (nWords === 0) pos += 8;\n        else pos += (nWords & 1) * 4;\n        // done\n        if (pos !== beforePos + this.totalBytes()) throw Error(\"written size does not match\");\n        return pos;\n    },\n},\n'testing', {\n    isBytes: function() {\n        var fmt = this._format;\n        return fmt >= 16 && fmt <= 23;\n    },\n    isPointers: function() {\n        return this._format <= 6;\n    },\n    isWords: function() {\n        return this._format === 10;\n    },\n    isWordsOrBytes: function() {\n        var fmt = this._format;\n        return fmt === 10 || (fmt >= 16 && fmt <= 23);\n    },\n    isWeak: function() {\n        return this._format === 4;\n    },\n    isMethod: function() {\n        return this._format >= 24;\n    },\n    sameFormats: function(a, b) {\n        return a < 16 ? a === b : (a & 0xF8) === (b & 0xF8);\n    },\n    sameShapeAs: function(obj) {\n        return this.sameFormatAs(obj) &&\n            this.sqClass.classInstSize() === obj.sqClass.classInstSize();\n    },\n    classSameShapeAs: function(obj) {\n        return this.sameFormats(this.classInstFormat(), obj._format) &&\n            this.classInstSize() === obj.sqClass.classInstSize();\n    },\n},\n'as class', {\n    defaultInst: function() {\n        return Squeak.ObjectSpur;\n    },\n    classInstFormat: function() {\n        return (this.pointers[Squeak.Class_format] >> 16) & 0x1F;\n    },\n    classInstSize: function() {\n        // this is a class, answer number of named inst vars\n        return this.pointers[Squeak.Class_format] & 0xFFFF;\n    },\n},\n'as method', {\n    methodNumLits: function() {\n        return this.pointers[0] & 0x7FFF;\n    },\n    methodPrimitiveIndex: function() {\n        if ((this.pointers[0] & 0x10000) === 0) return 0;\n        return this.bytes[1] + 256 * this.bytes[2];\n    },\n});\n\nObject.subclass('Squeak.Interpreter',\n'initialization', {\n    initialize: function(image, display) {\n        console.log('squeak: initializing interpreter ' + Squeak.vmVersion);\n        this.Squeak = Squeak;   // store locally to avoid dynamic lookup in Lively\n        this.image = image;\n        this.image.vm = this;\n        this.primHandler = new Squeak.Primitives(this, display);\n        this.loadImageState();\n        this.hackImage();\n        this.initVMState();\n        this.loadInitialContext();\n        this.initCompiler();\n        console.log('squeak: ready');\n    },\n    loadImageState: function() {\n        this.specialObjects = this.image.specialObjectsArray.pointers;\n        this.specialSelectors = this.specialObjects[Squeak.splOb_SpecialSelectors].pointers;\n        this.nilObj = this.specialObjects[Squeak.splOb_NilObject];\n        this.falseObj = this.specialObjects[Squeak.splOb_FalseObject];\n        this.trueObj = this.specialObjects[Squeak.splOb_TrueObject];\n        this.hasClosures = this.image.hasClosures;\n        this.globals = this.findGlobals();\n        // hack for old image that does not support Unix files\n        if (!this.hasClosures && !this.findMethod(\"UnixFileDirectory class>>pathNameDelimiter\"))\n            this.primHandler.emulateMac = true;\n        // pre-release image has inverted colors\n        if (this.image.version == 6501)\n            this.primHandler.reverseDisplay = true;\n    },\n    initVMState: function() {\n        this.byteCodeCount = 0;\n        this.sendCount = 0;\n        this.interruptCheckCounter = 0;\n        this.interruptCheckCounterFeedBackReset = 1000;\n        this.interruptChecksEveryNms = 3;\n        this.nextPollTick = 0;\n        this.nextWakeupTick = 0;\n        this.lastTick = 0;\n        this.interruptKeycode = 2094;  //\"cmd-.\"\n        this.interruptPending = false;\n        this.pendingFinalizationSignals = 0;\n        this.freeContexts = this.nilObj;\n        this.freeLargeContexts = this.nilObj;\n        this.reclaimableContextCount = 0;\n        this.nRecycledContexts = 0;\n        this.nAllocatedContexts = 0;\n        this.methodCacheSize = 1024;\n        this.methodCacheMask = this.methodCacheSize - 1;\n        this.methodCacheRandomish = 0;\n        this.methodCache = [];\n        for (var i = 0; i < this.methodCacheSize; i++)\n            this.methodCache[i] = {lkupClass: null, selector: null, method: null, primIndex: 0, argCount: 0, mClass: null};\n        this.breakOutOfInterpreter = false;\n        this.breakOutTick = 0;\n        this.breakOnMethod = null; // method to break on\n        this.breakOnNewMethod = false;\n        this.breakOnContextChanged = false;\n        this.breakOnContextReturned = null; // context to break on\n        this.messages = {};\n        this.startupTime = Date.now(); // base for millisecond clock\n    },\n    loadInitialContext: function() {\n        var schedAssn = this.specialObjects[Squeak.splOb_SchedulerAssociation];\n        var sched = schedAssn.pointers[Squeak.Assn_value];\n        var proc = sched.pointers[Squeak.ProcSched_activeProcess];\n        this.activeContext = proc.pointers[Squeak.Proc_suspendedContext];\n        this.fetchContextRegisters(this.activeContext);\n        this.reclaimableContextCount = 0;\n    },\n    findGlobals: function() {\n        var smalltalk = this.specialObjects[Squeak.splOb_SmalltalkDictionary],\n            smalltalkClass = smalltalk.sqClass.className();\n        if (smalltalkClass === \"Association\") {\n            smalltalk = smalltalk.pointers[1];\n            smalltalkClass = smalltalk.sqClass.className();\n        }\n        if (smalltalkClass === \"SystemDictionary\")\n            return smalltalk.pointers[1].pointers;\n        if (smalltalkClass === \"SmalltalkImage\") {\n            var globals = smalltalk.pointers[0],\n                globalsClass = globals.sqClass.className();\n            if (globalsClass === \"SystemDictionary\")\n                return globals.pointers[1].pointers;\n            if (globalsClass === \"Environment\")\n                return globals.pointers[2].pointers[1].pointers\n        }\n        throw Error(\"cannot find global dict\");\n    },\n    initCompiler: function() {\n        if (!Squeak.Compiler)\n            return console.warn(\"Squeak.Compiler not loaded, using interpreter only\");\n        // some JS environments disallow creating functions at runtime (e.g. FireFox OS apps)\n        try {\n            if (new Function(\"return 42\")() !== 42)\n                return console.warn(\"function constructor not working, disabling JIT\");\n        } catch (e) {\n            return console.warn(\"disabling JIT: \" + e);\n        }\n        // disable JIT on slow machines, which are likely memory-limited\n        var kObjPerSec = this.image.oldSpaceCount / (this.startupTime - this.image.startupTime);\n        if (kObjPerSec < 10)\n            return console.warn(\"Slow machine detected (loaded \" + (kObjPerSec*1000|0) + \" objects/sec), using interpreter only\");\n        // compiler might decide to not handle current image\n        try {\n            console.log(\"squeak: initializing JIT compiler\");\n            this.compiler = new Squeak.Compiler(this);\n        } catch(e) {\n            console.warn(\"Compiler \" + e);\n        }\n    },\n    hackImage: function() {\n        // hack methods to make work for now\n        var returnSelf  = 256,\n            returnTrue  = 257,\n            returnFalse = 258,\n            returnNil   = 259;\n        [\n            // Etoys fallback for missing translation files is hugely inefficient.\n            // This speeds up opening a viewer by 10x (!)\n            // Remove when we added translation files.\n            //{method: \"String>>translated\", primitive: returnSelf},\n            //{method: \"String>>translatedInAllDomains\", primitive: returnSelf},\n            // Squeak: disable syntax highlighting for speed\n            //{method: \"PluggableTextMorphPlus>>useDefaultStyler\", primitive: returnSelf},\n        ].forEach(function(each) {\n            var m = this.findMethod(each.method);\n            if (m) {\n                m.pointers[0] |= each.primitive;\n                console.warn(\"Hacking \" + each.method);\n            }\n        }, this);\n    },\n},\n'interpreting', {\n    interpretOne: function(singleStep) {\n        if (this.method.compiled) {\n            if (singleStep) {\n                if (!this.compiler.enableSingleStepping(this.method)) {\n                    this.method.compiled = null;\n                    return this.interpretOne(singleStep);\n                }\n                this.breakNow();\n            }\n            this.byteCodeCount += this.method.compiled(this);\n            return;\n        }\n        var Squeak = this.Squeak; // avoid dynamic lookup of \"Squeak\" in Lively\n        var b, b2;\n        this.byteCodeCount++;\n        b = this.nextByte();\n        if (b < 128) // Chrome only optimized up to 128 cases\n        switch (b) { /* The Main Bytecode Dispatch Loop */\n\n            // load receiver variable\n            case 0x00: case 0x01: case 0x02: case 0x03: case 0x04: case 0x05: case 0x06: case 0x07:\n            case 0x08: case 0x09: case 0x0A: case 0x0B: case 0x0C: case 0x0D: case 0x0E: case 0x0F:\n                this.push(this.receiver.pointers[b&0xF]); return;\n\n            // load temporary variable\n            case 0x10: case 0x11: case 0x12: case 0x13: case 0x14: case 0x15: case 0x16: case 0x17:\n            case 0x18: case 0x19: case 0x1A: case 0x1B: case 0x1C: case 0x1D: case 0x1E: case 0x1F:\n                this.push(this.homeContext.pointers[Squeak.Context_tempFrameStart+(b&0xF)]); return;\n\n            // loadLiteral\n            case 0x20: case 0x21: case 0x22: case 0x23: case 0x24: case 0x25: case 0x26: case 0x27:\n            case 0x28: case 0x29: case 0x2A: case 0x2B: case 0x2C: case 0x2D: case 0x2E: case 0x2F:\n            case 0x30: case 0x31: case 0x32: case 0x33: case 0x34: case 0x35: case 0x36: case 0x37:\n            case 0x38: case 0x39: case 0x3A: case 0x3B: case 0x3C: case 0x3D: case 0x3E: case 0x3F:\n                this.push(this.method.methodGetLiteral(b&0x1F)); return;\n\n            // loadLiteralIndirect\n            case 0x40: case 0x41: case 0x42: case 0x43: case 0x44: case 0x45: case 0x46: case 0x47:\n            case 0x48: case 0x49: case 0x4A: case 0x4B: case 0x4C: case 0x4D: case 0x4E: case 0x4F:\n            case 0x50: case 0x51: case 0x52: case 0x53: case 0x54: case 0x55: case 0x56: case 0x57:\n            case 0x58: case 0x59: case 0x5A: case 0x5B: case 0x5C: case 0x5D: case 0x5E: case 0x5F:\n                this.push((this.method.methodGetLiteral(b&0x1F)).pointers[Squeak.Assn_value]); return;\n\n            // storeAndPop rcvr, temp\n            case 0x60: case 0x61: case 0x62: case 0x63: case 0x64: case 0x65: case 0x66: case 0x67:\n                this.receiver.pointers[b&7] = this.pop(); return;\n            case 0x68: case 0x69: case 0x6A: case 0x6B: case 0x6C: case 0x6D: case 0x6E: case 0x6F:\n                this.homeContext.pointers[Squeak.Context_tempFrameStart+(b&7)] = this.pop(); return;\n\n            // Quick push\n            case 0x70: this.push(this.receiver); return;\n            case 0x71: this.push(this.trueObj); return;\n            case 0x72: this.push(this.falseObj); return;\n            case 0x73: this.push(this.nilObj); return;\n            case 0x74: this.push(-1); return;\n            case 0x75: this.push(0); return;\n            case 0x76: this.push(1); return;\n            case 0x77: this.push(2); return;\n\n            // Quick return\n            case 0x78: this.doReturn(this.receiver); return;\n            case 0x79: this.doReturn(this.trueObj); return;\n            case 0x7A: this.doReturn(this.falseObj); return;\n            case 0x7B: this.doReturn(this.nilObj); return;\n            case 0x7C: this.doReturn(this.pop()); return;\n            case 0x7D: this.doReturn(this.pop(), this.activeContext.pointers[Squeak.BlockContext_caller]); return; // blockReturn\n            case 0x7E: this.nono(); return;\n            case 0x7F: this.nono(); return;\n        } else switch (b) { // Chrome only optimized up to 128 cases\n            // Sundry\n            case 0x80: this.extendedPush(this.nextByte()); return;\n            case 0x81: this.extendedStore(this.nextByte()); return;\n            case 0x82: this.extendedStorePop(this.nextByte()); return;\n            // singleExtendedSend\n            case 0x83: b2 = this.nextByte(); this.send(this.method.methodGetSelector(b2&31), b2>>5, false); return;\n            case 0x84: this.doubleExtendedDoAnything(this.nextByte()); return;\n            // singleExtendedSendToSuper\n            case 0x85: b2= this.nextByte(); this.send(this.method.methodGetSelector(b2&31), b2>>5, true); return;\n            // secondExtendedSend\n            case 0x86: b2= this.nextByte(); this.send(this.method.methodGetSelector(b2&63), b2>>6, false); return;\n            case 0x87: this.pop(); return;  // pop\n            case 0x88: this.push(this.top()); return;   // dup\n            // thisContext\n            case 0x89: this.push(this.exportThisContext()); return;\n\n            // Closures\n            case 0x8A: this.pushNewArray(this.nextByte());   // create new temp vector\n                return;\n            case 0x8B:\n                if (this.pc !== 1) throw Error(\"call prim bytecode not expected here\")\n                this.pc = 3; // skip over primitive number\n                return;\n            case 0x8C: b2 = this.nextByte(); // remote push from temp vector\n                this.push(this.homeContext.pointers[Squeak.Context_tempFrameStart+this.nextByte()].pointers[b2]);\n                return;\n            case 0x8D: b2 = this.nextByte(); // remote store into temp vector\n                this.homeContext.pointers[Squeak.Context_tempFrameStart+this.nextByte()].pointers[b2] = this.top();\n                return;\n            case 0x8E: b2 = this.nextByte(); // remote store and pop into temp vector\n                this.homeContext.pointers[Squeak.Context_tempFrameStart+this.nextByte()].pointers[b2] = this.pop();\n                return;\n            case 0x8F: this.pushClosureCopy(); return;\n\n            // Short jmp\n            case 0x90: case 0x91: case 0x92: case 0x93: case 0x94: case 0x95: case 0x96: case 0x97:\n                this.pc += (b&7)+1; return;\n            // Short conditional jump on false\n            case 0x98: case 0x99: case 0x9A: case 0x9B: case 0x9C: case 0x9D: case 0x9E: case 0x9F:\n                this.jumpIfFalse((b&7)+1); return;\n            // Long jump, forward and back\n            case 0xA0: case 0xA1: case 0xA2: case 0xA3: case 0xA4: case 0xA5: case 0xA6: case 0xA7:\n                b2 = this.nextByte();\n                this.pc += (((b&7)-4)*256 + b2);\n                if ((b&7)<4)        // check for process switch on backward jumps (loops)\n                    if (this.interruptCheckCounter-- <= 0) this.checkForInterrupts();\n                return;\n            // Long conditional jump on true\n            case 0xA8: case 0xA9: case 0xAA: case 0xAB:\n                this.jumpIfTrue((b&3)*256 + this.nextByte()); return;\n            // Long conditional jump on false\n            case 0xAC: case 0xAD: case 0xAE: case 0xAF:\n                this.jumpIfFalse((b&3)*256 + this.nextByte()); return;\n\n            // Arithmetic Ops... + - < > <= >= = ~=    * /  @ lshift: lxor: land: lor:\n            case 0xB0: this.success = true; this.resultIsFloat = false;\n                if(!this.pop2AndPushNumResult(this.stackIntOrFloat(1) + this.stackIntOrFloat(0))) this.sendSpecial(b&0xF); return;  // PLUS +\n            case 0xB1: this.success = true; this.resultIsFloat = false;\n                if(!this.pop2AndPushNumResult(this.stackIntOrFloat(1) - this.stackIntOrFloat(0))) this.sendSpecial(b&0xF); return;  // MINUS -\n            case 0xB2: this.success = true;\n                if(!this.pop2AndPushBoolResult(this.stackIntOrFloat(1) < this.stackIntOrFloat(0))) this.sendSpecial(b&0xF); return;  // LESS <\n            case 0xB3: this.success = true;\n                if(!this.pop2AndPushBoolResult(this.stackIntOrFloat(1) > this.stackIntOrFloat(0))) this.sendSpecial(b&0xF); return;  // GRTR >\n            case 0xB4: this.success = true;\n                if(!this.pop2AndPushBoolResult(this.stackIntOrFloat(1) <= this.stackIntOrFloat(0))) this.sendSpecial(b&0xF); return;  // LEQ <=\n            case 0xB5: this.success = true;\n                if(!this.pop2AndPushBoolResult(this.stackIntOrFloat(1) >= this.stackIntOrFloat(0))) this.sendSpecial(b&0xF); return;  // GEQ >=\n            case 0xB6: this.success = true;\n                if(!this.pop2AndPushBoolResult(this.stackIntOrFloat(1) === this.stackIntOrFloat(0))) this.sendSpecial(b&0xF); return;  // EQU =\n            case 0xB7: this.success = true;\n                if(!this.pop2AndPushBoolResult(this.stackIntOrFloat(1) !== this.stackIntOrFloat(0))) this.sendSpecial(b&0xF); return;  // NEQ ~=\n            case 0xB8: this.success = true; this.resultIsFloat = false;\n                if(!this.pop2AndPushNumResult(this.stackIntOrFloat(1) * this.stackIntOrFloat(0))) this.sendSpecial(b&0xF); return;  // TIMES *\n            case 0xB9: this.success = true;\n                if(!this.pop2AndPushIntResult(this.quickDivide(this.stackInteger(1),this.stackInteger(0)))) this.sendSpecial(b&0xF); return;  // Divide /\n            case 0xBA: this.success = true;\n                if(!this.pop2AndPushIntResult(this.mod(this.stackInteger(1),this.stackInteger(0)))) this.sendSpecial(b&0xF); return;  // MOD \\\n            case 0xBB: this.success = true;\n                if(!this.primHandler.primitiveMakePoint(1, true)) this.sendSpecial(b&0xF); return;  // MakePt int@int\n            case 0xBC: this.success = true;\n                if(!this.pop2AndPushIntResult(this.safeShift(this.stackInteger(1),this.stackInteger(0)))) this.sendSpecial(b&0xF); return; // bitShift:\n            case 0xBD: this.success = true;\n                if(!this.pop2AndPushIntResult(this.div(this.stackInteger(1),this.stackInteger(0)))) this.sendSpecial(b&0xF); return;  // Divide //\n            case 0xBE: this.success = true;\n                if(!this.pop2AndPushIntResult(this.stackInteger(1) & this.stackInteger(0))) this.sendSpecial(b&0xF); return; // bitAnd:\n            case 0xBF: this.success = true;\n                if(!this.pop2AndPushIntResult(this.stackInteger(1) | this.stackInteger(0))) this.sendSpecial(b&0xF); return; // bitOr:\n\n            // at:, at:put:, size, next, nextPut:, ...\n            case 0xC0: case 0xC1: case 0xC2: case 0xC3: case 0xC4: case 0xC5: case 0xC6: case 0xC7:\n            case 0xC8: case 0xC9: case 0xCA: case 0xCB: case 0xCC: case 0xCD: case 0xCE: case 0xCF:\n                if (!this.primHandler.quickSendOther(this.receiver, b&0xF))\n                    this.sendSpecial((b&0xF)+16); return;\n\n            // Send Literal Selector with 0, 1, and 2 args\n            case 0xD0: case 0xD1: case 0xD2: case 0xD3: case 0xD4: case 0xD5: case 0xD6: case 0xD7:\n            case 0xD8: case 0xD9: case 0xDA: case 0xDB: case 0xDC: case 0xDD: case 0xDE: case 0xDF:\n                this.send(this.method.methodGetSelector(b&0xF), 0, false); return;\n            case 0xE0: case 0xE1: case 0xE2: case 0xE3: case 0xE4: case 0xE5: case 0xE6: case 0xE7:\n            case 0xE8: case 0xE9: case 0xEA: case 0xEB: case 0xEC: case 0xED: case 0xEE: case 0xEF:\n                this.send(this.method.methodGetSelector(b&0xF), 1, false); return;\n            case 0xF0: case 0xF1: case 0xF2: case 0xF3: case 0xF4: case 0xF5: case 0xF6: case 0xF7:\n            case 0xF8: case 0xF9: case 0xFA: case 0xFB: case 0xFC: case 0xFD: case 0xFE: case 0xFF:\n                this.send(this.method.methodGetSelector(b&0xF), 2, false); return;\n        }\n        throw Error(\"not a bytecode: \" + b);\n    },\n    interpret: function(forMilliseconds, thenDo) {\n        // run for a couple milliseconds (but only until idle or break)\n        // answer milliseconds to sleep (until next timer wakeup)\n        // or 'break' if reached breakpoint\n        // call thenDo with that result when done\n        if (this.frozen) return 'frozen';\n        this.isIdle = false;\n        this.breakOutOfInterpreter = false;\n        this.breakOutTick = this.primHandler.millisecondClockValue() + (forMilliseconds || 500);\n        while (this.breakOutOfInterpreter === false)\n            if (this.method.compiled) {\n                this.byteCodeCount += this.method.compiled(this);\n            } else {\n                this.interpretOne();\n            }\n        // this is to allow 'freezing' the interpreter and restarting it asynchronously. See freeze()\n        if (typeof this.breakOutOfInterpreter == \"function\")\n            return this.breakOutOfInterpreter(thenDo);\n        // normally, we answer regularly\n        var result = this.breakOutOfInterpreter == 'break' ? 'break'\n            : !this.isIdle ? 0\n            : !this.nextWakeupTick ? 'sleep'        // all processes waiting\n            : Math.max(1, this.nextWakeupTick - this.primHandler.millisecondClockValue());\n        if (thenDo) thenDo(result);\n        return result;\n    },\n    goIdle: function() {\n        // make sure we tend to pending delays\n        var hadTimer = this.nextWakeupTick !== 0;\n        this.forceInterruptCheck();\n        this.checkForInterrupts();\n        var hasTimer = this.nextWakeupTick !== 0;\n        // go idle unless a timer just expired\n        this.isIdle = hasTimer || !hadTimer;\n        this.breakOut();\n    },\n    freeze: function(frozenDo) {\n        // Stop the interpreter. Answer a function that can be\n        // called to continue interpreting.\n        // Optionally, frozenDo is called asynchronously when frozen\n        var continueFunc;\n        this.frozen = true;\n        this.breakOutOfInterpreter = function(thenDo) {\n            if (!thenDo) throw Error(\"need function to restart interpreter\");\n            continueFunc = thenDo;\n            return \"frozen\";\n        }.bind(this);\n        var unfreeze = function() {\n            this.frozen = false;\n            if (!continueFunc) throw Error(\"no continue function\");\n            continueFunc(0);    //continue without timeout\n        }.bind(this);\n        if (frozenDo) window.setTimeout(function(){frozenDo(unfreeze)}, 0);\n        return unfreeze;\n    },\n    breakOut: function() {\n        this.breakOutOfInterpreter = this.breakOutOfInterpreter || true; // do not overwrite break string\n    },\n    nextByte: function() {\n        return this.method.bytes[this.pc++];\n    },\n    nono: function() {\n        throw Error(\"Oh No!\");\n    },\n    forceInterruptCheck: function() {\n        this.interruptCheckCounter = -1000;\n    },\n    checkForInterrupts: function() {\n        //Check for interrupts at sends and backward jumps\n        var now = this.primHandler.millisecondClockValue();\n        if (now < this.lastTick) { // millisecond clock wrapped\n            this.nextPollTick = now + (this.nextPollTick - this.lastTick);\n            this.breakOutTick = now + (this.breakOutTick - this.lastTick);\n            if (this.nextWakeupTick !== 0)\n                this.nextWakeupTick = now + (this.nextWakeupTick - this.lastTick);\n        }\n        //Feedback logic attempts to keep interrupt response around 3ms...\n        if (this.interruptCheckCounter > -100) { // only if not a forced check\n            if ((now - this.lastTick) < this.interruptChecksEveryNms) { //wrapping is not a concern\n                this.interruptCheckCounterFeedBackReset += 10;\n            } else { // do a thousand sends even if we are too slow for 3ms\n                if (this.interruptCheckCounterFeedBackReset <= 1000)\n                    this.interruptCheckCounterFeedBackReset = 1000;\n                else\n                    this.interruptCheckCounterFeedBackReset -= 12;\n            }\n        }\n        this.interruptCheckCounter = this.interruptCheckCounterFeedBackReset; //reset the interrupt check counter\n        this.lastTick = now; //used to detect wraparound of millisecond clock\n        //  if(signalLowSpace) {\n        //            signalLowSpace= false; //reset flag\n        //            sema= getSpecialObject(Squeak.splOb_TheLowSpaceSemaphore);\n        //            if(sema != nilObj) synchronousSignal(sema); }\n        //  if(now >= nextPollTick) {\n        //            ioProcessEvents(); //sets interruptPending if interrupt key pressed\n        //            nextPollTick= now + 500; } //msecs to wait before next call to ioProcessEvents\"\n        if (this.interruptPending) {\n            this.interruptPending = false; //reset interrupt flag\n            var sema = this.specialObjects[Squeak.splOb_TheInterruptSemaphore];\n            if (!sema.isNil) this.primHandler.synchronousSignal(sema);\n        }\n        if ((this.nextWakeupTick !== 0) && (now >= this.nextWakeupTick)) {\n            this.nextWakeupTick = 0; //reset timer interrupt\n            var sema = this.specialObjects[Squeak.splOb_TheTimerSemaphore];\n            if (!sema.isNil) this.primHandler.synchronousSignal(sema);\n        }\n        if (this.pendingFinalizationSignals > 0) { //signal any pending finalizations\n            var sema = this.specialObjects[Squeak.splOb_TheFinalizationSemaphore];\n            this.pendingFinalizationSignals = 0;\n            if (!sema.isNil) this.primHandler.synchronousSignal(sema);\n        }\n        if (this.primHandler.semaphoresToSignal.length > 0)\n            this.primHandler.signalExternalSemaphores();  // signal pending semaphores, if any\n        // if this is a long-running do-it, compile it\n        if (!this.method.compiled && this.compiler)\n            this.compiler.compile(this.method);\n        // have to return to web browser once in a while\n        if (now >= this.breakOutTick)\n            this.breakOut();\n    },\n    extendedPush: function(nextByte) {\n        var lobits = nextByte & 63;\n        switch (nextByte>>6) {\n            case 0: this.push(this.receiver.pointers[lobits]);break;\n            case 1: this.push(this.homeContext.pointers[Squeak.Context_tempFrameStart+lobits]); break;\n            case 2: this.push(this.method.methodGetLiteral(lobits)); break;\n            case 3: this.push(this.method.methodGetLiteral(lobits).pointers[Squeak.Assn_value]); break;\n        }\n    },\n    extendedStore: function( nextByte) {\n        var lobits = nextByte & 63;\n        switch (nextByte>>6) {\n            case 0: this.receiver.pointers[lobits] = this.top(); break;\n            case 1: this.homeContext.pointers[Squeak.Context_tempFrameStart+lobits] = this.top(); break;\n            case 2: this.nono(); break;\n            case 3: this.method.methodGetLiteral(lobits).pointers[Squeak.Assn_value] = this.top(); break;\n        }\n    },\n    extendedStorePop: function(nextByte) {\n        var lobits = nextByte & 63;\n        switch (nextByte>>6) {\n            case 0: this.receiver.pointers[lobits] = this.pop(); break;\n            case 1: this.homeContext.pointers[Squeak.Context_tempFrameStart+lobits] = this.pop(); break;\n            case 2: this.nono(); break;\n            case 3: this.method.methodGetLiteral(lobits).pointers[Squeak.Assn_value] = this.pop(); break;\n        }\n    },\n    doubleExtendedDoAnything: function(byte2) {\n        var byte3 = this.nextByte();\n        switch (byte2>>5) {\n            case 0: this.send(this.method.methodGetSelector(byte3), byte2&31, false); break;\n            case 1: this.send(this.method.methodGetSelector(byte3), byte2&31, true); break;\n            case 2: this.push(this.receiver.pointers[byte3]); break;\n            case 3: this.push(this.method.methodGetLiteral(byte3)); break;\n            case 4: this.push(this.method.methodGetLiteral(byte3).pointers[Squeak.Assn_value]); break;\n            case 5: this.receiver.pointers[byte3] = this.top(); break;\n            case 6: this.receiver.pointers[byte3] = this.pop(); break;\n            case 7: this.method.methodGetLiteral(byte3).pointers[Squeak.Assn_value] = this.top(); break;\n        }\n    },\n    jumpIfTrue: function(delta) {\n        var top = this.pop();\n        if (top.isTrue) {this.pc += delta; return;}\n        if (top.isFalse) return;\n        this.push(top); //Uh-oh it's not even a boolean (that we know of ;-).  Restore stack...\n        this.send(this.specialObjects[Squeak.splOb_SelectorMustBeBoolean], 0, false);\n    },\n    jumpIfFalse: function(delta) {\n        var top = this.pop();\n        if (top.isFalse) {this.pc += delta; return;}\n        if (top.isTrue) return;\n        this.push(top); //Uh-oh it's not even a boolean (that we know of ;-).  Restore stack...\n        this.send(this.specialObjects[Squeak.splOb_SelectorMustBeBoolean], 0, false);\n    },\n    sendSpecial: function(lobits) {\n        this.send(this.specialSelectors[lobits*2],\n            this.specialSelectors[(lobits*2)+1],\n            false);  //specialSelectors is  {...sel,nArgs,sel,nArgs,...)\n    },\n},\n'closures', {\n    pushNewArray: function(nextByte) {\n        var popValues = nextByte > 127,\n            count = nextByte & 127,\n            array = this.instantiateClass(this.specialObjects[Squeak.splOb_ClassArray], count);\n        if (popValues) {\n            for (var i = 0; i < count; i++)\n                array.pointers[i] = this.stackValue(count - i - 1);\n            this.popN(count);\n        }\n        this.push(array);\n    },\n    pushClosureCopy: function() {\n        // The compiler has pushed the values to be copied, if any.  Find numArgs and numCopied in the byte following.\n        // Create a Closure with space for the copiedValues and pop numCopied values off the stack into the closure.\n        // Set numArgs as specified, and set startpc to the pc following the block size and jump over that code.\n        var numArgsNumCopied = this.nextByte(),\n            numArgs = numArgsNumCopied & 0xF,\n            numCopied = numArgsNumCopied >> 4,\n            blockSizeHigh = this.nextByte(),\n            blockSize = blockSizeHigh * 256 + this.nextByte(),\n            initialPC = this.encodeSqueakPC(this.pc, this.method),\n            closure = this.newClosure(numArgs, initialPC, numCopied);\n        closure.pointers[Squeak.Closure_outerContext] = this.activeContext;\n        this.reclaimableContextCount = 0; // The closure refers to thisContext so it can't be reclaimed\n        if (numCopied > 0) {\n            for (var i = 0; i < numCopied; i++)\n                closure.pointers[Squeak.Closure_firstCopiedValue + i] = this.stackValue(numCopied - i - 1);\n            this.popN(numCopied);\n        }\n        this.pc += blockSize;\n        this.push(closure);\n    },\n    newClosure: function(numArgs, initialPC, numCopied) {\n        var closure = this.instantiateClass(this.specialObjects[Squeak.splOb_ClassBlockClosure], numCopied);\n        closure.pointers[Squeak.Closure_startpc] = initialPC;\n        closure.pointers[Squeak.Closure_numArgs] = numArgs;\n        return closure;\n    },\n},\n'sending', {\n    send: function(selector, argCount, doSuper) {\n        var newRcvr = this.stackValue(argCount);\n        var lookupClass = this.getClass(newRcvr);\n        if (doSuper) {\n            lookupClass = this.method.methodClassForSuper();\n            lookupClass = lookupClass.pointers[Squeak.Class_superclass];\n        }\n        var entry = this.findSelectorInClass(selector, argCount, lookupClass);\n        if (entry.primIndex) {\n            //note details for verification of at/atput primitives\n            this.verifyAtSelector = selector;\n            this.verifyAtClass = lookupClass;\n        }\n        this.executeNewMethod(newRcvr, entry.method, entry.argCount, entry.primIndex, entry.mClass, selector);\n    },\n    sendAsPrimitiveFailure: function(rcvr, method, argCount) {\n        this.executeNewMethod(rcvr, method, argCount, 0);\n    },\n    findSelectorInClass: function(selector, argCount, startingClass) {\n        var cacheEntry = this.findMethodCacheEntry(selector, startingClass);\n        if (cacheEntry.method) return cacheEntry; // Found it in the method cache\n        var currentClass = startingClass;\n        var mDict;\n        while (!currentClass.isNil) {\n            mDict = currentClass.pointers[Squeak.Class_mdict];\n            if (mDict.isNil) {\n                // MethodDict pointer is nil (hopefully due a swapped out stub)\n                //        -- send #cannotInterpret:\n                var cantInterpSel = this.specialObjects[Squeak.splOb_SelectorCannotInterpret],\n                    cantInterpMsg = this.createActualMessage(selector, argCount, startingClass);\n                this.popNandPush(argCount, cantInterpMsg);\n                return this.findSelectorInClass(cantInterpSel, 1, currentClass.superclass());\n            }\n            var newMethod = this.lookupSelectorInDict(mDict, selector);\n            if (!newMethod.isNil) {\n                this.currentSelector = selector;\n                this.currentLookupClass = startingClass;\n                //if method is not actually a CompiledMethod, invoke primitiveInvokeObjectAsMethod (248) instead\n                cacheEntry.method = newMethod;\n                cacheEntry.primIndex = newMethod.isMethod() ? newMethod.methodPrimitiveIndex() : 248;\n                cacheEntry.argCount = argCount;\n                cacheEntry.mClass = currentClass;\n                return cacheEntry;\n            }\n            currentClass = currentClass.superclass();\n        }\n        //Cound not find a normal message -- send #doesNotUnderstand:\n        var dnuSel = this.specialObjects[Squeak.splOb_SelectorDoesNotUnderstand];\n        if (selector === dnuSel) // Cannot find #doesNotUnderstand: -- unrecoverable error.\n            throw Error(\"Recursive not understood error encountered\");\n        var dnuMsg = this.createActualMessage(selector, argCount, startingClass); //The argument to doesNotUnderstand:\n        this.popNandPush(argCount, dnuMsg);\n        return this.findSelectorInClass(dnuSel, 1, startingClass);\n    },\n    lookupSelectorInDict: function(mDict, messageSelector) {\n        //Returns a method or nilObject\n        var dictSize = mDict.pointersSize();\n        var mask = (dictSize - Squeak.MethodDict_selectorStart) - 1;\n        var index = (mask & messageSelector.hash) + Squeak.MethodDict_selectorStart;\n        // If there are no nils (should always be), then stop looping on second wrap.\n        var hasWrapped = false;\n        while (true) {\n            var nextSelector = mDict.pointers[index];\n            if (nextSelector === messageSelector) {\n                var methArray = mDict.pointers[Squeak.MethodDict_array];\n                return methArray.pointers[index - Squeak.MethodDict_selectorStart];\n            }\n            if (nextSelector.isNil) return this.nilObj;\n            if (++index === dictSize) {\n                if (hasWrapped) return this.nilObj;\n                index = Squeak.MethodDict_selectorStart;\n                hasWrapped = true;\n            }\n        }\n    },\n    executeNewMethod: function(newRcvr, newMethod, argumentCount, primitiveIndex, optClass, optSel) {\n        this.sendCount++;\n        if (newMethod === this.breakOnMethod) this.breakNow(\"executing method \" + this.printMethod(newMethod, optClass, optSel));\n        if (this.logSends) console.log(this.sendCount + ' ' + this.printMethod(newMethod, optClass, optSel));\n        if (this.breakOnContextChanged) {\n            this.breakOnContextChanged = false;\n            this.breakNow();\n        }\n        if (primitiveIndex > 0)\n            if (this.tryPrimitive(primitiveIndex, argumentCount, newMethod))\n                return;  //Primitive succeeded -- end of story\n        var newContext = this.allocateOrRecycleContext(newMethod.methodNeedsLargeFrame());\n        var tempCount = newMethod.methodTempCount();\n        var newPC = 0; // direct zero-based index into byte codes\n        var newSP = Squeak.Context_tempFrameStart + tempCount - 1; // direct zero-based index into context pointers\n        newContext.pointers[Squeak.Context_method] = newMethod;\n        //Following store is in case we alloc without init; all other fields get stored\n        newContext.pointers[Squeak.BlockContext_initialIP] = this.nilObj;\n        newContext.pointers[Squeak.Context_sender] = this.activeContext;\n        //Copy receiver and args to new context\n        //Note this statement relies on the receiver slot being contiguous with args...\n        this.arrayCopy(this.activeContext.pointers, this.sp-argumentCount, newContext.pointers, Squeak.Context_tempFrameStart-1, argumentCount+1);\n        //...and fill the remaining temps with nil\n        this.arrayFill(newContext.pointers, Squeak.Context_tempFrameStart+argumentCount, Squeak.Context_tempFrameStart+tempCount, this.nilObj);\n        this.popN(argumentCount+1);\n        this.reclaimableContextCount++;\n        this.storeContextRegisters();\n        /////// Woosh //////\n        this.activeContext = newContext; //We're off and running...\n        //Following are more efficient than fetchContextRegisters() in newActiveContext()\n        this.homeContext = newContext;\n        this.method = newMethod;\n        this.pc = newPC;\n        this.sp = newSP;\n        this.receiver = newContext.pointers[Squeak.Context_receiver];\n        if (this.receiver !== newRcvr)\n            throw Error(\"receivers don't match\");\n        if (!newMethod.compiled && this.compiler)\n            this.compiler.compile(newMethod, optClass, optSel);\n        // check for process switch on full method activation\n        if (this.interruptCheckCounter-- <= 0) this.checkForInterrupts();\n    },\n    doReturn: function(returnValue, targetContext) {\n        // get sender from block home or closure's outerContext\n        if (!targetContext) {\n            var ctx = this.homeContext;\n            if (this.hasClosures) {\n                var closure;\n                while (!(closure = ctx.pointers[Squeak.Context_closure]).isNil)\n                    ctx = closure.pointers[Squeak.Closure_outerContext];\n            }\n            targetContext = ctx.pointers[Squeak.Context_sender];\n        }\n        if (targetContext.isNil || targetContext.pointers[Squeak.Context_instructionPointer].isNil)\n            return this.cannotReturn(returnValue);\n        // search up stack for unwind\n        var thisContext = this.activeContext.pointers[Squeak.Context_sender];\n        while (thisContext !== targetContext) {\n            if (thisContext.isNil)\n                return this.cannotReturn(returnValue);\n            if (this.isUnwindMarked(thisContext))\n                return this.aboutToReturnThrough(returnValue, thisContext);\n            thisContext = thisContext.pointers[Squeak.Context_sender];\n        }\n        // no unwind to worry about, just peel back the stack (usually just to sender)\n        var nextContext;\n        thisContext = this.activeContext;\n        while (thisContext !== targetContext) {\n            if (this.breakOnContextReturned === thisContext) {\n                this.breakOnContextReturned = null;\n                this.breakNow();\n            }\n            nextContext = thisContext.pointers[Squeak.Context_sender];\n            thisContext.pointers[Squeak.Context_sender] = this.nilObj;\n            thisContext.pointers[Squeak.Context_instructionPointer] = this.nilObj;\n            if (this.reclaimableContextCount > 0) {\n                this.reclaimableContextCount--;\n                this.recycleIfPossible(thisContext);\n            }\n            thisContext = nextContext;\n        }\n        this.activeContext = thisContext;\n        this.fetchContextRegisters(this.activeContext);\n        this.push(returnValue);\n        if (this.breakOnContextChanged) {\n            this.breakOnContextChanged = false;\n            this.breakNow();\n        }\n    },\n    aboutToReturnThrough: function(resultObj, aContext) {\n        this.push(this.exportThisContext());\n        this.push(resultObj);\n        this.push(aContext);\n        var aboutToReturnSel = this.specialObjects[Squeak.splOb_SelectorAboutToReturn];\n        this.send(aboutToReturnSel, 2);\n    },\n    cannotReturn: function(resultObj) {\n        this.push(this.exportThisContext());\n        this.push(resultObj);\n        var cannotReturnSel = this.specialObjects[Squeak.splOb_SelectorCannotReturn];\n        this.send(cannotReturnSel, 1);\n    },\n    tryPrimitive: function(primIndex, argCount, newMethod) {\n        if ((primIndex > 255) && (primIndex < 520)) {\n            if (primIndex >= 264) {//return instvars\n                this.popNandPush(1, this.top().pointers[primIndex - 264]);\n                return true;\n            }\n            switch (primIndex) {\n                case 256: //return self\n                    return true;\n                case 257: this.popNandPush(1, this.trueObj); //return true\n                    return true;\n                case 258: this.popNandPush(1, this.falseObj); //return false\n                    return true;\n                case 259: this.popNandPush(1, this.nilObj); //return nil\n                    return true;\n            }\n            this.popNandPush(1, primIndex - 261); //return -1...2\n            return true;\n        }\n        var success = this.primHandler.doPrimitive(primIndex, argCount, newMethod);\n        return success;\n    },\n    createActualMessage: function(selector, argCount, cls) {\n        //Bundle up receiver, args and selector as a messageObject\n        var message = this.instantiateClass(this.specialObjects[Squeak.splOb_ClassMessage], 0);\n        var argArray = this.instantiateClass(this.specialObjects[Squeak.splOb_ClassArray], argCount);\n        this.arrayCopy(this.activeContext.pointers, this.sp-argCount+1, argArray.pointers, 0, argCount); //copy args from stack\n        message.pointers[Squeak.Message_selector] = selector;\n        message.pointers[Squeak.Message_arguments] = argArray;\n        if (message.pointers.length > Squeak.Message_lookupClass) //Early versions don't have lookupClass\n            message.pointers[Squeak.Message_lookupClass] = cls;\n        return message;\n    },\n    primitivePerform: function(argCount) {\n        var selector = this.stackValue(argCount-1);\n        var rcvr = this.stackValue(argCount);\n        // NOTE: findNewMethodInClass may fail and be converted to #doesNotUnderstand:,\n        //       (Whoah) so we must slide args down on the stack now, so that would work\n        var trueArgCount = argCount - 1;\n        var selectorIndex = this.sp - trueArgCount;\n        var stack = this.activeContext.pointers; // slide eveything down...\n        this.arrayCopy(stack, selectorIndex+1, stack, selectorIndex, trueArgCount);\n        this.sp--; // adjust sp accordingly\n        var entry = this.findSelectorInClass(selector, trueArgCount, this.getClass(rcvr));\n        this.executeNewMethod(rcvr, entry.method, entry.argCount, entry.primIndex, entry.mClass, selector);\n        return true;\n    },\n    primitivePerformWithArgs: function(argCount, supered) {\n        var rcvr = this.stackValue(argCount);\n        var selector = this.stackValue(argCount - 1);\n        var args = this.stackValue(argCount - 2);\n        if (args.sqClass !== this.specialObjects[Squeak.splOb_ClassArray])\n            return false;\n        var lookupClass = supered ? this.stackValue(argCount - 3) : this.getClass(rcvr);\n        if (supered) { // verify that lookupClass is in fact in superclass chain of receiver;\n            var cls = this.getClass(rcvr);\n            while (cls !== lookupClass) {\n                cls = cls.pointers[Squeak.Class_superclass];\n                if (cls.isNil) return false;\n            }\n        }\n        var trueArgCount = args.pointersSize();\n        var stack = this.activeContext.pointers;\n        this.arrayCopy(args.pointers, 0, stack, this.sp - 1, trueArgCount);\n        this.sp += trueArgCount - argCount; //pop selector and array then push args\n        var entry = this.findSelectorInClass(selector, trueArgCount, lookupClass);\n        this.executeNewMethod(rcvr, entry.method, entry.argCount, entry.primIndex, entry.mClass, selector);\n        return true;\n    },\n    primitiveInvokeObjectAsMethod: function(argCount, method) {\n        // invoked from VM if non-method found in lookup\n        var orgArgs = this.instantiateClass(this.specialObjects[Squeak.splOb_ClassArray], argCount);\n        for (var i = 0; i < argCount; i++)\n            orgArgs.pointers[argCount - i - 1] = this.pop();\n        var orgReceiver = this.pop(),\n            orgSelector = this.currentSelector;\n        // send run:with:in: to non-method object\n        var runWithIn = this.specialObjects[Squeak.splOb_SelectorRunWithIn];\n        this.push(method);       // not actually a method\n        this.push(orgSelector);\n        this.push(orgArgs);\n        this.push(orgReceiver);\n        this.send(runWithIn, 3, false);\n        return true;\n    },\n    findMethodCacheEntry: function(selector, lkupClass) {\n        //Probe the cache, and return the matching entry if found\n        //Otherwise return one that can be used (selector and class set) with method == null.\n        //Initial probe is class xor selector, reprobe delta is selector\n        //We do not try to optimize probe time -- all are equally 'fast' compared to lookup\n        //Instead we randomize the reprobe so two or three very active conflicting entries\n        //will not keep dislodging each other\n        var entry;\n        this.methodCacheRandomish = (this.methodCacheRandomish + 1) & 3;\n        var firstProbe = (selector.hash ^ lkupClass.hash) & this.methodCacheMask;\n        var probe = firstProbe;\n        for (var i = 0; i < 4; i++) { // 4 reprobes for now\n            entry = this.methodCache[probe];\n            if (entry.selector === selector && entry.lkupClass === lkupClass) return entry;\n            if (i === this.methodCacheRandomish) firstProbe = probe;\n            probe = (probe + selector.hash) & this.methodCacheMask;\n        }\n        entry = this.methodCache[firstProbe];\n        entry.lkupClass = lkupClass;\n        entry.selector = selector;\n        entry.method = null;\n        return entry;\n    },\n    flushMethodCache: function() { //clear all cache entries (prim 89)\n        for (var i = 0; i < this.methodCacheSize; i++) {\n            this.methodCache[i].selector = null;   // mark it free\n            this.methodCache[i].method = null;  // release the method\n        }\n        return true;\n    },\n    flushMethodCacheForSelector: function(selector) { //clear cache entries for selector (prim 119)\n        for (var i = 0; i < this.methodCacheSize; i++)\n            if (this.methodCache[i].selector === selector) {\n                this.methodCache[i].selector = null;   // mark it free\n                this.methodCache[i].method = null;  // release the method\n            }\n        return true;\n    },\n    flushMethodCacheForMethod: function(method) { //clear cache entries for method (prim 116)\n        for (var i = 0; i < this.methodCacheSize; i++)\n            if (this.methodCache[i].method === method) {\n                this.methodCache[i].selector = null;   // mark it free\n                this.methodCache[i].method = null;  // release the method\n            }\n        return true;\n    },\n    flushMethodCacheAfterBecome: function(mutations) {\n        // could be selective by checking lkupClass, selector,\n        // and method against mutations dict\n        this.flushMethodCache();\n    },\n},\n'contexts', {\n    isUnwindMarked: function(ctx) {\n        if (!this.isMethodContext(ctx)) return false;\n        var method = ctx.pointers[Squeak.Context_method];\n        return method.methodPrimitiveIndex() == 198;\n    },\n    newActiveContext: function(newContext) {\n        // Note: this is inlined in executeNewMethod() and doReturn()\n        this.storeContextRegisters();\n        this.activeContext = newContext; //We're off and running...\n        this.fetchContextRegisters(newContext);\n    },\n    exportThisContext: function() {\n        this.storeContextRegisters();\n        this.reclaimableContextCount = 0;\n        return this.activeContext;\n    },\n    fetchContextRegisters: function(ctxt) {\n        var meth = ctxt.pointers[Squeak.Context_method];\n        if (this.isSmallInt(meth)) { //if the Method field is an integer, activeCntx is a block context\n            this.homeContext = ctxt.pointers[Squeak.BlockContext_home];\n            meth = this.homeContext.pointers[Squeak.Context_method];\n        } else { //otherwise home==ctxt\n            this.homeContext = ctxt;\n        }\n        this.receiver = this.homeContext.pointers[Squeak.Context_receiver];\n        this.method = meth;\n        this.pc = this.decodeSqueakPC(ctxt.pointers[Squeak.Context_instructionPointer], meth);\n        this.sp = this.decodeSqueakSP(ctxt.pointers[Squeak.Context_stackPointer]);\n    },\n    storeContextRegisters: function() {\n        //Save pc, sp into activeContext object, prior to change of context\n        //   see fetchContextRegisters for symmetry\n        //   expects activeContext, pc, sp, and method state vars to still be valid\n        this.activeContext.pointers[Squeak.Context_instructionPointer] = this.encodeSqueakPC(this.pc, this.method);\n        this.activeContext.pointers[Squeak.Context_stackPointer] = this.encodeSqueakSP(this.sp);\n    },\n    encodeSqueakPC: function(intPC, method) {\n        // Squeak pc is offset by header and literals\n        // and 1 for z-rel addressing\n        return intPC + method.pointers.length * 4 + 1;\n    },\n    decodeSqueakPC: function(squeakPC, method) {\n        return squeakPC - method.pointers.length * 4 - 1;\n    },\n    encodeSqueakSP: function(intSP) {\n        // sp is offset by tempFrameStart, -1 for z-rel addressing\n        return intSP - (Squeak.Context_tempFrameStart - 1);\n    },\n    decodeSqueakSP: function(squeakSP) {\n        return squeakSP + (Squeak.Context_tempFrameStart - 1);\n    },\n    recycleIfPossible: function(ctxt) {\n        if (!this.isMethodContext(ctxt)) return;\n        if (ctxt.pointersSize() === (Squeak.Context_tempFrameStart+Squeak.Context_smallFrameSize)) {\n            // Recycle small contexts\n            ctxt.pointers[0] = this.freeContexts;\n            this.freeContexts = ctxt;\n        } else { // Recycle large contexts\n            if (ctxt.pointersSize() !== (Squeak.Context_tempFrameStart+Squeak.Context_largeFrameSize))\n                return;\n            ctxt.pointers[0] = this.freeLargeContexts;\n            this.freeLargeContexts = ctxt;\n        }\n    },\n    allocateOrRecycleContext: function(needsLarge) {\n        //Return a recycled context or a newly allocated one if none is available for recycling.\"\n        var freebie;\n        if (needsLarge) {\n            if (!this.freeLargeContexts.isNil) {\n                freebie = this.freeLargeContexts;\n                this.freeLargeContexts = freebie.pointers[0];\n                this.nRecycledContexts++;\n                return freebie;\n            }\n            this.nAllocatedContexts++;\n            return this.instantiateClass(this.specialObjects[Squeak.splOb_ClassMethodContext], Squeak.Context_largeFrameSize);\n        } else {\n            if (!this.freeContexts.isNil) {\n                freebie = this.freeContexts;\n                this.freeContexts = freebie.pointers[0];\n                this.nRecycledContexts++;\n                return freebie;\n            }\n            this.nAllocatedContexts++;\n            return this.instantiateClass(this.specialObjects[Squeak.splOb_ClassMethodContext], Squeak.Context_smallFrameSize);\n        }\n    },\n},\n'stack access', {\n    pop: function() {\n        //Note leaves garbage above SP.  Cleaned out by fullGC.\n        return this.activeContext.pointers[this.sp--];\n    },\n    popN: function(nToPop) {\n        this.sp -= nToPop;\n    },\n    push: function(object) {\n        this.activeContext.pointers[++this.sp] = object;\n    },\n    popNandPush: function(nToPop, object) {\n        this.activeContext.pointers[this.sp -= nToPop - 1] = object;\n    },\n    top: function() {\n        return this.activeContext.pointers[this.sp];\n    },\n    stackValue: function(depthIntoStack) {\n        return this.activeContext.pointers[this.sp - depthIntoStack];\n    },\n    stackInteger: function(depthIntoStack) {\n        return this.checkSmallInt(this.stackValue(depthIntoStack));\n    },\n    stackIntOrFloat: function(depthIntoStack) {\n        var num = this.stackValue(depthIntoStack);\n        // is it a SmallInt?\n        if (typeof num === \"number\") return num;\n        // is it a Float?\n        if (num.isFloat) {\n            this.resultIsFloat = true;   // need to return result as Float\n            return num.float;\n        }\n        // maybe a 32-bit LargeInt?\n        var bytes = num.bytes;\n        if (bytes && bytes.length == 4) {\n            var value = 0;\n            for (var i = 3; i >= 0; i--)\n                value = value * 256 + bytes[i];\n            if (num.sqClass === this.specialObjects[Squeak.splOb_ClassLargePositiveInteger])\n                return value;\n            if (num.sqClass === this.specialObjects[Squeak.splOb_ClassLargeNegativeInteger])\n                return -value;\n        }\n        // none of the above\n        this.success = false;\n        return 0;\n    },\n    pop2AndPushIntResult: function(intResult) {// returns success boolean\n        if (this.success && this.canBeSmallInt(intResult)) {\n            this.popNandPush(2, intResult);\n            return true;\n        }\n        return false;\n    },\n    pop2AndPushNumResult: function(numResult) {// returns success boolean\n        if (this.success) {\n            if (this.resultIsFloat) {\n                this.popNandPush(2, this.primHandler.makeFloat(numResult));\n                return true;\n            }\n            if (numResult >= Squeak.MinSmallInt && numResult <= Squeak.MaxSmallInt) {\n                this.popNandPush(2, numResult);\n                return true;\n            }\n            if (numResult >= -0xFFFFFFFF && numResult <= 0xFFFFFFFF) {\n                var negative = numResult < 0,\n                    unsigned = negative ? -numResult : numResult,\n                    lgIntClass = negative ? Squeak.splOb_ClassLargeNegativeInteger : Squeak.splOb_ClassLargePositiveInteger,\n                    lgIntObj = this.instantiateClass(this.specialObjects[lgIntClass], 4),\n                    bytes = lgIntObj.bytes;\n                bytes[0] = unsigned     & 255;\n                bytes[1] = unsigned>>8  & 255;\n                bytes[2] = unsigned>>16 & 255;\n                bytes[3] = unsigned>>24 & 255;\n                this.popNandPush(2, lgIntObj);\n                return true;\n            }\n        }\n        return false;\n    },\n    pop2AndPushBoolResult: function(boolResult) {\n        if (!this.success) return false;\n        this.popNandPush(2, boolResult ? this.trueObj : this.falseObj);\n        return true;\n    },\n},\n'numbers', {\n    getClass: function(obj) {\n        if (this.isSmallInt(obj))\n            return this.specialObjects[Squeak.splOb_ClassInteger];\n        return obj.sqClass;\n    },\n    canBeSmallInt: function(anInt) {\n        return (anInt >= Squeak.MinSmallInt) && (anInt <= Squeak.MaxSmallInt);\n    },\n    isSmallInt: function(object) {\n        return typeof object === \"number\";\n    },\n    checkSmallInt: function(maybeSmallInt) { // returns an int and sets success\n        if (typeof maybeSmallInt === \"number\")\n            return maybeSmallInt;\n        this.success = false;\n        return 1;\n    },\n    quickDivide: function(rcvr, arg) { // must only handle exact case\n        if (arg === 0) return Squeak.NonSmallInt;  // fail if divide by zero\n        var result = rcvr / arg | 0;\n        if (result * arg === rcvr) return result;\n        return Squeak.NonSmallInt;     // fail if result is not exact\n    },\n    div: function(rcvr, arg) {\n        if (arg === 0) return Squeak.NonSmallInt;  // fail if divide by zero\n        return Math.floor(rcvr/arg);\n    },\n    mod: function(rcvr, arg) {\n        if (arg === 0) return Squeak.NonSmallInt;  // fail if divide by zero\n        return rcvr - Math.floor(rcvr/arg) * arg;\n    },\n    safeShift: function(smallInt, shiftCount) {\n         // JS shifts only up to 31 bits\n        if (shiftCount < 0) {\n            if (shiftCount < -31) return smallInt < 0 ? -1 : 0;\n            return smallInt >> -shiftCount; // OK to lose bits shifting right\n        }\n        if (shiftCount > 31) return smallInt == 0 ? 0 : Squeak.NonSmallInt;\n        // check for lost bits by seeing if computation is reversible\n        var shifted = smallInt << shiftCount;\n        if  ((shifted>>shiftCount) === smallInt) return shifted;\n        return Squeak.NonSmallInt;  //non-small result will cause failure\n    },\n},\n'utils',\n{\n    isContext: function(obj) {//either block or methodContext\n        if (obj.sqClass === this.specialObjects[Squeak.splOb_ClassMethodContext]) return true;\n        if (obj.sqClass === this.specialObjects[Squeak.splOb_ClassBlockContext]) return true;\n        return false;\n    },\n    isMethodContext: function(obj) {\n        return obj.sqClass === this.specialObjects[Squeak.splOb_ClassMethodContext];\n    },\n    instantiateClass: function(aClass, indexableSize) {\n        return this.image.instantiateClass(aClass, indexableSize, this.nilObj);\n    },\n    arrayFill: function(array, fromIndex, toIndex, value) {\n        // assign value to range from fromIndex (inclusive) to toIndex (exclusive)\n        for (var i = fromIndex; i < toIndex; i++)\n            array[i] = value;\n    },\n    arrayCopy: function(src, srcPos, dest, destPos, length) {\n        // copy length elements from src at srcPos to dest at destPos\n        if (src === dest && srcPos < destPos)\n            for (var i = length - 1; i >= 0; i--)\n                dest[destPos + i] = src[srcPos + i];\n        else\n            for (var i = 0; i < length; i++)\n                dest[destPos + i] = src[srcPos + i];\n    },\n},\n'debugging', {\n    addMessage: function(message) {\n        return this.messages[message] ? ++this.messages[message] : this.messages[message] = 1;\n    },\n    warnOnce: function(message) {\n        if (this.addMessage(message) == 1)\n            console.warn(message);\n    },\n    printMethod: function(aMethod, optContext, optSel) {\n        // return a 'class>>selector' description for the method\n        if (optSel) return optContext.className() + '>>' + optSel.bytesAsString();\n        // this is expensive, we have to search all classes\n        if (!aMethod) aMethod = this.activeContext.contextMethod();\n        var found;\n        this.allMethodsDo(function(classObj, methodObj, selectorObj) {\n            if (methodObj === aMethod)\n                return found = classObj.className() + '>>' + selectorObj.bytesAsString();\n        });\n        if (found) return found;\n        if (optContext) {\n            var rcvr = optContext.pointers[Squeak.Context_receiver];\n            return \"(\" + rcvr + \")>>?\";\n        }\n        return \"?>>?\";\n    },\n    allInstancesOf: function(classObj, callback) {\n        if (typeof classObj === \"string\") classObj = this.globalNamed(classObj);\n        var instances = [],\n            inst = this.image.someInstanceOf(classObj);\n        while (inst) {\n            if (callback) callback(inst);\n            else instances.push(inst);\n            inst = this.image.nextInstanceAfter(inst);\n        }\n        return instances;\n    },\n    globalNamed: function(name) {\n        return this.allGlobalsDo(function(nameObj, globalObj){\n            if (nameObj.bytesAsString() === name) return globalObj;\n        });\n    },\n    allGlobalsDo: function(callback) {\n        // callback(globalNameObj, globalObj) should return true to break out of iteration\n        var globals = this.globals;\n        for (var i = 0; i < globals.length; i++) {\n            var assn = globals[i];\n            if (!assn.isNil) {\n                var result = callback(assn.pointers[0], assn.pointers[1]);\n                if (result) return result;\n            }\n        }\n    },\n    allMethodsDo: function(callback) {\n        // callback(classObj, methodObj, selectorObj) should return true to break out of iteration\n        var self = this;\n        this.allGlobalsDo(function(globalNameObj, globalObj) {\n            if (globalObj.pointers && globalObj.pointers.length >= 9) {\n                var clsAndMeta = [globalObj, globalObj.sqClass];\n                for (var c = 0; c < clsAndMeta.length; c++) {\n                    var cls = clsAndMeta[c];\n                    var mdict = cls.pointers[1];\n                    if (!mdict.pointers || !mdict.pointers[1]) continue;\n                    var methods = mdict.pointers[1].pointers;\n                    if (!methods) continue;\n                    var selectors = mdict.pointers;\n                    for (var j = 0; j < methods.length; j++) {\n                        if (callback.call(this, cls, methods[j], selectors[2+j]))\n                            return true;\n                    }\n                }\n            }\n        });\n    },\n    printStack: function(ctx, limit) {\n        // both args are optional\n        if (typeof ctx == \"number\") {limit = ctx; ctx = null;}\n        if (!ctx) ctx = this.activeContext;\n        if (!limit) limit = 100;\n        var contexts = [],\n            hardLimit = Math.max(limit, 1000000);\n        while (!ctx.isNil && hardLimit-- > 0) {\n            contexts.push(ctx);\n            ctx = ctx.pointers[Squeak.Context_sender];\n        }\n        var extra = 200;\n        if (contexts.length > limit + extra) {\n            if (!ctx.isNil) contexts.push('...'); // over hard limit\n            contexts = contexts.slice(0, limit).concat(['...']).concat(contexts.slice(-extra));\n        }\n        var stack = [],\n            i = contexts.length;\n        while (i-- > 0) {\n            var ctx = contexts[i];\n            if (!ctx.pointers) {\n                stack.push('...\\n');\n            } else {\n                var block = '',\n                    method = ctx.pointers[Squeak.Context_method];\n                if (typeof method === 'number') { // it's a block context, fetch home\n                    method = ctx.pointers[Squeak.BlockContext_home].pointers[Squeak.Context_method];\n                    block = '[] in ';\n                } else if (!ctx.pointers[Squeak.Context_closure].isNil) {\n                    block = '[] in '; // it's a closure activation\n                }\n                stack.push(block + this.printMethod(method, ctx) + '\\n');\n            }\n        }\n        return stack.join('');\n    },\n    findMethod: function(classAndMethodString) {\n        // classAndMethodString is 'Class>>method'\n        var found,\n            className = classAndMethodString.split('>>')[0],\n            methodName = classAndMethodString.split('>>')[1];\n        this.allMethodsDo(function(classObj, methodObj, selectorObj) {\n            if (methodName.length == selectorObj.bytesSize()\n                && methodName == selectorObj.bytesAsString()\n                && className == classObj.className())\n                    return found = methodObj;\n        });\n        return found;\n    },\n    breakNow: function(msg) {\n        if (msg) console.log(\"Break: \" + msg);\n        this.breakOutOfInterpreter = 'break';\n    },\n    breakOn: function(classAndMethodString) {\n        // classAndMethodString is 'Class>>method'\n        return this.breakOnMethod = classAndMethodString && this.findMethod(classAndMethodString);\n    },\n    breakOnReturnFromThisContext: function() {\n        this.breakOnContextChanged = false;\n        this.breakOnContextReturned = this.activeContext;\n    },\n    breakOnSendOrReturn: function() {\n        this.breakOnContextChanged = true;\n        this.breakOnContextReturned = null;\n    },\n    printActiveContext: function(maxWidth) {\n        if (!maxWidth) maxWidth = 72;\n        function printObj(obj) {\n            var value = obj.sqInstName ? obj.sqInstName() : obj.toString();\n            value = JSON.stringify(value).slice(1, -1);\n            if (value.length > maxWidth - 3) value = value.slice(0, maxWidth - 3) + '...';\n            return value;\n        }\n        // temps and stack in current context\n        var ctx = this.activeContext;\n        var isBlock = typeof ctx.pointers[Squeak.BlockContext_argumentCount] === 'number';\n        var closure = ctx.pointers[Squeak.Context_closure];\n        var isClosure = !isBlock && !closure.isNil;\n        var homeCtx = isBlock ? ctx.pointers[Squeak.BlockContext_home] : ctx;\n        var tempCount = isClosure\n            ? closure.pointers[Squeak.Closure_numArgs]\n            : homeCtx.pointers[Squeak.Context_method].methodTempCount();\n        var stackBottom = this.decodeSqueakSP(0);\n        var stackTop = homeCtx.contextSizeWithStack(this) - 1;\n        var firstTemp = stackBottom + 1;\n        var lastTemp = firstTemp + tempCount - 1;\n        var stack = '';\n        for (var i = stackBottom; i <= stackTop; i++) {\n            var value = printObj(homeCtx.pointers[i]);\n            var label = '';\n            if (i == stackBottom) label = '=rcvr'; else\n            if (i <= lastTemp) label = '=tmp' + (i - firstTemp);\n            stack += '\\nctx[' + i + ']' + label +': ' + value;\n        }\n        if (isBlock) {\n            stack += '\\n';\n            var nArgs = ctx.pointers[3];\n            var firstArg = this.decodeSqueakSP(1);\n            var lastArg = firstArg + nArgs;\n            for (var i = firstArg; i <= this.sp; i++) {\n                var value = printObj(ctx.pointers[i]);\n                var label = '';\n                if (i <= lastArg) label = '=arg' + (i - firstArg);\n                stack += '\\nblk[' + i + ']' + label +': ' + value;\n            }\n        }\n        return stack;\n    },\n    printAllProcesses: function() {\n        var schedAssn = this.specialObjects[Squeak.splOb_SchedulerAssociation],\n            sched = schedAssn.pointers[Squeak.Assn_value];\n        // print active process\n        var activeProc = sched.pointers[Squeak.ProcSched_activeProcess],\n            result = \"Active: \" + this.printProcess(activeProc, true);\n        // print other runnable processes\n        var lists = sched.pointers[Squeak.ProcSched_processLists].pointers;\n        for (var priority = lists.length - 1; priority >= 0; priority--) {\n            var process = lists[priority].pointers[Squeak.LinkedList_firstLink];\n            while (!process.isNil) {\n                result += \"\\nRunnable: \" + this.printProcess(process);\n                process = process.pointers[Squeak.Link_nextLink];\n            }\n        }\n        // print all processes waiting on a semaphore\n        var semaClass = this.specialObjects[Squeak.splOb_ClassSemaphore],\n            sema = this.image.someInstanceOf(semaClass);\n        while (sema) {\n            var process = sema.pointers[Squeak.LinkedList_firstLink];\n            while (!process.isNil) {\n                result += \"\\nWaiting: \" + this.printProcess(process);\n                process = process.pointers[Squeak.Link_nextLink];\n            }\n            sema = this.image.nextInstanceAfter(sema);\n        }\n        return result;\n    },\n    printProcess: function(process, active) {\n        var context = process.pointers[Squeak.Proc_suspendedContext],\n            priority = process.pointers[Squeak.Proc_priority],\n            stack = this.printStack(active ? null : context);\n        return process.toString() +\" at priority \" + priority + \"\\n\" + stack;\n    },\n    printByteCodes: function(aMethod, optionalIndent, optionalHighlight, optionalPC) {\n        if (!aMethod) aMethod = this.method;\n        var printer = new Squeak.InstructionPrinter(aMethod, this);\n        return printer.printInstructions(optionalIndent, optionalHighlight, optionalPC);\n    },\n    willSendOrReturn: function() {\n        // Answer whether the next bytecode corresponds to a Smalltalk\n        // message send or return\n        var byte = this.method.bytes[this.pc];\n        if (byte >= 120 && byte <= 125) return true; // return\n        if (byte < 131 || byte == 200) return false;\n        if (byte >= 176) return true; // special send or short send\n        if (byte <= 134) {         // long sends\n            // long form support demands we check the selector\n            var litIndex;\n            if (byte === 132) {\n                if ((this.method.bytes[this.pc + 1] >> 5) > 1) return false;\n                litIndex = this.method.bytes[this.pc + 2];\n            } else\n                litIndex = this.method.bytes[this.pc + 1] & (byte === 134 ? 63 : 31);\n            var selectorObj = this.method.methodGetLiteral(litIndex);\n            if (selectorObj.bytesAsString() !== 'blockCopy:') return true;\n        }\n        return false;\n    },\n    nextSendSelector: function() {\n        // if the next bytecode corresponds to a Smalltalk\n        // message send, answer the selector\n        var byte = this.method.bytes[this.pc];\n        if (byte < 131 || byte == 200) return null;\n        var selectorObj;\n        if (byte >= 0xD0 ) {\n            selectorObj = this.method.methodGetLiteral(byte & 0x0F);\n        } else if (byte >= 0xB0 ) {\n            selectorObj = this.specialSelectors[2 * (byte - 0xB0)];\n        } else if (byte <= 134) { \n            // long form support demands we check the selector\n            var litIndex;\n            if (byte === 132) {\n                if ((this.method.bytes[this.pc + 1] >> 5) > 1) return null;\n                litIndex = this.method.bytes[this.pc + 2];\n            } else\n                litIndex = this.method.bytes[this.pc + 1] & (byte === 134 ? 63 : 31);\n            selectorObj = this.method.methodGetLiteral(litIndex);\n        }\n        if (selectorObj) {\n            var selector = selectorObj.bytesAsString();\n            if (selector !== 'blockCopy:') return selector;\n        }\n    },\n});\n\nObject.subclass('Squeak.Primitives',\n'initialization', {\n    initialize: function(vm, display) {\n        this.vm = vm;\n        this.display = display;\n        this.display.vm = this.vm;\n        this.oldPrims = !this.vm.image.hasClosures;\n        this.allowAccessBeyondSP = this.oldPrims;\n        this.deferDisplayUpdates = false;\n        this.semaphoresToSignal = [];\n        this.initDisplay();\n        this.initAtCache();\n        this.initModules();\n        if (vm.image.isSpur) {\n            this.charFromInt = this.charFromIntSpur;\n            this.charToInt = this.charToIntSpur;\n            this.identityHash = this.identityHashSpur;\n        }\n    },\n    initModules: function() {\n        this.loadedModules = {};\n        this.builtinModules = {\n            JavaScriptPlugin:       this.findPluginFunctions(\"js_\", \"\", true),\n            FilePlugin:             this.findPluginFunctions(\"\", \"primitive(Disable)?(File|Directory)\"),\n            DropPlugin:             this.findPluginFunctions(\"\", \"primitiveDropRequest\"),\n            SoundPlugin:            this.findPluginFunctions(\"snd_\"),\n            JPEGReadWriter2Plugin:  this.findPluginFunctions(\"jpeg2_\"),\n            SecurityPlugin: {\n                primitiveDisableImageWrite: this.fakePrimitive.bind(this, \"SecurityPlugin.primitiveDisableImageWrite\", 0),\n            },\n        };\n        this.patchModules = {\n            ScratchPlugin:          this.findPluginFunctions(\"scratch_\"),\n        };\n        this.interpreterProxy = new Squeak.InterpreterProxy(this.vm);\n    },\n    findPluginFunctions: function(prefix, match, bindLate) {\n        match = match || \"(initialise|shutdown|prim)\";\n        var plugin = {},\n            regex = new RegExp(\"^\" + prefix + match, \"i\");\n        for (var funcName in this)\n            if (regex.test(funcName) && typeof this[funcName] == \"function\") {\n                var primName = funcName;\n                if (prefix) primName = funcName[prefix.length].toLowerCase() + funcName.slice(prefix.length + 1);\n                plugin[primName] = bindLate ? funcName : this[funcName].bind(this);\n            }\n        return plugin;\n    },\n    initDisplay: function() {\n        this.indexedColors = [\n            0xFFFFFFFF, 0xFF000001, 0xFFFFFFFF, 0xFF808080, 0xFFFF0000, 0xFF00FF00, 0xFF0000FF, 0xFF00FFFF,\n            0xFFFFFF00, 0xFFFF00FF, 0xFF202020, 0xFF404040, 0xFF606060, 0xFF9F9F9F, 0xFFBFBFBF, 0xFFDFDFDF,\n            0xFF080808, 0xFF101010, 0xFF181818, 0xFF282828, 0xFF303030, 0xFF383838, 0xFF484848, 0xFF505050,\n            0xFF585858, 0xFF686868, 0xFF707070, 0xFF787878, 0xFF878787, 0xFF8F8F8F, 0xFF979797, 0xFFA7A7A7,\n            0xFFAFAFAF, 0xFFB7B7B7, 0xFFC7C7C7, 0xFFCFCFCF, 0xFFD7D7D7, 0xFFE7E7E7, 0xFFEFEFEF, 0xFFF7F7F7,\n            0xFF000001, 0xFF003300, 0xFF006600, 0xFF009900, 0xFF00CC00, 0xFF00FF00, 0xFF000033, 0xFF003333,\n            0xFF006633, 0xFF009933, 0xFF00CC33, 0xFF00FF33, 0xFF000066, 0xFF003366, 0xFF006666, 0xFF009966,\n            0xFF00CC66, 0xFF00FF66, 0xFF000099, 0xFF003399, 0xFF006699, 0xFF009999, 0xFF00CC99, 0xFF00FF99,\n            0xFF0000CC, 0xFF0033CC, 0xFF0066CC, 0xFF0099CC, 0xFF00CCCC, 0xFF00FFCC, 0xFF0000FF, 0xFF0033FF,\n            0xFF0066FF, 0xFF0099FF, 0xFF00CCFF, 0xFF00FFFF, 0xFF330000, 0xFF333300, 0xFF336600, 0xFF339900,\n            0xFF33CC00, 0xFF33FF00, 0xFF330033, 0xFF333333, 0xFF336633, 0xFF339933, 0xFF33CC33, 0xFF33FF33,\n            0xFF330066, 0xFF333366, 0xFF336666, 0xFF339966, 0xFF33CC66, 0xFF33FF66, 0xFF330099, 0xFF333399,\n            0xFF336699, 0xFF339999, 0xFF33CC99, 0xFF33FF99, 0xFF3300CC, 0xFF3333CC, 0xFF3366CC, 0xFF3399CC,\n            0xFF33CCCC, 0xFF33FFCC, 0xFF3300FF, 0xFF3333FF, 0xFF3366FF, 0xFF3399FF, 0xFF33CCFF, 0xFF33FFFF,\n            0xFF660000, 0xFF663300, 0xFF666600, 0xFF669900, 0xFF66CC00, 0xFF66FF00, 0xFF660033, 0xFF663333,\n            0xFF666633, 0xFF669933, 0xFF66CC33, 0xFF66FF33, 0xFF660066, 0xFF663366, 0xFF666666, 0xFF669966,\n            0xFF66CC66, 0xFF66FF66, 0xFF660099, 0xFF663399, 0xFF666699, 0xFF669999, 0xFF66CC99, 0xFF66FF99,\n            0xFF6600CC, 0xFF6633CC, 0xFF6666CC, 0xFF6699CC, 0xFF66CCCC, 0xFF66FFCC, 0xFF6600FF, 0xFF6633FF,\n            0xFF6666FF, 0xFF6699FF, 0xFF66CCFF, 0xFF66FFFF, 0xFF990000, 0xFF993300, 0xFF996600, 0xFF999900,\n            0xFF99CC00, 0xFF99FF00, 0xFF990033, 0xFF993333, 0xFF996633, 0xFF999933, 0xFF99CC33, 0xFF99FF33,\n            0xFF990066, 0xFF993366, 0xFF996666, 0xFF999966, 0xFF99CC66, 0xFF99FF66, 0xFF990099, 0xFF993399,\n            0xFF996699, 0xFF999999, 0xFF99CC99, 0xFF99FF99, 0xFF9900CC, 0xFF9933CC, 0xFF9966CC, 0xFF9999CC,\n            0xFF99CCCC, 0xFF99FFCC, 0xFF9900FF, 0xFF9933FF, 0xFF9966FF, 0xFF9999FF, 0xFF99CCFF, 0xFF99FFFF,\n            0xFFCC0000, 0xFFCC3300, 0xFFCC6600, 0xFFCC9900, 0xFFCCCC00, 0xFFCCFF00, 0xFFCC0033, 0xFFCC3333,\n            0xFFCC6633, 0xFFCC9933, 0xFFCCCC33, 0xFFCCFF33, 0xFFCC0066, 0xFFCC3366, 0xFFCC6666, 0xFFCC9966,\n            0xFFCCCC66, 0xFFCCFF66, 0xFFCC0099, 0xFFCC3399, 0xFFCC6699, 0xFFCC9999, 0xFFCCCC99, 0xFFCCFF99,\n            0xFFCC00CC, 0xFFCC33CC, 0xFFCC66CC, 0xFFCC99CC, 0xFFCCCCCC, 0xFFCCFFCC, 0xFFCC00FF, 0xFFCC33FF,\n            0xFFCC66FF, 0xFFCC99FF, 0xFFCCCCFF, 0xFFCCFFFF, 0xFFFF0000, 0xFFFF3300, 0xFFFF6600, 0xFFFF9900,\n            0xFFFFCC00, 0xFFFFFF00, 0xFFFF0033, 0xFFFF3333, 0xFFFF6633, 0xFFFF9933, 0xFFFFCC33, 0xFFFFFF33,\n            0xFFFF0066, 0xFFFF3366, 0xFFFF6666, 0xFFFF9966, 0xFFFFCC66, 0xFFFFFF66, 0xFFFF0099, 0xFFFF3399,\n            0xFFFF6699, 0xFFFF9999, 0xFFFFCC99, 0xFFFFFF99, 0xFFFF00CC, 0xFFFF33CC, 0xFFFF66CC, 0xFFFF99CC,\n            0xFFFFCCCC, 0xFFFFFFCC, 0xFFFF00FF, 0xFFFF33FF, 0xFFFF66FF, 0xFFFF99FF, 0xFFFFCCFF, 0xFFFFFFFF];\n    },\n},\n'dispatch', {\n    quickSendOther: function(rcvr, lobits) {\n        // returns true if it succeeds\n        this.success = true;\n        switch (lobits) {\n            case 0x0: return this.popNandPushIfOK(2, this.objectAt(true,true,false)); // at:\n            case 0x1: return this.popNandPushIfOK(3, this.objectAtPut(true,true,false)); // at:put:\n            case 0x2: return this.popNandPushIfOK(1, this.objectSize(true)); // size\n            //case 0x3: return false; // next\n            //case 0x4: return false; // nextPut:\n            //case 0x5: return false; // atEnd\n            case 0x6: return this.pop2andPushBoolIfOK(this.vm.stackValue(1) === this.vm.stackValue(0)); // ==\n            case 0x7: return this.popNandPushIfOK(1,this.vm.getClass(this.vm.top())); // class\n            case 0x8: return this.popNandPushIfOK(2,this.doBlockCopy()); // blockCopy:\n            case 0x9: return this.primitiveBlockValue(0); // value\n            case 0xA: return this.primitiveBlockValue(1); // value:\n            //case 0xB: return false; // do:\n            //case 0xC: return false; // new\n            //case 0xD: return false; // new:\n            //case 0xE: return false; // x\n            //case 0xF: return false; // y\n        }\n        return false;\n    },\n    doPrimitive: function(index, argCount, primMethod) {\n        this.success = true;\n        if (index < 128) // Chrome only optimized up to 128 cases\n        switch (index) {\n            // Integer Primitives (0-19)\n            case 1: return this.popNandPushIntIfOK(2,this.stackInteger(1) + this.stackInteger(0));  // Integer.add\n            case 2: return this.popNandPushIntIfOK(2,this.stackInteger(1) - this.stackInteger(0));  // Integer.subtract\n            case 3: return this.pop2andPushBoolIfOK(this.stackInteger(1) < this.stackInteger(0));   // Integer.less\n            case 4: return this.pop2andPushBoolIfOK(this.stackInteger(1) > this.stackInteger(0));   // Integer.greater\n            case 5: return this.pop2andPushBoolIfOK(this.stackInteger(1) <= this.stackInteger(0));  // Integer.leq\n            case 6: return this.pop2andPushBoolIfOK(this.stackInteger(1) >= this.stackInteger(0));  // Integer.geq\n            case 7: return this.pop2andPushBoolIfOK(this.stackInteger(1) === this.stackInteger(0)); // Integer.equal\n            case 8: return this.pop2andPushBoolIfOK(this.stackInteger(1) !== this.stackInteger(0)); // Integer.notequal\n            case 9: return this.popNandPushIntIfOK(2,this.stackInteger(1) * this.stackInteger(0));  // Integer.multiply *\n            case 10: return this.popNandPushIntIfOK(2,this.vm.quickDivide(this.stackInteger(1),this.stackInteger(0)));  // Integer.divide /  (fails unless exact)\n            case 11: return this.popNandPushIntIfOK(2,this.vm.mod(this.stackInteger(1),this.stackInteger(0)));  // Integer.mod \\\\\n            case 12: return this.popNandPushIntIfOK(2,this.vm.div(this.stackInteger(1),this.stackInteger(0)));  // Integer.div //\n            case 13: return this.popNandPushIntIfOK(2,this.stackInteger(1) / this.stackInteger(0) | 0);  // Integer.quo\n            case 14: return this.popNandPushIfOK(2,this.doBitAnd());  // SmallInt.bitAnd\n            case 15: return this.popNandPushIfOK(2,this.doBitOr());  // SmallInt.bitOr\n            case 16: return this.popNandPushIfOK(2,this.doBitXor());  // SmallInt.bitXor\n            case 17: return this.popNandPushIfOK(2,this.doBitShift());  // SmallInt.bitShift\n            case 18: return this.primitiveMakePoint(argCount, false);\n            case 19: return false;                                 // Guard primitive for simulation -- *must* fail\n            // LargeInteger Primitives (20-39)\n            // 32-bit logic is aliased to Integer prims above\n            case 20: return false; // primitiveRemLargeIntegers\n            case 21: return false; // primitiveAddLargeIntegers\n            case 22: return false; // primitiveSubtractLargeIntegers\n            case 23: return this.primitiveLessThanLargeIntegers();\n            case 24: return this.primitiveGreaterThanLargeIntegers();\n            case 25: return this.primitiveLessOrEqualLargeIntegers();\n            case 26: return this.primitiveGreaterOrEqualLargeIntegers();\n            case 27: return this.primitiveEqualLargeIntegers();\n            case 28: return this.primitiveNotEqualLargeIntegers();\n            case 29: return false; // primitiveMultiplyLargeIntegers\n            case 30: return false; // primitiveDivideLargeIntegers\n            case 31: return false; // primitiveModLargeIntegers\n            case 32: return false; // primitiveDivLargeIntegers\n            case 33: return false; // primitiveQuoLargeIntegers\n            case 34: return false; // primitiveBitAndLargeIntegers\n            case 35: return false; // primitiveBitOrLargeIntegers\n            case 36: return false; // primitiveBitXorLargeIntegers\n            case 37: return false; // primitiveBitShiftLargeIntegers\n            case 38: return this.popNandPushIfOK(argCount+1, this.objectAt(false,false,false)); // Float basicAt\n            case 39: return this.popNandPushIfOK(argCount+1, this.objectAtPut(false,false,false)); // Float basicAtPut\n            // Float Primitives (40-59)\n            case 40: return this.popNandPushFloatIfOK(argCount+1,this.stackInteger(0)); // primitiveAsFloat\n            case 41: return this.popNandPushFloatIfOK(argCount+1,this.stackFloat(1)+this.stackFloat(0));  // Float +\n            case 42: return this.popNandPushFloatIfOK(argCount+1,this.stackFloat(1)-this.stackFloat(0));  // Float -\n            case 43: return this.pop2andPushBoolIfOK(this.stackFloat(1)<this.stackFloat(0));  // Float <\n            case 44: return this.pop2andPushBoolIfOK(this.stackFloat(1)>this.stackFloat(0));  // Float >\n            case 45: return this.pop2andPushBoolIfOK(this.stackFloat(1)<=this.stackFloat(0));  // Float <=\n            case 46: return this.pop2andPushBoolIfOK(this.stackFloat(1)>=this.stackFloat(0));  // Float >=\n            case 47: return this.pop2andPushBoolIfOK(this.stackFloat(1)===this.stackFloat(0));  // Float =\n            case 48: return this.pop2andPushBoolIfOK(this.stackFloat(1)!==this.stackFloat(0));  // Float !=\n            case 49: return this.popNandPushFloatIfOK(argCount+1,this.stackFloat(1)*this.stackFloat(0));  // Float.mul\n            case 50: return this.popNandPushFloatIfOK(argCount+1,this.safeFDiv(this.stackFloat(1),this.stackFloat(0)));  // Float.div\n            case 51: return this.popNandPushIfOK(argCount+1,this.floatAsSmallInt(this.stackFloat(0)));  // Float.asInteger\n            case 52: return false; // Float.fractionPart (modf)\n            case 53: return this.popNandPushIntIfOK(argCount+1, this.frexp_exponent(this.stackFloat(0)) - 1); // Float.exponent\n            case 54: return this.popNandPushFloatIfOK(2, this.ldexp(this.stackFloat(1), this.stackFloat(0))); // Float.timesTwoPower\n            case 55: return this.popNandPushFloatIfOK(argCount+1, Math.sqrt(this.stackFloat(0))); // SquareRoot\n            case 56: return this.popNandPushFloatIfOK(argCount+1, Math.sin(this.stackFloat(0))); // Sine\n            case 57: return this.popNandPushFloatIfOK(argCount+1, Math.atan(this.stackFloat(0))); // Arctan\n            case 58: return this.popNandPushFloatIfOK(argCount+1, Math.log(this.stackFloat(0))); // LogN\n            case 59: return this.popNandPushFloatIfOK(argCount+1, Math.exp(this.stackFloat(0))); // Exp\n            // Subscript and Stream Primitives (60-67)\n            case 60: return this.popNandPushIfOK(argCount+1, this.objectAt(false,false,false)); // basicAt:\n            case 61: return this.popNandPushIfOK(argCount+1, this.objectAtPut(false,false,false)); // basicAt:put:\n            case 62: return this.popNandPushIfOK(argCount+1, this.objectSize(false)); // size\n            case 63: return this.popNandPushIfOK(argCount+1, this.objectAt(false,true,false)); // String.basicAt:\n            case 64: return this.popNandPushIfOK(argCount+1, this.objectAtPut(false,true,false)); // String.basicAt:put:\n            case 65: return false; // primitiveNext\n            case 66: return false; // primitiveNextPut\n            case 67: return false; // primitiveAtEnd\n            // StorageManagement Primitives (68-79)\n            case 68: return this.popNandPushIfOK(argCount+1, this.objectAt(false,false,true)); // Method.objectAt:\n            case 69: return this.popNandPushIfOK(argCount+1, this.objectAtPut(false,false,true)); // Method.objectAt:put:\n            case 70: return this.popNandPushIfOK(argCount+1, this.instantiateClass(this.stackNonInteger(0), 0)); // Class.new\n            case 71: return this.popNandPushIfOK(argCount+1, this.instantiateClass(this.stackNonInteger(1), this.stackPos32BitInt(0))); // Class.new:\n            case 72: return this.primitiveArrayBecome(argCount, false); // one way\n            case 73: return this.popNandPushIfOK(argCount+1, this.objectAt(false,false,true)); // instVarAt:\n            case 74: return this.popNandPushIfOK(argCount+1, this.objectAtPut(false,false,true)); // instVarAt:put:\n            case 75: return this.popNandPushIfOK(argCount+1, this.identityHash(this.stackNonInteger(0))); // Object.identityHash\n            case 76: return this.primitiveStoreStackp(argCount);  // (Blue Book: primitiveAsObject)\n            case 77: return this.popNandPushIfOK(argCount+1, this.someInstanceOf(this.stackNonInteger(0))); // Class.someInstance\n            case 78: return this.popNandPushIfOK(argCount+1, this.nextInstanceAfter(this.stackNonInteger(0))); // Object.nextInstance\n            case 79: return this.primitiveNewMethod(argCount); // Compiledmethod.new\n            // Control Primitives (80-89)\n            case 80: return this.popNandPushIfOK(2,this.doBlockCopy()); // blockCopy:\n            case 81: return this.primitiveBlockValue(argCount); // BlockContext.value\n            case 82: return this.primitiveBlockValueWithArgs(argCount); // BlockContext.valueWithArguments:\n            case 83: return this.vm.primitivePerform(argCount); // Object.perform:(with:)*\n            case 84: return this.vm.primitivePerformWithArgs(argCount, false); //  Object.perform:withArguments:\n            case 85: return this.primitiveSignal(); // Semaphore.wait\n            case 86: return this.primitiveWait(); // Semaphore.wait\n            case 87: return this.primitiveResume(); // Process.resume\n            case 88: return this.primitiveSuspend(); // Process.suspend\n            case 89: return this.vm.flushMethodCache(); //primitiveFlushCache\n            // Input/Output Primitives (90-109)\n            case 90: return this.primitiveMousePoint(argCount); // mousePoint\n            case 91: return this.primitiveTestDisplayDepth(argCount); // cursorLocPut in old images\n            // case 92: return false; // primitiveSetDisplayMode\n            case 93: return this.primitiveInputSemaphore(argCount);\n            case 94: return this.primitiveGetNextEvent(argCount);\n            case 95: return this.primitiveInputWord(argCount);\n            case 96: return this.namedPrimitive('BitBltPlugin', 'primitiveCopyBits', argCount);\n            case 97: return this.primitiveSnapshot(argCount);\n            //case 98: return false; // primitiveStoreImageSegment\n            case 99: return this.primitiveLoadImageSegment(argCount);\n            case 100: return this.vm.primitivePerformWithArgs(argCount, true); // Object.perform:withArguments:inSuperclass: (Blue Book: primitiveSignalAtTick)\n            case 101: return this.primitiveBeCursor(argCount); // Cursor.beCursor\n            case 102: return this.primitiveBeDisplay(argCount); // DisplayScreen.beDisplay\n            case 103: return false; // primitiveScanCharacters\n            case 104: return false; // primitiveDrawLoop\n            case 105: return this.popNandPushIfOK(argCount+1, this.doStringReplace()); // string and array replace\n            case 106: return this.primitiveScreenSize(argCount); // actualScreenSize\n            case 107: return this.primitiveMouseButtons(argCount); // Sensor mouseButtons\n            case 108: return this.primitiveKeyboardNext(argCount); // Sensor kbdNext\n            case 109: return this.primitiveKeyboardPeek(argCount); // Sensor kbdPeek\n            // System Primitives (110-119)\n            case 110: return this.pop2andPushBoolIfOK(this.vm.stackValue(1) === this.vm.stackValue(0)); // ==\n            case 111: return this.popNandPushIfOK(argCount+1, this.vm.getClass(this.vm.top())); // Object.class\n            case 112: return this.popNandPushIfOK(argCount+1, this.vm.image.bytesLeft()); //primitiveBytesLeft\n            case 113: return this.primitiveQuit(argCount);\n            case 114: return this.primitiveExitToDebugger(argCount);\n            case 115: return this.primitiveChangeClass(argCount);\n            case 116: return this.vm.flushMethodCacheForMethod(this.vm.top());  // after Squeak 2.2 uses 119\n            case 117: return this.doNamedPrimitive(argCount, primMethod); // named prims\n            case 118: return this.primitiveDoPrimitiveWithArgs(argCount);\n            case 119: return this.vm.flushMethodCacheForSelector(this.vm.top()); // before Squeak 2.3 uses 116\n            // Miscellaneous Primitives (120-149)\n            case 120: return false; //primitiveCalloutToFFI\n            case 121: return this.primitiveImageName(argCount); //get+set imageName\n            case 122: return this.primitiveReverseDisplay(argCount); // Blue Book: primitiveImageVolume\n            //case 123: return false; //TODO primitiveValueUninterruptably\n            case 124: return this.popNandPushIfOK(2, this.registerSemaphore(Squeak.splOb_TheLowSpaceSemaphore));\n            case 125: return this.popNandPushIfOK(2, this.setLowSpaceThreshold());\n            case 126: return this.primitiveDeferDisplayUpdates(argCount);\n            case 127: return this.primitiveShowDisplayRect(argCount);\n        } else if (index < 256) switch (index) { // Chrome only optimized up to 128 cases\n            case 128: return this.primitiveArrayBecome(argCount, true); // both ways\n            case 129: return this.popNandPushIfOK(1, this.vm.image.specialObjectsArray); //specialObjectsOop\n            case 130: return this.primitiveFullGC(argCount);\n            case 131: return this.popNandPushIfOK(1, this.vm.image.partialGC()); // GCmost\n            case 132: return this.pop2andPushBoolIfOK(this.pointsTo(this.stackNonInteger(1), this.vm.top())); //Object.pointsTo\n            case 133: return true; //TODO primitiveSetInterruptKey\n            case 134: return this.popNandPushIfOK(2, this.registerSemaphore(Squeak.splOb_TheInterruptSemaphore));\n            case 135: return this.popNandPushIfOK(1, this.millisecondClockValue());\n            case 136: return this.primitiveSignalAtMilliseconds(argCount); //Delay signal:atMs:());\n            case 137: return this.popNandPushIfOK(1, this.secondClock()); // seconds since Jan 1, 1901\n            case 138: return this.popNandPushIfOK(argCount+1, this.someObject()); // Object.someObject\n            case 139: return this.popNandPushIfOK(argCount+1, this.nextObject(this.vm.top())); // Object.nextObject\n            case 140: return this.primitiveBeep(argCount);\n            case 141: return this.primitiveClipboardText(argCount);\n            case 142: return this.popNandPushIfOK(argCount+1, this.makeStString(this.filenameToSqueak(Squeak.vmPath)));\n            case 143: // short at and shortAtPut\n            case 144: return this.primitiveShortAtAndPut(argCount);\n            case 145: return this.primitiveConstantFill(argCount);\n            case 146: return this.namedPrimitive('JoystickTabletPlugin', 'primitiveReadJoystick', argCount);\n            case 147: return this.namedPrimitive('BitBltPlugin', 'primitiveWarpBits', argCount);\n            case 148: return this.popNandPushIfOK(argCount+1, this.vm.image.clone(this.vm.top())); //shallowCopy\n            case 149: return this.primitiveGetAttribute(argCount);\n            // File Primitives (150-169)\n            case 150: if (this.oldPrims) return this.primitiveFileAtEnd(argCount);\n            case 151: if (this.oldPrims) return this.primitiveFileClose(argCount);\n            case 152: if (this.oldPrims) return this.primitiveFileGetPosition(argCount);\n            case 153: if (this.oldPrims) return this.primitiveFileOpen(argCount);\n            case 154: if (this.oldPrims) return this.primitiveFileRead(argCount);\n            case 155: if (this.oldPrims) return this.primitiveFileSetPosition(argCount);\n            case 156: if (this.oldPrims) return this.primitiveFileDelete(argCount);\n            case 157: if (this.oldPrims) return this.primitiveFileSize(argCount);\n            case 158: if (this.oldPrims) return this.primitiveFileWrite(argCount);\n            case 159: if (this.oldPrims) return this.primitiveFileRename(argCount);\n                break;  // fail 150-159 if fell through\n            case 160: if (this.oldPrims) return this.primitiveDirectoryCreate(argCount);\n                else return this.primitiveAdoptInstance(argCount);\n            case 161: if (this.oldPrims) return this.primitiveDirectoryDelimitor(argCount); // new: primitiveSetIdentityHash\n                break;  // fail\n            case 162: if (this.oldPrims) return this.primitiveDirectoryLookup(argCount);\n                break;  // fail\n            case 163: if (this.oldPrims) return this.primitiveDirectoryDelete(argCount);\n                break;  // fail\n            // 164: unused\n            case 165:\n            case 166: return this.primitiveIntegerAtAndPut(argCount);\n            case 167: return false; // Processor.yield\n            case 168: return this.primitiveCopyObject(argCount);\n            case 169: if (this.oldPrims) return this.primitiveDirectorySetMacTypeAndCreator(argCount);\n                else return this.pop2andPushBoolIfOK(this.vm.stackValue(1) !== this.vm.stackValue(0)); //new: primitiveNotIdentical\n            // Sound Primitives (170-199)\n            case 170: if (this.oldPrims) return this.namedPrimitive('SoundPlugin', 'primitiveSoundStart', argCount);\n                else return this.primitiveAsCharacter(argCount);\n            case 171: if (this.oldPrims) return this.namedPrimitive('SoundPlugin', 'primitiveSoundStartWithSemaphore', argCount);\n                else return this.popNandPushIfOK(argCount+1, this.stackNonInteger(0).hash); //primitiveImmediateAsInteger\n            case 172: if (this.oldPrims) return this.namedPrimitive('SoundPlugin', 'primitiveSoundStop', argCount);\n                break;  // fail\n            case 173: if (this.oldPrims) return this.namedPrimitive('SoundPlugin', 'primitiveSoundAvailableSpace', argCount);\n                else return this.popNandPushIfOK(argCount+1, this.objectAt(false,false,true)); // slotAt:\n            case 174: if (this.oldPrims) return this.namedPrimitive('SoundPlugin', 'primitiveSoundPlaySamples', argCount);\n                else return this.popNandPushIfOK(argCount+1, this.objectAtPut(false,false,true)); // slotAt:put:\n            case 175: if (this.oldPrims) return this.namedPrimitive('SoundPlugin', 'primitiveSoundPlaySilence', argCount);\n                else return this.popNandPushIfOK(argCount+1, this.behaviorHash(this.stackNonInteger(0))); //primitiveBehaviorHash\n            case 176: if (this.oldPrims) return this.namedPrimitive('SoundGenerationPlugin', 'primWaveTableSoundmixSampleCountintostartingAtpan', argCount);\n                break;  // fail\n            case 177: if (this.oldPrims) return this.namedPrimitive('SoundGenerationPlugin', 'primFMSoundmixSampleCountintostartingAtpan', argCount);\n                return this.popNandPushIfOK(1, this.allInstancesOf(this.stackNonInteger(0)));\n            case 178: if (this.oldPrims) return this.namedPrimitive('SoundGenerationPlugin', 'primPluckedSoundmixSampleCountintostartingAtpan', argCount);\n                break;  // fail\n            case 179: if (this.oldPrims) return this.namedPrimitive('SoundGenerationPlugin', 'primSampledSoundmixSampleCountintostartingAtpan', argCount);\n                break;  // fail\n            case 180: if (this.oldPrims) return this.namedPrimitive('SoundGenerationPlugin', 'primitiveMixFMSound', argCount);\n                break;  // fail\n            case 181: if (this.oldPrims) return this.namedPrimitive('SoundGenerationPlugin', 'primitiveMixPluckedSound', argCount);\n                break;  // fail\n            case 182: if (this.oldPrims) return this.namedPrimitive('SoundGenerationPlugin', 'oldprimSampledSoundmixSampleCountintostartingAtleftVolrightVol', argCount);\n                break;  // fail\n            case 183: if (this.oldPrims) return this.namedPrimitive('SoundGenerationPlugin', 'primitiveApplyReverb', argCount);\n                break;  // fail\n            case 184: if (this.oldPrims) return this.namedPrimitive('SoundGenerationPlugin', 'primitiveMixLoopedSampledSound', argCount);\n                break; // fail\n            case 185: if (this.oldPrims) return this.namedPrimitive('SoundGenerationPlugin', 'primitiveMixSampledSound', argCount);\n                else return this.primitiveExitCriticalSection(argCount);\n            case 186: if (this.oldPrims) break; // unused\n                else return this.primitiveEnterCriticalSection(argCount);\n            case 187: if (this.oldPrims) break; // unused\n                else return this.primitiveTestAndSetOwnershipOfCriticalSection(argCount);\n            case 188: if (this.oldPrims) break; // unused\n                else return this.primitiveExecuteMethodArgsArray(argCount);\n            case 189: if (this.oldPrims) return this.namedPrimitive('SoundPlugin', 'primitiveSoundInsertSamples', argCount);\n                else return this.primitiveExecuteMethod(argCount);\n            case 190: if (this.oldPrims) return this.namedPrimitive('SoundPlugin', 'primitiveSoundStartRecording', argCount);\n            case 191: if (this.oldPrims) return this.namedPrimitive('SoundPlugin', 'primitiveSoundStopRecording', argCount);\n            case 192: if (this.oldPrims) return this.namedPrimitive('SoundPlugin', 'primitiveSoundGetRecordingSampleRate', argCount);\n            case 193: if (this.oldPrims) return this.namedPrimitive('SoundPlugin', 'primitiveSoundRecordSamples', argCount);\n            case 194: if (this.oldPrims) return this.namedPrimitive('SoundPlugin', 'primitiveSoundSetRecordLevel', argCount);\n                break;  // fail 190-194 if fell through\n            case 195: return false; // Context.findNextUnwindContextUpTo:\n            case 196: return false; // Context.terminateTo:\n            case 197: return false; // Context.findNextHandlerContextStarting\n            case 198: return false; // MarkUnwindMethod (must fail)\n            case 199: return false; // MarkHandlerMethod (must fail)\n            // Networking Primitives (200-229)\n            case 200: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveInitializeNetwork', argCount);\n                else return this.primitiveClosureCopyWithCopiedValues(argCount);\n            case 201: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveResolverStartNameLookup', argCount);\n                else return this.primitiveClosureValue(argCount);\n            case 202: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveResolverNameLookupResult', argCount);\n                else return this.primitiveClosureValue(argCount);\n            case 203: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveResolverStartAddressLookup', argCount);\n                else return this.primitiveClosureValue(argCount);\n            case 204: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveResolverAddressLookupResult', argCount);\n                else return this.primitiveClosureValue(argCount);\n            case 205: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveResolverAbortLookup', argCount);\n                else return this.primitiveClosureValue(argCount);\n            case 206: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveResolverLocalAddress', argCount);\n                else return  this.primitiveClosureValueWithArgs(argCount);\n            case 207: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveResolverStatus', argCount);\n            case 208: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveResolverError', argCount);\n            case 209: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveSocketCreate', argCount);\n                break;  // fail 207-209 if fell through\n            case 210: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveSocketDestroy', argCount);\n                else return this.popNandPushIfOK(2, this.objectAt(false,false,false)); // contextAt:\n            case 211: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveSocketConnectionStatus', argCount);\n                else return this.popNandPushIfOK(3, this.objectAtPut(false,false,false)); // contextAt:put:\n            case 212: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveSocketError', argCount);\n                else return this.popNandPushIfOK(1, this.objectSize(false)); // contextSize\n            case 213: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveSocketLocalAddress', argCount);\n            case 214: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveSocketLocalPort', argCount);\n            case 215: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveSocketRemoteAddress', argCount);\n            case 216: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveSocketRemotePort', argCount);\n            case 217: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveSocketConnectToPort', argCount);\n            case 218: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveSocketListenOnPort', argCount);\n            case 219: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveSocketCloseConnection', argCount);\n            case 220: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveSocketAbortConnection', argCount);\n                break;  // fail 212-220 if fell through\n            case 221: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveSocketReceiveDataBufCount', argCount);\n                else return this.primitiveClosureValueNoContextSwitch(argCount);\n            case 222: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveSocketReceiveDataAvailable', argCount);\n                else return this.primitiveClosureValueNoContextSwitch(argCount);\n            case 223: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveSocketSendDataBufCount', argCount);\n            case 224: if (this.oldPrims) return this.namedPrimitive('SocketPlugin', 'primitiveSocketSendDone', argCount);\n                break;  // fail 223-229 if fell through\n            // 225-229: unused\n            // Other Primitives (230-249)\n            case 230: return this.primitiveRelinquishProcessorForMicroseconds(argCount);\n            case 231: return this.primitiveForceDisplayUpdate(argCount);\n            // case 232:  return this.primitiveFormPrint(argCount);\n            case 233: return this.primitiveSetFullScreen(argCount);\n            case 234: if (this.oldPrims) return this.namedPrimitive('MiscPrimitivePlugin', 'primitiveDecompressFromByteArray', argCount);\n            case 235: if (this.oldPrims) return this.namedPrimitive('MiscPrimitivePlugin', 'primitiveCompareString', argCount);\n            case 236: if (this.oldPrims) return this.namedPrimitive('MiscPrimitivePlugin', 'primitiveConvert8BitSigned', argCount);\n            case 237: if (this.oldPrims) return this.namedPrimitive('MiscPrimitivePlugin', 'primitiveCompressToByteArray', argCount);\n            case 238: if (this.oldPrims) return this.namedPrimitive('SerialPlugin', 'primitiveSerialPortOpen', argCount);\n            case 239: if (this.oldPrims) return this.namedPrimitive('SerialPlugin', 'primitiveSerialPortClose', argCount);\n                break;  // fail 234-239 if fell through\n            case 240: if (this.oldPrims) return this.namedPrimitive('SerialPlugin', 'primitiveSerialPortWrite', argCount);\n                else return this.popNandPushIfOK(1, this.microsecondClockUTC());\n            case 241: if (this.oldPrims) return this.namedPrimitive('SerialPlugin', 'primitiveSerialPortRead', argCount);\n                else return this.popNandPushIfOK(1, this.microsecondClockLocal());\n            case 242: if (this.oldPrims) break; // unused\n                else return this.primitiveSignalAtUTCMicroseconds(argCount);\n            case 243: if (this.oldPrims) return this.namedPrimitive('MiscPrimitivePlugin', 'primitiveTranslateStringWithTable', argCount);\n            case 244: if (this.oldPrims) return this.namedPrimitive('MiscPrimitivePlugin', 'primitiveFindFirstInString' , argCount);\n            case 245: if (this.oldPrims) return this.namedPrimitive('MiscPrimitivePlugin', 'primitiveIndexOfAsciiInString', argCount);\n            case 246: if (this.oldPrims) return this.namedPrimitive('MiscPrimitivePlugin', 'primitiveFindSubstring', argCount);\n                break;  // fail 243-246 if fell through\n            // 247: unused\n            case 248: return this.vm.primitiveInvokeObjectAsMethod(argCount, primMethod); // see findSelectorInClass()\n            case 249: return this.primitiveArrayBecome(argCount, false); // one way, opt. copy hash\n            case 254: return this.primitiveVMParameter(argCount);\n        } else switch (index) { // Chrome only optimized up to 128 cases\n            //MIDI Primitives (520-539)\n            case 521: return this.namedPrimitive('MIDIPlugin', 'primitiveMIDIClosePort', argCount);\n            case 522: return this.namedPrimitive('MIDIPlugin', 'primitiveMIDIGetClock', argCount);\n            case 523: return this.namedPrimitive('MIDIPlugin', 'primitiveMIDIGetPortCount', argCount);\n            case 524: return this.namedPrimitive('MIDIPlugin', 'primitiveMIDIGetPortDirectionality', argCount);\n            case 525: return this.namedPrimitive('MIDIPlugin', 'primitiveMIDIGetPortName', argCount);\n            case 526: return this.namedPrimitive('MIDIPlugin', 'primitiveMIDIOpenPort', argCount);\n            case 527: return this.namedPrimitive('MIDIPlugin', 'primitiveMIDIParameterGetOrSet', argCount);\n            case 528: return this.namedPrimitive('MIDIPlugin', 'primitiveMIDIRead', argCount);\n            case 529: return this.namedPrimitive('MIDIPlugin', 'primitiveMIDIWrite', argCount);\n            // 530-539: reserved for extended MIDI primitives\n            // Sound Codec Primitives\n            case 550: return this.namedPrimitive('ADPCMCodecPlugin', 'primitiveDecodeMono', argCount);\n            case 551: return this.namedPrimitive('ADPCMCodecPlugin', 'primitiveDecodeStereo', argCount);\n            case 552: return this.namedPrimitive('ADPCMCodecPlugin', 'primitiveEncodeMono', argCount);\n            case 553: return this.namedPrimitive('ADPCMCodecPlugin', 'primitiveEncodeStereo', argCount);\n            // External primitive support primitives (570-574)\n            // case 570: return this.primitiveFlushExternalPrimitives(argCount);\n            case 571: return this.primitiveUnloadModule(argCount);\n            case 572: return this.primitiveListBuiltinModule(argCount);\n            case 573: return this.primitiveListLoadedModule(argCount);\n        }\n        console.error(\"primitive \" + index + \" not implemented yet\");\n        return false;\n    },\n    namedPrimitive: function(modName, functionName, argCount) {\n        // duplicated in loadFunctionFrom()\n        var mod = modName === \"\" ? this : this.loadedModules[modName];\n        if (mod === undefined) { // null if earlier load failed\n            mod = this.loadModule(modName);\n            this.loadedModules[modName] = mod;\n        }\n        var result = false;\n        if (mod) {\n            this.interpreterProxy.argCount = argCount;\n            var primitive = mod[functionName];\n            if (typeof primitive === \"function\") {\n                result = mod[functionName](argCount);\n            } else if (typeof primitive === \"string\") {\n                // allow late binding for built-ins\n                result = this[primitive](argCount);\n            } else {\n                this.vm.warnOnce(\"missing primitive: \" + modName + \".\" + functionName);\n            }\n        } else {\n            this.vm.warnOnce(\"missing module: \" + modName + \" (\" + functionName + \")\");\n        }\n        if (result === true || result === false) return result;\n        return this.success;\n    },\n    doNamedPrimitive: function(argCount, primMethod) {\n        if (primMethod.pointersSize() < 2) return false;\n        var firstLiteral = primMethod.pointers[1]; // skip method header\n        if (firstLiteral.pointersSize() !== 4) return false;\n        this.primMethod = primMethod;\n        var moduleName = firstLiteral.pointers[0].bytesAsString();\n        var functionName = firstLiteral.pointers[1].bytesAsString();\n        return this.namedPrimitive(moduleName, functionName, argCount);\n    },\n    fakePrimitive: function(prim, retVal, argCount) {\n        // fake a named primitive\n        // prim and retVal need to be curried when used:\n        //  this.fakePrimitive.bind(this, \"Module.primitive\", 42)\n        this.vm.warnOnce(\"faking primitive: \" + prim);\n        if (retVal === undefined) this.vm.popN(argCount);\n        else this.vm.popNandPush(argCount+1, this.makeStObject(retVal));\n        return true;\n    },\n},\n'modules', {\n    loadModule: function(modName) {\n        var mod = Squeak.externalModules[modName] || this.builtinModules[modName];\n        if (!mod) return null;\n        if (this.patchModules[modName])\n            this.patchModule(mod, modName);\n        if (mod.setInterpreter) {\n            if (!mod.setInterpreter(this.interpreterProxy)) {\n                console.log(\"Wrong interpreter proxy version: \" + modName);\n                return null;\n            }\n        }\n        var initFunc = mod.initialiseModule;\n        if (typeof initFunc === 'function') {\n            mod.initialiseModule();\n        } else if (typeof initFunc === 'string') {\n            // allow late binding for built-ins\n            this[initFunc]();\n        }\n        if (this.interpreterProxy.failed()) {\n            console.log(\"Module initialization failed: \" + modName);\n            return null;\n        }\n        console.log(\"Loaded module: \" + modName);\n        return mod;\n    },\n    patchModule: function(mod, modName) {\n        var patch = this.patchModules[modName];\n        for (var key in patch)\n            mod[key] = patch[key];\n    },\n    unloadModule: function(modName) {\n        var mod = this.loadedModules[modName];\n        if (!modName || !mod|| mod === this) return null;\n        delete this.loadedModules[modName];\n        var unloadFunc = mod.unloadModule;\n        if (typeof unloadFunc === 'function') {\n            mod.unloadModule(this);\n        } else if (typeof unloadFunc === 'string') {\n            // allow late binding for built-ins\n            this[unloadFunc](this);\n        }\n        console.log(\"Unloaded module: \" + modName);\n        return mod;\n    },\n    loadFunctionFrom: function(functionName, modName) {\n        // copy of namedPrimitive() returning the bound function instead of calling it\n        var mod = modName === \"\" ? this : this.loadedModules[modName];\n        if (mod === undefined) { // null if earlier load failed\n            mod = this.loadModule(modName);\n            this.loadedModules[modName] = mod;\n        }\n        if (!mod) return null;\n        var func = mod[functionName];\n        if (typeof func === \"function\") {\n            return func.bind(mod);\n        } else if (typeof func === \"string\") {\n            return (this[func]).bind(this);\n        }\n        this.vm.warnOnce(\"missing primitive: \" + modName + \".\" + functionName);\n        return null;\n    },\n    primitiveUnloadModule: function(argCount) {\n        var moduleName = this.stackNonInteger(0).bytesAsString();\n        if (!moduleName) return false;\n        this.unloadModule(moduleName);\n        return this.popNIfOK(argCount);\n    },\n    primitiveListBuiltinModule: function(argCount) {\n        var index = this.stackInteger(0) - 1;\n        if (!this.success) return false;\n        var moduleNames = Object.keys(this.builtinModules);\n        return this.popNandPushIfOK(argCount + 1, this.makeStObject(moduleNames[index]));\n    },\n    primitiveListLoadedModule: function(argCount) {\n        var index = this.stackInteger(0) - 1;\n        if (!this.success) return false;\n        var moduleNames = [];\n        for (var key in this.loadedModules) {\n            var module = this.loadedModules[key];\n            if (module) {\n                var moduleName = module.getModuleName ? module.getModuleName() : key;\n                moduleNames.push(moduleName);\n            }\n        }\n        return this.popNandPushIfOK(argCount + 1, this.makeStObject(moduleNames[index]));\n    },\n},\n'stack access', {\n    popNIfOK: function(nToPop) {\n        if (!this.success) return false;\n        this.vm.popN(nToPop);\n        return true;\n    },\n    pop2andPushBoolIfOK: function(bool) {\n        this.vm.success = this.success;\n        return this.vm.pop2AndPushBoolResult(bool);\n    },\n    popNandPushIfOK: function(nToPop, returnValue) {\n        if (!this.success || returnValue == null) return false;\n        this.vm.popNandPush(nToPop, returnValue);\n        return true;\n    },\n    popNandPushIntIfOK: function(nToPop, returnValue) {\n        if (!this.success || !this.vm.canBeSmallInt(returnValue)) return false;\n        return this.popNandPushIfOK(nToPop, returnValue);\n    },\n    popNandPushFloatIfOK: function(nToPop, returnValue) {\n        if (!this.success) return false;\n        return this.popNandPushIfOK(nToPop, this.makeFloat(returnValue));\n    },\n    stackNonInteger: function(nDeep) {\n        return this.checkNonInteger(this.vm.stackValue(nDeep));\n    },\n    stackInteger: function(nDeep) {\n        return this.checkSmallInt(this.vm.stackValue(nDeep));\n    },\n    stackPos32BitInt: function(nDeep) {\n        return this.positive32BitValueOf(this.vm.stackValue(nDeep));\n    },\n    pos32BitIntFor: function(signed32) {\n        // Return the 32-bit quantity as an unsigned 32-bit integer\n        if (signed32 >= 0 && signed32 <= Squeak.MaxSmallInt) return signed32;\n        var lgIntClass = this.vm.specialObjects[Squeak.splOb_ClassLargePositiveInteger],\n            lgIntObj = this.vm.instantiateClass(lgIntClass, 4),\n            bytes = lgIntObj.bytes;\n        for (var i=0; i<4; i++)\n            bytes[i] = (signed32>>>(8*i)) & 255;\n        return lgIntObj;\n    },\n    pos64BitIntFor: function(longlong) {\n        // Return the quantity as an unsigned 64-bit integer\n        if (longlong <= 0xFFFFFFFF) return this.pos32BitIntFor(longlong);\n        var sz = longlong <= 0xFFFFFFFFFF ? 5 :\n                 longlong <= 0xFFFFFFFFFFFF ? 6 :\n                 longlong <= 0xFFFFFFFFFFFFFF ? 7 : 8;\n        var lgIntClass = this.vm.specialObjects[Squeak.splOb_ClassLargePositiveInteger],\n            lgIntObj = this.vm.instantiateClass(lgIntClass, sz),\n            bytes = lgIntObj.bytes;\n        for (var i = 0; i < sz; i++) {\n            bytes[i] = longlong & 255;\n            longlong /= 256;\n        }\n        return lgIntObj;\n    },\n    stackSigned32BitInt: function(nDeep) {\n        var stackVal = this.vm.stackValue(nDeep);\n        if (typeof stackVal === \"number\") {   // SmallInteger\n            return stackVal;\n        }\n        if (stackVal.bytesSize() !== 4) {\n            this.success = false;\n            return 0;\n        }\n        var bytes = stackVal.bytes,\n            value = 0;\n        for (var i = 0, f = 1; i < 4; i++, f *= 256)\n            value += bytes[i] * f;\n        if (this.isA(stackVal, Squeak.splOb_ClassLargePositiveInteger) && value <= 0x7FFFFFFF)\n            return value;\n        if (this.isA(stackVal, Squeak.splOb_ClassLargeNegativeInteger) && -value >= -0x80000000)\n            return -value;\n        this.success = false;\n        return 0;\n    },\n    signed32BitIntegerFor: function(signed32) {\n        // Return the 32-bit quantity as a signed 32-bit integer\n        if (signed32 >= Squeak.MinSmallInt && signed32 <= Squeak.MaxSmallInt) return signed32;\n        var negative = signed32 < 0,\n            unsigned = negative ? -signed32 : signed32,\n            lgIntClass = negative ? Squeak.splOb_ClassLargeNegativeInteger : Squeak.splOb_ClassLargePositiveInteger,\n            lgIntObj = this.vm.instantiateClass(this.vm.specialObjects[lgIntClass], 4),\n            bytes = lgIntObj.bytes;\n        for (var i=0; i<4; i++)\n            bytes[i] = (unsigned>>>(8*i)) & 255;\n        return lgIntObj;\n    },\n    stackFloat: function(nDeep) {\n        return this.checkFloat(this.vm.stackValue(nDeep));\n    },\n    stackBoolean: function(nDeep) {\n        return this.checkBoolean(this.vm.stackValue(nDeep));\n    },\n    stackSigned53BitInt:function(nDeep) {\n        var stackVal = this.vm.stackValue(nDeep);\n        if (typeof stackVal === \"number\") {   // SmallInteger\n            return stackVal;\n        }\n        var n = stackVal.bytesSize();\n        if (n <= 7) {\n            var bytes = stackVal.bytes,\n                value = 0;\n            for (var i = 0, f = 1; i < n; i++, f *= 256)\n                value += bytes[i] * f;\n            if (value < 9007199254740992) {\n                if (this.isA(stackVal, Squeak.splOb_ClassLargePositiveInteger))\n                    return value;\n                if (this.isA(stackVal, Squeak.splOb_ClassLargeNegativeInteger))\n                    return -value;\n            }\n        }\n        this.success = false;\n        return 0;\n    },\n},\n'numbers', {\n    doBitAnd: function() {\n        var rcvr = this.stackPos32BitInt(1);\n        var arg = this.stackPos32BitInt(0);\n        if (!this.success) return 0;\n        return this.pos32BitIntFor(rcvr & arg);\n    },\n    doBitOr: function() {\n        var rcvr = this.stackPos32BitInt(1);\n        var arg = this.stackPos32BitInt(0);\n        if (!this.success) return 0;\n        return this.pos32BitIntFor(rcvr | arg);\n    },\n    doBitXor: function() {\n        var rcvr = this.stackPos32BitInt(1);\n        var arg = this.stackPos32BitInt(0);\n        if (!this.success) return 0;\n        return this.pos32BitIntFor(rcvr ^ arg);\n    },\n    doBitShift: function() {\n        var rcvr = this.stackPos32BitInt(1);\n        var arg = this.stackInteger(0);\n        if (!this.success) return 0;\n        var result = this.vm.safeShift(rcvr, arg); // returns negative result if failed\n        if (result > 0)\n            return this.pos32BitIntFor(this.vm.safeShift(rcvr, arg));\n        this.success = false;\n        return 0;\n    },\n    safeFDiv: function(dividend, divisor) {\n        if (divisor === 0.0) {\n            this.success = false;\n            return 1.0;\n        }\n        return dividend / divisor;\n    },\n    floatAsSmallInt: function(float) {\n        var truncated = float >= 0 ? Math.floor(float) : Math.ceil(float);\n        return this.ensureSmallInt(truncated);\n    },\n    frexp_exponent: function(value) {\n        // frexp separates a float into its mantissa and exponent\n        if (value == 0.0) return 0;     // zero is special\n        var data = new DataView(new ArrayBuffer(8));\n        data.setFloat64(0, value);      // for accessing IEEE-754 exponent bits\n        var bits = (data.getUint32(0) >>> 20) & 0x7FF;\n        if (bits === 0) { // we have a subnormal float (actual zero was handled above)\n            // make it normal by multiplying a large number\n            data.setFloat64(0, value * Math.pow(2, 64));\n            // access its exponent bits, and subtract the large number's exponent\n            bits = ((data.getUint32(0) >>> 20) & 0x7FF) - 64;\n        }\n        var exponent = bits - 1022;                 // apply bias\n        // mantissa = this.ldexp(value, -exponent)  // not needed for Squeak\n        return exponent;\n    },\n    ldexp: function(mantissa, exponent) {\n        // construct a float from mantissa and exponent\n        return exponent > 1023 // avoid multiplying by infinity\n            ? mantissa * Math.pow(2, 1023) * Math.pow(2, exponent - 1023)\n            : exponent < -1074 // avoid multiplying by zero\n            ? mantissa * Math.pow(2, -1074) * Math.pow(2, exponent + 1074)\n            : mantissa * Math.pow(2, exponent);\n    },\n    primitiveLessThanLargeIntegers: function() {\n        return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1) < this.stackSigned53BitInt(0));\n    },\n    primitiveGreaterThanLargeIntegers: function() {\n        return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1) > this.stackSigned53BitInt(0));\n    },\n    primitiveLessOrEqualLargeIntegers: function() {\n        return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1) <= this.stackSigned53BitInt(0));\n    },\n    primitiveGreaterOrEqualLargeIntegers: function() {\n        return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1) >= this.stackSigned53BitInt(0));\n    },\n    primitiveEqualLargeIntegers: function() {\n        return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1) === this.stackSigned53BitInt(0));\n    },\n    primitiveNotEqualLargeIntegers: function() {\n        return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1) !== this.stackSigned53BitInt(0));\n    },\n},\n'utils', {\n    floatOrInt: function(obj) {\n        if (obj.isFloat) return obj.float;\n        if (typeof obj === \"number\") return obj;  // SmallInteger\n        return 0;\n    },\n    positive32BitValueOf: function(obj) {\n        if (typeof obj === \"number\") { // SmallInteger\n            if (obj >= 0)\n                return obj;\n            this.success = false;\n            return 0;\n        }\n        if (!this.isA(obj, Squeak.splOb_ClassLargePositiveInteger) || obj.bytesSize() !== 4) {\n            this.success = false;\n            return 0;\n        }\n        var bytes = obj.bytes,\n            value = 0;\n        for (var i = 0, f = 1; i < 4; i++, f *= 256)\n            value += bytes[i] * f;\n        return value;\n    },\n    checkFloat: function(maybeFloat) { // returns a number and sets success\n        if (maybeFloat.isFloat)\n            return maybeFloat.float;\n        if (typeof maybeFloat === \"number\")  // SmallInteger\n            return maybeFloat;\n        this.success = false;\n        return 0.0;\n    },\n    checkSmallInt: function(maybeSmall) { // returns an int and sets success\n        if (typeof maybeSmall === \"number\")\n            return maybeSmall;\n        this.success = false;\n        return 0;\n    },\n    checkNonInteger: function(obj) { // returns a SqObj and sets success\n        if (typeof obj !== \"number\")\n            return obj;\n        this.success = false;\n        return this.vm.nilObj;\n    },\n    checkBoolean: function(obj) { // returns true/false and sets success\n        if (obj.isTrue) return true;\n        if (obj.isFalse) return false;\n        return this.success = false;\n    },\n    indexableSize: function(obj) {\n        if (typeof obj === \"number\") return -1; // -1 means not indexable\n        return obj.indexableSize(this);\n    },\n    isA: function(obj, knownClass) {\n        return obj.sqClass === this.vm.specialObjects[knownClass];\n    },\n    isKindOf: function(obj, knownClass) {\n        var classOrSuper = obj.sqClass;\n        var theClass = this.vm.specialObjects[knownClass];\n        while (!classOrSuper.isNil) {\n            if (classOrSuper === theClass) return true;\n            classOrSuper = classOrSuper.pointers[Squeak.Class_superclass];\n        }\n        return false;\n    },\n    isAssociation: function(obj) {\n        return typeof obj !== \"number\" && obj.pointersSize() == 2;\n    },\n    ensureSmallInt: function(number) {\n        if (number === (number|0) && this.vm.canBeSmallInt(number))\n            return number;\n        this.success = false;\n        return 0;\n    },\n    charFromInt: function(ascii) {\n        var charTable = this.vm.specialObjects[Squeak.splOb_CharacterTable];\n        var char = charTable.pointers[ascii];\n        if (char) return char;\n        var charClass = this.vm.specialObjects[Squeak.splOb_ClassCharacter];\n        char = this.vm.instantiateClass(charClass, 0);\n        char.pointers[0] = ascii;\n        return char;\n},\n    charFromIntSpur: function(unicode) {\n        return this.vm.image.getCharacter(unicode);\n    },\n    charToInt: function(obj) {\n        return obj.pointers[0];\n    },\n    charToIntSpur: function(obj) {\n        return obj.hash;\n    },\n    makeFloat: function(value) {\n        var floatClass = this.vm.specialObjects[Squeak.splOb_ClassFloat];\n        var newFloat = this.vm.instantiateClass(floatClass, 2);\n        newFloat.float = value;\n        return newFloat;\n    },\n    makeLargeIfNeeded: function(integer) {\n        return this.vm.canBeSmallInt(integer) ? integer : this.makeLargeInt(integer);\n    },\n    makeLargeInt: function(integer) {\n        if (integer < 0) throw Error(\"negative large ints not implemented yet\");\n        if (integer > 0xFFFFFFFF) throw Error(\"large large ints not implemented yet\");\n        return this.pos32BitIntFor(integer);\n    },\n    makePointWithXandY: function(x, y) {\n        var pointClass = this.vm.specialObjects[Squeak.splOb_ClassPoint];\n        var newPoint = this.vm.instantiateClass(pointClass, 0);\n        newPoint.pointers[Squeak.Point_x] = x;\n        newPoint.pointers[Squeak.Point_y] = y;\n        return newPoint;\n    },\n    makeStArray: function(jsArray, proxyClass) {\n        var array = this.vm.instantiateClass(this.vm.specialObjects[Squeak.splOb_ClassArray], jsArray.length);\n        for (var i = 0; i < jsArray.length; i++)\n            array.pointers[i] = this.makeStObject(jsArray[i], proxyClass);\n        return array;\n    },\n    makeStString: function(jsString) {\n        var bytes = [];\n        for (var i = 0; i < jsString.length; ++i)\n            bytes.push(jsString.charCodeAt(i) & 0xFF);\n        var stString = this.vm.instantiateClass(this.vm.specialObjects[Squeak.splOb_ClassString], bytes.length);\n        stString.bytes = bytes;\n        return stString;\n    },\n    makeStObject: function(obj, proxyClass) {\n        if (obj === undefined || obj === null) return this.vm.nilObj;\n        if (obj === true) return this.vm.trueObj;\n        if (obj === false) return this.vm.falseObj;\n        if (obj.sqClass) return obj;\n        if (typeof obj === \"number\")\n            if (obj === (obj|0)) return this.makeLargeIfNeeded(obj);\n            else return this.makeFloat(obj);\n        if (proxyClass) {   // wrap in JS proxy instance\n            var stObj = this.vm.instantiateClass(proxyClass, 0);\n            stObj.jsObject = obj;\n            return stObj;\n        }\n\t// A direct test of the buffer's constructor doesn't work on Safari 10.0.\n        if (typeof obj === \"string\" || obj.constructor.name === \"Uint8Array\") return this.makeStString(obj);\n        if (obj.constructor.name === \"Array\") return this.makeStArray(obj);\n        throw Error(\"cannot make smalltalk object\");\n    },\n    pointsTo: function(rcvr, arg) {\n        if (!rcvr.pointers) return false;\n        return rcvr.pointers.indexOf(arg) >= 0;\n    },\n    asUint8Array: function(buffer) {\n\t// A direct test of the buffer's constructor doesn't work on Safari 10.0.\n        if (buffer.constructor.name === \"Uint8Array\") return buffer;\n        if (buffer.constructor.name === \"ArrayBuffer\") return new Uint8Array(buffer);\n        if (typeof buffer === \"string\") {\n            var array = new Uint8Array(buffer.length);\n            for (var i = 0; i < buffer.length; i++)\n                array[i] = buffer.charCodeAt(i);\n            return array;\n        }\n        throw Error(\"unknown buffer type\");\n    },\n    filenameToSqueak: function(unixpath) {\n        var slash = unixpath[0] !== \"/\" ? \"/\" : \"\",\n            filepath = \"/SqueakJS\" + slash + unixpath;                      // add SqueakJS\n        if (this.emulateMac)\n            filepath = (\"Macintosh HD\" + filepath)                          // add Mac volume\n                .replace(/\\//g, \"\").replace(/:/g, \"/\").replace(//g, \":\"); // substitute : for /\n        return filepath;\n    },\n    filenameFromSqueak: function(filepath) {\n        var unixpath = !this.emulateMac ? filepath :\n            filepath.replace(/^[^:]*:/, \":\")                            // remove volume\n            .replace(/\\//g, \"\").replace(/:/g, \"/\").replace(//g, \":\"); // substitute : for /\n        unixpath = unixpath.replace(/^\\/*SqueakJS\\/?/, \"/\");            // strip SqueakJS\n        return unixpath;\n    },\n},\n'indexing', {\n    objectAt: function(cameFromBytecode, convertChars, includeInstVars) {\n        //Returns result of at: or sets success false\n        var array = this.stackNonInteger(1);\n        var index = this.stackPos32BitInt(0); //note non-int returns zero\n        if (!this.success) return array;\n        var info;\n        if (cameFromBytecode) {// fast entry checks cache\n            info = this.atCache[array.hash & this.atCacheMask];\n            if (info.array !== array) {this.success = false; return array;}\n        } else {// slow entry installs in cache if appropriate\n            if (array.isFloat) { // present float as word array\n                var floatData = array.floatData();\n                if (index==1) return this.pos32BitIntFor(floatData.getUint32(0, false));\n                if (index==2) return this.pos32BitIntFor(floatData.getUint32(4, false));\n                this.success = false; return array;\n            }\n            info = this.makeAtCacheInfo(this.atCache, this.vm.specialSelectors[32], array, convertChars, includeInstVars);\n        }\n        if (index < 1 || index > info.size) {this.success = false; return array;}\n        if (includeInstVars)  //pointers...   instVarAt and objectAt\n            return array.pointers[index-1];\n        if (array.isPointers())   //pointers...   normal at:\n            return array.pointers[index-1+info.ivarOffset];\n        if (array.isWords()) // words...\n            if (info.convertChars) return this.charFromInt(array.words[index-1] & 0x3FFFFFFF);\n            else return this.pos32BitIntFor(array.words[index-1]);\n        if (array.isBytes()) // bytes...\n            if (info.convertChars) return this.charFromInt(array.bytes[index-1] & 0xFF);\n            else return array.bytes[index-1] & 0xFF;\n        // methods must simulate Squeak's method indexing\n        var offset = array.pointersSize() * 4;\n        if (index-1-offset < 0) {this.success = false; return array;} //reading lits as bytes\n        return array.bytes[index-1-offset] & 0xFF;\n    },\n    objectAtPut: function(cameFromBytecode, convertChars, includeInstVars) {\n        //Returns result of at:put: or sets success false\n        var array = this.stackNonInteger(2);\n        var index = this.stackPos32BitInt(1); //note non-int returns zero\n        if (!this.success) return array;\n        var info;\n        if (cameFromBytecode) {// fast entry checks cache\n            info = this.atPutCache[array.hash & this.atCacheMask];\n            if (info.array !== array) {this.success = false; return array;}\n        } else {// slow entry installs in cache if appropriate\n            if (array.isFloat) { // present float as word array\n                var wordToPut = this.stackPos32BitInt(0);\n                if (this.success && (index == 1 || index == 2)) {\n                    var floatData = array.floatData();\n                    floatData.setUint32(index == 1 ? 0 : 4, wordToPut, false);\n                    array.float = floatData.getFloat64(0);\n                } else this.success = false;\n                return this.vm.stackValue(0);\n            }\n            info = this.makeAtCacheInfo(this.atPutCache, this.vm.specialSelectors[34], array, convertChars, includeInstVars);\n        }\n        if (index<1 || index>info.size) {this.success = false; return array;}\n        var objToPut = this.vm.stackValue(0);\n        if (includeInstVars)  // pointers...   instVarAtPut and objectAtPut\n            return array.pointers[index-1] = objToPut; //eg, objectAt:\n        if (array.isPointers())  // pointers...   normal atPut\n            return array.pointers[index-1+info.ivarOffset] = objToPut;\n        var intToPut;\n        if (array.isWords()) {  // words...\n            if (convertChars) {\n                // put a character...\n                if (objToPut.sqClass !== this.vm.specialObjects[Squeak.splOb_ClassCharacter])\n                    {this.success = false; return objToPut;}\n                intToPut = this.charToInt(objToPut);\n                if (typeof intToPut !== \"number\") {this.success = false; return objToPut;}\n            } else {\n                intToPut = this.stackPos32BitInt(0);\n            }\n            if (this.success) array.words[index-1] = intToPut;\n            return objToPut;\n        }\n        // bytes...\n        if (convertChars) {\n            // put a character...\n            if (objToPut.sqClass !== this.vm.specialObjects[Squeak.splOb_ClassCharacter])\n                {this.success = false; return objToPut;}\n            intToPut = this.charToInt(objToPut);\n            if (typeof intToPut !== \"number\") {this.success = false; return objToPut;}\n        } else { // put a byte...\n            if (typeof objToPut !== \"number\") {this.success = false; return objToPut;}\n            intToPut = objToPut;\n        }\n        if (intToPut<0 || intToPut>255) {this.success = false; return objToPut;}\n        if (array.isBytes())  // bytes...\n            return array.bytes[index-1] = intToPut;\n        // methods must simulate Squeak's method indexing\n        var offset = array.pointersSize() * 4;\n        if (index-1-offset < 0) {this.success = false; return array;} //writing lits as bytes\n        array.bytes[index-1-offset] = intToPut;\n        return objToPut;\n    },\n    objectSize: function(cameFromBytecode) {\n        var rcvr = this.vm.stackValue(0),\n            size = -1;\n        if (cameFromBytecode) {\n            // must only handle classes with size == basicSize, fail otherwise\n            if (rcvr.sqClass === this.vm.specialObjects[Squeak.splOb_ClassArray]) {\n                size = rcvr.pointersSize();\n            } else if (rcvr.sqClass === this.vm.specialObjects[Squeak.splOb_ClassString]) {\n                size = rcvr.bytesSize();\n            }\n        } else { // basicSize\n            size = this.indexableSize(rcvr);\n        }\n        if (size === -1) {this.success = false; return -1}; //not indexable\n        return this.pos32BitIntFor(size);\n    },\n    initAtCache: function() {\n        // The purpose of the at-cache is to allow fast (bytecode) access to at/atput code\n        // without having to check whether this object has overridden at, etc.\n        this.atCacheSize = 32; // must be power of 2\n        this.atCacheMask = this.atCacheSize - 1; //...so this is a mask\n        this.atCache = [];\n        this.atPutCache = [];\n        this.nonCachedInfo = {};\n        for (var i= 0; i < this.atCacheSize; i++) {\n            this.atCache.push({});\n            this.atPutCache.push({});\n        }\n    },\n    clearAtCache: function() { //clear at-cache pointers (prior to GC)\n        this.nonCachedInfo.array = null;\n        for (var i= 0; i < this.atCacheSize; i++) {\n            this.atCache[i].array = null;\n            this.atPutCache[i].array = null;\n        }\n    },\n    makeAtCacheInfo: function(atOrPutCache, atOrPutSelector, array, convertChars, includeInstVars) {\n        //Make up an info object and store it in the atCache or the atPutCache.\n        //If it's not cacheable (not a non-super send of at: or at:put:)\n        //then return the info in nonCachedInfo.\n        //Note that info for objectAt (includeInstVars) will have\n        //a zero ivarOffset, and a size that includes the extra instVars\n        var info;\n        var cacheable =\n            (this.vm.verifyAtSelector === atOrPutSelector)         //is at or atPut\n            && (this.vm.verifyAtClass === array.sqClass)           //not a super send\n            && !this.vm.isContext(array);                          //not a context (size can change)\n        info = cacheable ? atOrPutCache[array.hash & this.atCacheMask] : this.nonCachedInfo;\n        info.array = array;\n        info.convertChars = convertChars;\n        if (includeInstVars) {\n            info.size = array.instSize() + Math.max(0, array.indexableSize(this));\n            info.ivarOffset = 0;\n        } else {\n            info.size = array.indexableSize(this);\n            info.ivarOffset = array.isPointers() ? array.instSize() : 0;\n        }\n        return info;\n    },\n},\n'basic',{\n    instantiateClass: function(clsObj, indexableSize) {\n        if (indexableSize * 4 > this.vm.image.bytesLeft()) {\n            // we're not really out of memory, we have no idea how much memory is available\n            // but we need to stop runaway allocations\n            console.warn(\"squeak: out of memory\");\n            this.success = false;\n            return null;\n        } else {\n            return this.vm.instantiateClass(clsObj, indexableSize);\n        }\n    },\n    someObject: function() {\n        return this.vm.image.firstOldObject;\n    },\n    nextObject: function(obj) {\n        return this.vm.image.objectAfter(obj) || 0;\n    },\n    someInstanceOf: function(clsObj) {\n        var someInstance = this.vm.image.someInstanceOf(clsObj);\n        if (someInstance) return someInstance;\n        this.success = false;\n        return 0;\n    },\n    nextInstanceAfter: function(obj) {\n        var nextInstance = this.vm.image.nextInstanceAfter(obj);\n        if (nextInstance) return nextInstance;\n        this.success = false;\n        return 0;\n    },\n    allInstancesOf: function(clsObj) {\n        var instances = this.vm.image.allInstancesOf(clsObj);\n        var array = this.vm.instantiateClass(this.vm.specialObjects[Squeak.splOb_ClassArray], instances.length);\n        array.pointers = instances;\n        return array;\n    },\n    identityHash: function(obj) {\n        return obj.hash;\n    },\n    identityHashSpur: function(obj) {\n        var hash = obj.hash;\n        if (hash > 0) return hash;\n        return obj.hash = this.newObjectHash();\n    },\n    behaviorHash: function(obj) {\n        var hash = obj.hash;\n        if (hash > 0) return hash;\n        return this.vm.image.enterIntoClassTable(obj);\n    },\n    newObjectHash: function(obj) {\n        return Math.floor(Math.random() * 0x3FFFFFFE) + 1;\n    },\n    primitiveAsCharacter: function(argCount) {\n        var unicode = this.stackInteger(0);\n        if (unicode < 0 || unicode > 0x3FFFFFFF) return false;\n        var char = this.charFromInt(unicode);\n        if (!char) return false;\n        return this.popNandPushIfOK(argCount + 1, char);\n    },\n    primitiveFullGC: function(argCount) {\n        this.vm.image.fullGC(\"primitive\");\n        var bytes = this.vm.image.bytesLeft();\n        return this.popNandPushIfOK(1, this.makeLargeIfNeeded(bytes));\n    },\n    primitiveMakePoint: function(argCount, checkNumbers) {\n        var x = this.vm.stackValue(1);\n        var y = this.vm.stackValue(0);\n        if (checkNumbers) {\n            this.checkFloat(x);\n            this.checkFloat(y);\n            if (!this.success) return false;\n        }\n        this.vm.popNandPush(1+argCount, this.makePointWithXandY(x, y));\n        return true;\n    },\n    primitiveStoreStackp: function(argCount) {\n        var ctxt = this.stackNonInteger(1),\n            newStackp = this.stackInteger(0);\n        if (!this.success || newStackp < 0 || this.vm.decodeSqueakSP(newStackp) >= ctxt.pointers.length)\n            return false;\n        var stackp = ctxt.pointers[Squeak.Context_stackPointer];\n        while (stackp < newStackp)\n            ctxt.pointers[this.vm.decodeSqueakSP(++stackp)] = this.vm.nilObj;\n        ctxt.pointers[Squeak.Context_stackPointer] = newStackp;\n        this.vm.popN(argCount);\n        return true;\n    },\n    primitiveChangeClass: function(argCount) {\n        if (argCount > 2) return false;\n        var rcvr = this.stackNonInteger(1),\n            arg = this.stackNonInteger(0);\n        if (!this.success) return false;\n        if (!rcvr.sameShapeAs(arg)) return false;\n        rcvr.sqClass = arg.sqClass;\n        return this.popNIfOK(argCount);\n    },\n    primitiveAdoptInstance: function(argCount) {\n        if (argCount > 2) return false;\n        var cls = this.stackNonInteger(1),\n            obj = this.stackNonInteger(0);\n        if (!this.success) return false;\n        if (!cls.classSameShapeAs(obj)) return false;\n        obj.sqClass = cls;\n        return this.popNIfOK(argCount);\n    },\n    primitiveDoPrimitiveWithArgs: function(argCount) {\n        var argumentArray = this.stackNonInteger(0),\n            primIdx = this.stackInteger(1);\n        if (!this.success) return false;\n        var arraySize = argumentArray.pointersSize(),\n            cntxSize = this.vm.activeContext.pointersSize();\n        if (this.vm.sp + arraySize >= cntxSize) return false;\n        // Pop primIndex and argArray, then push args in place...\n        this.vm.popN(2);\n        for (var i = 0; i < arraySize; i++)\n            this.vm.push(argumentArray.pointers[i]);\n        // Run the primitive\n        if (this.vm.tryPrimitive(primIdx, arraySize))\n            return true;\n        // Primitive failed, restore state for failure code\n        this.vm.popN(arraySize);\n        this.vm.push(primIdx);\n        this.vm.push(argumentArray);\n        return false;\n    },\n    primitiveShortAtAndPut: function(argCount) {\n        var rcvr = this.stackNonInteger(argCount),\n            index = this.stackInteger(argCount-1) - 1, // make zero-based\n            array = rcvr.wordsAsInt16Array();\n        if (!this.success || !array || index < 0 || index >= array.length)\n            return false;\n        var value;\n        if (argCount < 2) { // shortAt:\n            value = array[index];\n        } else { // shortAt:put:\n            value = this.stackInteger(0);\n            if (value < -32768 || value > 32767)\n                return false;\n            array[index] = value;\n        }\n        this.popNandPushIfOK(argCount+1, value);\n        return true;\n    },\n    primitiveIntegerAtAndPut:  function(argCount) {\n        var rcvr = this.stackNonInteger(argCount),\n            index = this.stackInteger(argCount-1) - 1, // make zero-based\n            array = rcvr.wordsAsInt32Array();\n        if (!this.success || !array || index < 0 || index >= array.length)\n            return false;\n        var value;\n        if (argCount < 2) { // integerAt:\n            value = this.signed32BitIntegerFor(array[index]);\n        } else { // integerAt:put:\n            value = this.stackSigned32BitInt(0);\n            if (!this.success)\n                return false;\n            array[index] = value;\n        }\n        this.popNandPushIfOK(argCount+1, value);\n        return true;\n    },\n    primitiveConstantFill:  function(argCount) {\n        var rcvr = this.stackNonInteger(1),\n            value = this.stackPos32BitInt(0);\n        if (!this.success || !rcvr.isWordsOrBytes())\n            return false;\n        var array = rcvr.words || rcvr.bytes;\n        if (array) {\n            if (array === rcvr.bytes && value > 255)\n                return false;\n            for (var i = 0; i < array.length; i++)\n                array[i] = value;\n        }\n        this.vm.popN(argCount);\n        return true;\n    },\n    primitiveNewMethod: function(argCount) {\n        var header = this.stackInteger(0);\n        var bytecodeCount = this.stackInteger(1);\n        if (!this.success) return 0;\n        var method = this.vm.instantiateClass(this.vm.stackValue(2), bytecodeCount);\n        method.pointers = [header];\n        var litCount = method.methodNumLits();\n        for (var i = 0; i < litCount; i++)\n            method.pointers.push(this.vm.nilObj);\n        this.vm.popNandPush(1+argCount, method);\n        if (this.vm.breakOnNewMethod)               // break on doit\n            this.vm.breakOnMethod = method;\n        return true;\n    },\n    primitiveExecuteMethodArgsArray: function(argCount) {\n        // receiver, argsArray, then method are on top of stack.  Execute method with\n        // receiver and args.\n        var methodObj = this.stackNonInteger(0),\n            argsArray = this.stackNonInteger(1),\n            receiver = this.vm.stackValue(2);\n        // Allow for up to two extra arguments (e.g. for mirror primitives).\n        if (!this.success || !methodObj.isMethod() || argCount > 4) return false;\n        var numArgs = methodObj.methodNumArgs();\n        if (numArgs !== argsArray.pointersSize()) return false;\n        // drop all args, push receiver, and new arguments\n        this.vm.popNandPush(argCount+1, receiver);\n        for (var i = 0; i < numArgs; i++)\n            this.vm.push(argsArray.pointers[i]);\n        this.vm.executeNewMethod(receiver, methodObj, numArgs, methodObj.methodPrimitiveIndex(), null, null);\n        return true;\n    },\n    primitiveArrayBecome: function(argCount, doBothWays) {\n        var rcvr = this.stackNonInteger(argCount),\n            arg = this.stackNonInteger(argCount-1),\n            copyHash = argCount > 1 ? this.stackBoolean(argCount-2) : true;\n        if (!this.success) return false;\n        this.success = this.vm.image.bulkBecome(rcvr.pointers, arg.pointers, doBothWays, copyHash);\n        return this.popNIfOK(argCount);\n    },\n    doStringReplace: function() {\n        var dst = this.stackNonInteger(4);\n        var dstPos = this.stackInteger(3) - 1;\n        var count = this.stackInteger(2) - dstPos;\n        var src = this.stackNonInteger(1);\n        var srcPos = this.stackInteger(0) - 1;\n        if (!this.success) return dst; //some integer not right\n        if (!src.sameFormatAs(dst)) {this.success = false; return dst;} //incompatible formats\n        if (src.isPointers()) {//pointer type objects\n            var totalLength = src.pointersSize();\n            var srcInstSize = src.instSize();\n            srcPos += srcInstSize;\n            if ((srcPos < 0) || (srcPos + count) > totalLength)\n                {this.success = false; return dst;} //would go out of bounds\n            totalLength = dst.pointersSize();\n            var dstInstSize= dst.instSize();\n            dstPos += dstInstSize;\n            if ((dstPos < 0) || (dstPos + count) > totalLength)\n                {this.success= false; return dst;} //would go out of bounds\n            for (var i = 0; i < count; i++)\n                dst.pointers[dstPos + i] = src.pointers[srcPos + i];\n            return dst;\n        } else if (src.isWords()) { //words type objects\n            var totalLength = src.wordsSize();\n            if ((srcPos < 0) || (srcPos + count) > totalLength)\n                {this.success = false; return dst;} //would go out of bounds\n            totalLength = dst.wordsSize();\n            if ((dstPos < 0) || (dstPos + count) > totalLength)\n                {this.success = false; return dst;} //would go out of bounds\n            for (var i = 0; i < count; i++)\n                dst.words[dstPos + i] = src.words[srcPos + i];\n            return dst;\n        } else { //bytes type objects\n            var totalLength = src.bytesSize();\n            if ((srcPos < 0) || (srcPos + count) > totalLength)\n                {this.success = false; return dst;} //would go out of bounds\n            totalLength = dst.bytesSize();\n            if ((dstPos < 0) || (dstPos + count) > totalLength)\n                {this.success = false; return dst;} //would go out of bounds\n            for (var i = 0; i < count; i++)\n                dst.bytes[dstPos + i] = src.bytes[srcPos + i];\n            return dst;\n        }\n    },\n    primitiveCopyObject: function(argCount) {\n        var rcvr = this.stackNonInteger(1),\n            arg = this.stackNonInteger(0),\n            length = rcvr.pointersSize();\n        if (!this.success ||\n            rcvr.isWordsOrBytes() ||\n            rcvr.sqClass !== arg.sqClass ||\n            length !== arg.pointersSize()) return false;\n        for (var i = 0; i < length; i++)\n            rcvr.pointers[i] = arg.pointers[i];\n        this.vm.pop(argCount);\n        return true;\n    },\n    primitiveLoadImageSegment: function(argCount) {\n        var segmentWordArray = this.stackNonInteger(1),\n            outPointerArray = this.stackNonInteger(0);\n        if (!segmentWordArray.words || !outPointerArray.pointers) return false;\n        var roots = this.vm.image.loadImageSegment(segmentWordArray, outPointerArray);\n        if (!roots) return false;\n        return this.popNandPushIfOK(argCount + 1, roots);\n    },\n},\n'blocks/closures', {\n    doBlockCopy: function() {\n        var rcvr = this.vm.stackValue(1);\n        var sqArgCount = this.stackInteger(0);\n        var homeCtxt = rcvr;\n        if(!this.vm.isContext(homeCtxt)) this.success = false;\n        if(!this.success) return rcvr;\n        if (typeof homeCtxt.pointers[Squeak.Context_method] === \"number\")\n            // ctxt is itself a block; get the context for its enclosing method\n            homeCtxt = homeCtxt.pointers[Squeak.BlockContext_home];\n        var blockSize = homeCtxt.pointersSize() - homeCtxt.instSize(); // could use a const for instSize\n        var newBlock = this.vm.instantiateClass(this.vm.specialObjects[Squeak.splOb_ClassBlockContext], blockSize);\n        var initialPC = this.vm.encodeSqueakPC(this.vm.pc + 2, this.vm.method); //*** check this...\n        newBlock.pointers[Squeak.BlockContext_initialIP] = initialPC;\n        newBlock.pointers[Squeak.Context_instructionPointer] = initialPC; // claim not needed; value will set it\n        newBlock.pointers[Squeak.Context_stackPointer] = 0;\n        newBlock.pointers[Squeak.BlockContext_argumentCount] = sqArgCount;\n        newBlock.pointers[Squeak.BlockContext_home] = homeCtxt;\n        newBlock.pointers[Squeak.Context_sender] = this.vm.nilObj; // claim not needed; just initialized\n        return newBlock;\n    },\n    primitiveBlockValue: function(argCount) {\n        var rcvr = this.vm.stackValue(argCount);\n        if (!this.isA(rcvr, Squeak.splOb_ClassBlockContext)) return false;\n        var block = rcvr;\n        var blockArgCount = block.pointers[Squeak.BlockContext_argumentCount];\n        if (typeof blockArgCount !== \"number\") return false;\n        if (blockArgCount != argCount) return false;\n        if (!block.pointers[Squeak.BlockContext_caller].isNil) return false;\n        this.vm.arrayCopy(this.vm.activeContext.pointers, this.vm.sp-argCount+1, block.pointers, Squeak.Context_tempFrameStart, argCount);\n        var initialIP = block.pointers[Squeak.BlockContext_initialIP];\n        block.pointers[Squeak.Context_instructionPointer] = initialIP;\n        block.pointers[Squeak.Context_stackPointer] = argCount;\n        block.pointers[Squeak.BlockContext_caller] = this.vm.activeContext;\n        this.vm.popN(argCount+1);\n        this.vm.newActiveContext(block);\n        return true;\n    },\n    primitiveBlockValueWithArgs: function(argCount) {\n        var block = this.vm.stackValue(1);\n        var array = this.vm.stackValue(0);\n        if (!this.isA(block, Squeak.splOb_ClassBlockContext)) return false;\n        if (!this.isA(array, Squeak.splOb_ClassArray)) return false;\n        var blockArgCount = block.pointers[Squeak.BlockContext_argumentCount];\n        if (typeof blockArgCount !== \"number\") return false;\n        if (blockArgCount != array.pointersSize()) return false;\n        if (!block.pointers[Squeak.BlockContext_caller].isNil) return false;\n        this.vm.arrayCopy(array.pointers, 0, block.pointers, Squeak.Context_tempFrameStart, blockArgCount);\n        var initialIP = block.pointers[Squeak.BlockContext_initialIP];\n        block.pointers[Squeak.Context_instructionPointer] = initialIP;\n        block.pointers[Squeak.Context_stackPointer] = blockArgCount;\n        block.pointers[Squeak.BlockContext_caller] = this.vm.activeContext;\n        this.vm.popN(argCount+1);\n        this.vm.newActiveContext(block);\n        return true;\n    },\n    primitiveClosureCopyWithCopiedValues: function(argCount) {\n        this.vm.breakNow(\"primitiveClosureCopyWithCopiedValues\");\n        debugger;\n        return false;\n    },\n    primitiveClosureValue: function(argCount) {\n        var blockClosure = this.vm.stackValue(argCount),\n            blockArgCount = blockClosure.pointers[Squeak.Closure_numArgs];\n        if (argCount !== blockArgCount) return false;\n        return this.activateNewClosureMethod(blockClosure, argCount);\n    },\n    primitiveClosureValueWithArgs: function(argCount) {\n        var array = this.vm.top(),\n            arraySize = array.pointersSize(),\n            blockClosure = this.vm.stackValue(argCount),\n            blockArgCount = blockClosure.pointers[Squeak.Closure_numArgs];\n        if (arraySize !== blockArgCount) return false;\n        this.vm.pop();\n        for (var i = 0; i < arraySize; i++)\n            this.vm.push(array.pointers[i]);\n        return this.activateNewClosureMethod(blockClosure, arraySize);\n    },\n    primitiveClosureValueNoContextSwitch: function(argCount) {\n        return this.primitiveClosureValue(argCount);\n    },\n    activateNewClosureMethod: function(blockClosure, argCount) {\n        var outerContext = blockClosure.pointers[Squeak.Closure_outerContext],\n            method = outerContext.pointers[Squeak.Context_method],\n            newContext = this.vm.allocateOrRecycleContext(method.methodNeedsLargeFrame()),\n            numCopied = blockClosure.pointers.length - Squeak.Closure_firstCopiedValue;\n        newContext.pointers[Squeak.Context_sender] = this.vm.activeContext;\n        newContext.pointers[Squeak.Context_instructionPointer] = blockClosure.pointers[Squeak.Closure_startpc];\n        newContext.pointers[Squeak.Context_stackPointer] = argCount + numCopied;\n        newContext.pointers[Squeak.Context_method] = outerContext.pointers[Squeak.Context_method];\n        newContext.pointers[Squeak.Context_closure] = blockClosure;\n        newContext.pointers[Squeak.Context_receiver] = outerContext.pointers[Squeak.Context_receiver];\n        // Copy the arguments and copied values ...\n        var where = Squeak.Context_tempFrameStart;\n        for (var i = 0; i < argCount; i++)\n            newContext.pointers[where++] = this.vm.stackValue(argCount - i - 1);\n        for (var i = 0; i < numCopied; i++)\n            newContext.pointers[where++] = blockClosure.pointers[Squeak.Closure_firstCopiedValue + i];\n        // The initial instructions in the block nil-out remaining temps.\n        this.vm.popN(argCount + 1);\n        this.vm.newActiveContext(newContext);\n        return true;\n    },\n},\n'scheduling',\n{\n    primitiveResume: function() {\n        this.resume(this.vm.top());\n        return true;\n    },\n    primitiveSuspend: function() {\n        var process = this.vm.top();\n        if (process === this.activeProcess()) {\n            this.vm.popNandPush(1, this.vm.nilObj);\n            this.transferTo(this.wakeHighestPriority());\n        } else {\n            var oldList = process.pointers[Squeak.Proc_myList];\n            if (oldList.isNil) return false;\n            this.removeProcessFromList(process, oldList);\n            if (!this.success) return false;\n            process.pointers[Squeak.Proc_myList] = this.vm.nilObj;\n            this.vm.popNandPush(1, oldList);\n        }\n        return true;\n    },\n    getScheduler: function() {\n        var assn = this.vm.specialObjects[Squeak.splOb_SchedulerAssociation];\n        return assn.pointers[Squeak.Assn_value];\n    },\n    activeProcess: function() {\n        return this.getScheduler().pointers[Squeak.ProcSched_activeProcess];\n    },\n    resume: function(newProc) {\n        var activeProc = this.activeProcess();\n        var activePriority = activeProc.pointers[Squeak.Proc_priority];\n        var newPriority = newProc.pointers[Squeak.Proc_priority];\n        if (newPriority > activePriority) {\n            this.putToSleep(activeProc);\n            this.transferTo(newProc);\n        } else {\n            this.putToSleep(newProc);\n        }\n    },\n    putToSleep: function(aProcess) {\n        //Save the given process on the scheduler process list for its priority.\n        var priority = aProcess.pointers[Squeak.Proc_priority];\n        var processLists = this.getScheduler().pointers[Squeak.ProcSched_processLists];\n        var processList = processLists.pointers[priority - 1];\n        this.linkProcessToList(aProcess, processList);\n    },\n    transferTo: function(newProc) {\n        //Record a process to be awakened on the next interpreter cycle.\n        var sched = this.getScheduler();\n        var oldProc = sched.pointers[Squeak.ProcSched_activeProcess];\n        sched.pointers[Squeak.ProcSched_activeProcess] = newProc;\n        oldProc.pointers[Squeak.Proc_suspendedContext] = this.vm.activeContext;\n        this.vm.newActiveContext(newProc.pointers[Squeak.Proc_suspendedContext]);\n        newProc.pointers[Squeak.Proc_suspendedContext] = this.vm.nilObj;\n        this.vm.reclaimableContextCount = 0;\n        if (this.vm.breakOnContextChanged) {\n            this.vm.breakOnContextChanged = false;\n            this.vm.breakNow();\n        }\n    },\n    wakeHighestPriority: function() {\n        //Return the highest priority process that is ready to run.\n        //Note: It is a fatal VM error if there is no runnable process.\n        var schedLists = this.getScheduler().pointers[Squeak.ProcSched_processLists];\n        var p = schedLists.pointersSize() - 1;  // index of last indexable field\n        var processList;\n        do {\n            if (p < 0) throw Error(\"scheduler could not find a runnable process\");\n            processList = schedLists.pointers[p--];\n        } while (this.isEmptyList(processList));\n        return this.removeFirstLinkOfList(processList);\n    },\n    linkProcessToList: function(proc, aList) {\n        // Add the given process to the given linked list and set the backpointer\n        // of process to its new list.\n        if (this.isEmptyList(aList))\n            aList.pointers[Squeak.LinkedList_firstLink] = proc;\n        else {\n            var lastLink = aList.pointers[Squeak.LinkedList_lastLink];\n            lastLink.pointers[Squeak.Link_nextLink] = proc;\n        }\n        aList.pointers[Squeak.LinkedList_lastLink] = proc;\n        proc.pointers[Squeak.Proc_myList] = aList;\n    },\n    isEmptyList: function(aLinkedList) {\n        return aLinkedList.pointers[Squeak.LinkedList_firstLink].isNil;\n    },\n    removeFirstLinkOfList: function(aList) {\n        //Remove the first process from the given linked list.\n        var first = aList.pointers[Squeak.LinkedList_firstLink];\n        var last = aList.pointers[Squeak.LinkedList_lastLink];\n        if (first === last) {\n            aList.pointers[Squeak.LinkedList_firstLink] = this.vm.nilObj;\n            aList.pointers[Squeak.LinkedList_lastLink] = this.vm.nilObj;\n        } else {\n            var next = first.pointers[Squeak.Link_nextLink];\n            aList.pointers[Squeak.LinkedList_firstLink] = next;\n        }\n        first.pointers[Squeak.Link_nextLink] = this.vm.nilObj;\n        return first;\n    },\n    removeProcessFromList: function(process, list) {\n        var first = list.pointers[Squeak.LinkedList_firstLink];\n        var last = list.pointers[Squeak.LinkedList_lastLink];\n        if (process === first) {\n            var next = process.pointers[Squeak.Link_nextLink];\n            list.pointers[Squeak.LinkedList_firstLink] = next;\n            if (process === last) {\n                list.pointers[Squeak.LinkedList_lastLink] = this.vm.nilObj;\n            }\n        } else {\n            var temp = first;\n            while (true) {\n                if (temp.isNil) return this.success = false;\n                next = temp.pointers[Squeak.Link_nextLink];\n                if (next === process) break;\n                temp = next;\n            }\n            next = process.pointers[Squeak.Link_nextLink];\n            temp.pointers[Squeak.Link_nextLink] = next;\n            if (process === last) {\n                list.pointers[Squeak.LinkedList_lastLink] = temp;\n            }\n        }\n        process.pointers[Squeak.Link_nextLink] = this.vm.nilObj;\n    },\n    registerSemaphore: function(specialObjIndex) {\n        var sema = this.vm.top();\n        if (this.isA(sema, Squeak.splOb_ClassSemaphore))\n            this.vm.specialObjects[specialObjIndex] = sema;\n        else\n            this.vm.specialObjects[specialObjIndex] = this.vm.nilObj;\n        return this.vm.stackValue(1);\n    },\n    primitiveWait: function() {\n        var sema = this.vm.top();\n        if (!this.isA(sema, Squeak.splOb_ClassSemaphore)) return false;\n        var excessSignals = sema.pointers[Squeak.Semaphore_excessSignals];\n        if (excessSignals > 0)\n            sema.pointers[Squeak.Semaphore_excessSignals] = excessSignals - 1;\n        else {\n            this.linkProcessToList(this.activeProcess(), sema);\n            this.transferTo(this.wakeHighestPriority());\n        }\n        return true;\n    },\n    primitiveSignal: function() {\n        var sema = this.vm.top();\n        if (!this.isA(sema, Squeak.splOb_ClassSemaphore)) return false;\n        this.synchronousSignal(sema);\n        return true;\n    },\n    synchronousSignal: function(sema) {\n        if (this.isEmptyList(sema)) {\n            // no process is waiting on this semaphore\n            sema.pointers[Squeak.Semaphore_excessSignals]++;\n        } else\n            this.resume(this.removeFirstLinkOfList(sema));\n        return;\n    },\n    signalAtMilliseconds: function(sema, msTime) {\n        if (this.isA(sema, Squeak.splOb_ClassSemaphore)) {\n            this.vm.specialObjects[Squeak.splOb_TheTimerSemaphore] = sema;\n            this.vm.nextWakeupTick = msTime;\n        } else {\n            this.vm.specialObjects[Squeak.splOb_TheTimerSemaphore] = this.vm.nilObj;\n            this.vm.nextWakeupTick = 0;\n        }\n    },\n    primitiveSignalAtMilliseconds: function(argCount) {\n        var msTime = this.stackInteger(0);\n        var sema = this.stackNonInteger(1);\n        if (!this.success) return false;\n        this.signalAtMilliseconds(sema, msTime);\n        this.vm.popN(argCount); // return self\n        return true;\n    },\n    primitiveSignalAtUTCMicroseconds: function(argCount) {\n        var usecsUTC = this.stackSigned53BitInt(0);\n        var sema = this.stackNonInteger(1);\n        if (!this.success) return false;\n        var msTime = (usecsUTC / 1000 + Squeak.EpochUTC - this.vm.startupTime) & Squeak.MillisecondClockMask;\n        this.signalAtMilliseconds(sema, msTime);\n        this.vm.popN(argCount); // return self\n        return true;\n    },\n    signalSemaphoreWithIndex: function(semaIndex) {\n        // asynch signal: will actually be signaled in checkForInterrupts()\n        this.semaphoresToSignal.push(semaIndex);\n    },\n    signalExternalSemaphores: function() {\n        var semaphores = this.vm.specialObjects[Squeak.splOb_ExternalObjectsArray].pointers,\n            semaClass = this.vm.specialObjects[Squeak.splOb_ClassSemaphore];\n        while (this.semaphoresToSignal.length) {\n            var semaIndex = this.semaphoresToSignal.shift(),\n                sema = semaphores[semaIndex - 1];\n            if (sema.sqClass == semaClass)\n                this.synchronousSignal(sema);\n        }\n    },\n    primitiveEnterCriticalSection: function(argCount) {\n        if (argCount > 1) return false;\n        var mutex = this.vm.stackValue(argCount);\n        var activeProc = argCount ? this.vm.top() : this.activeProcess();\n        var owningProcess = mutex.pointers[Squeak.Mutex_owner];\n        if (owningProcess.isNil) {\n            mutex.pointers[Squeak.Mutex_owner] = activeProc;\n            this.popNandPushIfOK(argCount + 1, this.vm.falseObj);\n        } else if (owningProcess === activeProc) {\n            this.popNandPushIfOK(argCount + 1, this.vm.trueObj);\n        } else {\n            this.popNandPushIfOK(argCount + 1, this.vm.falseObj);\n            this.linkProcessToList(activeProc, mutex);\n            this.transferTo(this.wakeHighestPriority());\n        }\n        return true;\n\t},\n    primitiveExitCriticalSection: function(argCount) {\n        var criticalSection = this.vm.top();\n        if (this.isEmptyList(criticalSection)) {\n            criticalSection.pointers[Squeak.Mutex_owner] = this.vm.nilObj;\n        } else {\n            var owningProcess = this.removeFirstLinkOfList(criticalSection);\n            criticalSection.pointers[Squeak.Mutex_owner] = owningProcess;\n            this.resume(owningProcess);\n        }\n        return true;\n    },\n    primitiveTestAndSetOwnershipOfCriticalSection: function(argCount) {\n        if (argCount > 1) return false;\n        var mutex = this.vm.stackValue(argCount);\n        var activeProc = argCount ? this.vm.top() : this.activeProcess();\n        var owningProcess = mutex.pointers[Squeak.Mutex_owner];\n        if (owningProcess.isNil) {\n            mutex.pointers[Squeak.Mutex_owner] = activeProc;\n            this.popNandPushIfOK(argCount + 1, this.vm.falseObj);\n        } else if (owningProcess === activeProc) {\n            this.popNandPushIfOK(argCount + 1, this.vm.trueObj);\n        } else {\n            this.popNandPushIfOK(argCount + 1, this.vm.nilObj);\n        }\n        return true;\n\t},\n},\n'vm functions', {\n    primitiveGetAttribute: function(argCount) {\n        var attr = this.stackInteger(0);\n        if (!this.success) return false;\n        var value;\n        switch (attr) {\n            case 0: value = this.filenameToSqueak(Squeak.vmPath + Squeak.vmFile); break;\n            case 1: value = this.display.documentName || null; break; // 1.x images want document here\n            case 2: value = this.display.documentName || null; break; // later images want document here\n            case 1001: value = Squeak.platformName; break;\n            case 1002: value = Squeak.osVersion; break;\n            case 1003: value = Squeak.platformSubtype; break;\n            case 1004: value = Squeak.vmVersion; break;\n            case 1005: value = Squeak.windowSystem; break;\n            case 1006: value = Squeak.vmBuild; break;\n            case 1007: value = Squeak.vmVersion; break; // Interpreter class\n            // case 1008: Cogit class\n            case 1009: value = Squeak.vmVersion; break; // Platform source version\n            default: return false;\n        }\n        this.vm.popNandPush(argCount+1, this.makeStObject(value));\n        return true;\n    },\n    setLowSpaceThreshold: function() {\n        var nBytes = this.stackInteger(0);\n        if (this.success) this.vm.lowSpaceThreshold = nBytes;\n        return this.vm.stackValue(1);\n    },\n    primitiveVMParameter: function(argCount) {\n        /* Behaviour depends on argument count:\n        0 args: return an Array of VM parameter values;\n        1 arg:  return the indicated VM parameter;\n        2 args: set the VM indicated parameter. */\n        var paramsArraySize = 44;\n        switch (argCount) {\n            case 0:\n                var arrayObj = this.vm.instantiateClass(this.vm.specialObjects[Squeak.splOb_ClassArray], paramsArraySize);\n                for (var i = 0; i < paramsArraySize; i++)\n                    arrayObj.pointers[i] = this.makeStObject(this.vmParameterAt(i+1));\n                return this.popNandPushIfOK(1, arrayObj);\n            case 1:\n                var parm = this.stackInteger(0);\n                if (parm < 1 || parm > paramsArraySize) return false;\n                return this.popNandPushIfOK(2, this.makeStObject(this.vmParameterAt(parm)));\n            case 2:\n                // ignore writes\n                return this.popNandPushIfOK(3, 0);\n        };\n        return false;\n    },\n    vmParameterAt: function(index) {\n        switch (index) {\n            case 1: return this.vm.image.oldSpaceBytes;     // end of old-space (0-based, read-only)\n            case 2: return this.vm.image.oldSpaceBytes;     // end of young-space (read-only)\n            case 3: return this.vm.image.totalMemory;       // end of memory (read-only)\n            case 4: return this.vm.image.allocationCount + this.vm.image.newSpaceCount; // allocationCount (read-only; nil in Cog VMs)\n            // 5    allocations between GCs (read-write; nil in Cog VMs)\n            // 6    survivor count tenuring threshold (read-write)\n            case 7: return this.vm.image.gcCount;           // full GCs since startup (read-only)\n            case 8: return this.vm.image.gcMilliseconds;    // total milliseconds in full GCs since startup (read-only)\n            case 9: return 1;   /* image expects > 0 */     // incremental GCs since startup (read-only)\n            case 10: return 0;                              // total milliseconds in incremental GCs since startup (read-only)\n            case 11: return this.vm.image.gcTenured;        // tenures of surving objects since startup (read-only)\n            // 12-20 specific to the translating VM\n            // 21   root table size (read-only)\n            case 22: return 0;                              // root table overflows since startup (read-only)\n            case 23: return this.vm.image.extraVMMemory;    // bytes of extra memory to reserve for VM buffers, plugins, etc.\n            // 24   memory threshold above which to shrink object memory (read-write)\n            // 25   memory headroom when growing object memory (read-write)\n            // 26   interruptChecksEveryNms - force an ioProcessEvents every N milliseconds (read-write)\n            // 27   number of times mark loop iterated for current IGC/FGC (read-only) includes ALL marking\n            // 28   number of times sweep loop iterated for current IGC/FGC (read-only)\n            // 29   number of times make forward loop iterated for current IGC/FGC (read-only)\n            // 30   number of times compact move loop iterated for current IGC/FGC (read-only)\n            // 31   number of grow memory requests (read-only)\n            // 32   number of shrink memory requests (read-only)\n            // 33   number of root table entries used for current IGC/FGC (read-only)\n            // 34   number of allocations done before current IGC/FGC (read-only)\n            // 35   number of survivor objects after current IGC/FGC (read-only)\n            // 36   millisecond clock when current IGC/FGC completed (read-only)\n            // 37   number of marked objects for Roots of the world, not including Root Table entries for current IGC/FGC (read-only)\n            // 38   milliseconds taken by current IGC (read-only)\n            // 39   Number of finalization signals for Weak Objects pending when current IGC/FGC completed (read-only)\n            case 40: return 4; // BytesPerWord for this image\n            case 41: return this.vm.image.formatVersion();\n    \t\t//42\tnumber of stack pages in use (Cog Stack VM only, otherwise nil)\n\t\t    //43\tdesired number of stack pages (stored in image file header, max 65535; Cog VMs only, otherwise nil)\n\t\t    case 44: return this.vm.image.bytesLeft(); // size of eden, in bytes\n        }\n        return null;\n    },\n    primitiveImageName: function(argCount) {\n        if (argCount == 0)\n            return this.popNandPushIfOK(1, this.makeStString(this.filenameToSqueak(this.vm.image.name)));\n        this.vm.image.name = this.filenameFromSqueak(this.vm.top().bytesAsString());\n        window.localStorage['squeakImageName'] = this.vm.image.name;\n        return true;\n    },\n    primitiveSnapshot: function(argCount) {\n        this.vm.popNandPush(1, this.vm.trueObj);        // put true on stack for saved snapshot\n        this.vm.storeContextRegisters();                // store current state for snapshot\n        this.activeProcess().pointers[Squeak.Proc_suspendedContext] = this.vm.activeContext; // store initial context\n        this.vm.image.fullGC(\"snapshot\");               // before cleanup so traversal works\n        var buffer = this.vm.image.writeToBuffer();\n        Squeak.flushAllFiles();                         // so there are no more writes pending\n        Squeak.filePut(this.vm.image.name, buffer);\n        this.vm.popNandPush(1, this.vm.falseObj);       // put false on stack for continuing\n        return true;\n    },\n    primitiveQuit: function(argCount) {\n        Squeak.flushAllFiles();\n        this.display.quitFlag = true;\n        this.vm.breakNow(\"quit\");\n        return true;\n    },\n    primitiveExitToDebugger: function(argCount) {\n        this.vm.breakNow(\"debugger primitive\");\n        debugger;\n        return true;\n    },\n    primitiveSetGCBiasToGrow: function(argCount) {\n        return this.fakePrimitive(\".primitiveSetGCBiasToGrow\", 0, argCount);\n    },\n    primitiveSetGCBiasToGrowGCLimit: function(argCount) {\n        return this.fakePrimitive(\".primitiveSetGCBiasToGrowGCLimit\", 0, argCount);\n    },\n},\n'display', {\n    primitiveBeCursor: function(argCount) {\n        if (this.display.cursorCanvas) {\n            var cursorForm = this.loadForm(this.stackNonInteger(argCount), true),\n                maskForm = argCount === 1 ? this.loadForm(this.stackNonInteger(0)) : null;\n            if (!this.success || !cursorForm) return false;\n            var cursorCanvas = this.display.cursorCanvas,\n                context = cursorCanvas.getContext(\"2d\"),\n                bounds = {left: 0, top: 0, right: cursorForm.width, bottom: cursorForm.height};\n            cursorCanvas.width = cursorForm.width;\n            cursorCanvas.height = cursorForm.height;\n            if (cursorForm.depth === 1) {\n                if (maskForm) {\n                    cursorForm = this.cursorMergeMask(cursorForm, maskForm);\n                    this.showForm(context, cursorForm, bounds, [0x00000000, 0xFF0000FF, 0xFFFFFFFF, 0xFF000000]);\n                } else {\n                    this.showForm(context, cursorForm, bounds, [0x00000000, 0xFF000000]);\n                }\n            } else {\n                this.showForm(context, cursorForm, bounds, true);\n            }\n            var canvas = this.display.context.canvas,\n                scale = canvas.offsetWidth / canvas.width;\n            cursorCanvas.style.width = (cursorCanvas.width * scale|0) + \"px\";\n            cursorCanvas.style.height = (cursorCanvas.height * scale|0) + \"px\";\n            this.display.cursorOffsetX = cursorForm.offsetX * scale|0;\n            this.display.cursorOffsetY = cursorForm.offsetY * scale|0;\n        }\n        this.vm.popN(argCount);\n        return true;\n    },\n    cursorMergeMask: function(cursor, mask) {\n        // make 2-bit form from cursor and mask 1-bit forms\n        var bits = new Uint32Array(16);\n        for (var y = 0; y < 16; y++) {\n            var c = cursor.bits[y],\n                m = mask.bits[y],\n                bit = 0x80000000,\n                merged = 0;\n            for (var x = 0; x < 16; x++) {\n                merged = merged | ((m & bit) >> x) | ((c & bit) >> (x + 1));\n                bit = bit >>> 1;\n            }\n            bits[y] = merged;\n        }\n        return {\n            obj: cursor.obj, bits: bits,\n            depth: 2, width: 16, height: 16,\n            offsetX: cursor.offsetX, offsetY: cursor.offsetY,\n            msb: true, pixPerWord: 16, pitch: 1,\n        }\n    },\n    primitiveBeDisplay: function(argCount) {\n        var displayObj = this.vm.stackValue(0);\n        this.vm.specialObjects[Squeak.splOb_TheDisplay] = displayObj;\n        this.vm.popN(argCount); // return self\n        return true;\n    },\n    primitiveReverseDisplay: function(argCount) {\n        this.reverseDisplay = !this.reverseDisplay;\n        this.redrawDisplay();\n        if (this.display.cursorCanvas) {\n            var canvas = this.display.cursorCanvas,\n                context = canvas.getContext(\"2d\"),\n                image = context.getImageData(0, 0, canvas.width, canvas.height),\n                data = new Uint32Array(image.data.buffer);\n            for (var i = 0; i < data.length; i++)\n                data[i] = data[i] ^ 0x00FFFFFF;\n            context.putImageData(image, 0, 0);\n        }\n        return true;\n    },\n    primitiveShowDisplayRect: function(argCount) {\n        // Force the given rectangular section of the Display to be copied to the screen.\n        var rect = {\n            left: this.stackInteger(3),\n            top: this.stackInteger(1),\n            right: this.stackInteger(2),\n            bottom: this.stackInteger(0),\n        };\n        if (!this.success) return false;\n        this.redrawDisplay(rect);\n        this.vm.popN(argCount);\n        return true;\n    },\n    redrawDisplay: function(rect) {\n        var theDisplay = this.theDisplay(),\n            bounds = {left: 0, top: 0, right: theDisplay.width, bottom: theDisplay.height};\n        if (rect) {\n            if (rect.left > bounds.left) bounds.left = rect.left;\n            if (rect.right < bounds.right) bounds.right = rect.right;\n            if (rect.top > bounds.top) bounds.top = rect.top;\n            if (rect.bottom < bounds.bottom) bounds.bottom = rect.bottom;\n        }\n        if (bounds.left < bounds.right && bounds.top < bounds.bottom)\n            this.displayUpdate(theDisplay, bounds);\n    },\n    showForm: function(ctx, form, rect, cursorColors) {\n        if (!rect) return;\n        var srcX = rect.left,\n            srcY = rect.top,\n            srcW = rect.right - srcX,\n            srcH = rect.bottom - srcY,\n            pixels = ctx.createImageData(srcW, srcH),\n            pixelData = pixels.data;\n        if (!pixelData.buffer) { // mobile IE uses a different data-structure\n            pixelData = new Uint8Array(srcW * srcH * 4);\n        }\n        var dest = new Uint32Array(pixelData.buffer);\n        switch (form.depth) {\n            case 1:\n            case 2:\n            case 4:\n            case 8:\n                var colors = cursorColors || this.swappedColors;\n                if (!colors) {\n                    colors = [];\n                    for (var i = 0; i < 256; i++) {\n                        var argb = this.indexedColors[i],\n                            abgr = (argb & 0xFF00FF00)     // green and alpha\n                            + ((argb & 0x00FF0000) >> 16)  // shift red down\n                            + ((argb & 0x000000FF) << 16); // shift blue up\n                        colors[i] = abgr;\n                    }\n                    this.swappedColors = colors;\n                }\n                if (this.reverseDisplay) {\n                    if (cursorColors) {\n                        colors = cursorColors.map(function(c){return c ^ 0x00FFFFFF});\n                    } else {\n                        if (!this.reversedColors)\n                            this.reversedColors = colors.map(function(c){return c ^ 0x00FFFFFF});\n                        colors = this.reversedColors;\n                    }\n                }\n                var mask = (1 << form.depth) - 1;\n                var leftSrcShift = 32 - (srcX % form.pixPerWord + 1) * form.depth;\n                for (var y = 0; y < srcH; y++) {\n                    var srcIndex = form.pitch * srcY + (srcX / form.pixPerWord | 0);\n                    var srcShift = leftSrcShift;\n                    var src = form.bits[srcIndex];\n                    var dstIndex = pixels.width * y;\n                    for (var x = 0; x < srcW; x++) {\n                        dest[dstIndex++] = colors[(src >>> srcShift) & mask];\n                        if ((srcShift -= form.depth) < 0) {\n                            srcShift = 32 - form.depth;\n                            src = form.bits[++srcIndex];\n                        }\n                    }\n                    srcY++;\n                };\n                break;\n            case 16:\n                var leftSrcShift = srcX % 2 ? 0 : 16;\n                for (var y = 0; y < srcH; y++) {\n                    var srcIndex = form.pitch * srcY + (srcX / 2 | 0);\n                    var srcShift = leftSrcShift;\n                    var src = form.bits[srcIndex];\n                    var dstIndex = pixels.width * y;\n                    for (var x = 0; x < srcW; x++) {\n                        var rgb = src >>> srcShift;\n                        dest[dstIndex++] =\n                            ((rgb & 0x7C00) >> 7)     // shift red   down 2*5, up 0*8 + 3\n                            + ((rgb & 0x03E0) << 6)   // shift green down 1*5, up 1*8 + 3\n                            + ((rgb & 0x001F) << 19)  // shift blue  down 0*5, up 2*8 + 3\n                            + 0xFF000000;             // set alpha to opaque\n                        if ((srcShift -= 16) < 0) {\n                            srcShift = 16;\n                            src = form.bits[++srcIndex];\n                        }\n                    }\n                    srcY++;\n                };\n                break;\n            case 32:\n                var opaque = cursorColors ? 0 : 0xFF000000;    // keep alpha for cursors\n                for (var y = 0; y < srcH; y++) {\n                    var srcIndex = form.pitch * srcY + srcX;\n                    var dstIndex = pixels.width * y;\n                    for (var x = 0; x < srcW; x++) {\n                        var argb = form.bits[srcIndex++];  // convert ARGB -> ABGR\n                        var abgr = (argb & 0xFF00FF00)     // green and alpha is okay\n                            | ((argb & 0x00FF0000) >> 16)  // shift red down\n                            | ((argb & 0x000000FF) << 16)  // shift blue up\n                            | opaque;                      // set alpha to opaque\n                        dest[dstIndex++] = abgr;\n                    }\n                    srcY++;\n                };\n                break;\n            default: throw Error(\"depth not implemented\");\n        };\n        if (pixels.data !== pixelData) {\n            pixels.data.set(pixelData);\n        }\n        ctx.putImageData(pixels, rect.left, rect.top);\n    },\n    primitiveDeferDisplayUpdates: function(argCount) {\n        var flag = this.stackBoolean(0);\n        if (!this.success) return false;\n        this.deferDisplayUpdates = flag;\n        this.vm.popN(argCount);\n        return true;\n    },\n    primitiveForceDisplayUpdate: function(argCount) {\n        this.vm.breakOut();   // show on screen\n        this.vm.popN(argCount);\n        return true;\n    },\n    primitiveScreenSize: function(argCount) {\n        var display = this.display,\n            w = display.width || display.context.canvas.width,\n            h = display.height || display.context.canvas.height;\n        return this.popNandPushIfOK(argCount+1, this.makePointWithXandY(w, h));\n    },\n    primitiveSetFullScreen: function(argCount) {\n        var flag = this.stackBoolean(0);\n        if (!this.success) return false;\n        if (this.display.fullscreen != flag) {\n            if (this.display.fullscreenRequest) {\n                // freeze until we get the right display size\n                var unfreeze = this.vm.freeze();\n                this.display.fullscreenRequest(flag, function thenDo() {\n                    unfreeze();\n                });\n            } else {\n                this.display.fullscreen = flag;\n                this.vm.breakOut(); // let VM go into fullscreen mode\n            }\n        }\n        this.vm.popN(argCount);\n        return true;\n    },\n    primitiveTestDisplayDepth: function(argCount) {\n        var supportedDepths =  [1, 2, 4, 8, 16, 32]; // match showOnDisplay()\n        return this.pop2andPushBoolIfOK(supportedDepths.indexOf(this.stackInteger(0)) >= 0);\n    },\n    loadForm: function(formObj, withOffset) {\n        if (formObj.isNil) return null;\n        var form = {\n            obj: formObj,\n            bits: formObj.pointers[Squeak.Form_bits].wordsOrBytes(),\n            depth: formObj.pointers[Squeak.Form_depth],\n            width: formObj.pointers[Squeak.Form_width],\n            height: formObj.pointers[Squeak.Form_height],\n        }\n        if (withOffset) {\n            var offset = formObj.pointers[Squeak.Form_offset];\n            form.offsetX = offset.pointers ? offset.pointers[Squeak.Point_x] : 0;\n            form.offsetY = offset.pointers ? offset.pointers[Squeak.Point_y] : 0;\n        }\n        if (form.width === 0 || form.height === 0) return form;\n        if (!(form.width > 0 && form.height > 0)) return null;\n        form.msb = form.depth > 0;\n        if (!form.msb) form.depth = -form.depth;\n        if (!(form.depth > 0)) return null; // happens if not int\n        form.pixPerWord = 32 / form.depth;\n        form.pitch = (form.width + (form.pixPerWord - 1)) / form.pixPerWord | 0;\n        if (form.bits.length !== (form.pitch * form.height)) return null;\n        return form;\n    },\n    theDisplay: function() {\n        return this.loadForm(this.vm.specialObjects[Squeak.splOb_TheDisplay]);\n    },\n    displayDirty: function(form, rect) {\n        if (!this.deferDisplayUpdates\n            && form == this.vm.specialObjects[Squeak.splOb_TheDisplay])\n                this.displayUpdate(this.theDisplay(), rect);\n    },\n    displayUpdate: function(form, rect) {\n        this.showForm(this.display.context, form, rect);\n        this.display.lastTick = this.vm.lastTick;\n        this.display.idle = 0;\n    },\n    primitiveBeep: function(argCount) {\n        var ctx = Squeak.startAudioOut();\n        if (ctx) {\n            var beep = ctx.createOscillator();\n            beep.connect(ctx.destination);\n            beep.type = 'square';\n            beep.frequency.value = 880;\n            beep.start();\n            beep.stop(ctx.currentTime + 0.2);\n        } else {\n            this.vm.warnOnce(\"could not initialize audio\");\n        }\n        return this.popNIfOK(argCount);\n    },\n},\n'input', {\n    primitiveClipboardText: function(argCount) {\n        if (argCount === 0) { // read from clipboard\n            if (typeof(this.display.clipboardString) !== 'string') return false;\n            this.vm.popNandPush(1, this.makeStString(this.display.clipboardString));\n        } else if (argCount === 1) { // write to clipboard\n            var stringObj = this.vm.top();\n            if (stringObj.bytes) {\n                this.display.clipboardString = stringObj.bytesAsString();\n                this.display.clipboardStringChanged = true;\n            }\n            this.vm.pop();\n        }\n        return true;\n    },\n    primitiveKeyboardNext: function(argCount) {\n        return this.popNandPushIfOK(argCount+1, this.ensureSmallInt(this.display.keys.shift()));\n    },\n    primitiveKeyboardPeek: function(argCount) {\n        var length = this.display.keys.length;\n        return this.popNandPushIfOK(argCount+1, length ? this.ensureSmallInt(this.display.keys[0] || 0) : this.vm.nilObj);\n    },\n    primitiveMouseButtons: function(argCount) {\n        // only used in non-event based (old MVC) images\n        this.popNandPushIfOK(argCount+1, this.ensureSmallInt(this.display.buttons));\n        // if the image calls this primitive it means it's done displaying\n        // we break out of the VM so the browser shows it quickly\n        this.vm.breakOut();\n        // if nothing was drawn but the image looks at the buttons rapidly,\n        // it must be idle.\n        if (this.display.idle++ > 20)\n            this.vm.goIdle(); // might switch process, so must be after pop\n        return true;\n    },\n    primitiveMousePoint: function(argCount) {\n        var x = this.ensureSmallInt(this.display.mouseX),\n            y = this.ensureSmallInt(this.display.mouseY);\n        return this.popNandPushIfOK(argCount+1, this.makePointWithXandY(x, y));\n    },\n    primitiveInputSemaphore: function(argCount) {\n        var semaIndex = this.stackInteger(0);\n        if (!this.success) return false;\n        this.inputEventSemaIndex = semaIndex;\n        this.display.signalInputEvent = function() {\n            this.signalSemaphoreWithIndex(this.inputEventSemaIndex);\n        }.bind(this);\n        return true;\n    },\n    primitiveInputWord: function(argCount) {\n        // Return an integer indicating the reason for the most recent input interrupt\n        return this.popNandPushIfOK(1, 0);      // noop for now\n    },\n    primitiveGetNextEvent: function(argCount) {\n        this.display.idle++;\n        var evtBuf = this.stackNonInteger(0);\n        if (!this.display.getNextEvent) return false;\n        this.display.getNextEvent(evtBuf.pointers, this.vm.startupTime);\n        return true;\n    },\n},\n'time', {\n    primitiveRelinquishProcessorForMicroseconds: function(argCount) {\n        // we ignore the optional arg\n        this.vm.pop(argCount);\n        this.vm.goIdle();        // might switch process, so must be after pop\n        return true;\n    },\n    millisecondClockValue: function() {\n        //Return the value of the millisecond clock as an integer.\n        //Note that the millisecond clock wraps around periodically.\n        //The range is limited to SmallInteger maxVal / 2 to allow\n        //delays of up to that length without overflowing a SmallInteger.\n        return (Date.now() - this.vm.startupTime) & Squeak.MillisecondClockMask;\n    },\n    millisecondClockValueSet: function(clock) {\n        // set millisecondClock to the (previously saved) clock value\n        // to allow \"stopping\" the VM clock while debugging\n        this.vm.startupTime = Date.now() - clock;\n    },\n    secondClock: function() {\n        return this.pos32BitIntFor(Squeak.totalSeconds()); // will overflow 32 bits in 2037\n    },\n    microsecondClockUTC: function() {\n        var millis = Date.now() - Squeak.EpochUTC;\n        return this.pos64BitIntFor(millis * 1000);\n    },\n    microsecondClockLocal: function() {\n        var millis = Date.now() - Squeak.Epoch;\n        return this.pos64BitIntFor(millis * 1000);\n    },\n},\n'FilePlugin', {\n    primitiveDirectoryCreate: function(argCount) {\n        var dirNameObj = this.stackNonInteger(0);\n        if (!this.success) return false;\n        var dirName = this.filenameFromSqueak(dirNameObj.bytesAsString());\n        this.success = Squeak.dirCreate(dirName);\n        if (!this.success) {\n            var path = Squeak.splitFilePath(dirName);\n            console.log(\"Directory not created: \" + path.fullname);\n        }\n        return this.popNIfOK(argCount);\n    },\n    primitiveDirectoryDelete: function(argCount) {\n        var dirNameObj = this.stackNonInteger(0);\n        if (!this.success) return false;\n        var dirName = this.filenameFromSqueak(dirNameObj.bytesAsString());\n        this.success = Squeak.dirDelete(dirName);\n        return this.popNIfOK(argCount);\n    },\n    primitiveDirectoryDelimitor: function(argCount) {\n        var delimitor = this.emulateMac ? ':' : '/';\n        return this.popNandPushIfOK(1, this.charFromInt(delimitor.charCodeAt(0)));\n    },\n    primitiveDirectoryEntry: function(argCount) {\n        this.vm.warnOnce(\"Not yet implemented: primitiveDirectoryEntry\");\n        return false; // image falls back on primitiveDirectoryLookup\n    },\n    primitiveDirectoryLookup: function(argCount) {\n        var index = this.stackInteger(0),\n            dirNameObj = this.stackNonInteger(1);\n        if (!this.success) return false;\n        var sqDirName = dirNameObj.bytesAsString();\n        var dirName = this.filenameFromSqueak(sqDirName);\n        var entries = Squeak.dirList(dirName, true);\n        if (!entries) {\n            var path = Squeak.splitFilePath(dirName);\n            console.log(\"Directory not found: \" + path.fullname);\n            return false;\n        }\n        var keys = Object.keys(entries).sort(),\n            entry = entries[keys[index - 1]];\n        if (sqDirName === \"/\") { // fake top-level dir\n            if (index === 1) {\n                if (!entry) entry = [0, 0, 0, 0, 0];\n                entry[0] = \"SqueakJS\";\n                entry[3] = true;\n            }\n            else entry = null;\n        }\n        this.popNandPushIfOK(argCount+1, this.makeStObject(entry));  // entry or nil\n        return true;\n    },\n    primitiveDirectorySetMacTypeAndCreator: function(argCount) {\n        return this.popNIfOK(argCount);\n    },\n    primitiveFileAtEnd: function(argCount) {\n        var handle = this.stackNonInteger(0);\n        if (!this.success || !handle.file) return false;\n        this.popNandPushIfOK(argCount+1, this.makeStObject(handle.filePos >= handle.file.size));\n        return true;\n    },\n    primitiveFileClose: function(argCount) {\n        var handle = this.stackNonInteger(0);\n        if (!this.success || !handle.file) return false;\n        if (typeof handle.file === \"string\") {\n             this.fileConsoleFlush(handle.file);\n        } else {\n            this.fileClose(handle.file);\n            this.vm.breakOut();     // return to JS asap so async file handler can run\n            handle.file = null;\n        }\n        return this.popNIfOK(argCount);\n    },\n    primitiveFileDelete: function(argCount) {\n        var fileNameObj = this.stackNonInteger(0);\n        if (!this.success) return false;\n        var fileName = this.filenameFromSqueak(fileNameObj.bytesAsString());\n        this.success = Squeak.fileDelete(fileName);\n        return this.popNIfOK(argCount);\n    },\n    primitiveFileFlush: function(argCount) {\n        var handle = this.stackNonInteger(0);\n        if (!this.success || !handle.file) return false;\n        if (typeof handle.file === \"string\") {\n             this.fileConsoleFlush(handle.file);\n        } else {\n            Squeak.flushFile(handle.file);\n            this.vm.breakOut();     // return to JS asap so async file handler can run\n        }\n        return this.popNIfOK(argCount);\n    },\n    primitiveFileGetPosition: function(argCount) {\n        var handle = this.stackNonInteger(0);\n        if (!this.success || !handle.file) return false;\n        this.popNandPushIfOK(argCount + 1, this.makeLargeIfNeeded(handle.filePos));\n        return true;\n    },\n    makeFileHandle: function(filename, file, writeFlag) {\n        var handle = this.makeStString(\"squeakjs:\" + filename);\n        handle.file = file;             // shared between handles\n        handle.fileWrite = writeFlag;   // specific to this handle\n        handle.filePos = 0;             // specific to this handle\n        return handle;\n    },\n    primitiveFileOpen: function(argCount) {\n        var writeFlag = this.stackBoolean(0),\n            fileNameObj = this.stackNonInteger(1);\n        if (!this.success) return false;\n        var fileName = this.filenameFromSqueak(fileNameObj.bytesAsString()),\n            file = this.fileOpen(fileName, writeFlag);\n        if (!file) return false;\n        var handle = this.makeFileHandle(file.name, file, writeFlag);\n        this.popNandPushIfOK(argCount+1, handle);\n        return true;\n    },\n    primitiveFileRead: function(argCount) {\n        var count = this.stackInteger(0),\n            startIndex = this.stackInteger(1) - 1, // make zero based\n            arrayObj = this.stackNonInteger(2),\n            handle = this.stackNonInteger(3);\n        if (!this.success || !handle.file) return false;\n        if (!count) return this.popNandPushIfOK(argCount+1, 0);\n        if (!arrayObj.bytes) {\n            console.log(\"File reading into non-bytes object not implemented yet\");\n            return false;\n        }\n        if (startIndex < 0 || startIndex + count > arrayObj.bytes.length)\n            return false;\n        return this.fileContentsDo(handle.file, function(file) {\n            if (!file.contents)\n                return this.popNandPushIfOK(argCount+1, 0);\n            var srcArray = file.contents,\n                dstArray = arrayObj.bytes;\n            count = Math.min(count, file.size - handle.filePos);\n            for (var i = 0; i < count; i++)\n                dstArray[startIndex + i] = srcArray[handle.filePos++];\n            this.popNandPushIfOK(argCount+1, count);\n        }.bind(this));\n    },\n    primitiveFileRename: function(argCount) {\n        var oldNameObj = this.stackNonInteger(1),\n            newNameObj = this.stackNonInteger(0);\n        if (!this.success) return false;\n        var oldName = this.filenameFromSqueak(oldNameObj.bytesAsString()),\n            newName = this.filenameFromSqueak(newNameObj.bytesAsString());\n        this.success = Squeak.fileRename(oldName, newName);\n        this.vm.breakOut();     // return to JS asap so async file handler can run\n        return this.popNIfOK(argCount);\n    },\n    primitiveFileSetPosition: function(argCount) {\n        var pos = this.stackPos32BitInt(0),\n            handle = this.stackNonInteger(1);\n        if (!this.success || !handle.file) return false;\n        handle.filePos = pos;\n        return this.popNIfOK(argCount);\n    },\n    primitiveFileSize: function(argCount) {\n        var handle = this.stackNonInteger(0);\n        if (!this.success || !handle.file) return false;\n        this.popNandPushIfOK(argCount+1, this.makeLargeIfNeeded(handle.file.size));\n        return true;\n    },\n    primitiveFileStdioHandles: function(argCount) {\n        var handles = [\n            null, // stdin\n            this.makeFileHandle('console.log', 'log', true),\n            this.makeFileHandle('console.error', 'error', true),\n        ];\n        this.popNandPushIfOK(argCount + 1, this.makeStArray(handles));\n        return true;\n    },\n    primitiveFileTruncate: function(argCount) {\n        var pos = this.stackPos32BitInt(0),\n            handle = this.stackNonInteger(1);\n        if (!this.success || !handle.file || !handle.fileWrite) return false;\n        if (handle.file.size > pos) {\n            handle.file.size = pos;\n            handle.file.modified = true;\n            if (handle.filePos > handle.file.size) handle.filePos = handle.file.size;\n        }\n        return this.popNIfOK(argCount);\n    },\n    primitiveDisableFileAccess: function(argCount) {\n        return this.fakePrimitive(\"FilePlugin.primitiveDisableFileAccess\", 0, argCount);\n    },\n    primitiveFileWrite: function(argCount) {\n        var count = this.stackInteger(0),\n            startIndex = this.stackInteger(1) - 1, // make zero based\n            arrayObj = this.stackNonInteger(2),\n            handle = this.stackNonInteger(3);\n        if (!this.success || !handle.file || !handle.fileWrite) return false;\n        if (!count) return this.popNandPushIfOK(argCount+1, 0);\n        var array = arrayObj.bytes || arrayObj.wordsAsUint8Array();\n        if (!array) return false;\n        if (startIndex < 0 || startIndex + count > array.length)\n            return false;\n        if (typeof handle.file === \"string\") {\n            this.fileConsoleWrite(handle.file, array, startIndex, count);\n            this.popNandPushIfOK(argCount+1, count);\n            return true;\n        }\n        return this.fileContentsDo(handle.file, function(file) {\n            var srcArray = array,\n                dstArray = file.contents || [];\n            if (handle.filePos + count > dstArray.length) {\n                var newSize = dstArray.length === 0 ? handle.filePos + count :\n                    Math.max(handle.filePos + count, dstArray.length + 10000);\n                file.contents = new Uint8Array(newSize);\n                file.contents.set(dstArray);\n                dstArray = file.contents;\n            }\n            for (var i = 0; i < count; i++)\n                dstArray[handle.filePos++] = srcArray[startIndex + i];\n            if (handle.filePos > file.size) file.size = handle.filePos;\n            file.modified = true;\n            this.popNandPushIfOK(argCount+1, count);\n        }.bind(this));\n    },\n    fileOpen: function(filename, writeFlag) {\n        // if a file is opened for read and write at the same time,\n        // they must share the contents. That's why all open files\n        // are held in the ref-counted global SqueakFiles\n        if (typeof SqueakFiles == 'undefined')\n            window.SqueakFiles = {};\n        var path = Squeak.splitFilePath(filename);\n        if (!path.basename) return null;    // malformed filename\n        // fetch or create directory entry\n        var directory = Squeak.dirList(path.dirname, true);\n        if (!directory) return null;\n        var entry = directory[path.basename],\n            contents = null;\n        if (entry) {\n            // if it is open already, return it\n            var file = SqueakFiles[path.fullname];\n            if (file) {\n                ++file.refCount;\n                return file;\n            }\n        } else {\n            if (!writeFlag) {\n                console.log(\"File not found: \" + path.fullname);\n                return null;\n            }\n            contents = new Uint8Array();\n            entry = Squeak.filePut(path.fullname, contents.buffer);\n            if (!entry) {\n                console.log(\"Cannot create file: \" + path.fullname);\n                return null;\n            }\n        }\n        // make the file object\n        var file = {\n            name: path.fullname,\n            size: entry[4],         // actual file size, may differ from contents.length\n            contents: contents,     // possibly null, fetched when needed\n            modified: false,\n            refCount: 1\n        };\n        SqueakFiles[file.name] = file;\n        return file;\n    },\n    fileClose: function(file) {\n        Squeak.flushFile(file);\n        if (--file.refCount == 0)\n            delete SqueakFiles[file.name];\n    },\n    fileContentsDo: function(file, func) {\n        if (file.contents) {\n            func(file);\n        } else {\n            if (file.contents === false) // failed to get contents before\n                return false;\n            this.vm.freeze(function(unfreeze) {\n                Squeak.fileGet(file.name,\n                    function success(contents) {\n                        file.contents = this.asUint8Array(contents);\n                        unfreeze();\n                        func(file);\n                    }.bind(this),\n                    function error(msg) {\n                        console.log(\"File get failed: \" + msg);\n                        file.contents = false;\n                        unfreeze();\n                        func(file);\n                    }.bind(this));\n            }.bind(this));\n        }\n        return true;\n    },\n    fileConsoleBuffer: {\n        log: '',\n        error: ''\n    },\n    fileConsoleWrite: function(logOrError, array, startIndex, count) {\n        var bytes = array.subarray(startIndex, startIndex + count),\n            buffer = this.fileConsoleBuffer[logOrError] + Squeak.bytesAsString(bytes),\n            lines = buffer.match('([^]*)\\n');\n        if (lines) {\n            console[logOrError](lines[1]);  // up to last newline\n            buffer = lines[2];              // after last newline\n        }\n        this.fileConsoleBuffer[logOrError] = buffer;\n    },\n    fileConsoleFlush: function(logOrError) {\n        var buffer = this.fileConsoleBuffer[logOrError];\n        if (buffer) {\n            console[logOrError](buffer);\n            this.fileConsoleBuffer[logOrError] = '';\n        }\n    },\n},\n'DropPlugin', {\n    primitiveDropRequestFileHandle: function(argCount) {\n        var index = this.stackInteger(0),\n            fileNames = this.display.droppedFiles || [];\n        if (index < 1 || index > fileNames.length) return false;\n        // same code as primitiveFileOpen()\n        var fileName = fileNames[index - 1],\n            file = this.fileOpen(fileName, false);\n        if (!file) return false;\n        var handle = this.makeFileHandle(fileName, file, false);\n        this.popNandPushIfOK(argCount+1, handle);\n        return true;\n    },\n    primitiveDropRequestFileName: function(argCount) {\n        var index = this.stackInteger(0),\n            fileNames = this.display.droppedFiles || [];\n        if (index < 1 || index > fileNames.length) return false;\n        var result = this.makeStString(this.filenameToSqueak(fileNames[index - 1]));\n        return this.popNandPushIfOK(argCount, result);\n    },\n},\n'SoundPlugin', {\n    snd_primitiveSoundStart: function(argCount) {\n        return this.snd_primitiveSoundStartWithSemaphore(argCount);\n    },\n    snd_primitiveSoundStartWithSemaphore: function(argCount) {\n        var bufFrames = this.stackInteger(argCount-1),\n            samplesPerSec = this.stackInteger(argCount-2),\n            stereoFlag = this.stackBoolean(argCount-3),\n            semaIndex = argCount > 3 ? this.stackInteger(argCount-4) : 0;\n        if (!this.success) return false;\n        this.audioContext = Squeak.startAudioOut();\n        if (!this.audioContext) {\n            this.vm.warnOnce(\"could not initialize audio\");\n            return false;\n        }\n        this.audioSema = semaIndex; // signal when ready to accept another buffer of samples\n        this.audioNextTimeSlot = 0;\n        this.audioBuffersReady = [];\n        this.audioBuffersUnused = [\n            this.audioContext.createBuffer(stereoFlag ? 2 : 1, bufFrames, samplesPerSec),\n            this.audioContext.createBuffer(stereoFlag ? 2 : 1, bufFrames, samplesPerSec),\n        ];\n        console.log(\"sound: started\");\n        return this.popNIfOK(argCount);\n    },\n    snd_playNextBuffer: function() {\n        if (!this.audioContext || this.audioBuffersReady.length === 0)\n            return;\n        var source = this.audioContext.createBufferSource();\n        source.buffer = this.audioBuffersReady.shift();\n        source.connect(this.audioContext.destination);\n        if (this.audioNextTimeSlot < this.audioContext.currentTime) {\n            if (this.audioNextTimeSlot > 0)\n                console.warn(\"sound \" + this.audioContext.currentTime.toFixed(3) +\n                    \": buffer underrun by \" + (this.audioContext.currentTime - this.audioNextTimeSlot).toFixed(3) + \" s\");\n            this.audioNextTimeSlot = this.audioContext.currentTime;\n        }\n        source.start(this.audioNextTimeSlot);\n        //console.log(\"sound \" + this.audioContext.currentTime.toFixed(3) +\n        //    \": scheduling from \" + this.audioNextTimeSlot.toFixed(3) +\n        //    \" to \" + (this.audioNextTimeSlot + source.buffer.duration).toFixed(3));\n        this.audioNextTimeSlot += source.buffer.duration;\n        // source.onended is unreliable, using a timeout instead\n        window.setTimeout(function() {\n            if (!this.audioContext) return;\n            // console.log(\"sound \" + this.audioContext.currentTime.toFixed(3) +\n            //    \": done, next time slot \" + this.audioNextTimeSlot.toFixed(3));\n            this.audioBuffersUnused.push(source.buffer);\n            if (this.audioSema) this.signalSemaphoreWithIndex(this.audioSema);\n            this.vm.forceInterruptCheck();\n        }.bind(this), (this.audioNextTimeSlot - this.audioContext.currentTime) * 1000);\n        this.snd_playNextBuffer();\n    },\n    snd_primitiveSoundAvailableSpace: function(argCount) {\n        if (!this.audioContext) {\n            console.log(\"sound: no audio context\");\n            return false;\n        }\n        var available = 0;\n        if (this.audioBuffersUnused.length > 0) {\n            var buf = this.audioBuffersUnused[0];\n            available = buf.length * buf.numberOfChannels * 2;\n        }\n        return this.popNandPushIfOK(argCount + 1, available);\n    },\n    snd_primitiveSoundPlaySamples: function(argCount) {\n        if (!this.audioContext || this.audioBuffersUnused.length === 0) {\n            console.log(\"sound: play but no free buffers\");\n            return false;\n        }\n        var count = this.stackInteger(2),\n            sqSamples = this.stackNonInteger(1).wordsAsInt16Array(),\n            startIndex = this.stackInteger(0) - 1;\n        if (!this.success || !sqSamples) return false;\n        var buffer = this.audioBuffersUnused.shift(),\n            channels = buffer.numberOfChannels;\n        for (var channel = 0; channel < channels; channel++) {\n            var jsSamples = buffer.getChannelData(channel),\n                index = startIndex + channel;\n            for (var i = 0; i < count; i++) {\n                jsSamples[i] = sqSamples[index] / 32768;    // int16 -> float32\n                index += channels;\n            }\n        }\n        this.audioBuffersReady.push(buffer);\n        this.snd_playNextBuffer();\n        return this.popNIfOK(argCount);\n    },\n    snd_primitiveSoundPlaySilence: function(argCount) {\n        if (!this.audioContext || this.audioBuffersUnused.length === 0) {\n            console.log(\"sound: play but no free buffers\");\n            return false;\n        }\n        var buffer = this.audioBuffersUnused.shift(),\n            channels = buffer.numberOfChannels,\n            count = buffer.length;\n        for (var channel = 0; channel < channels; channel++) {\n            var jsSamples = buffer.getChannelData(channel);\n            for (var i = 0; i < count; i++)\n                jsSamples[i] = 0;\n        }\n        this.audioBuffersReady.push(buffer);\n        this.snd_playNextBuffer();\n        return this.popNandPushIfOK(argCount + 1, count);\n    },\n    snd_primitiveSoundStop: function(argCount) {\n        if (this.audioContext) {\n            this.audioContext = null;\n            this.audioBuffersReady = null;\n            this.audioBuffersUnused = null;\n            this.audioNextTimeSlot = 0;\n            this.audioSema = 0;\n            console.log(\"sound: stopped\");\n        }\n        return this.popNIfOK(argCount);\n    },\n    snd_primitiveSoundStartRecording: function(argCount) {\n        if (argCount !== 3) return false;\n        var rcvr = this.stackNonInteger(3),\n            samplesPerSec = this.stackInteger(2),\n            stereoFlag = this.stackBoolean(1),\n            semaIndex = this.stackInteger(0);\n        if (!this.success) return false;\n        var method = this.primMethod,\n            unfreeze = this.vm.freeze(),\n            self = this;\n        Squeak.startAudioIn(\n            function onSuccess(audioContext, source) {\n                console.log(\"sound: recording started\")\n                self.audioInContext = audioContext;\n                self.audioInSource = source;\n                self.audioInSema = semaIndex;\n                self.audioInBuffers = [];\n                self.audioInBufferIndex = 0;\n                self.audioInOverSample = 1;\n                // if sample rate is still too high, adjust oversampling\n                while (samplesPerSec * self.audioInOverSample < self.audioInContext.sampleRate)\n                    self.audioInOverSample *= 2;\n                // make a buffer of at least 100 ms\n                var bufferSize = self.audioInOverSample * 1024;\n                while (bufferSize / self.audioInContext.sampleRate < 0.1)\n                    bufferSize *= 2;\n                self.audioInProcessor = audioContext.createScriptProcessor(bufferSize, stereoFlag ? 2 : 1, stereoFlag ? 2 : 1);\n                self.audioInProcessor.onaudioprocess = function(event) {\n                    self.snd_recordNextBuffer(event.inputBuffer);\n                };\n                self.audioInSource.connect(self.audioInProcessor);\n                self.audioInProcessor.connect(audioContext.destination);\n                self.vm.popN(argCount);\n                window.setTimeout(unfreeze, 0);\n            },\n            function onError(msg) {\n                console.warn(msg);\n                self.vm.sendAsPrimitiveFailure(rcvr, method, argCount);\n                window.setTimeout(unfreeze, 0);\n            });\n        return true;\n    },\n    snd_recordNextBuffer: function(audioBuffer) {\n        if (!this.audioInContext) return;\n        // console.log(\"sound \" + this.audioInContext.currentTime.toFixed(3) +\n        //    \": recorded \" + audioBuffer.duration.toFixed(3) + \" s\");\n        if (this.audioInBuffers.length > 5)\n            this.audioInBuffers.shift();\n        this.audioInBuffers.push(audioBuffer);\n        if (this.audioInSema) this.signalSemaphoreWithIndex(this.audioInSema);\n        this.vm.forceInterruptCheck();\n    },\n    snd_primitiveSoundGetRecordingSampleRate: function(argCount) {\n       if (!this.audioInContext) return false;\n       var actualRate = this.audioInContext.sampleRate / this.audioInOverSample | 0;\n       console.log(\"sound: actual recording rate \" + actualRate + \"x\" + this.audioInOverSample);\n       return this.popNandPushIfOK(argCount + 1, actualRate);\n    },\n    snd_primitiveSoundRecordSamples: function(argCount) {\n        var sqSamples = this.stackNonInteger(1).wordsAsInt16Array(),\n            sqStartIndex = this.stackInteger(0) - 1;\n        if (!this.success) return false;\n        var sampleCount = 0;\n        while (sqStartIndex < sqSamples.length) {\n            if (this.audioInBuffers.length === 0) break;\n            var buffer = this.audioInBuffers[0],\n                channels = buffer.numberOfChannels,\n                sqStep = channels,\n                jsStep = this.audioInOverSample,\n                sqCount = (sqSamples.length - sqStartIndex) / sqStep,\n                jsCount = (buffer.length - this.audioInBufferIndex) / jsStep,\n                count = Math.min(jsCount, sqCount);\n            for (var channel = 0; channel < channels; channel++) {\n                var jsSamples = buffer.getChannelData(channel),\n                    jsIndex = this.audioInBufferIndex,\n                    sqIndex = sqStartIndex + channel;\n                for (var i = 0; i < count; i++) {\n                    sqSamples[sqIndex] = jsSamples[jsIndex] * 32768 & 0xFFFF; // float32 -> int16\n                    sqIndex += sqStep;\n                    jsIndex += jsStep;\n                }\n            }\n            sampleCount += count * channels;\n            sqStartIndex += count * channels;\n            if (jsIndex < buffer.length) {\n                this.audioInBufferIndex = jsIndex;\n            } else {\n                this.audioInBufferIndex = 0;\n                this.audioInBuffers.shift();\n            }\n        }\n        return this.popNandPushIfOK(argCount + 1, sampleCount);\n    },\n    snd_primitiveSoundStopRecording: function(argCount) {\n        if (this.audioInContext) {\n            this.audioInSource.disconnect();\n            this.audioInProcessor.disconnect();\n            this.audioInContext = null;\n            this.audioInSema = 0;\n            this.audioInBuffers = null;\n            this.audioInSource = null;\n            this.audioInProcessor = null;\n            console.log(\"sound recording stopped\")\n        }\n        return true;\n    },\n    snd_primitiveSoundSetRecordLevel: function(argCount) {\n        return true;\n    },\n},\n'JPEGReadWriter2Plugin', {\n    jpeg2_primJPEGPluginIsPresent: function(argCount) {\n        return this.popNandPushIfOK(argCount + 1, this.vm.trueObj);\n    },\n    jpeg2_primImageHeight: function(argCount) {\n        var decompressStruct = this.stackNonInteger(0).wordsOrBytes();\n        if (!decompressStruct) return false;\n        var height = decompressStruct[1];\n        return this.popNandPushIfOK(argCount + 1, height);\n    },\n    jpeg2_primImageWidth: function(argCount) {\n        var decompressStruct = this.stackNonInteger(0).wordsOrBytes();\n        if (!decompressStruct) return false;\n        var width = decompressStruct[0];\n        return this.popNandPushIfOK(argCount + 1, width);\n    },\n    jpeg2_primJPEGCompressStructSize: function(argCount) {\n        // no struct needed\n        return this.popNandPushIfOK(argCount + 1, 0);\n    },\n    jpeg2_primJPEGDecompressStructSize: function(argCount) {\n        // width, height, 32 bits each\n        return this.popNandPushIfOK(argCount + 1, 8);\n    },\n    jpeg2_primJPEGErrorMgr2StructSize: function(argCount) {\n        // no struct needed\n        return this.popNandPushIfOK(argCount + 1, 0);\n    },\n    jpeg2_primJPEGReadHeaderfromByteArrayerrorMgr: function(argCount) {\n        var decompressStruct = this.stackNonInteger(2).wordsOrBytes(),\n            source = this.stackNonInteger(1).bytes;\n        if (!decompressStruct || !source) return false;\n        var unfreeze = this.vm.freeze();\n        this.jpeg2_readImageFromBytes(source,\n            function success(image) {\n                this.jpeg2state = {src: source, img: image};\n                decompressStruct[0] = image.width;\n                decompressStruct[1] = image.height;\n                unfreeze();\n            }.bind(this),\n            function error() {\n                decompressStruct[0] = 0;\n                decompressStruct[1] = 0;\n                unfreeze();\n            }.bind(this));\n        return this.popNIfOK(argCount);\n    },\n    jpeg2_primJPEGReadImagefromByteArrayonFormdoDitheringerrorMgr: function(argCount) {\n        var source = this.stackNonInteger(3).bytes,\n            form = this.stackNonInteger(2).pointers,\n            ditherFlag = this.stackBoolean(1);\n        if (!this.success || !source || !form) return false;\n        var state = this.jpeg2state;\n        if (!state || state.src !== source) {\n            console.error(\"jpeg read did not match header info\");\n            return false;\n        }\n        var depth = form[Squeak.Form_depth],\n            image = this.jpeg2_getPixelsFromImage(state.img),\n            formBits = form[Squeak.Form_bits].words;\n        if (depth === 32) {\n            this.jpeg2_copyPixelsToForm32(image, formBits);\n        } else if (depth === 16) {\n            if (ditherFlag) this.jpeg2_ditherPixelsToForm16(image, formBits);\n            else this.jpeg2_copyPixelsToForm16(image, formBits);\n        } else return false;\n        return this.popNIfOK(argCount);\n    },\n    jpeg2_primJPEGWriteImageonByteArrayformqualityprogressiveJPEGerrorMgr: function(argCount) {\n        this.vm.warnOnce(\"JPEGReadWritePlugin2: writing not implemented yet\");\n        return false;\n    },\n    jpeg2_readImageFromBytes: function(bytes, thenDo, errorDo) {\n        var blob = new Blob([bytes], {type: \"image/jpeg\"}),\n            image = new Image();\n        image.onload = function() {\n            thenDo(image);\n        };\n        image.onerror = function() {\n            console.warn(\"could not render JPEG\");\n            errorDo();\n        };\n        image.src = (window.URL || window.webkitURL).createObjectURL(blob);\n    },\n    jpeg2_getPixelsFromImage: function(image) {\n        var canvas = document.createElement(\"canvas\"),\n            context = canvas.getContext(\"2d\");\n        canvas.width = image.width;\n        canvas.height = image.height;\n        context.drawImage(image, 0, 0);\n        return context.getImageData(0, 0, image.width, image.height);\n    },\n    jpeg2_copyPixelsToForm32: function(image, formBits) {\n        var pixels = image.data;\n        for (var i = 0; i < formBits.length; i++) {\n            var r = pixels[i*4 + 0],\n                g = pixels[i*4 + 1],\n                b = pixels[i*4 + 2];\n            formBits[i] = 0xFF000000 | (r << 16) | (g << 8) | b;\n        }\n    },\n    jpeg2_copyPixelsToForm16: function(image, formBits) {\n        var width = image.width,\n            height = image.height,\n            pixels = image.data;\n        for (var y = 0; y < height; y++)\n            for (var x = 0; x < width; x += 2) {\n                var i = y * height + x,\n                    r1 = pixels[i*4 + 0] >> 3,\n                    g1 = pixels[i*4 + 1] >> 3,\n                    b1 = pixels[i*4 + 2] >> 3,\n                    r2 = pixels[i*4 + 4] >> 3,\n                    g2 = pixels[i*4 + 5] >> 3,\n                    b2 = pixels[i*4 + 6] >> 3,\n                    formPix = (r1 << 10) | (g1 << 5) | b1;\n                if (formPix === 0) formPix = 1;\n                formPix = (formPix << 16) | (r2 << 10) | (g2 << 5) | b2;\n                if ((formPix & 65535) === 0) formPix = formPix | 1;\n                formBits[i >> 1] = formPix;\n            }\n    },\n    jpeg2_ditherPixelsToForm16: function(image, formBits) {\n        var width = image.width >> 1,   // 2 pix a time\n            height = image.height,\n            pixels = image.data,\n            ditherMatrix1 = [2, 0, 14, 12, 1, 3, 13, 15],\n            ditherMatrix2 = [10, 8, 6, 4, 9, 11, 5, 7];\n        for (var y = 0; y < height; y++)\n            for (var x = 0; x < width; x++) {\n                var i = (y * height + 2 * x) << 2,\n                    r1 = pixels[i + 0],\n                    g1 = pixels[i + 1],\n                    b1 = pixels[i + 2],\n                    r2 = pixels[i + 4],\n                    g2 = pixels[i + 5],\n                    b2 = pixels[i + 6];\n                /* Do 4x4 ordered dithering. Taken from Form>>orderedDither32To16 */\n                var v = ((y & 3) << 1) | (x & 1),\n                    dmv1 = ditherMatrix1[v],\n                    dmv2 = ditherMatrix2[v],\n                    di, dmi, dmo;\n                di = (r1 * 496) >> 8, dmi = di & 15, dmo = di >> 4;\n                if (dmv1 < dmi) { r1 = dmo+1; } else { r1 = dmo; };\n                di = (g1 * 496) >> 8; dmi = di & 15; dmo = di >> 4;\n                if (dmv1 < dmi) { g1 = dmo+1; } else { g1 = dmo; };\n                di = (b1 * 496) >> 8; dmi = di & 15; dmo = di >> 4;\n                if (dmv1 < dmi) { b1 = dmo+1; } else { b1 = dmo; };\n\n                di = (r2 * 496) >> 8; dmi = di & 15; dmo = di >> 4;\n                if (dmv2 < dmi) { r2 = dmo+1; } else { r2 = dmo; };\n                di = (g2 * 496) >> 8; dmi = di & 15; dmo = di >> 4;\n                if (dmv2 < dmi) { g2 = dmo+1; } else { g2 = dmo; };\n                di = (b2 * 496) >> 8; dmi = di & 15; dmo = di >> 4;\n                if (dmv2 < dmi) { b2 = dmo+1; } else { b2 = dmo; };\n\n                var formPix = (r1 << 10) | (g1 << 5) | b1;\n                if (formPix === 0) formPix = 1;\n                formPix = (formPix << 16) | (r2 << 10) | (g2 << 5) | b2;\n                if ((formPix & 65535) === 0) formPix = formPix | 1;\n                formBits[i >> 3] = formPix;\n            }\n    },\n},\n'ScratchPluginAdditions', {\n    // methods not handled by generated ScratchPlugin\n    scratch_primitiveOpenURL: function(argCount) {\n        var url = this.stackNonInteger(0).bytesAsString();\n        if (url == \"\") return false;\n        if (/^\\/SqueakJS\\//.test(url)) {\n            url = url.slice(10);     // remove file root\n            var path = Squeak.splitFilePath(url),\n                template = localStorage[\"squeak-template:\" + path.dirname];\n            if (template) url = JSON.parse(template).url + \"/\" + path.basename;\n        }\n        window.open(url, \"_blank\"); // likely blocked as pop-up, but what can we do?\n        return this.popNIfOK(argCount);\n    },\n    scratch_primitiveGetFolderPath: function(argCount) {\n        var index = this.stackInteger(0);\n        if (!this.success) return false;\n        var path;\n        switch (index) {\n            case 1: path = '/'; break;              // home dir\n            // case 2: path = '/desktop'; break;    // desktop\n            // case 3: path = '/documents'; break;  // documents\n            // case 4: path = '/pictures'; break;   // my pictures\n            // case 5: path = '/music'; break;      // my music\n        }\n        if (!path) return false;\n        this.vm.popNandPush(argCount + 1, this.makeStString(this.filenameToSqueak(path)));\n        return true;\n    },\n},\n'JavaScriptPlugin', {\n    js_primitiveDoUnderstand: function(argCount) {\n        // This is JS's doesNotUnderstand handler,\n        // as well as JS class's doesNotUnderstand handler.\n        // Property name is the selector up to first colon.\n        // If it is 'new', create an instance;\n        // otherwise if the property is a function, call it;\n        // otherwise if the property exists, get/set it;\n        // otherwise, fail.\n        var rcvr = this.stackNonInteger(1),\n            obj = this.js_objectOrGlobal(rcvr),\n            message = this.stackNonInteger(0).pointers,\n            selector = message[0].bytesAsString(),\n            args = message[1].pointers || [],\n            isGlobal = !('jsObject' in rcvr),\n            jsResult = null;\n        try {\n            var propName = selector.match(/([^:]*)/)[0];\n            if (!isGlobal && propName === \"new\") {\n                if (args.length === 0) {\n                    // new this()\n                    jsResult = new obj();\n                } else {\n                    // new this(arg0, arg1, ...)\n                    var newArgs = [null].concat(this.js_fromStArray(args));\n                    jsResult = new (Function.prototype.bind.apply(obj, newArgs));\n                }\n            } else {\n                if (!(propName in obj))\n                    return this.js_setError(\"Property not found: \" + propName);\n                var propValue = obj[propName];\n                if (typeof propValue == \"function\" && (!isGlobal || args.length > 0)) {\n                    // do this[selector](arg0, arg1, ...)\n                    jsResult = propValue.apply(obj, this.js_fromStArray(args));\n                } else {\n                    if (args.length == 0) {\n                        // do this[selector]\n                        jsResult = propValue;\n                    } else if (args.length == 1) {\n                        // do this[selector] = arg0\n                        obj[propName] = this.js_fromStObject(args[0]);\n                    } else {\n                        // cannot do this[selector] = arg0, arg1, ...\n                        return this.js_setError(\"Property \" + propName + \" is not a function\");\n                    }\n                }\n            }\n        } catch(err) {\n            return this.js_setError(err.message);\n        }\n        var stResult = this.makeStObject(jsResult, rcvr.sqClass);\n        return this.popNandPushIfOK(argCount + 1, stResult);\n    },\n    js_primitiveAsString: function(argCount) {\n        var obj = this.js_objectOrGlobal(this.stackNonInteger(0));\n        return this.popNandPushIfOK(argCount + 1, this.makeStString(String(obj)));\n    },\n    js_primitiveTypeof: function(argCount) {\n        var obj = this.js_objectOrGlobal(this.stackNonInteger(0));\n        return this.popNandPushIfOK(argCount + 1, this.makeStString(typeof obj));\n    },\n    js_primitiveAt: function(argCount) {\n        var rcvr = this.stackNonInteger(1),\n            propName = this.vm.stackValue(0),\n            propValue;\n        try {\n            var jsRcvr = this.js_objectOrGlobal(rcvr),\n                jsPropName = this.js_fromStObject(propName),\n                jsPropValue = jsRcvr[jsPropName];\n            propValue = this.makeStObject(jsPropValue, rcvr.sqClass);\n        } catch(err) {\n            return this.js_setError(err.message);\n        }\n        return this.popNandPushIfOK(argCount + 1, propValue);\n    },\n    js_primitiveAtPut: function(argCount) {\n        var rcvr = this.stackNonInteger(2),\n            propName = this.vm.stackValue(1),\n            propValue = this.vm.stackValue(0);\n        try {\n            var jsRcvr = this.js_objectOrGlobal(rcvr),\n                jsPropName = this.js_fromStObject(propName),\n                jsPropValue = this.js_fromStObject(propValue);\n            jsRcvr[jsPropName] = jsPropValue;\n        } catch(err) {\n            return this.js_setError(err.message);\n        }\n        return this.popNandPushIfOK(argCount + 1, propValue);\n    },\n    js_primitiveSqueakAsJSObject: function(argCount) {\n        var rcvr = this.stackNonInteger(1),\n            arg = this.vm.stackValue(0);\n        if (this.success) rcvr.jsObject = arg;\n        return this.popNIfOK(argCount);\n    },\n    js_primitiveInitCallbacks: function(argCount) {\n        // set callback semaphore for js_fromStBlock()\n        this.js_callbackSema = this.stackInteger(0);\n        this.js_activeCallback = null;\n        return this.popNIfOK(argCount);\n    },\n    js_primitiveGetActiveCallbackBlock: function(argCount) {\n        // we're inside an active callback, get block\n        var callback = this.js_activeCallback;\n        if (!callback) return this.js_setError(\"No active callback\");\n        return this.popNandPushIfOK(argCount, callback.block);\n    },\n    js_primitiveGetActiveCallbackArgs: function(argCount) {\n        // we're inside an active callback, get args\n        var proxyClass = this.stackNonInteger(argCount),\n            callback = this.js_activeCallback;\n        if (!callback) return this.js_setError(\"No active callback\");\n        try {\n            // make array with expected number of arguments for block\n            var array = this.makeStArray(callback.args, proxyClass);\n            return this.popNandPushIfOK(argCount, array);\n        } catch(err) {\n            return this.js_setError(err.message);\n        }\n    },\n    js_primitiveReturnFromCallback: function(argCount) {\n        if (argCount !== 1) return false;\n        if (!this.js_activeCallback)\n            return this.js_setError(\"No active callback\");\n        // set result so the interpret loop in js_executeCallback() terminates\n        this.js_activeCallback.result = this.vm.pop();\n        this.vm.breakOut(); // stop interpreting ASAP\n        return true;\n    },\n    js_primitiveGetError: function(argCount) {\n        var error = this.makeStObject(this.js_error);\n        this.js_error = null;\n        return this.popNandPushIfOK(argCount + 1, error);\n    },\n    js_setError: function(err) {\n        this.js_error = String(err);\n        return false;\n    },\n    js_fromStObject: function(obj) {\n        if (typeof obj === \"number\") return obj;\n        if (obj.jsObject) return obj.jsObject;\n        if (obj.isFloat) return obj.float;\n        if (obj.isNil) return null;\n        if (obj.isTrue) return true;\n        if (obj.isFalse) return false;\n        if (obj.bytes || obj.sqClass === this.vm.specialObjects[Squeak.splOb_ClassString])\n            return obj.bytesAsString();\n        if (obj.sqClass === this.vm.specialObjects[Squeak.splOb_ClassArray])\n            return this.js_fromStArray(obj.pointers || [], true);\n        if (obj.sqClass === this.vm.specialObjects[Squeak.splOb_ClassBlockContext] ||\n            obj.sqClass === this.vm.specialObjects[Squeak.splOb_ClassBlockClosure])\n            return this.js_fromStBlock(obj);\n        throw Error(\"asJSArgument needed for \" + obj);\n    },\n    js_fromStArray: function(objs, maybeDict) {\n        if (objs.length > 0 && maybeDict && this.isAssociation(objs[0]))\n            return this.js_fromStDict(objs);\n        var jsArray = [];\n        for (var i = 0; i < objs.length; i++)\n            jsArray.push(this.js_fromStObject(objs[i]));\n        return jsArray;\n    },\n    js_fromStDict: function(objs) {\n        var jsDict = {};\n        for (var i = 0; i < objs.length; i++) {\n            var assoc = objs[i].pointers;\n            if (!assoc || assoc.length !== 2) throw Error(assoc + \" is not an Association\");\n            var jsKey = this.js_fromStObject(assoc[0]),\n                jsValue = this.js_fromStObject(assoc[1]);\n            jsDict[jsKey] = jsValue;\n        }\n        return jsDict;\n    },\n    js_fromStBlock: function(block) {\n        // create callback function from block or closure\n        if (!this.js_callbackSema) // image recognizes error string and will try again\n            throw Error(\"CallbackSemaphore not set\");\n        // block holds onto thisContext\n        this.vm.reclaimableContextCount = 0;\n        var numArgs = block.pointers[Squeak.BlockContext_argumentCount];\n        if (typeof numArgs !== 'number')\n            numArgs = block.pointers[Squeak.Closure_numArgs];\n        var squeak = this;\n        return function evalSqueakBlock(/* arguments */) {\n            var args = [];\n            for (var i = 0; i < numArgs; i++)\n                args.push(arguments[i]);\n            return new Promise(function(resolve, reject) {\n                function evalAsync() {\n                    squeak.js_executeCallbackAsync(block, args, resolve, reject);\n                }\n                setTimeout(evalAsync, 0);\n            });\n        }\n    },\n    js_executeCallbackAsync: function(block, args, resolve, reject) {\n        var squeak = this;\n        function again() {squeak.js_executeCallbackAsync(block, args, resolve, reject)}\n        if (!this.js_activeCallback && !this.vm.frozen) {\n            this.js_executeCallback(block, args, resolve, reject);\n        } else {\n            setTimeout(again, 0);\n        }\n    },\n    js_executeCallback: function(block, args, resolve, reject) {\n        if (this.js_activeCallback)\n            return console.error(\"Callback: already active\");\n        // make block and args available to primitiveGetActiveCallback\n        this.js_activeCallback = {\n            block: block,\n            args: args,\n            result: null,\n        };\n        // switch to callback handler process ASAP\n        this.signalSemaphoreWithIndex(this.js_callbackSema);\n        this.vm.forceInterruptCheck();\n        // interpret until primitiveReturnFromCallback sets result\n        var timeout = Date.now() + 500;\n        while (Date.now() < timeout && !this.js_activeCallback.result)\n            this.vm.interpret();\n        var result = this.js_activeCallback.result;\n        this.js_activeCallback = null;\n        if (result) {\n            // return result to JS caller as JS object or string\n            try { resolve(this.js_fromStObject(result)); }\n            catch(err) { resolve(result.toString()); }\n        } else {\n            reject(Error(\"SqueakJS timeout\"));\n        }\n    },\n    js_objectOrGlobal: function(sqObject) {\n        return 'jsObject' in sqObject ? sqObject.jsObject : window;\n    },\n},\n'Obsolete', {\n    primitiveFloatArrayAt: function(argCount) {\n        return this.namedPrimitive(\"FloatArrayPlugin\", \"primitiveAt\", argCount);\n    },\n    primitiveFloatArrayMulFloatArray: function(argCount) {\n        return this.namedPrimitive(\"FloatArrayPlugin\", \"primitiveMulFloatArray\", argCount);\n    },\n    primitiveFloatArrayAddScalar: function(argCount) {\n        return this.namedPrimitive(\"FloatArrayPlugin\", \"primitiveAddScalar\", argCount);\n    },\n    primitiveFloatArrayDivFloatArray: function(argCount) {\n        return this.namedPrimitive(\"FloatArrayPlugin\", \"primitiveDivFloatArray\", argCount);\n    },\n    primitiveFloatArrayDivScalar: function(argCount) {\n        return this.namedPrimitive(\"FloatArrayPlugin\", \"primitiveDivScalar\", argCount);\n    },\n    primitiveFloatArrayHash: function(argCount) {\n        return this.namedPrimitive(\"FloatArrayPlugin\", \"primitiveHash\", argCount);\n    },\n    primitiveFloatArrayAtPut: function(argCount) {\n        return this.namedPrimitive(\"FloatArrayPlugin\", \"primitiveAtPut\", argCount);\n    },\n    primitiveFloatArrayMulScalar: function(argCount) {\n        return this.namedPrimitive(\"FloatArrayPlugin\", \"primitiveMulScalar\", argCount);\n    },\n    primitiveFloatArrayAddFloatArray: function(argCount) {\n        return this.namedPrimitive(\"FloatArrayPlugin\", \"primitiveAddFloatArray\", argCount);\n    },\n    primitiveFloatArraySubScalar: function(argCount) {\n        return this.namedPrimitive(\"FloatArrayPlugin\", \"primitiveSubScalar\", argCount);\n    },\n    primitiveFloatArraySubFloatArray: function(argCount) {\n        return this.namedPrimitive(\"FloatArrayPlugin\", \"primitiveSubFloatArray\", argCount);\n    },\n    primitiveFloatArrayEqual: function(argCount) {\n        return this.namedPrimitive(\"FloatArrayPlugin\", \"primitiveEqual\", argCount);\n    },\n    primitiveFloatArrayDotProduct: function(argCount) {\n        return this.namedPrimitive(\"FloatArrayPlugin\", \"primitiveDotProduct\", argCount);\n    },\n    m23PrimitiveInvertRectInto: function(argCount) {\n        return this.namedPrimitive(\"Matrix2x3Plugin\", \"primitiveInvertRectInto\", argCount);\n    },\n    m23PrimitiveTransformPoint: function(argCount) {\n        return this.namedPrimitive(\"Matrix2x3Plugin\", \"primitiveTransformPoint\", argCount);\n    },\n    m23PrimitiveIsPureTranslation: function(argCount) {\n        return this.namedPrimitive(\"Matrix2x3Plugin\", \"primitiveIsPureTranslation\", argCount);\n    },\n    m23PrimitiveComposeMatrix: function(argCount) {\n        return this.namedPrimitive(\"Matrix2x3Plugin\", \"primitiveComposeMatrix\", argCount);\n    },\n    m23PrimitiveTransformRectInto: function(argCount) {\n        return this.namedPrimitive(\"Matrix2x3Plugin\", \"primitiveTransformRectInto\", argCount);\n    },\n    m23PrimitiveIsIdentity: function(argCount) {\n        return this.namedPrimitive(\"Matrix2x3Plugin\", \"primitiveIsIdentity\", argCount);\n    },\n    m23PrimitiveInvertPoint: function(argCount) {\n        return this.namedPrimitive(\"Matrix2x3Plugin\", \"primitiveInvertPoint\", argCount);\n    },\n    primitiveDeflateBlock: function(argCount) {\n        return this.namedPrimitive(\"ZipPlugin\", \"primitiveDeflateBlock\", argCount);\n    },\n    primitiveDeflateUpdateHashTable: function(argCount) {\n        return this.namedPrimitive(\"ZipPlugin\", \"primitiveDeflateUpdateHashTable\", argCount);\n    },\n    primitiveUpdateGZipCrc32: function(argCount) {\n        return this.namedPrimitive(\"ZipPlugin\", \"primitiveUpdateGZipCrc32\", argCount);\n    },\n    primitiveInflateDecompressBlock: function(argCount) {\n        return this.namedPrimitive(\"ZipPlugin\", \"primitiveInflateDecompressBlock\", argCount);\n    },\n    primitiveZipSendBlock: function(argCount) {\n        return this.namedPrimitive(\"ZipPlugin\", \"primitiveZipSendBlock\", argCount);\n    },\n    primitiveFFTTransformData: function(argCount) {\n        return this.namedPrimitive(\"FFTPlugin\", \"primitiveFFTTransformData\", argCount);\n    },\n    primitiveFFTScaleData: function(argCount) {\n        return this.namedPrimitive(\"FFTPlugin\", \"primitiveFFTScaleData\", argCount);\n    },\n    primitiveFFTPermuteData: function(argCount) {\n        return this.namedPrimitive(\"FFTPlugin\", \"primitiveFFTPermuteData\", argCount);\n    },\n\tgePrimitiveMergeFillFrom: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveMergeFillFrom\", argCount);\n\t},\n\tgePrimitiveCopyBuffer: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveCopyBuffer\", argCount);\n\t},\n\tgePrimitiveAddRect: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveAddRect\", argCount);\n\t},\n\tgePrimitiveAddGradientFill: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveAddGradientFill\", argCount);\n\t},\n\tgePrimitiveSetClipRect: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveSetClipRect\", argCount);\n\t},\n\tgePrimitiveSetBitBltPlugin: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveSetBitBltPlugin\", argCount);\n\t},\n\tgePrimitiveRegisterExternalEdge: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveRegisterExternalEdge\", argCount);\n\t},\n\tgePrimitiveGetClipRect: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveGetClipRect\", argCount);\n\t},\n\tgePrimitiveAddBezier: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveAddBezier\", argCount);\n\t},\n\tgePrimitiveInitializeProcessing: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveInitializeProcessing\", argCount);\n\t},\n\tgePrimitiveRenderImage: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveRenderImage\", argCount);\n\t},\n\tgePrimitiveGetOffset: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveGetOffset\", argCount);\n\t},\n\tgePrimitiveSetDepth: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveSetDepth\", argCount);\n\t},\n\tgePrimitiveAddBezierShape: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveAddBezierShape\", argCount);\n\t},\n\tgePrimitiveSetEdgeTransform: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveSetEdgeTransform\", argCount);\n\t},\n\tgePrimitiveGetTimes: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveGetTimes\", argCount);\n\t},\n\tgePrimitiveNextActiveEdgeEntry: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveNextActiveEdgeEntry\", argCount);\n\t},\n\tgePrimitiveAddBitmapFill: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveAddBitmapFill\", argCount);\n\t},\n\tgePrimitiveGetDepth: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveGetDepth\", argCount);\n\t},\n\tgePrimitiveAbortProcessing: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveAbortProcessing\", argCount);\n\t},\n\tgePrimitiveNextGlobalEdgeEntry: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveNextGlobalEdgeEntry\", argCount);\n\t},\n\tgePrimitiveGetFailureReason: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveGetFailureReason\", argCount);\n\t},\n\tgePrimitiveDisplaySpanBuffer: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveDisplaySpanBuffer\", argCount);\n\t},\n\tgePrimitiveGetCounts: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveGetCounts\", argCount);\n\t},\n\tgePrimitiveChangedActiveEdgeEntry: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveChangedActiveEdgeEntry\", argCount);\n\t},\n\tgePrimitiveRenderScanline: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveRenderScanline\", argCount);\n\t},\n\tgePrimitiveGetBezierStats: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveGetBezierStats\", argCount);\n\t},\n\tgePrimitiveFinishedProcessing: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveFinishedProcessing\", argCount);\n\t},\n\tgePrimitiveNeedsFlush: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveNeedsFlush\", argCount);\n\t},\n\tgePrimitiveAddLine: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveAddLine\", argCount);\n\t},\n\tgePrimitiveSetOffset: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveSetOffset\", argCount);\n\t},\n\tgePrimitiveNextFillEntry: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveNextFillEntry\", argCount);\n\t},\n\tgePrimitiveInitializeBuffer: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveInitializeBuffer\", argCount);\n\t},\n\tgePrimitiveDoProfileStats: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveDoProfileStats\", argCount);\n\t},\n\tgePrimitiveAddActiveEdgeEntry: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveAddActiveEdgeEntry\", argCount);\n\t},\n\tgePrimitiveSetAALevel: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveSetAALevel\", argCount);\n\t},\n\tgePrimitiveNeedsFlushPut: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveNeedsFlushPut\", argCount);\n\t},\n\tgePrimitiveAddCompressedShape: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveAddCompressedShape\", argCount);\n\t},\n\tgePrimitiveSetColorTransform: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveSetColorTransform\", argCount);\n\t},\n\tgePrimitiveAddOval: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveAddOval\", argCount);\n\t},\n\tgePrimitiveRegisterExternalFill: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveRegisterExternalFill\", argCount);\n\t},\n\tgePrimitiveAddPolygon: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveAddPolygon\", argCount);\n\t},\n\tgePrimitiveGetAALevel: function(argCount) {\n\t    return this.namedPrimitive(\"B2DPlugin\", \"primitiveGetAALevel\", argCount);\n\t},\n});\n\nObject.subclass('Squeak.InterpreterProxy',\n// provides function names exactly like the C interpreter, for ease of porting\n// but maybe less efficiently because of the indirection\n// only used for plugins translated from Slang (see plugins/*.js)\n// built-in primitives use the interpreter directly\n'initialization', {\n    VM_PROXY_MAJOR: 1,\n    VM_PROXY_MINOR: 11,\n    initialize: function(vm) {\n        this.vm = vm;\n        this.remappableOops = [];\n        Object.defineProperty(this, 'successFlag', {\n          get: function() { return vm.primHandler.success; },\n          set: function(success) { vm.primHandler.success = success; },\n        });\n    },\n    majorVersion: function() {\n        return this.VM_PROXY_MAJOR;\n    },\n    minorVersion: function() {\n        return this.VM_PROXY_MINOR;\n    },\n},\n'success',\n{\n    failed: function() {\n        return !this.successFlag;\n    },\n    primitiveFail: function() {\n        this.successFlag = false;\n    },\n    primitiveFailFor: function(reasonCode) {\n        this.successFlag = false;\n    },\n    success: function(boolean) {\n        if (!boolean) this.successFlag = false;\n    },\n},\n'stack access',\n{\n    pop: function(n) {\n        this.vm.popN(n);\n    },\n    popthenPush: function(n, obj) {\n        this.vm.popNandPush(n, obj);\n    },\n    push: function(obj) {\n        this.vm.push(obj);\n    },\n    pushBool: function(bool) {\n        this.vm.push(bool ? this.vm.trueObj : this.vm.falseObj);\n    },\n    pushInteger: function(int) {\n        this.vm.push(int);\n    },\n    pushFloat: function(num) {\n        this.vm.push(this.floatObjectOf(num));\n    },\n    stackValue: function(n) {\n        return this.vm.stackValue(n);\n    },\n    stackIntegerValue: function(n) {\n        var int = this.vm.stackValue(n);\n        if (typeof int === \"number\") return int;\n        this.successFlag = false;\n        return 0;\n    },\n    stackFloatValue: function(n) {\n        this.vm.success = true;\n        var float = this.vm.stackIntOrFloat(n);\n        if (this.vm.success) return float;\n        this.successFlag = false;\n        return 0;\n    },\n    stackObjectValue: function(n) {\n        var obj = this.vm.stackValue(n);\n        if (typeof obj !== \"number\") return obj;\n        this.successFlag = false;\n        return this.vm.nilObj;\n    },\n    stackBytes: function(n) {\n        var oop = this.vm.stackValue(n);\n        if (oop.bytes) return oop.bytes;\n        if (typeof oop === \"number\" || !oop.isBytes()) this.successFlag = false;\n        return [];\n    },\n    stackWords: function(n) {\n        var oop = this.vm.stackValue(n);\n        if (oop.words) return oop.words;\n        if (typeof oop === \"number\" || !oop.isWords()) this.successFlag = false;\n        return [];\n    },\n    stackInt32Array: function(n) {\n        var oop = this.vm.stackValue(n);\n        if (oop.words) return oop.wordsAsInt32Array();\n        if (typeof oop === \"number\" || !oop.isWords()) this.successFlag = false;\n        return [];\n    },\n    stackInt16Array: function(n) {\n        var oop = this.vm.stackValue(n);\n        if (oop.words) return oop.wordsAsInt16Array();\n        if (typeof oop === \"number\" || !oop.isWords()) this.successFlag = false;\n        return [];\n    },\n    stackUint16Array: function(n) {\n        var oop = this.vm.stackValue(n);\n        if (oop.words) return oop.wordsAsUint16Array();\n        if (typeof oop === \"number\" || !oop.isWords()) this.successFlag = false;\n        return [];\n    },\n},\n'object access',\n{\n    isBytes: function(obj) {\n        return typeof obj !== \"number\" && obj.isBytes();\n    },\n    isWords: function(obj) {\n        return typeof obj !== \"number\" && obj.isWords();\n    },\n    isWordsOrBytes: function(obj) {\n        return typeof obj !== \"number\" && obj.isWordsOrBytes();\n    },\n    isPointers: function(obj) {\n        return typeof obj !== \"number\" && obj.isPointers();\n    },\n    isIntegerValue: function(obj) {\n        return typeof obj === \"number\" && obj >= -0x40000000 && obj <= 0x3FFFFFFF;\n    },\n    isArray: function(obj) {\n        return obj.sqClass === this.vm.specialObjects[Squeak.splOb_ClassArray];\n    },\n    isMemberOf: function(obj, className) {\n        var nameBytes = obj.sqClass.pointers[Squeak.Class_name].bytes;\n        if (className.length !== nameBytes.length) return false;\n        for (var i = 0; i < className.length; i++)\n            if (className.charCodeAt(i) !== nameBytes[i]) return false;\n        return true;\n    },\n    booleanValueOf: function(obj) {\n        if (obj.isTrue) return true;\n        if (obj.isFalse) return false;\n        this.successFlag = false;\n        return false;\n    },\n    positive32BitValueOf: function(obj) {\n        return this.vm.primHandler.positive32BitValueOf(obj);\n    },\n    positive32BitIntegerFor: function(int) {\n        return this.vm.primHandler.pos32BitIntFor(int);\n    },\n    floatValueOf: function(obj) {\n        if (obj.isFloat) return obj.float;\n        this.successFlag = false;\n        return 0;\n    },\n    floatObjectOf: function(num) {\n        return this.vm.primHandler.makeFloat(num);\n    },\n    fetchPointerofObject: function(n, obj) {\n        return obj.pointers[n];\n    },\n    fetchBytesofObject: function(n, obj) {\n        var oop = obj.pointers[n];\n        if (oop.bytes) return oop.bytes;\n        if (oop.words) return oop.wordsAsUint8Array();\n        if (typeof oop === \"number\" || !oop.isWordsOrBytes()) this.successFlag = false;\n        return [];\n    },\n    fetchWordsofObject: function(n, obj) {\n        var oop = obj.pointers[n];\n        if (oop.words) return oop.words;\n        if (typeof oop === \"number\" || !oop.isWords()) this.successFlag = false;\n        return [];\n    },\n    fetchInt32ArrayofObject: function(n, obj) {\n        var oop = obj.pointers[n];\n        if (oop.words) return oop.wordsAsInt32Array();\n        if (typeof oop === \"number\" || !oop.isWords()) this.successFlag = false;\n        return [];\n    },\n    fetchInt16ArrayofObject: function(n, obj) {\n        var oop = obj.pointers[n];\n        if (oop.words) return oop.wordsAsInt16Array();\n        if (typeof oop === \"number\" || !oop.isWords()) this.successFlag = false;\n        return [];\n    },\n    fetchUint16ArrayofObject: function(n, obj) {\n        var oop = obj.pointers[n];\n        if (oop.words) return oop.wordsAsUint16Array();\n        if (typeof oop === \"number\" || !oop.isWords()) this.successFlag = false;\n        return [];\n    },\n    fetchIntegerofObject: function(n, obj) {\n        var int = obj.pointers[n];\n        if (typeof int === \"number\") return int;\n        this.successFlag = false;\n        return 0;\n    },\n    fetchLong32ofObject: function(n, obj) {\n        return obj.words[n];\n    },\n    fetchFloatofObject: function(n, obj) {\n        return this.floatValueOf(obj.pointers[n]);\n    },\n    storeIntegerofObjectwithValue: function(n, obj, value) {\n        if (typeof value === \"number\")\n            obj.pointers[n] = value;\n        else this.successFlag = false;\n    },\n    storePointerofObjectwithValue: function(n, obj, value) {\n        obj.pointers[n] = value;\n    },\n    stObjectatput: function(array, index, obj) {\n        if (array.sqClass !== this.classArray()) throw Error(\"Array expected\");\n        if (index < 1 || index >= array.pointers.length) return this.successFlag = false;\n        array.pointers[index] = obj;\n    },\n},\n'constant access',\n{\n    isKindOfInteger: function(obj) {\n        return typeof obj === \"number\" ||\n            obj.sqClass == this.classLargeNegativeInteger() ||\n            obj.sqClass == this.classLargePositiveInteger();\n    },\n    classArray: function() {\n        return this.vm.specialObjects[Squeak.splOb_ClassArray];\n    },\n    classBitmap: function() {\n        return this.vm.specialObjects[Squeak.splOb_ClassBitmap];\n    },\n    classSmallInteger: function() {\n        return this.vm.specialObjects[Squeak.splOb_ClassInteger];\n    },\n    classLargePositiveInteger: function() {\n        return this.vm.specialObjects[Squeak.splOb_ClassLargePositiveInteger];\n    },\n    classLargeNegativeInteger: function() {\n        return this.vm.specialObjects[Squeak.splOb_ClassLargeNegativeInteger];\n    },\n    classPoint: function() {\n        return this.vm.specialObjects[Squeak.splOb_ClassPoint];\n    },\n    classString: function() {\n        return this.vm.specialObjects[Squeak.splOb_ClassString];\n    },\n    nilObject: function() {\n        return this.vm.nilObj;\n    },\n    falseObject: function() {\n        return this.vm.falseObj;\n    },\n    trueObject: function() {\n        return this.vm.trueObj;\n    },\n},\n'vm functions',\n{\n    instantiateClassindexableSize: function(aClass, indexableSize) {\n        return this.vm.instantiateClass(aClass, indexableSize);\n    },\n    methodArgumentCount: function() {\n        return this.argCount;\n    },\n    makePointwithxValueyValue: function(x, y) {\n        return this.vm.primHandler.makePointWithXandY(x, y);\n    },\n    pushRemappableOop: function(obj) {\n        this.remappableOops.push(obj);\n    },\n    popRemappableOop: function() {\n        return this.remappableOops.pop();\n    },\n    showDisplayBitsLeftTopRightBottom: function(form, left, top, right, bottom) {\n        if (left < right && top < bottom) {\n            var rect = {left: left, top: top, right: right, bottom: bottom};\n            this.vm.primHandler.displayDirty(form, rect);\n        }\n    },\n    ioLoadFunctionFrom: function(funcName, pluginName) {\n        return this.vm.primHandler.loadFunctionFrom(funcName, pluginName);\n    },\n});\n\n\nObject.subclass('Squeak.InstructionPrinter',\n'initialization', {\n    initialize: function(method, vm) {\n        this.method = method;\n        this.vm = vm;\n    },\n},\n'printing', {\n    printInstructions: function(indent, highlight, highlightPC) {\n        // all args are optional\n        this.indent = indent;           // prepend to every line except if highlighted\n        this.highlight = highlight;     // prepend to highlighted line\n        this.highlightPC = highlightPC; // PC of highlighted line\n        this.innerIndents = {};\n        this.result = '';\n        this.scanner = new Squeak.InstructionStream(this.method, this.vm);\n        this.oldPC = this.scanner.pc;\n        this.endPC = 0;                 // adjusted while scanning\n        this.done = false;\n        while (!this.done)\n            this.scanner.interpretNextInstructionFor(this);\n        return this.result;\n    },\n    print: function(instruction) {\n        if (this.oldPC === this.highlightPC) {\n            if (this.highlight) this.result += this.highlight;\n        } else {\n            if (this.indent) this.result += this.indent;\n        }\n        this.result += this.oldPC;\n        for (var i = 0; i < this.innerIndents[this.oldPC] || 0; i++)\n            this.result += \"   \";\n        this.result += \" <\";\n        for (var i = this.oldPC; i < this.scanner.pc; i++) {\n            if (i > this.oldPC) this.result += \" \";\n            this.result += (this.method.bytes[i]+0x100).toString(16).substr(-2).toUpperCase(); // padded hex\n        }\n        this.result += \"> \" + instruction + \"\\n\";\n        this.oldPC = this.scanner.pc;\n    }\n},\n'decoding', {\n    blockReturnTop: function() {\n        this.print('blockReturn');\n    },\n    doDup: function() {\n        this.print('dup');\n    },\n    doPop: function() {\n        this.print('pop');\n    },\n    jump: function(offset) {\n        this.print('jumpTo: ' + (this.scanner.pc + offset));\n        if (this.scanner.pc + offset > this.endPC) this.endPC = this.scanner.pc + offset;\n    },\n    jumpIf: function(condition, offset) {\n        this.print((condition ? 'jumpIfTrue: ' : 'jumpIfFalse: ') + (this.scanner.pc + offset));\n        if (this.scanner.pc + offset > this.endPC) this.endPC = this.scanner.pc + offset;\n    },\n    methodReturnReceiver: function() {\n        this.print('return: receiver');\n        this.done = this.scanner.pc > this.endPC;\n    },\n    methodReturnTop: function() {\n        this.print('return: topOfStack');\n        this.done = this.scanner.pc > this.endPC;\n    },\n    methodReturnConstant: function(obj) {\n        this.print('returnConst: ' + obj.toString());\n        this.done = this.scanner.pc > this.endPC;\n    },\n    popIntoLiteralVariable: function(anAssociation) {\n        this.print('popIntoBinding: ' + anAssociation.assnKeyAsString());\n    },\n    popIntoReceiverVariable: function(offset) {\n        this.print('popIntoInstVar: ' + offset);\n    },\n    popIntoTemporaryVariable: function(offset) {\n        this.print('popIntoTemp: ' + offset);\n    },\n    pushActiveContext: function() {\n        this.print('push: thisContext');\n    },\n    pushConstant: function(obj) {\n        var value = obj.sqInstName ? obj.sqInstName() : obj.toString();\n        this.print('pushConst: ' + value);\n    },\n    pushLiteralVariable: function(anAssociation) {\n        this.print('pushBinding: ' + anAssociation.assnKeyAsString());\n    },\n    pushReceiver: function() {\n        this.print('push: self');\n    },\n    pushReceiverVariable: function(offset) {\n        this.print('pushInstVar: ' + offset);\n    },\n    pushTemporaryVariable: function(offset) {\n        this.print('pushTemp: ' + offset);\n    },\n    send: function(selector, numberArguments, supered) {\n        this.print( (supered ? 'superSend: #' : 'send: #') + (selector.bytesAsString ? selector.bytesAsString() : selector));\n    },\n    storeIntoLiteralVariable: function(anAssociation) {\n        this.print('storeIntoBinding: ' + anAssociation.assnKeyAsString());\n    },\n    storeIntoReceiverVariable: function(offset) {\n        this.print('storeIntoInstVar: ' + offset);\n    },\n    storeIntoTemporaryVariable: function(offset) {\n        this.print('storeIntoTemp: ' + offset);\n    },\n    pushNewArray: function(size) {\n        this.print('push: (Array new: ' + size + ')');\n    },\n    popIntoNewArray: function(numElements) {\n        this.print('pop: ' + numElements + ' into: (Array new: ' + numElements + ')');\n    },\n    pushRemoteTemp: function(offset , arrayOffset) {\n        this.print('push: ' + offset + ' ofTemp: ' + arrayOffset);\n    },\n    storeIntoRemoteTemp: function(offset , arrayOffset) {\n        this.print('storeInto: ' + offset + ' ofTemp: ' + arrayOffset);\n    },\n    popIntoRemoteTemp: function(offset , arrayOffset) {\n        this.print('popInto: ' + offset + ' ofTemp: ' + arrayOffset);\n    },\n    pushClosureCopy: function(numCopied, numArgs, blockSize) {\n        var from = this.scanner.pc,\n            to = from + blockSize;\n        this.print('closure(' + from + '-' + (to-1) + '): ' + numCopied + ' copied, ' + numArgs + ' args');\n        for (var i = from; i < to; i++)\n            this.innerIndents[i] = (this.innerIndents[i] || 0) + 1;\n        if (to > this.endPC) this.endPC = to;\n    },\n    callPrimitive: function(primitiveIndex) {\n        this.print('primitive: ' + primitiveIndex);\n    },\n});\n\nObject.subclass('Squeak.InstructionStream',\n'initialization', {\n    initialize: function(method, vm) {\n        this.vm = vm;\n        this.method = method;\n        this.pc = 0;\n        this.specialConstants = [vm.trueObj, vm.falseObj, vm.nilObj, -1, 0, 1, 2];\n    },\n},\n'decoding',\n{\n    interpretNextInstructionFor: function(client) {\n        // Send to the argument, client, a message that specifies the type of the next instruction.\n        var method = this.method;\n        var byte = method.bytes[this.pc++];\n        var type = (byte / 16) | 0;\n        var offset = byte % 16;\n        if (type === 0) return client.pushReceiverVariable(offset);\n        if (type === 1) return client.pushTemporaryVariable(offset);\n        if (type === 2) return client.pushConstant(method.methodGetLiteral(offset));\n        if (type === 3) return client.pushConstant(method.methodGetLiteral(offset + 16));\n        if (type === 4) return client.pushLiteralVariable(method.methodGetLiteral(offset));\n        if (type === 5) return client.pushLiteralVariable(method.methodGetLiteral(offset + 16));\n        if (type === 6)\n            if (offset<8) return client.popIntoReceiverVariable(offset)\n            else return client.popIntoTemporaryVariable(offset-8);\n        if (type === 7) {\n            if (offset===0) return client.pushReceiver()\n            if (offset < 8) return client.pushConstant(this.specialConstants[offset - 1])\n            if (offset===8) return client.methodReturnReceiver();\n            if (offset < 12) return client.methodReturnConstant(this.specialConstants[offset - 9]);\n            if (offset===12) return client.methodReturnTop();\n            if (offset===13) return client.blockReturnTop();\n            if (offset > 13) throw Error(\"unusedBytecode\");\n        }\n        if (type === 8) return this.interpretExtension(offset, method, client);\n        if (type === 9) // short jumps\n                if (offset<8) return client.jump(offset+1);\n                else return client.jumpIf(false, offset-8+1);\n        if (type === 10) {// long jumps\n            byte = this.method.bytes[this.pc++];\n            if (offset<8) return client.jump((offset-4)*256 + byte);\n            else return client.jumpIf(offset<12, (offset & 3)*256 + byte);\n        }\n        if (type === 11)\n            return client.send(this.vm.specialSelectors[2 * offset],\n                this.vm.specialSelectors[2 * offset + 1],\n                false);\n        if (type === 12)\n            return client.send(this.vm.specialSelectors[2 * (offset + 16)],\n                this.vm.specialSelectors[2 * (offset + 16) + 1],\n                false);\n        if (type > 12)\n            return client.send(method.methodGetLiteral(offset), type-13, false);\n    },\n    interpretExtension: function(offset, method, client) {\n        if (offset <= 6) { // Extended op codes 128-134\n            var byte2 = this.method.bytes[this.pc++];\n            if (offset <= 2) { // 128-130:  extended pushes and pops\n                var type = byte2 / 64 | 0;\n                var offset2 = byte2 % 64;\n                if (offset === 0) {\n                    if (type === 0) return client.pushReceiverVariable(offset2);\n                    if (type === 1) return client.pushTemporaryVariable(offset2);\n                    if (type === 2) return client.pushConstant(this.method.methodGetLiteral(offset2));\n                    if (type === 3) return client.pushLiteralVariable(this.method.methodGetLiteral(offset2));\n                }\n                if (offset === 1) {\n                    if (type === 0) return client.storeIntoReceiverVariable(offset2);\n                    if (type === 1) return client.storeIntoTemporaryVariable(offset2);\n                    if (type === 2) throw Error(\"illegalStore\");\n                    if (type === 3) return client.storeIntoLiteralVariable(this.method.methodGetLiteral(offset2));\n                }\n                if (offset === 2) {\n                    if (type === 0) return client.popIntoReceiverVariable(offset2);\n                    if (type === 1) return client.popIntoTemporaryVariable(offset2);\n                    if (type === 2) throw Error(\"illegalStore\");\n                    if (type === 3) return client.popIntoLiteralVariable(this.method.methodGetLiteral(offset2));\n                }\n            }\n            // 131-134 (extended sends)\n            if (offset === 3) // Single extended send\n                return client.send(this.method.methodGetLiteral(byte2 % 32), byte2 / 32 | 0, false);\n            if (offset === 4) { // Double extended do-anything\n                var byte3 = this.method.bytes[this.pc++];\n                var type = byte2 / 32 | 0;\n                if (type === 0) return client.send(this.method.methodGetLiteral(byte3), byte2 % 32, false);\n                if (type === 1) return client.send(this.method.methodGetLiteral(byte3), byte2 % 32, true);\n                if (type === 2) return client.pushReceiverVariable(byte3);\n                if (type === 3) return client.pushConstant(this.method.methodGetLiteral(byte3));\n                if (type === 4) return client.pushLiteralVariable(this.method.methodGetLiteral(byte3));\n                if (type === 5) return client.storeIntoReceiverVariable(byte3);\n                if (type === 6) return client.popIntoReceiverVariable(byte3);\n                if (type === 7) return client.storeIntoLiteralVariable(this.method.methodGetLiteral(byte3));\n            }\n            if (offset === 5) // Single extended send to super\n                return client.send(this.method.methodGetLiteral(byte2 & 31), byte2 >> 5, true);\n            if (offset === 6) // Second extended send\n                return client.send(this.method.methodGetLiteral(byte2 & 63), byte2 >> 6, false);\n        }\n        if (offset === 7) return client.doPop();\n        if (offset === 8) return client.doDup();\n        if (offset === 9) return client.pushActiveContext();\n        // closures\n        var byte2 = this.method.bytes[this.pc++];\n        if (offset === 10)\n            return byte2 < 128 ? client.pushNewArray(byte2) : client.popIntoNewArray(byte2 - 128);\n        var byte3 = this.method.bytes[this.pc++];\n        if (offset === 11) return client.callPrimitive(byte2 + 256 * byte3);\n        if (offset === 12) return client.pushRemoteTemp(byte2, byte3);\n        if (offset === 13) return client.storeIntoRemoteTemp(byte2, byte3);\n        if (offset === 14) return client.popIntoRemoteTemp(byte2, byte3);\n        // offset === 15\n        var byte4 = this.method.bytes[this.pc++];\n        return client.pushClosureCopy(byte2 >> 4, byte2 & 0xF, (byte3 * 256) + byte4);\n    }\n});\n\n}) // end of module\n","module('users.bert.SqueakJS.jit').requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";\n/*\n * Copyright (c) 2014-2016 Bert Freudenberg\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nObject.subclass('Squeak.Compiler',\n\n/****************************************************************************\n\nVM and Compiler\n===============\n\nThe VM has an interpreter, it will work fine (and much more memory-efficient)\nwithout loading a compiler. The compiler plugs into the VM by providing the\nSqueak.Compiler global. It can be easily replaced by just loading a different\nscript providing Squeak.Compiler.\n\nThe VM creates the compiler instance after an image has been loaded and the VM\nbeen initialized. Whenever a method is activated that was not compiled yet, the\ncompiler gets a chance to compile it. The compiler may decide to wait for a couple\nof activations before actually compiling it. This might prevent do-its from ever\ngetting compiled, because they are only activated once. Therefore, the compiler\nis also called when a long-running non-optimized loop calls checkForInterrupts.\nFinally, whenever the interpreter is about to execute a bytecode, it calls the\ncompiled method instead (which typically will execute many bytecodes):\n\n    initialize:\n        compiler = new Squeak.Compiler(vm);\n\n    executeNewMethod, checkForInterrupts:\n        if (!method.compiled && compiler)\n            compiler.compile(method);\n\n    interpret:\n        if (method.compiled) method.compiled(vm);\n\nNote that a compiler could hook itself into a compiled method by dispatching\nto vm.compiler in the generated code. This would allow gathering statistics,\nrecompiling with optimized code etc.\n\n\nAbout This Compiler\n===================\n\nThe compiler in this file is meant to be simple, fast-compiling, and general.\nIt transcribes bytecodes 1-to-1 into equivalent JavaScript code using\ntemplates (and thus can even support single-stepping). It uses the\ninterpreter's stack pointer (SP) and program counter (PC), actual context\nobjects just like the interpreter, no register mapping, it does not optimize\nsends, etc.\n\nJumps are handled by wrapping the whole method in a loop and switch. This also\nenables continuing in the middle of a compiled method: whenever another context\nis activated, the method returns to the main loop, and is entered again later\nwith a different PC. Here is an example method, its bytecodes, and a simplified\nversion of the generated JavaScript code:\n\n    method\n        [value selector] whileFalse.\n        ^ 42\n\n    0 <00> pushInstVar: 0\n    1 <D0> send: #selector\n    2 <A8 02> jumpIfTrue: 6\n    4 <A3 FA> jumpTo: 0\n    6 <21> pushConst: 42\n    7 <7C> return: topOfStack\n\n    while (true) switch (vm.pc) {\n    case 0:\n        stack[++vm.sp] = inst[0];\n        vm.pc = 2; vm.send(#selector);\n        return 0;\n    case 2:\n        if (stack[vm.sp--] === vm.trueObj) {\n            vm.pc = 6;\n            continue; // jump to case 6\n        }\n        // otherwise fall through to next case\n    case 4:\n        vm.pc = 0;\n        continue; // jump to case 0\n    case 6:\n        stack[++vm.sp] = 42;\n        vm.pc = 7; vm.doReturn(stack[vm.sp]);\n        return 0;\n    }\n\nThe compiled method should return the number of bytecodes executed, but for\nstatistical purposes only. It's fine to return 0.\n\nDebugging support\n=================\n\nThis compiler supports generating single-stepping code and comments, which are\nrather helpful during debugging.\n\nNormally, only bytecodes that can be a jump target are given a label. Also,\nbytecodes following a send operation need a label, to enable returning to that\nspot after the context switch. All other bytecodes are executed continuously.\n\nWhen compiling for single-stepping, each bytecode gets a label, and after each\nbytecode a flag is checked and the method returns if needed. Because this is\na performance penalty, methods are first compiled without single-step support,\nand recompiled for single-stepping on demand.\n\nThis is optional, another compiler can answer false from enableSingleStepping().\nIn that case the VM will delete the compiled method and invoke the interpreter\nto single-step.\n\n*****************************************************************************/\n\n'initialization', {\n    initialize: function(vm) {\n        this.vm = vm;\n        this.comments = !!Squeak.Compiler.comments, // generate comments\n        // for debug-printing only\n        this.specialSelectors = ['+', '-', '<', '>', '<=', '>=', '=', '~=', '*', '/', '\\\\', '@',\n            'bitShift:', '//', 'bitAnd:', 'bitOr:', 'at:', 'at:put:', 'size', 'next', 'nextPut:',\n            'atEnd', '==', 'class', 'blockCopy:', 'value', 'value:', 'do:', 'new', 'new:', 'x', 'y'];\n    },\n},\n'accessing', {\n    compile: function(method, optClass, optSel) {\n        if (!method.isHot) {\n            // 1st time\n            method.isHot = true;\n        } else {\n            // 2nd time\n            this.singleStep = false;\n            this.debug = this.comments;\n            var clsName = optClass && optClass.className(),\n                sel = optSel && optSel.bytesAsString();\n            method.compiled = this.generate(method, clsName, sel);\n        }\n    },\n    enableSingleStepping: function(method, optClass, optSel) {\n        // recompile method for single-stepping\n        if (!method.compiled || !method.compiled.canSingleStep) {\n            this.singleStep = true; // generate breakpoint support\n            this.debug = true;\n            var clsAndSel = this.vm.printMethod(method, optClass, optSel).split(\">>\");    // likely expensive\n            method.compiled = this.generate(method, clsAndSel[0], clsAndSel[1]);\n            method.compiled.canSingleStep = true;\n        }\n        // if a compiler does not support single-stepping, return false\n        return true;\n    },\n    functionNameFor: function(cls, sel) {\n        if (!cls || !sel) return \"Squeak_DOIT\";\n        if (!/[^a-zA-Z0-9:_]/.test(sel))\n            return (cls + \"_\" + sel).replace(/[: ]/g, \"_\");\n        var op = sel.replace(/./g, function(char) {\n            var repl = {'|': \"OR\", '~': \"NOT\", '<': \"LT\", '=': \"EQ\", '>': \"GT\",\n                    '&': \"AND\", '@': \"AT\", '*': \"TIMES\", '+': \"PLUS\", '\\\\': \"MOD\",\n                    '-': \"MINUS\", ',': \"COMMA\", '/': \"DIV\", '?': \"IF\"}[char];\n            return repl || 'OPERATOR';\n        });\n        return cls.replace(/[ ]/, \"_\") + \"__\" + op + \"__\";\n    },\n},\n'generating',\n{\n    generate: function(method, optClass, optSel) {\n        this.method = method;\n        this.pc = 0;                // next bytecode\n        this.endPC = 0;             // pc of furthest jump target\n        this.prevPC = 0;            // pc at start of current instruction\n        this.source = [];           // snippets will be joined in the end\n        this.sourceLabels = {};     // source pos of generated labels\n        this.needsLabel = {0: true}; // jump targets\n        this.needsBreak = false;    // insert break check for previous bytecode\n        if (optClass && optSel)\n            this.source.push(\"// \", optClass, \">>\", optSel, \"\\n\");\n        this.source.push(\n            \"var context = vm.activeContext,\\n\",\n            \"    stack = context.pointers,\\n\",\n            \"    rcvr = vm.receiver,\\n\",\n            \"    inst = rcvr.pointers,\\n\",\n            \"    temp = vm.homeContext.pointers,\\n\",\n            \"    lit = vm.method.pointers,\\n\",\n            \"    bytecodes = 0 - vm.pc;\\n\",\n            \"while (true) switch (vm.pc) {\\n\"\n        );\n        this.done = false;\n        while (!this.done) {\n            var byte = method.bytes[this.pc++],\n                byte2 = 0;\n            switch (byte & 0xF8) {\n                // load receiver variable\n                case 0x00: case 0x08:\n                    this.generatePush(\"inst[\", byte & 0x0F, \"]\");\n                    break;\n                // load temporary variable\n                case 0x10: case 0x18:\n                    this.generatePush(\"temp[\", 6 + (byte & 0xF), \"]\");\n                    break;\n                // loadLiteral\n                case 0x20: case 0x28: case 0x30: case 0x38:\n                    this.generatePush(\"lit[\", 1 + (byte & 0x1F), \"]\");\n                    break;\n                // loadLiteralIndirect\n                case 0x40: case 0x48: case 0x50: case 0x58:\n                    this.generatePush(\"lit[\", 1 + (byte & 0x1F), \"].pointers[1]\");\n                    break;\n                // storeAndPop rcvr\n                case 0x60:\n                    this.generatePopInto(\"inst[\", byte & 0x07, \"]\");\n                    break;\n                // storeAndPop temp\n                case 0x68:\n                    this.generatePopInto(\"temp[\", 6 + (byte & 0x07), \"]\");\n                    break;\n                // Quick push\n                case 0x70:\n                    switch (byte) {\n                        case 0x70: this.generatePush(\"rcvr\"); break;\n                        case 0x71: this.generatePush(\"vm.trueObj\"); break;\n                        case 0x72: this.generatePush(\"vm.falseObj\"); break;\n                        case 0x73: this.generatePush(\"vm.nilObj\"); break;\n                        case 0x74: this.generatePush(\"-1\"); break;\n                        case 0x75: this.generatePush(\"0\"); break;\n                        case 0x76: this.generatePush(\"1\"); break;\n                        case 0x77: this.generatePush(\"2\"); break;\n                    }\n                    break;\n                // Quick return\n                case 0x78:\n                    switch (byte) {\n                        case 0x78: this.generateReturn(\"rcvr\"); break;\n                        case 0x79: this.generateReturn(\"vm.trueObj\"); break;\n                        case 0x7A: this.generateReturn(\"vm.falseObj\"); break;\n                        case 0x7B: this.generateReturn(\"vm.nilObj\"); break;\n                        case 0x7C: this.generateReturn(\"stack[vm.sp]\"); break;\n                        case 0x7D: this.generateBlockReturn(); break;\n                        default: throw Error(\"unusedBytecode\");\n                    }\n                    break;\n                // Extended bytecodes\n                case 0x80: case 0x88:\n                    this.generateExtended(byte);\n                    break;\n                // short jump\n                case 0x90:\n                    this.generateJump((byte & 0x07) + 1);\n                    break;\n                // short conditional jump\n                case 0x98:\n                    this.generateJumpIf(false, (byte & 0x07) + 1);\n                    break;\n                // long jump, forward and back\n                case 0xA0:\n                    byte2 = method.bytes[this.pc++];\n                    this.generateJump(((byte&7)-4) * 256 + byte2);\n                    break;\n                // long conditional jump\n                case 0xA8:\n                    byte2 = method.bytes[this.pc++];\n                    this.generateJumpIf(byte < 0xAC, (byte & 3) * 256 + byte2);\n                    break;\n                // SmallInteger ops: + - < > <= >= = ~= * /  @ lshift: lxor: land: lor:\n                case 0xB0: case 0xB8:\n                    this.generateNumericOp(byte);\n                    break;\n                // quick primitives: // at:, at:put:, size, next, nextPut:, ...\n                case 0xC0: case 0xC8:\n                    this.generateQuickPrim(byte);\n                    break;\n                // send literal selector\n                case 0xD0: case 0xD8:\n                    this.generateSend(\"lit[\", 1 + (byte & 0x0F), \"]\", 0, false);\n                    break;\n                case 0xE0: case 0xE8:\n                    this.generateSend(\"lit[\", 1 + (byte & 0x0F), \"]\", 1, false);\n                    break;\n                case 0xF0: case 0xF8:\n                    this.generateSend(\"lit[\", 1 + (byte & 0x0F), \"]\", 2, false);\n                    break;\n            }\n        }\n        var funcName = this.functionNameFor(optClass, optSel);\n        if (this.singleStep) {\n            if (this.debug) this.source.push(\"// all valid PCs have a label;\\n\");\n            this.source.push(\"default: throw Error('invalid PC'); }\"); // all PCs handled\n            return new Function(\"return function \" + funcName + \"(vm, singleStep) {\\n\" + this.source.join(\"\") + \"\\n}\")();\n        } else {\n            if (this.debug) this.source.push(\"// fall back to single-stepping\\n\");\n            this.source.push(\"default: bytecodes += vm.pc; vm.interpretOne(true); return bytecodes;}\");\n            this.deleteUnneededLabels();\n            return new Function(\"return function \" + funcName + \"(vm) {\\n\" + this.source.join(\"\") + \"\\n}\")();\n        }\n    },\n    generateExtended: function(bytecode) {\n        var byte2, byte3;\n        switch (bytecode) {\n            // extended push\n            case 0x80:\n                byte2 = this.method.bytes[this.pc++];\n                switch (byte2 >> 6) {\n                    case 0: this.generatePush(\"inst[\", byte2 & 0x3F, \"]\"); return;\n                    case 1: this.generatePush(\"temp[\", 6 + (byte2 & 0x3F), \"]\"); return;\n                    case 2: this.generatePush(\"lit[\", 1 + (byte2 & 0x3F), \"]\"); return;\n                    case 3: this.generatePush(\"lit[\", 1 + (byte2 & 0x3F), \"].pointers[1]\"); return;\n                }\n            // extended store\n            case 0x81:\n                byte2 = this.method.bytes[this.pc++];\n                switch (byte2 >> 6) {\n                    case 0: this.generateStoreInto(\"inst[\", byte2 & 0x3F, \"]\"); return;\n                    case 1: this.generateStoreInto(\"temp[\", 6 + (byte2 & 0x3F), \"]\"); return;\n                    case 2: throw Error(\"illegal store into literal\");\n                    case 3: this.generateStoreInto(\"lit[\", 1 + (byte2 & 0x3F), \"].pointers[1]\"); return;\n                }\n                return;\n            // extended pop into\n            case 0x82:\n                byte2 = this.method.bytes[this.pc++];\n                switch (byte2 >> 6) {\n                    case 0: this.generatePopInto(\"inst[\", byte2 & 0x3F, \"]\"); return;\n                    case 1: this.generatePopInto(\"temp[\", 6 + (byte2 & 0x3F), \"]\"); return;\n                    case 2: throw Error(\"illegal pop into literal\");\n                    case 3: this.generatePopInto(\"lit[\", 1 + (byte2 & 0x3F), \"].pointers[1]\"); return;\n                }\n            // Single extended send\n            case 0x83:\n                byte2 = this.method.bytes[this.pc++];\n                this.generateSend(\"lit[\", 1 + (byte2 & 0x1F), \"]\", byte2 >> 5, false);\n                return;\n            // Double extended do-anything\n            case 0x84:\n                byte2 = this.method.bytes[this.pc++];\n                byte3 = this.method.bytes[this.pc++];\n                switch (byte2 >> 5) {\n                    case 0: this.generateSend(\"lit[\", 1 + byte3, \"]\", byte2 & 31, false); return;\n                    case 1: this.generateSend(\"lit[\", 1 + byte3, \"]\", byte2 & 31, true); return;\n                    case 2: this.generatePush(\"inst[\", byte3, \"]\"); return;\n                    case 3: this.generatePush(\"lit[\", 1 + byte3, \"]\"); return;\n                    case 4: this.generatePush(\"lit[\", 1 + byte3, \"].pointers[1]\"); return;\n                    case 5: this.generateStoreInto(\"inst[\", byte3, \"]\"); return;\n                    case 6: this.generatePopInto(\"inst[\", byte3, \"]\"); return;\n                    case 7: this.generateStoreInto(\"lit[\", 1 + byte3, \"].pointers[1]\"); return;\n                }\n            // Single extended send to super\n            case 0x85:\n                byte2 = this.method.bytes[this.pc++];\n                this.generateSend(\"lit[\", 1 + (byte2 & 0x1F), \"]\", byte2 >> 5, true);\n                return;\n            // Second extended send\n            case 0x86:\n                 byte2 = this.method.bytes[this.pc++];\n                 this.generateSend(\"lit[\", 1 + (byte2 & 0x3F), \"]\", byte2 >> 6, false);\n                 return;\n            // pop\n            case 0x87:\n                this.generateInstruction(\"pop\", \"vm.sp--\");\n                return;\n            // dup\n            case 0x88:\n                this.generateInstruction(\"dup\", \"var dup = stack[vm.sp]; stack[++vm.sp] = dup\");\n                return;\n            // thisContext\n            case 0x89:\n                this.generateInstruction(\"thisContext\", \"stack[++vm.sp] = vm.exportThisContext()\");\n                return;\n            // closures\n            case 0x8A:\n                byte2 = this.method.bytes[this.pc++];\n                var popValues = byte2 > 127,\n                    count = byte2 & 127;\n                this.generateClosureTemps(count, popValues);\n                return;\n            // call primitive\n            case 0x8B:\n                byte2 = this.method.bytes[this.pc++];\n                byte3 = this.method.bytes[this.pc++];\n                this.generateCallPrimitive(byte2 + 256 * byte3);\n                return\n            // remote push from temp vector\n            case 0x8C:\n                byte2 = this.method.bytes[this.pc++];\n                byte3 = this.method.bytes[this.pc++];\n                this.generatePush(\"temp[\", 6 + byte3, \"].pointers[\", byte2, \"]\");\n                return;\n            // remote store into temp vector\n            case 0x8D:\n                byte2 = this.method.bytes[this.pc++];\n                byte3 = this.method.bytes[this.pc++];\n                this.generateStoreInto(\"temp[\", 6 + byte3, \"].pointers[\", byte2, \"]\");\n                return;\n            // remote store and pop into temp vector\n            case 0x8E:\n                byte2 = this.method.bytes[this.pc++];\n                byte3 = this.method.bytes[this.pc++];\n                this.generatePopInto(\"temp[\", 6 + byte3, \"].pointers[\", byte2, \"]\");\n                return;\n            // pushClosureCopy\n            case 0x8F:\n                byte2 = this.method.bytes[this.pc++];\n                byte3 = this.method.bytes[this.pc++];\n                var byte4 = this.method.bytes[this.pc++];\n                var numArgs = byte2 & 0xF,\n                    numCopied = byte2 >> 4,\n                    blockSize = byte3 << 8 | byte4;\n                this.generateClosureCopy(numArgs, numCopied, blockSize);\n                return;\n        }\n    },\n    generatePush: function(value, arg1, suffix1, arg2, suffix2) {\n        if (this.debug) this.generateDebugCode(\"push\");\n        this.generateLabel();\n        this.source.push(\"stack[++vm.sp] = \", value);\n        if (arg1 !== undefined) {\n            this.source.push(arg1, suffix1);\n            if (arg2 !== undefined) {\n                this.source.push(arg2, suffix2);\n            }\n        }\n        this.source.push(\";\\n\");\n    },\n    generateStoreInto: function(value, arg1, suffix1, arg2, suffix2) {\n        if (this.debug) this.generateDebugCode(\"store into\");\n        this.generateLabel();\n        this.source.push(value);\n        if (arg1 !== undefined) {\n            this.source.push(arg1, suffix1);\n            if (arg2 !== undefined) {\n                this.source.push(arg2, suffix2);\n            }\n        }\n        this.source.push(\" = stack[vm.sp];\\n\");\n    },\n    generatePopInto: function(value, arg1, suffix1, arg2, suffix2) {\n        if (this.debug) this.generateDebugCode(\"pop into\");\n        this.generateLabel();\n        this.source.push(value);\n        if (arg1 !== undefined) {\n            this.source.push(arg1, suffix1);\n            if (arg2 !== undefined) {\n                this.source.push(arg2, suffix2);\n            }\n        }\n        this.source.push(\" = stack[vm.sp--];\\n\");\n    },\n    generateReturn: function(what) {\n        if (this.debug) this.generateDebugCode(\"return\");\n        this.generateLabel();\n        this.source.push(\n            \"vm.pc = \", this.pc, \"; vm.doReturn(\", what, \"); return bytecodes + \", this.pc, \";\\n\");\n        this.needsBreak = false; // returning anyway\n        this.done = this.pc > this.endPC;\n    },\n    generateBlockReturn: function() {\n        if (this.debug) this.generateDebugCode(\"block return\");\n        this.generateLabel();\n        // actually stack === context.pointers but that would look weird\n        this.source.push(\n            \"vm.pc = \", this.pc, \"; vm.doReturn(stack[vm.sp--], context.pointers[0]); return bytecodes + \", this.pc, \";\\n\");\n        this.needsBreak = false; // returning anyway\n    },\n    generateJump: function(distance) {\n        var destination = this.pc + distance;\n        if (this.debug) this.generateDebugCode(\"jump to \" + destination);\n        this.generateLabel();\n        this.source.push(\"vm.pc = \", destination, \"; \");\n        if (distance < 0) this.source.push(\"bytecodes += \", -distance, \"; \");\n        else this.source.push(\"bytecodes -= \", distance, \"; \");\n        if (distance < 0) this.source.push(\n            \"\\nif (vm.interruptCheckCounter-- <= 0) {\\n\",\n            \"   vm.checkForInterrupts();\\n\",\n            \"   if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return bytecodes + \", destination, \";\\n\",\n            \"}\\n\");\n        if (this.singleStep) this.source.push(\"\\nif (vm.breakOutOfInterpreter) return bytecodes + \", destination, \";\\n\");\n        this.source.push(\"continue;\\n\");\n        this.needsBreak = false; // already checked\n        this.needsLabel[destination] = true;\n        if (destination > this.endPC) this.endPC = destination;\n    },\n    generateJumpIf: function(condition, distance) {\n        var destination = this.pc + distance;\n        if (this.debug) this.generateDebugCode(\"jump if \" + condition + \" to \" + destination);\n        this.generateLabel();\n        this.source.push(\n            \"var cond = stack[vm.sp--]; if (cond === vm.\", condition, \"Obj) {vm.pc = \", destination, \"; bytecodes -= \", distance, \"; \");\n        if (this.singleStep) this.source.push(\"if (vm.breakOutOfInterpreter) return bytecodes + \", destination,\"; else \");\n        this.source.push(\"continue}\\n\",\n            \"else if (cond !== vm.\", !condition, \"Obj) {vm.sp++; vm.pc = \", this.pc, \"; vm.send(vm.specialObjects[25], 0, false); return bytecodes + \", this.pc, \"}\\n\");\n        this.needsLabel[this.pc] = true; // for coming back after #mustBeBoolean send\n        this.needsLabel[destination] = true; // obviously\n        if (destination > this.endPC) this.endPC = destination;\n    },\n    generateQuickPrim: function(byte) {\n        if (this.debug) this.generateDebugCode(\"quick prim \" + this.specialSelectors[(byte & 0x0F) + 16]);\n        this.generateLabel();\n        switch (byte) {\n            //case 0xC0: return this.popNandPushIfOK(2, this.objectAt(true,true,false)); // at:\n            //case 0xC1: return this.popNandPushIfOK(3, this.objectAtPut(true,true,false)); // at:put:\n            case 0xC2: // size\n                this.source.push(\n                    \"if (stack[vm.sp].sqClass === vm.specialObjects[7]) stack[vm.sp] = stack[vm.sp].pointersSize();\\n\",\n                    \"else if (stack[vm.sp].sqClass === vm.specialObjects[6]) stack[vm.sp] = stack[vm.sp].bytesSize();\\n\",\n                    \"else { vm.pc = \", this.pc, \"; vm.sendSpecial(18); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return bytecodes + \", this.pc, \"; }\\n\");\n                this.needsLabel[this.pc] = true;\n                return;\n            //case 0xC3: return false; // next\n            //case 0xC4: return false; // nextPut:\n            //case 0xC5: return false; // atEnd\n            case 0xC6: // ==\n                this.source.push(\"var cond = stack[vm.sp-1] === stack[vm.sp];\\nstack[--vm.sp] = cond ? vm.trueObj : vm.falseObj;\\n\");\n                return;\n            case 0xC7: // class\n                this.source.push(\"stack[vm.sp] = typeof stack[vm.sp] === 'number' ? vm.specialObjects[5] : stack[vm.sp].sqClass;\\n\");\n                return;\n            case 0xC8: // blockCopy:\n                this.source.push(\n                    \"vm.pc = \", this.pc, \"; if (!vm.primHandler.quickSendOther(rcvr, \", (byte & 0x0F), \")) \",\n                    \"{vm.sendSpecial(\", ((byte & 0x0F) + 16), \"); return bytecodes + \", this.pc, \"}\\n\");\n                this.needsLabel[this.pc] = true;        // for send\n                this.needsLabel[this.pc + 2] = true;    // for start of block\n                return;\n            case 0xC9: // value\n            case 0xCA: // value:\n            case 0xCB: // do:\n                this.source.push(\n                    \"vm.pc = \", this.pc, \"; if (!vm.primHandler.quickSendOther(rcvr, \", (byte & 0x0F), \")) vm.sendSpecial(\", ((byte & 0x0F) + 16), \"); return bytecodes + \", this.pc, \";\\n\");\n                this.needsLabel[this.pc] = true;\n                return;\n            //case 0xCC: return false; // new\n            //case 0xCD: return false; // new:\n            //case 0xCE: return false; // x\n            //case 0xCF: return false; // y\n        }\n        // generic version for the bytecodes not yet handled above\n        this.source.push(\n            \"vm.pc = \", this.pc, \"; if (!vm.primHandler.quickSendOther(rcvr, \", (byte & 0x0F), \"))\",\n            \" vm.sendSpecial(\", ((byte & 0x0F) + 16), \");\\n\",\n            \"if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return bytecodes + \", this.pc, \";\\n\",\n            \"if (vm.pc !== \", this.pc, \") throw Error('Huh?');\\n\");\n        this.needsBreak = false; // already checked\n        // if falling back to a full send we need a label for coming back\n        this.needsLabel[this.pc] = true;\n    },\n    generateNumericOp: function(byte) {\n        if (this.debug) this.generateDebugCode(\"numeric op \" + this.specialSelectors[byte & 0x0F]);\n        this.generateLabel();\n        // if the op cannot be executed here, do a full send and return to main loop\n        // we need a label for coming back\n        this.needsLabel[this.pc] = true;\n        switch (byte) {\n            case 0xB0: // PLUS +\n                this.source.push(\"var a = stack[vm.sp - 1], b = stack[vm.sp];\\n\",\n                \"if (typeof a === 'number' && typeof b === 'number') {\\n\",\n                \"   stack[--vm.sp] = vm.primHandler.signed32BitIntegerFor(a + b);\\n\",\n                \"} else { vm.pc = \", this.pc, \"; vm.sendSpecial(0); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return bytecodes + \", this.pc, \"}\\n\");\n                return;\n            case 0xB1: // MINUS -\n                this.source.push(\"var a = stack[vm.sp - 1], b = stack[vm.sp];\\n\",\n                \"if (typeof a === 'number' && typeof b === 'number') {\\n\",\n                \"   stack[--vm.sp] = vm.primHandler.signed32BitIntegerFor(a - b);\\n\",\n                \"} else { vm.pc = \", this.pc, \"; vm.sendSpecial(1); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return bytecodes + \", this.pc, \"}\\n\");\n                return;\n            case 0xB2: // LESS <\n                this.source.push(\"var a = stack[vm.sp - 1], b = stack[vm.sp];\\n\",\n                \"if (typeof a === 'number' && typeof b === 'number') {\\n\",\n                \"   stack[--vm.sp] = a < b ? vm.trueObj : vm.falseObj;\\n\",\n                \"} else { vm.pc = \", this.pc, \"; vm.sendSpecial(2); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return bytecodes + \", this.pc, \"}\\n\");\n                return;\n            case 0xB3: // GRTR >\n                this.source.push(\"var a = stack[vm.sp - 1], b = stack[vm.sp];\\n\",\n                \"if (typeof a === 'number' && typeof b === 'number') {\\n\",\n                \"   stack[--vm.sp] = a > b ? vm.trueObj : vm.falseObj;\\n\",\n                \"} else { vm.pc = \", this.pc, \"; vm.sendSpecial(3); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return bytecodes + \", this.pc, \"}\\n\");\n                return;\n            case 0xB4: // LEQ <=\n                this.source.push(\"var a = stack[vm.sp - 1], b = stack[vm.sp];\\n\",\n                \"if (typeof a === 'number' && typeof b === 'number') {\\n\",\n                \"   stack[--vm.sp] = a <= b ? vm.trueObj : vm.falseObj;\\n\",\n                \"} else { vm.pc = \", this.pc, \"; vm.sendSpecial(4); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return bytecodes + \", this.pc, \"}\\n\");\n                return;\n            case 0xB5: // GEQ >=\n                this.source.push(\"var a = stack[vm.sp - 1], b = stack[vm.sp];\\n\",\n                \"if (typeof a === 'number' && typeof b === 'number') {\\n\",\n                \"   stack[--vm.sp] = a >= b ? vm.trueObj : vm.falseObj;\\n\",\n                \"} else { vm.pc = \", this.pc, \"; vm.sendSpecial(5); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return bytecodes + \", this.pc, \"}\\n\");\n                return;\n            case 0xB6: // EQU =\n                this.source.push(\"var a = stack[vm.sp - 1], b = stack[vm.sp];\\n\",\n                \"if (typeof a === 'number' && typeof b === 'number') {\\n\",\n                \"   stack[--vm.sp] = a === b ? vm.trueObj : vm.falseObj;\\n\",\n                \"} else if (a === b && a.float === a.float) {\\n\",   // NaN check\n                \"   stack[--vm.sp] = vm.trueObj;\\n\",\n                \"} else { vm.pc = \", this.pc, \"; vm.sendSpecial(6); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return bytecodes + \", this.pc, \"}\\n\");\n                return;\n            case 0xB7: // NEQ ~=\n                this.source.push(\"var a = stack[vm.sp - 1], b = stack[vm.sp];\\n\",\n                \"if (typeof a === 'number' && typeof b === 'number') {\\n\",\n                \"   stack[--vm.sp] = a !== b ? vm.trueObj : vm.falseObj;\\n\",\n                \"} else if (a === b && a.float === a.float) {\\n\",   // NaN check\n                \"   stack[--vm.sp] = vm.falseObj;\\n\",\n                \"} else { vm.pc = \", this.pc, \"; vm.sendSpecial(7); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return bytecodes + \", this.pc, \"}\\n\");\n                return;\n            case 0xB8: // TIMES *\n                this.source.push(\"vm.success = true; vm.resultIsFloat = false; if(!vm.pop2AndPushNumResult(vm.stackIntOrFloat(1) * vm.stackIntOrFloat(0))) { vm.pc = \", this.pc, \"; vm.sendSpecial(8); return bytecodes + \", this.pc, \"}\\n\");\n                return;\n            case 0xB9: // DIV /\n                this.source.push(\"vm.success = true; if(!vm.pop2AndPushIntResult(vm.quickDivide(vm.stackInteger(1),vm.stackInteger(0)))) { vm.pc = \", this.pc, \"; vm.sendSpecial(9); return bytecodes + \", this.pc, \"}\\n\");\n                return;\n            case 0xBA: // MOD \\\n                this.source.push(\"vm.success = true; if(!vm.pop2AndPushIntResult(vm.mod(vm.stackInteger(1),vm.stackInteger(0)))) { vm.pc = \", this.pc, \"; vm.sendSpecial(10); return bytecodes + \", this.pc, \"}\\n\");\n                return;\n            case 0xBB:  // MakePt int@int\n                this.source.push(\"vm.success = true; if(!vm.primHandler.primitiveMakePoint(1, true)) { vm.pc = \", this.pc, \"; vm.sendSpecial(11); return bytecodes + \", this.pc, \"}\\n\");\n                return;\n            case 0xBC: // bitShift:\n                this.source.push(\"vm.success = true; if(!vm.pop2AndPushIntResult(vm.safeShift(vm.stackInteger(1),vm.stackInteger(0)))) { vm.pc = \", this.pc, \"; vm.sendSpecial(12); return bytecodes + \", this.pc, \"}\\n\");\n                return;\n            case 0xBD: // Divide //\n                this.source.push(\"vm.success = true; if(!vm.pop2AndPushIntResult(vm.div(vm.stackInteger(1),vm.stackInteger(0)))) { vm.pc = \", this.pc, \"; vm.sendSpecial(13); return bytecodes + \", this.pc, \"}\\n\");\n                return;\n            case 0xBE: // bitAnd:\n                this.source.push(\"vm.success = true; if(!vm.pop2AndPushIntResult(vm.stackInteger(1) & vm.stackInteger(0))) { vm.pc = \", this.pc, \"; vm.sendSpecial(14); return bytecodes + \", this.pc, \"}\\n\");\n                return;\n            case 0xBF: // bitOr:\n                this.source.push(\"vm.success = true; if(!vm.pop2AndPushIntResult(vm.stackInteger(1) | vm.stackInteger(0))) { vm.pc = \", this.pc, \"; vm.sendSpecial(15); return bytecodes + \", this.pc, \"}\\n\");\n                return;\n        }\n    },\n    generateSend: function(prefix, num, suffix, numArgs, superSend) {\n        if (this.debug) this.generateDebugCode(\"send \" + (prefix === \"lit[\" ? this.method.pointers[num].bytesAsString() : \"...\"));\n        this.generateLabel();\n        // set pc, activate new method, and return to main loop\n        // unless the method was a successfull primitive call (no context change)\n        this.source.push(\n            \"vm.pc = \", this.pc, \"; vm.send(\", prefix, num, suffix, \", \", numArgs, \", \", superSend, \"); \",\n            \"if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return bytecodes + \", this.pc, \";\\n\");\n        this.needsBreak = false; // already checked\n        // need a label for coming back after send\n        this.needsLabel[this.pc] = true;\n    },\n    generateClosureTemps: function(count, popValues) {\n        if (this.debug) this.generateDebugCode(\"closure temps\");\n        this.generateLabel();\n        this.source.push(\"var array = vm.instantiateClass(vm.specialObjects[7], \", count, \");\\n\");\n        if (popValues) {\n            for (var i = 0; i < count; i++)\n                this.source.push(\"array.pointers[\", i, \"] = stack[vm.sp - \", count - i - 1, \"];\\n\");\n            this.source.push(\"stack[vm.sp -= \", count - 1, \"] = array;\\n\");\n        } else {\n            this.source.push(\"stack[++vm.sp] = array;\\n\");\n        }\n    },\n    generateClosureCopy: function(numArgs, numCopied, blockSize) {\n        var from = this.pc,\n            to = from + blockSize;\n        if (this.debug) this.generateDebugCode(\"push closure(\" + from + \"-\" + (to-1) + \"): \" + numCopied + \" copied, \" + numArgs + \" args\");\n        this.generateLabel();\n        this.source.push(\n            \"var closure = vm.instantiateClass(vm.specialObjects[36], \", numCopied, \");\\n\",\n            \"closure.pointers[0] = context; vm.reclaimableContextCount = 0;\\n\",\n            \"closure.pointers[1] = \", from + this.method.pointers.length * 4 + 1, \";\\n\",  // encodeSqueakPC\n            \"closure.pointers[2] = \", numArgs, \";\\n\");\n        if (numCopied > 0) {\n            for (var i = 0; i < numCopied; i++)\n                this.source.push(\"closure.pointers[\", i + 3, \"] = stack[vm.sp - \", numCopied - i - 1,\"];\\n\");\n            this.source.push(\"stack[vm.sp -= \", numCopied - 1,\"] = closure;\\n\");\n        } else {\n            this.source.push(\"stack[++vm.sp] = closure;\\n\");\n        }\n        this.source.push(\"vm.pc = \", to, \";\\n\");\n        this.source.push(\"bytecodes -= \", blockSize, \";\\n\");\n        if (this.singleStep) this.source.push(\"if (vm.breakOutOfInterpreter) return bytecodes + \", to,\";\\n\");\n        this.source.push(\"continue;\\n\");\n        this.needsBreak = false; // already checked\n        this.needsLabel[from] = true;   // initial pc when activated\n        this.needsLabel[to] = true;     // for jump over closure\n        if (to > this.endPC) this.endPC = to;\n    },\n    generateCallPrimitive: function(index) {\n        if (this.debug) this.generateDebugCode(\"call primitive \" + index);\n        this.generateLabel();\n        // call prim is actually a no-op\n        if (this.pc !== 3) throw Error(\"call primitive bytecode not expected here\");\n    },\n    generateLabel: function() {\n        // remember label position for deleteUnneededLabels()\n        this.sourceLabels[this.prevPC] = this.source.length;\n        this.source.push(\"case \", this.prevPC, \":\\n\");\n        this.prevPC = this.pc;\n    },\n    generateDebugCode: function(comment) {\n        // single-step for previous instructiuon\n        if (this.needsBreak) {\n             this.source.push(\"if (vm.breakOutOfInterpreter) return bytecodes + (vm.pc = \", this.prevPC, \");\\n\");\n             this.needsLabel[this.prevPC] = true;\n        }\n        // comment for this instructiuon\n        var bytecodes = [];\n        for (var i = this.prevPC; i < this.pc; i++)\n            bytecodes.push((this.method.bytes[i] + 0x100).toString(16).slice(-2).toUpperCase());\n        this.source.push(\"// \", this.prevPC, \" <\", bytecodes.join(\" \"), \"> \", comment, \"\\n\");\n        // enable single-step for next instruction\n        this.needsBreak = this.singleStep;\n    },\n    generateInstruction: function(comment, instr) {\n        if (this.debug) this.generateDebugCode(comment);\n        this.generateLabel();\n        this.source.push(instr, \";\\n\");\n    },\n    deleteUnneededLabels: function() {\n        // switch statement is more efficient with fewer labels\n        for (var i in this.sourceLabels)\n            if (!this.needsLabel[i])\n                for (var j = 0; j < 3; j++)\n                    this.source[this.sourceLabels[i] + j] = \"\";\n    },\n});\n\n}); // end of module\n","/* Smalltalk from Squeak4.5 with VMMaker 4.13.6 translated as JS source on 3 November 2014 1:52:20 pm */\n/* Automatically generated by\n\tJSPluginCodeGenerator VMMakerJS-bf.15 uuid: fd4e10f2-3773-4e80-8bb5-c4b471a014e5\n   from\n\tADPCMCodecPlugin VMMaker-bf.353 uuid: 8ae25e7e-8d2c-451e-8277-598b30e9c002\n */\n\nmodule(\"users.bert.SqueakJS.plugins.ADPCMCodecPlugin\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";    \n\nvar VM_PROXY_MAJOR = 1;\nvar VM_PROXY_MINOR = 11;\n\n/*** Functions ***/\nfunction CLASSOF(obj) { return typeof obj === \"number\" ? interpreterProxy.classSmallInteger() : obj.sqClass }\nfunction SIZEOF(obj) { return obj.pointers ? obj.pointers.length : obj.words ? obj.words.length : obj.bytes ? obj.bytes.length : 0 }\nfunction BYTESIZEOF(obj) { return obj.bytes ? obj.bytes.length : obj.words ? obj.words.length * 4 : 0 }\nfunction DIV(a, b) { return Math.floor(a / b) | 0; }   // integer division\nfunction MOD(a, b) { return a - DIV(a, b) * b | 0; }   // signed modulus\nfunction SHL(a, b) { return b > 31 ? 0 : a << b; }     // fix JS shift\nfunction SHR(a, b) { return b > 31 ? 0 : a >>> b; }    // fix JS shift\nfunction SHIFT(a, b) { return b < 0 ? (b < -31 ? 0 : a >>> (0-b) ) : (b > 31 ? 0 : a << b); }\n\n/*** Variables ***/\nvar bitPosition = 0;\nvar byteIndex = 0;\nvar currentByte = 0;\nvar encodedBytes = null;\nvar interpreterProxy = null;\nvar moduleName = \"ADPCMCodecPlugin 3 November 2014 (e)\";\nvar stepSizeTable = null;\n\n\n\n/*\tNote: This is coded so that plugins can be run from Squeak. */\n\nfunction getInterpreter() {\n\treturn interpreterProxy;\n}\n\n\n/*\tNote: This is hardcoded so it can be run from Squeak.\n\tThe module name is used for validating a module *after*\n\tit is loaded to check if it does really contain the module\n\twe're thinking it contains. This is important! */\n\nfunction getModuleName() {\n\treturn moduleName;\n}\n\nfunction halt() {\n\t;\n}\n\n\n/*\tAnswer the best index to use for the difference between the given samples. */\n/*\tDetails: Scan stepSizeTable for the first entry >= the absolute value of the difference between sample values. Since indexes are zero-based, the index used during decoding will be the one in the following stepSizeTable entry. Since the index field of a Flash frame header is only six bits, the maximum index value is 63. */\n/*\tNote: Since there does not appear to be any documentation of how Flash actually computes the indices used in its frame headers, this algorithm was guessed by reverse-engineering the Flash ADPCM decoder. */\n\nfunction indexForDeltaFromto(thisSample, nextSample) {\n\tvar bestIndex;\n\tvar diff;\n\tvar j;\n\n\tdiff = nextSample - thisSample;\n\tif (diff < 0) {\n\t\tdiff = 0 - diff;\n\t}\n\tbestIndex = 63;\n\tfor (j = 1; j <= 62; j++) {\n\t\tif (bestIndex === 63) {\n\t\t\tif (stepSizeTable[j - 1] >= diff) {\n\t\t\t\tbestIndex = j;\n\t\t\t}\n\t\t}\n\t}\n\treturn bestIndex;\n}\n\nfunction msg(s) {\n\tconsole.log(moduleName + \": \" + s);\n}\n\n\n/*\tAnswer the next n bits of my bit stream as an unsigned integer. */\n\nfunction nextBits(n) {\n\tvar remaining;\n\tvar result;\n\tvar shift;\n\n\tresult = 0;\n\tremaining = n;\n\twhile(true) {\n\t\tshift = remaining - bitPosition;\n\t\tif (shift > 0) {\n\n\t\t\t/* consumed currentByte buffer; fetch next byte */\n\n\t\t\tresult += SHL(currentByte, shift);\n\t\t\tremaining -= bitPosition;\n\t\t\tcurrentByte = encodedBytes[((++byteIndex)) - 1];\n\t\t\tbitPosition = 8;\n\t\t} else {\n\n\t\t\t/* still some bits left in currentByte buffer */\n\n\t\t\tresult += SHR(currentByte, (0 - shift));\n\n\t\t\t/* mask out the consumed bits: */\n\n\t\t\tbitPosition -= remaining;\n\t\t\tcurrentByte = currentByte & (SHR(255, (8 - bitPosition)));\n\t\t\treturn result;\n\t\t}\n\t}\n}\n\n\n/*\tWrite the next n bits to my bit stream. */\n\nfunction nextBitsput(n, anInteger) {\n\tvar bitsAvailable;\n\tvar buf;\n\tvar bufBits;\n\tvar shift;\n\n\tbuf = anInteger;\n\tbufBits = n;\n\twhile(true) {\n\t\tbitsAvailable = 8 - bitPosition;\n\n\t\t/* either left or right shift */\n\t\t/* append high bits of buf to end of currentByte: */\n\n\t\tshift = bitsAvailable - bufBits;\n\t\tif (shift < 0) {\n\n\t\t\t/* currentByte buffer filled; output it */\n\n\t\t\tcurrentByte += SHR(buf, (0 - shift));\n\t\t\tencodedBytes[((++byteIndex)) - 1] = currentByte;\n\t\t\tbitPosition = 0;\n\n\t\t\t/* clear saved high bits of buf: */\n\n\t\t\tcurrentByte = 0;\n\t\t\tbuf = buf & ((SHL(1, (0 - shift))) - 1);\n\t\t\tbufBits -= bitsAvailable;\n\t\t} else {\n\n\t\t\t/* still some bits available in currentByte buffer */\n\n\t\t\tcurrentByte += SHL(buf, shift);\n\t\t\tbitPosition += bufBits;\n\t\t\treturn self;\n\t\t}\n\t}\n}\n\nfunction primitiveDecodeMono() {\n\tvar rcvr;\n\tvar count;\n\tvar bit;\n\tvar delta;\n\tvar i;\n\tvar predictedDelta;\n\tvar step;\n\tvar bitsPerSample;\n\tvar deltaSignMask;\n\tvar deltaValueHighBit;\n\tvar deltaValueMask;\n\tvar frameSizeMask;\n\tvar index;\n\tvar indexTable;\n\tvar predicted;\n\tvar sampleIndex;\n\tvar samples;\n\n\trcvr = interpreterProxy.stackValue(1);\n\tcount = interpreterProxy.stackIntegerValue(0);\n\tpredicted = interpreterProxy.fetchIntegerofObject(0, rcvr);\n\tindex = interpreterProxy.fetchIntegerofObject(1, rcvr);\n\tdeltaSignMask = interpreterProxy.fetchIntegerofObject(2, rcvr);\n\tdeltaValueMask = interpreterProxy.fetchIntegerofObject(3, rcvr);\n\tdeltaValueHighBit = interpreterProxy.fetchIntegerofObject(4, rcvr);\n\tframeSizeMask = interpreterProxy.fetchIntegerofObject(5, rcvr);\n\tcurrentByte = interpreterProxy.fetchIntegerofObject(6, rcvr);\n\tbitPosition = interpreterProxy.fetchIntegerofObject(7, rcvr);\n\tbyteIndex = interpreterProxy.fetchIntegerofObject(8, rcvr);\n\tencodedBytes = interpreterProxy.fetchBytesofObject(9, rcvr);\n\tsamples = interpreterProxy.fetchInt16ArrayofObject(10, rcvr);\n\tsampleIndex = interpreterProxy.fetchIntegerofObject(12, rcvr);\n\tbitsPerSample = interpreterProxy.fetchIntegerofObject(13, rcvr);\n\tstepSizeTable = interpreterProxy.fetchInt16ArrayofObject(14, rcvr);\n\tindexTable = interpreterProxy.fetchInt16ArrayofObject(15, rcvr);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tfor (i = 1; i <= count; i++) {\n\t\tif ((i & frameSizeMask) === 1) {\n\n\t\t\t/* start of frame; read frame header */\n\n\t\t\tpredicted = nextBits(16);\n\t\t\tif (predicted > 32767) {\n\t\t\t\tpredicted -= 65536;\n\t\t\t}\n\t\t\tindex = nextBits(6);\n\t\t\tsamples[((++sampleIndex)) - 1] = predicted;\n\t\t} else {\n\t\t\tdelta = nextBits(bitsPerSample);\n\t\t\tstep = stepSizeTable[index];\n\t\t\tpredictedDelta = 0;\n\t\t\tbit = deltaValueHighBit;\n\t\t\twhile (bit > 0) {\n\t\t\t\tif ((delta & bit) > 0) {\n\t\t\t\t\tpredictedDelta += step;\n\t\t\t\t}\n\t\t\t\tstep = step >>> 1;\n\t\t\t\tbit = bit >>> 1;\n\t\t\t}\n\t\t\tpredictedDelta += step;\n\t\t\tif ((delta & deltaSignMask) > 0) {\n\t\t\t\tpredicted -= predictedDelta;\n\t\t\t} else {\n\t\t\t\tpredicted += predictedDelta;\n\t\t\t}\n\t\t\tif (predicted > 32767) {\n\t\t\t\tpredicted = 32767;\n\t\t\t} else {\n\t\t\t\tif (predicted < -32768) {\n\t\t\t\t\tpredicted = -32768;\n\t\t\t\t}\n\t\t\t}\n\t\t\tindex += indexTable[delta & deltaValueMask];\n\t\t\tif (index < 0) {\n\t\t\t\tindex = 0;\n\t\t\t} else {\n\t\t\t\tif (index > 88) {\n\t\t\t\t\tindex = 88;\n\t\t\t\t}\n\t\t\t}\n\t\t\tsamples[((++sampleIndex)) - 1] = predicted;\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.storeIntegerofObjectwithValue(0, rcvr, predicted);\n\tinterpreterProxy.storeIntegerofObjectwithValue(1, rcvr, index);\n\tinterpreterProxy.storeIntegerofObjectwithValue(6, rcvr, currentByte);\n\tinterpreterProxy.storeIntegerofObjectwithValue(7, rcvr, bitPosition);\n\tinterpreterProxy.storeIntegerofObjectwithValue(8, rcvr, byteIndex);\n\tinterpreterProxy.storeIntegerofObjectwithValue(12, rcvr, sampleIndex);\n\tinterpreterProxy.pop(1);\n}\n\nfunction primitiveDecodeStereo() {\n\tvar rcvr;\n\tvar count;\n\tvar bit;\n\tvar deltaLeft;\n\tvar deltaRight;\n\tvar i;\n\tvar indexLeft;\n\tvar indexRight;\n\tvar predictedDeltaLeft;\n\tvar predictedDeltaRight;\n\tvar predictedLeft;\n\tvar predictedRight;\n\tvar stepLeft;\n\tvar stepRight;\n\tvar bitsPerSample;\n\tvar deltaSignMask;\n\tvar deltaValueHighBit;\n\tvar deltaValueMask;\n\tvar frameSizeMask;\n\tvar index;\n\tvar indexTable;\n\tvar predicted;\n\tvar rightSamples;\n\tvar sampleIndex;\n\tvar samples;\n\n\n\t/* make local copies of decoder state variables */\n\n\trcvr = interpreterProxy.stackValue(1);\n\tcount = interpreterProxy.stackIntegerValue(0);\n\tpredicted = interpreterProxy.fetchInt16ArrayofObject(0, rcvr);\n\tindex = interpreterProxy.fetchInt16ArrayofObject(1, rcvr);\n\tdeltaSignMask = interpreterProxy.fetchIntegerofObject(2, rcvr);\n\tdeltaValueMask = interpreterProxy.fetchIntegerofObject(3, rcvr);\n\tdeltaValueHighBit = interpreterProxy.fetchIntegerofObject(4, rcvr);\n\tframeSizeMask = interpreterProxy.fetchIntegerofObject(5, rcvr);\n\tcurrentByte = interpreterProxy.fetchIntegerofObject(6, rcvr);\n\tbitPosition = interpreterProxy.fetchIntegerofObject(7, rcvr);\n\tbyteIndex = interpreterProxy.fetchIntegerofObject(8, rcvr);\n\tencodedBytes = interpreterProxy.fetchBytesofObject(9, rcvr);\n\tsamples = interpreterProxy.fetchInt16ArrayofObject(10, rcvr);\n\trightSamples = interpreterProxy.fetchInt16ArrayofObject(11, rcvr);\n\tsampleIndex = interpreterProxy.fetchIntegerofObject(12, rcvr);\n\tbitsPerSample = interpreterProxy.fetchIntegerofObject(13, rcvr);\n\tstepSizeTable = interpreterProxy.fetchInt16ArrayofObject(14, rcvr);\n\tindexTable = interpreterProxy.fetchInt16ArrayofObject(15, rcvr);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tpredictedLeft = predicted[1 - 1];\n\tpredictedRight = predicted[2 - 1];\n\tindexLeft = index[1 - 1];\n\tindexRight = index[2 - 1];\n\tfor (i = 1; i <= count; i++) {\n\t\tif ((i & frameSizeMask) === 1) {\n\n\t\t\t/* start of frame; read frame header */\n\n\t\t\tpredictedLeft = nextBits(16);\n\t\t\tindexLeft = nextBits(6);\n\t\t\tpredictedRight = nextBits(16);\n\t\t\tindexRight = nextBits(6);\n\t\t\tif (predictedLeft > 32767) {\n\t\t\t\tpredictedLeft -= 65536;\n\t\t\t}\n\t\t\tif (predictedRight > 32767) {\n\t\t\t\tpredictedRight -= 65536;\n\t\t\t}\n\t\t\tsamples[((++sampleIndex)) - 1] = predictedLeft;\n\t\t\trightSamples[sampleIndex - 1] = predictedRight;\n\t\t} else {\n\t\t\tdeltaLeft = nextBits(bitsPerSample);\n\t\t\tdeltaRight = nextBits(bitsPerSample);\n\t\t\tstepLeft = stepSizeTable[indexLeft];\n\t\t\tstepRight = stepSizeTable[indexRight];\n\t\t\tpredictedDeltaLeft = (predictedDeltaRight = 0);\n\t\t\tbit = deltaValueHighBit;\n\t\t\twhile (bit > 0) {\n\t\t\t\tif ((deltaLeft & bit) > 0) {\n\t\t\t\t\tpredictedDeltaLeft += stepLeft;\n\t\t\t\t}\n\t\t\t\tif ((deltaRight & bit) > 0) {\n\t\t\t\t\tpredictedDeltaRight += stepRight;\n\t\t\t\t}\n\t\t\t\tstepLeft = stepLeft >>> 1;\n\t\t\t\tstepRight = stepRight >>> 1;\n\t\t\t\tbit = bit >>> 1;\n\t\t\t}\n\t\t\tpredictedDeltaLeft += stepLeft;\n\t\t\tpredictedDeltaRight += stepRight;\n\t\t\tif ((deltaLeft & deltaSignMask) > 0) {\n\t\t\t\tpredictedLeft -= predictedDeltaLeft;\n\t\t\t} else {\n\t\t\t\tpredictedLeft += predictedDeltaLeft;\n\t\t\t}\n\t\t\tif ((deltaRight & deltaSignMask) > 0) {\n\t\t\t\tpredictedRight -= predictedDeltaRight;\n\t\t\t} else {\n\t\t\t\tpredictedRight += predictedDeltaRight;\n\t\t\t}\n\t\t\tif (predictedLeft > 32767) {\n\t\t\t\tpredictedLeft = 32767;\n\t\t\t} else {\n\t\t\t\tif (predictedLeft < -32768) {\n\t\t\t\t\tpredictedLeft = -32768;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (predictedRight > 32767) {\n\t\t\t\tpredictedRight = 32767;\n\t\t\t} else {\n\t\t\t\tif (predictedRight < -32768) {\n\t\t\t\t\tpredictedRight = -32768;\n\t\t\t\t}\n\t\t\t}\n\t\t\tindexLeft += indexTable[deltaLeft & deltaValueMask];\n\t\t\tif (indexLeft < 0) {\n\t\t\t\tindexLeft = 0;\n\t\t\t} else {\n\t\t\t\tif (indexLeft > 88) {\n\t\t\t\t\tindexLeft = 88;\n\t\t\t\t}\n\t\t\t}\n\t\t\tindexRight += indexTable[deltaRight & deltaValueMask];\n\t\t\tif (indexRight < 0) {\n\t\t\t\tindexRight = 0;\n\t\t\t} else {\n\t\t\t\tif (indexRight > 88) {\n\t\t\t\t\tindexRight = 88;\n\t\t\t\t}\n\t\t\t}\n\t\t\tsamples[((++sampleIndex)) - 1] = predictedLeft;\n\t\t\trightSamples[sampleIndex - 1] = predictedRight;\n\t\t}\n\t}\n\tpredicted[1 - 1] = predictedLeft;\n\tpredicted[2 - 1] = predictedRight;\n\tindex[1 - 1] = indexLeft;\n\tindex[2 - 1] = indexRight;\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.storeIntegerofObjectwithValue(6, rcvr, currentByte);\n\tinterpreterProxy.storeIntegerofObjectwithValue(7, rcvr, bitPosition);\n\tinterpreterProxy.storeIntegerofObjectwithValue(8, rcvr, byteIndex);\n\tinterpreterProxy.storeIntegerofObjectwithValue(12, rcvr, sampleIndex);\n\tinterpreterProxy.pop(1);\n}\n\nfunction primitiveEncodeMono() {\n\tvar rcvr;\n\tvar count;\n\tvar bit;\n\tvar delta;\n\tvar diff;\n\tvar i;\n\tvar p;\n\tvar predictedDelta;\n\tvar sign;\n\tvar step;\n\tvar bitsPerSample;\n\tvar deltaSignMask;\n\tvar deltaValueHighBit;\n\tvar frameSizeMask;\n\tvar index;\n\tvar indexTable;\n\tvar predicted;\n\tvar sampleIndex;\n\tvar samples;\n\n\trcvr = interpreterProxy.stackValue(1);\n\tcount = interpreterProxy.stackIntegerValue(0);\n\tpredicted = interpreterProxy.fetchIntegerofObject(0, rcvr);\n\tindex = interpreterProxy.fetchIntegerofObject(1, rcvr);\n\tdeltaSignMask = interpreterProxy.fetchIntegerofObject(2, rcvr);\n\tdeltaValueHighBit = interpreterProxy.fetchIntegerofObject(4, rcvr);\n\tframeSizeMask = interpreterProxy.fetchIntegerofObject(5, rcvr);\n\tcurrentByte = interpreterProxy.fetchIntegerofObject(6, rcvr);\n\tbitPosition = interpreterProxy.fetchIntegerofObject(7, rcvr);\n\tbyteIndex = interpreterProxy.fetchIntegerofObject(8, rcvr);\n\tencodedBytes = interpreterProxy.fetchBytesofObject(9, rcvr);\n\tsamples = interpreterProxy.fetchInt16ArrayofObject(10, rcvr);\n\tsampleIndex = interpreterProxy.fetchIntegerofObject(12, rcvr);\n\tbitsPerSample = interpreterProxy.fetchIntegerofObject(13, rcvr);\n\tstepSizeTable = interpreterProxy.fetchInt16ArrayofObject(14, rcvr);\n\tindexTable = interpreterProxy.fetchInt16ArrayofObject(15, rcvr);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tstep = stepSizeTable[1 - 1];\n\tfor (i = 1; i <= count; i++) {\n\t\tif ((i & frameSizeMask) === 1) {\n\t\t\tpredicted = samples[((++sampleIndex)) - 1];\n\t\t\tif (((p = predicted)) < 0) {\n\t\t\t\tp += 65536;\n\t\t\t}\n\t\t\tnextBitsput(16, p);\n\t\t\tif (i < count) {\n\t\t\t\tindex = indexForDeltaFromto(predicted, samples[sampleIndex]);\n\t\t\t}\n\t\t\tnextBitsput(6, index);\n\t\t} else {\n\n\t\t\t/* compute sign and magnitude of difference from the predicted sample */\n\n\t\t\tsign = 0;\n\t\t\tdiff = samples[((++sampleIndex)) - 1] - predicted;\n\t\t\tif (diff < 0) {\n\t\t\t\tsign = deltaSignMask;\n\t\t\t\tdiff = 0 - diff;\n\t\t\t}\n\t\t\tdelta = 0;\n\t\t\tpredictedDelta = 0;\n\t\t\tbit = deltaValueHighBit;\n\t\t\twhile (bit > 0) {\n\t\t\t\tif (diff >= step) {\n\t\t\t\t\tdelta += bit;\n\t\t\t\t\tpredictedDelta += step;\n\t\t\t\t\tdiff -= step;\n\t\t\t\t}\n\t\t\t\tstep = step >>> 1;\n\t\t\t\tbit = bit >>> 1;\n\t\t\t}\n\n\t\t\t/* compute and clamp new prediction */\n\n\t\t\tpredictedDelta += step;\n\t\t\tif (sign > 0) {\n\t\t\t\tpredicted -= predictedDelta;\n\t\t\t} else {\n\t\t\t\tpredicted += predictedDelta;\n\t\t\t}\n\t\t\tif (predicted > 32767) {\n\t\t\t\tpredicted = 32767;\n\t\t\t} else {\n\t\t\t\tif (predicted < -32768) {\n\t\t\t\t\tpredicted = -32768;\n\t\t\t\t}\n\t\t\t}\n\t\t\tindex += indexTable[delta];\n\t\t\tif (index < 0) {\n\t\t\t\tindex = 0;\n\t\t\t} else {\n\t\t\t\tif (index > 88) {\n\t\t\t\t\tindex = 88;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* output encoded, signed delta */\n\n\t\t\tstep = stepSizeTable[index];\n\t\t\tnextBitsput(bitsPerSample, sign | delta);\n\t\t}\n\t}\n\tif (bitPosition > 0) {\n\n\t\t/* flush the last output byte, if necessary */\n\n\t\tencodedBytes[((++byteIndex)) - 1] = currentByte;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.storeIntegerofObjectwithValue(0, rcvr, predicted);\n\tinterpreterProxy.storeIntegerofObjectwithValue(1, rcvr, index);\n\tinterpreterProxy.storeIntegerofObjectwithValue(6, rcvr, currentByte);\n\tinterpreterProxy.storeIntegerofObjectwithValue(7, rcvr, bitPosition);\n\tinterpreterProxy.storeIntegerofObjectwithValue(8, rcvr, byteIndex);\n\tinterpreterProxy.storeIntegerofObjectwithValue(12, rcvr, sampleIndex);\n\tinterpreterProxy.pop(1);\n}\n\n\n/*\tnot yet implemented */\n\nfunction primitiveEncodeStereo() {\n\tvar rcvr;\n\tvar count;\n\n\trcvr = interpreterProxy.stackValue(1);\n\tcount = interpreterProxy.stackIntegerValue(0);\n\tcurrentByte = interpreterProxy.fetchIntegerofObject(6, rcvr);\n\tbitPosition = interpreterProxy.fetchIntegerofObject(7, rcvr);\n\tbyteIndex = interpreterProxy.fetchIntegerofObject(8, rcvr);\n\tencodedBytes = interpreterProxy.fetchIntegerofObject(9, rcvr);\n\tstepSizeTable = interpreterProxy.fetchIntegerofObject(14, rcvr);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tsuccess(false);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.storeIntegerofObjectwithValue(6, rcvr, currentByte);\n\tinterpreterProxy.storeIntegerofObjectwithValue(7, rcvr, bitPosition);\n\tinterpreterProxy.storeIntegerofObjectwithValue(8, rcvr, byteIndex);\n\tinterpreterProxy.pop(1);\n}\n\n\n/*\tNote: This is coded so that is can be run from Squeak. */\n\nfunction setInterpreter(anInterpreter) {\n\tvar ok;\n\n\tinterpreterProxy = anInterpreter;\n\tok = interpreterProxy.majorVersion() == VM_PROXY_MAJOR;\n\tif (ok === false) {\n\t\treturn false;\n\t}\n\tok = interpreterProxy.minorVersion() >= VM_PROXY_MINOR;\n\treturn ok;\n}\n\n\nSqueak.registerExternalModule(\"ADPCMCodecPlugin\", {\n\tprimitiveDecodeStereo: primitiveDecodeStereo,\n\tprimitiveEncodeStereo: primitiveEncodeStereo,\n\tsetInterpreter: setInterpreter,\n\tprimitiveEncodeMono: primitiveEncodeMono,\n\tprimitiveDecodeMono: primitiveDecodeMono,\n\tgetModuleName: getModuleName,\n});\n\n}); // end of module\n","/* Smalltalk from Squeak4.5 with VMMaker 4.13.6 translated as JS source on 14 November 2014 12:21:50 am */\n/* Automatically generated by\n\tJSPluginCodeGenerator VMMakerJS-bf.17 uuid: 399be48b-95d8-4722-bdcc-39a94a12c486\n   from\n\tBalloonEnginePlugin VMMaker-bf.353 uuid: 8ae25e7e-8d2c-451e-8277-598b30e9c002\n */\n\nmodule(\"users.bert.SqueakJS.plugins.B2DPlugin\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";    \n\nvar VM_PROXY_MAJOR = 1;\nvar VM_PROXY_MINOR = 11;\n\n/*** Functions ***/\nfunction CLASSOF(obj) { return typeof obj === \"number\" ? interpreterProxy.classSmallInteger() : obj.sqClass }\nfunction SIZEOF(obj) { return obj.pointers ? obj.pointers.length : obj.words ? obj.words.length : obj.bytes ? obj.bytes.length : 0 }\nfunction BYTESIZEOF(obj) { return obj.bytes ? obj.bytes.length : obj.words ? obj.words.length * 4 : 0 }\nfunction DIV(a, b) { return Math.floor(a / b) | 0; }   // integer division\nfunction MOD(a, b) { return a - DIV(a, b) * b | 0; }   // signed modulus\nfunction SHL(a, b) { return b > 31 ? 0 : a << b; }     // fix JS shift\nfunction SHR(a, b) { return b > 31 ? 0 : a >>> b; }    // fix JS shift\nfunction SHIFT(a, b) { return b < 0 ? (b < -31 ? 0 : a >>> (0-b) ) : (b > 31 ? 0 : a << b); }\nfunction PTR_ADD(p, n) { return new Int32Array(p.buffer, p.byteOffset + n * 4); }\nfunction FPTR_ADD(p, n) { return new Float32Array(p.buffer, p.byteOffset + n * 4); }\n\n/*** Constants ***/\nvar BEBalloonEngineSize = 12;\nvar BEBitBltIndex = 2;\nvar BEFormsIndex = 3;\nvar BESpanIndex = 1;\nvar BEWorkBufferIndex = 0;\nvar ETBalloonEdgeDataSize = 6;\nvar ETIndexIndex = 0;\nvar ETLinesIndex = 4;\nvar ETXValueIndex = 1;\nvar ETYValueIndex = 2;\nvar ETZValueIndex = 3;\nvar FTBalloonFillDataSize = 6;\nvar FTIndexIndex = 0;\nvar FTMaxXIndex = 2;\nvar FTMinXIndex = 1;\nvar FTYValueIndex = 3;\nvar GBBaseSize = 16;\nvar GBBitmapDepth = 12;\nvar GBBitmapHeight = 11;\nvar GBBitmapRaster = 14;\nvar GBBitmapSize = 13;\nvar GBBitmapWidth = 10;\nvar GBColormapOffset = 18;\nvar GBColormapSize = 15;\nvar GBEndX = 14;\nvar GBEndY = 15;\nvar GBFinalX = 21;\nvar GBMBaseSize = 18;\nvar GBTileFlag = 16;\nvar GBUpdateDDX = 4;\nvar GBUpdateDDY = 5;\nvar GBUpdateDX = 2;\nvar GBUpdateDY = 3;\nvar GBUpdateData = 10;\nvar GBUpdateX = 0;\nvar GBUpdateY = 1;\nvar GBViaX = 12;\nvar GBViaY = 13;\nvar GBWideEntry = 18;\nvar GBWideExit = 19;\nvar GBWideExtent = 20;\nvar GBWideFill = 16;\nvar GBWideSize = 28;\nvar GBWideUpdateData = 22;\nvar GBWideWidth = 17;\nvar GEBaseEdgeSize = 10;\nvar GEBaseFillSize = 4;\nvar GEEdgeFillsInvalid = 65536;\nvar GEFAlreadyFailed = 100;\nvar GEFBadPoint = 121;\nvar GEFBitBltLoadFailed = 122;\nvar GEFClassMismatch = 114;\nvar GEFEdgeDataTooSmall = 112;\nvar GEFEngineIsInteger = 101;\nvar GEFEngineIsWords = 102;\nvar GEFEngineStopped = 104;\nvar GEFEngineTooSmall = 103;\nvar GEFEntityCheckFailed = 120;\nvar GEFEntityLoadFailed = 119;\nvar GEFFillDataTooSmall = 113;\nvar GEFFormLoadFailed = 123;\nvar GEFSizeMismatch = 115;\nvar GEFWorkBufferBadMagic = 108;\nvar GEFWorkBufferIsInteger = 105;\nvar GEFWorkBufferIsPointers = 106;\nvar GEFWorkBufferStartWrong = 110;\nvar GEFWorkBufferTooSmall = 107;\nvar GEFWorkBufferWrongSize = 109;\nvar GEFWorkTooBig = 111;\nvar GEFWrongEdge = 118;\nvar GEFWrongFill = 117;\nvar GEFWrongState = 116;\nvar GEFillIndexLeft = 8;\nvar GEFillIndexRight = 9;\nvar GENumLines = 7;\nvar GEObjectIndex = 2;\nvar GEObjectLength = 1;\nvar GEObjectType = 0;\nvar GEPrimitiveBezier = 6;\nvar GEPrimitiveClippedBitmapFill = 1024;\nvar GEPrimitiveEdge = 2;\nvar GEPrimitiveEdgeMask = 255;\nvar GEPrimitiveFill = 256;\nvar GEPrimitiveFillMask = 65280;\nvar GEPrimitiveLine = 4;\nvar GEPrimitiveLinearGradientFill = 512;\nvar GEPrimitiveRadialGradientFill = 768;\nvar GEPrimitiveTypeMask = 65535;\nvar GEPrimitiveWide = 1;\nvar GEPrimitiveWideBezier = 7;\nvar GEPrimitiveWideLine = 5;\nvar GEPrimitiveWideMask = 254;\nvar GEStateAddingFromGET = 1;\nvar GEStateBlitBuffer = 5;\nvar GEStateCompleted = 8;\nvar GEStateScanningAET = 3;\nvar GEStateUnlocked = 0;\nvar GEStateUpdateEdges = 6;\nvar GEStateWaitingChange = 7;\nvar GEStateWaitingForEdge = 2;\nvar GEStateWaitingForFill = 4;\nvar GEXValue = 4;\nvar GEYValue = 5;\nvar GEZValue = 6;\nvar GErrorAETEntry = 6;\nvar GErrorBadState = 2;\nvar GErrorFillEntry = 5;\nvar GErrorGETEntry = 4;\nvar GErrorNeedFlush = 3;\nvar GErrorNoMoreSpace = 1;\nvar GFDirectionX = 6;\nvar GFDirectionY = 7;\nvar GFNormalX = 8;\nvar GFNormalY = 9;\nvar GFOriginX = 4;\nvar GFOriginY = 5;\nvar GFRampLength = 10;\nvar GFRampOffset = 12;\nvar GGBaseSize = 12;\nvar GLBaseSize = 16;\nvar GLEndX = 14;\nvar GLEndY = 15;\nvar GLError = 13;\nvar GLErrorAdjDown = 15;\nvar GLErrorAdjUp = 14;\nvar GLWideEntry = 18;\nvar GLWideExit = 19;\nvar GLWideExtent = 20;\nvar GLWideFill = 16;\nvar GLWideSize = 21;\nvar GLWideWidth = 17;\nvar GLXDirection = 10;\nvar GLXIncrement = 12;\nvar GLYDirection = 11;\nvar GWAAColorMask = 51;\nvar GWAAColorShift = 50;\nvar GWAAHalfPixel = 53;\nvar GWAALevel = 48;\nvar GWAAScanMask = 52;\nvar GWAAShift = 49;\nvar GWAETStart = 13;\nvar GWAETUsed = 14;\nvar GWBezierHeightSubdivisions = 109;\nvar GWBezierLineConversions = 111;\nvar GWBezierMonotonSubdivisions = 108;\nvar GWBezierOverflowSubdivisions = 110;\nvar GWBufferTop = 10;\nvar GWClearSpanBuffer = 69;\nvar GWClipMaxX = 43;\nvar GWClipMaxY = 45;\nvar GWClipMinX = 42;\nvar GWClipMinY = 44;\nvar GWColorTransform = 24;\nvar GWCountAddAETEntry = 97;\nvar GWCountChangeAETEntry = 107;\nvar GWCountDisplaySpan = 103;\nvar GWCountFinishTest = 93;\nvar GWCountInitializing = 91;\nvar GWCountMergeFill = 101;\nvar GWCountNextAETEntry = 105;\nvar GWCountNextFillEntry = 99;\nvar GWCountNextGETEntry = 95;\nvar GWCurrentY = 88;\nvar GWCurrentZ = 113;\nvar GWDestOffsetX = 46;\nvar GWDestOffsetY = 47;\nvar GWEdgeTransform = 18;\nvar GWFillMaxX = 37;\nvar GWFillMaxY = 39;\nvar GWFillMinX = 36;\nvar GWFillMinY = 38;\nvar GWGETStart = 11;\nvar GWGETUsed = 12;\nvar GWHasColorTransform = 17;\nvar GWHasEdgeTransform = 16;\nvar GWHeaderSize = 128;\nvar GWLastExportedEdge = 65;\nvar GWLastExportedFill = 66;\nvar GWLastExportedLeftX = 67;\nvar GWLastExportedRightX = 68;\nvar GWMagicIndex = 0;\nvar GWMagicNumber = 1097753705;\nvar GWMinimalSize = 256;\nvar GWNeedsFlush = 63;\nvar GWObjStart = 8;\nvar GWObjUsed = 9;\nvar GWPoint1 = 80;\nvar GWPoint2 = 82;\nvar GWPoint3 = 84;\nvar GWPoint4 = 86;\nvar GWSize = 1;\nvar GWSpanEnd = 34;\nvar GWSpanEndAA = 35;\nvar GWSpanSize = 33;\nvar GWSpanStart = 32;\nvar GWState = 2;\nvar GWStopReason = 64;\nvar GWTimeAddAETEntry = 96;\nvar GWTimeChangeAETEntry = 106;\nvar GWTimeDisplaySpan = 102;\nvar GWTimeFinishTest = 92;\nvar GWTimeInitializing = 90;\nvar GWTimeMergeFill = 100;\nvar GWTimeNextAETEntry = 104;\nvar GWTimeNextFillEntry = 98;\nvar GWTimeNextGETEntry = 94;\nvar PrimErrBadArgument = 3;\nvar PrimErrBadNumArgs = 5;\n\n/*** Variables ***/\nvar aetBuffer = null;\nvar bbPluginName = \"BitBltPlugin\";\nvar copyBitsFn = null;\nvar dispatchReturnValue = 0;\nvar dispatchedValue = 0;\nvar doProfileStats = 0;\nvar engine = 0;\nvar engineStopped = 0;\nvar formArray = 0;\nvar geProfileTime = 0;\nvar getBuffer = null;\nvar interpreterProxy = null;\nvar loadBBFn = null;\nvar moduleName = \"B2DPlugin 14 November 2014 (e)\";\nvar objBuffer = null;\nvar objUsed = 0;\nvar spanBuffer = null;\nvar workBuffer = null;\n\n\nfunction aaColorMaskGet() {\n\treturn workBuffer[GWAAColorMask];\n}\n\nfunction aaColorMaskPut(value) {\n\treturn workBuffer[GWAAColorMask] = value;\n}\n\nfunction aaColorShiftGet() {\n\treturn workBuffer[GWAAColorShift];\n}\n\nfunction aaColorShiftPut(value) {\n\treturn workBuffer[GWAAColorShift] = value;\n}\n\n\n/*\tCommon function to compute the first full pixel for AA drawing */\n\nfunction aaFirstPixelFromto(leftX, rightX) {\n\tvar firstPixel;\n\n\tfirstPixel = ((leftX + aaLevelGet()) - 1) & ~(aaLevelGet() - 1);\n\tif (firstPixel > rightX) {\n\t\treturn rightX;\n\t} else {\n\t\treturn firstPixel;\n\t}\n}\n\nfunction aaHalfPixelPut(value) {\n\treturn workBuffer[GWAAHalfPixel] = value;\n}\n\n\n/*\tCommon function to compute the last full pixel for AA drawing */\n\nfunction aaLastPixelFromto(leftX, rightX) {\n\treturn (rightX - 1) & ~(aaLevelGet() - 1);\n}\n\nfunction aaLevelGet() {\n\treturn workBuffer[GWAALevel];\n}\n\nfunction aaLevelPut(value) {\n\treturn workBuffer[GWAALevel] = value;\n}\n\nfunction aaScanMaskGet() {\n\treturn workBuffer[GWAAScanMask];\n}\n\nfunction aaScanMaskPut(value) {\n\treturn workBuffer[GWAAScanMask] = value;\n}\n\nfunction aaShiftGet() {\n\treturn workBuffer[GWAAShift];\n}\n\nfunction aaShiftPut(value) {\n\treturn workBuffer[GWAAShift] = value;\n}\n\n\n/*\tCompute the squared value of a 8.24 number with 0.0 <= value < 1.0,\n\te.g., compute (value * value) bitShift: -24 */\n\nfunction absoluteSquared8Dot24(value) {\n\tvar word1;\n\tvar word2;\n\n\tword1 = value & 65535;\n\tword2 = (value >>> 16) & 255;\n\treturn ((((word1 * word1) >>> 16) + ((word1 * word2) * 2)) + ((word2 * word2) << 16)) >>> 8;\n}\n\n\n/*\tReturn the accurate length of the vector described by deltaX and deltaY */\n\nfunction accurateLengthOfwith(deltaX, deltaY) {\n\tvar length2;\n\n\tif (deltaX === 0) {\n\t\tif (deltaY < 0) {\n\t\t\treturn 0 - deltaY;\n\t\t} else {\n\t\t\treturn deltaY;\n\t\t}\n\t}\n\tif (deltaY === 0) {\n\t\tif (deltaX < 0) {\n\t\t\treturn 0 - deltaX;\n\t\t} else {\n\t\t\treturn deltaX;\n\t\t}\n\t}\n\tlength2 = (deltaX * deltaX) + (deltaY * deltaY);\n\treturn computeSqrt(length2);\n}\n\nfunction addEdgeToGET(edge) {\n\tif (!allocateGETEntry(1)) {\n\t\treturn 0;\n\t}\n\tgetBuffer[getUsedGet()] = edge;\n\tgetUsedPut(getUsedGet() + 1);\n}\n\n\n/*\tAdjust the wide bezier curve (dx < 0) to start/end at the right point */\n\nfunction adjustWideBezierLeftwidthoffsetendX(bezier, lineWidth, lineOffset, endX) {\n\tvar lastX;\n\tvar lastY;\n\n\tbezierUpdateDataOf(bezier)[GBUpdateX] = (bezierUpdateDataOf(bezier)[GBUpdateX] - (lineOffset * 256));\n\tlastX = wideBezierUpdateDataOf(bezier)[GBUpdateX];\n\twideBezierUpdateDataOf(bezier)[GBUpdateX] = (lastX + ((lineWidth - lineOffset) * 256));\n\tlastY = wideBezierUpdateDataOf(bezier)[GBUpdateY];\n\twideBezierUpdateDataOf(bezier)[GBUpdateY] = (lastY + (lineWidth * 256));\n\tbezierFinalXOfput(bezier, endX - lineOffset);\n}\n\n\n/*\tAdjust the wide bezier curve (dx >= 0) to start/end at the right point */\n\nfunction adjustWideBezierRightwidthoffsetendX(bezier, lineWidth, lineOffset, endX) {\n\tvar lastX;\n\tvar lastY;\n\n\tbezierUpdateDataOf(bezier)[GBUpdateX] = (bezierUpdateDataOf(bezier)[GBUpdateX] + (lineOffset * 256));\n\tlastX = wideBezierUpdateDataOf(bezier)[GBUpdateX];\n\twideBezierUpdateDataOf(bezier)[GBUpdateX] = (lastX - ((lineWidth - lineOffset) * 256));\n\n\t/* Set lineWidth pixels down */\n\n\tlastY = wideBezierUpdateDataOf(bezier)[GBUpdateY];\n\twideBezierUpdateDataOf(bezier)[GBUpdateY] = (lastY + (lineWidth * 256));\n\tbezierFinalXOfput(bezier, (endX - lineOffset) + lineWidth);\n}\n\n\n/*\tAdjust the wide line after it has been stepped from lastX to nextX.\n\tSpecial adjustments of line width and start position are made here\n\tto simulate a rectangular brush */\n\nfunction adjustWideLineafterSteppingFromto(line, lastX, nextX) {\n\tvar baseWidth;\n\tvar deltaX;\n\tvar lineOffset;\n\tvar lineWidth;\n\tvar xDir;\n\tvar yEntry;\n\tvar yExit;\n\n\n\t/* Don't inline this */\n\t/* Fetch the values the adjustment decisions are based on */\n\n\tyEntry = wideLineEntryOf(line);\n\tyExit = wideLineExitOf(line);\n\tbaseWidth = wideLineExtentOf(line);\n\tlineOffset = offsetFromWidth(baseWidth);\n\tlineWidth = wideLineWidthOf(line);\n\txDir = lineXDirectionOf(line);\n\n\t/* Adjust the start of the line to fill an entire rectangle */\n\n\tdeltaX = nextX - lastX;\n\tif (yEntry < baseWidth) {\n\t\tif (xDir < 0) {\n\n\t\t\t/* effectively adding */\n\n\t\t\tlineWidth -= deltaX;\n\t\t} else {\n\t\t\tlineWidth += deltaX;\n\t\t\tedgeXValueOfput(line, lastX);\n\t\t}\n\t}\n\tif ((yExit + lineOffset) === 0) {\n\t\tif (xDir > 0) {\n\t\t\tlineWidth -= lineXIncrementOf(line);\n\t\t} else {\n\n\t\t\t/* effectively subtracting */\n\n\t\t\tlineWidth += lineXIncrementOf(line);\n\t\t\tedgeXValueOfput(line, lastX);\n\t\t}\n\t}\n\tif ((yExit + lineOffset) > 0) {\n\t\tif (xDir < 0) {\n\n\t\t\t/* effectively subtracting */\n\n\t\t\tlineWidth += deltaX;\n\t\t\tedgeXValueOfput(line, lastX);\n\t\t} else {\n\t\t\tlineWidth -= deltaX;\n\t\t}\n\t}\n\twideLineWidthOfput(line, lineWidth);\n}\n\nfunction aetStartGet() {\n\treturn workBuffer[GWAETStart];\n}\n\nfunction aetStartPut(value) {\n\treturn workBuffer[GWAETStart] = value;\n}\n\nfunction aetUsedGet() {\n\treturn workBuffer[GWAETUsed];\n}\n\nfunction aetUsedPut(value) {\n\treturn workBuffer[GWAETUsed] = value;\n}\n\n\n/*\tAllocate n slots in the active edge table */\n\nfunction allocateAETEntry(nSlots) {\n\treturn needAvailableSpace(nSlots);\n}\n\nfunction allocateBezier() {\n\tvar bezier;\n\n\tif (!allocateObjEntry(GBBaseSize)) {\n\t\treturn 0;\n\t}\n\tbezier = objUsed;\n\tobjUsed = bezier + GBBaseSize;\n\tobjectTypeOfput(bezier, GEPrimitiveBezier);\n\tobjectIndexOfput(bezier, 0);\n\tobjectLengthOfput(bezier, GBBaseSize);\n\treturn bezier;\n}\n\nfunction allocateBezierStackEntry() {\n\twbStackPush(6);\n\treturn wbStackSize();\n}\n\nfunction allocateBitmapFillcolormap(cmSize, cmBits) {\n\tvar cm;\n\tvar fill;\n\tvar fillSize;\n\tvar i;\n\n\tfillSize = GBMBaseSize + cmSize;\n\tif (!allocateObjEntry(fillSize)) {\n\t\treturn 0;\n\t}\n\tfill = objUsed;\n\tobjUsed = fill + fillSize;\n\tobjectTypeOfput(fill, GEPrimitiveClippedBitmapFill);\n\tobjectIndexOfput(fill, 0);\n\tobjectLengthOfput(fill, fillSize);\n\tcm = colormapOf(fill);\n\tif (hasColorTransform()) {\n\t\tfor (i = 0; i <= (cmSize - 1); i++) {\n\t\t\tcm[i] = transformColor(cmBits[i]);\n\t\t}\n\t} else {\n\t\tfor (i = 0; i <= (cmSize - 1); i++) {\n\t\t\tcm[i] = cmBits[i];\n\t\t}\n\t}\n\tbitmapCmSizeOfput(fill, cmSize);\n\treturn fill;\n}\n\n\n/*\tAllocate n slots in the global edge table */\n\nfunction allocateGETEntry(nSlots) {\n\tvar dstIndex;\n\tvar i;\n\tvar srcIndex;\n\tvar iLimiT;\n\n\n\t/* First allocate nSlots in the AET */\n\n\tif (!allocateAETEntry(nSlots)) {\n\t\treturn false;\n\t}\n\tif (aetUsedGet() !== 0) {\n\n\t\t/* Then move the AET upwards */\n\n\t\tsrcIndex = aetUsedGet();\n\t\tdstIndex = aetUsedGet() + nSlots;\n\t\tfor (i = 1, iLimiT = aetUsedGet(); i <= iLimiT; i++) {\n\t\t\taetBuffer[(--dstIndex)] = aetBuffer[(--srcIndex)];\n\t\t}\n\t}\n\taetBuffer = PTR_ADD(aetBuffer, nSlots);\n\treturn true;\n}\n\nfunction allocateGradientFillrampWidthisRadial(ramp, rampWidth, isRadial) {\n\tvar fill;\n\tvar fillSize;\n\tvar i;\n\tvar rampPtr;\n\n\tfillSize = GGBaseSize + rampWidth;\n\tif (!allocateObjEntry(fillSize)) {\n\t\treturn 0;\n\t}\n\tfill = objUsed;\n\tobjUsed = fill + fillSize;\n\tif (isRadial) {\n\t\tobjectTypeOfput(fill, GEPrimitiveRadialGradientFill);\n\t} else {\n\t\tobjectTypeOfput(fill, GEPrimitiveLinearGradientFill);\n\t}\n\tobjectIndexOfput(fill, 0);\n\tobjectLengthOfput(fill, fillSize);\n\trampPtr = gradientRampOf(fill);\n\tif (hasColorTransform()) {\n\t\tfor (i = 0; i <= (rampWidth - 1); i++) {\n\t\t\trampPtr[i] = transformColor(ramp[i]);\n\t\t}\n\t} else {\n\t\tfor (i = 0; i <= (rampWidth - 1); i++) {\n\t\t\trampPtr[i] = ramp[i];\n\t\t}\n\t}\n\tgradientRampLengthOfput(fill, rampWidth);\n\treturn fill;\n}\n\nfunction allocateLine() {\n\tvar line;\n\n\tif (!allocateObjEntry(GLBaseSize)) {\n\t\treturn 0;\n\t}\n\tline = objUsed;\n\tobjUsed = line + GLBaseSize;\n\tobjectTypeOfput(line, GEPrimitiveLine);\n\tobjectIndexOfput(line, 0);\n\tobjectLengthOfput(line, GLBaseSize);\n\treturn line;\n}\n\n\n/*\tAllocate n slots in the object buffer */\n\nfunction allocateObjEntry(nSlots) {\n\tvar dstIndex;\n\tvar i;\n\tvar srcIndex;\n\tvar iLimiT;\n\n\n\t/* First allocate nSlots in the GET */\n\n\tif (!allocateGETEntry(nSlots)) {\n\t\treturn false;\n\t}\n\tif (getUsedGet() !== 0) {\n\n\t\t/* Then move the GET upwards */\n\n\t\tsrcIndex = getUsedGet();\n\t\tdstIndex = getUsedGet() + nSlots;\n\t\tfor (i = 1, iLimiT = getUsedGet(); i <= iLimiT; i++) {\n\t\t\tgetBuffer[(--dstIndex)] = getBuffer[(--srcIndex)];\n\t\t}\n\t}\n\tgetBuffer = PTR_ADD(getBuffer, nSlots);\n\treturn true;\n}\n\n\n/*\tAET and Stack allocation are symmetric */\n\nfunction allocateStackEntry(nSlots) {\n\treturn needAvailableSpace(nSlots);\n}\n\nfunction allocateStackFillEntry() {\n\treturn wbStackPush(stackFillEntryLength());\n}\n\nfunction allocateWideBezier() {\n\tvar bezier;\n\n\tif (!allocateObjEntry(GBWideSize)) {\n\t\treturn 0;\n\t}\n\tbezier = objUsed;\n\tobjUsed = bezier + GBWideSize;\n\tobjectTypeOfput(bezier, GEPrimitiveWideBezier);\n\tobjectIndexOfput(bezier, 0);\n\tobjectLengthOfput(bezier, GBWideSize);\n\treturn bezier;\n}\n\nfunction allocateWideLine() {\n\tvar line;\n\n\tif (!allocateObjEntry(GLWideSize)) {\n\t\treturn 0;\n\t}\n\tline = objUsed;\n\tobjUsed = line + GLWideSize;\n\tobjectTypeOfput(line, GEPrimitiveWideLine);\n\tobjectIndexOfput(line, 0);\n\tobjectLengthOfput(line, GLWideSize);\n\treturn line;\n}\n\nfunction areEdgeFillsValid(edge) {\n\treturn (objectHeaderOf(edge) & GEEdgeFillsInvalid) === 0;\n}\n\n\n/*\tMake sure that val1 is between val2 and val3. */\n\nfunction assureValuebetweenand(val1, val2, val3) {\n\tif (val2 > val3) {\n\t\tif (val1 > val2) {\n\t\t\treturn val2;\n\t\t}\n\t\tif (val1 < val3) {\n\t\t\treturn val3;\n\t\t}\n\t} else {\n\t\tif (val1 < val2) {\n\t\t\treturn val2;\n\t\t}\n\t\tif (val1 > val3) {\n\t\t\treturn val3;\n\t\t}\n\t}\n\treturn val1;\n}\n\nfunction bezierEndXOf(bezier) {\n\treturn objat(bezier, GBEndX);\n}\n\nfunction bezierEndXOfput(bezier, value) {\n\treturn objatput(bezier, GBEndX, value);\n}\n\nfunction bezierEndYOf(bezier) {\n\treturn objat(bezier, GBEndY);\n}\n\nfunction bezierEndYOfput(bezier, value) {\n\treturn objatput(bezier, GBEndY, value);\n}\n\nfunction bezierFinalXOf(bezier) {\n\treturn objat(bezier, GBFinalX);\n}\n\nfunction bezierFinalXOfput(bezier, value) {\n\treturn objatput(bezier, GBFinalX, value);\n}\n\nfunction bezierUpdateDataOf(bezier) {\n\treturn PTR_ADD(objBuffer, bezier + GBUpdateData);\n}\n\nfunction bezierViaXOf(bezier) {\n\treturn objat(bezier, GBViaX);\n}\n\nfunction bezierViaXOfput(bezier, value) {\n\treturn objatput(bezier, GBViaX, value);\n}\n\nfunction bezierViaYOf(bezier) {\n\treturn objat(bezier, GBViaY);\n}\n\nfunction bezierViaYOfput(bezier, value) {\n\treturn objatput(bezier, GBViaY, value);\n}\n\nfunction bitmapCmSizeOf(bmFill) {\n\treturn objat(bmFill, GBColormapSize);\n}\n\nfunction bitmapCmSizeOfput(bmFill, value) {\n\treturn objatput(bmFill, GBColormapSize, value);\n}\n\nfunction bitmapDepthOf(bmFill) {\n\treturn objat(bmFill, GBBitmapDepth);\n}\n\nfunction bitmapDepthOfput(bmFill, value) {\n\treturn objatput(bmFill, GBBitmapDepth, value);\n}\n\nfunction bitmapHeightOf(bmFill) {\n\treturn objat(bmFill, GBBitmapHeight);\n}\n\nfunction bitmapHeightOfput(bmFill, value) {\n\treturn objatput(bmFill, GBBitmapHeight, value);\n}\n\nfunction bitmapRasterOf(bmFill) {\n\treturn objat(bmFill, GBBitmapRaster);\n}\n\nfunction bitmapRasterOfput(bmFill, value) {\n\treturn objatput(bmFill, GBBitmapRaster, value);\n}\n\nfunction bitmapSizeOf(bmFill) {\n\treturn objat(bmFill, GBBitmapSize);\n}\n\nfunction bitmapSizeOfput(bmFill, value) {\n\treturn objatput(bmFill, GBBitmapSize, value);\n}\n\nfunction bitmapTileFlagOf(bmFill) {\n\treturn objat(bmFill, GBTileFlag);\n}\n\nfunction bitmapTileFlagOfput(bmFill, value) {\n\treturn objatput(bmFill, GBTileFlag, value);\n}\n\nfunction bitmapValuebitsatXy(bmFill, bits, xp, yp) {\n\tvar a;\n\tvar b;\n\tvar bmDepth;\n\tvar bmRaster;\n\tvar cMask;\n\tvar g;\n\tvar r;\n\tvar rShift;\n\tvar value;\n\n\tbmDepth = bitmapDepthOf(bmFill);\n\tbmRaster = bitmapRasterOf(bmFill);\n\tif (bmDepth === 32) {\n\t\tvalue = (bits[(bmRaster * yp) + xp]|0);\n\t\tif ((value !== 0) && ((value & 4278190080) === 0)) {\n\t\t\tvalue = value | 4278190080;\n\t\t}\n\t\treturn uncheckedTransformColor(value);\n\t}\n\trShift = rShiftTable()[bmDepth];\n\n\t/* cMask - mask out the pixel from the word */\n\n\tvalue = bits[(bmRaster * yp) + (SHR(xp, rShift))];\n\n\t/* rShift - shift value to move the pixel in the word to the lowest bit position */\n\n\tcMask = (SHL(1, bmDepth)) - 1;\n\trShift = (32 - bmDepth) - ((xp & ((SHL(1, rShift)) - 1)) * bmDepth);\n\tvalue = (SHR(value, rShift)) & cMask;\n\tif (bmDepth === 16) {\n\n\t\t/* Must convert by expanding bits */\n\n\t\tif (value !== 0) {\n\t\t\tb = (value & 31) << 3;\n\t\t\tb += b >>> 5;\n\t\t\tg = ((value >>> 5) & 31) << 3;\n\t\t\tg += g >>> 5;\n\t\t\tr = ((value >>> 10) & 31) << 3;\n\t\t\tr += r >>> 5;\n\t\t\ta = 255;\n\t\t\tvalue = ((b + (g << 8)) + (r << 16)) + (a << 24);\n\t\t}\n\t} else {\n\n\t\t/* Must convert by using color map */\n\n\t\tif (bitmapCmSizeOf(bmFill) === 0) {\n\t\t\tvalue = 0;\n\t\t} else {\n\t\t\tvalue = colormapOf(bmFill)[value];\n\t\t}\n\t}\n\treturn uncheckedTransformColor(value);\n}\n\nfunction bitmapWidthOf(bmFill) {\n\treturn objat(bmFill, GBBitmapWidth);\n}\n\nfunction bitmapWidthOfput(bmFill, value) {\n\treturn objatput(bmFill, GBBitmapWidth, value);\n}\n\nfunction bzEndX(index) {\n\treturn wbStackValue((wbStackSize() - index) + 4);\n}\n\nfunction bzEndXput(index, value) {\n\treturn wbStackValueput((wbStackSize() - index) + 4, value);\n}\n\nfunction bzEndY(index) {\n\treturn wbStackValue((wbStackSize() - index) + 5);\n}\n\nfunction bzEndYput(index, value) {\n\treturn wbStackValueput((wbStackSize() - index) + 5, value);\n}\n\nfunction bzStartX(index) {\n\treturn wbStackValue((wbStackSize() - index) + 0);\n}\n\nfunction bzStartXput(index, value) {\n\treturn wbStackValueput((wbStackSize() - index) + 0, value);\n}\n\nfunction bzStartY(index) {\n\treturn wbStackValue((wbStackSize() - index) + 1);\n}\n\nfunction bzStartYput(index, value) {\n\treturn wbStackValueput((wbStackSize() - index) + 1, value);\n}\n\nfunction bzViaX(index) {\n\treturn wbStackValue((wbStackSize() - index) + 2);\n}\n\nfunction bzViaXput(index, value) {\n\treturn wbStackValueput((wbStackSize() - index) + 2, value);\n}\n\nfunction bzViaY(index) {\n\treturn wbStackValue((wbStackSize() - index) + 3);\n}\n\nfunction bzViaYput(index, value) {\n\treturn wbStackValueput((wbStackSize() - index) + 3, value);\n}\n\n\n/*\tCheck the fill indexes in the run-length encoded fillList */\n\nfunction checkCompressedFillIndexListmaxsegments(fillList, maxIndex, nSegs) {\n\tvar fillPtr;\n\tvar i;\n\tvar length;\n\tvar nFills;\n\tvar runLength;\n\tvar runValue;\n\n\tlength = SIZEOF(fillList);\n\tfillPtr = fillList.wordsAsInt32Array();\n\tnFills = 0;\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\trunLength = shortRunLengthAtfrom(i, fillPtr);\n\t\trunValue = shortRunValueAtfrom(i, fillPtr);\n\t\tif (!((runValue >= 0) && (runValue <= maxIndex))) {\n\t\t\treturn false;\n\t\t}\n\t\tnFills += runLength;\n\t}\n\treturn nFills === nSegs;\n}\n\n\n/*\tCheck if the indexList (containing fill handles) is okay. */\n\nfunction checkCompressedFills(indexList) {\n\tvar fillIndex;\n\tvar fillPtr;\n\tvar i;\n\tvar length;\n\n\n\t/* First check if the oops have the right format */\n\n\tif (!interpreterProxy.isWords(indexList)) {\n\t\treturn false;\n\t}\n\tlength = SIZEOF(indexList);\n\tfillPtr = indexList.wordsAsInt32Array();\n\tfor (i = 0; i <= (length - 1); i++) {\n\n\t\t/* Make sure the fill is okay */\n\n\t\tfillIndex = fillPtr[i];\n\t\tif (!isFillOkay(fillIndex)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\n\n/*\tCheck the run-length encoded lineWidthList matches nSegments */\n\nfunction checkCompressedLineWidthssegments(lineWidthList, nSegments) {\n\tvar i;\n\tvar length;\n\tvar nItems;\n\tvar ptr;\n\tvar runLength;\n\n\tlength = SIZEOF(lineWidthList);\n\tptr = lineWidthList.wordsAsInt32Array();\n\tnItems = 0;\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\trunLength = shortRunLengthAtfrom(i, ptr);\n\t\tnItems += runLength;\n\t}\n\treturn nItems === nSegments;\n}\n\n\n/*\tCheck if the given point array can be handled by the engine. */\n\nfunction checkCompressedPointssegments(points, nSegments) {\n\tvar pSize;\n\n\tif (!interpreterProxy.isWords(points)) {\n\t\treturn false;\n\t}\n\n\t/* The points must be either in PointArray format or ShortPointArray format.\n\tAlso, we currently handle only quadratic segments (e.g., 3 points each) and thus either\n\t\tpSize = nSegments * 3,\t\tfor ShortPointArrays or,\n\t\tpSize = nSegments * 6,\t\tfor PointArrays */\n\n\tpSize = SIZEOF(points);\n\tif (!((pSize === (nSegments * 3)) || (pSize === (nSegments * 6)))) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\n\n/*\tCheck if the given shape can be handled by the engine. \n\tSince there are a number of requirements this is an extra method. */\n\nfunction checkCompressedShapesegmentsleftFillsrightFillslineWidthslineFillsfillIndexList(points, nSegments, leftFills, rightFills, lineWidths, lineFills, fillIndexList) {\n\tvar maxFillIndex;\n\n\tif (!checkCompressedPointssegments(points, nSegments)) {\n\t\treturn false;\n\t}\n\tif (!checkCompressedFills(fillIndexList)) {\n\t\treturn false;\n\t}\n\tmaxFillIndex = SIZEOF(fillIndexList);\n\tif (!checkCompressedFillIndexListmaxsegments(leftFills, maxFillIndex, nSegments)) {\n\t\treturn false;\n\t}\n\tif (!checkCompressedFillIndexListmaxsegments(rightFills, maxFillIndex, nSegments)) {\n\t\treturn false;\n\t}\n\tif (!checkCompressedFillIndexListmaxsegments(lineFills, maxFillIndex, nSegments)) {\n\t\treturn false;\n\t}\n\tif (!checkCompressedLineWidthssegments(lineWidths, nSegments)) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\n\n/*\tAdd the bezier to the global edge table if it intersects the clipping region */\n\nfunction checkedAddBezierToGET(bezier) {\n\tvar lineWidth;\n\n\tif (isWide(bezier)) {\n\t\tlineWidth = wideBezierExtentOf(bezier);\n\t} else {\n\t\tlineWidth = 0;\n\t}\n\tif ((bezierEndYOf(bezier) + lineWidth) < fillMinYGet()) {\n\t\treturn 0;\n\t}\n\tif (((edgeXValueOf(bezier) - lineWidth) >= fillMaxXGet()) && ((bezierEndXOf(bezier) - lineWidth) >= fillMaxXGet())) {\n\t\treturn 0;\n\t}\n\taddEdgeToGET(bezier);\n}\n\n\n/*\tAdd the edge to the global edge table.\n\tFor known edge types, check if the edge intersects the visible region */\n\nfunction checkedAddEdgeToGET(edge) {\n\tif (isLine(edge)) {\n\t\treturn checkedAddLineToGET(edge);\n\t}\n\tif (isBezier(edge)) {\n\t\treturn checkedAddBezierToGET(edge);\n\t}\n\taddEdgeToGET(edge);\n}\n\n\n/*\tAdd the line to the global edge table if it intersects the clipping region */\n\nfunction checkedAddLineToGET(line) {\n\tvar lineWidth;\n\n\tif (isWide(line)) {\n\t\tlineWidth = wideLineExtentOf(line);\n\t} else {\n\t\tlineWidth = 0;\n\t}\n\tif ((lineEndYOf(line) + lineWidth) < fillMinYGet()) {\n\t\treturn 0;\n\t}\n\tif (((edgeXValueOf(line) - lineWidth) >= fillMaxXGet()) && ((lineEndXOf(line) - lineWidth) >= fillMaxXGet())) {\n\t\treturn 0;\n\t}\n\taddEdgeToGET(line);\n}\n\nfunction circleCosTable() {\n\tvar theTable =\n\t\t[1.0, 0.98078528040323, 0.923879532511287, 0.831469612302545,\n\t\t0.7071067811865475, 0.555570233019602, 0.38268343236509, 0.1950903220161286,\n\t\t0.0, -0.1950903220161283, -0.3826834323650896, -0.555570233019602,\n\t\t-0.707106781186547, -0.831469612302545, -0.9238795325112865, -0.98078528040323,\n\t\t-1.0, -0.98078528040323, -0.923879532511287, -0.831469612302545,\n\t\t-0.707106781186548, -0.555570233019602, -0.3826834323650903, -0.1950903220161287,\n\t\t0.0, 0.1950903220161282, 0.38268343236509, 0.555570233019602,\n\t\t0.707106781186547, 0.831469612302545, 0.9238795325112865, 0.98078528040323,\n\t\t1.0 ];\n\n\treturn theTable;\n}\n\nfunction circleSinTable() {\n\tvar theTable =\n\t\t[0.0, 0.1950903220161282, 0.3826834323650897, 0.555570233019602,\n\t\t0.707106781186547, 0.831469612302545, 0.923879532511287, 0.98078528040323,\n\t\t1.0, 0.98078528040323, 0.923879532511287, 0.831469612302545,\n\t\t0.7071067811865475, 0.555570233019602, 0.38268343236509, 0.1950903220161286,\n\t\t0.0, -0.1950903220161283, -0.3826834323650896, -0.555570233019602,\n\t\t-0.707106781186547, -0.831469612302545, -0.9238795325112865, -0.98078528040323,\n\t\t-1.0, -0.98078528040323, -0.923879532511287, -0.831469612302545,\n\t\t-0.707106781186548, -0.555570233019602, -0.3826834323650903, -0.1950903220161287,\n\t\t 0.0 ];\n\n\treturn theTable;\n}\n\nfunction clampValuemax(value, maxValue) {\n\tif (value < 0) {\n\t\treturn 0;\n\t} else {\n\t\tif (value >= maxValue) {\n\t\t\treturn maxValue - 1;\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t}\n}\n\n\n/*\tClear the current span buffer.\n\tThe span buffer is only cleared in the area that has been used by the previous scan line. */\n\nfunction clearSpanBuffer() {\n\tvar x0;\n\tvar x1;\n\n\tx0 = SHR(spanStartGet(), aaShiftGet());\n\tx1 = (SHR(spanEndGet(), aaShiftGet())) + 1;\n\tif (x0 < 0) {\n\t\tx0 = 0;\n\t}\n\tif (x1 > spanSizeGet()) {\n\t\tx1 = spanSizeGet();\n\t}\n\twhile (x0 < x1) {\n\t\tspanBuffer[x0] = 0;\n\t\t++x0;\n\t}\n\tspanStartPut(spanSizeGet());\n\tspanEndPut(0);\n}\n\nfunction clearSpanBufferGet() {\n\treturn workBuffer[GWClearSpanBuffer];\n}\n\nfunction clearSpanBufferPut(value) {\n\treturn workBuffer[GWClearSpanBuffer] = value;\n}\n\nfunction clipMaxXGet() {\n\treturn workBuffer[GWClipMaxX];\n}\n\nfunction clipMaxXPut(value) {\n\treturn workBuffer[GWClipMaxX] = value;\n}\n\nfunction clipMaxYGet() {\n\treturn workBuffer[GWClipMaxY];\n}\n\nfunction clipMaxYPut(value) {\n\treturn workBuffer[GWClipMaxY] = value;\n}\n\nfunction clipMinXGet() {\n\treturn workBuffer[GWClipMinX];\n}\n\nfunction clipMinXPut(value) {\n\treturn workBuffer[GWClipMinX] = value;\n}\n\nfunction clipMinYGet() {\n\treturn workBuffer[GWClipMinY];\n}\n\nfunction clipMinYPut(value) {\n\treturn workBuffer[GWClipMinY] = value;\n}\n\nfunction colorTransform() {\n\treturn FPTR_ADD(workBuffer, GWColorTransform);\n}\n\nfunction colormapOf(bmFill) {\n\treturn PTR_ADD(objBuffer, bmFill + GBColormapOffset);\n}\n\n\n/*\tSplit the bezier curve at the given parametric value.\n\tNote: Since this method is only invoked to make non-monoton\n\t\tbeziers monoton we must check for the resulting y values\n\t\tto be *really* between the start and end value. */\n\nfunction computeBeziersplitAt(index, param) {\n\tvar endX;\n\tvar endY;\n\tvar leftViaX;\n\tvar leftViaY;\n\tvar newIndex;\n\tvar rightViaX;\n\tvar rightViaY;\n\tvar sharedX;\n\tvar sharedY;\n\tvar startX;\n\tvar startY;\n\tvar viaX;\n\tvar viaY;\n\n\tleftViaX = (startX = bzStartX(index));\n\tleftViaY = (startY = bzStartY(index));\n\trightViaX = (viaX = bzViaX(index));\n\trightViaY = (viaY = bzViaY(index));\n\tendX = bzEndX(index);\n\n\t/* Compute intermediate points */\n\n\tendY = bzEndY(index);\n\tsharedX = (leftViaX += (((viaX - startX) * param)|0));\n\tsharedY = (leftViaY += (((viaY - startY) * param)|0));\n\trightViaX += (((endX - viaX) * param)|0);\n\n\t/* Compute new shared point */\n\n\trightViaY += (((endY - viaY) * param)|0);\n\tsharedX += (((rightViaX - leftViaX) * param)|0);\n\n\t/* Check the new via points */\n\n\tsharedY += (((rightViaY - leftViaY) * param)|0);\n\tleftViaY = assureValuebetweenand(leftViaY, startY, sharedY);\n\trightViaY = assureValuebetweenand(rightViaY, sharedY, endY);\n\tnewIndex = allocateBezierStackEntry();\n\tif (engineStopped) {\n\t\treturn 0;\n\t}\n\tbzViaXput(index, leftViaX);\n\tbzViaYput(index, leftViaY);\n\tbzEndXput(index, sharedX);\n\tbzEndYput(index, sharedY);\n\tbzStartXput(newIndex, sharedX);\n\tbzStartYput(newIndex, sharedY);\n\tbzViaXput(newIndex, rightViaX);\n\tbzViaYput(newIndex, rightViaY);\n\tbzEndXput(newIndex, endX);\n\tbzEndYput(newIndex, endY);\n\treturn newIndex;\n}\n\n\n/*\tSplit the bezier curve at 0.5. */\n\nfunction computeBezierSplitAtHalf(index) {\n\tvar endX;\n\tvar endY;\n\tvar leftViaX;\n\tvar leftViaY;\n\tvar newIndex;\n\tvar rightViaX;\n\tvar rightViaY;\n\tvar sharedX;\n\tvar sharedY;\n\tvar startX;\n\tvar startY;\n\tvar viaX;\n\tvar viaY;\n\n\tnewIndex = allocateBezierStackEntry();\n\tif (engineStopped) {\n\t\treturn 0;\n\t}\n\tleftViaX = (startX = bzStartX(index));\n\tleftViaY = (startY = bzStartY(index));\n\trightViaX = (viaX = bzViaX(index));\n\trightViaY = (viaY = bzViaY(index));\n\tendX = bzEndX(index);\n\n\t/* Compute intermediate points */\n\n\tendY = bzEndY(index);\n\tleftViaX += (viaX - startX) >> 1;\n\tleftViaY += (viaY - startY) >> 1;\n\tsharedX = (rightViaX += (endX - viaX) >> 1);\n\n\t/* Compute new shared point */\n\n\tsharedY = (rightViaY += (endY - viaY) >> 1);\n\tsharedX += (leftViaX - rightViaX) >> 1;\n\n\t/* Store the first part back */\n\n\tsharedY += (leftViaY - rightViaY) >> 1;\n\tbzViaXput(index, leftViaX);\n\tbzViaYput(index, leftViaY);\n\tbzEndXput(index, sharedX);\n\tbzEndYput(index, sharedY);\n\tbzStartXput(newIndex, sharedX);\n\tbzStartYput(newIndex, sharedY);\n\tbzViaXput(newIndex, rightViaX);\n\tbzViaYput(newIndex, rightViaY);\n\tbzEndXput(newIndex, endX);\n\tbzEndYput(newIndex, endY);\n\treturn newIndex;\n}\n\n\n/*\tGet both values from the two boundaries of the given bezier \n\tand compute the actual position/width of the line */\n\nfunction computeFinalWideBezierValueswidth(bezier, lineWidth) {\n\tvar leftX;\n\tvar rightX;\n\tvar temp;\n\n\tleftX = bezierUpdateDataOf(bezier)[GBUpdateX] >> 8;\n\trightX = wideBezierUpdateDataOf(bezier)[GBUpdateX] >> 8;\n\tif (leftX > rightX) {\n\t\ttemp = leftX;\n\t\tleftX = rightX;\n\t\trightX = temp;\n\t}\n\tedgeXValueOfput(bezier, leftX);\n\tif ((rightX - leftX) > lineWidth) {\n\t\twideBezierWidthOfput(bezier, rightX - leftX);\n\t} else {\n\t\twideBezierWidthOfput(bezier, lineWidth);\n\t}\n}\n\nfunction computeSqrt(length2) {\n\tif (length2 < 32) {\n\t\treturn smallSqrtTable()[length2];\n\t} else {\n\t\treturn ((Math.sqrt(length2) + 0.5)|0);\n\t}\n}\n\nfunction copyBitsFromtoat(x0, x1, yValue) {\n\tif (!copyBitsFn) {\n\n\t\t/* We need copyBits here so try to load it implicitly */\n\n\t\tif (!initialiseModule()) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn copyBitsFn(x0, x1, yValue);\n}\n\n\n/*\tCreate the global edge table */\n\nfunction createGlobalEdgeTable() {\n\tvar end;\n\tvar object;\n\n\tobject = 0;\n\tend = objUsed;\n\twhile (object < end) {\n\n\t\t/* Note: addEdgeToGET: may fail on insufficient space but that's not a problem here */\n\n\t\tif (isEdge(object)) {\n\n\t\t\t/* Check if the edge starts below fillMaxY. */\n\n\t\t\tif (!(edgeYValueOf(object) >= fillMaxYGet())) {\n\t\t\t\tcheckedAddEdgeToGET(object);\n\t\t\t}\n\t\t}\n\t\tobject += objectLengthOf(object);\n\t}\n}\n\nfunction currentYGet() {\n\treturn workBuffer[GWCurrentY];\n}\n\nfunction currentYPut(value) {\n\treturn workBuffer[GWCurrentY] = value;\n}\n\nfunction currentZGet() {\n\treturn workBuffer[GWCurrentZ];\n}\n\nfunction currentZPut(value) {\n\treturn workBuffer[GWCurrentZ] = value;\n}\n\nfunction destOffsetXGet() {\n\treturn workBuffer[GWDestOffsetX];\n}\n\nfunction destOffsetXPut(value) {\n\treturn workBuffer[GWDestOffsetX] = value;\n}\n\nfunction destOffsetYGet() {\n\treturn workBuffer[GWDestOffsetY];\n}\n\nfunction destOffsetYPut(value) {\n\treturn workBuffer[GWDestOffsetY] = value;\n}\n\n\n/*\tDisplay the span buffer at the current scan line. */\n\nfunction displaySpanBufferAt(y) {\n\tvar targetX0;\n\tvar targetX1;\n\tvar targetY;\n\n\n\t/* self aaLevelGet > 1 ifTrue:[self adjustAALevel]. */\n\n\ttargetX0 = SHR(spanStartGet(), aaShiftGet());\n\tif (targetX0 < clipMinXGet()) {\n\t\ttargetX0 = clipMinXGet();\n\t}\n\ttargetX1 = SHR(((spanEndGet() + aaLevelGet()) - 1), aaShiftGet());\n\tif (targetX1 > clipMaxXGet()) {\n\t\ttargetX1 = clipMaxXGet();\n\t}\n\ttargetY = SHR(y, aaShiftGet());\n\tif ((targetY < clipMinYGet()) || ((targetY >= clipMaxYGet()) || ((targetX1 < clipMinXGet()) || (targetX0 >= clipMaxXGet())))) {\n\t\treturn 0;\n\t}\n\tcopyBitsFromtoat(targetX0, targetX1, targetY);\n}\n\nfunction edgeFillsInvalidate(edge) {\n\treturn objectTypeOfput(edge, objectTypeOf(edge) | GEEdgeFillsInvalid);\n}\n\nfunction edgeFillsValidate(edge) {\n\treturn objectTypeOfput(edge, objectTypeOf(edge) & ~GEEdgeFillsInvalid);\n}\n\nfunction edgeLeftFillOf(edge) {\n\treturn objat(edge, GEFillIndexLeft);\n}\n\nfunction edgeLeftFillOfput(edge, value) {\n\treturn objatput(edge, GEFillIndexLeft, value);\n}\n\nfunction edgeNumLinesOf(edge) {\n\treturn objat(edge, GENumLines);\n}\n\nfunction edgeNumLinesOfput(edge, value) {\n\treturn objatput(edge, GENumLines, value);\n}\n\nfunction edgeRightFillOf(edge) {\n\treturn objat(edge, GEFillIndexRight);\n}\n\nfunction edgeRightFillOfput(edge, value) {\n\treturn objatput(edge, GEFillIndexRight, value);\n}\n\nfunction edgeTransform() {\n\treturn FPTR_ADD(workBuffer, GWEdgeTransform);\n}\n\n\n/*\tReturn the edge type (e.g., witout the wide edge flag) */\n\nfunction edgeTypeOf(edge) {\n\treturn objectTypeOf(edge) >>> 1;\n}\n\nfunction edgeXValueOf(edge) {\n\treturn objat(edge, GEXValue);\n}\n\nfunction edgeXValueOfput(edge, value) {\n\treturn objatput(edge, GEXValue, value);\n}\n\nfunction edgeYValueOf(edge) {\n\treturn objat(edge, GEYValue);\n}\n\nfunction edgeYValueOfput(edge, value) {\n\treturn objatput(edge, GEYValue, value);\n}\n\nfunction edgeZValueOf(edge) {\n\treturn objat(edge, GEZValue);\n}\n\nfunction edgeZValueOfput(edge, value) {\n\treturn objatput(edge, GEZValue, value);\n}\n\n\n/*\tIgnore dispatch errors when translating to C\n\t(since we have no entry point for #error in the VM proxy) */\n\nfunction errorWrongIndex() {\n\t;\n}\n\n\n/*\tFill the span buffer from leftX to rightX with the given fill. */\n\nfunction fillAllFromto(leftX, rightX) {\n\tvar fill;\n\tvar startX;\n\tvar stopX;\n\n\tfill = topFill();\n\tstartX = leftX;\n\tstopX = topRightX();\n\twhile (stopX < rightX) {\n\t\tfill = topFill();\n\t\tif (fill !== 0) {\n\t\t\tif (fillSpanfromto(fill, startX, stopX)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\tquickRemoveInvalidFillsAt(stopX);\n\t\tstartX = stopX;\n\t\tstopX = topRightX();\n\t}\n\tfill = topFill();\n\tif (fill !== 0) {\n\t\treturn fillSpanfromto(fill, startX, rightX);\n\t}\n\treturn false;\n}\n\nfunction fillBitmapSpan() {\n\treturn fillBitmapSpanfromtoat(lastExportedFillGet(), lastExportedLeftXGet(), lastExportedRightXGet(), currentYGet());\n}\n\n\n/*\tFill the span buffer between leftEdge and rightEdge using the given bits.\n\tNote: We always start from zero - this avoids using huge bitmap buffers if the bitmap is to be displayed at the very far right hand side and also gives us a chance of using certain bitmaps (e.g., those with depth 32) directly. */\n\nfunction fillBitmapSpanfromto(bits, leftX, rightX) {\n\tvar baseShift;\n\tvar bitX;\n\tvar colorMask;\n\tvar colorShift;\n\tvar fillValue;\n\tvar x;\n\tvar x0;\n\tvar x1;\n\n\tx0 = leftX;\n\tx1 = rightX;\n\n\t/* Hack for pre-increment */\n\n\tbitX = -1;\n\tif (aaLevelGet() === 1) {\n\n\t\t/* Speedy version for no anti-aliasing */\n\n\t\twhile (x0 < x1) {\n\t\t\tfillValue = (bits[(++bitX)]|0);\n\t\t\tspanBuffer[x0] = fillValue;\n\t\t\t++x0;\n\t\t}\n\t} else {\n\n\t\t/* Generic version with anti-aliasing */\n\n\t\tcolorMask = aaColorMaskGet();\n\t\tcolorShift = aaColorShiftGet();\n\t\tbaseShift = aaShiftGet();\n\t\twhile (x0 < x1) {\n\t\t\tx = SHR(x0, baseShift);\n\t\t\tfillValue = (bits[(++bitX)]|0);\n\t\t\tfillValue = SHR((fillValue & colorMask), colorShift);\n\t\t\tspanBuffer[x] = (spanBuffer[x] + fillValue);\n\t\t\t++x0;\n\t\t}\n\t}\n\tif (x1 > spanEndGet()) {\n\t\tspanEndPut(x1);\n\t}\n\tif (x1 > spanEndAAGet()) {\n\t\tspanEndAAPut(x1);\n\t}\n}\n\nfunction fillBitmapSpanfromtoat(bmFill, leftX, rightX, yValue) {\n\tvar bits;\n\tvar bmHeight;\n\tvar bmWidth;\n\tvar deltaX;\n\tvar deltaY;\n\tvar ds;\n\tvar dsX;\n\tvar dt;\n\tvar dtX;\n\tvar fillValue;\n\tvar tileFlag;\n\tvar x;\n\tvar x1;\n\tvar xp;\n\tvar yp;\n\n\tif (aaLevelGet() !== 1) {\n\t\treturn fillBitmapSpanAAfromtoat(bmFill, leftX, rightX, yValue);\n\t}\n\tbits = loadBitsFrom(bmFill);\n\tif (!bits) {\n\t\treturn null;\n\t}\n\tbmWidth = bitmapWidthOf(bmFill);\n\tbmHeight = bitmapHeightOf(bmFill);\n\ttileFlag = bitmapTileFlagOf(bmFill) === 1;\n\tdeltaX = leftX - fillOriginXOf(bmFill);\n\tdeltaY = yValue - fillOriginYOf(bmFill);\n\tdsX = fillDirectionXOf(bmFill);\n\tdtX = fillNormalXOf(bmFill);\n\tds = (deltaX * dsX) + (deltaY * fillDirectionYOf(bmFill));\n\tdt = (deltaX * dtX) + (deltaY * fillNormalYOf(bmFill));\n\tx = leftX;\n\tx1 = rightX;\n\twhile (x < x1) {\n\t\tif (tileFlag) {\n\t\t\tds = repeatValuemax(ds, bmWidth << 16);\n\t\t\tdt = repeatValuemax(dt, bmHeight << 16);\n\t\t}\n\t\txp = ds >> 16;\n\t\typ = dt >> 16;\n\t\tif (!tileFlag) {\n\t\t\txp = clampValuemax(xp, bmWidth);\n\t\t\typ = clampValuemax(yp, bmHeight);\n\t\t}\n\t\tif ((xp >= 0) && ((yp >= 0) && ((xp < bmWidth) && (yp < bmHeight)))) {\n\t\t\tfillValue = bitmapValuebitsatXy(bmFill, bits, xp, yp);\n\t\t\tspanBuffer[x] = fillValue;\n\t\t}\n\t\tds += dsX;\n\t\tdt += dtX;\n\t\t++x;\n\t}\n}\n\nfunction fillBitmapSpanAAfromtoat(bmFill, leftX, rightX, yValue) {\n\tvar aaLevel;\n\tvar baseShift;\n\tvar bits;\n\tvar bmHeight;\n\tvar bmWidth;\n\tvar cMask;\n\tvar cShift;\n\tvar deltaX;\n\tvar deltaY;\n\tvar ds;\n\tvar dsX;\n\tvar dt;\n\tvar dtX;\n\tvar fillValue;\n\tvar firstPixel;\n\tvar idx;\n\tvar lastPixel;\n\tvar tileFlag;\n\tvar x;\n\tvar xp;\n\tvar yp;\n\n\tbits = loadBitsFrom(bmFill);\n\tif (!bits) {\n\t\treturn null;\n\t}\n\tbmWidth = bitmapWidthOf(bmFill);\n\tbmHeight = bitmapHeightOf(bmFill);\n\ttileFlag = bitmapTileFlagOf(bmFill) === 1;\n\tdeltaX = leftX - fillOriginXOf(bmFill);\n\tdeltaY = yValue - fillOriginYOf(bmFill);\n\tdsX = fillDirectionXOf(bmFill);\n\tdtX = fillNormalXOf(bmFill);\n\tds = (deltaX * dsX) + (deltaY * fillDirectionYOf(bmFill));\n\tdt = (deltaX * dtX) + (deltaY * fillNormalYOf(bmFill));\n\taaLevel = aaLevelGet();\n\tfirstPixel = aaFirstPixelFromto(leftX, rightX);\n\tlastPixel = aaLastPixelFromto(leftX, rightX);\n\tbaseShift = aaShiftGet();\n\tcMask = aaColorMaskGet();\n\tcShift = aaColorShiftGet();\n\tx = leftX;\n\twhile (x < firstPixel) {\n\t\tif (tileFlag) {\n\t\t\tds = repeatValuemax(ds, bmWidth << 16);\n\t\t\tdt = repeatValuemax(dt, bmHeight << 16);\n\t\t}\n\t\txp = ds >> 16;\n\t\typ = dt >> 16;\n\t\tif (!tileFlag) {\n\t\t\txp = clampValuemax(xp, bmWidth);\n\t\t\typ = clampValuemax(yp, bmHeight);\n\t\t}\n\t\tif ((xp >= 0) && ((yp >= 0) && ((xp < bmWidth) && (yp < bmHeight)))) {\n\t\t\tfillValue = bitmapValuebitsatXy(bmFill, bits, xp, yp);\n\t\t\tfillValue = SHR((fillValue & cMask), cShift);\n\t\t\tidx = SHR(x, baseShift);\n\t\t\tspanBuffer[idx] = (spanBuffer[idx] + fillValue);\n\t\t}\n\t\tds += dsX;\n\t\tdt += dtX;\n\t\t++x;\n\t}\n\tcMask = (SHR(aaColorMaskGet(), aaShiftGet())) | 4042322160;\n\tcShift = aaShiftGet();\n\twhile (x < lastPixel) {\n\t\tif (tileFlag) {\n\t\t\tds = repeatValuemax(ds, bmWidth << 16);\n\t\t\tdt = repeatValuemax(dt, bmHeight << 16);\n\t\t}\n\t\txp = ds >> 16;\n\t\typ = dt >> 16;\n\t\tif (!tileFlag) {\n\t\t\txp = clampValuemax(xp, bmWidth);\n\t\t\typ = clampValuemax(yp, bmHeight);\n\t\t}\n\t\tif ((xp >= 0) && ((yp >= 0) && ((xp < bmWidth) && (yp < bmHeight)))) {\n\t\t\tfillValue = bitmapValuebitsatXy(bmFill, bits, xp, yp);\n\t\t\tfillValue = SHR((fillValue & cMask), cShift);\n\t\t\tidx = SHR(x, baseShift);\n\t\t\tspanBuffer[idx] = (spanBuffer[idx] + fillValue);\n\t\t}\n\t\tds += SHL(dsX, cShift);\n\t\tdt += SHL(dtX, cShift);\n\t\tx += aaLevel;\n\t}\n\tcMask = aaColorMaskGet();\n\tcShift = aaColorShiftGet();\n\twhile (x < rightX) {\n\t\tif (tileFlag) {\n\t\t\tds = repeatValuemax(ds, bmWidth << 16);\n\t\t\tdt = repeatValuemax(dt, bmHeight << 16);\n\t\t}\n\t\txp = ds >> 16;\n\t\typ = dt >> 16;\n\t\tif (!tileFlag) {\n\t\t\txp = clampValuemax(xp, bmWidth);\n\t\t\typ = clampValuemax(yp, bmHeight);\n\t\t}\n\t\tif ((xp >= 0) && ((yp >= 0) && ((xp < bmWidth) && (yp < bmHeight)))) {\n\t\t\tfillValue = bitmapValuebitsatXy(bmFill, bits, xp, yp);\n\t\t\tfillValue = SHR((fillValue & cMask), cShift);\n\t\t\tidx = SHR(x, baseShift);\n\t\t\tspanBuffer[idx] = (spanBuffer[idx] + fillValue);\n\t\t}\n\t\tds += dsX;\n\t\tdt += dtX;\n\t\t++x;\n\t}\n}\n\n\n/*\tFill the span buffer between leftEdge and rightEdge with the given pixel value. */\n\nfunction fillColorSpanfromto(pixelValue32, leftX, rightX) {\n\tvar x0;\n\tvar x1;\n\n\n\t/* Use a unrolled version for anti-aliased fills... */\n\n\tif (aaLevelGet() !== 1) {\n\t\treturn fillColorSpanAAx0x1(pixelValue32, leftX, rightX);\n\t}\n\tx0 = leftX;\n\n\t/* Unroll the inner loop four times, since we're only storing data. */\n\n\tx1 = rightX;\n\twhile ((x0 + 4) < x1) {\n\t\tspanBuffer[x0] = pixelValue32;\n\t\tspanBuffer[x0 + 1] = pixelValue32;\n\t\tspanBuffer[x0 + 2] = pixelValue32;\n\t\tspanBuffer[x0 + 3] = pixelValue32;\n\t\tx0 += 4;\n\t}\n\twhile (x0 < x1) {\n\t\tspanBuffer[x0] = pixelValue32;\n\t\t++x0;\n\t}\n}\n\n\n/*\tThis is the inner loop for solid color fills with anti-aliasing.\n\tThis loop has been unrolled for speed and quality into three parts:\n\t\ta) copy all pixels that fall into the first full pixel.\n\t\tb) copy aaLevel pixels between the first and the last full pixel\n\t\tc) copy all pixels that fall in the last full pixel */\n\nfunction fillColorSpanAAx0x1(pixelValue32, leftX, rightX) {\n\tvar aaLevel;\n\tvar baseShift;\n\tvar colorMask;\n\tvar firstPixel;\n\tvar idx;\n\tvar lastPixel;\n\tvar pv32;\n\tvar x;\n\n\n\t/* Not now -- maybe later */\n\t/* Compute the pixel boundaries. */\n\n\tfirstPixel = aaFirstPixelFromto(leftX, rightX);\n\tlastPixel = aaLastPixelFromto(leftX, rightX);\n\taaLevel = aaLevelGet();\n\tbaseShift = aaShiftGet();\n\n\t/* Part a: Deal with the first n sub-pixels */\n\n\tx = leftX;\n\tif (x < firstPixel) {\n\t\tpv32 = SHR((pixelValue32 & aaColorMaskGet()), aaColorShiftGet());\n\t\twhile (x < firstPixel) {\n\t\t\tidx = SHR(x, baseShift);\n\t\t\tspanBuffer[idx] = (spanBuffer[idx] + pv32);\n\t\t\t++x;\n\t\t}\n\t}\n\tif (x < lastPixel) {\n\t\tcolorMask = (SHR(aaColorMaskGet(), aaShiftGet())) | 4042322160;\n\t\tpv32 = SHR((pixelValue32 & colorMask), aaShiftGet());\n\t\twhile (x < lastPixel) {\n\t\t\tidx = SHR(x, baseShift);\n\t\t\tspanBuffer[idx] = (spanBuffer[idx] + pv32);\n\t\t\tx += aaLevel;\n\t\t}\n\t}\n\tif (x < rightX) {\n\t\tpv32 = SHR((pixelValue32 & aaColorMaskGet()), aaColorShiftGet());\n\t\twhile (x < rightX) {\n\t\t\tidx = SHR(x, baseShift);\n\t\t\tspanBuffer[idx] = (spanBuffer[idx] + pv32);\n\t\t\t++x;\n\t\t}\n\t}\n}\n\nfunction fillDirectionXOf(fill) {\n\treturn objat(fill, GFDirectionX);\n}\n\nfunction fillDirectionXOfput(fill, value) {\n\treturn objatput(fill, GFDirectionX, value);\n}\n\nfunction fillDirectionYOf(fill) {\n\treturn objat(fill, GFDirectionY);\n}\n\nfunction fillDirectionYOfput(fill, value) {\n\treturn objatput(fill, GFDirectionY, value);\n}\n\nfunction fillLinearGradient() {\n\treturn fillLinearGradientfromtoat(lastExportedFillGet(), lastExportedLeftXGet(), lastExportedRightXGet(), currentYGet());\n}\n\n\n/*\tDraw a linear gradient fill. */\n\nfunction fillLinearGradientfromtoat(fill, leftX, rightX, yValue) {\n\tvar ds;\n\tvar dsX;\n\tvar ramp;\n\tvar rampIndex;\n\tvar rampSize;\n\tvar x;\n\tvar x0;\n\tvar x1;\n\n\tramp = gradientRampOf(fill);\n\trampSize = gradientRampLengthOf(fill);\n\tdsX = fillDirectionXOf(fill);\n\tds = ((leftX - fillOriginXOf(fill)) * dsX) + ((yValue - fillOriginYOf(fill)) * fillDirectionYOf(fill));\n\tx = (x0 = leftX);\n\n\t/* Note: The inner loop has been divided into three parts for speed */\n\t/* Part one: Fill everything outside the left boundary */\n\n\tx1 = rightX;\n\twhile (((((rampIndex = ds >> 16)) < 0) || (rampIndex >= rampSize)) && (x < x1)) {\n\t\t++x;\n\t\tds += dsX;\n\t}\n\tif (x > x0) {\n\t\tif (rampIndex < 0) {\n\t\t\trampIndex = 0;\n\t\t}\n\t\tif (rampIndex >= rampSize) {\n\t\t\trampIndex = rampSize - 1;\n\t\t}\n\t\tfillColorSpanfromto(ramp[rampIndex], x0, x);\n\t}\n\tif (aaLevelGet() === 1) {\n\n\t\t/* Fast version w/o anti-aliasing */\n\n\t\twhile (((((rampIndex = ds >> 16)) < rampSize) && (rampIndex >= 0)) && (x < x1)) {\n\t\t\tspanBuffer[x] = ramp[rampIndex];\n\t\t\t++x;\n\t\t\tds += dsX;\n\t\t}\n\t} else {\n\t\tx = fillLinearGradientAArampdsdsXfromto(fill, ramp, ds, dsX, x, rightX);\n\t}\n\tif (x < x1) {\n\t\tif (rampIndex < 0) {\n\t\t\trampIndex = 0;\n\t\t}\n\t\tif (rampIndex >= rampSize) {\n\t\t\trampIndex = rampSize - 1;\n\t\t}\n\t\tfillColorSpanfromto(ramp[rampIndex], x, x1);\n\t}\n}\n\n\n/*\tThis is the AA version of linear gradient filling. */\n\nfunction fillLinearGradientAArampdsdsXfromto(fill, ramp, deltaS, dsX, leftX, rightX) {\n\tvar aaLevel;\n\tvar baseShift;\n\tvar colorMask;\n\tvar colorShift;\n\tvar ds;\n\tvar firstPixel;\n\tvar idx;\n\tvar lastPixel;\n\tvar rampIndex;\n\tvar rampSize;\n\tvar rampValue;\n\tvar x;\n\n\taaLevel = aaLevelGet();\n\tbaseShift = aaShiftGet();\n\trampSize = gradientRampLengthOf(fill);\n\tds = deltaS;\n\tx = leftX;\n\trampIndex = ds >> 16;\n\tfirstPixel = aaFirstPixelFromto(leftX, rightX);\n\n\t/* Deal with the first n sub-pixels */\n\n\tlastPixel = aaLastPixelFromto(leftX, rightX);\n\tcolorMask = aaColorMaskGet();\n\tcolorShift = aaColorShiftGet();\n\twhile ((x < firstPixel) && ((rampIndex < rampSize) && (rampIndex >= 0))) {\n\t\trampValue = ramp[rampIndex];\n\n\t\t/* Copy as many pixels as possible */\n\n\t\trampValue = SHR((rampValue & colorMask), colorShift);\n\t\twhile ((x < firstPixel) && ((ds >> 16) === rampIndex)) {\n\t\t\tidx = SHR(x, baseShift);\n\t\t\tspanBuffer[idx] = (spanBuffer[idx] + rampValue);\n\t\t\t++x;\n\t\t\tds += dsX;\n\t\t}\n\t\trampIndex = ds >> 16;\n\t}\n\tcolorMask = (SHR(aaColorMaskGet(), aaShiftGet())) | 4042322160;\n\tcolorShift = aaShiftGet();\n\twhile ((x < lastPixel) && ((rampIndex < rampSize) && (rampIndex >= 0))) {\n\t\trampValue = ramp[rampIndex];\n\n\t\t/* Copy as many pixels as possible */\n\n\t\trampValue = SHR((rampValue & colorMask), colorShift);\n\t\twhile ((x < lastPixel) && ((ds >> 16) === rampIndex)) {\n\t\t\tidx = SHR(x, baseShift);\n\t\t\tspanBuffer[idx] = (spanBuffer[idx] + rampValue);\n\t\t\tx += aaLevel;\n\t\t\tds += SHL(dsX, colorShift);\n\t\t}\n\t\trampIndex = ds >> 16;\n\t}\n\tcolorMask = aaColorMaskGet();\n\tcolorShift = aaColorShiftGet();\n\twhile ((x < rightX) && ((rampIndex < rampSize) && (rampIndex >= 0))) {\n\t\trampValue = ramp[rampIndex];\n\n\t\t/* Copy as many pixels as possible */\n\n\t\trampValue = SHR((rampValue & colorMask), colorShift);\n\t\twhile ((x < rightX) && ((ds >> 16) === rampIndex)) {\n\t\t\tidx = SHR(x, baseShift);\n\t\t\tspanBuffer[idx] = (spanBuffer[idx] + rampValue);\n\t\t\t++x;\n\t\t\tds += dsX;\n\t\t}\n\t\trampIndex = ds >> 16;\n\t}\n\treturn x;\n}\n\nfunction fillMaxXGet() {\n\treturn workBuffer[GWFillMaxX];\n}\n\nfunction fillMaxXPut(value) {\n\treturn workBuffer[GWFillMaxX] = value;\n}\n\nfunction fillMaxYGet() {\n\treturn workBuffer[GWFillMaxY];\n}\n\nfunction fillMaxYPut(value) {\n\treturn workBuffer[GWFillMaxY] = value;\n}\n\nfunction fillMinXGet() {\n\treturn workBuffer[GWFillMinX];\n}\n\nfunction fillMinXPut(value) {\n\treturn workBuffer[GWFillMinX] = value;\n}\n\nfunction fillMinYGet() {\n\treturn workBuffer[GWFillMinY];\n}\n\nfunction fillMinYPut(value) {\n\treturn workBuffer[GWFillMinY] = value;\n}\n\nfunction fillNormalXOf(fill) {\n\treturn objat(fill, GFNormalX);\n}\n\nfunction fillNormalXOfput(fill, value) {\n\treturn objatput(fill, GFNormalX, value);\n}\n\nfunction fillNormalYOf(fill) {\n\treturn objat(fill, GFNormalY);\n}\n\nfunction fillNormalYOfput(fill, value) {\n\treturn objatput(fill, GFNormalY, value);\n}\n\nfunction fillOriginXOf(fill) {\n\treturn objat(fill, GFOriginX);\n}\n\nfunction fillOriginXOfput(fill, value) {\n\treturn objatput(fill, GFOriginX, value);\n}\n\nfunction fillOriginYOf(fill) {\n\treturn objat(fill, GFOriginY);\n}\n\nfunction fillOriginYOfput(fill, value) {\n\treturn objatput(fill, GFOriginY, value);\n}\n\n\n/*\tPart 2a) Compute the decreasing part of the ramp */\n\nfunction fillRadialDecreasingrampdeltaSTdsXdtXfromto(fill, ramp, deltaST, dsX, dtX, leftX, rightX) {\n\tvar ds;\n\tvar dt;\n\tvar length2;\n\tvar nextLength;\n\tvar rampIndex;\n\tvar rampValue;\n\tvar x;\n\tvar x1;\n\n\tds = (deltaST[0]|0);\n\tdt = (deltaST[1]|0);\n\trampIndex = accurateLengthOfwith(ds >> 16, dt >> 16);\n\trampValue = ramp[rampIndex];\n\tlength2 = (rampIndex - 1) * (rampIndex - 1);\n\tx = leftX;\n\tx1 = rightX;\n\tif (x1 > fillOriginXOf(fill)) {\n\t\tx1 = fillOriginXOf(fill);\n\t}\n\twhile (x < x1) {\n\n\t\t/* Try to copy the current value more than just once */\n\n\t\twhile ((x < x1) && (squaredLengthOfwith(ds >> 16, dt >> 16) >= length2)) {\n\t\t\tspanBuffer[x] = rampValue;\n\t\t\t++x;\n\t\t\tds += dsX;\n\t\t\tdt += dtX;\n\t\t}\n\t\tnextLength = squaredLengthOfwith(ds >> 16, dt >> 16);\n\t\twhile (nextLength < length2) {\n\t\t\t--rampIndex;\n\t\t\trampValue = ramp[rampIndex];\n\t\t\tlength2 = (rampIndex - 1) * (rampIndex - 1);\n\t\t}\n\t}\n\tdeltaST[0] = ds;\n\tdeltaST[1] = dt;\n\treturn x;\n}\n\n\n/*\tPart 2a) Compute the decreasing part of the ramp */\n\nfunction fillRadialDecreasingAArampdeltaSTdsXdtXfromto(fill, ramp, deltaST, dsX, dtX, leftX, rightX) {\n\tvar aaLevel;\n\tvar baseShift;\n\tvar colorMask;\n\tvar colorShift;\n\tvar ds;\n\tvar dt;\n\tvar firstPixel;\n\tvar index;\n\tvar lastPixel;\n\tvar length2;\n\tvar nextLength;\n\tvar rampIndex;\n\tvar rampValue;\n\tvar x;\n\tvar x1;\n\n\tds = (deltaST[0]|0);\n\tdt = (deltaST[1]|0);\n\taaLevel = aaLevelGet();\n\tbaseShift = aaShiftGet();\n\trampIndex = accurateLengthOfwith(ds >> 16, dt >> 16);\n\tlength2 = (rampIndex - 1) * (rampIndex - 1);\n\tx = leftX;\n\tx1 = fillOriginXOf(fill);\n\tif (x1 > rightX) {\n\t\tx1 = rightX;\n\t}\n\tfirstPixel = aaFirstPixelFromto(leftX, x1);\n\n\t/* Deal with the first n sub-pixels */\n\n\tlastPixel = aaLastPixelFromto(leftX, x1);\n\tif (x < firstPixel) {\n\t\tcolorMask = aaColorMaskGet();\n\t\tcolorShift = aaColorShiftGet();\n\t\trampValue = ramp[rampIndex];\n\t\trampValue = SHR((rampValue & colorMask), colorShift);\n\t\twhile (x < firstPixel) {\n\n\t\t\t/* Try to copy the current value more than just once */\n\n\t\t\twhile ((x < firstPixel) && (squaredLengthOfwith(ds >> 16, dt >> 16) >= length2)) {\n\t\t\t\tindex = SHR(x, baseShift);\n\t\t\t\tspanBuffer[index] = (spanBuffer[index] + rampValue);\n\t\t\t\t++x;\n\t\t\t\tds += dsX;\n\t\t\t\tdt += dtX;\n\t\t\t}\n\t\t\tnextLength = squaredLengthOfwith(ds >> 16, dt >> 16);\n\t\t\twhile (nextLength < length2) {\n\t\t\t\t--rampIndex;\n\t\t\t\trampValue = ramp[rampIndex];\n\t\t\t\trampValue = SHR((rampValue & colorMask), colorShift);\n\t\t\t\tlength2 = (rampIndex - 1) * (rampIndex - 1);\n\t\t\t}\n\t\t}\n\t}\n\tif (x < lastPixel) {\n\t\tcolorMask = (SHR(aaColorMaskGet(), aaShiftGet())) | 4042322160;\n\t\tcolorShift = aaShiftGet();\n\t\trampValue = ramp[rampIndex];\n\t\trampValue = SHR((rampValue & colorMask), colorShift);\n\t\twhile (x < lastPixel) {\n\n\t\t\t/* Try to copy the current value more than just once */\n\n\t\t\twhile ((x < lastPixel) && (squaredLengthOfwith(ds >> 16, dt >> 16) >= length2)) {\n\t\t\t\tindex = SHR(x, baseShift);\n\t\t\t\tspanBuffer[index] = (spanBuffer[index] + rampValue);\n\t\t\t\tx += aaLevel;\n\t\t\t\tds += SHL(dsX, colorShift);\n\t\t\t\tdt += SHL(dtX, colorShift);\n\t\t\t}\n\t\t\tnextLength = squaredLengthOfwith(ds >> 16, dt >> 16);\n\t\t\twhile (nextLength < length2) {\n\t\t\t\t--rampIndex;\n\t\t\t\trampValue = ramp[rampIndex];\n\t\t\t\trampValue = SHR((rampValue & colorMask), colorShift);\n\t\t\t\tlength2 = (rampIndex - 1) * (rampIndex - 1);\n\t\t\t}\n\t\t}\n\t}\n\tif (x < x1) {\n\t\tcolorMask = aaColorMaskGet();\n\t\tcolorShift = aaColorShiftGet();\n\t\trampValue = ramp[rampIndex];\n\t\trampValue = SHR((rampValue & colorMask), colorShift);\n\t\twhile (x < x1) {\n\n\t\t\t/* Try to copy the current value more than just once */\n\n\t\t\twhile ((x < x1) && (squaredLengthOfwith(ds >> 16, dt >> 16) >= length2)) {\n\t\t\t\tindex = SHR(x, baseShift);\n\t\t\t\tspanBuffer[index] = (spanBuffer[index] + rampValue);\n\t\t\t\t++x;\n\t\t\t\tds += dsX;\n\t\t\t\tdt += dtX;\n\t\t\t}\n\t\t\tnextLength = squaredLengthOfwith(ds >> 16, dt >> 16);\n\t\t\twhile (nextLength < length2) {\n\t\t\t\t--rampIndex;\n\t\t\t\trampValue = ramp[rampIndex];\n\t\t\t\trampValue = SHR((rampValue & colorMask), colorShift);\n\t\t\t\tlength2 = (rampIndex - 1) * (rampIndex - 1);\n\t\t\t}\n\t\t}\n\t}\n\tdeltaST[0] = ds;\n\tdeltaST[1] = dt;\n\treturn x;\n}\n\nfunction fillRadialGradient() {\n\treturn fillRadialGradientfromtoat(lastExportedFillGet(), lastExportedLeftXGet(), lastExportedRightXGet(), currentYGet());\n}\n\n\n/*\tDraw a radial gradient fill. */\n\nfunction fillRadialGradientfromtoat(fill, leftX, rightX, yValue) {\n\tvar deltaST;\n\tvar deltaX;\n\tvar deltaY;\n\tvar ds;\n\tvar dsX;\n\tvar dt;\n\tvar dtX;\n\tvar length2;\n\tvar ramp;\n\tvar rampSize;\n\tvar x;\n\tvar x1;\n\n\tramp = gradientRampOf(fill);\n\trampSize = gradientRampLengthOf(fill);\n\tdeltaX = leftX - fillOriginXOf(fill);\n\tdeltaY = yValue - fillOriginYOf(fill);\n\tdsX = fillDirectionXOf(fill);\n\tdtX = fillNormalXOf(fill);\n\tds = (deltaX * dsX) + (deltaY * fillDirectionYOf(fill));\n\tdt = (deltaX * dtX) + (deltaY * fillNormalYOf(fill));\n\tx = leftX;\n\n\t/* Note: The inner loop has been divided into three parts for speed */\n\t/* Part one: Fill everything outside the left boundary */\n\n\tx1 = rightX;\n\n\t/* This is the upper bound */\n\n\tlength2 = (rampSize - 1) * (rampSize - 1);\n\twhile ((squaredLengthOfwith(ds >> 16, dt >> 16) >= length2) && (x < x1)) {\n\t\t++x;\n\t\tds += dsX;\n\t\tdt += dtX;\n\t}\n\tif (x > leftX) {\n\t\tfillColorSpanfromto(ramp[rampSize - 1], leftX, x);\n\t}\n\tdeltaST = point1Get();\n\tdeltaST[0] = ds;\n\tdeltaST[1] = dt;\n\tif (x < fillOriginXOf(fill)) {\n\n\t\t/* Draw the decreasing part */\n\n\t\tif (aaLevelGet() === 1) {\n\t\t\tx = fillRadialDecreasingrampdeltaSTdsXdtXfromto(fill, ramp, deltaST, dsX, dtX, x, x1);\n\t\t} else {\n\t\t\tx = fillRadialDecreasingAArampdeltaSTdsXdtXfromto(fill, ramp, deltaST, dsX, dtX, x, x1);\n\t\t}\n\t}\n\tif (x < x1) {\n\n\t\t/* Draw the increasing part */\n\n\t\tif (aaLevelGet() === 1) {\n\t\t\tx = fillRadialIncreasingrampdeltaSTdsXdtXfromto(fill, ramp, deltaST, dsX, dtX, x, x1);\n\t\t} else {\n\t\t\tx = fillRadialIncreasingAArampdeltaSTdsXdtXfromto(fill, ramp, deltaST, dsX, dtX, x, x1);\n\t\t}\n\t}\n\tif (x < rightX) {\n\t\tfillColorSpanfromto(ramp[rampSize - 1], x, rightX);\n\t}\n}\n\n\n/*\tPart 2b) Compute the increasing part of the ramp */\n\nfunction fillRadialIncreasingrampdeltaSTdsXdtXfromto(fill, ramp, deltaST, dsX, dtX, leftX, rightX) {\n\tvar ds;\n\tvar dt;\n\tvar lastLength;\n\tvar length2;\n\tvar nextLength;\n\tvar rampIndex;\n\tvar rampSize;\n\tvar rampValue;\n\tvar x;\n\tvar x1;\n\n\tds = (deltaST[0]|0);\n\tdt = (deltaST[1]|0);\n\trampIndex = accurateLengthOfwith(ds >> 16, dt >> 16);\n\trampValue = ramp[rampIndex];\n\trampSize = gradientRampLengthOf(fill);\n\n\t/* This is the upper bound */\n\n\tlength2 = (rampSize - 1) * (rampSize - 1);\n\tnextLength = (rampIndex + 1) * (rampIndex + 1);\n\tlastLength = squaredLengthOfwith(ds >> 16, dt >> 16);\n\tx = leftX;\n\tx1 = rightX;\n\twhile ((x < x1) && (lastLength < length2)) {\n\n\t\t/* Try to copy the current value more than once */\n\n\t\twhile ((x < x1) && (squaredLengthOfwith(ds >> 16, dt >> 16) <= nextLength)) {\n\t\t\tspanBuffer[x] = rampValue;\n\t\t\t++x;\n\t\t\tds += dsX;\n\t\t\tdt += dtX;\n\t\t}\n\t\tlastLength = squaredLengthOfwith(ds >> 16, dt >> 16);\n\t\twhile (lastLength > nextLength) {\n\t\t\t++rampIndex;\n\t\t\trampValue = ramp[rampIndex];\n\t\t\tnextLength = (rampIndex + 1) * (rampIndex + 1);\n\t\t}\n\t}\n\tdeltaST[0] = ds;\n\tdeltaST[1] = dt;\n\treturn x;\n}\n\n\n/*\tPart 2b) Compute the increasing part of the ramp */\n\nfunction fillRadialIncreasingAArampdeltaSTdsXdtXfromto(fill, ramp, deltaST, dsX, dtX, leftX, rightX) {\n\tvar aaLevel;\n\tvar baseShift;\n\tvar colorMask;\n\tvar colorShift;\n\tvar ds;\n\tvar dt;\n\tvar firstPixel;\n\tvar index;\n\tvar lastLength;\n\tvar lastPixel;\n\tvar length2;\n\tvar nextLength;\n\tvar rampIndex;\n\tvar rampSize;\n\tvar rampValue;\n\tvar x;\n\n\tds = (deltaST[0]|0);\n\tdt = (deltaST[1]|0);\n\taaLevel = aaLevelGet();\n\tbaseShift = aaShiftGet();\n\trampIndex = accurateLengthOfwith(ds >> 16, dt >> 16);\n\trampSize = gradientRampLengthOf(fill);\n\n\t/* This is the upper bound */\n\n\tlength2 = (rampSize - 1) * (rampSize - 1);\n\tnextLength = (rampIndex + 1) * (rampIndex + 1);\n\tlastLength = squaredLengthOfwith(ds >> 16, dt >> 16);\n\tx = leftX;\n\tfirstPixel = aaFirstPixelFromto(leftX, rightX);\n\n\t/* Deal with the first n subPixels */\n\n\tlastPixel = aaLastPixelFromto(leftX, rightX);\n\tif ((x < firstPixel) && (lastLength < length2)) {\n\t\tcolorMask = aaColorMaskGet();\n\t\tcolorShift = aaColorShiftGet();\n\t\trampValue = ramp[rampIndex];\n\t\trampValue = SHR((rampValue & colorMask), colorShift);\n\t\twhile ((x < firstPixel) && (lastLength < length2)) {\n\n\t\t\t/* Try to copy the current value more than once */\n\n\t\t\twhile ((x < firstPixel) && (squaredLengthOfwith(ds >> 16, dt >> 16) <= nextLength)) {\n\t\t\t\tindex = SHR(x, baseShift);\n\t\t\t\tspanBuffer[index] = (spanBuffer[index] + rampValue);\n\t\t\t\t++x;\n\t\t\t\tds += dsX;\n\t\t\t\tdt += dtX;\n\t\t\t}\n\t\t\tlastLength = squaredLengthOfwith(ds >> 16, dt >> 16);\n\t\t\twhile (lastLength > nextLength) {\n\t\t\t\t++rampIndex;\n\t\t\t\trampValue = ramp[rampIndex];\n\t\t\t\trampValue = SHR((rampValue & colorMask), colorShift);\n\t\t\t\tnextLength = (rampIndex + 1) * (rampIndex + 1);\n\t\t\t}\n\t\t}\n\t}\n\tif ((x < lastPixel) && (lastLength < length2)) {\n\t\tcolorMask = (SHR(aaColorMaskGet(), aaShiftGet())) | 4042322160;\n\t\tcolorShift = aaShiftGet();\n\t\trampValue = ramp[rampIndex];\n\t\trampValue = SHR((rampValue & colorMask), colorShift);\n\t\twhile ((x < lastPixel) && (lastLength < length2)) {\n\n\t\t\t/* Try to copy the current value more than once */\n\n\t\t\twhile ((x < lastPixel) && (squaredLengthOfwith(ds >> 16, dt >> 16) <= nextLength)) {\n\t\t\t\tindex = SHR(x, baseShift);\n\t\t\t\tspanBuffer[index] = (spanBuffer[index] + rampValue);\n\t\t\t\tx += aaLevel;\n\t\t\t\tds += SHL(dsX, colorShift);\n\t\t\t\tdt += SHL(dtX, colorShift);\n\t\t\t}\n\t\t\tlastLength = squaredLengthOfwith(ds >> 16, dt >> 16);\n\t\t\twhile (lastLength > nextLength) {\n\t\t\t\t++rampIndex;\n\t\t\t\trampValue = ramp[rampIndex];\n\t\t\t\trampValue = SHR((rampValue & colorMask), colorShift);\n\t\t\t\tnextLength = (rampIndex + 1) * (rampIndex + 1);\n\t\t\t}\n\t\t}\n\t}\n\tif ((x < rightX) && (lastLength < length2)) {\n\t\tcolorMask = aaColorMaskGet();\n\t\tcolorShift = aaColorShiftGet();\n\t\trampValue = ramp[rampIndex];\n\t\trampValue = SHR((rampValue & colorMask), colorShift);\n\t\twhile ((x < rightX) && (lastLength < length2)) {\n\n\t\t\t/* Try to copy the current value more than once */\n\n\t\t\twhile ((x < rightX) && (squaredLengthOfwith(ds >> 16, dt >> 16) <= nextLength)) {\n\t\t\t\tindex = SHR(x, baseShift);\n\t\t\t\tspanBuffer[index] = (spanBuffer[index] + rampValue);\n\t\t\t\t++x;\n\t\t\t\tds += dsX;\n\t\t\t\tdt += dtX;\n\t\t\t}\n\t\t\tlastLength = squaredLengthOfwith(ds >> 16, dt >> 16);\n\t\t\twhile (lastLength > nextLength) {\n\t\t\t\t++rampIndex;\n\t\t\t\trampValue = ramp[rampIndex];\n\t\t\t\trampValue = SHR((rampValue & colorMask), colorShift);\n\t\t\t\tnextLength = (rampIndex + 1) * (rampIndex + 1);\n\t\t\t}\n\t\t}\n\t}\n\tdeltaST[0] = ds;\n\tdeltaST[1] = dt;\n\treturn x;\n}\n\n\n/*\tReturn true if fillEntry1 should be drawn before fillEntry2 */\n\nfunction fillSortsbefore(fillEntry1, fillEntry2) {\n\tvar diff;\n\n\n\t/* First check the depth value */\n\n\tdiff = stackFillDepth(fillEntry1) - stackFillDepth(fillEntry2);\n\tif (diff !== 0) {\n\t\treturn diff > 0;\n\t}\n\treturn (stackFillValue(fillEntry1)>>>0) < (stackFillValue(fillEntry2)>>>0);\n}\n\n\n/*\tFill the span buffer from leftX to rightX with the given fill.\n\tClip before performing any operations. Return true if the fill must\n\tbe handled by some Smalltalk code. */\n\nfunction fillSpanfromto(fill, leftX, rightX) {\n\tvar type;\n\tvar x0;\n\tvar x1;\n\n\tif (fill === 0) {\n\t\treturn false;\n\t}\n\tif (leftX < spanEndAAGet()) {\n\t\tx0 = spanEndAAGet();\n\t} else {\n\t\tx0 = leftX;\n\t}\n\tif (rightX > (SHL(spanSizeGet(), aaShiftGet()))) {\n\t\tx1 = SHL(spanSizeGet(), aaShiftGet());\n\t} else {\n\t\tx1 = rightX;\n\t}\n\tif (x0 < fillMinXGet()) {\n\t\tx0 = fillMinXGet();\n\t}\n\tif (x1 > fillMaxXGet()) {\n\t\tx1 = fillMaxXGet();\n\t}\n\tif (x0 < spanStartGet()) {\n\t\tspanStartPut(x0);\n\t}\n\tif (x1 > spanEndGet()) {\n\t\tspanEndPut(x1);\n\t}\n\tif (x1 > spanEndAAGet()) {\n\t\tspanEndAAPut(x1);\n\t}\n\tif (x0 >= x1) {\n\t\treturn false;\n\t}\n\tif (isFillColor(fill)) {\n\t\tfillColorSpanfromto(fill, x0, x1);\n\t} else {\n\n\t\t/* Store the values for the dispatch */\n\n\t\tlastExportedFillPut(fill);\n\t\tlastExportedLeftXPut(x0);\n\t\tlastExportedRightXPut(x1);\n\t\ttype = fillTypeOf(fill);\n\t\tif (type <= 1) {\n\t\t\treturn true;\n\t\t}\n\t\tswitch (type) {\n\t\tcase 0:\n\t\tcase 1:\n\t\t\terrorWrongIndex();\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tfillLinearGradient();\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tfillRadialGradient();\n\t\t\tbreak;\n\t\tcase 4:\n\t\tcase 5:\n\t\t\tfillBitmapSpan();\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction fillTypeOf(fill) {\n\treturn (objectTypeOf(fill) & GEPrimitiveFillMask) >>> 8;\n}\n\n\n/*\tCheck the global edge table for any entries that cannot be handled by the engine itself.\n\tIf there are any, return true. Otherwise, initialize the the edge and add it to the AET */\n\nfunction findNextExternalEntryFromGET() {\n\tvar edge;\n\tvar type;\n\tvar yValue;\n\n\n\t/* As long as we have entries in the GET */\n\n\tyValue = currentYGet();\n\twhile (getStartGet() < getUsedGet()) {\n\t\tedge = getBuffer[getStartGet()];\n\t\tif (edgeYValueOf(edge) > yValue) {\n\t\t\treturn false;\n\t\t}\n\t\ttype = objectTypeOf(edge);\n\t\tif ((type & GEPrimitiveWideMask) === GEPrimitiveEdge) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!needAvailableSpace(1)) {\n\t\t\treturn false;\n\t\t}\n\t\tswitch (type) {\n\t\tcase 0:\n\t\tcase 1:\n\t\tcase 2:\n\t\tcase 3:\n\t\t\terrorWrongIndex();\n\t\t\tbreak;\n\t\tcase 4:\n\t\t\tstepToFirstLine();\n\t\t\tbreak;\n\t\tcase 5:\n\t\t\tstepToFirstWideLine();\n\t\t\tbreak;\n\t\tcase 6:\n\t\t\tstepToFirstBezier();\n\t\t\tbreak;\n\t\tcase 7:\n\t\t\tstepToFirstWideBezier();\n\t\t\tbreak;\n\t\t}\n\t\tinsertEdgeIntoAET(edge);\n\t\tgetStartPut(getStartGet() + 1);\n\t}\n\treturn false;\n}\n\n\n/*\tScan the active edge table. If there is any fill that cannot be handled by the engine itself,  return true. Otherwise handle the fills and return false. */\n/*\tself currentYGet >= 680 ifTrue:[\nself printAET.\nself halt.\n]. */\n\nfunction findNextExternalFillFromAET() {\n\tvar leftEdge;\n\tvar leftX;\n\tvar rightEdge;\n\tvar rightX;\n\n\tleftX = (rightX = fillMaxXGet());\n\twhile (aetStartGet() < aetUsedGet()) {\n\n\t\t/* TODO: We should check if leftX from last operation \n\t\t\tis  greater than leftX from next edge.\n\t\t\tCurrently, we rely here on spanEndAA\n\t\t\tfrom the span buffer fill. */\n\n\t\tleftEdge = (rightEdge = aetBuffer[aetStartGet()]);\n\t\tleftX = (rightX = edgeXValueOf(leftEdge));\n\t\tif (leftX >= fillMaxXGet()) {\n\t\t\treturn false;\n\t\t}\n\t\tquickRemoveInvalidFillsAt(leftX);\n\t\tif (isWide(leftEdge)) {\n\t\t\ttoggleWideFillOf(leftEdge);\n\t\t}\n\t\tif (areEdgeFillsValid(leftEdge)) {\n\t\t\ttoggleFillsOf(leftEdge);\n\t\t\tif (engineStopped) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\taetStartPut(aetStartGet() + 1);\n\t\tif (aetStartGet() < aetUsedGet()) {\n\t\t\trightEdge = aetBuffer[aetStartGet()];\n\t\t\trightX = edgeXValueOf(rightEdge);\n\t\t\tif (rightX >= fillMinXGet()) {\n\n\t\t\t\t/* This is the visible portion */\n\n\t\t\t\tfillAllFromto(leftX, rightX);\n\t\t\t}\n\t\t}\n\t}\n\tif (rightX < fillMaxXGet()) {\n\t\tfillAllFromto(rightX, fillMaxXGet());\n\t}\n\treturn false;\n}\n\n\n/*\tCheck the active edge table for any entries that cannot be handled by the engine itself.\n\tIf there are any, return true. Otherwise, step the the edge to the next y value. */\n\nfunction findNextExternalUpdateFromAET() {\n\tvar count;\n\tvar edge;\n\tvar type;\n\n\twhile (aetStartGet() < aetUsedGet()) {\n\t\tedge = aetBuffer[aetStartGet()];\n\t\tcount = edgeNumLinesOf(edge) - 1;\n\t\tif (count === 0) {\n\n\t\t\t/* Edge at end -- remove it */\n\n\t\t\tremoveFirstAETEntry();\n\t\t} else {\n\n\t\t\t/* Store remaining lines back */\n\n\t\t\tedgeNumLinesOfput(edge, count);\n\t\t\ttype = objectTypeOf(edge);\n\t\t\tif ((type & GEPrimitiveWideMask) === GEPrimitiveEdge) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tswitch (type) {\n\t\t\tcase 0:\n\t\t\tcase 1:\n\t\t\tcase 2:\n\t\t\tcase 3:\n\t\t\t\terrorWrongIndex();\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tstepToNextLine();\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tstepToNextWideLine();\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tstepToNextBezier();\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\tstepToNextWideBezier();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tresortFirstAETEntry();\n\t\t\taetStartPut(aetStartGet() + 1);\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction findStackFilldepth(fillIndex, depth) {\n\tvar index;\n\n\tindex = 0;\n\twhile ((index < stackFillSize()) && ((stackFillValue(index) !== fillIndex) || (stackFillDepth(index) !== depth))) {\n\t\tindex += stackFillEntryLength();\n\t}\n\tif (index >= stackFillSize()) {\n\t\treturn -1;\n\t} else {\n\t\treturn index;\n\t}\n}\n\n\n/*\tReturn true if processing is finished */\n\nfunction finishedProcessing() {\n\treturn stateGet() === GEStateCompleted;\n}\n\nfunction freeStackFillEntry() {\n\twbStackPop(stackFillEntryLength());\n}\n\n\n/*\tNote: This is hardcoded so it can be run from Squeak.\n\tThe module name is used for validating a module *after*\n\tit is loaded to check if it does really contain the module\n\twe're thinking it contains. This is important! */\n\nfunction getModuleName() {\n\treturn moduleName;\n}\n\n\n/*\tReturn true if the edge at index i should sort before the edge at index j. */\n\nfunction getSortsbefore(edge1, edge2) {\n\tvar diff;\n\n\tif (edge1 === edge2) {\n\t\treturn true;\n\t}\n\tdiff = edgeYValueOf(edge1) - edgeYValueOf(edge2);\n\tif (diff !== 0) {\n\t\treturn diff < 0;\n\t}\n\tdiff = edgeXValueOf(edge1) - edgeXValueOf(edge2);\n\treturn diff < 0;\n}\n\nfunction getStartGet() {\n\treturn workBuffer[GWGETStart];\n}\n\nfunction getStartPut(value) {\n\treturn workBuffer[GWGETStart] = value;\n}\n\nfunction getUsedGet() {\n\treturn workBuffer[GWGETUsed];\n}\n\nfunction getUsedPut(value) {\n\treturn workBuffer[GWGETUsed] = value;\n}\n\nfunction gradientRampLengthOf(fill) {\n\treturn objat(fill, GFRampLength);\n}\n\nfunction gradientRampLengthOfput(fill, value) {\n\treturn objatput(fill, GFRampLength, value);\n}\n\nfunction gradientRampOf(fill) {\n\treturn PTR_ADD(objBuffer, fill + GFRampOffset);\n}\n\nfunction halt() {\n\t;\n}\n\nfunction hasColorTransform() {\n\treturn hasColorTransformGet() !== 0;\n}\n\nfunction hasColorTransformGet() {\n\treturn workBuffer[GWHasColorTransform];\n}\n\nfunction hasColorTransformPut(value) {\n\treturn workBuffer[GWHasColorTransform] = value;\n}\n\nfunction hasEdgeTransform() {\n\treturn hasEdgeTransformGet() !== 0;\n}\n\nfunction hasEdgeTransformGet() {\n\treturn workBuffer[GWHasEdgeTransform];\n}\n\nfunction hasEdgeTransformPut(value) {\n\treturn workBuffer[GWHasEdgeTransform] = value;\n}\n\n\n/*\tMake the fill style with the given index invisible */\n\nfunction hideFilldepth(fillIndex, depth) {\n\tvar index;\n\tvar newDepth;\n\tvar newRightX;\n\tvar newTop;\n\tvar newTopIndex;\n\n\tindex = findStackFilldepth(fillIndex, depth);\n\tif (index === -1) {\n\t\treturn false;\n\t}\n\tif (index === 0) {\n\t\tfreeStackFillEntry();\n\t\treturn true;\n\t}\n\tstackFillValueput(index, stackFillValue(0));\n\tstackFillDepthput(index, stackFillDepth(0));\n\tstackFillRightXput(index, stackFillRightX(0));\n\tfreeStackFillEntry();\n\tif (stackFillSize() <= stackFillEntryLength()) {\n\t\treturn true;\n\t}\n\tnewTopIndex = 0;\n\tindex = stackFillEntryLength();\n\twhile (index < stackFillSize()) {\n\t\tif (fillSortsbefore(index, newTopIndex)) {\n\t\t\tnewTopIndex = index;\n\t\t}\n\t\tindex += stackFillEntryLength();\n\t}\n\tif ((newTopIndex + stackFillEntryLength()) === stackFillSize()) {\n\t\treturn true;\n\t}\n\tnewTop = stackFillValue(newTopIndex);\n\tstackFillValueput(newTopIndex, topFillValue());\n\ttopFillValuePut(newTop);\n\tnewDepth = stackFillDepth(newTopIndex);\n\tstackFillDepthput(newTopIndex, topFillDepth());\n\ttopFillDepthPut(newDepth);\n\tnewRightX = stackFillRightX(newTopIndex);\n\tstackFillRightXput(newTopIndex, topFillRightX());\n\ttopFillRightXPut(newRightX);\n\treturn true;\n}\n\nfunction incrementStatby(statIndex, value) {\n\treturn workBuffer[statIndex] = (workBuffer[statIndex] + value);\n}\n\n\n/*\tFind insertion point for the given edge in the AET */\n\nfunction indexForInsertingIntoAET(edge) {\n\tvar index;\n\tvar initialX;\n\n\tinitialX = edgeXValueOf(edge);\n\tindex = 0;\n\twhile ((index < aetUsedGet()) && (edgeXValueOf(aetBuffer[index]) < initialX)) {\n\t\t++index;\n\t}\n\twhile ((index < aetUsedGet()) && ((edgeXValueOf(aetBuffer[index]) === initialX) && (getSortsbefore(aetBuffer[index], edge)))) {\n\t\t++index;\n\t}\n\treturn index;\n}\n\nfunction initColorTransform() {\n\tvar transform;\n\n\ttransform = colorTransform();\n\ttransform[0] = 1.0;\n\ttransform[1] = 0.0;\n\ttransform[2] = 1.0;\n\ttransform[3] = 0.0;\n\ttransform[4] = 1.0;\n\ttransform[5] = 0.0;\n\ttransform[6] = 1.0;\n\ttransform[7] = 0.0;\n\thasColorTransformPut(0);\n}\n\nfunction initEdgeTransform() {\n\tvar transform;\n\n\ttransform = edgeTransform();\n\ttransform[0] = 1.0;\n\ttransform[1] = 0.0;\n\ttransform[2] = 0.0;\n\ttransform[3] = 0.0;\n\ttransform[4] = 1.0;\n\ttransform[5] = 0.0;\n\thasEdgeTransformPut(0);\n}\n\nfunction initialiseModule() {\n\tloadBBFn = interpreterProxy.ioLoadFunctionFrom(\"loadBitBltFrom\", bbPluginName);\n\tcopyBitsFn = interpreterProxy.ioLoadFunctionFrom(\"copyBitsFromtoat\", bbPluginName);\n\treturn (!!loadBBFn) && (!!copyBitsFn);\n}\n\n\n/*\tInitialization stuff that needs to be done before any processing can take place. */\n/*\tMake sure aaLevel is initialized */\n\nfunction initializeGETProcessing() {\n\tsetAALevel(aaLevelGet());\n\tif (clipMinXGet() < 0) {\n\t\tclipMinXPut(0);\n\t}\n\tif (clipMaxXGet() > spanSizeGet()) {\n\t\tclipMaxXPut(spanSizeGet());\n\t}\n\tfillMinXPut(SHL(clipMinXGet(), aaShiftGet()));\n\tfillMinYPut(SHL(clipMinYGet(), aaShiftGet()));\n\tfillMaxXPut(SHL(clipMaxXGet(), aaShiftGet()));\n\tfillMaxYPut(SHL(clipMaxYGet(), aaShiftGet()));\n\tgetUsedPut(0);\n\taetUsedPut(0);\n\tgetBuffer = PTR_ADD(objBuffer, objUsed);\n\n\t/* Create the global edge table */\n\n\taetBuffer = PTR_ADD(objBuffer, objUsed);\n\tcreateGlobalEdgeTable();\n\tif (engineStopped) {\n\t\treturn null;\n\t}\n\tif (getUsedGet() === 0) {\n\n\t\t/* Nothing to do */\n\n\t\tcurrentYPut(fillMaxYGet());\n\t\treturn 0;\n\t}\n\tsortGlobalEdgeTable();\n\tcurrentYPut(edgeYValueOf(getBuffer[0]));\n\tif (currentYGet() < fillMinYGet()) {\n\t\tcurrentYPut(fillMinYGet());\n\t}\n\tspanStartPut(0);\n\tspanEndPut((SHL(spanSizeGet(), aaShiftGet())) - 1);\n\tclearSpanBuffer();\n}\n\n\n/*\tInsert the edge with the given index from the global edge table into the active edge table.\n\tThe edge has already been stepped to the initial yValue -- thus remainingLines and rasterX\n\tare both set. */\n\nfunction insertEdgeIntoAET(edge) {\n\tvar index;\n\n\n\t/* Check for the number of lines remaining */\n\n\tif (edgeNumLinesOf(edge) <= 0) {\n\t\treturn null;\n\t}\n\n\t/* And insert edge */\n\n\tindex = indexForInsertingIntoAET(edge);\n\tinsertToAETbeforeIndex(edge, index);\n}\n\n\n/*\tInsert the given edge into the AET. */\n\nfunction insertToAETbeforeIndex(edge, index) {\n\tvar i;\n\n\n\t/* Make sure we have space in the AET */\n\n\tif (!allocateAETEntry(1)) {\n\t\treturn null;\n\t}\n\ti = aetUsedGet() - 1;\n\twhile (!(i < index)) {\n\t\taetBuffer[i + 1] = aetBuffer[i];\n\t\t--i;\n\t}\n\taetBuffer[index] = edge;\n\taetUsedPut(aetUsedGet() + 1);\n}\n\nfunction isBezier(bezier) {\n\treturn (objectTypeOf(bezier) & GEPrimitiveWideMask) === GEPrimitiveBezier;\n}\n\nfunction isEdge(edge) {\n\tvar type;\n\n\ttype = objectTypeOf(edge);\n\tif (type > GEPrimitiveEdgeMask) {\n\t\treturn false;\n\t}\n\treturn (objectTypeOf(edge) & GEPrimitiveEdgeMask) !== 0;\n}\n\nfunction isFill(fill) {\n\treturn isFillColor(fill) || (isRealFill(fill));\n}\n\nfunction isFillColor(fill) {\n\treturn (fill & 4278190080) !== 0;\n}\n\nfunction isFillOkay(fill) {\n\treturn (fill === 0) || (isFillColor(fill) || (isObject(fill) && (isFill(fill))));\n}\n\nfunction isLine(line) {\n\treturn (objectTypeOf(line) & GEPrimitiveWideMask) === GEPrimitiveLine;\n}\n\nfunction isObject(obj) {\n\treturn (obj >= 0) && (obj < objUsed);\n}\n\nfunction isRealFill(fill) {\n\treturn (objectTypeOf(fill) & GEPrimitiveFillMask) !== 0;\n}\n\nfunction isWide(object) {\n\treturn (objectTypeOf(object) & GEPrimitiveWide) !== 0;\n}\n\nfunction lastExportedEdgeGet() {\n\treturn workBuffer[GWLastExportedEdge];\n}\n\nfunction lastExportedEdgePut(value) {\n\treturn workBuffer[GWLastExportedEdge] = value;\n}\n\nfunction lastExportedFillGet() {\n\treturn workBuffer[GWLastExportedFill];\n}\n\nfunction lastExportedFillPut(value) {\n\treturn workBuffer[GWLastExportedFill] = value;\n}\n\nfunction lastExportedLeftXGet() {\n\treturn workBuffer[GWLastExportedLeftX];\n}\n\nfunction lastExportedLeftXPut(value) {\n\treturn workBuffer[GWLastExportedLeftX] = value;\n}\n\nfunction lastExportedRightXGet() {\n\treturn workBuffer[GWLastExportedRightX];\n}\n\nfunction lastExportedRightXPut(value) {\n\treturn workBuffer[GWLastExportedRightX] = value;\n}\n\nfunction lineEndXOf(line) {\n\treturn objat(line, GLEndX);\n}\n\nfunction lineEndXOfput(line, value) {\n\treturn objatput(line, GLEndX, value);\n}\n\nfunction lineEndYOf(line) {\n\treturn objat(line, GLEndY);\n}\n\nfunction lineEndYOfput(line, value) {\n\treturn objatput(line, GLEndY, value);\n}\n\nfunction lineErrorAdjDownOf(line) {\n\treturn objat(line, GLErrorAdjDown);\n}\n\nfunction lineErrorAdjDownOfput(line, value) {\n\treturn objatput(line, GLErrorAdjDown, value);\n}\n\nfunction lineErrorAdjUpOf(line) {\n\treturn objat(line, GLErrorAdjUp);\n}\n\nfunction lineErrorAdjUpOfput(line, value) {\n\treturn objatput(line, GLErrorAdjUp, value);\n}\n\nfunction lineErrorOf(line) {\n\treturn objat(line, GLError);\n}\n\nfunction lineErrorOfput(line, value) {\n\treturn objatput(line, GLError, value);\n}\n\nfunction lineXDirectionOf(line) {\n\treturn objat(line, GLXDirection);\n}\n\nfunction lineXDirectionOfput(line, value) {\n\treturn objatput(line, GLXDirection, value);\n}\n\nfunction lineXIncrementOf(line) {\n\treturn objat(line, GLXIncrement);\n}\n\nfunction lineXIncrementOfput(line, value) {\n\treturn objatput(line, GLXIncrement, value);\n}\n\nfunction lineYDirectionOfput(line, value) {\n\treturn objatput(line, GLYDirection, value);\n}\n\n\n/*\tLoad and subdivide the bezier curve from point1/point2/point3.\n\tIf wideFlag is set then make sure the curve is monoton in X. */\n\nfunction loadAndSubdivideBezierFromviatoisWide(point1, point2, point3, wideFlag) {\n\tvar bz1;\n\tvar bz2;\n\tvar index;\n\tvar index1;\n\tvar index2;\n\n\tbz1 = allocateBezierStackEntry();\n\tif (engineStopped) {\n\t\treturn 0;\n\t}\n\tbzStartXput(bz1, point1[0]);\n\tbzStartYput(bz1, point1[1]);\n\tbzViaXput(bz1, point2[0]);\n\tbzViaYput(bz1, point2[1]);\n\tbzEndXput(bz1, point3[0]);\n\tbzEndYput(bz1, point3[1]);\n\tindex2 = (bz2 = subdivideToBeMonotoninX(bz1, wideFlag));\n\tfor (index = bz1; index <= bz2; index += 6) {\n\t\tindex1 = subdivideBezierFrom(index);\n\t\tif (index1 > index2) {\n\t\t\tindex2 = index1;\n\t\t}\n\t\tif (engineStopped) {\n\t\t\treturn 0;\n\t\t}\n\t}\n\treturn DIV(index2, 6);\n}\n\nfunction loadArrayPolygonnPointsfilllineWidthlineFill(points, nPoints, fillIndex, lineWidth, lineFill) {\n\tvar i;\n\tvar x0;\n\tvar x1;\n\tvar y0;\n\tvar y1;\n\n\tloadPointfrom(point1Get(), interpreterProxy.fetchPointerofObject(0, points));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tx0 = point1Get()[0];\n\ty0 = point1Get()[1];\n\tfor (i = 1; i <= (nPoints - 1); i++) {\n\t\tloadPointfrom(point1Get(), interpreterProxy.fetchPointerofObject(i, points));\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tx1 = point1Get()[0];\n\t\ty1 = point1Get()[1];\n\t\tpoint1Get()[0] = x0;\n\t\tpoint1Get()[1] = y0;\n\t\tpoint2Get()[0] = x1;\n\t\tpoint2Get()[1] = y1;\n\t\ttransformPoints(2);\n\t\tloadWideLinefromtolineFillleftFillrightFill(lineWidth, point1Get(), point2Get(), lineFill, fillIndex, 0);\n\t\tif (engineStopped) {\n\t\t\treturn null;\n\t\t}\n\t\tx0 = x1;\n\t\ty0 = y1;\n\t}\n}\n\nfunction loadArrayShapenSegmentsfilllineWidthlineFill(points, nSegments, fillIndex, lineWidth, lineFill) {\n\tvar i;\n\tvar pointOop;\n\tvar segs;\n\tvar x0;\n\tvar x1;\n\tvar x2;\n\tvar y0;\n\tvar y1;\n\tvar y2;\n\n\tfor (i = 0; i <= (nSegments - 1); i++) {\n\t\tpointOop = interpreterProxy.fetchPointerofObject(i * 3, points);\n\t\tloadPointfrom(point1Get(), pointOop);\n\t\tpointOop = interpreterProxy.fetchPointerofObject((i * 3) + 1, points);\n\t\tloadPointfrom(point2Get(), pointOop);\n\t\tpointOop = interpreterProxy.fetchPointerofObject((i * 3) + 2, points);\n\t\tloadPointfrom(point3Get(), pointOop);\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\ttransformPoints(3);\n\t\tx0 = point1Get()[0];\n\t\ty0 = point1Get()[1];\n\t\tx1 = point2Get()[0];\n\t\ty1 = point2Get()[1];\n\t\tx2 = point3Get()[0];\n\n\t\t/* Check if we can use a line */\n\n\t\ty2 = point3Get()[1];\n\t\tif (((x0 === y0) && (x1 === y1)) || ((x1 === x2) && (y1 === y2))) {\n\t\t\tloadWideLinefromtolineFillleftFillrightFill(lineWidth, point1Get(), point3Get(), lineFill, fillIndex, 0);\n\t\t} else {\n\n\t\t\t/* Need bezier */\n\n\t\t\tsegs = loadAndSubdivideBezierFromviatoisWide(point1Get(), point2Get(), point3Get(), (lineWidth !== 0) && (lineFill !== 0));\n\t\t\tif (engineStopped) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tloadWideBezierlineFillleftFillrightFilln(lineWidth, lineFill, fillIndex, 0, segs);\n\t\t}\n\t\tif (engineStopped) {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\n\n/*\tLoad a transformation from the given array. */\n\nfunction loadArrayTransformFromintolength(transformOop, destPtr, n) {\n\tvar i;\n\tvar value;\n\n\tfor (i = 0; i <= (n - 1); i++) {\n\t\tvalue = interpreterProxy.fetchPointerofObject(i, transformOop);\n\t\tif (!(typeof value === \"number\" || (value.isFloat))) {\n\t\t\treturn interpreterProxy.primitiveFail();\n\t\t}\n\t\tif (typeof value === \"number\") {\n\t\t\tdestPtr[i] = value;\n\t\t} else {\n\t\t\tdestPtr[i] = interpreterProxy.floatValueOf(value);\n\t\t}\n\t}\n}\n\n\n/*\tInitialize the bezier segment stored on the stack */\n\nfunction loadBeziersegmentleftFillrightFilloffset(bezier, index, leftFillIndex, rightFillIndex, yOffset) {\n\tif (bzEndY(index) >= bzStartY(index)) {\n\n\t\t/* Top to bottom */\n\n\t\tedgeXValueOfput(bezier, bzStartX(index));\n\t\tedgeYValueOfput(bezier, bzStartY(index) - yOffset);\n\t\tbezierViaXOfput(bezier, bzViaX(index));\n\t\tbezierViaYOfput(bezier, bzViaY(index) - yOffset);\n\t\tbezierEndXOfput(bezier, bzEndX(index));\n\t\tbezierEndYOfput(bezier, bzEndY(index) - yOffset);\n\t} else {\n\t\tedgeXValueOfput(bezier, bzEndX(index));\n\t\tedgeYValueOfput(bezier, bzEndY(index) - yOffset);\n\t\tbezierViaXOfput(bezier, bzViaX(index));\n\t\tbezierViaYOfput(bezier, bzViaY(index) - yOffset);\n\t\tbezierEndXOfput(bezier, bzStartX(index));\n\t\tbezierEndYOfput(bezier, bzStartY(index) - yOffset);\n\t}\n\tedgeZValueOfput(bezier, currentZGet());\n\tedgeLeftFillOfput(bezier, leftFillIndex);\n\tedgeRightFillOfput(bezier, rightFillIndex);\n}\n\nfunction loadBitBltFrom(bbObj) {\n\tif (!loadBBFn) {\n\n\t\t/* We need copyBits here so try to load it implicitly */\n\n\t\tif (!initialiseModule()) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn loadBBFn(bbObj);\n}\n\n\n/*\tLoad the bitmap fill. */\n\nfunction loadBitmapFillcolormaptilefromalongnormalxIndex(formOop, cmOop, tileFlag, point1, point2, point3, xIndex) {\n\tvar bmBits;\n\tvar bmBitsSize;\n\tvar bmDepth;\n\tvar bmFill;\n\tvar bmHeight;\n\tvar bmRaster;\n\tvar bmWidth;\n\tvar cmBits;\n\tvar cmSize;\n\tvar ppw;\n\n\tif (cmOop.isNil) {\n\t\tcmSize = 0;\n\t\tcmBits = null;\n\t} else {\n\t\tif (CLASSOF(cmOop) !== interpreterProxy.classBitmap()) {\n\t\t\treturn interpreterProxy.primitiveFail();\n\t\t}\n\t\tcmSize = SIZEOF(cmOop);\n\t\tcmBits = cmOop.wordsAsInt32Array();\n\t}\n\tif (typeof formOop === \"number\") {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!interpreterProxy.isPointers(formOop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (SIZEOF(formOop) < 5) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tbmBits = interpreterProxy.fetchPointerofObject(0, formOop);\n\tif (CLASSOF(bmBits) !== interpreterProxy.classBitmap()) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tbmBitsSize = SIZEOF(bmBits);\n\tbmWidth = interpreterProxy.fetchIntegerofObject(1, formOop);\n\tbmHeight = interpreterProxy.fetchIntegerofObject(2, formOop);\n\tbmDepth = interpreterProxy.fetchIntegerofObject(3, formOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!((bmWidth >= 0) && (bmHeight >= 0))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!((((((bmDepth === 32) || (bmDepth === 8)) || (bmDepth === 16)) || (bmDepth === 1)) || (bmDepth === 2)) || (bmDepth === 4))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!((cmSize === 0) || (cmSize === (SHL(1, bmDepth))))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tppw = DIV(32, bmDepth);\n\tbmRaster = DIV((bmWidth + (ppw - 1)), ppw);\n\tif (bmBitsSize !== (bmRaster * bmHeight)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tbmFill = allocateBitmapFillcolormap(cmSize, cmBits);\n\tif (engineStopped) {\n\t\treturn null;\n\t}\n\tbitmapWidthOfput(bmFill, bmWidth);\n\tbitmapHeightOfput(bmFill, bmHeight);\n\tbitmapDepthOfput(bmFill, bmDepth);\n\tbitmapRasterOfput(bmFill, bmRaster);\n\tbitmapSizeOfput(bmFill, bmBitsSize);\n\tbitmapTileFlagOfput(bmFill, tileFlag);\n\tobjectIndexOfput(bmFill, xIndex);\n\tloadFillOrientationfromalongnormalwidthheight(bmFill, point1, point2, point3, bmWidth, bmHeight);\n\treturn bmFill;\n}\n\n\n/*\tNote: Assumes that the contents of formArray has been checked before */\n\nfunction loadBitsFrom(bmFill) {\n\tvar bitsLen;\n\tvar bitsOop;\n\tvar formOop;\n\tvar xIndex;\n\n\txIndex = objectIndexOf(bmFill);\n\tif (xIndex > SIZEOF(formArray)) {\n\t\treturn null;\n\t}\n\tformOop = interpreterProxy.fetchPointerofObject(xIndex, formArray);\n\tbitsOop = interpreterProxy.fetchPointerofObject(0, formOop);\n\tbitsLen = SIZEOF(bitsOop);\n\tif (bitsLen !== bitmapSizeOf(bmFill)) {\n\t\treturn null;\n\t}\n\treturn bitsOop.wordsAsInt32Array();\n}\n\n\n/*\tLoad a 2x3 transformation matrix from the given oop.\n\tReturn true if the matrix is not nil, false otherwise */\n\nfunction loadColorTransformFrom(transformOop) {\n\tvar okay;\n\tvar transform;\n\n\ttransform = colorTransform();\n\thasColorTransformPut(0);\n\tokay = loadTransformFromintolength(transformOop, transform, 8);\n\tif (!okay) {\n\t\treturn false;\n\t}\n\thasColorTransformPut(1);\n\ttransform[1] = (transform[1] * 256.0);\n\ttransform[3] = (transform[3] * 256.0);\n\ttransform[5] = (transform[5] * 256.0);\n\ttransform[7] = (transform[7] * 256.0);\n\treturn okay;\n}\n\n\n/*\tLoad the compressed segment identified by segment index */\n\nfunction loadCompressedSegmentfromshortleftFillrightFilllineWidthlineColor(segmentIndex, points, pointsShort, leftFill, rightFill, lineWidth, lineFill) {\n\tvar index;\n\tvar segs;\n\tvar x0;\n\tvar x1;\n\tvar x2;\n\tvar y0;\n\tvar y1;\n\tvar y2;\n\n\n\t/* Check if have anything to do at all */\n\n\tif ((leftFill === rightFill) && ((lineWidth === 0) || (lineFill === 0))) {\n\t\treturn null;\n\t}\n\n\t/* 3 points with x/y each */\n\n\tindex = segmentIndex * 6;\n\tif (pointsShort) {\n\n\t\t/* Load short points */\n\n\t\tx0 = (points.int16Array || (points.int16Array = new Int16Array(points.buffer, points.byteOffset)))[index + 0];\n\t\ty0 = (points.int16Array || (points.int16Array = new Int16Array(points.buffer, points.byteOffset)))[index + 1];\n\t\tx1 = (points.int16Array || (points.int16Array = new Int16Array(points.buffer, points.byteOffset)))[index + 2];\n\t\ty1 = (points.int16Array || (points.int16Array = new Int16Array(points.buffer, points.byteOffset)))[index + 3];\n\t\tx2 = (points.int16Array || (points.int16Array = new Int16Array(points.buffer, points.byteOffset)))[index + 4];\n\t\ty2 = (points.int16Array || (points.int16Array = new Int16Array(points.buffer, points.byteOffset)))[index + 5];\n\t} else {\n\t\tx0 = (points[(index + 0)]|0);\n\t\ty0 = (points[(index + 1)]|0);\n\t\tx1 = (points[(index + 2)]|0);\n\t\ty1 = (points[(index + 3)]|0);\n\t\tx2 = (points[(index + 4)]|0);\n\t\ty2 = (points[(index + 5)]|0);\n\t}\n\tif (((x0 === x1) && (y0 === y1)) || ((x1 === x2) && (y1 === y2))) {\n\n\t\t/* We can use a line from x0/y0 to x2/y2 */\n\n\t\tif ((x0 === x2) && (y0 === y2)) {\n\t\t\treturn null;\n\t\t}\n\t\tpoint1Get()[0] = x0;\n\t\tpoint1Get()[1] = y0;\n\t\tpoint2Get()[0] = x2;\n\t\tpoint2Get()[1] = y2;\n\t\ttransformPoints(2);\n\t\treturn loadWideLinefromtolineFillleftFillrightFill(lineWidth, point1Get(), point2Get(), lineFill, leftFill, rightFill);\n\t}\n\tpoint1Get()[0] = x0;\n\tpoint1Get()[1] = y0;\n\tpoint2Get()[0] = x1;\n\tpoint2Get()[1] = y1;\n\tpoint3Get()[0] = x2;\n\tpoint3Get()[1] = y2;\n\ttransformPoints(3);\n\tsegs = loadAndSubdivideBezierFromviatoisWide(point1Get(), point2Get(), point3Get(), (lineWidth !== 0) && (lineFill !== 0));\n\tif (engineStopped) {\n\t\treturn null;\n\t}\n\tloadWideBezierlineFillleftFillrightFilln(lineWidth, lineFill, leftFill, rightFill, segs);\n}\n\n\n/*\tLoad a compressed shape into the engine.\n\t\tWARNING: THIS METHOD NEEDS THE FULL FRAME SIZE!!!!\n\t */\n\nfunction loadCompressedShapesegmentsleftFillsrightFillslineWidthslineFillsfillIndexListpointShort(points, nSegments, leftFills, rightFills, lineWidths, lineFills, fillIndexList, pointsShort) {\n\tvar i;\n\tvar leftLength;\n\tvar leftRun;\n\tvar leftValue;\n\tvar lineFillLength;\n\tvar lineFillRun;\n\tvar lineFillValue;\n\tvar rightLength;\n\tvar rightRun;\n\tvar rightValue;\n\tvar widthLength;\n\tvar widthRun;\n\tvar widthValue;\n\n\tif (nSegments === 0) {\n\t\treturn 0;\n\t}\n\tleftRun = (rightRun = (widthRun = (lineFillRun = -1)));\n\tleftLength = (rightLength = (widthLength = (lineFillLength = 1)));\n\tleftValue = (rightValue = (widthValue = (lineFillValue = 0)));\n\tfor (i = 1; i <= nSegments; i++) {\n\n\t\t/* Decrement current run length and load new stuff */\n\n\t\tif (((--leftLength)) <= 0) {\n\t\t\t++leftRun;\n\t\t\tleftLength = shortRunLengthAtfrom(leftRun, leftFills);\n\t\t\tleftValue = shortRunValueAtfrom(leftRun, leftFills);\n\t\t\tif (leftValue !== 0) {\n\t\t\t\tleftValue = fillIndexList[leftValue - 1];\n\t\t\t\tleftValue = transformColor(leftValue);\n\t\t\t\tif (engineStopped) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (((--rightLength)) <= 0) {\n\t\t\t++rightRun;\n\t\t\trightLength = shortRunLengthAtfrom(rightRun, rightFills);\n\t\t\trightValue = shortRunValueAtfrom(rightRun, rightFills);\n\t\t\tif (rightValue !== 0) {\n\t\t\t\trightValue = fillIndexList[rightValue - 1];\n\t\t\t\trightValue = transformColor(rightValue);\n\t\t\t}\n\t\t}\n\t\tif (((--widthLength)) <= 0) {\n\t\t\t++widthRun;\n\t\t\twidthLength = shortRunLengthAtfrom(widthRun, lineWidths);\n\t\t\twidthValue = shortRunValueAtfrom(widthRun, lineWidths);\n\t\t\tif (widthValue !== 0) {\n\t\t\t\twidthValue = transformWidth(widthValue);\n\t\t\t}\n\t\t}\n\t\tif (((--lineFillLength)) <= 0) {\n\t\t\t++lineFillRun;\n\t\t\tlineFillLength = shortRunLengthAtfrom(lineFillRun, lineFills);\n\t\t\tlineFillValue = shortRunValueAtfrom(lineFillRun, lineFills);\n\t\t\tif (lineFillValue !== 0) {\n\t\t\t\tlineFillValue = fillIndexList[lineFillValue - 1];\n\t\t\t}\n\t\t}\n\t\tloadCompressedSegmentfromshortleftFillrightFilllineWidthlineColor(i - 1, points, pointsShort, leftValue, rightValue, widthValue, lineFillValue);\n\t\tif (engineStopped) {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nfunction loadEdgeStateFrom(edgeOop) {\n\tvar edge;\n\n\tedge = lastExportedEdgeGet();\n\tif (SIZEOF(edgeOop) < ETBalloonEdgeDataSize) {\n\t\treturn null;\n\t}\n\tedgeXValueOfput(edge, interpreterProxy.fetchIntegerofObject(ETXValueIndex, edgeOop));\n\tedgeYValueOfput(edge, interpreterProxy.fetchIntegerofObject(ETYValueIndex, edgeOop));\n\tedgeZValueOfput(edge, interpreterProxy.fetchIntegerofObject(ETZValueIndex, edgeOop));\n\tedgeNumLinesOfput(edge, interpreterProxy.fetchIntegerofObject(ETLinesIndex, edgeOop));\n\treturn edge;\n}\n\n\n/*\tLoad a 2x3 transformation matrix from the given oop.\n\tReturn true if the matrix is not nil, false otherwise */\n\nfunction loadEdgeTransformFrom(transformOop) {\n\tvar okay;\n\tvar transform;\n\n\thasEdgeTransformPut(0);\n\ttransform = edgeTransform();\n\tokay = loadTransformFromintolength(transformOop, transform, 6);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!okay) {\n\t\treturn false;\n\t}\n\thasEdgeTransformPut(1);\n\ttransform[2] = (transform[2] + destOffsetXGet());\n\ttransform[5] = (transform[5] + destOffsetYGet());\n\treturn true;\n}\n\n\n/*\tTransform the points */\n\nfunction loadFillOrientationfromalongnormalwidthheight(fill, point1, point2, point3, fillWidth, fillHeight) {\n\tvar dirX;\n\tvar dirY;\n\tvar dsLength2;\n\tvar dsX;\n\tvar dsY;\n\tvar dtLength2;\n\tvar dtX;\n\tvar dtY;\n\tvar nrmX;\n\tvar nrmY;\n\n\tpoint2[0] = (point2[0] + point1[0]);\n\tpoint2[1] = (point2[1] + point1[1]);\n\tpoint3[0] = (point3[0] + point1[0]);\n\tpoint3[1] = (point3[1] + point1[1]);\n\ttransformPoint(point1);\n\ttransformPoint(point2);\n\ttransformPoint(point3);\n\tdirX = point2[0] - point1[0];\n\tdirY = point2[1] - point1[1];\n\tnrmX = point3[0] - point1[0];\n\n\t/* Compute the scale from direction/normal into ramp size */\n\n\tnrmY = point3[1] - point1[1];\n\tdsLength2 = (dirX * dirX) + (dirY * dirY);\n\tif (dsLength2 > 0) {\n\t\tdsX = ((((dirX * fillWidth) * 65536.0) / dsLength2)|0);\n\t\tdsY = ((((dirY * fillWidth) * 65536.0) / dsLength2)|0);\n\t} else {\n\t\tdsX = 0;\n\t\tdsY = 0;\n\t}\n\tdtLength2 = (nrmX * nrmX) + (nrmY * nrmY);\n\tif (dtLength2 > 0) {\n\t\tdtX = ((((nrmX * fillHeight) * 65536.0) / dtLength2)|0);\n\t\tdtY = ((((nrmY * fillHeight) * 65536.0) / dtLength2)|0);\n\t} else {\n\t\tdtX = 0;\n\t\tdtY = 0;\n\t}\n\tfillOriginXOfput(fill, point1[0]);\n\tfillOriginYOfput(fill, point1[1]);\n\tfillDirectionXOfput(fill, dsX);\n\tfillDirectionYOfput(fill, dsY);\n\tfillNormalXOfput(fill, dtX);\n\tfillNormalYOfput(fill, dtY);\n}\n\n\n/*\tCheck all the forms from arrayOop. */\n\nfunction loadFormsFrom(arrayOop) {\n\tvar bmBits;\n\tvar bmBitsSize;\n\tvar bmDepth;\n\tvar bmHeight;\n\tvar bmRaster;\n\tvar bmWidth;\n\tvar formOop;\n\tvar i;\n\tvar ppw;\n\n\tif (!interpreterProxy.isArray(arrayOop)) {\n\t\treturn false;\n\t}\n\tformArray = arrayOop;\n\tfor (i = 0; i <= (SIZEOF(formArray) - 1); i++) {\n\t\tformOop = interpreterProxy.fetchPointerofObject(i, formArray);\n\t\tif (typeof formOop === \"number\") {\n\t\t\treturn false;\n\t\t}\n\t\tif (!interpreterProxy.isPointers(formOop)) {\n\t\t\treturn false;\n\t\t}\n\t\tif (SIZEOF(formOop) < 5) {\n\t\t\treturn false;\n\t\t}\n\t\tbmBits = interpreterProxy.fetchPointerofObject(0, formOop);\n\t\tif (CLASSOF(bmBits) !== interpreterProxy.classBitmap()) {\n\t\t\treturn false;\n\t\t}\n\t\tbmBitsSize = SIZEOF(bmBits);\n\t\tbmWidth = interpreterProxy.fetchIntegerofObject(1, formOop);\n\t\tbmHeight = interpreterProxy.fetchIntegerofObject(2, formOop);\n\t\tbmDepth = interpreterProxy.fetchIntegerofObject(3, formOop);\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!((bmWidth >= 0) && (bmHeight >= 0))) {\n\t\t\treturn false;\n\t\t}\n\t\tppw = DIV(32, bmDepth);\n\t\tbmRaster = DIV((bmWidth + (ppw - 1)), ppw);\n\t\tif (bmBitsSize !== (bmRaster * bmHeight)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\n\n/*\tLoad the gradient fill as defined by the color ramp. */\n\nfunction loadGradientFillfromalongnormalisRadial(rampOop, point1, point2, point3, isRadial) {\n\tvar fill;\n\tvar rampWidth;\n\n\tif (CLASSOF(rampOop) !== interpreterProxy.classBitmap()) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\trampWidth = SIZEOF(rampOop);\n\tfill = allocateGradientFillrampWidthisRadial(rampOop.wordsAsInt32Array(), rampWidth, isRadial);\n\tif (engineStopped) {\n\t\treturn null;\n\t}\n\tloadFillOrientationfromalongnormalwidthheight(fill, point1, point2, point3, rampWidth, rampWidth);\n\treturn fill;\n}\n\n\n/*\tLoad the line defined by point1 and point2. */\n\nfunction loadLinefromtooffsetleftFillrightFill(line, point1, point2, yOffset, leftFill, rightFill) {\n\tvar p1;\n\tvar p2;\n\tvar yDir;\n\n\tif (point1[1] <= point2[1]) {\n\t\tp1 = point1;\n\t\tp2 = point2;\n\t\tyDir = 1;\n\t} else {\n\t\tp1 = point2;\n\t\tp2 = point1;\n\t\tyDir = -1;\n\t}\n\tedgeXValueOfput(line, p1[0]);\n\tedgeYValueOfput(line, p1[1] - yOffset);\n\tedgeZValueOfput(line, currentZGet());\n\tedgeLeftFillOfput(line, leftFill);\n\tedgeRightFillOfput(line, rightFill);\n\tlineEndXOfput(line, p2[0]);\n\tlineEndYOfput(line, p2[1] - yOffset);\n\tlineYDirectionOfput(line, yDir);\n}\n\n\n/*\tLoad a rectangular oval currently defined by point1/point2 */\n\nfunction loadOvallineFillleftFillrightFill(lineWidth, lineFill, leftFill, rightFill) {\n\tvar cx;\n\tvar cy;\n\tvar h;\n\tvar i;\n\tvar nSegments;\n\tvar w;\n\n\tw = (point2Get()[0] - point1Get()[0]) >> 1;\n\th = (point2Get()[1] - point1Get()[1]) >> 1;\n\tcx = (point2Get()[0] + point1Get()[0]) >> 1;\n\tcy = (point2Get()[1] + point1Get()[1]) >> 1;\n\tfor (i = 0; i <= 15; i++) {\n\t\tloadOvalSegmentwhcxcy(i, w, h, cx, cy);\n\t\ttransformPoints(3);\n\t\tnSegments = loadAndSubdivideBezierFromviatoisWide(point1Get(), point2Get(), point3Get(), (lineWidth !== 0) && (lineFill !== 0));\n\t\tif (engineStopped) {\n\t\t\treturn null;\n\t\t}\n\t\tloadWideBezierlineFillleftFillrightFilln(lineWidth, lineFill, leftFill, rightFill, nSegments);\n\t\tif (engineStopped) {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nfunction loadOvalSegmentwhcxcy(seg, w, h, cx, cy) {\n\tvar x0;\n\tvar x1;\n\tvar x2;\n\tvar y0;\n\tvar y1;\n\tvar y2;\n\n\n\t/* Load start point of segment */\n\n\tx0 = (((circleCosTable()[(seg * 2) + 0] * w) + cx)|0);\n\ty0 = (((circleSinTable()[(seg * 2) + 0] * h) + cy)|0);\n\tpoint1Get()[0] = x0;\n\tpoint1Get()[1] = y0;\n\tx2 = (((circleCosTable()[(seg * 2) + 2] * w) + cx)|0);\n\ty2 = (((circleSinTable()[(seg * 2) + 2] * h) + cy)|0);\n\tpoint3Get()[0] = x2;\n\tpoint3Get()[1] = y2;\n\tx1 = (((circleCosTable()[(seg * 2) + 1] * w) + cx)|0);\n\n\t/* NOTE: The intermediate point is the point ON the curve\n\tand not yet the control point (which is OFF the curve) */\n\n\ty1 = (((circleSinTable()[(seg * 2) + 1] * h) + cy)|0);\n\tx1 = (x1 * 2) - ((x0 + x2) >> 1);\n\ty1 = (y1 * 2) - ((y0 + y2) >> 1);\n\tpoint2Get()[0] = x1;\n\tpoint2Get()[1] = y1;\n}\n\n\n/*\tLoad the contents of pointOop into pointArray */\n\nfunction loadPointfrom(pointArray, pointOop) {\n\tvar value;\n\n\tif (CLASSOF(pointOop) !== interpreterProxy.classPoint()) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tvalue = interpreterProxy.fetchPointerofObject(0, pointOop);\n\tif (!(typeof value === \"number\" || (value.isFloat))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (typeof value === \"number\") {\n\t\tpointArray[0] = value;\n\t} else {\n\t\tpointArray[0] = (interpreterProxy.floatValueOf(value)|0);\n\t}\n\tvalue = interpreterProxy.fetchPointerofObject(1, pointOop);\n\tif (!(typeof value === \"number\" || (value.isFloat))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (typeof value === \"number\") {\n\t\tpointArray[1] = value;\n\t} else {\n\t\tpointArray[1] = (interpreterProxy.floatValueOf(value)|0);\n\t}\n}\n\nfunction loadPolygonnPointsfilllineWidthlineFillpointsShort(points, nPoints, fillIndex, lineWidth, lineFill, isShort) {\n\tvar i;\n\tvar x0;\n\tvar x1;\n\tvar y0;\n\tvar y1;\n\n\tif (isShort) {\n\t\tx0 = (points.int16Array || (points.int16Array = new Int16Array(points.buffer, points.byteOffset)))[0];\n\t\ty0 = (points.int16Array || (points.int16Array = new Int16Array(points.buffer, points.byteOffset)))[1];\n\t} else {\n\t\tx0 = (points[0]|0);\n\t\ty0 = (points[1]|0);\n\t}\n\tfor (i = 1; i <= (nPoints - 1); i++) {\n\t\tif (isShort) {\n\t\t\tx1 = (points.int16Array || (points.int16Array = new Int16Array(points.buffer, points.byteOffset)))[i * 2];\n\t\t\ty1 = (points.int16Array || (points.int16Array = new Int16Array(points.buffer, points.byteOffset)))[(i * 2) + 1];\n\t\t} else {\n\t\t\tx1 = (points[(i * 2)]|0);\n\t\t\ty1 = (points[((i * 2) + 1)]|0);\n\t\t}\n\t\tpoint1Get()[0] = x0;\n\t\tpoint1Get()[1] = y0;\n\t\tpoint2Get()[0] = x1;\n\t\tpoint2Get()[1] = y1;\n\t\ttransformPoints(2);\n\t\tloadWideLinefromtolineFillleftFillrightFill(lineWidth, point1Get(), point2Get(), lineFill, fillIndex, 0);\n\t\tif (engineStopped) {\n\t\t\treturn null;\n\t\t}\n\t\tx0 = x1;\n\t\ty0 = y1;\n\t}\n}\n\n\n/*\tLoad a rectangle currently defined by point1-point4 */\n\nfunction loadRectanglelineFillleftFillrightFill(lineWidth, lineFill, leftFill, rightFill) {\n\tloadWideLinefromtolineFillleftFillrightFill(lineWidth, point1Get(), point2Get(), lineFill, leftFill, rightFill);\n\tloadWideLinefromtolineFillleftFillrightFill(lineWidth, point2Get(), point3Get(), lineFill, leftFill, rightFill);\n\tloadWideLinefromtolineFillleftFillrightFill(lineWidth, point3Get(), point4Get(), lineFill, leftFill, rightFill);\n\tloadWideLinefromtolineFillleftFillrightFill(lineWidth, point4Get(), point1Get(), lineFill, leftFill, rightFill);\n}\n\n\n/*\tLoad the entire state from the interpreter for the rendering primitives.\n\t Answer 0 on success or a non-zero failure code on failure. */\n\nfunction loadRenderingState() {\n\tvar edgeOop;\n\tvar failCode;\n\tvar fillOop;\n\tvar state;\n\n\tif (interpreterProxy.methodArgumentCount() !== 2) {\n\t\treturn PrimErrBadNumArgs;\n\t}\n\tif (((failCode = quickLoadEngineFrom(interpreterProxy.stackValue(2)))) !== 0) {\n\t\treturn failCode;\n\t}\n\tfillOop = interpreterProxy.stackObjectValue(0);\n\tedgeOop = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn PrimErrBadArgument;\n\t}\n\tif (((failCode = loadSpanBufferFrom(interpreterProxy.fetchPointerofObject(BESpanIndex, engine)))) !== 0) {\n\t\treturn failCode;\n\t}\n\tif (!loadBitBltFrom(interpreterProxy.fetchPointerofObject(BEBitBltIndex, engine))) {\n\t\treturn GEFBitBltLoadFailed;\n\t}\n\tif (!loadFormsFrom(interpreterProxy.fetchPointerofObject(BEFormsIndex, engine))) {\n\t\treturn GEFFormLoadFailed;\n\t}\n\tif (SIZEOF(edgeOop) < ETBalloonEdgeDataSize) {\n\t\treturn GEFEdgeDataTooSmall;\n\t}\n\tif (SIZEOF(fillOop) < FTBalloonFillDataSize) {\n\t\treturn GEFFillDataTooSmall;\n\t}\n\tstate = stateGet();\n\tif ((state === GEStateWaitingForEdge) || ((state === GEStateWaitingForFill) || (state === GEStateWaitingChange))) {\n\t\treturn GEFWrongState;\n\t}\n\treturn 0;\n}\n\nfunction loadShapenSegmentsfilllineWidthlineFillpointsShort(points, nSegments, fillIndex, lineWidth, lineFill, pointsShort) {\n\tvar i;\n\n\tfor (i = 1; i <= nSegments; i++) {\n\t\tloadCompressedSegmentfromshortleftFillrightFilllineWidthlineColor(i - 1, points, pointsShort, fillIndex, 0, lineWidth, lineFill);\n\t\tif (engineStopped) {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\n\n/*\tLoad the span buffer from the given oop.\n\t Answer 0 on success or a non-zero failure code on failure. */\n\nfunction loadSpanBufferFrom(spanOop) {\n\tif (CLASSOF(spanOop) !== interpreterProxy.classBitmap()) {\n\t\treturn GEFClassMismatch;\n\t}\n\n\t/* Leave last entry unused to avoid complications */\n\n\tspanBuffer = spanOop.words;\n\tspanSizePut(SIZEOF(spanOop) - 1);\n\treturn 0;\n}\n\n\n/*\tLoad a transformation from transformOop into the float array\n\tdefined by destPtr. The transformation is assumed to be either\n\tan array or a FloatArray of length n. */\n\nfunction loadTransformFromintolength(transformOop, destPtr, n) {\n\tif (transformOop.isNil) {\n\t\treturn false;\n\t}\n\tif (typeof transformOop === \"number\") {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (SIZEOF(transformOop) !== n) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (interpreterProxy.isWords(transformOop)) {\n\t\tloadWordTransformFromintolength(transformOop, destPtr, n);\n\t} else {\n\t\tloadArrayTransformFromintolength(transformOop, destPtr, n);\n\t}\n\treturn true;\n}\n\n\n/*\tLoad the (possibly wide) bezier from the segments currently on the bezier stack. */\n\nfunction loadWideBezierlineFillleftFillrightFilln(lineWidth, lineFill, leftFill, rightFill, nSegments) {\n\tvar bezier;\n\tvar index;\n\tvar offset;\n\tvar wide;\n\n\tif ((lineWidth === 0) || (lineFill === 0)) {\n\t\twide = false;\n\t\toffset = 0;\n\t} else {\n\t\twide = true;\n\t\toffset = offsetFromWidth(lineWidth);\n\t}\n\tindex = nSegments * 6;\n\twhile (index > 0) {\n\t\tif (wide) {\n\t\t\tbezier = allocateWideBezier();\n\t\t} else {\n\t\t\tbezier = allocateBezier();\n\t\t}\n\t\tif (engineStopped) {\n\t\t\treturn 0;\n\t\t}\n\t\tloadBeziersegmentleftFillrightFilloffset(bezier, index, leftFill, rightFill, offset);\n\t\tif (wide) {\n\t\t\twideBezierFillOfput(bezier, lineFill);\n\t\t\twideBezierWidthOfput(bezier, lineWidth);\n\t\t\twideBezierExtentOfput(bezier, lineWidth);\n\t\t}\n\t\tindex -= 6;\n\t}\n\twbStackClear();\n}\n\n\n/*\tLoad a (possibly wide) line defined by the points p1 and p2 */\n\nfunction loadWideLinefromtolineFillleftFillrightFill(lineWidth, p1, p2, lineFill, leftFill, rightFill) {\n\tvar line;\n\tvar offset;\n\n\tif ((lineWidth === 0) || (lineFill === 0)) {\n\t\tline = allocateLine();\n\t\toffset = 0;\n\t} else {\n\t\tline = allocateWideLine();\n\t\toffset = offsetFromWidth(lineWidth);\n\t}\n\tif (engineStopped) {\n\t\treturn 0;\n\t}\n\tloadLinefromtooffsetleftFillrightFill(line, p1, p2, offset, leftFill, rightFill);\n\tif (isWide(line)) {\n\t\twideLineFillOfput(line, lineFill);\n\t\twideLineWidthOfput(line, lineWidth);\n\t\twideLineExtentOfput(line, lineWidth);\n\t}\n}\n\n\n/*\tLoad a float array transformation from the given oop */\n\nfunction loadWordTransformFromintolength(transformOop, destPtr, n) {\n\tvar i;\n\tvar srcPtr;\n\n\tsrcPtr = transformOop.wordsAsFloat32Array();\n\tfor (i = 0; i <= (n - 1); i++) {\n\t\tdestPtr[i] = srcPtr[i];\n\t}\n}\n\n\n/*\tLoad the working buffer from the given oop */\n\nfunction loadWorkBufferFrom(wbOop) {\n\tif (typeof wbOop === \"number\") {\n\t\treturn GEFWorkBufferIsInteger;\n\t}\n\tif (!interpreterProxy.isWords(wbOop)) {\n\t\treturn GEFWorkBufferIsPointers;\n\t}\n\tif (SIZEOF(wbOop) < GWMinimalSize) {\n\t\treturn GEFWorkBufferTooSmall;\n\t}\n\tworkBufferPut(wbOop);\n\tif (magicNumberGet() !== GWMagicNumber) {\n\t\treturn GEFWorkBufferBadMagic;\n\t}\n\tif (wbSizeGet() !== SIZEOF(wbOop)) {\n\t\treturn GEFWorkBufferWrongSize;\n\t}\n\tif (objStartGet() !== GWHeaderSize) {\n\t\treturn GEFWorkBufferStartWrong;\n\t}\n\tobjBuffer = PTR_ADD(workBuffer, objStartGet());\n\tgetBuffer = PTR_ADD(objBuffer, objUsedGet());\n\n\t/* Make sure we don't exceed the work buffer */\n\n\taetBuffer = PTR_ADD(getBuffer, getUsedGet());\n\tif ((((GWHeaderSize + objUsedGet()) + getUsedGet()) + aetUsedGet()) > wbSizeGet()) {\n\t\treturn GEFWorkTooBig;\n\t}\n\treturn 0;\n}\n\nfunction magicNumberGet() {\n\treturn workBuffer[GWMagicIndex];\n}\n\nfunction magicNumberPut(value) {\n\treturn workBuffer[GWMagicIndex] = value;\n}\n\n\n/*\tThe module with the given name was just unloaded.\n\tMake sure we have no dangling references. */\n\nfunction moduleUnloaded(aModuleName) {\n\tif (strcmp(aModuleName, bbPluginName) === 0) {\n\n\t\t/* BitBlt just shut down. How nasty. */\n\n\t\tloadBBFn = 0;\n\t\tcopyBitsFn = 0;\n\t}\n}\n\n\n/*\tThe entry at index is not in the right position of the AET. \n\tMove it to the left until the position is okay. */\n\nfunction moveAETEntryFromedgex(index, edge, xValue) {\n\tvar newIndex;\n\n\tnewIndex = index;\n\twhile ((newIndex > 0) && (edgeXValueOf(aetBuffer[newIndex - 1]) > xValue)) {\n\t\taetBuffer[newIndex] = aetBuffer[newIndex - 1];\n\t\t--newIndex;\n\t}\n\taetBuffer[newIndex] = edge;\n}\n\n\n/*\tCheck if we have n slots available */\n\nfunction needAvailableSpace(nSlots) {\n\tif (((((GWHeaderSize + objUsed) + getUsedGet()) + aetUsedGet()) + nSlots) > wbTopGet()) {\n\t\tstopBecauseOf(GErrorNoMoreSpace);\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction needsFlush() {\n\treturn needsFlushGet() !== 0;\n}\n\nfunction needsFlushGet() {\n\treturn workBuffer[GWNeedsFlush];\n}\n\nfunction needsFlushPut(value) {\n\treturn workBuffer[GWNeedsFlush] = value;\n}\n\nfunction objat(object, index) {\n\treturn objBuffer[object + index];\n}\n\nfunction objatput(object, index, value) {\n\treturn objBuffer[object + index] = value;\n}\n\nfunction objStartGet() {\n\treturn workBuffer[GWObjStart];\n}\n\nfunction objStartPut(value) {\n\treturn workBuffer[GWObjStart] = value;\n}\n\nfunction objUsedGet() {\n\treturn workBuffer[GWObjUsed];\n}\n\nfunction objUsedPut(value) {\n\treturn workBuffer[GWObjUsed] = value;\n}\n\nfunction objectHeaderOf(obj) {\n\treturn objat(obj, GEObjectType);\n}\n\nfunction objectIndexOf(obj) {\n\treturn objat(obj, GEObjectIndex);\n}\n\nfunction objectIndexOfput(obj, value) {\n\treturn objatput(obj, GEObjectIndex, value);\n}\n\nfunction objectLengthOf(obj) {\n\treturn objat(obj, GEObjectLength);\n}\n\nfunction objectLengthOfput(obj, value) {\n\treturn objatput(obj, GEObjectLength, value);\n}\n\nfunction objectTypeOf(obj) {\n\treturn objat(obj, GEObjectType) & GEPrimitiveTypeMask;\n}\n\nfunction objectTypeOfput(obj, value) {\n\treturn objatput(obj, GEObjectType, value);\n}\n\n\n/*\tCommon function so that we don't compute that wrong in any place\n\tand can easily find all the places where we deal with one-pixel offsets. */\n\nfunction offsetFromWidth(lineWidth) {\n\treturn lineWidth >> 1;\n}\n\nfunction point1Get() {\n\treturn PTR_ADD(workBuffer, GWPoint1);\n}\n\nfunction point2Get() {\n\treturn PTR_ADD(workBuffer, GWPoint2);\n}\n\nfunction point3Get() {\n\treturn PTR_ADD(workBuffer, GWPoint3);\n}\n\nfunction point4Get() {\n\treturn PTR_ADD(workBuffer, GWPoint4);\n}\n\n\n/*\tWe have just blitted a scan line to the screen.\n\tDo whatever seems to be a good idea here. */\n/*\tNote: In the future we may check the time needed for this scan line and interrupt processing to give the Smalltalk code a chance to run at a certain time. */\n/*\tCheck if there is any more work to do. */\n\nfunction postDisplayAction() {\n\tif ((getStartGet() >= getUsedGet()) && (aetUsedGet() === 0)) {\n\n\t\t/* No more entries to process */\n\n\t\tstatePut(GEStateCompleted);\n\t}\n\tif (currentYGet() >= fillMaxYGet()) {\n\n\t\t/* Out of clipping range */\n\n\t\tstatePut(GEStateCompleted);\n\t}\n}\n\nfunction primitiveAbortProcessing() {\n\tvar failureCode;\n\n\tif (interpreterProxy.methodArgumentCount() !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFrom(interpreterProxy.stackValue(0)))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tstatePut(GEStateCompleted);\n\tstoreEngineStateInto(engine);\n}\n\n\n/*\tNote: No need to load either bitBlt or spanBuffer */\n\nfunction primitiveAddActiveEdgeEntry() {\n\tvar edge;\n\tvar edgeOop;\n\tvar failureCode;\n\n\tif (doProfileStats) {\n\t\tgeProfileTime = interpreterProxy.ioMicroMSecs();\n\t}\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(1), GEStateWaitingForEdge))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tedgeOop = interpreterProxy.stackObjectValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tedge = loadEdgeStateFrom(edgeOop);\n\tif (!edge) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEdgeDataTooSmall);\n\t}\n\tif (!needAvailableSpace(1)) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWorkTooBig);\n\t}\n\tif (edgeNumLinesOf(edge) > 0) {\n\t\tinsertEdgeIntoAET(edge);\n\t}\n\tif (engineStopped) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineStopped);\n\t}\n\tstatePut(GEStateAddingFromGET);\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(1);\n\tif (doProfileStats) {\n\t\tincrementStatby(GWCountAddAETEntry, 1);\n\t\tincrementStatby(GWTimeAddAETEntry, interpreterProxy.ioMicroMSecs() - geProfileTime);\n\t}\n}\n\nfunction primitiveAddBezier() {\n\tvar endOop;\n\tvar failureCode;\n\tvar leftFill;\n\tvar nSegments;\n\tvar rightFill;\n\tvar startOop;\n\tvar viaOop;\n\n\n\t/* Fail if we have the wrong number of arguments */\n\n\tif (interpreterProxy.methodArgumentCount() !== 5) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\trightFill = interpreterProxy.positive32BitValueOf(interpreterProxy.stackValue(0));\n\tleftFill = interpreterProxy.positive32BitValueOf(interpreterProxy.stackValue(1));\n\tviaOop = interpreterProxy.stackObjectValue(2);\n\tendOop = interpreterProxy.stackObjectValue(3);\n\tstartOop = interpreterProxy.stackObjectValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(5), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tif (!(isFillOkay(leftFill) && (isFillOkay(rightFill)))) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWrongFill);\n\t}\n\tif ((leftFill === rightFill) && false) {\n\t\treturn interpreterProxy.pop(6);\n\t}\n\tloadPointfrom(point1Get(), startOop);\n\tloadPointfrom(point2Get(), viaOop);\n\tloadPointfrom(point3Get(), endOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\ttransformPoints(3);\n\tnSegments = loadAndSubdivideBezierFromviatoisWide(point1Get(), point2Get(), point3Get(), false);\n\tneedAvailableSpace(nSegments * GBBaseSize);\n\tif (!engineStopped) {\n\t\tleftFill = transformColor(leftFill);\n\t\trightFill = transformColor(rightFill);\n\t}\n\tif (!engineStopped) {\n\t\tloadWideBezierlineFillleftFillrightFilln(0, 0, leftFill, rightFill, nSegments);\n\t}\n\tif (engineStopped) {\n\n\t\t/* Make sure the stack is okay */\n\n\t\twbStackClear();\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineStopped);\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEntityLoadFailed);\n\t}\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(5);\n}\n\nfunction primitiveAddBezierShape() {\n\tvar failureCode;\n\tvar fillIndex;\n\tvar length;\n\tvar lineFill;\n\tvar lineWidth;\n\tvar nSegments;\n\tvar points;\n\tvar pointsIsArray;\n\tvar segSize;\n\n\n\t/* Fail if we have the wrong number of arguments */\n\n\tif (interpreterProxy.methodArgumentCount() !== 5) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tlineFill = interpreterProxy.positive32BitValueOf(interpreterProxy.stackValue(0));\n\tlineWidth = interpreterProxy.stackIntegerValue(1);\n\tfillIndex = interpreterProxy.positive32BitValueOf(interpreterProxy.stackValue(2));\n\tnSegments = interpreterProxy.stackIntegerValue(3);\n\tpoints = interpreterProxy.stackObjectValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(5), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tlength = SIZEOF(points);\n\tif (interpreterProxy.isWords(points)) {\n\n\t\t/* Either PointArray or ShortPointArray */\n\n\t\tpointsIsArray = false;\n\t\tif (!((length === (nSegments * 3)) || (length === (nSegments * 6)))) {\n\t\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t\t}\n\t} else {\n\n\t\t/* Must be Array of points */\n\n\t\tif (!interpreterProxy.isArray(points)) {\n\t\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t\t}\n\t\tif (length !== (nSegments * 3)) {\n\t\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t\t}\n\t\tpointsIsArray = true;\n\t}\n\tif ((lineWidth === 0) || (lineFill === 0)) {\n\t\tsegSize = GLBaseSize;\n\t} else {\n\t\tsegSize = GLWideSize;\n\t}\n\tif (!needAvailableSpace(segSize * nSegments)) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWorkTooBig);\n\t}\n\tif (!(isFillOkay(lineFill) && (isFillOkay(fillIndex)))) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWrongFill);\n\t}\n\tlineFill = transformColor(lineFill);\n\tfillIndex = transformColor(fillIndex);\n\tif (engineStopped) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineStopped);\n\t}\n\tif (((lineFill === 0) || (lineWidth === 0)) && (fillIndex === 0)) {\n\t\treturn interpreterProxy.pop(5);\n\t}\n\tif (lineWidth !== 0) {\n\t\tlineWidth = transformWidth(lineWidth);\n\t\tif (lineWidth < 1) {\n\t\t\tlineWidth = 1;\n\t\t}\n\t}\n\tif (pointsIsArray) {\n\t\tloadArrayShapenSegmentsfilllineWidthlineFill(points, nSegments, fillIndex, lineWidth, lineFill);\n\t} else {\n\t\tloadShapenSegmentsfilllineWidthlineFillpointsShort(points.wordsAsInt32Array(), nSegments, fillIndex, lineWidth, lineFill, (nSegments * 3) === length);\n\t}\n\tif (engineStopped) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineStopped);\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEntityLoadFailed);\n\t}\n\tneedsFlushPut(1);\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(5);\n}\n\nfunction primitiveAddBitmapFill() {\n\tvar cmOop;\n\tvar dirOop;\n\tvar failureCode;\n\tvar fill;\n\tvar formOop;\n\tvar nrmOop;\n\tvar originOop;\n\tvar tileFlag;\n\tvar xIndex;\n\n\n\t/* Fail if we have the wrong number of arguments */\n\n\tif (interpreterProxy.methodArgumentCount() !== 7) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\txIndex = interpreterProxy.stackIntegerValue(0);\n\tif (xIndex <= 0) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tnrmOop = interpreterProxy.stackObjectValue(1);\n\tdirOop = interpreterProxy.stackObjectValue(2);\n\toriginOop = interpreterProxy.stackObjectValue(3);\n\ttileFlag = interpreterProxy.booleanValueOf(interpreterProxy.stackValue(4));\n\tcmOop = interpreterProxy.stackObjectValue(5);\n\tformOop = interpreterProxy.stackObjectValue(6);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(7), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tloadPointfrom(point1Get(), originOop);\n\tloadPointfrom(point2Get(), dirOop);\n\tloadPointfrom(point3Get(), nrmOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFBadPoint);\n\t}\n\tfill = loadBitmapFillcolormaptilefromalongnormalxIndex(formOop, cmOop, (tileFlag\n\t\t? 1\n\t\t: 0), point1Get(), point2Get(), point3Get(), xIndex - 1);\n\tif (engineStopped) {\n\n\t\t/* Make sure the stack is okay */\n\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineStopped);\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEntityLoadFailed);\n\t}\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.popthenPush(8, interpreterProxy.positive32BitIntegerFor(fill));\n}\n\nfunction primitiveAddCompressedShape() {\n\tvar failureCode;\n\tvar fillIndexList;\n\tvar leftFills;\n\tvar lineFills;\n\tvar lineWidths;\n\tvar nSegments;\n\tvar points;\n\tvar pointsShort;\n\tvar rightFills;\n\n\n\t/* Fail if we have the wrong number of arguments */\n\n\tif (interpreterProxy.methodArgumentCount() !== 7) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tfillIndexList = interpreterProxy.stackObjectValue(0);\n\tlineFills = interpreterProxy.stackObjectValue(1);\n\tlineWidths = interpreterProxy.stackObjectValue(2);\n\trightFills = interpreterProxy.stackObjectValue(3);\n\tleftFills = interpreterProxy.stackObjectValue(4);\n\tnSegments = interpreterProxy.stackIntegerValue(5);\n\tpoints = interpreterProxy.stackObjectValue(6);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(7), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tif (!checkCompressedShapesegmentsleftFillsrightFillslineWidthslineFillsfillIndexList(points, nSegments, leftFills, rightFills, lineWidths, lineFills, fillIndexList)) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEntityCheckFailed);\n\t}\n\tif (!needAvailableSpace(Math.max(GBBaseSize, GLBaseSize) * nSegments)) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWorkTooBig);\n\t}\n\n\t/* Then actually load the compressed shape */\n\n\tpointsShort = SIZEOF(points) === (nSegments * 3);\n\tloadCompressedShapesegmentsleftFillsrightFillslineWidthslineFillsfillIndexListpointShort(points.wordsAsInt32Array(), nSegments, leftFills.wordsAsInt32Array(), rightFills.wordsAsInt32Array(), lineWidths.wordsAsInt32Array(), lineFills.wordsAsInt32Array(), fillIndexList.wordsAsInt32Array(), pointsShort);\n\tif (engineStopped) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineStopped);\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEntityLoadFailed);\n\t}\n\tneedsFlushPut(1);\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(7);\n}\n\nfunction primitiveAddGradientFill() {\n\tvar dirOop;\n\tvar failureCode;\n\tvar fill;\n\tvar isRadial;\n\tvar nrmOop;\n\tvar originOop;\n\tvar rampOop;\n\n\n\t/* Fail if we have the wrong number of arguments */\n\n\tif (interpreterProxy.methodArgumentCount() !== 5) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tisRadial = interpreterProxy.booleanValueOf(interpreterProxy.stackValue(0));\n\tnrmOop = interpreterProxy.stackValue(1);\n\tdirOop = interpreterProxy.stackValue(2);\n\toriginOop = interpreterProxy.stackValue(3);\n\trampOop = interpreterProxy.stackValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(5), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tloadPointfrom(point1Get(), originOop);\n\tloadPointfrom(point2Get(), dirOop);\n\tloadPointfrom(point3Get(), nrmOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFBadPoint);\n\t}\n\tfill = loadGradientFillfromalongnormalisRadial(rampOop, point1Get(), point2Get(), point3Get(), isRadial);\n\tif (engineStopped) {\n\n\t\t/* Make sure the stack is okay */\n\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineStopped);\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEntityLoadFailed);\n\t}\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.popthenPush(6, interpreterProxy.positive32BitIntegerFor(fill));\n}\n\nfunction primitiveAddLine() {\n\tvar endOop;\n\tvar failureCode;\n\tvar leftFill;\n\tvar rightFill;\n\tvar startOop;\n\n\n\t/* Fail if we have the wrong number of arguments */\n\n\tif (interpreterProxy.methodArgumentCount() !== 4) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\trightFill = interpreterProxy.positive32BitValueOf(interpreterProxy.stackValue(0));\n\tleftFill = interpreterProxy.positive32BitValueOf(interpreterProxy.stackValue(1));\n\tendOop = interpreterProxy.stackObjectValue(2);\n\tstartOop = interpreterProxy.stackObjectValue(3);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(4), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tif (!(isFillOkay(leftFill) && (isFillOkay(rightFill)))) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWrongFill);\n\t}\n\tloadPointfrom(point1Get(), startOop);\n\tloadPointfrom(point2Get(), endOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFBadPoint);\n\t}\n\ttransformPoints(2);\n\tleftFill = transformColor(leftFill);\n\trightFill = transformColor(rightFill);\n\tif (engineStopped) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineStopped);\n\t}\n\tloadWideLinefromtolineFillleftFillrightFill(0, point1Get(), point2Get(), 0, leftFill, rightFill);\n\tif (engineStopped) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineStopped);\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEntityLoadFailed);\n\t}\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(4);\n}\n\nfunction primitiveAddOval() {\n\tvar borderIndex;\n\tvar borderWidth;\n\tvar endOop;\n\tvar failureCode;\n\tvar fillIndex;\n\tvar startOop;\n\n\n\t/* Fail if we have the wrong number of arguments */\n\n\tif (interpreterProxy.methodArgumentCount() !== 5) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tborderIndex = interpreterProxy.positive32BitValueOf(interpreterProxy.stackValue(0));\n\tborderWidth = interpreterProxy.stackIntegerValue(1);\n\tfillIndex = interpreterProxy.positive32BitValueOf(interpreterProxy.stackValue(2));\n\tendOop = interpreterProxy.stackObjectValue(3);\n\tstartOop = interpreterProxy.stackObjectValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(5), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tif (!(isFillOkay(borderIndex) && (isFillOkay(fillIndex)))) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWrongFill);\n\t}\n\tfillIndex = transformColor(fillIndex);\n\tborderIndex = transformColor(borderIndex);\n\tif (engineStopped) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineStopped);\n\t}\n\tif ((fillIndex === 0) && ((borderIndex === 0) || (borderWidth <= 0))) {\n\t\treturn interpreterProxy.pop(5);\n\t}\n\tif (!needAvailableSpace(16 * GBBaseSize)) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWorkTooBig);\n\t}\n\tif ((borderWidth > 0) && (borderIndex !== 0)) {\n\t\tborderWidth = transformWidth(borderWidth);\n\t} else {\n\t\tborderWidth = 0;\n\t}\n\tloadPointfrom(point1Get(), startOop);\n\tloadPointfrom(point2Get(), endOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFBadPoint);\n\t}\n\tloadOvallineFillleftFillrightFill(borderWidth, borderIndex, 0, fillIndex);\n\tif (engineStopped) {\n\t\twbStackClear();\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineStopped);\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEntityLoadFailed);\n\t}\n\tneedsFlushPut(1);\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(5);\n}\n\nfunction primitiveAddPolygon() {\n\tvar failureCode;\n\tvar fillIndex;\n\tvar length;\n\tvar lineFill;\n\tvar lineWidth;\n\tvar nPoints;\n\tvar points;\n\tvar pointsIsArray;\n\tvar segSize;\n\n\n\t/* Fail if we have the wrong number of arguments */\n\n\tif (interpreterProxy.methodArgumentCount() !== 5) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tlineFill = interpreterProxy.positive32BitValueOf(interpreterProxy.stackValue(0));\n\tlineWidth = interpreterProxy.stackIntegerValue(1);\n\tfillIndex = interpreterProxy.positive32BitValueOf(interpreterProxy.stackValue(2));\n\tnPoints = interpreterProxy.stackIntegerValue(3);\n\tpoints = interpreterProxy.stackObjectValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(5), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tlength = SIZEOF(points);\n\tif (interpreterProxy.isWords(points)) {\n\n\t\t/* Either PointArray or ShortPointArray */\n\n\t\tpointsIsArray = false;\n\t\tif (!((length === nPoints) || ((nPoints * 2) === length))) {\n\t\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t\t}\n\t} else {\n\n\t\t/* Must be Array of points */\n\n\t\tif (!interpreterProxy.isArray(points)) {\n\t\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t\t}\n\t\tif (length !== nPoints) {\n\t\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t\t}\n\t\tpointsIsArray = true;\n\t}\n\tif ((lineWidth === 0) || (lineFill === 0)) {\n\t\tsegSize = GLBaseSize;\n\t} else {\n\t\tsegSize = GLWideSize;\n\t}\n\tif (!needAvailableSpace(segSize * nPoints)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!(isFillOkay(lineFill) && (isFillOkay(fillIndex)))) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWrongFill);\n\t}\n\tlineFill = transformColor(lineFill);\n\tfillIndex = transformColor(fillIndex);\n\tif (engineStopped) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineStopped);\n\t}\n\tif (((lineFill === 0) || (lineWidth === 0)) && (fillIndex === 0)) {\n\t\treturn interpreterProxy.pop(5);\n\t}\n\tif (lineWidth !== 0) {\n\t\tlineWidth = transformWidth(lineWidth);\n\t}\n\tif (pointsIsArray) {\n\t\tloadArrayPolygonnPointsfilllineWidthlineFill(points, nPoints, fillIndex, lineWidth, lineFill);\n\t} else {\n\t\tloadPolygonnPointsfilllineWidthlineFillpointsShort(points.wordsAsInt32Array(), nPoints, fillIndex, lineWidth, lineFill, nPoints === length);\n\t}\n\tif (engineStopped) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineStopped);\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEntityLoadFailed);\n\t}\n\tneedsFlushPut(1);\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(5);\n}\n\nfunction primitiveAddRect() {\n\tvar borderIndex;\n\tvar borderWidth;\n\tvar endOop;\n\tvar failureCode;\n\tvar fillIndex;\n\tvar startOop;\n\n\n\t/* Fail if we have the wrong number of arguments */\n\n\tif (interpreterProxy.methodArgumentCount() !== 5) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tborderIndex = interpreterProxy.positive32BitValueOf(interpreterProxy.stackValue(0));\n\tborderWidth = interpreterProxy.stackIntegerValue(1);\n\tfillIndex = interpreterProxy.positive32BitValueOf(interpreterProxy.stackValue(2));\n\tendOop = interpreterProxy.stackObjectValue(3);\n\tstartOop = interpreterProxy.stackObjectValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(5), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tif (!(isFillOkay(borderIndex) && (isFillOkay(fillIndex)))) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWrongFill);\n\t}\n\tborderIndex = transformColor(borderIndex);\n\tfillIndex = transformColor(fillIndex);\n\tif (engineStopped) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineStopped);\n\t}\n\tif ((fillIndex === 0) && ((borderIndex === 0) || (borderWidth === 0))) {\n\t\treturn interpreterProxy.pop(5);\n\t}\n\tif (!needAvailableSpace(4 * GLBaseSize)) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWorkTooBig);\n\t}\n\tif ((borderWidth > 0) && (borderIndex !== 0)) {\n\t\tborderWidth = transformWidth(borderWidth);\n\t} else {\n\t\tborderWidth = 0;\n\t}\n\tloadPointfrom(point1Get(), startOop);\n\tloadPointfrom(point3Get(), endOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFBadPoint);\n\t}\n\tpoint2Get()[0] = point3Get()[0];\n\tpoint2Get()[1] = point1Get()[1];\n\tpoint4Get()[0] = point1Get()[0];\n\tpoint4Get()[1] = point3Get()[1];\n\ttransformPoints(4);\n\tloadRectanglelineFillleftFillrightFill(borderWidth, borderIndex, 0, fillIndex);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEntityLoadFailed);\n\t}\n\tneedsFlushPut(1);\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(5);\n}\n\n\n/*\tNote: No need to load either bitBlt or spanBuffer */\n\nfunction primitiveChangedActiveEdgeEntry() {\n\tvar edge;\n\tvar edgeOop;\n\tvar failureCode;\n\n\tif (doProfileStats) {\n\t\tgeProfileTime = interpreterProxy.ioMicroMSecs();\n\t}\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(1), GEStateWaitingChange))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tedgeOop = interpreterProxy.stackObjectValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tedge = loadEdgeStateFrom(edgeOop);\n\tif (!edge) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEdgeDataTooSmall);\n\t}\n\tif (edgeNumLinesOf(edge) === 0) {\n\t\tremoveFirstAETEntry();\n\t} else {\n\t\tresortFirstAETEntry();\n\t\taetStartPut(aetStartGet() + 1);\n\t}\n\tstatePut(GEStateUpdateEdges);\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(1);\n\tif (doProfileStats) {\n\t\tincrementStatby(GWCountChangeAETEntry, 1);\n\t\tincrementStatby(GWTimeChangeAETEntry, interpreterProxy.ioMicroMSecs() - geProfileTime);\n\t}\n}\n\nfunction primitiveCopyBuffer() {\n\tvar buf1;\n\tvar buf2;\n\tvar diff;\n\tvar dst;\n\tvar failCode;\n\tvar i;\n\tvar src;\n\tvar iLimiT;\n\n\tif (interpreterProxy.methodArgumentCount() !== 2) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tbuf2 = interpreterProxy.stackValue(0);\n\n\t/* Make sure the old buffer is properly initialized */\n\n\tbuf1 = interpreterProxy.stackValue(1);\n\tif (((failCode = loadWorkBufferFrom(buf1))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failCode);\n\t}\n\tif (CLASSOF(buf1) !== CLASSOF(buf2)) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFClassMismatch);\n\t}\n\tdiff = SIZEOF(buf2) - SIZEOF(buf1);\n\tif (diff < 0) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFSizeMismatch);\n\t}\n\tsrc = workBuffer;\n\tdst = buf2.wordsAsInt32Array();\n\tfor (i = 0, iLimiT = (wbTopGet() - 1); i <= iLimiT; i++) {\n\t\tdst[i] = src[i];\n\t}\n\tdst[GWBufferTop] = (wbTopGet() + diff);\n\tdst[GWSize] = (wbSizeGet() + diff);\n\tsrc = PTR_ADD(src, wbTopGet());\n\tdst = PTR_ADD(dst, wbTopGet() + diff);\n\tfor (i = 0, iLimiT = ((wbSizeGet() - wbTopGet()) - 1); i <= iLimiT; i++) {\n\t\tdst[i] = src[i];\n\t}\n\tif (((failCode = loadWorkBufferFrom(buf2))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failCode);\n\t}\n\tinterpreterProxy.pop(2);\n}\n\n\n/*\tNote: Must load bitBlt and spanBuffer */\n\nfunction primitiveDisplaySpanBuffer() {\n\tvar failureCode;\n\n\tif (doProfileStats) {\n\t\tgeProfileTime = interpreterProxy.ioMicroMSecs();\n\t}\n\tif (interpreterProxy.methodArgumentCount() !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(0), GEStateBlitBuffer))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tif (((failureCode = loadSpanBufferFrom(interpreterProxy.fetchPointerofObject(BESpanIndex, engine)))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tif (!loadBitBltFrom(interpreterProxy.fetchPointerofObject(BEBitBltIndex, engine))) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFBitBltLoadFailed);\n\t}\n\tif ((currentYGet() & aaScanMaskGet()) === aaScanMaskGet()) {\n\t\tdisplaySpanBufferAt(currentYGet());\n\t\tpostDisplayAction();\n\t}\n\tif (!finishedProcessing()) {\n\t\taetStartPut(0);\n\t\tcurrentYPut(currentYGet() + 1);\n\t\tstatePut(GEStateUpdateEdges);\n\t}\n\tstoreEngineStateInto(engine);\n\tif (doProfileStats) {\n\t\tincrementStatby(GWCountDisplaySpan, 1);\n\t\tincrementStatby(GWTimeDisplaySpan, interpreterProxy.ioMicroMSecs() - geProfileTime);\n\t}\n}\n\n\n/*\tTurn on/off profiling. Return the old value of the flag. */\n\nfunction primitiveDoProfileStats() {\n\tvar newValue;\n\tvar oldValue;\n\n\toldValue = doProfileStats;\n\tnewValue = interpreterProxy.stackObjectValue(0);\n\tnewValue = interpreterProxy.booleanValueOf(newValue);\n\tif (!interpreterProxy.failed()) {\n\t\tdoProfileStats = newValue;\n\t\tinterpreterProxy.pop(2);\n\t\tinterpreterProxy.pushBool(oldValue);\n\t}\n}\n\nfunction primitiveFinishedProcessing() {\n\tvar failureCode;\n\tvar finished;\n\n\tif (doProfileStats) {\n\t\tgeProfileTime = interpreterProxy.ioMicroMSecs();\n\t}\n\tif (interpreterProxy.methodArgumentCount() !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFrom(interpreterProxy.stackValue(0)))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tfinished = finishedProcessing();\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(1);\n\tinterpreterProxy.pushBool(finished);\n\tif (doProfileStats) {\n\t\tincrementStatby(GWCountFinishTest, 1);\n\t\tincrementStatby(GWTimeFinishTest, interpreterProxy.ioMicroMSecs() - geProfileTime);\n\t}\n}\n\nfunction primitiveGetAALevel() {\n\tvar failureCode;\n\n\tif (interpreterProxy.methodArgumentCount() !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFrom(interpreterProxy.stackValue(0)))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tinterpreterProxy.pop(1);\n\tinterpreterProxy.pushInteger(aaLevelGet());\n}\n\nfunction primitiveGetBezierStats() {\n\tvar failureCode;\n\tvar statOop;\n\tvar stats;\n\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFrom(interpreterProxy.stackValue(1)))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tstatOop = interpreterProxy.stackObjectValue(0);\n\tif (!(!interpreterProxy.failed() && (interpreterProxy.isWords(statOop) && (SIZEOF(statOop) >= 4)))) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tstats = statOop.wordsAsInt32Array();\n\tstats[0] = (stats[0] + workBuffer[GWBezierMonotonSubdivisions]);\n\tstats[1] = (stats[1] + workBuffer[GWBezierHeightSubdivisions]);\n\tstats[2] = (stats[2] + workBuffer[GWBezierOverflowSubdivisions]);\n\tstats[3] = (stats[3] + workBuffer[GWBezierLineConversions]);\n\tinterpreterProxy.pop(1);\n}\n\nfunction primitiveGetClipRect() {\n\tvar failureCode;\n\tvar pointOop;\n\tvar rectOop;\n\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFrom(interpreterProxy.stackValue(1)))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\trectOop = interpreterProxy.stackObjectValue(0);\n\tif (!(!interpreterProxy.failed() && (interpreterProxy.isPointers(rectOop) && (SIZEOF(rectOop) >= 2)))) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tinterpreterProxy.pushRemappableOop(rectOop);\n\tpointOop = interpreterProxy.makePointwithxValueyValue(clipMinXGet(), clipMinYGet());\n\tinterpreterProxy.storePointerofObjectwithValue(0, interpreterProxy.topRemappableOop(), pointOop);\n\tpointOop = interpreterProxy.makePointwithxValueyValue(clipMaxXGet(), clipMaxYGet());\n\trectOop = interpreterProxy.popRemappableOop();\n\tinterpreterProxy.storePointerofObjectwithValue(1, rectOop, pointOop);\n\tinterpreterProxy.popthenPush(2, rectOop);\n}\n\nfunction primitiveGetCounts() {\n\tvar failureCode;\n\tvar statOop;\n\tvar stats;\n\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFrom(interpreterProxy.stackValue(1)))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tstatOop = interpreterProxy.stackObjectValue(0);\n\tif (!(!interpreterProxy.failed() && (interpreterProxy.isWords(statOop) && (SIZEOF(statOop) >= 9)))) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tstats = statOop.wordsAsInt32Array();\n\tstats[0] = (stats[0] + workBuffer[GWCountInitializing]);\n\tstats[1] = (stats[1] + workBuffer[GWCountFinishTest]);\n\tstats[2] = (stats[2] + workBuffer[GWCountNextGETEntry]);\n\tstats[3] = (stats[3] + workBuffer[GWCountAddAETEntry]);\n\tstats[4] = (stats[4] + workBuffer[GWCountNextFillEntry]);\n\tstats[5] = (stats[5] + workBuffer[GWCountMergeFill]);\n\tstats[6] = (stats[6] + workBuffer[GWCountDisplaySpan]);\n\tstats[7] = (stats[7] + workBuffer[GWCountNextAETEntry]);\n\tstats[8] = (stats[8] + workBuffer[GWCountChangeAETEntry]);\n\tinterpreterProxy.pop(1);\n}\n\nfunction primitiveGetDepth() {\n\tvar failureCode;\n\n\tif (interpreterProxy.methodArgumentCount() !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFrom(interpreterProxy.stackValue(0)))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tinterpreterProxy.pop(1);\n\tinterpreterProxy.pushInteger(currentZGet());\n}\n\n\n/*\tReturn the reason why the last operation failed. */\n\nfunction primitiveGetFailureReason() {\n\tvar failCode;\n\n\tif (interpreterProxy.methodArgumentCount() !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\n\t/* Note -- don't call loadEngineFrom here because this will override the stopReason with Zero */\n\n\tengine = interpreterProxy.stackValue(0);\n\tif (typeof engine === \"number\") {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineIsInteger);\n\t}\n\tif (!interpreterProxy.isPointers(engine)) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineIsWords);\n\t}\n\tif (SIZEOF(engine) < BEBalloonEngineSize) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineTooSmall);\n\t}\n\tif (((failCode = loadWorkBufferFrom(interpreterProxy.fetchPointerofObject(BEWorkBufferIndex, engine)))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failCode);\n\t}\n\tinterpreterProxy.pop(1);\n\tinterpreterProxy.pushInteger(stopReasonGet());\n}\n\nfunction primitiveGetOffset() {\n\tvar failureCode;\n\tvar pointOop;\n\n\tif (interpreterProxy.methodArgumentCount() !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFrom(interpreterProxy.stackValue(0)))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tpointOop = interpreterProxy.makePointwithxValueyValue(destOffsetXGet(), destOffsetYGet());\n\tinterpreterProxy.popthenPush(1, pointOop);\n}\n\nfunction primitiveGetTimes() {\n\tvar failureCode;\n\tvar statOop;\n\tvar stats;\n\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFrom(interpreterProxy.stackValue(1)))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tstatOop = interpreterProxy.stackObjectValue(0);\n\tif (!(!interpreterProxy.failed() && (interpreterProxy.isWords(statOop) && (SIZEOF(statOop) >= 9)))) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tstats = statOop.wordsAsInt32Array();\n\tstats[0] = (stats[0] + workBuffer[GWTimeInitializing]);\n\tstats[1] = (stats[1] + workBuffer[GWTimeFinishTest]);\n\tstats[2] = (stats[2] + workBuffer[GWTimeNextGETEntry]);\n\tstats[3] = (stats[3] + workBuffer[GWTimeAddAETEntry]);\n\tstats[4] = (stats[4] + workBuffer[GWTimeNextFillEntry]);\n\tstats[5] = (stats[5] + workBuffer[GWTimeMergeFill]);\n\tstats[6] = (stats[6] + workBuffer[GWTimeDisplaySpan]);\n\tstats[7] = (stats[7] + workBuffer[GWTimeNextAETEntry]);\n\tstats[8] = (stats[8] + workBuffer[GWTimeChangeAETEntry]);\n\tinterpreterProxy.pop(1);\n}\n\nfunction primitiveInitializeBuffer() {\n\tvar size;\n\tvar wbOop;\n\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\twbOop = interpreterProxy.stackObjectValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(wbOop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (((size = SIZEOF(wbOop))) < GWMinimalSize) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tworkBufferPut(wbOop);\n\tobjBuffer = PTR_ADD(workBuffer, GWHeaderSize);\n\tmagicNumberPut(GWMagicNumber);\n\twbSizePut(size);\n\twbTopPut(size);\n\tstatePut(GEStateUnlocked);\n\tobjStartPut(GWHeaderSize);\n\tobjUsedPut(4);\n\tobjectTypeOfput(0, GEPrimitiveFill);\n\tobjectLengthOfput(0, 4);\n\tobjectIndexOfput(0, 0);\n\tgetStartPut(0);\n\tgetUsedPut(0);\n\taetStartPut(0);\n\taetUsedPut(0);\n\tstopReasonPut(0);\n\tneedsFlushPut(0);\n\tclipMinXPut(0);\n\tclipMaxXPut(0);\n\tclipMinYPut(0);\n\tclipMaxYPut(0);\n\tcurrentZPut(0);\n\tresetGraphicsEngineStats();\n\tinitEdgeTransform();\n\tinitColorTransform();\n\tinterpreterProxy.pop(2);\n\tinterpreterProxy.push(wbOop);\n}\n\n\n/*\tNote: No need to load bitBlt but must load spanBuffer */\n\nfunction primitiveInitializeProcessing() {\n\tvar failureCode;\n\n\tif (doProfileStats) {\n\t\tgeProfileTime = interpreterProxy.ioMicroMSecs();\n\t}\n\tif (interpreterProxy.methodArgumentCount() !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(0), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tif (((failureCode = loadSpanBufferFrom(interpreterProxy.fetchPointerofObject(BESpanIndex, engine)))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tinitializeGETProcessing();\n\tif (engineStopped) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineStopped);\n\t}\n\tstatePut(GEStateAddingFromGET);\n\tif (!interpreterProxy.failed()) {\n\t\tstoreEngineStateInto(engine);\n\t}\n\tif (doProfileStats) {\n\t\tincrementStatby(GWCountInitializing, 1);\n\t\tincrementStatby(GWTimeInitializing, interpreterProxy.ioMicroMSecs() - geProfileTime);\n\t}\n}\n\n\n/*\tNote: No need to load bitBlt but must load spanBuffer */\n\nfunction primitiveMergeFillFrom() {\n\tvar bitsOop;\n\tvar failureCode;\n\tvar fillOop;\n\tvar value;\n\n\tif (doProfileStats) {\n\t\tgeProfileTime = interpreterProxy.ioMicroMSecs();\n\t}\n\tif (interpreterProxy.methodArgumentCount() !== 2) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(2), GEStateWaitingForFill))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tif (((failureCode = loadSpanBufferFrom(interpreterProxy.fetchPointerofObject(BESpanIndex, engine)))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tfillOop = interpreterProxy.stackObjectValue(0);\n\n\t/* Check bitmap */\n\n\tbitsOop = interpreterProxy.stackObjectValue(1);\n\tif (!(!interpreterProxy.failed() && (CLASSOF(bitsOop) === interpreterProxy.classBitmap()))) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tif (SIZEOF(fillOop) < FTBalloonFillDataSize) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFFillDataTooSmall);\n\t}\n\tvalue = interpreterProxy.fetchIntegerofObject(FTIndexIndex, fillOop);\n\tif (objectIndexOf(lastExportedFillGet()) !== value) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWrongFill);\n\t}\n\tvalue = interpreterProxy.fetchIntegerofObject(FTMinXIndex, fillOop);\n\tif (lastExportedLeftXGet() !== value) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWrongFill);\n\t}\n\tvalue = interpreterProxy.fetchIntegerofObject(FTMaxXIndex, fillOop);\n\tif (lastExportedRightXGet() !== value) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWrongFill);\n\t}\n\tif (SIZEOF(bitsOop) < (lastExportedRightXGet() - lastExportedLeftXGet())) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tfillBitmapSpanfromto(bitsOop.wordsAsInt32Array(), lastExportedLeftXGet(), lastExportedRightXGet());\n\tstatePut(GEStateScanningAET);\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(2);\n\tif (doProfileStats) {\n\t\tincrementStatby(GWCountMergeFill, 1);\n\t\tincrementStatby(GWTimeMergeFill, interpreterProxy.ioMicroMSecs() - geProfileTime);\n\t}\n}\n\nfunction primitiveNeedsFlush() {\n\tvar failureCode;\n\tvar needFlush;\n\n\tif (interpreterProxy.methodArgumentCount() !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFrom(interpreterProxy.stackValue(0)))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tneedFlush = needsFlush();\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(1);\n\tinterpreterProxy.pushBool(needFlush);\n}\n\nfunction primitiveNeedsFlushPut() {\n\tvar failureCode;\n\tvar needFlush;\n\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFrom(interpreterProxy.stackValue(1)))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tneedFlush = interpreterProxy.booleanValueOf(interpreterProxy.stackValue(0));\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tif (needFlush === true) {\n\t\tneedsFlushPut(1);\n\t} else {\n\t\tneedsFlushPut(0);\n\t}\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(1);\n}\n\n\n/*\tNote: No need to load either bitBlt or spanBuffer */\n\nfunction primitiveNextActiveEdgeEntry() {\n\tvar edge;\n\tvar edgeOop;\n\tvar failureCode;\n\tvar hasEdge;\n\n\tif (doProfileStats) {\n\t\tgeProfileTime = interpreterProxy.ioMicroMSecs();\n\t}\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredStateor(interpreterProxy.stackValue(1), GEStateUpdateEdges, GEStateCompleted))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tedgeOop = interpreterProxy.stackObjectValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\thasEdge = false;\n\tif (stateGet() !== GEStateCompleted) {\n\t\thasEdge = findNextExternalUpdateFromAET();\n\t\tif (hasEdge) {\n\t\t\tedge = aetBuffer[aetStartGet()];\n\t\t\tstoreEdgeStateFrominto(edge, edgeOop);\n\t\t\tstatePut(GEStateWaitingChange);\n\t\t} else {\n\t\t\tstatePut(GEStateAddingFromGET);\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(2);\n\tinterpreterProxy.pushBool(!hasEdge);\n\tif (doProfileStats) {\n\t\tincrementStatby(GWCountNextAETEntry, 1);\n\t\tincrementStatby(GWTimeNextAETEntry, interpreterProxy.ioMicroMSecs() - geProfileTime);\n\t}\n}\n\n\n/*\tNote: No need to load bitBlt but must load spanBuffer */\n\nfunction primitiveNextFillEntry() {\n\tvar failureCode;\n\tvar fillOop;\n\tvar hasFill;\n\n\tif (doProfileStats) {\n\t\tgeProfileTime = interpreterProxy.ioMicroMSecs();\n\t}\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(1), GEStateScanningAET))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tif (((failureCode = loadSpanBufferFrom(interpreterProxy.fetchPointerofObject(BESpanIndex, engine)))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tif (!loadFormsFrom(interpreterProxy.fetchPointerofObject(BEFormsIndex, engine))) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFFormLoadFailed);\n\t}\n\tif (clearSpanBufferGet() !== 0) {\n\t\tif ((currentYGet() & aaScanMaskGet()) === 0) {\n\t\t\tclearSpanBuffer();\n\t\t}\n\t\tclearSpanBufferPut(0);\n\t}\n\tfillOop = interpreterProxy.stackObjectValue(0);\n\thasFill = findNextExternalFillFromAET();\n\tif (engineStopped) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineStopped);\n\t}\n\tif (hasFill) {\n\t\tstoreFillStateInto(fillOop);\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWrongFill);\n\t}\n\tif (hasFill) {\n\t\tstatePut(GEStateWaitingForFill);\n\t} else {\n\t\twbStackClear();\n\t\tspanEndAAPut(0);\n\t\tstatePut(GEStateBlitBuffer);\n\t}\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(2);\n\tinterpreterProxy.pushBool(!hasFill);\n\tif (doProfileStats) {\n\t\tincrementStatby(GWCountNextFillEntry, 1);\n\t\tincrementStatby(GWTimeNextFillEntry, interpreterProxy.ioMicroMSecs() - geProfileTime);\n\t}\n}\n\n\n/*\tNote: No need to load either bitBlt or spanBuffer */\n\nfunction primitiveNextGlobalEdgeEntry() {\n\tvar edge;\n\tvar edgeOop;\n\tvar failureCode;\n\tvar hasEdge;\n\n\tif (doProfileStats) {\n\t\tgeProfileTime = interpreterProxy.ioMicroMSecs();\n\t}\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(1), GEStateAddingFromGET))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tedgeOop = interpreterProxy.stackObjectValue(0);\n\thasEdge = findNextExternalEntryFromGET();\n\tif (hasEdge) {\n\t\tedge = getBuffer[getStartGet()];\n\t\tstoreEdgeStateFrominto(edge, edgeOop);\n\t\tgetStartPut(getStartGet() + 1);\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWrongEdge);\n\t}\n\tif (hasEdge) {\n\t\tstatePut(GEStateWaitingForEdge);\n\t} else {\n\n\t\t/* Start scanning the AET */\n\n\t\tstatePut(GEStateScanningAET);\n\t\tclearSpanBufferPut(1);\n\t\taetStartPut(0);\n\t\twbStackClear();\n\t}\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(2);\n\tinterpreterProxy.pushBool(!hasEdge);\n\tif (doProfileStats) {\n\t\tincrementStatby(GWCountNextGETEntry, 1);\n\t\tincrementStatby(GWTimeNextGETEntry, interpreterProxy.ioMicroMSecs() - geProfileTime);\n\t}\n}\n\nfunction primitiveRegisterExternalEdge() {\n\tvar edge;\n\tvar failureCode;\n\tvar index;\n\tvar initialX;\n\tvar initialY;\n\tvar initialZ;\n\tvar leftFillIndex;\n\tvar rightFillIndex;\n\n\tif (interpreterProxy.methodArgumentCount() !== 6) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(6), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\trightFillIndex = interpreterProxy.positive32BitValueOf(interpreterProxy.stackValue(0));\n\tleftFillIndex = interpreterProxy.positive32BitValueOf(interpreterProxy.stackValue(1));\n\tinitialZ = interpreterProxy.stackIntegerValue(2);\n\tinitialY = interpreterProxy.stackIntegerValue(3);\n\tinitialX = interpreterProxy.stackIntegerValue(4);\n\tindex = interpreterProxy.stackIntegerValue(5);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tif (!allocateObjEntry(GEBaseEdgeSize)) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWorkTooBig);\n\t}\n\tif (!(isFillOkay(leftFillIndex) && (isFillOkay(rightFillIndex)))) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFWrongFill);\n\t}\n\tedge = objUsed;\n\n\t/* Install type and length */\n\n\tobjUsed = edge + GEBaseEdgeSize;\n\tobjectTypeOfput(edge, GEPrimitiveEdge);\n\tobjectLengthOfput(edge, GEBaseEdgeSize);\n\tobjectIndexOfput(edge, index);\n\tedgeXValueOfput(edge, initialX);\n\tedgeYValueOfput(edge, initialY);\n\tedgeZValueOfput(edge, initialZ);\n\tedgeLeftFillOfput(edge, transformColor(leftFillIndex));\n\tedgeRightFillOfput(edge, transformColor(rightFillIndex));\n\tif (engineStopped) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEngineStopped);\n\t}\n\tif (!interpreterProxy.failed()) {\n\t\tstoreEngineStateInto(engine);\n\t\tinterpreterProxy.pop(6);\n\t}\n}\n\nfunction primitiveRegisterExternalFill() {\n\tvar failureCode;\n\tvar fill;\n\tvar index;\n\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(1), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tindex = interpreterProxy.stackIntegerValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tfill = 0;\n\twhile (fill === 0) {\n\t\tif (!allocateObjEntry(GEBaseEdgeSize)) {\n\t\t\treturn interpreterProxy.primitiveFailFor(GEFWorkTooBig);\n\t\t}\n\t\tfill = objUsed;\n\n\t\t/* Install type and length */\n\n\t\tobjUsed = fill + GEBaseFillSize;\n\t\tobjectTypeOfput(fill, GEPrimitiveFill);\n\t\tobjectLengthOfput(fill, GEBaseFillSize);\n\t\tobjectIndexOfput(fill, index);\n\t}\n\tif (!interpreterProxy.failed()) {\n\t\tstoreEngineStateInto(engine);\n\t\tinterpreterProxy.pop(2);\n\t\tinterpreterProxy.pushInteger(fill);\n\t}\n}\n\n\n/*\tStart/Proceed rendering the entire image */\n\nfunction primitiveRenderImage() {\n\tvar failCode;\n\n\tif (((failCode = loadRenderingState())) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failCode);\n\t}\n\tproceedRenderingScanline();\n\tif (engineStopped) {\n\t\treturn storeRenderingState();\n\t}\n\tproceedRenderingImage();\n\tstoreRenderingState();\n}\n\n\n/*\tStart rendering the entire image */\n\nfunction primitiveRenderScanline() {\n\tvar failCode;\n\n\tif (((failCode = loadRenderingState())) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failCode);\n\t}\n\tproceedRenderingScanline();\n\tstoreRenderingState();\n}\n\nfunction primitiveSetAALevel() {\n\tvar failureCode;\n\tvar level;\n\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(1), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tlevel = interpreterProxy.stackIntegerValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tsetAALevel(level);\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(1);\n}\n\n\n/*\tPrimitive. Set the BitBlt plugin to use. */\n\nfunction primitiveSetBitBltPlugin() {\n\tvar i;\n\tvar length;\n\tvar needReload;\n\tvar pluginName;\n\tvar ptr;\n\n\n\t/* Must be string to work */\n\n\tpluginName = interpreterProxy.stackValue(0);\n\tif (!interpreterProxy.isBytes(pluginName)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tlength = BYTESIZEOF(pluginName);\n\tif (length >= 256) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tptr = pluginName.bytes;\n\tneedReload = false;\n\n    // JS hack: can't copy bytes as in the C version\n    var newPluginName = pluginName.bytesAsString();\n    if (newPluginName !== bbPluginName) {\n        bbPluginName = newPluginName;\n        needReload = true;\n    }\n\n\tif (needReload) {\n\t\tif (!initialiseModule()) {\n\t\t\treturn interpreterProxy.primitiveFail();\n\t\t}\n\t}\n\tinterpreterProxy.pop(1);\n}\n\nfunction primitiveSetClipRect() {\n\tvar failureCode;\n\tvar rectOop;\n\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(1), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\trectOop = interpreterProxy.stackObjectValue(0);\n\tif (!(!interpreterProxy.failed() && (interpreterProxy.isPointers(rectOop) && (SIZEOF(rectOop) >= 2)))) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tloadPointfrom(point1Get(), interpreterProxy.fetchPointerofObject(0, rectOop));\n\tloadPointfrom(point2Get(), interpreterProxy.fetchPointerofObject(1, rectOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tclipMinXPut(point1Get()[0]);\n\tclipMinYPut(point1Get()[1]);\n\tclipMaxXPut(point2Get()[0]);\n\tclipMaxYPut(point2Get()[1]);\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(1);\n}\n\nfunction primitiveSetColorTransform() {\n\tvar failureCode;\n\tvar transformOop;\n\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(1), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\ttransformOop = interpreterProxy.stackObjectValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tloadColorTransformFrom(transformOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(GEFEntityLoadFailed);\n\t}\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(1);\n}\n\nfunction primitiveSetDepth() {\n\tvar depth;\n\tvar failureCode;\n\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(1), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tdepth = interpreterProxy.stackIntegerValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tcurrentZPut(depth);\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(1);\n}\n\nfunction primitiveSetEdgeTransform() {\n\tvar failureCode;\n\tvar transformOop;\n\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(1), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\ttransformOop = interpreterProxy.stackObjectValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tloadEdgeTransformFrom(transformOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(1);\n}\n\nfunction primitiveSetOffset() {\n\tvar failureCode;\n\tvar pointOop;\n\n\tif (interpreterProxy.methodArgumentCount() !== 1) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadNumArgs);\n\t}\n\tif (((failureCode = quickLoadEngineFromrequiredState(interpreterProxy.stackValue(1), GEStateUnlocked))) !== 0) {\n\t\treturn interpreterProxy.primitiveFailFor(failureCode);\n\t}\n\tpointOop = interpreterProxy.stackValue(0);\n\tif (CLASSOF(pointOop) !== interpreterProxy.classPoint()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tloadPointfrom(point1Get(), pointOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFailFor(PrimErrBadArgument);\n\t}\n\tdestOffsetXPut(point1Get()[0]);\n\tdestOffsetYPut(point1Get()[1]);\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(1);\n}\n\n\n/*\tThis is the main rendering entry */\n\nfunction proceedRenderingImage() {\n\tvar external;\n\n\twhile (!(finishedProcessing())) {\n\t\tif (doProfileStats) {\n\t\t\tgeProfileTime = interpreterProxy.ioMicroMSecs();\n\t\t}\n\t\texternal = findNextExternalEntryFromGET();\n\t\tif (doProfileStats) {\n\t\t\tincrementStatby(GWCountNextGETEntry, 1);\n\t\t\tincrementStatby(GWTimeNextGETEntry, interpreterProxy.ioMicroMSecs() - geProfileTime);\n\t\t}\n\t\tif (engineStopped) {\n\t\t\treturn statePut(GEStateAddingFromGET);\n\t\t}\n\t\tif (external) {\n\t\t\tstatePut(GEStateWaitingForEdge);\n\t\t\treturn stopBecauseOf(GErrorGETEntry);\n\t\t}\n\t\taetStartPut(0);\n\t\twbStackClear();\n\t\tclearSpanBufferPut(1);\n\t\tif (doProfileStats) {\n\t\t\tgeProfileTime = interpreterProxy.ioMicroMSecs();\n\t\t}\n\t\tif ((clearSpanBufferGet() !== 0) && ((currentYGet() & aaScanMaskGet()) === 0)) {\n\t\t\tclearSpanBuffer();\n\t\t}\n\t\tclearSpanBufferPut(0);\n\t\texternal = findNextExternalFillFromAET();\n\t\tif (doProfileStats) {\n\t\t\tincrementStatby(GWCountNextFillEntry, 1);\n\t\t\tincrementStatby(GWTimeNextFillEntry, interpreterProxy.ioMicroMSecs() - geProfileTime);\n\t\t}\n\t\tif (engineStopped) {\n\t\t\treturn statePut(GEStateScanningAET);\n\t\t}\n\t\tif (external) {\n\t\t\tstatePut(GEStateWaitingForFill);\n\t\t\treturn stopBecauseOf(GErrorFillEntry);\n\t\t}\n\t\twbStackClear();\n\t\tspanEndAAPut(0);\n\t\tif (doProfileStats) {\n\t\t\tgeProfileTime = interpreterProxy.ioMicroMSecs();\n\t\t}\n\t\tif ((currentYGet() & aaScanMaskGet()) === aaScanMaskGet()) {\n\t\t\tdisplaySpanBufferAt(currentYGet());\n\t\t\tpostDisplayAction();\n\t\t}\n\t\tif (doProfileStats) {\n\t\t\tincrementStatby(GWCountDisplaySpan, 1);\n\t\t\tincrementStatby(GWTimeDisplaySpan, interpreterProxy.ioMicroMSecs() - geProfileTime);\n\t\t}\n\t\tif (engineStopped) {\n\t\t\treturn statePut(GEStateBlitBuffer);\n\t\t}\n\t\tif (finishedProcessing()) {\n\t\t\treturn 0;\n\t\t}\n\t\taetStartPut(0);\n\t\tcurrentYPut(currentYGet() + 1);\n\t\tif (doProfileStats) {\n\t\t\tgeProfileTime = interpreterProxy.ioMicroMSecs();\n\t\t}\n\t\texternal = findNextExternalUpdateFromAET();\n\t\tif (doProfileStats) {\n\t\t\tincrementStatby(GWCountNextAETEntry, 1);\n\t\t\tincrementStatby(GWTimeNextAETEntry, interpreterProxy.ioMicroMSecs() - geProfileTime);\n\t\t}\n\t\tif (engineStopped) {\n\t\t\treturn statePut(GEStateUpdateEdges);\n\t\t}\n\t\tif (external) {\n\t\t\tstatePut(GEStateWaitingChange);\n\t\t\treturn stopBecauseOf(GErrorAETEntry);\n\t\t}\n\t}\n}\n\n\n/*\tProceed rendering the current scan line.\n\tThis method may be called after some Smalltalk code has been executed inbetween. */\n/*\tThis is the main rendering entry */\n\nfunction proceedRenderingScanline() {\n\tvar external;\n\tvar state;\n\n\tstate = stateGet();\n\tif (state === GEStateUnlocked) {\n\t\tinitializeGETProcessing();\n\t\tif (engineStopped) {\n\t\t\treturn 0;\n\t\t}\n\t\tstate = GEStateAddingFromGET;\n\t}\n\tif (state === GEStateAddingFromGET) {\n\t\tif (doProfileStats) {\n\t\t\tgeProfileTime = interpreterProxy.ioMicroMSecs();\n\t\t}\n\t\texternal = findNextExternalEntryFromGET();\n\t\tif (doProfileStats) {\n\t\t\tincrementStatby(GWCountNextGETEntry, 1);\n\t\t\tincrementStatby(GWTimeNextGETEntry, interpreterProxy.ioMicroMSecs() - geProfileTime);\n\t\t}\n\t\tif (engineStopped) {\n\t\t\treturn statePut(GEStateAddingFromGET);\n\t\t}\n\t\tif (external) {\n\t\t\tstatePut(GEStateWaitingForEdge);\n\t\t\treturn stopBecauseOf(GErrorGETEntry);\n\t\t}\n\t\taetStartPut(0);\n\t\twbStackClear();\n\t\tclearSpanBufferPut(1);\n\t\tstate = GEStateScanningAET;\n\t}\n\tif (state === GEStateScanningAET) {\n\t\tif (doProfileStats) {\n\t\t\tgeProfileTime = interpreterProxy.ioMicroMSecs();\n\t\t}\n\t\tif ((clearSpanBufferGet() !== 0) && ((currentYGet() & aaScanMaskGet()) === 0)) {\n\t\t\tclearSpanBuffer();\n\t\t}\n\t\tclearSpanBufferPut(0);\n\t\texternal = findNextExternalFillFromAET();\n\t\tif (doProfileStats) {\n\t\t\tincrementStatby(GWCountNextFillEntry, 1);\n\t\t\tincrementStatby(GWTimeNextFillEntry, interpreterProxy.ioMicroMSecs() - geProfileTime);\n\t\t}\n\t\tif (engineStopped) {\n\t\t\treturn statePut(GEStateScanningAET);\n\t\t}\n\t\tif (external) {\n\t\t\tstatePut(GEStateWaitingForFill);\n\t\t\treturn stopBecauseOf(GErrorFillEntry);\n\t\t}\n\t\tstate = GEStateBlitBuffer;\n\t\twbStackClear();\n\t\tspanEndAAPut(0);\n\t}\n\tif (state === GEStateBlitBuffer) {\n\t\tif (doProfileStats) {\n\t\t\tgeProfileTime = interpreterProxy.ioMicroMSecs();\n\t\t}\n\t\tif ((currentYGet() & aaScanMaskGet()) === aaScanMaskGet()) {\n\t\t\tdisplaySpanBufferAt(currentYGet());\n\t\t\tpostDisplayAction();\n\t\t}\n\t\tif (doProfileStats) {\n\t\t\tincrementStatby(GWCountDisplaySpan, 1);\n\t\t\tincrementStatby(GWTimeDisplaySpan, interpreterProxy.ioMicroMSecs() - geProfileTime);\n\t\t}\n\t\tif (engineStopped) {\n\t\t\treturn statePut(GEStateBlitBuffer);\n\t\t}\n\t\tif (finishedProcessing()) {\n\t\t\treturn 0;\n\t\t}\n\t\tstate = GEStateUpdateEdges;\n\t\taetStartPut(0);\n\t\tcurrentYPut(currentYGet() + 1);\n\t}\n\tif (state === GEStateUpdateEdges) {\n\t\tif (doProfileStats) {\n\t\t\tgeProfileTime = interpreterProxy.ioMicroMSecs();\n\t\t}\n\t\texternal = findNextExternalUpdateFromAET();\n\t\tif (doProfileStats) {\n\t\t\tincrementStatby(GWCountNextAETEntry, 1);\n\t\t\tincrementStatby(GWTimeNextAETEntry, interpreterProxy.ioMicroMSecs() - geProfileTime);\n\t\t}\n\t\tif (engineStopped) {\n\t\t\treturn statePut(GEStateUpdateEdges);\n\t\t}\n\t\tif (external) {\n\t\t\tstatePut(GEStateWaitingChange);\n\t\t\treturn stopBecauseOf(GErrorAETEntry);\n\t\t}\n\t\tstatePut(GEStateAddingFromGET);\n\t}\n}\n\n\n/*\tLoad the minimal required state from the engineOop, e.g., just the work buffer.\n\t Answer 0 on success or non-zero a failure code on failure */\n\nfunction quickLoadEngineFrom(engineOop) {\n\tvar failCode;\n\n\tif (interpreterProxy.failed()) {\n\t\treturn GEFAlreadyFailed;\n\t}\n\tif (typeof engineOop === \"number\") {\n\t\treturn GEFEngineIsInteger;\n\t}\n\tif (!interpreterProxy.isPointers(engineOop)) {\n\t\treturn GEFEngineIsWords;\n\t}\n\tif (SIZEOF(engineOop) < BEBalloonEngineSize) {\n\t\treturn GEFEngineTooSmall;\n\t}\n\tengine = engineOop;\n\tif (((failCode = loadWorkBufferFrom(interpreterProxy.fetchPointerofObject(BEWorkBufferIndex, engineOop)))) !== 0) {\n\t\treturn failCode;\n\t}\n\tstopReasonPut(0);\n\tobjUsed = objUsedGet();\n\tengineStopped = false;\n\treturn 0;\n}\n\nfunction quickLoadEngineFromrequiredState(oop, requiredState) {\n\tvar failureCode;\n\n\tif (((failureCode = quickLoadEngineFrom(oop))) !== 0) {\n\t\treturn failureCode;\n\t}\n\tif (stateGet() === requiredState) {\n\t\treturn 0;\n\t}\n\tstopReasonPut(GErrorBadState);\n\treturn GEFWrongState;\n}\n\nfunction quickLoadEngineFromrequiredStateor(oop, requiredState, alternativeState) {\n\tvar failureCode;\n\n\tif (((failureCode = quickLoadEngineFrom(oop))) !== 0) {\n\t\treturn failureCode;\n\t}\n\tif (stateGet() === requiredState) {\n\t\treturn 0;\n\t}\n\tif (stateGet() === alternativeState) {\n\t\treturn 0;\n\t}\n\tstopReasonPut(GErrorBadState);\n\treturn GEFWrongState;\n}\n\n\n/*\tRemove any top fills if they have become invalid. */\n\nfunction quickRemoveInvalidFillsAt(leftX) {\n\tif (stackFillSize() === 0) {\n\t\treturn null;\n\t}\n\twhile (topRightX() <= leftX) {\n\t\thideFilldepth(topFill(), topDepth());\n\t\tif (stackFillSize() === 0) {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\n\n/*\tSort elements i through j of self to be nondescending according to\n\tsortBlock. */\n/*\tNote: The original loop has been heavily re-written for C translation */\n\nfunction quickSortGlobalEdgeTablefromto(array, i, j) {\n\tvar again;\n\tvar before;\n\tvar di;\n\tvar dij;\n\tvar dj;\n\tvar ij;\n\tvar k;\n\tvar l;\n\tvar n;\n\tvar tmp;\n\tvar tt;\n\n\n\t/* The prefix d means the data at that index. */\n\n\tif (((n = (j + 1) - i)) <= 1) {\n\t\treturn 0;\n\t}\n\tdi = array[i];\n\tdj = array[j];\n\n\t/* i.e., should di precede dj? */\n\n\tbefore = getSortsbefore(di, dj);\n\tif (!before) {\n\t\ttmp = array[i];\n\t\tarray[i] = array[j];\n\t\tarray[j] = tmp;\n\t\ttt = di;\n\t\tdi = dj;\n\t\tdj = tt;\n\t}\n\tif (n <= 2) {\n\t\treturn 0;\n\t}\n\n\t/* ij is the midpoint of i and j. */\n\n\tij = (i + j) >> 1;\n\n\t/* Sort di,dij,dj.  Make dij be their median. */\n\n\tdij = array[ij];\n\n\t/* i.e. should di precede dij? */\n\n\tbefore = getSortsbefore(di, dij);\n\tif (before) {\n\n\t\t/* i.e., should dij precede dj? */\n\n\t\tbefore = getSortsbefore(dij, dj);\n\t\tif (!before) {\n\n\t\t\t/* i.e., should dij precede dj? */\n\n\t\t\ttmp = array[j];\n\t\t\tarray[j] = array[ij];\n\t\t\tarray[ij] = tmp;\n\t\t\tdij = dj;\n\t\t}\n\t} else {\n\n\t\t/* i.e. di should come after dij */\n\n\t\ttmp = array[i];\n\t\tarray[i] = array[ij];\n\t\tarray[ij] = tmp;\n\t\tdij = di;\n\t}\n\tif (n <= 3) {\n\t\treturn 0;\n\t}\n\tk = i;\n\tl = j;\n\tagain = true;\n\twhile (again) {\n\t\tbefore = true;\n\t\twhile (before) {\n\t\t\tif (k <= ((--l))) {\n\t\t\t\ttmp = array[l];\n\t\t\t\tbefore = getSortsbefore(dij, tmp);\n\t\t\t} else {\n\t\t\t\tbefore = false;\n\t\t\t}\n\t\t}\n\t\tbefore = true;\n\t\twhile (before) {\n\t\t\tif (((++k)) <= l) {\n\t\t\t\ttmp = array[k];\n\t\t\t\tbefore = getSortsbefore(tmp, dij);\n\t\t\t} else {\n\t\t\t\tbefore = false;\n\t\t\t}\n\t\t}\n\t\tagain = k <= l;\n\t\tif (again) {\n\t\t\ttmp = array[k];\n\t\t\tarray[k] = array[l];\n\t\t\tarray[l] = tmp;\n\t\t}\n\t}\n\tquickSortGlobalEdgeTablefromto(array, i, l);\n\tquickSortGlobalEdgeTablefromto(array, k, j);\n}\n\nfunction rShiftTable() {\n\tvar theTable =\n\t\t[0, 5, 4, 0, 3, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 1];\n\n\treturn theTable;\n}\n\nfunction removeFirstAETEntry() {\n\tvar index;\n\n\tindex = aetStartGet();\n\taetUsedPut(aetUsedGet() - 1);\n\twhile (index < aetUsedGet()) {\n\t\taetBuffer[index] = aetBuffer[index + 1];\n\t\t++index;\n\t}\n}\n\nfunction repeatValuemax(delta, maxValue) {\n\tvar newDelta;\n\n\tnewDelta = delta;\n\twhile (newDelta < 0) {\n\t\tnewDelta += maxValue;\n\t}\n\twhile (newDelta >= maxValue) {\n\t\tnewDelta -= maxValue;\n\t}\n\treturn newDelta;\n}\n\nfunction resetGraphicsEngineStats() {\n\tworkBuffer[GWTimeInitializing] = 0;\n\tworkBuffer[GWTimeFinishTest] = 0;\n\tworkBuffer[GWTimeNextGETEntry] = 0;\n\tworkBuffer[GWTimeAddAETEntry] = 0;\n\tworkBuffer[GWTimeNextFillEntry] = 0;\n\tworkBuffer[GWTimeMergeFill] = 0;\n\tworkBuffer[GWTimeDisplaySpan] = 0;\n\tworkBuffer[GWTimeNextAETEntry] = 0;\n\tworkBuffer[GWTimeChangeAETEntry] = 0;\n\tworkBuffer[GWCountInitializing] = 0;\n\tworkBuffer[GWCountFinishTest] = 0;\n\tworkBuffer[GWCountNextGETEntry] = 0;\n\tworkBuffer[GWCountAddAETEntry] = 0;\n\tworkBuffer[GWCountNextFillEntry] = 0;\n\tworkBuffer[GWCountMergeFill] = 0;\n\tworkBuffer[GWCountDisplaySpan] = 0;\n\tworkBuffer[GWCountNextAETEntry] = 0;\n\tworkBuffer[GWCountChangeAETEntry] = 0;\n\tworkBuffer[GWBezierMonotonSubdivisions] = 0;\n\tworkBuffer[GWBezierHeightSubdivisions] = 0;\n\tworkBuffer[GWBezierOverflowSubdivisions] = 0;\n\tworkBuffer[GWBezierLineConversions] = 0;\n}\n\nfunction resortFirstAETEntry() {\n\tvar edge;\n\tvar leftEdge;\n\tvar xValue;\n\n\tif (aetStartGet() === 0) {\n\t\treturn null;\n\t}\n\tedge = aetBuffer[aetStartGet()];\n\txValue = edgeXValueOf(edge);\n\tleftEdge = aetBuffer[aetStartGet() - 1];\n\tif (edgeXValueOf(leftEdge) <= xValue) {\n\t\treturn null;\n\t}\n\tmoveAETEntryFromedgex(aetStartGet(), edge, xValue);\n}\n\nfunction returnWideBezierFill() {\n\treturn (dispatchReturnValue = wideBezierFillOf(dispatchedValue));\n}\n\nfunction returnWideBezierWidth() {\n\treturn (dispatchReturnValue = wideBezierWidthOf(dispatchedValue));\n}\n\n\n/*\tReturn the fill of the (wide) line - this method is called from a case. */\n\nfunction returnWideLineFill() {\n\treturn (dispatchReturnValue = wideLineFillOf(dispatchedValue));\n}\n\n\n/*\tReturn the width of the (wide) line - this method is called from a case. */\n\nfunction returnWideLineWidth() {\n\treturn (dispatchReturnValue = wideLineWidthOf(dispatchedValue));\n}\n\n\n/*\tSet the anti-aliasing level. Three levels are supported:\n\t\t1 - No antialiasing\n\t\t2 - 2x2 unweighted anti-aliasing\n\t\t4 - 4x4 unweighted anti-aliasing.\n\t */\n\nfunction setAALevel(level) {\n\tvar aaLevel;\n\n\tif (level >= 4) {\n\t\taaLevel = 4;\n\t}\n\tif ((level >= 2) && (level < 4)) {\n\t\taaLevel = 2;\n\t}\n\tif (level < 2) {\n\t\taaLevel = 1;\n\t}\n\taaLevelPut(aaLevel);\n\tif (aaLevel === 1) {\n\t\taaShiftPut(0);\n\t\taaColorMaskPut(4294967295);\n\t\taaScanMaskPut(0);\n\t}\n\tif (aaLevel === 2) {\n\t\taaShiftPut(1);\n\t\taaColorMaskPut(4244438268);\n\t\taaScanMaskPut(1);\n\t}\n\tif (aaLevel === 4) {\n\t\taaShiftPut(2);\n\t\taaColorMaskPut(4042322160);\n\t\taaScanMaskPut(3);\n\t}\n\taaColorShiftPut(aaShiftGet() * 2);\n\taaHalfPixelPut(aaShiftGet());\n}\n\n\n/*\tNote: This is coded so that is can be run from Squeak. */\n\nfunction setInterpreter(anInterpreter) {\n\tvar ok;\n\n\tinterpreterProxy = anInterpreter;\n\tok = interpreterProxy.majorVersion() == VM_PROXY_MAJOR;\n\tif (ok === false) {\n\t\treturn false;\n\t}\n\tok = interpreterProxy.minorVersion() >= VM_PROXY_MINOR;\n\treturn ok;\n}\n\n\n/*\tReturn the run-length value from the given ShortRunArray. */\n\nfunction shortRunLengthAtfrom(i, runArray) {\n\treturn (runArray[i]|0) >>> 16;\n}\n\n\n/*\tReturn the run-length value from the given ShortRunArray.\n\tNote: We don't need any coercion to short/int here, since\n\twe deal basically only with unsigned values. */\n\nfunction shortRunValueAtfrom(i, runArray) {\n\treturn (runArray[i]|0) & 65535;\n}\n\nfunction showFilldepthrightX(fillIndex, depth, rightX) {\n\tif (!allocateStackFillEntry()) {\n\t\treturn null;\n\t}\n\tstackFillValueput(0, fillIndex);\n\tstackFillDepthput(0, depth);\n\tstackFillRightXput(0, rightX);\n\tif (stackFillSize() === stackFillEntryLength()) {\n\t\treturn null;\n\t}\n\tif (fillSortsbefore(0, stackFillSize() - stackFillEntryLength())) {\n\n\t\t/* New top fill */\n\n\t\tstackFillValueput(0, topFillValue());\n\t\tstackFillDepthput(0, topFillDepth());\n\t\tstackFillRightXput(0, topFillRightX());\n\t\ttopFillValuePut(fillIndex);\n\t\ttopFillDepthPut(depth);\n\t\ttopFillRightXPut(rightX);\n\t}\n}\n\nfunction smallSqrtTable() {\n\tvar theTable = \n\t[0, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 6];\n\n\treturn theTable;\n}\n\n\n/*\tSort the entire global edge table */\n\nfunction sortGlobalEdgeTable() {\n\tquickSortGlobalEdgeTablefromto(getBuffer, 0, getUsedGet() - 1);\n}\n\nfunction spanEndAAGet() {\n\treturn workBuffer[GWSpanEndAA];\n}\n\nfunction spanEndAAPut(value) {\n\treturn workBuffer[GWSpanEndAA] = value;\n}\n\nfunction spanEndGet() {\n\treturn workBuffer[GWSpanEnd];\n}\n\nfunction spanEndPut(value) {\n\treturn workBuffer[GWSpanEnd] = value;\n}\n\nfunction spanSizeGet() {\n\treturn workBuffer[GWSpanSize];\n}\n\nfunction spanSizePut(value) {\n\treturn workBuffer[GWSpanSize] = value;\n}\n\nfunction spanStartGet() {\n\treturn workBuffer[GWSpanStart];\n}\n\nfunction spanStartPut(value) {\n\treturn workBuffer[GWSpanStart] = value;\n}\n\nfunction squaredLengthOfwith(deltaX, deltaY) {\n\treturn (deltaX * deltaX) + (deltaY * deltaY);\n}\n\nfunction stackFillDepth(index) {\n\treturn wbStackValue(index + 1);\n}\n\nfunction stackFillDepthput(index, value) {\n\treturn wbStackValueput(index + 1, value);\n}\n\nfunction stackFillEntryLength() {\n\treturn 3;\n}\n\nfunction stackFillRightX(index) {\n\treturn wbStackValue(index + 2);\n}\n\nfunction stackFillRightXput(index, value) {\n\treturn wbStackValueput(index + 2, value);\n}\n\nfunction stackFillSize() {\n\treturn wbStackSize();\n}\n\nfunction stackFillValue(index) {\n\treturn wbStackValue(index);\n}\n\nfunction stackFillValueput(index, value) {\n\treturn wbStackValueput(index, value);\n}\n\nfunction stateGet() {\n\treturn workBuffer[GWState];\n}\n\nfunction statePut(value) {\n\treturn workBuffer[GWState] = value;\n}\n\n\n/*\tInitialize the current entry in the GET by stepping to the current scan line */\n\nfunction stepToFirstBezier() {\n\treturn stepToFirstBezierInat(getBuffer[getStartGet()], currentYGet());\n}\n\n\n/*\tInitialize the bezier at yValue.\n\tTODO: Check if reducing maxSteps from 2*deltaY to deltaY \n\t\tbrings a *significant* performance improvement.\n\t\tIn theory this should make for double step performance\n\t\tbut will cost in quality. Might be that the AA stuff will\n\t\tcompensate for this - but I'm not really sure. */\n\nfunction stepToFirstBezierInat(bezier, yValue) {\n\tvar deltaY;\n\tvar endX;\n\tvar endY;\n\tvar fwDDx;\n\tvar fwDDy;\n\tvar fwDx;\n\tvar fwDy;\n\tvar fwX1;\n\tvar fwX2;\n\tvar fwY1;\n\tvar fwY2;\n\tvar maxSteps;\n\tvar scaledStepSize;\n\tvar squaredStepSize;\n\tvar startX;\n\tvar startY;\n\tvar updateData;\n\tvar viaX;\n\tvar viaY;\n\n\n\t/* Do a quick check if there is anything at all to do */\n\n\tif (!isWide(bezier) && (yValue >= bezierEndYOf(bezier))) {\n\t\treturn edgeNumLinesOfput(bezier, 0);\n\t}\n\tstartX = edgeXValueOf(bezier);\n\tstartY = edgeYValueOf(bezier);\n\tviaX = bezierViaXOf(bezier);\n\tviaY = bezierViaYOf(bezier);\n\tendX = bezierEndXOf(bezier);\n\tendY = bezierEndYOf(bezier);\n\n\t/* Initialize integer forward differencing */\n\n\tdeltaY = endY - startY;\n\tfwX1 = (viaX - startX) * 2;\n\tfwX2 = (startX + endX) - (viaX * 2);\n\tfwY1 = (viaY - startY) * 2;\n\tfwY2 = (startY + endY) - (viaY * 2);\n\tmaxSteps = deltaY * 2;\n\tif (maxSteps < 2) {\n\t\tmaxSteps = 2;\n\t}\n\tscaledStepSize = DIV(16777216, maxSteps);\n\tsquaredStepSize = absoluteSquared8Dot24(scaledStepSize);\n\tfwDx = fwX1 * scaledStepSize;\n\tfwDDx = (fwX2 * squaredStepSize) * 2;\n\tfwDx += fwDDx >> 1;\n\tfwDy = fwY1 * scaledStepSize;\n\tfwDDy = (fwY2 * squaredStepSize) * 2;\n\n\t/* Store the values */\n\n\tfwDy += fwDDy >> 1;\n\tedgeNumLinesOfput(bezier, deltaY);\n\tupdateData = bezierUpdateDataOf(bezier);\n\tupdateData[GBUpdateX] = (startX * 256);\n\tupdateData[GBUpdateY] = (startY * 256);\n\tupdateData[GBUpdateDX] = fwDx;\n\tupdateData[GBUpdateDY] = fwDy;\n\tupdateData[GBUpdateDDX] = fwDDx;\n\tupdateData[GBUpdateDDY] = fwDDy;\n\tif (((startY = edgeYValueOf(bezier))) !== yValue) {\n\t\tstepToNextBezierInat(bezier, yValue);\n\t\tedgeNumLinesOfput(bezier, deltaY - (yValue - startY));\n\t}\n}\n\n\n/*\tInitialize the current entry in the GET by stepping to the current scan line */\n\nfunction stepToFirstLine() {\n\treturn stepToFirstLineInat(getBuffer[getStartGet()], currentYGet());\n}\n\n\n/*\tInitialize the line at yValue */\n\nfunction stepToFirstLineInat(line, yValue) {\n\tvar deltaX;\n\tvar deltaY;\n\tvar error;\n\tvar errorAdjUp;\n\tvar i;\n\tvar startY;\n\tvar widthX;\n\tvar xDir;\n\tvar xInc;\n\n\n\t/* Do a quick check if there is anything at all to do */\n\n\tif (!isWide(line) && (yValue >= lineEndYOf(line))) {\n\t\treturn edgeNumLinesOfput(line, 0);\n\t}\n\tdeltaX = lineEndXOf(line) - edgeXValueOf(line);\n\n\t/* Check if edge goes left to right */\n\n\tdeltaY = lineEndYOf(line) - edgeYValueOf(line);\n\tif (deltaX >= 0) {\n\t\txDir = 1;\n\t\twidthX = deltaX;\n\t\terror = 0;\n\t} else {\n\t\txDir = -1;\n\t\twidthX = 0 - deltaX;\n\t\terror = 1 - deltaY;\n\t}\n\tif (deltaY === 0) {\n\n\t\t/* No error for horizontal edges */\n\n\t\terror = 0;\n\n\t\t/* Encodes width and direction */\n\n\t\txInc = deltaX;\n\t\terrorAdjUp = 0;\n\t} else {\n\n\t\t/* Check if edge is y-major */\n\n\t\tif (deltaY > widthX) {\n\n\t\t\t/* Note: The '>' instead of '>=' could be important here... */\n\n\t\t\txInc = 0;\n\t\t\terrorAdjUp = widthX;\n\t\t} else {\n\t\t\txInc = (DIV(widthX, deltaY)) * xDir;\n\t\t\terrorAdjUp = MOD(widthX, deltaY);\n\t\t}\n\t}\n\tedgeNumLinesOfput(line, deltaY);\n\tlineXDirectionOfput(line, xDir);\n\tlineXIncrementOfput(line, xInc);\n\tlineErrorOfput(line, error);\n\tlineErrorAdjUpOfput(line, errorAdjUp);\n\tlineErrorAdjDownOfput(line, deltaY);\n\tif (((startY = edgeYValueOf(line))) !== yValue) {\n\t\tfor (i = startY; i <= (yValue - 1); i++) {\n\t\t\tstepToNextLineInat(line, i);\n\t\t}\n\t\tedgeNumLinesOfput(line, deltaY - (yValue - startY));\n\t}\n}\n\n\n/*\tInitialize the current entry in the GET by stepping to the current scan line */\n\nfunction stepToFirstWideBezier() {\n\treturn stepToFirstWideBezierInat(getBuffer[getStartGet()], currentYGet());\n}\n\n\n/*\tInitialize the bezier at yValue */\n\nfunction stepToFirstWideBezierInat(bezier, yValue) {\n\tvar endX;\n\tvar i;\n\tvar lineOffset;\n\tvar lineWidth;\n\tvar nLines;\n\tvar startY;\n\tvar xDir;\n\tvar yEntry;\n\tvar yExit;\n\n\n\t/* Get some values */\n\n\tlineWidth = wideBezierExtentOf(bezier);\n\n\t/* Compute the incremental values of the bezier */\n\n\tlineOffset = offsetFromWidth(lineWidth);\n\tendX = bezierEndXOf(bezier);\n\tstartY = edgeYValueOf(bezier);\n\tstepToFirstBezierInat(bezier, startY);\n\n\t/* Copy the incremental update data */\n\n\tnLines = edgeNumLinesOf(bezier);\n\tfor (i = 0; i <= 5; i++) {\n\t\twideBezierUpdateDataOf(bezier)[i] = bezierUpdateDataOf(bezier)[i];\n\t}\n\txDir = bezierUpdateDataOf(bezier)[GBUpdateDX];\n\tif (xDir === 0) {\n\t\tbezierUpdateDataOf(bezier)[GBUpdateDDX];\n\t}\n\tif (xDir >= 0) {\n\t\txDir = 1;\n\t} else {\n\t\txDir = -1;\n\t}\n\tif (xDir < 0) {\n\t\tadjustWideBezierLeftwidthoffsetendX(bezier, lineWidth, lineOffset, endX);\n\t} else {\n\t\tadjustWideBezierRightwidthoffsetendX(bezier, lineWidth, lineOffset, endX);\n\t}\n\tif (nLines === 0) {\n\t\tbezierUpdateDataOf(bezier)[GBUpdateX] = (bezierFinalXOf(bezier) * 256);\n\t}\n\tedgeNumLinesOfput(bezier, nLines + lineWidth);\n\n\t/* turned on at lineOffset */\n\n\tyEntry = 0;\n\n\t/* turned off at zero */\n\n\tyExit = (0 - nLines) - lineOffset;\n\twideBezierEntryOfput(bezier, yEntry);\n\twideBezierExitOfput(bezier, yExit);\n\tif ((yEntry >= lineOffset) && (yExit < 0)) {\n\t\tedgeFillsValidate(bezier);\n\t} else {\n\t\tedgeFillsInvalidate(bezier);\n\t}\n\tcomputeFinalWideBezierValueswidth(bezier, lineWidth);\n\tif (startY !== yValue) {\n\n\t\t/* Note: Must single step here so that entry/exit works */\n\n\t\tfor (i = startY; i <= (yValue - 1); i++) {\n\t\t\tstepToNextWideBezierInat(bezier, i);\n\t\t}\n\t\tedgeNumLinesOfput(bezier, edgeNumLinesOf(bezier) - (yValue - startY));\n\t}\n}\n\n\n/*\tInitialize the current entry in the GET by stepping to the current scan line */\n\nfunction stepToFirstWideLine() {\n\treturn stepToFirstWideLineInat(getBuffer[getStartGet()], currentYGet());\n}\n\n\n/*\tInitialize the wide line at yValue. */\n\nfunction stepToFirstWideLineInat(line, yValue) {\n\tvar i;\n\tvar lineOffset;\n\tvar lineWidth;\n\tvar nLines;\n\tvar startX;\n\tvar startY;\n\tvar xDir;\n\tvar yEntry;\n\tvar yExit;\n\n\n\t/* Get some values */\n\n\tlineWidth = wideLineExtentOf(line);\n\n\t/* Compute the incremental values of the line */\n\n\tlineOffset = offsetFromWidth(lineWidth);\n\tstartX = edgeXValueOf(line);\n\tstartY = edgeYValueOf(line);\n\tstepToFirstLineInat(line, startY);\n\tnLines = edgeNumLinesOf(line);\n\n\t/* Adjust the line to start at the correct X position */\n\n\txDir = lineXDirectionOf(line);\n\tedgeXValueOfput(line, startX - lineOffset);\n\tedgeNumLinesOfput(line, nLines + lineWidth);\n\tif (xDir > 0) {\n\t\twideLineWidthOfput(line, lineXIncrementOf(line) + lineWidth);\n\t} else {\n\t\twideLineWidthOfput(line, lineWidth - lineXIncrementOf(line));\n\t\tedgeXValueOfput(line, edgeXValueOf(line) + lineXIncrementOf(line));\n\t}\n\n\t/* turned on at lineOffset */\n\n\tyEntry = 0;\n\n\t/* turned off at zero */\n\n\tyExit = (0 - nLines) - lineOffset;\n\twideLineEntryOfput(line, yEntry);\n\twideLineExitOfput(line, yExit);\n\tif ((yEntry >= lineOffset) && (yExit < 0)) {\n\t\tedgeFillsValidate(line);\n\t} else {\n\t\tedgeFillsInvalidate(line);\n\t}\n\tif (startY !== yValue) {\n\t\tfor (i = startY; i <= (yValue - 1); i++) {\n\t\t\tstepToNextWideLineInat(line, i);\n\t\t}\n\t\tedgeNumLinesOfput(line, edgeNumLinesOf(line) - (yValue - startY));\n\t}\n}\n\n\n/*\tProcess the current entry in the AET by stepping to the next scan line */\n\nfunction stepToNextBezier() {\n\treturn stepToNextBezierInat(aetBuffer[aetStartGet()], currentYGet());\n}\n\n\n/*\tIncrementally step to the next scan line in the given bezier update data. */\n\nfunction stepToNextBezierForwardat(updateData, yValue) {\n\tvar fwDx;\n\tvar fwDy;\n\tvar lastX;\n\tvar lastY;\n\tvar minY;\n\n\tlastX = updateData[GBUpdateX];\n\tlastY = updateData[GBUpdateY];\n\tfwDx = updateData[GBUpdateDX];\n\tfwDy = updateData[GBUpdateDY];\n\n\t/* Step as long as we haven't yet reached minY and also\n\tas long as fwDy is greater than zero thus stepping down.\n\tNote: The test for fwDy should not be necessary in theory\n\t\tbut is a good insurance in practice. */\n\n\tminY = yValue * 256;\n\twhile ((minY > lastY) && (fwDy >= 0)) {\n\t\tlastX += (fwDx + 32768) >> 16;\n\t\tlastY += (fwDy + 32768) >> 16;\n\t\tfwDx += updateData[GBUpdateDDX];\n\t\tfwDy += updateData[GBUpdateDDY];\n\t}\n\tupdateData[GBUpdateX] = lastX;\n\tupdateData[GBUpdateY] = lastY;\n\tupdateData[GBUpdateDX] = fwDx;\n\tupdateData[GBUpdateDY] = fwDy;\n\treturn lastX >> 8;\n}\n\n\n/*\tIncrementally step to the next scan line in the given bezier */\n\nfunction stepToNextBezierInat(bezier, yValue) {\n\tvar xValue;\n\n\txValue = stepToNextBezierForwardat(bezierUpdateDataOf(bezier), yValue);\n\tedgeXValueOfput(bezier, xValue);\n}\n\n\n/*\tProcess the current entry in the AET by stepping to the next scan line */\n\nfunction stepToNextLine() {\n\treturn stepToNextLineInat(aetBuffer[aetStartGet()], currentYGet());\n}\n\n\n/*\tIncrementally step to the next scan line in the given line */\n\nfunction stepToNextLineInat(line, yValue) {\n\tvar err;\n\tvar x;\n\n\tx = edgeXValueOf(line) + lineXIncrementOf(line);\n\terr = lineErrorOf(line) + lineErrorAdjUpOf(line);\n\tif (err > 0) {\n\t\tx += lineXDirectionOf(line);\n\t\terr -= lineErrorAdjDownOf(line);\n\t}\n\tlineErrorOfput(line, err);\n\tedgeXValueOfput(line, x);\n}\n\n\n/*\tInitialize the current entry in the GET by stepping to the current scan line */\n\nfunction stepToNextWideBezier() {\n\tstepToNextWideBezierInat(aetBuffer[aetStartGet()], currentYGet());\n}\n\n\n/*\tIncrementally step to the next scan line in the given wide bezier */\n\nfunction stepToNextWideBezierInat(bezier, yValue) {\n\tvar lineOffset;\n\tvar lineWidth;\n\tvar yEntry;\n\tvar yExit;\n\n\n\t/* Don't inline this */\n\n\tlineWidth = wideBezierExtentOf(bezier);\n\tlineOffset = offsetFromWidth(lineWidth);\n\tyEntry = wideBezierEntryOf(bezier) + 1;\n\tyExit = wideBezierExitOf(bezier) + 1;\n\twideBezierEntryOfput(bezier, yEntry);\n\twideBezierExitOfput(bezier, yExit);\n\tif (yEntry >= lineOffset) {\n\t\tedgeFillsValidate(bezier);\n\t}\n\tif (yExit >= 0) {\n\t\tedgeFillsInvalidate(bezier);\n\t}\n\tif ((yExit + lineOffset) < 0) {\n\t\tstepToNextBezierForwardat(bezierUpdateDataOf(bezier), yValue);\n\t} else {\n\n\t\t/* Adjust the last x value to the final x recorded previously */\n\n\t\tbezierUpdateDataOf(bezier)[GBUpdateX] = (bezierFinalXOf(bezier) * 256);\n\t}\n\tstepToNextBezierForwardat(wideBezierUpdateDataOf(bezier), yValue);\n\tcomputeFinalWideBezierValueswidth(bezier, lineWidth);\n}\n\n\n/*\tProcess the current entry in the AET by stepping to the next scan line */\n\nfunction stepToNextWideLine() {\n\treturn stepToNextWideLineInat(aetBuffer[aetStartGet()], currentYGet());\n}\n\n\n/*\tIncrementally step to the next scan line in the given wide line */\n\nfunction stepToNextWideLineInat(line, yValue) {\n\tvar lastX;\n\tvar lineOffset;\n\tvar lineWidth;\n\tvar nextX;\n\tvar yEntry;\n\tvar yExit;\n\n\n\t/* Adjust entry/exit values */\n\n\tyEntry = wideLineEntryOf(line) + 1;\n\tyExit = wideLineExitOf(line) + 1;\n\twideLineEntryOfput(line, yEntry);\n\twideLineExitOfput(line, yExit);\n\tlineWidth = wideLineExtentOf(line);\n\tlineOffset = offsetFromWidth(lineWidth);\n\tif (yEntry >= lineOffset) {\n\t\tedgeFillsValidate(line);\n\t}\n\tif (yExit >= 0) {\n\t\tedgeFillsInvalidate(line);\n\t}\n\tlastX = edgeXValueOf(line);\n\tstepToNextLineInat(line, yValue);\n\n\t/* Check for special start/end adjustments */\n\n\tnextX = edgeXValueOf(line);\n\tif ((yEntry <= lineWidth) || ((yExit + lineOffset) >= 0)) {\n\n\t\t/* Yes, need an update */\n\n\t\tadjustWideLineafterSteppingFromto(line, lastX, nextX);\n\t}\n}\n\nfunction stopBecauseOf(stopReason) {\n\tstopReasonPut(stopReason);\n\tengineStopped = true;\n}\n\nfunction stopReasonGet() {\n\treturn workBuffer[GWStopReason];\n}\n\nfunction stopReasonPut(value) {\n\treturn workBuffer[GWStopReason] = value;\n}\n\nfunction storeEdgeStateFrominto(edge, edgeOop) {\n\tif (SIZEOF(edgeOop) < ETBalloonEdgeDataSize) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tinterpreterProxy.storeIntegerofObjectwithValue(ETIndexIndex, edgeOop, objectIndexOf(edge));\n\tinterpreterProxy.storeIntegerofObjectwithValue(ETXValueIndex, edgeOop, edgeXValueOf(edge));\n\tinterpreterProxy.storeIntegerofObjectwithValue(ETYValueIndex, edgeOop, currentYGet());\n\tinterpreterProxy.storeIntegerofObjectwithValue(ETZValueIndex, edgeOop, edgeZValueOf(edge));\n\tinterpreterProxy.storeIntegerofObjectwithValue(ETLinesIndex, edgeOop, edgeNumLinesOf(edge));\n\tlastExportedEdgePut(edge);\n}\n\nfunction storeEngineStateInto(oop) {\n\tobjUsedPut(objUsed);\n}\n\nfunction storeFillStateInto(fillOop) {\n\tvar fillIndex;\n\tvar leftX;\n\tvar rightX;\n\n\tfillIndex = lastExportedFillGet();\n\tleftX = lastExportedLeftXGet();\n\trightX = lastExportedRightXGet();\n\tif (SIZEOF(fillOop) < FTBalloonFillDataSize) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tinterpreterProxy.storeIntegerofObjectwithValue(FTIndexIndex, fillOop, objectIndexOf(fillIndex));\n\tinterpreterProxy.storeIntegerofObjectwithValue(FTMinXIndex, fillOop, leftX);\n\tinterpreterProxy.storeIntegerofObjectwithValue(FTMaxXIndex, fillOop, rightX);\n\tinterpreterProxy.storeIntegerofObjectwithValue(FTYValueIndex, fillOop, currentYGet());\n}\n\nfunction storeRenderingState() {\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (engineStopped) {\n\n\t\t/* Check the stop reason and store the required information */\n\n\t\tstoreStopStateIntoEdgefill(interpreterProxy.stackObjectValue(1), interpreterProxy.stackObjectValue(0));\n\t}\n\tstoreEngineStateInto(engine);\n\tinterpreterProxy.pop(3);\n\tinterpreterProxy.pushInteger(stopReasonGet());\n}\n\nfunction storeStopStateIntoEdgefill(edgeOop, fillOop) {\n\tvar edge;\n\tvar reason;\n\n\treason = stopReasonGet();\n\tif (reason === GErrorGETEntry) {\n\t\tedge = getBuffer[getStartGet()];\n\t\tstoreEdgeStateFrominto(edge, edgeOop);\n\t\tgetStartPut(getStartGet() + 1);\n\t}\n\tif (reason === GErrorFillEntry) {\n\t\tstoreFillStateInto(fillOop);\n\t}\n\tif (reason === GErrorAETEntry) {\n\t\tedge = aetBuffer[aetStartGet()];\n\t\tstoreEdgeStateFrominto(edge, edgeOop);\n\t}\n}\n\n\n/*\tSubdivide the given bezier curve if necessary */\n\nfunction subdivideBezier(index) {\n\tvar deltaX;\n\tvar deltaY;\n\tvar endX;\n\tvar endY;\n\tvar startX;\n\tvar startY;\n\n\tstartY = bzStartY(index);\n\n\t/* If the receiver is horizontal, don't do anything */\n\n\tendY = bzEndY(index);\n\tif (endY === startY) {\n\t\treturn index;\n\t}\n\tdeltaY = endY - startY;\n\tif (deltaY < 0) {\n\t\tdeltaY = 0 - deltaY;\n\t}\n\tif (deltaY > 255) {\n\t\tincrementStatby(GWBezierHeightSubdivisions, 1);\n\t\treturn computeBezierSplitAtHalf(index);\n\t}\n\tstartX = bzStartX(index);\n\tendX = bzEndX(index);\n\tdeltaX = endX - startX;\n\tif (deltaX < 0) {\n\t\tdeltaX = 0 - deltaX;\n\t}\n\tif ((deltaY * 32) < deltaX) {\n\t\tincrementStatby(GWBezierOverflowSubdivisions, 1);\n\t\treturn computeBezierSplitAtHalf(index);\n\t}\n\treturn index;\n}\n\n\n/*\tRecursively subdivide the curve on the bezier stack. */\n\nfunction subdivideBezierFrom(index) {\n\tvar index1;\n\tvar index2;\n\tvar otherIndex;\n\n\totherIndex = subdivideBezier(index);\n\tif (otherIndex !== index) {\n\t\tindex1 = subdivideBezierFrom(index);\n\t\tif (engineStopped) {\n\t\t\treturn 0;\n\t\t}\n\t\tindex2 = subdivideBezierFrom(otherIndex);\n\t\tif (engineStopped) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (index1 >= index2) {\n\t\t\treturn index1;\n\t\t} else {\n\t\t\treturn index2;\n\t\t}\n\t}\n\treturn index;\n}\n\n\n/*\tCheck if the given bezier curve is monoton in Y, and, if desired in X. \n\tIf not, subdivide it */\n\nfunction subdivideToBeMonotoninX(base, doTestX) {\n\tvar base2;\n\tvar index1;\n\tvar index2;\n\n\tbase2 = (index1 = (index2 = subdivideToBeMonotonInY(base)));\n\tif (doTestX) {\n\t\tindex1 = subdivideToBeMonotonInX(base);\n\t}\n\tif (index1 > index2) {\n\t\tindex2 = index1;\n\t}\n\tif ((base !== base2) && (doTestX)) {\n\t\tindex1 = subdivideToBeMonotonInX(base2);\n\t}\n\tif (index1 > index2) {\n\t\tindex2 = index1;\n\t}\n\treturn index2;\n}\n\n\n/*\tCheck if the given bezier curve is monoton in X. If not, subdivide it */\n\nfunction subdivideToBeMonotonInX(index) {\n\tvar denom;\n\tvar dx1;\n\tvar dx2;\n\tvar endX;\n\tvar num;\n\tvar startX;\n\tvar viaX;\n\n\tstartX = bzStartX(index);\n\tviaX = bzViaX(index);\n\tendX = bzEndX(index);\n\tdx1 = viaX - startX;\n\tdx2 = endX - viaX;\n\tif ((dx1 * dx2) >= 0) {\n\t\treturn index;\n\t}\n\tincrementStatby(GWBezierMonotonSubdivisions, 1);\n\tdenom = dx2 - dx1;\n\tnum = dx1;\n\tif (num < 0) {\n\t\tnum = 0 - num;\n\t}\n\tif (denom < 0) {\n\t\tdenom = 0 - denom;\n\t}\n\treturn computeBeziersplitAt(index, num / denom);\n}\n\n\n/*\tCheck if the given bezier curve is monoton in Y. If not, subdivide it */\n\nfunction subdivideToBeMonotonInY(index) {\n\tvar denom;\n\tvar dy1;\n\tvar dy2;\n\tvar endY;\n\tvar num;\n\tvar startY;\n\tvar viaY;\n\n\tstartY = bzStartY(index);\n\tviaY = bzViaY(index);\n\tendY = bzEndY(index);\n\tdy1 = viaY - startY;\n\tdy2 = endY - viaY;\n\tif ((dy1 * dy2) >= 0) {\n\t\treturn index;\n\t}\n\tincrementStatby(GWBezierMonotonSubdivisions, 1);\n\tdenom = dy2 - dy1;\n\tnum = dy1;\n\tif (num < 0) {\n\t\tnum = 0 - num;\n\t}\n\tif (denom < 0) {\n\t\tdenom = 0 - denom;\n\t}\n\treturn computeBeziersplitAt(index, num / denom);\n}\n\n\n/*\tMake the fill style with the given index either visible or invisible */\n\nfunction toggleFilldepthrightX(fillIndex, depth, rightX) {\n\tvar hidden;\n\n\tif (stackFillSize() === 0) {\n\t\tif (allocateStackFillEntry()) {\n\t\t\ttopFillValuePut(fillIndex);\n\t\t\ttopFillDepthPut(depth);\n\t\t\ttopFillRightXPut(rightX);\n\t\t}\n\t} else {\n\t\thidden = hideFilldepth(fillIndex, depth);\n\t\tif (!hidden) {\n\t\t\tshowFilldepthrightX(fillIndex, depth, rightX);\n\t\t}\n\t}\n}\n\nfunction toggleFillsOf(edge) {\n\tvar depth;\n\tvar fillIndex;\n\n\tif (!needAvailableSpace(stackFillEntryLength() * 2)) {\n\t\treturn null;\n\t}\n\tdepth = edgeZValueOf(edge) << 1;\n\tfillIndex = edgeLeftFillOf(edge);\n\tif (fillIndex !== 0) {\n\t\ttoggleFilldepthrightX(fillIndex, depth, 999999999);\n\t}\n\tfillIndex = edgeRightFillOf(edge);\n\tif (fillIndex !== 0) {\n\t\ttoggleFilldepthrightX(fillIndex, depth, 999999999);\n\t}\n\tquickRemoveInvalidFillsAt(edgeXValueOf(edge));\n}\n\nfunction toggleWideFillOf(edge) {\n\tvar depth;\n\tvar fill;\n\tvar index;\n\tvar lineWidth;\n\tvar rightX;\n\tvar type;\n\n\ttype = edgeTypeOf(edge);\n\tdispatchedValue = edge;\n\tswitch (type) {\n\tcase 0:\n\tcase 1:\n\t\terrorWrongIndex();\n\t\tbreak;\n\tcase 2:\n\t\treturnWideLineWidth();\n\t\tbreak;\n\tcase 3:\n\t\treturnWideBezierWidth();\n\t\tbreak;\n\t}\n\tlineWidth = dispatchReturnValue;\n\tswitch (type) {\n\tcase 0:\n\tcase 1:\n\t\terrorWrongIndex();\n\t\tbreak;\n\tcase 2:\n\t\treturnWideLineFill();\n\t\tbreak;\n\tcase 3:\n\t\treturnWideBezierFill();\n\t\tbreak;\n\t}\n\tfill = dispatchReturnValue;\n\tif (fill === 0) {\n\t\treturn null;\n\t}\n\tif (!needAvailableSpace(stackFillEntryLength())) {\n\t\treturn null;\n\t}\n\n\t/* So lines sort before interior fills */\n\n\tdepth = (edgeZValueOf(edge) << 1) + 1;\n\trightX = edgeXValueOf(edge) + lineWidth;\n\tindex = findStackFilldepth(fill, depth);\n\tif (index === -1) {\n\t\tshowFilldepthrightX(fill, depth, rightX);\n\t} else {\n\t\tif (stackFillRightX(index) < rightX) {\n\t\t\tstackFillRightXput(index, rightX);\n\t\t}\n\t}\n\tquickRemoveInvalidFillsAt(edgeXValueOf(edge));\n}\n\nfunction topDepth() {\n\tif (stackFillSize() === 0) {\n\t\treturn -1;\n\t} else {\n\t\treturn topFillDepth();\n\t}\n}\n\nfunction topFill() {\n\tif (stackFillSize() === 0) {\n\t\treturn 0;\n\t} else {\n\t\treturn topFillValue();\n\t}\n}\n\nfunction topFillDepth() {\n\treturn stackFillDepth(stackFillSize() - stackFillEntryLength());\n}\n\nfunction topFillDepthPut(value) {\n\treturn stackFillDepthput(stackFillSize() - stackFillEntryLength(), value);\n}\n\nfunction topFillRightX() {\n\treturn stackFillRightX(stackFillSize() - stackFillEntryLength());\n}\n\nfunction topFillRightXPut(value) {\n\treturn stackFillRightXput(stackFillSize() - stackFillEntryLength(), value);\n}\n\nfunction topFillValue() {\n\treturn stackFillValue(stackFillSize() - stackFillEntryLength());\n}\n\nfunction topFillValuePut(value) {\n\treturn stackFillValueput(stackFillSize() - stackFillEntryLength(), value);\n}\n\nfunction topRightX() {\n\tif (stackFillSize() === 0) {\n\t\treturn 999999999;\n\t} else {\n\t\treturn topFillRightX();\n\t}\n}\n\nfunction transformColor(fillIndex) {\n\tvar a;\n\tvar alphaScale;\n\tvar b;\n\tvar g;\n\tvar r;\n\tvar transform;\n\n\tif (!((fillIndex === 0) || (isFillColor(fillIndex)))) {\n\t\treturn fillIndex;\n\t}\n\tb = fillIndex & 255;\n\tg = (fillIndex >>> 8) & 255;\n\tr = (fillIndex >>> 16) & 255;\n\ta = (fillIndex >>> 24) & 255;\n\tif (hasColorTransform()) {\n\t\ttransform = colorTransform();\n\t\talphaScale = ((a * transform[6]) + transform[7]) / a;\n\t\tr = ((((r * transform[0]) + transform[1]) * alphaScale)|0);\n\t\tg = ((((g * transform[2]) + transform[3]) * alphaScale)|0);\n\t\tb = ((((b * transform[4]) + transform[5]) * alphaScale)|0);\n\t\ta = a * alphaScale|0;\n\t\tr = Math.max(r, 0);\n\t\tr = Math.min(r, 255);\n\t\tg = Math.max(g, 0);\n\t\tg = Math.min(g, 255);\n\t\tb = Math.max(b, 0);\n\t\tb = Math.min(b, 255);\n\t\ta = Math.max(a, 0);\n\t\ta = Math.min(a, 255);\n\t}\n\tif (a < 1) {\n\t\treturn 0;\n\t}\n\tif ((a < 255) && (needsFlush())) {\n\t\tstopBecauseOf(GErrorNeedFlush);\n\t}\n\treturn ((b + (g << 8)) + (r << 16)) + (a << 24);\n}\n\n\n/*\tTransform the given point. If haveMatrix is true then use the current transformation. */\n\nfunction transformPoint(point) {\n\tif (hasEdgeTransform()) {\n\n\t\t/* Note: AA adjustment is done in #transformPoint: for higher accuracy */\n\n\t\ttransformPointinto(point, point);\n\t} else {\n\n\t\t/* Multiply each component by aaLevel and add a half pixel */\n\n\t\tpoint[0] = ((point[0] + destOffsetXGet()) * aaLevelGet());\n\t\tpoint[1] = ((point[1] + destOffsetYGet()) * aaLevelGet());\n\t}\n}\n\n\n/*\tTransform srcPoint into dstPoint by using the currently loaded matrix */\n/*\tNote: This method has been rewritten so that inlining works (e.g., removing\n\tthe declarations and adding argument coercions at the appropriate points) */\n\nfunction transformPointinto(srcPoint, dstPoint) {\n\ttransformPointXyinto((srcPoint[0]|0), (srcPoint[1]|0), dstPoint);\n}\n\n\n/*\tTransform srcPoint into dstPoint by using the currently loaded matrix */\n/*\tNote: This should be rewritten so that inlining works (e.g., removing\n\tthe declarations and adding argument coercions at the appropriate points) */\n\nfunction transformPointXyinto(xValue, yValue, dstPoint) {\n\tvar transform;\n\tvar x;\n\tvar y;\n\n\ttransform = edgeTransform();\n\tx = (((((transform[0] * xValue) + (transform[1] * yValue)) + transform[2]) * aaLevelGet())|0);\n\ty = (((((transform[3] * xValue) + (transform[4] * yValue)) + transform[5]) * aaLevelGet())|0);\n\tdstPoint[0] = x;\n\tdstPoint[1] = y;\n}\n\n\n/*\tTransform n (n=1,2,3) points.\n\tIf haveMatrix is true then the matrix contains the actual transformation. */\n\nfunction transformPoints(n) {\n\tif (n > 0) {\n\t\ttransformPoint(point1Get());\n\t}\n\tif (n > 1) {\n\t\ttransformPoint(point2Get());\n\t}\n\tif (n > 2) {\n\t\ttransformPoint(point3Get());\n\t}\n\tif (n > 3) {\n\t\ttransformPoint(point4Get());\n\t}\n}\n\n\n/*\tTransform the given width */\n\nfunction transformWidth(w) {\n\tvar deltaX;\n\tvar deltaY;\n\tvar dstWidth;\n\tvar dstWidth2;\n\n\tif (w === 0) {\n\t\treturn 0;\n\t}\n\tpoint1Get()[0] = 0;\n\tpoint1Get()[1] = 0;\n\tpoint2Get()[0] = (w * 256);\n\tpoint2Get()[1] = 0;\n\tpoint3Get()[0] = 0;\n\tpoint3Get()[1] = (w * 256);\n\ttransformPoints(3);\n\tdeltaX = (point2Get()[0] - point1Get()[0]);\n\tdeltaY = (point2Get()[1] - point1Get()[1]);\n\tdstWidth = ((Math.sqrt((deltaX * deltaX) + (deltaY * deltaY))|0) + 128) >> 8;\n\tdeltaX = (point3Get()[0] - point1Get()[0]);\n\tdeltaY = (point3Get()[1] - point1Get()[1]);\n\tdstWidth2 = ((Math.sqrt((deltaX * deltaX) + (deltaY * deltaY))|0) + 128) >> 8;\n\tif (dstWidth2 < dstWidth) {\n\t\tdstWidth = dstWidth2;\n\t}\n\tif (dstWidth === 0) {\n\t\treturn 1;\n\t} else {\n\t\treturn dstWidth;\n\t}\n}\n\nfunction uncheckedTransformColor(fillIndex) {\n\tvar a;\n\tvar b;\n\tvar g;\n\tvar r;\n\tvar transform;\n\n\tif (!hasColorTransform()) {\n\t\treturn fillIndex;\n\t}\n\tb = fillIndex & 255;\n\tg = (fillIndex >>> 8) & 255;\n\tr = (fillIndex >>> 16) & 255;\n\ta = (fillIndex >>> 24) & 255;\n\ttransform = colorTransform();\n\tr = (((r * transform[0]) + transform[1])|0);\n\tg = (((g * transform[2]) + transform[3])|0);\n\tb = (((b * transform[4]) + transform[5])|0);\n\ta = (((a * transform[6]) + transform[7])|0);\n\tr = Math.max(r, 0);\n\tr = Math.min(r, 255);\n\tg = Math.max(g, 0);\n\tg = Math.min(g, 255);\n\tb = Math.max(b, 0);\n\tb = Math.min(b, 255);\n\ta = Math.max(a, 0);\n\ta = Math.min(a, 255);\n\tif (a < 16) {\n\t\treturn 0;\n\t}\n\treturn ((b + (g << 8)) + (r << 16)) + (a << 24);\n}\n\nfunction wbSizeGet() {\n\treturn workBuffer[GWSize];\n}\n\nfunction wbSizePut(value) {\n\treturn workBuffer[GWSize] = value;\n}\n\nfunction wbStackClear() {\n\twbTopPut(wbSizeGet());\n}\n\nfunction wbStackPop(nItems) {\n\twbTopPut(wbTopGet() + nItems);\n}\n\nfunction wbStackPush(nItems) {\n\tif (!allocateStackEntry(nItems)) {\n\t\treturn false;\n\t}\n\twbTopPut(wbTopGet() - nItems);\n\treturn true;\n}\n\nfunction wbStackSize() {\n\treturn wbSizeGet() - wbTopGet();\n}\n\nfunction wbStackValue(index) {\n\treturn workBuffer[wbTopGet() + index];\n}\n\nfunction wbStackValueput(index, value) {\n\treturn workBuffer[wbTopGet() + index] = value;\n}\n\nfunction wbTopGet() {\n\treturn workBuffer[GWBufferTop];\n}\n\nfunction wbTopPut(value) {\n\treturn workBuffer[GWBufferTop] = value;\n}\n\nfunction wideBezierEntryOf(line) {\n\treturn objat(line, GBWideEntry);\n}\n\nfunction wideBezierEntryOfput(line, value) {\n\treturn objatput(line, GBWideEntry, value);\n}\n\nfunction wideBezierExitOf(line) {\n\treturn objat(line, GBWideExit);\n}\n\nfunction wideBezierExitOfput(line, value) {\n\treturn objatput(line, GBWideExit, value);\n}\n\nfunction wideBezierExtentOf(bezier) {\n\treturn objat(bezier, GBWideExtent);\n}\n\nfunction wideBezierExtentOfput(bezier, value) {\n\treturn objatput(bezier, GBWideExtent, value);\n}\n\nfunction wideBezierFillOf(bezier) {\n\treturn objat(bezier, GBWideFill);\n}\n\nfunction wideBezierFillOfput(bezier, value) {\n\treturn objatput(bezier, GBWideFill, value);\n}\n\nfunction wideBezierUpdateDataOf(bezier) {\n\treturn PTR_ADD(objBuffer, bezier + GBWideUpdateData);\n}\n\nfunction wideBezierWidthOf(line) {\n\treturn objat(line, GBWideWidth);\n}\n\nfunction wideBezierWidthOfput(line, value) {\n\treturn objatput(line, GBWideWidth, value);\n}\n\nfunction wideLineEntryOf(line) {\n\treturn objat(line, GLWideEntry);\n}\n\nfunction wideLineEntryOfput(line, value) {\n\treturn objatput(line, GLWideEntry, value);\n}\n\nfunction wideLineExitOf(line) {\n\treturn objat(line, GLWideExit);\n}\n\nfunction wideLineExitOfput(line, value) {\n\treturn objatput(line, GLWideExit, value);\n}\n\nfunction wideLineExtentOf(line) {\n\treturn objat(line, GLWideExtent);\n}\n\nfunction wideLineExtentOfput(line, value) {\n\treturn objatput(line, GLWideExtent, value);\n}\n\nfunction wideLineFillOf(line) {\n\treturn objat(line, GLWideFill);\n}\n\nfunction wideLineFillOfput(line, value) {\n\treturn objatput(line, GLWideFill, value);\n}\n\nfunction wideLineWidthOf(line) {\n\treturn objat(line, GLWideWidth);\n}\n\nfunction wideLineWidthOfput(line, value) {\n\treturn objatput(line, GLWideWidth, value);\n}\n\nfunction workBufferPut(wbOop) {\n\tworkBuffer = wbOop.wordsAsInt32Array();\n}\n\n\nSqueak.registerExternalModule(\"B2DPlugin\", {\n\tprimitiveMergeFillFrom: primitiveMergeFillFrom,\n\tprimitiveCopyBuffer: primitiveCopyBuffer,\n\tprimitiveAddRect: primitiveAddRect,\n\tprimitiveAddGradientFill: primitiveAddGradientFill,\n\tprimitiveSetClipRect: primitiveSetClipRect,\n\tinitialiseModule: initialiseModule,\n\tprimitiveSetBitBltPlugin: primitiveSetBitBltPlugin,\n\tprimitiveRegisterExternalEdge: primitiveRegisterExternalEdge,\n\tprimitiveGetClipRect: primitiveGetClipRect,\n\tprimitiveAddBezier: primitiveAddBezier,\n\tprimitiveInitializeProcessing: primitiveInitializeProcessing,\n\tprimitiveRenderImage: primitiveRenderImage,\n\tprimitiveGetOffset: primitiveGetOffset,\n\tprimitiveSetDepth: primitiveSetDepth,\n\tprimitiveAddBezierShape: primitiveAddBezierShape,\n\tprimitiveSetEdgeTransform: primitiveSetEdgeTransform,\n\tgetModuleName: getModuleName,\n\tprimitiveGetTimes: primitiveGetTimes,\n\tprimitiveNextActiveEdgeEntry: primitiveNextActiveEdgeEntry,\n\tprimitiveAddBitmapFill: primitiveAddBitmapFill,\n\tprimitiveGetDepth: primitiveGetDepth,\n\tprimitiveAbortProcessing: primitiveAbortProcessing,\n\tprimitiveNextGlobalEdgeEntry: primitiveNextGlobalEdgeEntry,\n\tprimitiveGetFailureReason: primitiveGetFailureReason,\n\tprimitiveDisplaySpanBuffer: primitiveDisplaySpanBuffer,\n\tmoduleUnloaded: moduleUnloaded,\n\tprimitiveGetCounts: primitiveGetCounts,\n\tprimitiveChangedActiveEdgeEntry: primitiveChangedActiveEdgeEntry,\n\tprimitiveRenderScanline: primitiveRenderScanline,\n\tprimitiveGetBezierStats: primitiveGetBezierStats,\n\tprimitiveFinishedProcessing: primitiveFinishedProcessing,\n\tsetInterpreter: setInterpreter,\n\tprimitiveNeedsFlush: primitiveNeedsFlush,\n\tprimitiveAddLine: primitiveAddLine,\n\tprimitiveSetOffset: primitiveSetOffset,\n\tprimitiveNextFillEntry: primitiveNextFillEntry,\n\tprimitiveInitializeBuffer: primitiveInitializeBuffer,\n\tprimitiveDoProfileStats: primitiveDoProfileStats,\n\tprimitiveAddActiveEdgeEntry: primitiveAddActiveEdgeEntry,\n\tprimitiveSetAALevel: primitiveSetAALevel,\n\tprimitiveNeedsFlushPut: primitiveNeedsFlushPut,\n\tprimitiveAddCompressedShape: primitiveAddCompressedShape,\n\tprimitiveSetColorTransform: primitiveSetColorTransform,\n\tprimitiveAddOval: primitiveAddOval,\n\tprimitiveRegisterExternalFill: primitiveRegisterExternalFill,\n\tprimitiveAddPolygon: primitiveAddPolygon,\n\tprimitiveGetAALevel: primitiveGetAALevel,\n});\n\n}); // end of module\n","/* Smalltalk from Squeak4.5 with VMMaker 4.13.6 translated as JS source on 3 November 2014 1:52:20 pm */\n/* Automatically generated by\n\tJSSmartSyntaxPluginCodeGenerator VMMakerJS-bf.15 uuid: fd4e10f2-3773-4e80-8bb5-c4b471a014e5\n   from\n\tBitBltSimulation VMMaker-bf.353 uuid: 8ae25e7e-8d2c-451e-8277-598b30e9c002\n */\n\nmodule(\"users.bert.SqueakJS.plugins.BitBltPlugin\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";\n\nvar VM_PROXY_MAJOR = 1;\nvar VM_PROXY_MINOR = 11;\n\n/*** Functions ***/\nfunction CLASSOF(obj) { return typeof obj === \"number\" ? interpreterProxy.classSmallInteger() : obj.sqClass }\nfunction SIZEOF(obj) { return obj.pointers ? obj.pointers.length : obj.words ? obj.words.length : obj.bytes ? obj.bytes.length : 0 }\nfunction BYTESIZEOF(obj) { return obj.bytes ? obj.bytes.length : obj.words ? obj.words.length * 4 : 0 }\nfunction DIV(a, b) { return Math.floor(a / b) | 0; }   // integer division\nfunction MOD(a, b) { return a - DIV(a, b) * b | 0; }   // signed modulus\nfunction SHL(a, b) { return b > 31 ? 0 : a << b; }     // fix JS shift\nfunction SHR(a, b) { return b > 31 ? 0 : a >>> b; }    // fix JS shift\nfunction SHIFT(a, b) { return b < 0 ? (b < -31 ? 0 : a >>> (0-b) ) : (b > 31 ? 0 : a << b); }\n\n/*** Constants ***/\nvar AllOnes = 4294967295;\nvar AlphaIndex = 3;\nvar BBClipHeightIndex = 13;\nvar BBClipWidthIndex = 12;\nvar BBClipXIndex = 10;\nvar BBClipYIndex = 11;\nvar BBColorMapIndex = 14;\nvar BBDestFormIndex = 0;\nvar BBDestXIndex = 4;\nvar BBDestYIndex = 5;\nvar BBHalftoneFormIndex = 2;\nvar BBHeightIndex = 7;\nvar BBRuleIndex = 3;\nvar BBSourceFormIndex = 1;\nvar BBSourceXIndex = 8;\nvar BBSourceYIndex = 9;\nvar BBWarpBase = 15;\nvar BBWidthIndex = 6;\nvar BinaryPoint = 14;\nvar BlueIndex = 2;\nvar ColorMapFixedPart = 2;\nvar ColorMapIndexedPart = 4;\nvar ColorMapNewStyle = 8;\nvar ColorMapPresent = 1;\nvar FixedPt1 = 16384;\nvar FormBitsIndex = 0;\nvar FormDepthIndex = 3;\nvar FormHeightIndex = 2;\nvar FormWidthIndex = 1;\nvar GreenIndex = 1;\nvar OpTableSize = 43;\nvar RedIndex = 0;\n\n/*** Variables ***/\nvar affectedB = 0;\nvar affectedL = 0;\nvar affectedR = 0;\nvar affectedT = 0;\nvar bbH = 0;\nvar bbW = 0;\nvar bitBltOop = 0;\nvar bitCount = 0;\nvar clipHeight = 0;\nvar clipWidth = 0;\nvar clipX = 0;\nvar clipY = 0;\nvar cmBitsPerColor = 0;\nvar cmFlags = 0;\nvar cmLookupTable = null;\nvar cmMask = 0;\nvar cmMaskTable = null;\nvar cmShiftTable = null;\nvar combinationRule = 0;\nvar componentAlphaModeAlpha = 0;\nvar componentAlphaModeColor = 0;\nvar destBits = 0;\nvar destDelta = 0;\nvar destDepth = 0;\nvar destForm = 0;\nvar destHeight = 0;\nvar destIndex = 0;\nvar destMSB = 0;\nvar destMask = 0;\nvar destPPW = 0;\nvar destPitch = 0;\nvar destWidth = 0;\nvar destX = 0;\nvar destY = 0;\nvar dither8Lookup = new Array(4096);\nvar ditherMatrix4x4 = [\n0,\t8,\t2,\t10,\n12,\t4,\t14,\t6,\n3,\t11,\t1,\t9,\n15,\t7,\t13,\t5\n];\nvar ditherThresholds16 = [ 0, 2, 4, 6, 8, 12, 14, 16 ];\nvar ditherValues16 = [\n0, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14,\n15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30\n];\nvar dstBitShift = 0;\nvar dx = 0;\nvar dy = 0;\nvar gammaLookupTable = null;\nvar hDir = 0;\nvar halftoneBase = 0;\nvar halftoneForm = 0;\nvar halftoneHeight = 0;\nvar hasSurfaceLock = 0;\nvar height = 0;\nvar interpreterProxy = null;\nvar isWarping = 0;\nvar lockSurfaceFn = null;\nvar mask1 = 0;\nvar mask2 = 0;\nvar maskTable = [\n0, 1, 3, 0, 15, 31, 0, 0, 255, 0, 0, 0, 0, 0, 0, 0, 65535,\n0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1\n];\nvar moduleName = \"BitBltPlugin 3 November 2014 (e)\";\nvar nWords = 0;\nvar noHalftone = 0;\nvar noSource = 0;\nvar opTable = new Array(43);\nvar preload = 0;\nvar querySurfaceFn = null;\nvar skew = 0;\nvar sourceAlpha = 0;\nvar sourceBits = 0;\nvar sourceDelta = 0;\nvar sourceDepth = 0;\nvar sourceForm = 0;\nvar sourceHeight = 0;\nvar sourceIndex = 0;\nvar sourceMSB = 0;\nvar sourcePPW = 0;\nvar sourcePitch = 0;\nvar sourceWidth = 0;\nvar sourceX = 0;\nvar sourceY = 0;\nvar srcBitShift = 0;\nvar sx = 0;\nvar sy = 0;\nvar ungammaLookupTable = null;\nvar unlockSurfaceFn = null;\nvar vDir = 0;\nvar warpAlignMask = 0;\nvar warpAlignShift = 0;\nvar warpBitShiftTable = new Array(32);\nvar warpSrcMask = 0;\nvar warpSrcShift = 0;\nvar width = 0;\n\n\n\n/*\tSubract the pixels in the source and destination, color by color,\n\tand return the sum of the absolute value of all the differences.\n\tFor non-rgb, XOR the two and return the number of differing pixels.\n\tNote that the region is not clipped to bit boundaries, but only to the\n\tnearest (enclosing) word.  This is because copyLoop does not do\n\tpre-merge masking.  For accurate results, you must subtract the\n\tvalues obtained from the left and right fringes. */\n\nfunction OLDrgbDiffwith(sourceWord, destinationWord) {\n\tvar diff;\n\tvar pixMask;\n\n\tif (destDepth < 16) {\n\n\t\t/* Just xor and count differing bits if not RGB */\n\n\t\tdiff = sourceWord ^ destinationWord;\n\t\tpixMask = maskTable[destDepth];\n\t\twhile (!(diff === 0)) {\n\t\t\tif ((diff & pixMask) !== 0) {\n\t\t\t\t++bitCount;\n\t\t\t}\n\t\t\tdiff = SHR(diff, destDepth);\n\t\t}\n\t\treturn destinationWord;\n\t}\n\tif (destDepth === 16) {\n\t\tdiff = partitionedSubfromnBitsnPartitions(sourceWord, destinationWord, 5, 3);\n\t\tbitCount = ((bitCount + (diff & 31)) + ((diff >>> 5) & 31)) + ((diff >>> 10) & 31);\n\t\tdiff = partitionedSubfromnBitsnPartitions(sourceWord >>> 16, destinationWord >>> 16, 5, 3);\n\t\tbitCount = ((bitCount + (diff & 31)) + ((diff >>> 5) & 31)) + ((diff >>> 10) & 31);\n\t} else {\n\t\tdiff = partitionedSubfromnBitsnPartitions(sourceWord, destinationWord, 8, 3);\n\t\tbitCount = ((bitCount + (diff & 255)) + ((diff >>> 8) & 255)) + ((diff >>> 16) & 255);\n\t}\n\treturn destinationWord;\n}\n\n\n/*\tTally pixels into the color map.  Note that the source should be \n\tspecified = destination, in order for the proper color map checks \n\tto be performed at setup.\n\tNote that the region is not clipped to bit boundaries, but only to the\n\tnearest (enclosing) word.  This is because copyLoop does not do\n\tpre-merge masking.  For accurate results, you must subtract the\n\tvalues obtained from the left and right fringes. */\n\nfunction OLDtallyIntoMapwith(sourceWord, destinationWord) {\n\tvar pixMask;\n\tvar mapIndex;\n\tvar i;\n\tvar shiftWord;\n\n\tif ((cmFlags & (ColorMapPresent | ColorMapIndexedPart)) !== (ColorMapPresent | ColorMapIndexedPart)) {\n\t\treturn destinationWord;\n\t}\n\tif (destDepth < 16) {\n\n\t\t/* loop through all packed pixels. */\n\n\t\tpixMask = maskTable[destDepth] & cmMask;\n\t\tshiftWord = destinationWord;\n\t\tfor (i = 1; i <= destPPW; i++) {\n\t\t\tmapIndex = shiftWord & pixMask;\n\t\t\ttallyMapAtput(mapIndex, tallyMapAt(mapIndex) + 1);\n\t\t\tshiftWord = SHR(shiftWord, destDepth);\n\t\t}\n\t\treturn destinationWord;\n\t}\n\tif (destDepth === 16) {\n\n\t\t/* Two pixels  Tally the right half... */\n\n\t\tmapIndex = rgbMapfromto(destinationWord & 65535, 5, cmBitsPerColor);\n\t\ttallyMapAtput(mapIndex, tallyMapAt(mapIndex) + 1);\n\t\tmapIndex = rgbMapfromto(destinationWord >>> 16, 5, cmBitsPerColor);\n\t\ttallyMapAtput(mapIndex, tallyMapAt(mapIndex) + 1);\n\t} else {\n\n\t\t/* Just one pixel. */\n\n\t\tmapIndex = rgbMapfromto(destinationWord, 8, cmBitsPerColor);\n\t\ttallyMapAtput(mapIndex, tallyMapAt(mapIndex) + 1);\n\t}\n\treturn destinationWord;\n}\n\nfunction addWordwith(sourceWord, destinationWord) {\n\treturn sourceWord + destinationWord;\n}\n\n\n/*\tBlend sourceWord with destinationWord, assuming both are 32-bit pixels.\n\tThe source is assumed to have 255*alpha in the high 8 bits of each pixel,\n\twhile the high 8 bits of the destinationWord will be ignored.\n\tThe blend produced is alpha*source + (1-alpha)*dest, with\n\tthe computation being performed independently on each color\n\tcomponent.  The high byte of the result will be 0. */\n\nfunction alphaBlendwith(sourceWord, destinationWord) {\n\tvar unAlpha;\n\tvar blendRB;\n\tvar blendAG;\n\tvar result;\n\tvar alpha;\n\n\n\t/* High 8 bits of source pixel */\n\n\talpha = sourceWord >>> 24;\n\tif (alpha === 0) {\n\t\treturn destinationWord;\n\t}\n\tif (alpha === 255) {\n\t\treturn sourceWord;\n\t}\n\tunAlpha = 255 - alpha;\n\n\t/* blend red and blue */\n\n\tblendRB = (((sourceWord & 16711935) * alpha) + ((destinationWord & 16711935) * unAlpha)) + 16711935;\n\n\t/* blend alpha and green */\n\n\tblendAG = (((((sourceWord >>> 8) | 16711680) & 16711935) * alpha) + (((destinationWord >>> 8) & 16711935) * unAlpha)) + 16711935;\n\n\t/* divide by 255 */\n\n\tblendRB = ((blendRB + (((blendRB - 65537) >>> 8) & 16711935)) >>> 8) & 16711935;\n\tblendAG = ((blendAG + (((blendAG - 65537) >>> 8) & 16711935)) >>> 8) & 16711935;\n\tresult = blendRB | (blendAG << 8);\n\treturn result;\n}\n\nfunction alphaBlendConstwith(sourceWord, destinationWord) {\n\treturn alphaBlendConstwithpaintMode(sourceWord, destinationWord, false);\n}\n\n\n/*\tBlend sourceWord with destinationWord using a constant alpha.\n\tAlpha is encoded as 0 meaning 0.0, and 255 meaning 1.0.\n\tThe blend produced is alpha*source + (1.0-alpha)*dest, with the\n\tcomputation being performed independently on each color component.\n\tThis function could eventually blend into any depth destination,\n\tusing the same color averaging and mapping as warpBlt.\n\tpaintMode = true means do nothing if the source pixel value is zero. */\n/*\tThis first implementation works with dest depths of 16 and 32 bits only.\n\tNormal color mapping will allow sources of lower depths in this case,\n\tand results can be mapped directly by truncation, so no extra color maps are needed.\n\tTo allow storing into any depth will require subsequent addition of two other\n\tcolormaps, as is the case with WarpBlt. */\n\nfunction alphaBlendConstwithpaintMode(sourceWord, destinationWord, paintMode) {\n\tvar rgbMask;\n\tvar pixMask;\n\tvar pixBlend;\n\tvar j;\n\tvar sourceShifted;\n\tvar result;\n\tvar shift;\n\tvar sourcePixVal;\n\tvar i;\n\tvar unAlpha;\n\tvar destPixVal;\n\tvar blendRB;\n\tvar blendAG;\n\tvar bitsPerColor;\n\tvar blend;\n\tvar destShifted;\n\tvar maskShifted;\n\n\tif (destDepth < 16) {\n\t\treturn destinationWord;\n\t}\n\tunAlpha = 255 - sourceAlpha;\n\tresult = destinationWord;\n\tif (destPPW === 1) {\n\n\t\t/* 32bpp blends include alpha */\n\n\t\tif (!(paintMode && (sourceWord === 0))) {\n\n\t\t\t/* painting a transparent pixel */\n\n\n\t\t\t/* blendRB red and blue */\n\n\t\t\tblendRB = (((sourceWord & 16711935) * sourceAlpha) + ((destinationWord & 16711935) * unAlpha)) + 16711935;\n\n\t\t\t/* blendRB alpha and green */\n\n\t\t\tblendAG = ((((sourceWord >>> 8) & 16711935) * sourceAlpha) + (((destinationWord >>> 8) & 16711935) * unAlpha)) + 16711935;\n\n\t\t\t/* divide by 255 */\n\n\t\t\tblendRB = ((blendRB + (((blendRB - 65537) >>> 8) & 16711935)) >>> 8) & 16711935;\n\t\t\tblendAG = ((blendAG + (((blendAG - 65537) >>> 8) & 16711935)) >>> 8) & 16711935;\n\t\t\tresult = blendRB | (blendAG << 8);\n\t\t}\n\t} else {\n\t\tpixMask = maskTable[destDepth];\n\t\tbitsPerColor = 5;\n\t\trgbMask = 31;\n\t\tmaskShifted = destMask;\n\t\tdestShifted = destinationWord;\n\t\tsourceShifted = sourceWord;\n\t\tfor (j = 1; j <= destPPW; j++) {\n\t\t\tsourcePixVal = sourceShifted & pixMask;\n\t\t\tif (!(((maskShifted & pixMask) === 0) || (paintMode && (sourcePixVal === 0)))) {\n\t\t\t\tdestPixVal = destShifted & pixMask;\n\t\t\t\tpixBlend = 0;\n\t\t\t\tfor (i = 1; i <= 3; i++) {\n\t\t\t\t\tshift = (i - 1) * bitsPerColor;\n\t\t\t\t\tblend = (DIV((((((SHR(sourcePixVal, shift)) & rgbMask) * sourceAlpha) + (((SHR(destPixVal, shift)) & rgbMask) * unAlpha)) + 254), 255)) & rgbMask;\n\t\t\t\t\tpixBlend = pixBlend | (SHL(blend, shift));\n\t\t\t\t}\n\t\t\t\tresult = (result & ~(SHL(pixMask, ((j - 1) * 16)))) | (SHL(pixBlend, ((j - 1) * 16)));\n\t\t\t}\n\t\t\tmaskShifted = SHR(maskShifted, destDepth);\n\t\t\tsourceShifted = SHR(sourceShifted, destDepth);\n\t\t\tdestShifted = SHR(destShifted, destDepth);\n\t\t}\n\t}\n\treturn result;\n}\n\n\n/*\tBlend sourceWord with destinationWord using the alpha value from sourceWord.\n\tAlpha is encoded as 0 meaning 0.0, and 255 meaning 1.0.\n\tIn contrast to alphaBlend:with: the color produced is\n\n\t\tsrcColor + (1-srcAlpha) * dstColor\n\n\te.g., it is assumed that the source color is already scaled. */\n\nfunction alphaBlendScaledwith(sourceWord, destinationWord) {\n\tvar unAlpha;\n\tvar rb;\n\tvar ag;\n\n\n\t/* Do NOT inline this into optimized loops */\n\n\n\t/* High 8 bits of source pixel is source opacity (ARGB format) */\n\n\tunAlpha = 255 - (sourceWord >>> 24);\n\n\t/* blend red and blue components */\n\n\trb = ((((destinationWord & 16711935) * unAlpha) >>> 8) & 16711935) + (sourceWord & 16711935);\n\n\t/* blend alpha and green components */\n\n\tag = (((((destinationWord >>> 8) & 16711935) * unAlpha) >>> 8) & 16711935) + ((sourceWord >>> 8) & 16711935);\n\n\t/* saturate red and blue components if there is a carry */\n\n\trb = (rb & 16711935) | (((rb & 16777472) * 255) >>> 8);\n\n\t/* saturate alpha and green components if there is a carry */\n\n\tag = ((ag & 16711935) << 8) | ((ag & 16777472) * 255);\n\treturn ag | rb;\n}\n\nfunction alphaPaintConstwith(sourceWord, destinationWord) {\n\tif (sourceWord === 0) {\n\t\treturn destinationWord;\n\t}\n\treturn alphaBlendConstwithpaintMode(sourceWord, destinationWord, true);\n}\n\n\n/*\tThis version assumes \n\t\tcombinationRule = 34\n\t\tsourcePixSize = 32\n\t\tdestPixSize = 16\n\t\tsourceForm ~= destForm.\n\t */\n\nfunction alphaSourceBlendBits16() {\n\tvar ditherBase;\n\tvar ditherThreshold;\n\tvar srcShift;\n\tvar sourceWord;\n\tvar srcIndex;\n\tvar deltaX;\n\tvar dstIndex;\n\tvar srcAlpha;\n\tvar dstMask;\n\tvar deltaY;\n\tvar srcY;\n\tvar destWord;\n\tvar dstY;\n\tvar ditherIndex;\n\n\n\t/* This particular method should be optimized in itself */\n\n\n\t/* So we can pre-decrement */\n\n\tdeltaY = bbH + 1;\n\tsrcY = sy;\n\tdstY = dy;\n\tsrcShift = (dx & 1) * 16;\n\tif (destMSB) {\n\t\tsrcShift = 16 - srcShift;\n\t}\n\n\t/* This is the outer loop */\n\n\tmask1 = SHL(65535, (16 - srcShift));\n\twhile (((--deltaY)) !== 0) {\n\t\tsrcIndex = ((srcY * sourcePitch)) + (sx * 4);\n\t\tdstIndex = ((dstY * destPitch)) + ((dx >> 1) * 4);\n\t\tditherBase = (dstY & 3) * 4;\n\n\t\t/* For pre-increment */\n\n\t\tditherIndex = (sx & 3) - 1;\n\n\t\t/* So we can pre-decrement */\n\n\t\tdeltaX = bbW + 1;\n\t\tdstMask = mask1;\n\t\tif (dstMask === 65535) {\n\t\t\tsrcShift = 16;\n\t\t} else {\n\t\t\tsrcShift = 0;\n\t\t}\n\t\twhile (((--deltaX)) !== 0) {\n\t\t\tditherThreshold = ditherMatrix4x4[ditherBase + ((ditherIndex = (ditherIndex + 1) & 3))];\n\t\t\tsourceWord = sourceBits[srcIndex >>> 2];\n\t\t\tsrcAlpha = sourceWord >>> 24;\n\t\t\tif (srcAlpha === 255) {\n\n\t\t\t\t/* Dither from 32 to 16 bit */\n\n\t\t\t\tsourceWord = dither32To16threshold(sourceWord, ditherThreshold);\n\t\t\t\tif (sourceWord === 0) {\n\t\t\t\t\tsourceWord = SHL(1, srcShift);\n\t\t\t\t} else {\n\t\t\t\t\tsourceWord = SHL(sourceWord, srcShift);\n\t\t\t\t}\n\t\t\t\tdstLongAtputmask(dstIndex, sourceWord, dstMask);\n\t\t\t} else {\n\n\t\t\t\t/* srcAlpha ~= 255 */\n\n\t\t\t\tif (srcAlpha !== 0) {\n\n\t\t\t\t\t/* 0 < srcAlpha < 255 */\n\t\t\t\t\t/* If we have to mix colors then just copy a single word */\n\n\t\t\t\t\tdestWord = destBits[dstIndex >>> 2];\n\t\t\t\t\tdestWord = destWord & ~dstMask;\n\n\t\t\t\t\t/* Expand from 16 to 32 bit by adding zero bits */\n\n\t\t\t\t\tdestWord = SHR(destWord, srcShift);\n\n\t\t\t\t\t/* Mix colors */\n\n\t\t\t\t\tdestWord = (((destWord & 31744) << 9) | ((destWord & 992) << 6)) | (((destWord & 31) << 3) | 4278190080);\n\n\t\t\t\t\t/* And dither */\n\n\t\t\t\t\tsourceWord = alphaBlendScaledwith(sourceWord, destWord);\n\t\t\t\t\tsourceWord = dither32To16threshold(sourceWord, ditherThreshold);\n\t\t\t\t\tif (sourceWord === 0) {\n\t\t\t\t\t\tsourceWord = SHL(1, srcShift);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsourceWord = SHL(sourceWord, srcShift);\n\t\t\t\t\t}\n\t\t\t\t\tdstLongAtputmask(dstIndex, sourceWord, dstMask);\n\t\t\t\t}\n\t\t\t}\n\t\t\tsrcIndex += 4;\n\t\t\tif (destMSB) {\n\t\t\t\tif (srcShift === 0) {\n\t\t\t\t\tdstIndex += 4;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (srcShift !== 0) {\n\t\t\t\t\tdstIndex += 4;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* Toggle between 0 and 16 */\n\n\t\t\tsrcShift = srcShift ^ 16;\n\t\t\tdstMask = ~dstMask;\n\t\t}\n\t\t++srcY;\n\t\t++dstY;\n\t}\n}\n\n\n/*\tThis version assumes \n\t\tcombinationRule = 34\n\t\tsourcePixSize = destPixSize = 32\n\t\tsourceForm ~= destForm.\n\tNote: The inner loop has been optimized for dealing\n\t\twith the special cases of srcAlpha = 0.0 and srcAlpha = 1.0 \n\t */\n\nfunction alphaSourceBlendBits32() {\n\tvar sourceWord;\n\tvar srcIndex;\n\tvar deltaX;\n\tvar dstIndex;\n\tvar srcAlpha;\n\tvar deltaY;\n\tvar srcY;\n\tvar destWord;\n\tvar dstY;\n\n\n\t/* This particular method should be optimized in itself */\n\t/* Give the compile a couple of hints */\n\t/* The following should be declared as pointers so the compiler will\n\tnotice that they're used for accessing memory locations \n\t(good to know on an Intel architecture) but then the increments\n\twould be different between ST code and C code so must hope the\n\tcompiler notices what happens (MS Visual C does) */\n\n\n\t/* So we can pre-decrement */\n\n\tdeltaY = bbH + 1;\n\tsrcY = sy;\n\n\t/* This is the outer loop */\n\n\tdstY = dy;\n\twhile (((--deltaY)) !== 0) {\n\t\tsrcIndex = ((srcY * sourcePitch)) + (sx * 4);\n\t\tdstIndex = ((dstY * destPitch)) + (dx * 4);\n\n\t\t/* So we can pre-decrement */\n\t\t/* This is the inner loop */\n\n\t\tdeltaX = bbW + 1;\n\t\twhile (((--deltaX)) !== 0) {\n\t\t\tsourceWord = sourceBits[srcIndex >>> 2];\n\t\t\tsrcAlpha = sourceWord >>> 24;\n\t\t\tif (srcAlpha === 255) {\n\t\t\t\tdestBits[dstIndex >>> 2] = sourceWord;\n\t\t\t\tsrcIndex += 4;\n\n\t\t\t\t/* Now copy as many words as possible with alpha = 255 */\n\n\t\t\t\tdstIndex += 4;\n\t\t\t\twhile ((((--deltaX)) !== 0) && ((((sourceWord = sourceBits[srcIndex >>> 2])) >>> 24) === 255)) {\n\t\t\t\t\tdestBits[dstIndex >>> 2] = sourceWord;\n\t\t\t\t\tsrcIndex += 4;\n\t\t\t\t\tdstIndex += 4;\n\t\t\t\t}\n\t\t\t\t++deltaX;\n\t\t\t} else {\n\n\t\t\t\t/* srcAlpha ~= 255 */\n\n\t\t\t\tif (srcAlpha === 0) {\n\t\t\t\t\tsrcIndex += 4;\n\n\t\t\t\t\t/* Now skip as many words as possible, */\n\n\t\t\t\t\tdstIndex += 4;\n\t\t\t\t\twhile ((((--deltaX)) !== 0) && ((((sourceWord = sourceBits[srcIndex >>> 2])) >>> 24) === 0)) {\n\t\t\t\t\t\tsrcIndex += 4;\n\t\t\t\t\t\tdstIndex += 4;\n\t\t\t\t\t}\n\t\t\t\t\t++deltaX;\n\t\t\t\t} else {\n\n\t\t\t\t\t/* 0 < srcAlpha < 255 */\n\t\t\t\t\t/* If we have to mix colors then just copy a single word */\n\n\t\t\t\t\tdestWord = destBits[dstIndex >>> 2];\n\t\t\t\t\tdestWord = alphaBlendScaledwith(sourceWord, destWord);\n\t\t\t\t\tdestBits[dstIndex >>> 2] = destWord;\n\t\t\t\t\tsrcIndex += 4;\n\t\t\t\t\tdstIndex += 4;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t++srcY;\n\t\t++dstY;\n\t}\n}\n\n\n/*\tThis version assumes \n\t\tcombinationRule = 34\n\t\tsourcePixSize = 32\n\t\tdestPixSize = 8\n\t\tsourceForm ~= destForm.\n\tNote: This is not real blending since we don't have the source colors available.\n\t */\n\nfunction alphaSourceBlendBits8() {\n\tvar srcShift;\n\tvar sourceWord;\n\tvar srcIndex;\n\tvar deltaX;\n\tvar mappingTable;\n\tvar dstIndex;\n\tvar adjust;\n\tvar mapperFlags;\n\tvar srcAlpha;\n\tvar dstMask;\n\tvar deltaY;\n\tvar srcY;\n\tvar destWord;\n\tvar dstY;\n\n\tmappingTable = default8To32Table();\n\tmapperFlags = cmFlags & ~ColorMapNewStyle;\n\n\t/* So we can pre-decrement */\n\n\tdeltaY = bbH + 1;\n\tsrcY = sy;\n\tdstY = dy;\n\tmask1 = (dx & 3) * 8;\n\tif (destMSB) {\n\t\tmask1 = 24 - mask1;\n\t}\n\tmask2 = AllOnes ^ (SHL(255, mask1));\n\tif ((dx & 1) === 0) {\n\t\tadjust = 0;\n\t} else {\n\t\tadjust = 522133279;\n\t}\n\tif ((dy & 1) === 0) {\n\t\tadjust = adjust ^ 522133279;\n\t}\n\twhile (((--deltaY)) !== 0) {\n\t\tadjust = adjust ^ 522133279;\n\t\tsrcIndex = ((srcY * sourcePitch)) + (sx * 4);\n\t\tdstIndex = ((dstY * destPitch)) + ((dx >> 2) * 4);\n\n\t\t/* So we can pre-decrement */\n\n\t\tdeltaX = bbW + 1;\n\t\tsrcShift = mask1;\n\n\t\t/* This is the inner loop */\n\n\t\tdstMask = mask2;\n\t\twhile (((--deltaX)) !== 0) {\n\t\t\tsourceWord = (sourceBits[srcIndex >>> 2] & ~adjust) + adjust;\n\t\t\tsrcAlpha = sourceWord >>> 24;\n\t\t\tif (srcAlpha > 31) {\n\n\t\t\t\t/* Everything below 31 is transparent */\n\n\t\t\t\tif (srcAlpha < 224) {\n\n\t\t\t\t\t/* Everything above 224 is opaque */\n\n\t\t\t\t\tdestWord = destBits[dstIndex >>> 2];\n\t\t\t\t\tdestWord = destWord & ~dstMask;\n\t\t\t\t\tdestWord = SHR(destWord, srcShift);\n\t\t\t\t\tdestWord = mappingTable[destWord];\n\t\t\t\t\tsourceWord = alphaBlendScaledwith(sourceWord, destWord);\n\t\t\t\t}\n\t\t\t\tsourceWord = mapPixelflags(sourceWord, mapperFlags);\n\n\t\t\t\t/* Store back */\n\n\t\t\t\tsourceWord = SHL(sourceWord, srcShift);\n\t\t\t\tdstLongAtputmask(dstIndex, sourceWord, dstMask);\n\t\t\t}\n\t\t\tsrcIndex += 4;\n\t\t\tif (destMSB) {\n\t\t\t\tif (srcShift === 0) {\n\t\t\t\t\tdstIndex += 4;\n\t\t\t\t\tsrcShift = 24;\n\t\t\t\t\tdstMask = 16777215;\n\t\t\t\t} else {\n\t\t\t\t\tsrcShift -= 8;\n\t\t\t\t\tdstMask = (dstMask >>> 8) | 4278190080;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (srcShift === 24) {\n\t\t\t\t\tdstIndex += 4;\n\t\t\t\t\tsrcShift = 0;\n\t\t\t\t\tdstMask = 4294967040;\n\t\t\t\t} else {\n\t\t\t\t\tsrcShift += 8;\n\t\t\t\t\tdstMask = (dstMask << 8) | 255;\n\t\t\t\t}\n\t\t\t}\n\t\t\tadjust = adjust ^ 522133279;\n\t\t}\n\t\t++srcY;\n\t\t++dstY;\n\t}\n}\n\nfunction bitAndwith(sourceWord, destinationWord) {\n\treturn sourceWord & destinationWord;\n}\n\nfunction bitAndInvertwith(sourceWord, destinationWord) {\n\treturn sourceWord & ~destinationWord;\n}\n\nfunction bitInvertAndwith(sourceWord, destinationWord) {\n\treturn ~sourceWord & destinationWord;\n}\n\nfunction bitInvertAndInvertwith(sourceWord, destinationWord) {\n\treturn ~sourceWord & ~destinationWord;\n}\n\nfunction bitInvertDestinationwith(sourceWord, destinationWord) {\n\treturn ~destinationWord;\n}\n\nfunction bitInvertOrwith(sourceWord, destinationWord) {\n\treturn ~sourceWord | destinationWord;\n}\n\nfunction bitInvertOrInvertwith(sourceWord, destinationWord) {\n\treturn ~sourceWord | ~destinationWord;\n}\n\nfunction bitInvertSourcewith(sourceWord, destinationWord) {\n\treturn ~sourceWord;\n}\n\nfunction bitInvertXorwith(sourceWord, destinationWord) {\n\treturn ~sourceWord ^ destinationWord;\n}\n\nfunction bitOrwith(sourceWord, destinationWord) {\n\treturn sourceWord | destinationWord;\n}\n\nfunction bitOrInvertwith(sourceWord, destinationWord) {\n\treturn sourceWord | ~destinationWord;\n}\n\nfunction bitXorwith(sourceWord, destinationWord) {\n\treturn sourceWord ^ destinationWord;\n}\n\n\n/*\tcheck for possible overlap of source and destination */\n/*\tar 10/19/1999: This method requires surfaces to be locked. */\n\nfunction checkSourceOverlap() {\n\tvar t;\n\n\tif ((sourceForm === destForm) && (dy >= sy)) {\n\t\tif (dy > sy) {\n\n\t\t\t/* have to start at bottom */\n\n\t\t\tvDir = -1;\n\t\t\tsy = (sy + bbH) - 1;\n\t\t\tdy = (dy + bbH) - 1;\n\t\t} else {\n\t\t\tif ((dy === sy) && (dx > sx)) {\n\n\t\t\t\t/* y's are equal, but x's are backward */\n\n\t\t\t\thDir = -1;\n\n\t\t\t\t/* start at right */\n\n\t\t\t\tsx = (sx + bbW) - 1;\n\n\t\t\t\t/* and fix up masks */\n\n\t\t\t\tdx = (dx + bbW) - 1;\n\t\t\t\tif (nWords > 1) {\n\t\t\t\t\tt = mask1;\n\t\t\t\t\tmask1 = mask2;\n\t\t\t\t\tmask2 = t;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdestIndex = ((dy * destPitch)) + ((DIV(dx, destPPW)) * 4);\n\t\tdestDelta = (destPitch * vDir) - (4 * (nWords * hDir));\n\t}\n}\n\nfunction clearWordwith(source, destination) {\n\treturn 0;\n}\n\n\n/*\tclip and adjust source origin and extent appropriately */\n/*\tfirst in x */\n\nfunction clipRange() {\n\tif (destX >= clipX) {\n\t\tsx = sourceX;\n\t\tdx = destX;\n\t\tbbW = width;\n\t} else {\n\t\tsx = sourceX + (clipX - destX);\n\t\tbbW = width - (clipX - destX);\n\t\tdx = clipX;\n\t}\n\tif ((dx + bbW) > (clipX + clipWidth)) {\n\t\tbbW -= (dx + bbW) - (clipX + clipWidth);\n\t}\n\tif (destY >= clipY) {\n\t\tsy = sourceY;\n\t\tdy = destY;\n\t\tbbH = height;\n\t} else {\n\t\tsy = (sourceY + clipY) - destY;\n\t\tbbH = height - (clipY - destY);\n\t\tdy = clipY;\n\t}\n\tif ((dy + bbH) > (clipY + clipHeight)) {\n\t\tbbH -= (dy + bbH) - (clipY + clipHeight);\n\t}\n\tif (noSource) {\n\t\treturn null;\n\t}\n\tif (sx < 0) {\n\t\tdx -= sx;\n\t\tbbW += sx;\n\t\tsx = 0;\n\t}\n\tif ((sx + bbW) > sourceWidth) {\n\t\tbbW -= (sx + bbW) - sourceWidth;\n\t}\n\tif (sy < 0) {\n\t\tdy -= sy;\n\t\tbbH += sy;\n\t\tsy = 0;\n\t}\n\tif ((sy + bbH) > sourceHeight) {\n\t\tbbH -= (sy + bbH) - sourceHeight;\n\t}\n}\n\n\n/*\tThis function is exported for the Balloon engine */\n\nfunction copyBits() {\n\tclipRange();\n\tif ((bbW <= 0) || (bbH <= 0)) {\n\n\t\t/* zero width or height; noop */\n\n\t\taffectedL = (affectedR = (affectedT = (affectedB = 0)));\n\t\treturn null;\n\t}\n\tif (!lockSurfaces()) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\t// skipping ifdef ENABLE_FAST_BLT\n\tcopyBitsLockedAndClipped();\n\n\tunlockSurfaces();\n}\n\n\n/*\tRecover from the fast path specialised code saying Help-I-cant-cope */\n\nfunction copyBitsFallback(op, flags) {\n\tvar done;\n\n\t// skipping ifdef ENABLE_FAST_BLT\n}\n\n\n/*\tPerform the actual copyBits operation using the fast path specialised code; fail some cases by falling back to normal code.\n\tAssume: Surfaces have been locked and clipping was performed. */\n\nfunction copyBitsFastPathSpecialised() {\n\t// skipping ifdef ENABLE_FAST_BLT\n}\n\n\n/*\tSupport for the balloon engine. */\n\nfunction copyBitsFromtoat(startX, stopX, yValue) {\n\tdestX = startX;\n\tdestY = yValue;\n\tsourceX = startX;\n\twidth = stopX - startX;\n\tcopyBits();\n\tshowDisplayBits();\n}\n\n\n/*\tPerform the actual copyBits operation.\n\tAssume: Surfaces have been locked and clipping was performed. */\n\nfunction copyBitsLockedAndClipped() {\n\tvar done;\n\n\tcopyBitsRule41Test();\n\tif (interpreterProxy.failed()) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tdone = tryCopyingBitsQuickly();\n\tif (done) {\n\t\treturn null;\n\t}\n\tif ((combinationRule === 30) || (combinationRule === 31)) {\n\n\t\t/* Check and fetch source alpha parameter for alpha blend */\n\n\t\tif (interpreterProxy.methodArgumentCount() === 1) {\n\t\t\tsourceAlpha = interpreterProxy.stackIntegerValue(0);\n\t\t\tif (!(!interpreterProxy.failed() && ((sourceAlpha >= 0) && (sourceAlpha <= 255)))) {\n\t\t\t\treturn interpreterProxy.primitiveFail();\n\t\t\t}\n\t\t} else {\n\t\t\treturn interpreterProxy.primitiveFail();\n\t\t}\n\t}\n\n\t/* Choose and perform the actual copy loop. */\n\n\tbitCount = 0;\n\tperformCopyLoop();\n\tif ((combinationRule === 22) || (combinationRule === 32)) {\n\n\t\t/* zero width and height; return the count */\n\n\t\taffectedL = (affectedR = (affectedT = (affectedB = 0)));\n\t}\n\tif (hDir > 0) {\n\t\taffectedL = dx;\n\t\taffectedR = dx + bbW;\n\t} else {\n\t\taffectedL = (dx - bbW) + 1;\n\t\taffectedR = dx + 1;\n\t}\n\tif (vDir > 0) {\n\t\taffectedT = dy;\n\t\taffectedB = dy + bbH;\n\t} else {\n\t\taffectedT = (dy - bbH) + 1;\n\t\taffectedB = dy + 1;\n\t}\n}\n\n\n/*\tTest possible use of rule 41, rgbComponentAlpha:with: Nothing to return, just set up some variables */\n\nfunction copyBitsRule41Test() {\n\tvar ungammaLookupTableOop;\n\tvar gammaLookupTableOop;\n\n\tif (combinationRule === 41) {\n\n\t\t/* fetch the forecolor into componentAlphaModeColor. */\n\n\t\tcomponentAlphaModeAlpha = 255;\n\t\tcomponentAlphaModeColor = 16777215;\n\t\tgammaLookupTable = null;\n\t\tungammaLookupTable = null;\n\t\tif (interpreterProxy.methodArgumentCount() >= 2) {\n\t\t\tcomponentAlphaModeAlpha = interpreterProxy.stackIntegerValue(interpreterProxy.methodArgumentCount() - 2);\n\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\treturn interpreterProxy.primitiveFail();\n\t\t\t}\n\t\t\tcomponentAlphaModeColor = interpreterProxy.stackIntegerValue(interpreterProxy.methodArgumentCount() - 1);\n\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\treturn interpreterProxy.primitiveFail();\n\t\t\t}\n\t\t\tif (interpreterProxy.methodArgumentCount() === 4) {\n\t\t\t\tgammaLookupTableOop = interpreterProxy.stackObjectValue(1);\n\t\t\t\tif (interpreterProxy.isBytes(gammaLookupTableOop)) {\n\t\t\t\t\tgammaLookupTable = gammaLookupTableOop.bytes;\n\t\t\t\t}\n\t\t\t\tungammaLookupTableOop = interpreterProxy.stackObjectValue(0);\n\t\t\t\tif (interpreterProxy.isBytes(ungammaLookupTableOop)) {\n\t\t\t\t\tungammaLookupTable = ungammaLookupTableOop.bytes;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (interpreterProxy.methodArgumentCount() === 1) {\n\t\t\t\tcomponentAlphaModeColor = interpreterProxy.stackIntegerValue(0);\n\t\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\t\treturn interpreterProxy.primitiveFail();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn interpreterProxy.primitiveFail();\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n/*\tThis version of the inner loop assumes noSource = false. */\n\nfunction copyLoop() {\n\tvar mergeWord;\n\tvar skewWord;\n\tvar skewMask;\n\tvar halftoneWord;\n\tvar unskew;\n\tvar mergeFnwith;\n\tvar hInc;\n\tvar destWord;\n\tvar word;\n\tvar prevWord;\n\tvar y;\n\tvar i;\n\tvar thisWord;\n\tvar notSkewMask;\n\n\tmergeFnwith = opTable[combinationRule + 1];\n\tmergeFnwith;\n\n\t/* Byte delta */\n\t/* degenerate skew fixed for Sparc. 10/20/96 ikp */\n\n\thInc = hDir * 4;\n\tif (skew === -32) {\n\t\tskew = (unskew = (skewMask = 0));\n\t} else {\n\t\tif (skew < 0) {\n\t\t\tunskew = skew + 32;\n\t\t\tskewMask = SHL(AllOnes, (0 - skew));\n\t\t} else {\n\t\t\tif (skew === 0) {\n\t\t\t\tunskew = 0;\n\t\t\t\tskewMask = AllOnes;\n\t\t\t} else {\n\t\t\t\tunskew = skew - 32;\n\t\t\t\tskewMask = SHR(AllOnes, skew);\n\t\t\t}\n\t\t}\n\t}\n\tnotSkewMask = ~skewMask;\n\tif (noHalftone) {\n\t\thalftoneWord = AllOnes;\n\t\thalftoneHeight = 0;\n\t} else {\n\t\thalftoneWord = halftoneAt(0);\n\t}\n\ty = dy;\n\tfor (i = 1; i <= bbH; i++) {\n\n\t\t/* here is the vertical loop */\n\n\t\tif (halftoneHeight > 1) {\n\n\t\t\t/* Otherwise, its always the same */\n\n\t\t\thalftoneWord = halftoneAt(y);\n\t\t\ty += vDir;\n\t\t}\n\t\tif (preload) {\n\n\t\t\t/* load the 64-bit shifter */\n\n\t\t\tprevWord = sourceBits[sourceIndex >>> 2];\n\t\t\tsourceIndex += hInc;\n\t\t} else {\n\t\t\tprevWord = 0;\n\t\t}\n\t\tdestMask = mask1;\n\n\t\t/* pick up next word */\n\n\t\tthisWord = sourceBits[sourceIndex >>> 2];\n\t\tsourceIndex += hInc;\n\n\t\t/* 32-bit rotate */\n\n\t\tskewWord = (SHIFT((prevWord & notSkewMask), unskew)) | (SHIFT((thisWord & skewMask), skew));\n\t\tprevWord = thisWord;\n\t\tdestWord = destBits[destIndex >>> 2];\n\t\tmergeWord = mergeFnwith(skewWord & halftoneWord, destWord);\n\t\tdestWord = (destMask & mergeWord) | (destWord & ~destMask);\n\t\tdestBits[destIndex >>> 2] = destWord;\n\n\t\t/* This central horizontal loop requires no store masking */\n\n\t\tdestIndex += hInc;\n\t\tdestMask = AllOnes;\n\t\tif (combinationRule === 3) {\n\t\t\tif ((skew === 0) && (halftoneWord === AllOnes)) {\n\n\t\t\t\t/* Very special inner loop for STORE mode with no skew -- just move words */\n\n\t\t\t\tif (hDir === -1) {\n\n\t\t\t\t\t/* Woeful patch: revert to older code for hDir = -1 */\n\n\t\t\t\t\tfor (word = 2; word <= (nWords - 1); word++) {\n\t\t\t\t\t\tthisWord = sourceBits[sourceIndex >>> 2];\n\t\t\t\t\t\tsourceIndex += hInc;\n\t\t\t\t\t\tdestBits[destIndex >>> 2] = thisWord;\n\t\t\t\t\t\tdestIndex += hInc;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (word = 2; word <= (nWords - 1); word++) {\n\n\t\t\t\t\t\t/* Note loop starts with prevWord loaded (due to preload) */\n\n\t\t\t\t\t\tdestBits[destIndex >>> 2] = prevWord;\n\t\t\t\t\t\tdestIndex += hInc;\n\t\t\t\t\t\tprevWord = sourceBits[sourceIndex >>> 2];\n\t\t\t\t\t\tsourceIndex += hInc;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t/* Special inner loop for STORE mode -- no need to call merge */\n\n\t\t\t\tfor (word = 2; word <= (nWords - 1); word++) {\n\t\t\t\t\tthisWord = sourceBits[sourceIndex >>> 2];\n\t\t\t\t\tsourceIndex += hInc;\n\n\t\t\t\t\t/* 32-bit rotate */\n\n\t\t\t\t\tskewWord = (SHIFT((prevWord & notSkewMask), unskew)) | (SHIFT((thisWord & skewMask), skew));\n\t\t\t\t\tprevWord = thisWord;\n\t\t\t\t\tdestBits[destIndex >>> 2] = skewWord & halftoneWord;\n\t\t\t\t\tdestIndex += hInc;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (word = 2; word <= (nWords - 1); word++) {\n\n\t\t\t\t/* Normal inner loop does merge: */\n\n\n\t\t\t\t/* pick up next word */\n\n\t\t\t\tthisWord = sourceBits[sourceIndex >>> 2];\n\t\t\t\tsourceIndex += hInc;\n\n\t\t\t\t/* 32-bit rotate */\n\n\t\t\t\tskewWord = (SHIFT((prevWord & notSkewMask), unskew)) | (SHIFT((thisWord & skewMask), skew));\n\t\t\t\tprevWord = thisWord;\n\t\t\t\tmergeWord = mergeFnwith(skewWord & halftoneWord, destBits[destIndex >>> 2]);\n\t\t\t\tdestBits[destIndex >>> 2] = mergeWord;\n\t\t\t\tdestIndex += hInc;\n\t\t\t}\n\t\t}\n\t\tif (nWords > 1) {\n\t\t\tdestMask = mask2;\n\n\t\t\t/* pick up next word */\n\n\t\t\tthisWord = sourceBits[sourceIndex >>> 2];\n\t\t\tsourceIndex += hInc;\n\n\t\t\t/* 32-bit rotate */\n\n\t\t\tskewWord = (SHIFT((prevWord & notSkewMask), unskew)) | (SHIFT((thisWord & skewMask), skew));\n\t\t\tdestWord = destBits[destIndex >>> 2];\n\t\t\tmergeWord = mergeFnwith(skewWord & halftoneWord, destWord);\n\t\t\tdestWord = (destMask & mergeWord) | (destWord & ~destMask);\n\t\t\tdestBits[destIndex >>> 2] = destWord;\n\t\t\tdestIndex += hInc;\n\t\t}\n\t\tsourceIndex += sourceDelta;\n\t\tdestIndex += destDelta;\n\t}\n}\n\n\n/*\tFaster copyLoop when source not used.  hDir and vDir are both\n\tpositive, and perload and skew are unused */\n\nfunction copyLoopNoSource() {\n\tvar mergeWord;\n\tvar halftoneWord;\n\tvar mergeFnwith;\n\tvar destWord;\n\tvar word;\n\tvar i;\n\n\tmergeFnwith = opTable[combinationRule + 1];\n\tmergeFnwith;\n\tfor (i = 1; i <= bbH; i++) {\n\n\t\t/* here is the vertical loop */\n\n\t\tif (noHalftone) {\n\t\t\thalftoneWord = AllOnes;\n\t\t} else {\n\t\t\thalftoneWord = halftoneAt((dy + i) - 1);\n\t\t}\n\t\tdestMask = mask1;\n\t\tdestWord = destBits[destIndex >>> 2];\n\t\tmergeWord = mergeFnwith(halftoneWord, destWord);\n\t\tdestWord = (destMask & mergeWord) | (destWord & ~destMask);\n\t\tdestBits[destIndex >>> 2] = destWord;\n\n\t\t/* This central horizontal loop requires no store masking */\n\n\t\tdestIndex += 4;\n\t\tdestMask = AllOnes;\n\t\tif (combinationRule === 3) {\n\n\t\t\t/* Special inner loop for STORE */\n\n\t\t\tdestWord = halftoneWord;\n\t\t\tfor (word = 2; word <= (nWords - 1); word++) {\n\t\t\t\tdestBits[destIndex >>> 2] = destWord;\n\t\t\t\tdestIndex += 4;\n\t\t\t}\n\t\t} else {\n\n\t\t\t/* Normal inner loop does merge */\n\n\t\t\tfor (word = 2; word <= (nWords - 1); word++) {\n\n\t\t\t\t/* Normal inner loop does merge */\n\n\t\t\t\tdestWord = destBits[destIndex >>> 2];\n\t\t\t\tmergeWord = mergeFnwith(halftoneWord, destWord);\n\t\t\t\tdestBits[destIndex >>> 2] = mergeWord;\n\t\t\t\tdestIndex += 4;\n\t\t\t}\n\t\t}\n\t\tif (nWords > 1) {\n\t\t\tdestMask = mask2;\n\t\t\tdestWord = destBits[destIndex >>> 2];\n\t\t\tmergeWord = mergeFnwith(halftoneWord, destWord);\n\t\t\tdestWord = (destMask & mergeWord) | (destWord & ~destMask);\n\t\t\tdestBits[destIndex >>> 2] = destWord;\n\t\t\tdestIndex += 4;\n\t\t}\n\t\tdestIndex += destDelta;\n\t}\n}\n\n\n/*\tThis version of the inner loop maps source pixels\n\tto a destination form with different depth.  Because it is already\n\tunweildy, the loop is not unrolled as in the other versions.\n\tPreload, skew and skewMask are all overlooked, since pickSourcePixels\n\tdelivers its destination word already properly aligned.\n\tNote that pickSourcePixels could be copied in-line at the top of\n\tthe horizontal loop, and some of its inits moved out of the loop. */\n/*\tar 12/7/1999:\n\tThe loop has been rewritten to use only one pickSourcePixels call.\n\tThe idea is that the call itself could be inlined. If we decide not\n\tto inline pickSourcePixels we could optimize the loop instead. */\n\nfunction copyLoopPixMap() {\n\tvar mapperFlags;\n\tvar srcShiftInc;\n\tvar dstShiftLeft;\n\tvar sourcePixMask;\n\tvar nSourceIncs;\n\tvar skewWord;\n\tvar words;\n\tvar destWord;\n\tvar startBits;\n\tvar mergeFnwith;\n\tvar dstShift;\n\tvar i;\n\tvar halftoneWord;\n\tvar mergeWord;\n\tvar destPixMask;\n\tvar dstShiftInc;\n\tvar srcShift;\n\tvar endBits;\n\tvar nPix;\n\tvar scrStartBits;\n\n\tmergeFnwith = opTable[combinationRule + 1];\n\tmergeFnwith;\n\tsourcePPW = DIV(32, sourceDepth);\n\tsourcePixMask = maskTable[sourceDepth];\n\tdestPixMask = maskTable[destDepth];\n\tmapperFlags = cmFlags & ~ColorMapNewStyle;\n\tsourceIndex = ((sy * sourcePitch)) + ((DIV(sx, sourcePPW)) * 4);\n\tscrStartBits = sourcePPW - (sx & (sourcePPW - 1));\n\tif (bbW < scrStartBits) {\n\t\tnSourceIncs = 0;\n\t} else {\n\t\tnSourceIncs = (DIV((bbW - scrStartBits), sourcePPW)) + 1;\n\t}\n\n\t/* Note following two items were already calculated in destmask setup! */\n\n\tsourceDelta = sourcePitch - (nSourceIncs * 4);\n\tstartBits = destPPW - (dx & (destPPW - 1));\n\tendBits = (((dx + bbW) - 1) & (destPPW - 1)) + 1;\n\tif (bbW < startBits) {\n\t\tstartBits = bbW;\n\t}\n\tsrcShift = (sx & (sourcePPW - 1)) * sourceDepth;\n\tdstShift = (dx & (destPPW - 1)) * destDepth;\n\tsrcShiftInc = sourceDepth;\n\tdstShiftInc = destDepth;\n\tdstShiftLeft = 0;\n\tif (sourceMSB) {\n\t\tsrcShift = (32 - sourceDepth) - srcShift;\n\t\tsrcShiftInc = 0 - srcShiftInc;\n\t}\n\tif (destMSB) {\n\t\tdstShift = (32 - destDepth) - dstShift;\n\t\tdstShiftInc = 0 - dstShiftInc;\n\t\tdstShiftLeft = 32 - destDepth;\n\t}\n\tfor (i = 1; i <= bbH; i++) {\n\n\t\t/* here is the vertical loop */\n\t\t/* *** is it possible at all that noHalftone == false? *** */\n\n\t\tif (noHalftone) {\n\t\t\thalftoneWord = AllOnes;\n\t\t} else {\n\t\t\thalftoneWord = halftoneAt((dy + i) - 1);\n\t\t}\n\t\tsrcBitShift = srcShift;\n\t\tdstBitShift = dstShift;\n\t\tdestMask = mask1;\n\n\t\t/* Here is the horizontal loop... */\n\n\t\tnPix = startBits;\n\t\twords = nWords;\n\t\tdo {\n\n\t\t\t/* pick up the word */\n\n\n\t\t\t/* align next word to leftmost pixel */\n\n\t\t\tskewWord = pickSourcePixelsflagssrcMaskdestMasksrcShiftIncdstShiftInc(nPix, mapperFlags, sourcePixMask, destPixMask, srcShiftInc, dstShiftInc);\n\t\t\tdstBitShift = dstShiftLeft;\n\t\t\tif (destMask === AllOnes) {\n\n\t\t\t\t/* avoid read-modify-write */\n\n\t\t\t\tmergeWord = mergeFnwith(skewWord & halftoneWord, destBits[destIndex >>> 2]);\n\t\t\t\tdestBits[destIndex >>> 2] = destMask & mergeWord;\n\t\t\t} else {\n\n\t\t\t\t/* General version using dest masking */\n\n\t\t\t\tdestWord = destBits[destIndex >>> 2];\n\t\t\t\tmergeWord = mergeFnwith(skewWord & halftoneWord, destWord & destMask);\n\t\t\t\tdestWord = (destMask & mergeWord) | (destWord & ~destMask);\n\t\t\t\tdestBits[destIndex >>> 2] = destWord;\n\t\t\t}\n\t\t\tdestIndex += 4;\n\t\t\tif (words === 2) {\n\n\t\t\t\t/* e.g., is the next word the last word? */\n\t\t\t\t/* set mask for last word in this row */\n\n\t\t\t\tdestMask = mask2;\n\t\t\t\tnPix = endBits;\n\t\t\t} else {\n\n\t\t\t\t/* use fullword mask for inner loop */\n\n\t\t\t\tdestMask = AllOnes;\n\t\t\t\tnPix = destPPW;\n\t\t\t}\n\t\t} while(!(((--words)) === 0));\n\t\tsourceIndex += sourceDelta;\n\t\tdestIndex += destDelta;\n\t}\n}\n\n\n/*\tReturn the default translation table from 1..8 bit indexed colors to 32bit */\n/*\tThe table has been generated by the following statements */\n/*\t| pvs hex |\n\tString streamContents:[:s|\n\t\ts nextPutAll:'static unsigned int theTable[256] = { '.\n\t\tpvs := (Color colorMapIfNeededFrom: 8 to: 32) asArray.\n\t\t1 to: pvs size do:[:i|\n\t\t\ti > 1 ifTrue:[s nextPutAll:', '].\n\t\t\t(i-1 \\\\ 8) = 0 ifTrue:[s cr].\n\t\t\ts nextPutAll:'0x'.\n\t\t\thex := (pvs at: i) printStringBase: 16.\n\t\t\ts nextPutAll: (hex copyFrom: 4 to: hex size).\n\t\t].\n\t\ts nextPutAll:'};'.\n\t]. */\n\nfunction default8To32Table() {\n\tvar theTable = [ \n0x0, 0xFF000001, 0xFFFFFFFF, 0xFF808080, 0xFFFF0000, 0xFF00FF00, 0xFF0000FF, 0xFF00FFFF, \n0xFFFFFF00, 0xFFFF00FF, 0xFF202020, 0xFF404040, 0xFF606060, 0xFF9F9F9F, 0xFFBFBFBF, 0xFFDFDFDF, \n0xFF080808, 0xFF101010, 0xFF181818, 0xFF282828, 0xFF303030, 0xFF383838, 0xFF484848, 0xFF505050, \n0xFF585858, 0xFF686868, 0xFF707070, 0xFF787878, 0xFF878787, 0xFF8F8F8F, 0xFF979797, 0xFFA7A7A7, \n0xFFAFAFAF, 0xFFB7B7B7, 0xFFC7C7C7, 0xFFCFCFCF, 0xFFD7D7D7, 0xFFE7E7E7, 0xFFEFEFEF, 0xFFF7F7F7, \n0xFF000001, 0xFF003300, 0xFF006600, 0xFF009900, 0xFF00CC00, 0xFF00FF00, 0xFF000033, 0xFF003333, \n0xFF006633, 0xFF009933, 0xFF00CC33, 0xFF00FF33, 0xFF000066, 0xFF003366, 0xFF006666, 0xFF009966, \n0xFF00CC66, 0xFF00FF66, 0xFF000099, 0xFF003399, 0xFF006699, 0xFF009999, 0xFF00CC99, 0xFF00FF99, \n0xFF0000CC, 0xFF0033CC, 0xFF0066CC, 0xFF0099CC, 0xFF00CCCC, 0xFF00FFCC, 0xFF0000FF, 0xFF0033FF, \n0xFF0066FF, 0xFF0099FF, 0xFF00CCFF, 0xFF00FFFF, 0xFF330000, 0xFF333300, 0xFF336600, 0xFF339900, \n0xFF33CC00, 0xFF33FF00, 0xFF330033, 0xFF333333, 0xFF336633, 0xFF339933, 0xFF33CC33, 0xFF33FF33, \n0xFF330066, 0xFF333366, 0xFF336666, 0xFF339966, 0xFF33CC66, 0xFF33FF66, 0xFF330099, 0xFF333399, \n0xFF336699, 0xFF339999, 0xFF33CC99, 0xFF33FF99, 0xFF3300CC, 0xFF3333CC, 0xFF3366CC, 0xFF3399CC, \n0xFF33CCCC, 0xFF33FFCC, 0xFF3300FF, 0xFF3333FF, 0xFF3366FF, 0xFF3399FF, 0xFF33CCFF, 0xFF33FFFF, \n0xFF660000, 0xFF663300, 0xFF666600, 0xFF669900, 0xFF66CC00, 0xFF66FF00, 0xFF660033, 0xFF663333, \n0xFF666633, 0xFF669933, 0xFF66CC33, 0xFF66FF33, 0xFF660066, 0xFF663366, 0xFF666666, 0xFF669966, \n0xFF66CC66, 0xFF66FF66, 0xFF660099, 0xFF663399, 0xFF666699, 0xFF669999, 0xFF66CC99, 0xFF66FF99, \n0xFF6600CC, 0xFF6633CC, 0xFF6666CC, 0xFF6699CC, 0xFF66CCCC, 0xFF66FFCC, 0xFF6600FF, 0xFF6633FF, \n0xFF6666FF, 0xFF6699FF, 0xFF66CCFF, 0xFF66FFFF, 0xFF990000, 0xFF993300, 0xFF996600, 0xFF999900, \n0xFF99CC00, 0xFF99FF00, 0xFF990033, 0xFF993333, 0xFF996633, 0xFF999933, 0xFF99CC33, 0xFF99FF33, \n0xFF990066, 0xFF993366, 0xFF996666, 0xFF999966, 0xFF99CC66, 0xFF99FF66, 0xFF990099, 0xFF993399, \n0xFF996699, 0xFF999999, 0xFF99CC99, 0xFF99FF99, 0xFF9900CC, 0xFF9933CC, 0xFF9966CC, 0xFF9999CC, \n0xFF99CCCC, 0xFF99FFCC, 0xFF9900FF, 0xFF9933FF, 0xFF9966FF, 0xFF9999FF, 0xFF99CCFF, 0xFF99FFFF, \n0xFFCC0000, 0xFFCC3300, 0xFFCC6600, 0xFFCC9900, 0xFFCCCC00, 0xFFCCFF00, 0xFFCC0033, 0xFFCC3333, \n0xFFCC6633, 0xFFCC9933, 0xFFCCCC33, 0xFFCCFF33, 0xFFCC0066, 0xFFCC3366, 0xFFCC6666, 0xFFCC9966, \n0xFFCCCC66, 0xFFCCFF66, 0xFFCC0099, 0xFFCC3399, 0xFFCC6699, 0xFFCC9999, 0xFFCCCC99, 0xFFCCFF99, \n0xFFCC00CC, 0xFFCC33CC, 0xFFCC66CC, 0xFFCC99CC, 0xFFCCCCCC, 0xFFCCFFCC, 0xFFCC00FF, 0xFFCC33FF, \n0xFFCC66FF, 0xFFCC99FF, 0xFFCCCCFF, 0xFFCCFFFF, 0xFFFF0000, 0xFFFF3300, 0xFFFF6600, 0xFFFF9900, \n0xFFFFCC00, 0xFFFFFF00, 0xFFFF0033, 0xFFFF3333, 0xFFFF6633, 0xFFFF9933, 0xFFFFCC33, 0xFFFFFF33, \n0xFFFF0066, 0xFFFF3366, 0xFFFF6666, 0xFFFF9966, 0xFFFFCC66, 0xFFFFFF66, 0xFFFF0099, 0xFFFF3399, \n0xFFFF6699, 0xFFFF9999, 0xFFFFCC99, 0xFFFFFF99, 0xFFFF00CC, 0xFFFF33CC, 0xFFFF66CC, 0xFFFF99CC, \n0xFFFFCCCC, 0xFFFFFFCC, 0xFFFF00FF, 0xFFFF33FF, 0xFFFF66FF, 0xFFFF99FF, 0xFFFFCCFF, 0xFFFFFFFF];;\n\n\treturn theTable;\n}\n\n\n/*\tUtility routine for computing Warp increments. */\n\nfunction deltaFromtonSteps(x1, x2, n) {\n\tif (x2 > x1) {\n\t\treturn (DIV(((x2 - x1) + FixedPt1), (n + 1))) + 1;\n\t} else {\n\t\tif (x2 === x1) {\n\t\t\treturn 0;\n\t\t}\n\t\treturn 0 - ((DIV(((x1 - x2) + FixedPt1), (n + 1))) + 1);\n\t}\n}\n\n\n/*\tCompute masks for left and right destination words */\n\nfunction destMaskAndPointerInit() {\n\tvar endBits;\n\tvar startBits;\n\tvar pixPerM1;\n\n\n\t/* A mask, assuming power of two */\n\t/* how many pixels in first word */\n\n\tpixPerM1 = destPPW - 1;\n\tstartBits = destPPW - (dx & pixPerM1);\n\tif (destMSB) {\n\t\tmask1 = SHR(AllOnes, (32 - (startBits * destDepth)));\n\t} else {\n\t\tmask1 = SHL(AllOnes, (32 - (startBits * destDepth)));\n\t}\n\tendBits = (((dx + bbW) - 1) & pixPerM1) + 1;\n\tif (destMSB) {\n\t\tmask2 = SHL(AllOnes, (32 - (endBits * destDepth)));\n\t} else {\n\t\tmask2 = SHR(AllOnes, (32 - (endBits * destDepth)));\n\t}\n\tif (bbW < startBits) {\n\t\tmask1 = mask1 & mask2;\n\t\tmask2 = 0;\n\t\tnWords = 1;\n\t} else {\n\t\tnWords = (DIV(((bbW - startBits) + pixPerM1), destPPW)) + 1;\n\t}\n\n\t/* defaults for no overlap with source */\n\t/* calculate byte addr and delta, based on first word of data */\n\t/* Note pitch is bytes and nWords is longs, not bytes */\n\n\thDir = (vDir = 1);\n\tdestIndex = ((dy * destPitch)) + ((DIV(dx, destPPW)) * 4);\n\tdestDelta = (destPitch * vDir) - (4 * (nWords * hDir));\n}\n\nfunction destinationWordwith(sourceWord, destinationWord) {\n\treturn destinationWord;\n}\n\n\n/*\tDither the given 32bit word to 16 bit. Ignore alpha. */\n\nfunction dither32To16threshold(srcWord, ditherValue) {\n\tvar addThreshold;\n\n\n\t/* You bet */\n\n\taddThreshold = ditherValue << 8;\n\treturn ((dither8Lookup[addThreshold + ((srcWord >>> 16) & 255)] << 10) + (dither8Lookup[addThreshold + ((srcWord >>> 8) & 255)] << 5)) + dither8Lookup[addThreshold + (srcWord & 255)];\n}\n\n\n/*\tThis is the primitive implementation of the line-drawing loop.\n\tSee the comments in BitBlt>>drawLoopX:Y: */\n\nfunction drawLoopXY(xDelta, yDelta) {\n\tvar P;\n\tvar affT;\n\tvar dx1;\n\tvar px;\n\tvar affR;\n\tvar affL;\n\tvar py;\n\tvar i;\n\tvar affB;\n\tvar dy1;\n\n\tif (xDelta > 0) {\n\t\tdx1 = 1;\n\t} else {\n\t\tif (xDelta === 0) {\n\t\t\tdx1 = 0;\n\t\t} else {\n\t\t\tdx1 = -1;\n\t\t}\n\t}\n\tif (yDelta > 0) {\n\t\tdy1 = 1;\n\t} else {\n\t\tif (yDelta === 0) {\n\t\t\tdy1 = 0;\n\t\t} else {\n\t\t\tdy1 = -1;\n\t\t}\n\t}\n\tpx = Math.abs(yDelta);\n\tpy = Math.abs(xDelta);\n\n\t/* init null rectangle */\n\n\taffL = (affT = 9999);\n\taffR = (affB = -9999);\n\tif (py > px) {\n\n\t\t/* more horizontal */\n\n\t\tP = py >> 1;\n\t\tfor (i = 1; i <= py; i++) {\n\t\t\tdestX += dx1;\n\t\t\tif (((P -= px)) < 0) {\n\t\t\t\tdestY += dy1;\n\t\t\t\tP += py;\n\t\t\t}\n\t\t\tif (i < py) {\n\t\t\t\tcopyBits();\n\t\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif ((affectedL < affectedR) && (affectedT < affectedB)) {\n\n\t\t\t\t\t/* Affected rectangle grows along the line */\n\n\t\t\t\t\taffL = Math.min(affL, affectedL);\n\t\t\t\t\taffR = Math.max(affR, affectedR);\n\t\t\t\t\taffT = Math.min(affT, affectedT);\n\t\t\t\t\taffB = Math.max(affB, affectedB);\n\t\t\t\t\tif (((affR - affL) * (affB - affT)) > 4000) {\n\n\t\t\t\t\t\t/* If affected rectangle gets large, update it in chunks */\n\n\t\t\t\t\t\taffectedL = affL;\n\t\t\t\t\t\taffectedR = affR;\n\t\t\t\t\t\taffectedT = affT;\n\t\t\t\t\t\taffectedB = affB;\n\t\t\t\t\t\tshowDisplayBits();\n\n\t\t\t\t\t\t/* init null rectangle */\n\n\t\t\t\t\t\taffL = (affT = 9999);\n\t\t\t\t\t\taffR = (affB = -9999);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\n\t\t/* more vertical */\n\n\t\tP = px >> 1;\n\t\tfor (i = 1; i <= px; i++) {\n\t\t\tdestY += dy1;\n\t\t\tif (((P -= py)) < 0) {\n\t\t\t\tdestX += dx1;\n\t\t\t\tP += px;\n\t\t\t}\n\t\t\tif (i < px) {\n\t\t\t\tcopyBits();\n\t\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif ((affectedL < affectedR) && (affectedT < affectedB)) {\n\n\t\t\t\t\t/* Affected rectangle grows along the line */\n\n\t\t\t\t\taffL = Math.min(affL, affectedL);\n\t\t\t\t\taffR = Math.max(affR, affectedR);\n\t\t\t\t\taffT = Math.min(affT, affectedT);\n\t\t\t\t\taffB = Math.max(affB, affectedB);\n\t\t\t\t\tif (((affR - affL) * (affB - affT)) > 4000) {\n\n\t\t\t\t\t\t/* If affected rectangle gets large, update it in chunks */\n\n\t\t\t\t\t\taffectedL = affL;\n\t\t\t\t\t\taffectedR = affR;\n\t\t\t\t\t\taffectedT = affT;\n\t\t\t\t\t\taffectedB = affB;\n\t\t\t\t\t\tshowDisplayBits();\n\n\t\t\t\t\t\t/* init null rectangle */\n\n\t\t\t\t\t\taffL = (affT = 9999);\n\t\t\t\t\t\taffR = (affB = -9999);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\taffectedL = affL;\n\taffectedR = affR;\n\taffectedT = affT;\n\n\t/* store destX, Y back */\n\n\taffectedB = affB;\n\tinterpreterProxy.storeIntegerofObjectwithValue(BBDestXIndex, bitBltOop, destX);\n\tinterpreterProxy.storeIntegerofObjectwithValue(BBDestYIndex, bitBltOop, destY);\n}\n\n\n/*\tStore the given value back into destination form, using dstMask\n\tto mask out the bits to be modified. This is an essiantial\n\tread-modify-write operation on the destination form. */\n\nfunction dstLongAtputmask(idx, srcValue, dstMask) {\n\tvar dstValue;\n\n\tdstValue = destBits[idx >>> 2];\n\tdstValue = dstValue & dstMask;\n\tdstValue = dstValue | srcValue;\n\tdestBits[idx >>> 2] = dstValue;\n}\n\n\n/*\tDither the given 32bit word to 16 bit. Ignore alpha. */\n\nfunction expensiveDither32To16threshold(srcWord, ditherValue) {\n\tvar pv;\n\tvar threshold;\n\tvar value;\n\tvar out;\n\n\n\t/* You bet */\n\n\tpv = srcWord & 255;\n\tthreshold = ditherThresholds16[pv & 7];\n\tvalue = ditherValues16[pv >>> 3];\n\tif (ditherValue < threshold) {\n\t\tout = value + 1;\n\t} else {\n\t\tout = value;\n\t}\n\tpv = (srcWord >>> 8) & 255;\n\tthreshold = ditherThresholds16[pv & 7];\n\tvalue = ditherValues16[pv >>> 3];\n\tif (ditherValue < threshold) {\n\t\tout = out | ((value + 1) << 5);\n\t} else {\n\t\tout = out | (value << 5);\n\t}\n\tpv = (srcWord >>> 16) & 255;\n\tthreshold = ditherThresholds16[pv & 7];\n\tvalue = ditherValues16[pv >>> 3];\n\tif (ditherValue < threshold) {\n\t\tout = out | ((value + 1) << 10);\n\t} else {\n\t\tout = out | (value << 10);\n\t}\n\treturn out;\n}\n\n\n/*\tReturn the integer value of the given field of the given object. If the field contains a Float, truncate it and return its integral part. Fail if the given field does not contain a small integer or Float, or if the truncated Float is out of the range of small integers. */\n\nfunction fetchIntOrFloatofObject(fieldIndex, objectPointer) {\n\tvar floatValue;\n\tvar fieldOop;\n\n\tfieldOop = interpreterProxy.fetchPointerofObject(fieldIndex, objectPointer);\n\tif (typeof fieldOop === \"number\") {\n\t\treturn fieldOop;\n\t}\n\tfloatValue = interpreterProxy.floatValueOf(fieldOop);\n\tif (!((-2.147483648e9 <= floatValue) && (floatValue <= 2.147483647e9))) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn 0;\n\t}\n\treturn (floatValue|0);\n}\n\n\n/*\tReturn the integer value of the given field of the given object. If the field contains a Float, truncate it and return its integral part. Fail if the given field does not contain a small integer or Float, or if the truncated Float is out of the range of small integers. */\n\nfunction fetchIntOrFloatofObjectifNil(fieldIndex, objectPointer, defaultValue) {\n\tvar floatValue;\n\tvar fieldOop;\n\n\tfieldOop = interpreterProxy.fetchPointerofObject(fieldIndex, objectPointer);\n\tif (typeof fieldOop === \"number\") {\n\t\treturn fieldOop;\n\t}\n\tif (fieldOop.isNil) {\n\t\treturn defaultValue;\n\t}\n\tfloatValue = interpreterProxy.floatValueOf(fieldOop);\n\tif (!((-2.147483648e9 <= floatValue) && (floatValue <= 2.147483647e9))) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn 0;\n\t}\n\treturn (floatValue|0);\n}\n\n\n/*\tFor any non-zero pixel value in destinationWord with zero alpha channel take the alpha from sourceWord and fill it in. Intended for fixing alpha channels left at zero during 16->32 bpp conversions. */\n\nfunction fixAlphawith(sourceWord, destinationWord) {\n\tif (destDepth !== 32) {\n\t\treturn destinationWord;\n\t}\n\tif (destinationWord === 0) {\n\t\treturn 0;\n\t}\n\tif ((destinationWord & 4278190080) !== 0) {\n\t\treturn destinationWord;\n\t}\n\treturn destinationWord | (sourceWord & 4278190080);\n}\n\n\n/*\tNote: This is hardcoded so it can be run from Squeak.\n\tThe module name is used for validating a module *after*\n\tit is loaded to check if it does really contain the module\n\twe're thinking it contains. This is important! */\n\nfunction getModuleName() {\n\treturn moduleName;\n}\n\n\n/*\tReturn a value from the halftone pattern. */\n\nfunction halftoneAt(idx) {\n\treturn halftoneBase[MOD(idx, halftoneHeight)];\n}\n\nfunction halt() {\n\t;\n}\n\nfunction ignoreSourceOrHalftone(formPointer) {\n\tif (formPointer.isNil) {\n\t\treturn true;\n\t}\n\tif (combinationRule === 0) {\n\t\treturn true;\n\t}\n\tif (combinationRule === 5) {\n\t\treturn true;\n\t}\n\tif (combinationRule === 10) {\n\t\treturn true;\n\t}\n\tif (combinationRule === 15) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction initBBOpTable() {\n\topTable[0+1] = clearWordwith;\n\topTable[1+1] = bitAndwith;\n\topTable[2+1] = bitAndInvertwith;\n\topTable[3+1] = sourceWordwith;\n\topTable[4+1] = bitInvertAndwith;\n\topTable[5+1] = destinationWordwith;\n\topTable[6+1] = bitXorwith;\n\topTable[7+1] = bitOrwith;\n\topTable[8+1] = bitInvertAndInvertwith;\n\topTable[9+1] = bitInvertXorwith;\n\topTable[10+1] = bitInvertDestinationwith;\n\topTable[11+1] = bitOrInvertwith;\n\topTable[12+1] = bitInvertSourcewith;\n\topTable[13+1] = bitInvertOrwith;\n\topTable[14+1] = bitInvertOrInvertwith;\n\topTable[15+1] = destinationWordwith;\n\topTable[16+1] = destinationWordwith;\n\topTable[17+1] = destinationWordwith;\n\topTable[18+1] = addWordwith;\n\topTable[19+1] = subWordwith;\n\topTable[20+1] = rgbAddwith;\n\topTable[21+1] = rgbSubwith;\n\topTable[22+1] = OLDrgbDiffwith;\n\topTable[23+1] = OLDtallyIntoMapwith;\n\topTable[24+1] = alphaBlendwith;\n\topTable[25+1] = pixPaintwith;\n\topTable[26+1] = pixMaskwith;\n\topTable[27+1] = rgbMaxwith;\n\topTable[28+1] = rgbMinwith;\n\topTable[29+1] = rgbMinInvertwith;\n\topTable[30+1] = alphaBlendConstwith;\n\topTable[31+1] = alphaPaintConstwith;\n\topTable[32+1] = rgbDiffwith;\n\topTable[33+1] = tallyIntoMapwith;\n\topTable[34+1] = alphaBlendScaledwith;\n\topTable[35+1] = alphaBlendScaledwith;\n\topTable[36+1] = alphaBlendScaledwith;\n\topTable[37+1] = rgbMulwith;\n\topTable[38+1] = pixSwapwith;\n\topTable[39+1] = pixClearwith;\n\topTable[40+1] = fixAlphawith;\n\topTable[41+1] = rgbComponentAlphawith;\n}\n\nfunction initDither8Lookup() {\n\tvar t;\n\tvar b;\n\tvar value;\n\n\tfor (b = 0; b <= 255; b++) {\n\t\tfor (t = 0; t <= 15; t++) {\n\t\t\tvalue = expensiveDither32To16threshold(b, t);\n\t\t\tdither8Lookup[(t << 8) + b] = value;\n\t\t}\n\t}\n}\n\nfunction initialiseModule() {\n\tinitBBOpTable();\n\tinitDither8Lookup();\n\t// skipping ifdef ENABLE_FAST_BLT\n\treturn true;\n}\n\n\n/*\tReturn true if shiftTable/maskTable define an identity mapping. */\n\nfunction isIdentityMapwith(shifts, masks) {\n\tif ((!shifts) || (!masks)) {\n\t\treturn true;\n\t}\n\tif ((shifts[RedIndex] === 0) && ((shifts[GreenIndex] === 0) && ((shifts[BlueIndex] === 0) && ((shifts[AlphaIndex] === 0) && ((masks[RedIndex] === 16711680) && ((masks[GreenIndex] === 65280) && ((masks[BlueIndex] === 255) && (masks[AlphaIndex] === 4278190080)))))))) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n\n/*\tLoad the dest form for BitBlt. Return false if anything is wrong, true otherwise. */\n\nfunction loadBitBltDestForm() {\n\tvar destBitsSize;\n\n\tdestBits = interpreterProxy.fetchPointerofObject(FormBitsIndex, destForm);\n\tdestWidth = interpreterProxy.fetchIntegerofObject(FormWidthIndex, destForm);\n\tdestHeight = interpreterProxy.fetchIntegerofObject(FormHeightIndex, destForm);\n\tif (!((destWidth >= 0) && (destHeight >= 0))) {\n\t\treturn false;\n\t}\n\tdestDepth = interpreterProxy.fetchIntegerofObject(FormDepthIndex, destForm);\n\tdestMSB = destDepth > 0;\n\tif (destDepth < 0) {\n\t\tdestDepth = 0 - destDepth;\n\t}\n\tif (typeof destBits === \"number\") {\n\n\t\t/* Query for actual surface dimensions */\n\n\t\tif (!queryDestSurface(destBits)) {\n\t\t\treturn false;\n\t\t}\n\t\tdestPPW = DIV(32, destDepth);\n\t\tdestBits = (destPitch = 0);\n\t} else {\n\t\tdestPPW = DIV(32, destDepth);\n\t\tdestPitch = (DIV((destWidth + (destPPW - 1)), destPPW)) * 4;\n\t\tdestBitsSize = BYTESIZEOF(destBits);\n\t\tif (!(interpreterProxy.isWordsOrBytes(destBits) && (destBitsSize === (destPitch * destHeight)))) {\n\t\t\treturn false;\n\t\t}\n\t\tdestBits = destBits.wordsOrBytes();\n\t}\n\treturn true;\n}\n\n\n/*\tLoad BitBlt from the oop.\n\tThis function is exported for the Balloon engine. */\n\nfunction loadBitBltFrom(bbObj) {\n\treturn loadBitBltFromwarping(bbObj, false);\n}\n\n\n/*\tLoad context from BitBlt instance.  Return false if anything is amiss */\n/*\tNOTE this should all be changed to minX/maxX coordinates for simpler clipping\n\t\t-- once it works! */\n\nfunction loadBitBltFromwarping(bbObj, aBool) {\n\tvar ok;\n\n\tbitBltOop = bbObj;\n\tisWarping = aBool;\n\tcombinationRule = interpreterProxy.fetchIntegerofObject(BBRuleIndex, bitBltOop);\n\tif (interpreterProxy.failed() || ((combinationRule < 0) || (combinationRule > (OpTableSize - 2)))) {\n\t\treturn false;\n\t}\n\tif ((combinationRule >= 16) && (combinationRule <= 17)) {\n\t\treturn false;\n\t}\n\tsourceForm = interpreterProxy.fetchPointerofObject(BBSourceFormIndex, bitBltOop);\n\tnoSource = ignoreSourceOrHalftone(sourceForm);\n\thalftoneForm = interpreterProxy.fetchPointerofObject(BBHalftoneFormIndex, bitBltOop);\n\tnoHalftone = ignoreSourceOrHalftone(halftoneForm);\n\tdestForm = interpreterProxy.fetchPointerofObject(BBDestFormIndex, bbObj);\n\tif (!(interpreterProxy.isPointers(destForm) && (SIZEOF(destForm) >= 4))) {\n\t\treturn false;\n\t}\n\tok = loadBitBltDestForm();\n\tif (!ok) {\n\t\treturn false;\n\t}\n\tdestX = fetchIntOrFloatofObjectifNil(BBDestXIndex, bitBltOop, 0);\n\tdestY = fetchIntOrFloatofObjectifNil(BBDestYIndex, bitBltOop, 0);\n\twidth = fetchIntOrFloatofObjectifNil(BBWidthIndex, bitBltOop, destWidth);\n\theight = fetchIntOrFloatofObjectifNil(BBHeightIndex, bitBltOop, destHeight);\n\tif (interpreterProxy.failed()) {\n\t\treturn false;\n\t}\n\tif (noSource) {\n\t\tsourceX = (sourceY = 0);\n\t} else {\n\t\tif (!(interpreterProxy.isPointers(sourceForm) && (SIZEOF(sourceForm) >= 4))) {\n\t\t\treturn false;\n\t\t}\n\t\tok = loadBitBltSourceForm();\n\t\tif (!ok) {\n\t\t\treturn false;\n\t\t}\n\t\tok = loadColorMap();\n\t\tif (!ok) {\n\t\t\treturn false;\n\t\t}\n\t\tif ((cmFlags & ColorMapNewStyle) === 0) {\n\t\t\tsetupColorMasks();\n\t\t}\n\t\tsourceX = fetchIntOrFloatofObjectifNil(BBSourceXIndex, bitBltOop, 0);\n\t\tsourceY = fetchIntOrFloatofObjectifNil(BBSourceYIndex, bitBltOop, 0);\n\t}\n\tok = loadHalftoneForm();\n\tif (!ok) {\n\t\treturn false;\n\t}\n\tclipX = fetchIntOrFloatofObjectifNil(BBClipXIndex, bitBltOop, 0);\n\tclipY = fetchIntOrFloatofObjectifNil(BBClipYIndex, bitBltOop, 0);\n\tclipWidth = fetchIntOrFloatofObjectifNil(BBClipWidthIndex, bitBltOop, destWidth);\n\tclipHeight = fetchIntOrFloatofObjectifNil(BBClipHeightIndex, bitBltOop, destHeight);\n\tif (interpreterProxy.failed()) {\n\t\treturn false;\n\t}\n\tif (clipX < 0) {\n\t\tclipWidth += clipX;\n\t\tclipX = 0;\n\t}\n\tif (clipY < 0) {\n\t\tclipHeight += clipY;\n\t\tclipY = 0;\n\t}\n\tif ((clipX + clipWidth) > destWidth) {\n\t\tclipWidth = destWidth - clipX;\n\t}\n\tif ((clipY + clipHeight) > destHeight) {\n\t\tclipHeight = destHeight - clipY;\n\t}\n\treturn true;\n}\n\n\n/*\tLoad the source form for BitBlt. Return false if anything is wrong, true otherwise. */\n\nfunction loadBitBltSourceForm() {\n\tvar sourceBitsSize;\n\n\tsourceBits = interpreterProxy.fetchPointerofObject(FormBitsIndex, sourceForm);\n\tsourceWidth = fetchIntOrFloatofObject(FormWidthIndex, sourceForm);\n\tsourceHeight = fetchIntOrFloatofObject(FormHeightIndex, sourceForm);\n\tif (!((sourceWidth >= 0) && (sourceHeight >= 0))) {\n\t\treturn false;\n\t}\n\tsourceDepth = interpreterProxy.fetchIntegerofObject(FormDepthIndex, sourceForm);\n\tsourceMSB = sourceDepth > 0;\n\tif (sourceDepth < 0) {\n\t\tsourceDepth = 0 - sourceDepth;\n\t}\n\tif (typeof sourceBits === \"number\") {\n\n\t\t/* Query for actual surface dimensions */\n\n\t\tif (!querySourceSurface(sourceBits)) {\n\t\t\treturn false;\n\t\t}\n\t\tsourcePPW = DIV(32, sourceDepth);\n\t\tsourceBits = (sourcePitch = 0);\n\t} else {\n\t\tsourcePPW = DIV(32, sourceDepth);\n\t\tsourcePitch = (DIV((sourceWidth + (sourcePPW - 1)), sourcePPW)) * 4;\n\t\tsourceBitsSize = BYTESIZEOF(sourceBits);\n\t\tif (!(interpreterProxy.isWordsOrBytes(sourceBits) && (sourceBitsSize === (sourcePitch * sourceHeight)))) {\n\t\t\treturn false;\n\t\t}\n\t\tsourceBits = sourceBits.wordsOrBytes();\n\t}\n\treturn true;\n}\n\n\n/*\tColorMap, if not nil, must be longWords, and \n\t2^N long, where N = sourceDepth for 1, 2, 4, 8 bits, \n\tor N = 9, 12, or 15 (3, 4, 5 bits per color) for 16 or 32 bits. */\n\nfunction loadColorMap() {\n\tvar oop;\n\tvar cmOop;\n\tvar cmSize;\n\tvar oldStyle;\n\n\tcmFlags = (cmMask = (cmBitsPerColor = 0));\n\tcmShiftTable = null;\n\tcmMaskTable = null;\n\tcmLookupTable = null;\n\tcmOop = interpreterProxy.fetchPointerofObject(BBColorMapIndex, bitBltOop);\n\tif (cmOop.isNil) {\n\t\treturn true;\n\t}\n\n\t/* even if identity or somesuch - may be cleared later */\n\n\tcmFlags = ColorMapPresent;\n\toldStyle = false;\n\tif (interpreterProxy.isWords(cmOop)) {\n\n\t\t/* This is an old-style color map (indexed only, with implicit RGBA conversion) */\n\n\t\tcmSize = SIZEOF(cmOop);\n\t\tcmLookupTable = cmOop.words;\n\t\toldStyle = true;\n\t\t;\n\t} else {\n\n\t\t/* A new-style color map (fully qualified) */\n\n\t\tif (!(interpreterProxy.isPointers(cmOop) && (SIZEOF(cmOop) >= 3))) {\n\t\t\treturn false;\n\t\t}\n\t\tcmShiftTable = loadColorMapShiftOrMaskFrom(interpreterProxy.fetchPointerofObject(0, cmOop));\n\t\tcmMaskTable = loadColorMapShiftOrMaskFrom(interpreterProxy.fetchPointerofObject(1, cmOop));\n\t\toop = interpreterProxy.fetchPointerofObject(2, cmOop);\n\t\tif (oop.isNil) {\n\t\t\tcmSize = 0;\n\t\t} else {\n\t\t\tif (!interpreterProxy.isWords(oop)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tcmSize = SIZEOF(oop);\n\t\t\tcmLookupTable = oop.words;\n\t\t}\n\t\tcmFlags = cmFlags | ColorMapNewStyle;\n\t\t;\n\t}\n\tif ((cmSize & (cmSize - 1)) !== 0) {\n\t\treturn false;\n\t}\n\tcmMask = cmSize - 1;\n\tcmBitsPerColor = 0;\n\tif (cmSize === 512) {\n\t\tcmBitsPerColor = 3;\n\t}\n\tif (cmSize === 4096) {\n\t\tcmBitsPerColor = 4;\n\t}\n\tif (cmSize === 32768) {\n\t\tcmBitsPerColor = 5;\n\t}\n\tif (cmSize === 0) {\n\t\tcmLookupTable = null;\n\t\tcmMask = 0;\n\t} else {\n\t\tcmFlags = cmFlags | ColorMapIndexedPart;\n\t}\n\tif (oldStyle) {\n\n\t\t/* needs implicit conversion */\n\n\t\tsetupColorMasks();\n\t}\n\tif (isIdentityMapwith(cmShiftTable, cmMaskTable)) {\n\t\tcmMaskTable = null;\n\t\tcmShiftTable = null;\n\t} else {\n\t\tcmFlags = cmFlags | ColorMapFixedPart;\n\t}\n\treturn true;\n}\n\nfunction loadColorMapShiftOrMaskFrom(mapOop) {\n\tif (mapOop.isNil) {\n\t\treturn null;\n\t}\n\tif (typeof mapOop === \"number\") {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!(interpreterProxy.isWords(mapOop) && (SIZEOF(mapOop) === 4))) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\treturn mapOop.words;\n}\n\n\n/*\tLoad the halftone form */\n\nfunction loadHalftoneForm() {\n\tvar halftoneBits;\n\n\tif (noHalftone) {\n\t\thalftoneBase = null;\n\t\treturn true;\n\t}\n\tif (interpreterProxy.isPointers(halftoneForm) && (SIZEOF(halftoneForm) >= 4)) {\n\n\t\t/* Old-style 32xN monochrome halftone Forms */\n\n\t\thalftoneBits = interpreterProxy.fetchPointerofObject(FormBitsIndex, halftoneForm);\n\t\thalftoneHeight = interpreterProxy.fetchIntegerofObject(FormHeightIndex, halftoneForm);\n\t\tif (!interpreterProxy.isWords(halftoneBits)) {\n\t\t\tnoHalftone = true;\n\t\t}\n\t} else {\n\n\t\t/* New spec accepts, basically, a word array */\n\n\t\tif (!(!interpreterProxy.isPointers(halftoneForm) && (interpreterProxy.isWords(halftoneForm)))) {\n\t\t\treturn false;\n\t\t}\n\t\thalftoneBits = halftoneForm;\n\t\thalftoneHeight = SIZEOF(halftoneBits);\n\t}\n\thalftoneBase = halftoneBits.wordsOrBytes();\n\treturn true;\n}\n\n\n/*\tLoad the surface support plugin */\n\nfunction loadSurfacePlugin() {\n\tquerySurfaceFn = interpreterProxy.ioLoadFunctionFrom(\"ioGetSurfaceFormat\", \"SurfacePlugin\");\n\tlockSurfaceFn = interpreterProxy.ioLoadFunctionFrom(\"ioLockSurface\", \"SurfacePlugin\");\n\tunlockSurfaceFn = interpreterProxy.ioLoadFunctionFrom(\"ioUnlockSurface\", \"SurfacePlugin\");\n\treturn (!!querySurfaceFn) && ((!!lockSurfaceFn) && (!!unlockSurfaceFn));\n}\n\nfunction loadWarpBltFrom(bbObj) {\n\treturn loadBitBltFromwarping(bbObj, true);\n}\n\n\n/*\tGet a pointer to the bits of any OS surfaces. */\n/*\tNotes: \n\t* For equal source/dest handles only one locking operation is performed.\n\tThis is to prevent locking of overlapping areas which does not work with\n\tcertain APIs (as an example, DirectDraw prevents locking of overlapping areas). \n\tA special case for non-overlapping but equal source/dest handle would \n\tbe possible but we would have to transfer this information over to \n\tunlockSurfaces somehow (currently, only one unlock operation is \n\tperformed for equal source and dest handles). Also, this would require\n\ta change in the notion of ioLockSurface() which is right now interpreted\n\tas a hint and not as a requirement to lock only the specific portion of\n\tthe surface.\n\n\t* The arguments in ioLockSurface() provide the implementation with\n\tan explicit hint what area is affected. It can be very useful to\n\tknow the max. affected area beforehand if getting the bits requires expensive\n\tcopy operations (e.g., like a roundtrip to the X server or a glReadPixel op).\n\tHowever, the returned pointer *MUST* point to the virtual origin of the surface\n\tand not to the beginning of the rectangle. The promise made by BitBlt\n\tis to never access data outside the given rectangle (aligned to 4byte boundaries!)\n\tso it is okay to return a pointer to the virtual origin that is actually outside\n\tthe valid memory area.\n\n\t* The area provided in ioLockSurface() is already clipped (e.g., it will always\n\tbe inside the source and dest boundingBox) but it is not aligned to word boundaries\n\tyet. It is up to the support code to compute accurate alignment if necessary.\n\n\t* Warping always requires the entire source surface to be locked because\n\tthere is no beforehand knowledge about what area will actually be traversed.\n\n\t */\n\nfunction lockSurfaces() {\n\tvar destHandle;\n\tvar sourceHandle;\n\tvar t;\n\tvar fn;\n\tvar r;\n\tvar b;\n\tvar l;\n\n\thasSurfaceLock = false;\n\tif (destBits === 0) {\n\n\t\t/* Blitting *to* OS surface */\n\n\t\tif (!lockSurfaceFn) {\n\t\t\tif (!loadSurfacePlugin()) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\tfn = lockSurfaceFn;\n\t\tdestHandle = interpreterProxy.fetchIntegerofObject(FormBitsIndex, destForm);\n\t\tif ((sourceBits === 0) && (!noSource)) {\n\n\t\t\t/* Handle the special case of equal source and dest handles */\n\n\t\t\tsourceHandle = interpreterProxy.fetchIntegerofObject(FormBitsIndex, sourceForm);\n\t\t\tif (sourceHandle === destHandle) {\n\n\t\t\t\t/* If we have overlapping source/dest we lock the entire area\n\t\t\t\tso that there is only one area transmitted */\n\n\t\t\t\tif (isWarping) {\n\n\t\t\t\t\t/* Otherwise use overlapping area */\n\n\t\t\t\t\tl = Math.min(sx, dx);\n\t\t\t\t\tr = Math.max(sx, dx) + bbW;\n\t\t\t\t\tt = Math.min(sy, dy);\n\t\t\t\t\tb = Math.max(sy, dy) + bbH;\n\t\t\t\t\tsourceBits = fn(sourceHandle, function(p){sourcePitch = p}, l, t, r-l, b-t);\n\t\t\t\t} else {\n\n\t\t\t\t\t/* When warping we always need the entire surface for the source */\n\n\t\t\t\t\tsourceBits = fn(sourceHandle, function(p){sourcePitch = p}, 0,0, sourceWidth, sourceHeight);\n\t\t\t\t}\n\t\t\t\tdestBits = sourceBits;\n\t\t\t\tdestPitch = sourcePitch;\n\t\t\t\thasSurfaceLock = true;\n\t\t\t\treturn destBits !== 0;\n\t\t\t}\n\t\t}\n\t\tdestBits = fn(destHandle, function(p){destPitch = p}, dx, dy, bbW, bbH);\n\t\thasSurfaceLock = true;\n\t}\n\tif ((sourceBits === 0) && (!noSource)) {\n\n\t\t/* Blitting *from* OS surface */\n\n\t\tsourceHandle = interpreterProxy.fetchIntegerofObject(FormBitsIndex, sourceForm);\n\t\tif (!lockSurfaceFn) {\n\t\t\tif (!loadSurfacePlugin()) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\t/* Warping requiring the entire surface */\n\n\t\tfn = lockSurfaceFn;\n\t\tif (isWarping) {\n\t\t\tsourceBits = fn(sourceHandle, function(p){sourcePitch = p}, 0, 0, sourceWidth, sourceHeight);\n\t\t} else {\n\t\t\tsourceBits = fn(sourceHandle, function(p){sourcePitch = p}, sx, sy, bbW, bbH);\n\t\t}\n\t\thasSurfaceLock = true;\n\t}\n\treturn (destBits !== 0) && ((sourceBits !== 0) || (noSource));\n}\n\n\n/*\tColor map the given source pixel. */\n\nfunction mapPixelflags(sourcePixel, mapperFlags) {\n\tvar pv;\n\n\tpv = sourcePixel;\n\tif ((mapperFlags & ColorMapPresent) !== 0) {\n\t\tif ((mapperFlags & ColorMapFixedPart) !== 0) {\n\n\t\t\t/* avoid introducing transparency by color reduction */\n\n\t\t\tpv = rgbMapPixelflags(sourcePixel, mapperFlags);\n\t\t\tif ((pv === 0) && (sourcePixel !== 0)) {\n\t\t\t\tpv = 1;\n\t\t\t}\n\t\t}\n\t\tif ((mapperFlags & ColorMapIndexedPart) !== 0) {\n\t\t\tpv = cmLookupTable[pv & cmMask];\n\t\t}\n\t}\n\treturn pv;\n}\n\n\n/*\tThe module with the given name was just unloaded.\n\tMake sure we have no dangling references. */\n\nfunction moduleUnloaded(aModuleName) {\n\tif (strcmp(aModuleName, \"SurfacePlugin\") === 0) {\n\n\t\t/* The surface plugin just shut down. How nasty. */\n\n\t\tquerySurfaceFn = (lockSurfaceFn = (unlockSurfaceFn = 0));\n\t}\n}\n\n\n/*\tAND word1 to word2 as nParts partitions of nBits each.\n\tAny field of word1 not all-ones is treated as all-zeroes.\n\tUsed for erasing, eg, brush shapes prior to ORing in a color */\n\nfunction partitionedANDtonBitsnPartitions(word1, word2, nBits, nParts) {\n\tvar result;\n\tvar i;\n\tvar mask;\n\n\n\t/* partition mask starts at the right */\n\n\tmask = maskTable[nBits];\n\tresult = 0;\n\tfor (i = 1; i <= nParts; i++) {\n\t\tif ((word1 & mask) === mask) {\n\t\t\tresult = result | (word2 & mask);\n\t\t}\n\n\t\t/* slide left to next partition */\n\n\t\tmask = SHL(mask, nBits);\n\t}\n\treturn result;\n}\n\n\n/*\tAdd word1 to word2 as nParts partitions of nBits each.\n\tThis is useful for packed pixels, or packed colors */\n/*\tUse unsigned int everywhere because it has a well known arithmetic model without undefined behavior w.r.t. overflow and shifts */\n\nfunction partitionedAddtonBitscomponentMaskcarryOverflowMask(word1, word2, nBits, componentMask, carryOverflowMask) {\n\tvar w2;\n\tvar carryOverflow;\n\tvar sum;\n\tvar w1;\n\n\n\t/* mask to remove high bit of each component */\n\n\tw1 = word1 & carryOverflowMask;\n\tw2 = word2 & carryOverflowMask;\n\n\t/* sum without high bit to avoid overflowing over next component */\n\n\tsum = (word1 ^ w1) + (word2 ^ w2);\n\n\t/* detect overflow condition for saturating */\n\n\tcarryOverflow = (w1 & w2) | ((w1 | w2) & sum);\n\treturn ((sum ^ w1) ^ w2) | ((SHR(carryOverflow, (nBits - 1))) * componentMask);\n}\n\n\n/*\tMax word1 to word2 as nParts partitions of nBits each */\n/*\tIn C, most arithmetic operations answer the same bit pattern regardless of the operands being signed or unsigned ints\n\t(this is due to the way 2's complement numbers work). However, comparisions might fail. Add the proper declaration of\n\twords as unsigned int in those cases where comparisions are done (jmv) */\n\nfunction partitionedMaxwithnBitsnPartitions(word1, word2, nBits, nParts) {\n\tvar result;\n\tvar i;\n\tvar mask;\n\n\n\t/* partition mask starts at the right */\n\n\tmask = maskTable[nBits];\n\tresult = 0;\n\tfor (i = 1; i <= nParts; i++) {\n\t\tresult = result | Math.max((word2 & mask), (word1 & mask));\n\n\t\t/* slide left to next partition */\n\n\t\tmask = SHL(mask, nBits);\n\t}\n\treturn result;\n}\n\n\n/*\tMin word1 to word2 as nParts partitions of nBits each */\n/*\tIn C, most arithmetic operations answer the same bit pattern regardless of the operands being signed or unsigned ints\n\t(this is due to the way 2's complement numbers work). However, comparisions might fail. Add the proper declaration of\n\twords as unsigned int in those cases where comparisions are done (jmv) */\n\nfunction partitionedMinwithnBitsnPartitions(word1, word2, nBits, nParts) {\n\tvar result;\n\tvar i;\n\tvar mask;\n\n\n\t/* partition mask starts at the right */\n\n\tmask = maskTable[nBits];\n\tresult = 0;\n\tfor (i = 1; i <= nParts; i++) {\n\t\tresult = result | Math.min((word2 & mask), (word1 & mask));\n\n\t\t/* slide left to next partition */\n\n\t\tmask = SHL(mask, nBits);\n\t}\n\treturn result;\n}\n\n\n/*\tMultiply word1 with word2 as nParts partitions of nBits each.\n\tThis is useful for packed pixels, or packed colors.\n\tBug in loop version when non-white background */\n/*\tIn C, integer multiplication might answer a wrong value if the unsigned values are declared as signed.\n\tThis problem does not affect this method, because the most significant bit (i.e. the sign bit) will\n\talways be zero (jmv) */\n\nfunction partitionedMulwithnBitsnPartitions(word1, word2, nBits, nParts) {\n\tvar dMask;\n\tvar result;\n\tvar product;\n\tvar sMask;\n\n\n\t/* partition mask starts at the right */\n\n\tsMask = maskTable[nBits];\n\tdMask = SHL(sMask, nBits);\n\n\t/* optimized first step */\n\n\tresult = SHR((((((word1 & sMask) + 1) * ((word2 & sMask) + 1)) - 1) & dMask), nBits);\n\tif (nParts === 1) {\n\t\treturn result;\n\t}\n\tproduct = (((((SHR(word1, nBits)) & sMask) + 1) * (((SHR(word2, nBits)) & sMask) + 1)) - 1) & dMask;\n\tresult = result | product;\n\tif (nParts === 2) {\n\t\treturn result;\n\t}\n\tproduct = (((((SHR(word1, (2 * nBits))) & sMask) + 1) * (((SHR(word2, (2 * nBits))) & sMask) + 1)) - 1) & dMask;\n\tresult = result | (SHL(product, nBits));\n\tif (nParts === 3) {\n\t\treturn result;\n\t}\n\tproduct = (((((SHR(word1, (3 * nBits))) & sMask) + 1) * (((SHR(word2, (3 * nBits))) & sMask) + 1)) - 1) & dMask;\n\tresult = result | (SHL(product, (2 * nBits)));\n\treturn result;\n}\n\nfunction partitionedRgbComponentAlphadestnBitsnPartitions(sourceWord, destWord, nBits, nParts) {\n\tvar p2;\n\tvar result;\n\tvar p1;\n\tvar i;\n\tvar v;\n\tvar mask;\n\n\n\t/* partition mask starts at the right */\n\n\tmask = maskTable[nBits];\n\tresult = 0;\n\tfor (i = 1; i <= nParts; i++) {\n\t\tp1 = SHR((sourceWord & mask), ((i - 1) * nBits));\n\t\tp2 = SHR((destWord & mask), ((i - 1) * nBits));\n\t\tif (nBits !== 32) {\n\t\t\tif (nBits === 16) {\n\t\t\t\tp1 = rgbMap16To32(p1) | 4278190080;\n\t\t\t\tp2 = rgbMap16To32(p2) | 4278190080;\n\t\t\t} else {\n\t\t\t\tp1 = rgbMapfromto(p1, nBits, 32) | 4278190080;\n\t\t\t\tp2 = rgbMapfromto(p2, nBits, 32) | 4278190080;\n\t\t\t}\n\t\t}\n\t\tv = rgbComponentAlpha32with(p1, p2);\n\t\tif (nBits !== 32) {\n\t\t\tv = rgbMapfromto(v, 32, nBits);\n\t\t}\n\t\tresult = result | (SHL(v, ((i - 1) * nBits)));\n\n\t\t/* slide left to next partition */\n\n\t\tmask = SHL(mask, nBits);\n\t}\n\treturn result;\n}\n\n\n/*\tSubtract word1 from word2 as nParts partitions of nBits each.\n\tThis is useful for packed pixels, or packed colors */\n/*\tIn C, most arithmetic operations answer the same bit pattern regardless of the operands being signed or unsigned ints\n\t(this is due to the way 2's complement numbers work). However, comparisions might fail. Add the proper declaration of\n\twords as unsigned int in those cases where comparisions are done (jmv) */\n\nfunction partitionedSubfromnBitsnPartitions(word1, word2, nBits, nParts) {\n\tvar p2;\n\tvar result;\n\tvar p1;\n\tvar i;\n\tvar mask;\n\n\n\t/* partition mask starts at the right */\n\n\tmask = maskTable[nBits];\n\tresult = 0;\n\tfor (i = 1; i <= nParts; i++) {\n\t\tp1 = word1 & mask;\n\t\tp2 = word2 & mask;\n\t\tif (p1 < p2) {\n\n\t\t\t/* result is really abs value of thedifference */\n\n\t\t\tresult = result | (p2 - p1);\n\t\t} else {\n\t\t\tresult = result | (p1 - p2);\n\t\t}\n\n\t\t/* slide left to next partition */\n\n\t\tmask = SHL(mask, nBits);\n\t}\n\treturn result;\n}\n\n\n/*\tBased on the values provided during setup choose and\n\tperform the appropriate inner loop function. */\n/*\tShould be inlined into caller for speed */\n\nfunction performCopyLoop() {\n\tdestMaskAndPointerInit();\n\tif (noSource) {\n\n\t\t/* Simple fill loop */\n\n\t\tcopyLoopNoSource();\n\t} else {\n\n\t\t/* Loop using source and dest */\n\n\t\tcheckSourceOverlap();\n\t\tif ((sourceDepth !== destDepth) || ((cmFlags !== 0) || (sourceMSB !== destMSB))) {\n\n\t\t\t/* If we must convert between pixel depths or use\n\t\t\tcolor lookups or swap pixels use the general version */\n\n\t\t\tcopyLoopPixMap();\n\t\t} else {\n\n\t\t\t/* Otherwise we simple copy pixels and can use a faster version */\n\n\t\t\tsourceSkewAndPointerInit();\n\t\t\tcopyLoop();\n\t\t}\n\t}\n}\n\n\n/*\tPick nPix pixels starting at srcBitIndex from the source, map by the\n\tcolor map, and justify them according to dstBitIndex in the resulting destWord. */\n\nfunction pickSourcePixelsflagssrcMaskdestMasksrcShiftIncdstShiftInc(nPixels, mapperFlags, srcMask, dstMask, srcShiftInc, dstShiftInc) {\n\tvar sourcePix;\n\tvar srcShift;\n\tvar sourceWord;\n\tvar dstShift;\n\tvar destPix;\n\tvar nPix;\n\tvar destWord;\n\n\n\t/* oh please */\n\n\tsourceWord = sourceBits[sourceIndex >>> 2];\n\tdestWord = 0;\n\n\t/* Hint: Keep in register */\n\n\tsrcShift = srcBitShift;\n\n\t/* Hint: Keep in register */\n\n\tdstShift = dstBitShift;\n\n\t/* always > 0 so we can use do { } while(--nPix); */\n\n\tnPix = nPixels;\n\tif (mapperFlags === (ColorMapPresent | ColorMapIndexedPart)) {\n\n\t\t/* a little optimization for (pretty crucial) blits using indexed lookups only */\n\t\t/* grab, colormap and mix in pixel */\n\n\t\tdo {\n\t\t\tsourcePix = (SHR(sourceWord, srcShift)) & srcMask;\n\t\t\tdestPix = cmLookupTable[sourcePix & cmMask];\n\n\t\t\t/* adjust dest pix index */\n\n\t\t\tdestWord = destWord | (SHL((destPix & dstMask), dstShift));\n\n\t\t\t/* adjust source pix index */\n\n\t\t\tdstShift += dstShiftInc;\n\t\t\tif ((((srcShift += srcShiftInc)) & 4294967264) !== 0) {\n\t\t\t\tif (sourceMSB) {\n\t\t\t\t\tsrcShift += 32;\n\t\t\t\t} else {\n\t\t\t\t\tsrcShift -= 32;\n\t\t\t\t}\n\t\t\t\tsourceWord = sourceBits[(sourceIndex += 4) >>> 2];\n\t\t\t}\n\t\t} while(!(((--nPix)) === 0));\n\t} else {\n\n\t\t/* grab, colormap and mix in pixel */\n\n\t\tdo {\n\t\t\tsourcePix = (SHR(sourceWord, srcShift)) & srcMask;\n\t\t\tdestPix = mapPixelflags(sourcePix, mapperFlags);\n\n\t\t\t/* adjust dest pix index */\n\n\t\t\tdestWord = destWord | (SHL((destPix & dstMask), dstShift));\n\n\t\t\t/* adjust source pix index */\n\n\t\t\tdstShift += dstShiftInc;\n\t\t\tif ((((srcShift += srcShiftInc)) & 4294967264) !== 0) {\n\t\t\t\tif (sourceMSB) {\n\t\t\t\t\tsrcShift += 32;\n\t\t\t\t} else {\n\t\t\t\t\tsrcShift -= 32;\n\t\t\t\t}\n\t\t\t\tsourceWord = sourceBits[(sourceIndex += 4) >>> 2];\n\t\t\t}\n\t\t} while(!(((--nPix)) === 0));\n\t}\n\n\t/* Store back */\n\n\tsrcBitShift = srcShift;\n\treturn destWord;\n}\n\n\n/*\tPick a single pixel from the source for WarpBlt.\n\tNote: This method is crucial for WarpBlt speed w/o smoothing\n\tand still relatively important when smoothing is used. */\n\nfunction pickWarpPixelAtXy(xx, yy) {\n\tvar sourcePix;\n\tvar sourceWord;\n\tvar srcIndex;\n\tvar x;\n\tvar y;\n\n\n\t/* *please* */\n\t/* note: it would be much faster if we could just\n\tavoid these stupid tests for being inside sourceForm. */\n\n\tif ((xx < 0) || ((yy < 0) || ((((x = xx >>> 14)) >= sourceWidth) || (((y = yy >>> 14)) >= sourceHeight)))) {\n\t\treturn 0;\n\t}\n\tsrcIndex = ((y * sourcePitch)) + ((SHR(x, warpAlignShift)) * 4);\n\n\t/* Extract pixel from word */\n\n\tsourceWord = sourceBits[srcIndex >>> 2];\n\tsrcBitShift = warpBitShiftTable[x & warpAlignMask];\n\tsourcePix = (SHR(sourceWord, srcBitShift)) & warpSrcMask;\n\treturn sourcePix;\n}\n\n\n/*\tClear all pixels in destinationWord for which the pixels of sourceWord have the same values. Used to clear areas of some constant color to zero. */\n\nfunction pixClearwith(sourceWord, destinationWord) {\n\tvar pv;\n\tvar nBits;\n\tvar result;\n\tvar i;\n\tvar mask;\n\n\tif (destDepth === 32) {\n\t\tif (sourceWord === destinationWord) {\n\t\t\treturn 0;\n\t\t} else {\n\t\t\treturn destinationWord;\n\t\t}\n\t}\n\tnBits = destDepth;\n\n\t/* partition mask starts at the right */\n\n\tmask = maskTable[nBits];\n\tresult = 0;\n\tfor (i = 1; i <= destPPW; i++) {\n\t\tpv = destinationWord & mask;\n\t\tif ((sourceWord & mask) === pv) {\n\t\t\tpv = 0;\n\t\t}\n\t\tresult = result | pv;\n\n\t\t/* slide left to next partition */\n\n\t\tmask = SHL(mask, nBits);\n\t}\n\treturn result;\n}\n\nfunction pixMaskwith(sourceWord, destinationWord) {\n\treturn partitionedANDtonBitsnPartitions(~sourceWord, destinationWord, destDepth, destPPW);\n}\n\nfunction pixPaintwith(sourceWord, destinationWord) {\n\tif (sourceWord === 0) {\n\t\treturn destinationWord;\n\t}\n\treturn sourceWord | partitionedANDtonBitsnPartitions(~sourceWord, destinationWord, destDepth, destPPW);\n}\n\n\n/*\tSwap the pixels in destWord */\n\nfunction pixSwapwith(sourceWord, destWord) {\n\tvar result;\n\tvar shift;\n\tvar lowMask;\n\tvar highMask;\n\tvar i;\n\n\tif (destPPW === 1) {\n\t\treturn destWord;\n\t}\n\tresult = 0;\n\n\t/* mask low pixel */\n\n\tlowMask = (SHL(1, destDepth)) - 1;\n\n\t/* mask high pixel */\n\n\thighMask = SHL(lowMask, ((destPPW - 1) * destDepth));\n\tshift = 32 - destDepth;\n\tresult = result | ((SHL((destWord & lowMask), shift)) | (SHR((destWord & highMask), shift)));\n\tif (destPPW <= 2) {\n\t\treturn result;\n\t}\n\tfor (i = 2; i <= (destPPW >> 1); i++) {\n\t\tlowMask = SHL(lowMask, destDepth);\n\t\thighMask = SHR(highMask, destDepth);\n\t\tshift -= destDepth * 2;\n\t\tresult = result | ((SHL((destWord & lowMask), shift)) | (SHR((destWord & highMask), shift)));\n\t}\n\treturn result;\n}\n\n\n/*\tInvoke the copyBits primitive. If the destination is the display, then copy it to the screen. */\n\nfunction primitiveCopyBits() {\n\tvar rcvr;\n\n\trcvr = interpreterProxy.stackValue(interpreterProxy.methodArgumentCount());\n\tif (!loadBitBltFrom(rcvr)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tcopyBits();\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tshowDisplayBits();\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(interpreterProxy.methodArgumentCount());\n\tif ((combinationRule === 22) || (combinationRule === 32)) {\n\t\tinterpreterProxy.pop(1);\n\t\treturn interpreterProxy.pushInteger(bitCount);\n\t}\n}\n\nfunction primitiveDisplayString() {\n\tvar charIndex;\n\tvar sourcePtr;\n\tvar stopIndex;\n\tvar bbObj;\n\tvar xTable;\n\tvar maxGlyph;\n\tvar quickBlt;\n\tvar glyphIndex;\n\tvar glyphMap;\n\tvar left;\n\tvar kernDelta;\n\tvar startIndex;\n\tvar ascii;\n\tvar sourceString;\n\n\tif (interpreterProxy.methodArgumentCount() !== 6) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tkernDelta = interpreterProxy.stackIntegerValue(0);\n\txTable = interpreterProxy.stackObjectValue(1);\n\tglyphMap = interpreterProxy.stackObjectValue(2);\n\tif (!((CLASSOF(xTable) === interpreterProxy.classArray()) && (CLASSOF(glyphMap) === interpreterProxy.classArray()))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (SIZEOF(glyphMap) !== 256) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tmaxGlyph = SIZEOF(xTable) - 2;\n\tstopIndex = interpreterProxy.stackIntegerValue(3);\n\tstartIndex = interpreterProxy.stackIntegerValue(4);\n\tsourceString = interpreterProxy.stackObjectValue(5);\n\tif (!interpreterProxy.isBytes(sourceString)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!((startIndex > 0) && ((stopIndex > 0) && (stopIndex <= BYTESIZEOF(sourceString))))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tbbObj = interpreterProxy.stackObjectValue(6);\n\tif (!loadBitBltFrom(bbObj)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif ((combinationRule === 30) || (combinationRule === 31)) {\n\n\t\t/* needs extra source alpha */\n\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tquickBlt = (destBits !== 0) && ((sourceBits !== 0) && ((noSource === false) && ((sourceForm !== destForm) && ((cmFlags !== 0) || ((sourceMSB !== destMSB) || (sourceDepth !== destDepth))))));\n\tleft = destX;\n\tsourcePtr = sourceString.bytes;\n\tfor (charIndex = startIndex; charIndex <= stopIndex; charIndex++) {\n\t\tascii = sourcePtr[charIndex - 1];\n\t\tglyphIndex = interpreterProxy.fetchIntegerofObject(ascii, glyphMap);\n\t\tif ((glyphIndex < 0) || (glyphIndex > maxGlyph)) {\n\t\t\treturn interpreterProxy.primitiveFail();\n\t\t}\n\t\tsourceX = interpreterProxy.fetchIntegerofObject(glyphIndex, xTable);\n\t\twidth = interpreterProxy.fetchIntegerofObject(glyphIndex + 1, xTable) - sourceX;\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tclipRange();\n\t\tif ((bbW > 0) && (bbH > 0)) {\n\t\t\tif (quickBlt) {\n\t\t\t\tdestMaskAndPointerInit();\n\t\t\t\tcopyLoopPixMap();\n\t\t\t\taffectedL = dx;\n\t\t\t\taffectedR = dx + bbW;\n\t\t\t\taffectedT = dy;\n\t\t\t\taffectedB = dy + bbH;\n\t\t\t} else {\n\t\t\t\tcopyBits();\n\t\t\t}\n\t\t}\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tdestX = (destX + width) + kernDelta;\n\t}\n\taffectedL = left;\n\tshowDisplayBits();\n\tinterpreterProxy.storeIntegerofObjectwithValue(BBDestXIndex, bbObj, destX);\n\tinterpreterProxy.pop(6);\n}\n\n\n/*\tInvoke the line drawing primitive. */\n\nfunction primitiveDrawLoop() {\n\tvar yDelta;\n\tvar rcvr;\n\tvar xDelta;\n\n\trcvr = interpreterProxy.stackValue(2);\n\txDelta = interpreterProxy.stackIntegerValue(1);\n\tyDelta = interpreterProxy.stackIntegerValue(0);\n\tif (!loadBitBltFrom(rcvr)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!interpreterProxy.failed()) {\n\t\tdrawLoopXY(xDelta, yDelta);\n\t\tshowDisplayBits();\n\t}\n\tif (!interpreterProxy.failed()) {\n\t\tinterpreterProxy.pop(2);\n\t}\n}\n\n\n/*\treturns the single pixel at x@y.\n\tIt does not handle LSB bitmaps right now.\n\tIf x or y are < 0, return 0 to indicate transparent (cf BitBlt>bitPeekerFromForm: usage).\n\tLikewise if x>width or y>depth.\n\tFail if the rcvr doesn't seem to be a Form, or x|y seem wrong */\n\nfunction primitivePixelValueAt() {\n\tvar pixel;\n\tvar rcvr;\n\tvar shift;\n\tvar depth;\n\tvar bitmap;\n\tvar ppW;\n\tvar word;\n\tvar stride;\n\tvar bitsSize;\n\tvar mask;\n\tvar xVal;\n\tvar yVal;\n\tvar _return_value;\n\n\txVal = interpreterProxy.stackIntegerValue(1);\n\tyVal = interpreterProxy.stackIntegerValue(0);\n\trcvr = interpreterProxy.stackValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif ((xVal < 0) || (yVal < 0)) {\n\t\t_return_value = 0;\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tinterpreterProxy.popthenPush(3, _return_value);\n\t\treturn null;\n\t}\n\trcvr = interpreterProxy.stackValue(interpreterProxy.methodArgumentCount());\n\tif (!(interpreterProxy.isPointers(rcvr) && (SIZEOF(rcvr) >= 4))) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tbitmap = interpreterProxy.fetchPointerofObject(FormBitsIndex, rcvr);\n\tif (!interpreterProxy.isWordsOrBytes(bitmap)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\twidth = interpreterProxy.fetchIntegerofObject(FormWidthIndex, rcvr);\n\theight = interpreterProxy.fetchIntegerofObject(FormHeightIndex, rcvr);\n\n\t/* if width/height/depth are not integer, fail */\n\n\tdepth = interpreterProxy.fetchIntegerofObject(FormDepthIndex, rcvr);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif ((xVal >= width) || (yVal >= height)) {\n\t\t_return_value = 0;\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tinterpreterProxy.popthenPush(3, _return_value);\n\t\treturn null;\n\t}\n\tif (depth < 0) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\n\t/* pixels in each word */\n\n\tppW = DIV(32, depth);\n\n\t/* how many words per row of pixels */\n\n\tstride = DIV((width + (ppW - 1)), ppW);\n\tbitsSize = BYTESIZEOF(bitmap);\n\tif (bitsSize !== ((stride * height) * 4)) {\n\n\t\t/* bytes per word */\n\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\n\t/* load the word that contains our target */\n\n\tword = interpreterProxy.fetchLong32ofObject((yVal * stride) + (DIV(xVal, ppW)), bitmap);\n\n\t/* make a mask to isolate the pixel within that word */\n\n\tmask = SHR(4294967295, (32 - depth));\n\n\t/* this is the tricky MSB part - we mask the xVal to find how far into the word we need, then add 1 for the pixel we're looking for, then * depth to get the bit shift */\n\n\tshift = 32 - (((xVal & (ppW - 1)) + 1) * depth);\n\n\t/* shift, mask and dim the lights */\n\n\tpixel = (SHR(word, shift)) & mask;\n\t_return_value = interpreterProxy.positive32BitIntegerFor(pixel);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(3, _return_value);\n\treturn null;\n}\n\n\n/*\tInvoke the warpBits primitive. If the destination is the display, then copy it to the screen. */\n\nfunction primitiveWarpBits() {\n\tvar rcvr;\n\n\trcvr = interpreterProxy.stackValue(interpreterProxy.methodArgumentCount());\n\tif (!loadWarpBltFrom(rcvr)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\twarpBits();\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tshowDisplayBits();\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(interpreterProxy.methodArgumentCount());\n}\n\n\n/*\tQuery the dimension of an OS surface.\n\tThis method is provided so that in case the inst vars of the\n\tsource form are broken, *actual* values of the OS surface\n\tcan be obtained. This might, for instance, happen if the user\n\tresizes the main window.\n\tNote: Moved to a separate function for better inlining of the caller. */\n\nfunction queryDestSurface(handle) {\n\tif (!querySurfaceFn) {\n\t\tif (!loadSurfacePlugin()) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn querySurfaceFn(handle, function(w, h, d, m){destWidth = w; destHeight = h; destDepth = d; destMSB = m; });\n}\n\n\n/*\tQuery the dimension of an OS surface.\n\tThis method is provided so that in case the inst vars of the\n\tsource form are broken, *actual* values of the OS surface\n\tcan be obtained. This might, for instance, happen if the user\n\tresizes the main window.\n\tNote: Moved to a separate function for better inlining of the caller. */\n\nfunction querySourceSurface(handle) {\n\tif (!querySurfaceFn) {\n\t\tif (!loadSurfacePlugin()) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn querySurfaceFn(handle, function(w, h, d, m){sourceWidth = w; sourceHeight = h; sourceDepth = d; sourceMSB = m; });\n}\n\nfunction rgbAddwith(sourceWord, destinationWord) {\n\tvar carryOverflowMask;\n\tvar componentMask;\n\n\tif (destDepth < 16) {\n\n\t\t/* Add each pixel separately */\n\n\t\tcomponentMask = (SHL(1, destDepth)) - 1;\n\t\tcarryOverflowMask = SHL((DIV(4294967295, componentMask)), (destDepth - 1));\n\t\treturn partitionedAddtonBitscomponentMaskcarryOverflowMask(sourceWord, destinationWord, destDepth, componentMask, carryOverflowMask);\n\t}\n\tif (destDepth === 16) {\n\n\t\t/* Add RGB components of each pixel separately */\n\n\t\tcomponentMask = 31;\n\t\tcarryOverflowMask = 1108361744;\n\t\treturn partitionedAddtonBitscomponentMaskcarryOverflowMask(sourceWord & 2147450879, destinationWord & 2147450879, 5, componentMask, carryOverflowMask);\n\t} else {\n\n\t\t/* Add RGBA components of the pixel separately */\n\n\t\tcomponentMask = 255;\n\t\tcarryOverflowMask = 2155905152;\n\t\treturn partitionedAddtonBitscomponentMaskcarryOverflowMask(sourceWord, destinationWord, 8, componentMask, carryOverflowMask);\n\t}\n}\n\n\n/*\tThis version assumes \n\t\tcombinationRule = 41\n\t\tsourcePixSize = 32\n\t\tdestPixSize = 16\n\t\tsourceForm ~= destForm.\n\t */\n/*\tThis particular method should be optimized in itself */\n\nfunction rgbComponentAlpha16() {\n\tvar ditherBase;\n\tvar ditherThreshold;\n\tvar srcShift;\n\tvar sourceWord;\n\tvar srcIndex;\n\tvar deltaX;\n\tvar dstIndex;\n\tvar srcAlpha;\n\tvar dstMask;\n\tvar deltaY;\n\tvar srcY;\n\tvar destWord;\n\tvar dstY;\n\tvar ditherIndex;\n\n\n\t/* So we can pre-decrement */\n\n\tdeltaY = bbH + 1;\n\tsrcY = sy;\n\tdstY = dy;\n\tsrcShift = (dx & 1) * 16;\n\tif (destMSB) {\n\t\tsrcShift = 16 - srcShift;\n\t}\n\n\t/* This is the outer loop */\n\n\tmask1 = SHL(65535, (16 - srcShift));\n\twhile (((--deltaY)) !== 0) {\n\t\tsrcIndex = ((srcY * sourcePitch)) + (sx * 4);\n\t\tdstIndex = ((dstY * destPitch)) + ((dx >> 1) * 4);\n\t\tditherBase = (dstY & 3) * 4;\n\n\t\t/* For pre-increment */\n\n\t\tditherIndex = (sx & 3) - 1;\n\n\t\t/* So we can pre-decrement */\n\n\t\tdeltaX = bbW + 1;\n\t\tdstMask = mask1;\n\t\tif (dstMask === 65535) {\n\t\t\tsrcShift = 16;\n\t\t} else {\n\t\t\tsrcShift = 0;\n\t\t}\n\t\twhile (((--deltaX)) !== 0) {\n\t\t\tditherThreshold = ditherMatrix4x4[ditherBase + ((ditherIndex = (ditherIndex + 1) & 3))];\n\t\t\tsourceWord = sourceBits[srcIndex >>> 2];\n\t\t\tsrcAlpha = sourceWord & 16777215;\n\t\t\tif (srcAlpha !== 0) {\n\n\t\t\t\t/* 0 < srcAlpha */\n\t\t\t\t/* If we have to mix colors then just copy a single word */\n\n\t\t\t\tdestWord = destBits[dstIndex >>> 2];\n\t\t\t\tdestWord = destWord & ~dstMask;\n\n\t\t\t\t/* Expand from 16 to 32 bit by adding zero bits */\n\n\t\t\t\tdestWord = SHR(destWord, srcShift);\n\n\t\t\t\t/* Mix colors */\n\n\t\t\t\tdestWord = (((destWord & 31744) << 9) | ((destWord & 992) << 6)) | (((destWord & 31) << 3) | 4278190080);\n\n\t\t\t\t/* And dither */\n\n\t\t\t\tsourceWord = rgbComponentAlpha32with(sourceWord, destWord);\n\t\t\t\tsourceWord = dither32To16threshold(sourceWord, ditherThreshold);\n\t\t\t\tif (sourceWord === 0) {\n\t\t\t\t\tsourceWord = SHL(1, srcShift);\n\t\t\t\t} else {\n\t\t\t\t\tsourceWord = SHL(sourceWord, srcShift);\n\t\t\t\t}\n\t\t\t\tdstLongAtputmask(dstIndex, sourceWord, dstMask);\n\t\t\t}\n\t\t\tsrcIndex += 4;\n\t\t\tif (destMSB) {\n\t\t\t\tif (srcShift === 0) {\n\t\t\t\t\tdstIndex += 4;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (srcShift !== 0) {\n\t\t\t\t\tdstIndex += 4;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* Toggle between 0 and 16 */\n\n\t\t\tsrcShift = srcShift ^ 16;\n\t\t\tdstMask = ~dstMask;\n\t\t}\n\t\t++srcY;\n\t\t++dstY;\n\t}\n}\n\n\n/*\tThis version assumes \n\t\tcombinationRule = 41\n\t\tsourcePixSize = destPixSize = 32\n\t\tsourceForm ~= destForm.\n\tNote: The inner loop has been optimized for dealing\n\t\twith the special case of aR = aG = aB = 0 \n\t */\n\nfunction rgbComponentAlpha32() {\n\tvar sourceWord;\n\tvar srcIndex;\n\tvar deltaX;\n\tvar dstIndex;\n\tvar srcAlpha;\n\tvar deltaY;\n\tvar srcY;\n\tvar destWord;\n\tvar dstY;\n\n\n\t/* This particular method should be optimized in itself */\n\t/* Give the compile a couple of hints */\n\t/* The following should be declared as pointers so the compiler will\n\tnotice that they're used for accessing memory locations \n\t(good to know on an Intel architecture) but then the increments\n\twould be different between ST code and C code so must hope the\n\tcompiler notices what happens (MS Visual C does) */\n\n\n\t/* So we can pre-decrement */\n\n\tdeltaY = bbH + 1;\n\tsrcY = sy;\n\n\t/* This is the outer loop */\n\n\tdstY = dy;\n\twhile (((--deltaY)) !== 0) {\n\t\tsrcIndex = ((srcY * sourcePitch)) + (sx * 4);\n\t\tdstIndex = ((dstY * destPitch)) + (dx * 4);\n\n\t\t/* So we can pre-decrement */\n\t\t/* This is the inner loop */\n\n\t\tdeltaX = bbW + 1;\n\t\twhile (((--deltaX)) !== 0) {\n\t\t\tsourceWord = sourceBits[srcIndex >>> 2];\n\t\t\tsrcAlpha = sourceWord & 16777215;\n\t\t\tif (srcAlpha === 0) {\n\t\t\t\tsrcIndex += 4;\n\n\t\t\t\t/* Now skip as many words as possible, */\n\n\t\t\t\tdstIndex += 4;\n\t\t\t\twhile ((((--deltaX)) !== 0) && ((((sourceWord = sourceBits[srcIndex >>> 2])) & 16777215) === 0)) {\n\t\t\t\t\tsrcIndex += 4;\n\t\t\t\t\tdstIndex += 4;\n\t\t\t\t}\n\t\t\t\t++deltaX;\n\t\t\t} else {\n\n\t\t\t\t/* 0 < srcAlpha */\n\t\t\t\t/* If we have to mix colors then just copy a single word */\n\n\t\t\t\tdestWord = destBits[dstIndex >>> 2];\n\t\t\t\tdestWord = rgbComponentAlpha32with(sourceWord, destWord);\n\t\t\t\tdestBits[dstIndex >>> 2] = destWord;\n\t\t\t\tsrcIndex += 4;\n\t\t\t\tdstIndex += 4;\n\t\t\t}\n\t\t}\n\t\t++srcY;\n\t\t++dstY;\n\t}\n}\n\n\n/*\t\n\tcomponentAlphaModeColor is the color,\n\tsourceWord contains an alpha value for each component of RGB\n\teach of which is encoded as0 meaning 0.0 and 255 meaning 1.0 .\n\tthe rule is...\n\t\n\tcolor = componentAlphaModeColor.\n\tcolorAlpha = componentAlphaModeAlpha.\n\tmask = sourceWord.\n\tdst.A =  colorAlpha + (1 - colorAlpha) * dst.A\n      dst.R = color.R * mask.R * colorAlpha + (1 - (mask.R * colorAlpha)) * dst.R\n      dst.G = color.G * mask.G * colorAlpha + (1 - (mask.G* colorAlpha)) * dst.G\n      dst.B = color.B * mask.B * colorAlpha + (1 - (mask.B* colorAlpha)) * dst.B\n\t */\n/*\tDo NOT inline this into optimized loops */\n\nfunction rgbComponentAlpha32with(sourceWord, destinationWord) {\n\tvar g;\n\tvar srcColor;\n\tvar aG;\n\tvar d;\n\tvar a;\n\tvar aA;\n\tvar aR;\n\tvar dstMask;\n\tvar srcAlpha;\n\tvar r;\n\tvar b;\n\tvar aB;\n\tvar alpha;\n\tvar answer;\n\tvar s;\n\n\talpha = sourceWord;\n\tif (alpha === 0) {\n\t\treturn destinationWord;\n\t}\n\tsrcColor = componentAlphaModeColor;\n\tsrcAlpha = componentAlphaModeAlpha & 255;\n\taB = alpha & 255;\n\talpha = alpha >>> 8;\n\taG = alpha & 255;\n\talpha = alpha >>> 8;\n\taR = alpha & 255;\n\talpha = alpha >>> 8;\n\taA = alpha & 255;\n\tif (srcAlpha !== 255) {\n\t\taA = (aA * srcAlpha) >>> 8;\n\t\taR = (aR * srcAlpha) >>> 8;\n\t\taG = (aG * srcAlpha) >>> 8;\n\t\taB = (aB * srcAlpha) >>> 8;\n\t}\n\tdstMask = destinationWord;\n\td = dstMask & 255;\n\ts = srcColor & 255;\n\tif (!!ungammaLookupTable) {\n\t\td = ungammaLookupTable[d];\n\t\ts = ungammaLookupTable[s];\n\t}\n\tb = ((d * (255 - aB)) >>> 8) + ((s * aB) >>> 8);\n\tif (b > 255) {\n\t\tb = 255;\n\t}\n\tif (!!gammaLookupTable) {\n\t\tb = gammaLookupTable[b];\n\t}\n\tdstMask = dstMask >>> 8;\n\tsrcColor = srcColor >>> 8;\n\td = dstMask & 255;\n\ts = srcColor & 255;\n\tif (!!ungammaLookupTable) {\n\t\td = ungammaLookupTable[d];\n\t\ts = ungammaLookupTable[s];\n\t}\n\tg = ((d * (255 - aG)) >>> 8) + ((s * aG) >>> 8);\n\tif (g > 255) {\n\t\tg = 255;\n\t}\n\tif (!!gammaLookupTable) {\n\t\tg = gammaLookupTable[g];\n\t}\n\tdstMask = dstMask >>> 8;\n\tsrcColor = srcColor >>> 8;\n\td = dstMask & 255;\n\ts = srcColor & 255;\n\tif (!!ungammaLookupTable) {\n\t\td = ungammaLookupTable[d];\n\t\ts = ungammaLookupTable[s];\n\t}\n\tr = ((d * (255 - aR)) >>> 8) + ((s * aR) >>> 8);\n\tif (r > 255) {\n\t\tr = 255;\n\t}\n\tif (!!gammaLookupTable) {\n\t\tr = gammaLookupTable[r];\n\t}\n\tdstMask = dstMask >>> 8;\n\tsrcColor = srcColor >>> 8;\n\n\t/* no need to gamma correct alpha value ? */\n\n\ta = (((dstMask & 255) * (255 - aA)) >>> 8) + aA;\n\tif (a > 255) {\n\t\ta = 255;\n\t}\n\tanswer = (((((a << 8) + r) << 8) + g) << 8) + b;\n\treturn answer;\n}\n\n\n/*\tThis version assumes \n\t\tcombinationRule = 41\n\t\tsourcePixSize = 32\n\t\tdestPixSize = 8\n\t\tsourceForm ~= destForm.\n\tNote: This is not real blending since we don't have the source colors available.\n\t */\n\nfunction rgbComponentAlpha8() {\n\tvar srcShift;\n\tvar sourceWord;\n\tvar srcIndex;\n\tvar deltaX;\n\tvar mappingTable;\n\tvar dstIndex;\n\tvar adjust;\n\tvar mapperFlags;\n\tvar srcAlpha;\n\tvar dstMask;\n\tvar deltaY;\n\tvar srcY;\n\tvar destWord;\n\tvar dstY;\n\n\n\t/* This particular method should be optimized in itself */\n\n\tmappingTable = default8To32Table();\n\tmapperFlags = cmFlags & ~ColorMapNewStyle;\n\n\t/* So we can pre-decrement */\n\n\tdeltaY = bbH + 1;\n\tsrcY = sy;\n\tdstY = dy;\n\tmask1 = (dx & 3) * 8;\n\tif (destMSB) {\n\t\tmask1 = 24 - mask1;\n\t}\n\tmask2 = AllOnes ^ (SHL(255, mask1));\n\tif ((dx & 1) === 0) {\n\t\tadjust = 0;\n\t} else {\n\t\tadjust = 522133279;\n\t}\n\tif ((dy & 1) === 0) {\n\t\tadjust = adjust ^ 522133279;\n\t}\n\twhile (((--deltaY)) !== 0) {\n\t\tadjust = adjust ^ 522133279;\n\t\tsrcIndex = ((srcY * sourcePitch)) + (sx * 4);\n\t\tdstIndex = ((dstY * destPitch)) + ((dx >> 2) * 4);\n\n\t\t/* So we can pre-decrement */\n\n\t\tdeltaX = bbW + 1;\n\t\tsrcShift = mask1;\n\n\t\t/* This is the inner loop */\n\n\t\tdstMask = mask2;\n\t\twhile (((--deltaX)) !== 0) {\n\t\t\tsourceWord = (sourceBits[srcIndex >>> 2] & ~adjust) + adjust;\n\n\t\t\t/* set srcAlpha to the average of the 3 separate aR,Ag,AB values */\n\n\t\t\tsrcAlpha = sourceWord & 16777215;\n\t\t\tsrcAlpha = DIV((((srcAlpha >>> 16) + ((srcAlpha >>> 8) & 255)) + (srcAlpha & 255)), 3);\n\t\t\tif (srcAlpha > 31) {\n\n\t\t\t\t/* Everything below 31 is transparent */\n\n\t\t\t\tif (srcAlpha > 224) {\n\n\t\t\t\t\t/* treat everything above 224 as opaque */\n\n\t\t\t\t\tsourceWord = 4294967295;\n\t\t\t\t}\n\t\t\t\tdestWord = destBits[dstIndex >>> 2];\n\t\t\t\tdestWord = destWord & ~dstMask;\n\t\t\t\tdestWord = SHR(destWord, srcShift);\n\t\t\t\tdestWord = mappingTable[destWord];\n\t\t\t\tsourceWord = rgbComponentAlpha32with(sourceWord, destWord);\n\t\t\t\tsourceWord = mapPixelflags(sourceWord, mapperFlags);\n\n\t\t\t\t/* Store back */\n\n\t\t\t\tsourceWord = SHL(sourceWord, srcShift);\n\t\t\t\tdstLongAtputmask(dstIndex, sourceWord, dstMask);\n\t\t\t}\n\t\t\tsrcIndex += 4;\n\t\t\tif (destMSB) {\n\t\t\t\tif (srcShift === 0) {\n\t\t\t\t\tdstIndex += 4;\n\t\t\t\t\tsrcShift = 24;\n\t\t\t\t\tdstMask = 16777215;\n\t\t\t\t} else {\n\t\t\t\t\tsrcShift -= 8;\n\t\t\t\t\tdstMask = (dstMask >>> 8) | 4278190080;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (srcShift === 32) {\n\t\t\t\t\tdstIndex += 4;\n\t\t\t\t\tsrcShift = 0;\n\t\t\t\t\tdstMask = 4294967040;\n\t\t\t\t} else {\n\t\t\t\t\tsrcShift += 8;\n\t\t\t\t\tdstMask = (dstMask << 8) | 255;\n\t\t\t\t}\n\t\t\t}\n\t\t\tadjust = adjust ^ 522133279;\n\t\t}\n\t\t++srcY;\n\t\t++dstY;\n\t}\n}\n\n\n/*\t\n\tcomponentAlphaModeColor is the color,\n\tsourceWord contains an alpha value for each component of RGB\n\teach of which is encoded as0 meaning 0.0 and 255 meaning 1.0 .\n\tthe rule is...\n\t\n\tcolor = componentAlphaModeColor.\n\tcolorAlpha = componentAlphaModeAlpha.\n\tmask = sourceWord.\n\tdst.A =  colorAlpha + (1 - colorAlpha) * dst.A\n      dst.R = color.R * mask.R * colorAlpha + (1 - (mask.R * colorAlpha)) * dst.R\n      dst.G = color.G * mask.G * colorAlpha + (1 - (mask.G* colorAlpha)) * dst.G\n      dst.B = color.B * mask.B * colorAlpha + (1 - (mask.B* colorAlpha)) * dst.B\n\t */\n/*\tDo NOT inline this into optimized loops */\n\nfunction rgbComponentAlphawith(sourceWord, destinationWord) {\n\tvar alpha;\n\n\talpha = sourceWord;\n\tif (alpha === 0) {\n\t\treturn destinationWord;\n\t}\n\treturn partitionedRgbComponentAlphadestnBitsnPartitions(sourceWord, destinationWord, destDepth, destPPW);\n}\n\n\n/*\tSubract the pixels in the source and destination, color by color,\n\tand return the sum of the absolute value of all the differences.\n\tFor non-rgb, return the number of differing pixels. */\n\nfunction rgbDiffwith(sourceWord, destinationWord) {\n\tvar sourcePixVal;\n\tvar bitsPerColor;\n\tvar diff;\n\tvar sourceShifted;\n\tvar pixMask;\n\tvar rgbMask;\n\tvar destShifted;\n\tvar i;\n\tvar maskShifted;\n\tvar destPixVal;\n\n\tpixMask = maskTable[destDepth];\n\tif (destDepth === 16) {\n\t\tbitsPerColor = 5;\n\t\trgbMask = 31;\n\t} else {\n\t\tbitsPerColor = 8;\n\t\trgbMask = 255;\n\t}\n\tmaskShifted = destMask;\n\tdestShifted = destinationWord;\n\tsourceShifted = sourceWord;\n\tfor (i = 1; i <= destPPW; i++) {\n\t\tif ((maskShifted & pixMask) > 0) {\n\n\t\t\t/* Only tally pixels within the destination rectangle */\n\n\t\t\tdestPixVal = destShifted & pixMask;\n\t\t\tsourcePixVal = sourceShifted & pixMask;\n\t\t\tif (destDepth < 16) {\n\t\t\t\tif (sourcePixVal === destPixVal) {\n\t\t\t\t\tdiff = 0;\n\t\t\t\t} else {\n\t\t\t\t\tdiff = 1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdiff = partitionedSubfromnBitsnPartitions(sourcePixVal, destPixVal, bitsPerColor, 3);\n\t\t\t\tdiff = ((diff & rgbMask) + ((SHR(diff, bitsPerColor)) & rgbMask)) + ((SHR((SHR(diff, bitsPerColor)), bitsPerColor)) & rgbMask);\n\t\t\t}\n\t\t\tbitCount += diff;\n\t\t}\n\t\tmaskShifted = SHR(maskShifted, destDepth);\n\t\tsourceShifted = SHR(sourceShifted, destDepth);\n\t\tdestShifted = SHR(destShifted, destDepth);\n\t}\n\treturn destinationWord;\n}\n\n\n/*\tConvert the given 16bit pixel value to a 32bit RGBA value.\n \tNote: This method is intended to deal with different source formats. */\n\nfunction rgbMap16To32(sourcePixel) {\n\treturn (((sourcePixel & 31) << 3) | ((sourcePixel & 992) << 6)) | ((sourcePixel & 31744) << 9);\n}\n\n\n/*\tConvert the given 32bit pixel value to a 32bit RGBA value.\n \tNote: This method is intended to deal with different source formats. */\n\nfunction rgbMap32To32(sourcePixel) {\n\treturn sourcePixel;\n}\n\n\n/*\tConvert the given pixel value with nBitsIn bits for each color component to a pixel value with nBitsOut bits for each color component. Typical values for nBitsIn/nBitsOut are 3, 5, or 8. */\n\nfunction rgbMapfromto(sourcePixel, nBitsIn, nBitsOut) {\n\tvar d;\n\tvar destPix;\n\tvar srcPix;\n\tvar mask;\n\n\tif (((d = nBitsOut - nBitsIn)) > 0) {\n\n\t\t/* Expand to more bits by zero-fill */\n\n\n\t\t/* Transfer mask */\n\n\t\tmask = (SHL(1, nBitsIn)) - 1;\n\t\tsrcPix = SHL(sourcePixel, d);\n\t\tmask = SHL(mask, d);\n\t\tdestPix = srcPix & mask;\n\t\tmask = SHL(mask, nBitsOut);\n\t\tsrcPix = SHL(srcPix, d);\n\t\treturn (destPix + (srcPix & mask)) + ((SHL(srcPix, d)) & (SHL(mask, nBitsOut)));\n\t} else {\n\n\t\t/* Compress to fewer bits by truncation */\n\n\t\tif (d === 0) {\n\t\t\tif (nBitsIn === 5) {\n\n\t\t\t\t/* Sometimes called with 16 bits, though pixel is 15,\n\t\t\t\t\tbut we must never return more than 15. */\n\n\t\t\t\treturn sourcePixel & 32767;\n\t\t\t}\n\t\t\tif (nBitsIn === 8) {\n\n\t\t\t\t/* Sometimes called with 32 bits, though pixel is 24,\n\t\t\t\t\tbut we must never return more than 24. */\n\n\t\t\t\treturn sourcePixel & 16777215;\n\t\t\t}\n\t\t\treturn sourcePixel;\n\t\t}\n\t\tif (sourcePixel === 0) {\n\t\t\treturn sourcePixel;\n\t\t}\n\t\td = nBitsIn - nBitsOut;\n\n\t\t/* Transfer mask */\n\n\t\tmask = (SHL(1, nBitsOut)) - 1;\n\t\tsrcPix = SHR(sourcePixel, d);\n\t\tdestPix = srcPix & mask;\n\t\tmask = SHL(mask, nBitsOut);\n\t\tsrcPix = SHR(srcPix, d);\n\t\tdestPix = (destPix + (srcPix & mask)) + ((SHR(srcPix, d)) & (SHL(mask, nBitsOut)));\n\t\tif (destPix === 0) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn destPix;\n\t}\n}\n\n\n/*\tPerform the RGBA conversion for the given source pixel */\n\nfunction rgbMapPixelflags(sourcePixel, mapperFlags) {\n\tvar val;\n\n\tval = SHIFT((sourcePixel & cmMaskTable[0]), cmShiftTable[0]);\n\tval = val | (SHIFT((sourcePixel & cmMaskTable[1]), cmShiftTable[1]));\n\tval = val | (SHIFT((sourcePixel & cmMaskTable[2]), cmShiftTable[2]));\n\treturn val | (SHIFT((sourcePixel & cmMaskTable[3]), cmShiftTable[3]));\n}\n\nfunction rgbMaxwith(sourceWord, destinationWord) {\n\tif (destDepth < 16) {\n\n\t\t/* Max each pixel separately */\n\n\t\treturn partitionedMaxwithnBitsnPartitions(sourceWord, destinationWord, destDepth, destPPW);\n\t}\n\tif (destDepth === 16) {\n\n\t\t/* Max RGB components of each pixel separately */\n\n\t\treturn partitionedMaxwithnBitsnPartitions(sourceWord, destinationWord, 5, 3) + (partitionedMaxwithnBitsnPartitions(sourceWord >>> 16, destinationWord >>> 16, 5, 3) << 16);\n\t} else {\n\n\t\t/* Max RGBA components of the pixel separately */\n\n\t\treturn partitionedMaxwithnBitsnPartitions(sourceWord, destinationWord, 8, 4);\n\t}\n}\n\nfunction rgbMinwith(sourceWord, destinationWord) {\n\tif (destDepth < 16) {\n\n\t\t/* Min each pixel separately */\n\n\t\treturn partitionedMinwithnBitsnPartitions(sourceWord, destinationWord, destDepth, destPPW);\n\t}\n\tif (destDepth === 16) {\n\n\t\t/* Min RGB components of each pixel separately */\n\n\t\treturn partitionedMinwithnBitsnPartitions(sourceWord, destinationWord, 5, 3) + (partitionedMinwithnBitsnPartitions(sourceWord >>> 16, destinationWord >>> 16, 5, 3) << 16);\n\t} else {\n\n\t\t/* Min RGBA components of the pixel separately */\n\n\t\treturn partitionedMinwithnBitsnPartitions(sourceWord, destinationWord, 8, 4);\n\t}\n}\n\nfunction rgbMinInvertwith(wordToInvert, destinationWord) {\n\tvar sourceWord;\n\n\tsourceWord = ~wordToInvert;\n\tif (destDepth < 16) {\n\n\t\t/* Min each pixel separately */\n\n\t\treturn partitionedMinwithnBitsnPartitions(sourceWord, destinationWord, destDepth, destPPW);\n\t}\n\tif (destDepth === 16) {\n\n\t\t/* Min RGB components of each pixel separately */\n\n\t\treturn partitionedMinwithnBitsnPartitions(sourceWord, destinationWord, 5, 3) + (partitionedMinwithnBitsnPartitions(sourceWord >>> 16, destinationWord >>> 16, 5, 3) << 16);\n\t} else {\n\n\t\t/* Min RGBA components of the pixel separately */\n\n\t\treturn partitionedMinwithnBitsnPartitions(sourceWord, destinationWord, 8, 4);\n\t}\n}\n\nfunction rgbMulwith(sourceWord, destinationWord) {\n\tif (destDepth < 16) {\n\n\t\t/* Mul each pixel separately */\n\n\t\treturn partitionedMulwithnBitsnPartitions(sourceWord, destinationWord, destDepth, destPPW);\n\t}\n\tif (destDepth === 16) {\n\n\t\t/* Mul RGB components of each pixel separately */\n\n\t\treturn partitionedMulwithnBitsnPartitions(sourceWord, destinationWord, 5, 3) + (partitionedMulwithnBitsnPartitions(sourceWord >>> 16, destinationWord >>> 16, 5, 3) << 16);\n\t} else {\n\n\t\t/* Mul RGBA components of the pixel separately */\n\n\t\treturn partitionedMulwithnBitsnPartitions(sourceWord, destinationWord, 8, 4);\n\t}\n}\n\nfunction rgbSubwith(sourceWord, destinationWord) {\n\tif (destDepth < 16) {\n\n\t\t/* Sub each pixel separately */\n\n\t\treturn partitionedSubfromnBitsnPartitions(sourceWord, destinationWord, destDepth, destPPW);\n\t}\n\tif (destDepth === 16) {\n\n\t\t/* Sub RGB components of each pixel separately */\n\n\t\treturn partitionedSubfromnBitsnPartitions(sourceWord, destinationWord, 5, 3) + (partitionedSubfromnBitsnPartitions(sourceWord >>> 16, destinationWord >>> 16, 5, 3) << 16);\n\t} else {\n\n\t\t/* Sub RGBA components of the pixel separately */\n\n\t\treturn partitionedSubfromnBitsnPartitions(sourceWord, destinationWord, 8, 4);\n\t}\n}\n\n\n/*\tNote: This is coded so that is can be run from Squeak. */\n\nfunction setInterpreter(anInterpreter) {\n\tvar ok;\n\n\tinterpreterProxy = anInterpreter;\n\tok = interpreterProxy.majorVersion() == VM_PROXY_MAJOR;\n\tif (ok === false) {\n\t\treturn false;\n\t}\n\tok = interpreterProxy.minorVersion() >= VM_PROXY_MINOR;\n\treturn ok;\n}\n\n\n/*\tWARNING: For WarpBlt w/ smoothing the source depth is wrong here! */\n\nfunction setupColorMasks() {\n\tvar bits;\n\tvar targetBits;\n\n\tbits = (targetBits = 0);\n\tif (sourceDepth <= 8) {\n\t\treturn null;\n\t}\n\tif (sourceDepth === 16) {\n\t\tbits = 5;\n\t}\n\tif (sourceDepth === 32) {\n\t\tbits = 8;\n\t}\n\tif (cmBitsPerColor === 0) {\n\n\t\t/* Convert to destDepth */\n\n\t\tif (destDepth <= 8) {\n\t\t\treturn null;\n\t\t}\n\t\tif (destDepth === 16) {\n\t\t\ttargetBits = 5;\n\t\t}\n\t\tif (destDepth === 32) {\n\t\t\ttargetBits = 8;\n\t\t}\n\t} else {\n\t\ttargetBits = cmBitsPerColor;\n\t}\n\tsetupColorMasksFromto(bits, targetBits);\n}\n\n\n/*\tSetup color masks for converting an incoming RGB pixel value from srcBits to targetBits. */\n\nfunction setupColorMasksFromto(srcBits, targetBits) {\n\tvar shifts = [0, 0, 0, 0];\n\tvar masks = [0, 0, 0, 0];\n\tvar deltaBits;\n\tvar mask;\n\n\t;\n\tdeltaBits = targetBits - srcBits;\n\tif (deltaBits === 0) {\n\t\treturn 0;\n\t}\n\tif (deltaBits <= 0) {\n\n\t\t/* Mask for extracting a color part of the source */\n\n\t\tmask = (SHL(1, targetBits)) - 1;\n\t\tmasks[RedIndex] = (SHL(mask, ((srcBits * 2) - deltaBits)));\n\t\tmasks[GreenIndex] = (SHL(mask, (srcBits - deltaBits)));\n\t\tmasks[BlueIndex] = (SHL(mask, (0 - deltaBits)));\n\t\tmasks[AlphaIndex] = 0;\n\t} else {\n\n\t\t/* Mask for extracting a color part of the source */\n\n\t\tmask = (SHL(1, srcBits)) - 1;\n\t\tmasks[RedIndex] = (SHL(mask, (srcBits * 2)));\n\t\tmasks[GreenIndex] = (SHL(mask, srcBits));\n\t\tmasks[BlueIndex] = mask;\n\t}\n\tshifts[RedIndex] = (deltaBits * 3);\n\tshifts[GreenIndex] = (deltaBits * 2);\n\tshifts[BlueIndex] = deltaBits;\n\tshifts[AlphaIndex] = 0;\n\tcmShiftTable = shifts;\n\tcmMaskTable = masks;\n\tcmFlags = cmFlags | (ColorMapPresent | ColorMapFixedPart);\n}\n\nfunction showDisplayBits() {\n\tinterpreterProxy.showDisplayBitsLeftTopRightBottom(destForm, affectedL, affectedT, affectedR, affectedB);\n}\n\n\n/*\tThis is only used when source and dest are same depth,\n\tie, when the barrel-shift copy loop is used. */\n\nfunction sourceSkewAndPointerInit() {\n\tvar dxLowBits;\n\tvar sxLowBits;\n\tvar dWid;\n\tvar pixPerM1;\n\n\n\t/* A mask, assuming power of two */\n\n\tpixPerM1 = destPPW - 1;\n\tsxLowBits = sx & pixPerM1;\n\n\t/* check if need to preload buffer\n\t(i.e., two words of source needed for first word of destination) */\n\n\tdxLowBits = dx & pixPerM1;\n\tif (hDir > 0) {\n\n\t\t/* n Bits stored in 1st word of dest */\n\n\t\tdWid = Math.min(bbW, (destPPW - dxLowBits));\n\t\tpreload = (sxLowBits + dWid) > pixPerM1;\n\t} else {\n\t\tdWid = Math.min(bbW, (dxLowBits + 1));\n\t\tpreload = ((sxLowBits - dWid) + 1) < 0;\n\t}\n\tif (sourceMSB) {\n\t\tskew = (sxLowBits - dxLowBits) * destDepth;\n\t} else {\n\t\tskew = (dxLowBits - sxLowBits) * destDepth;\n\t}\n\tif (preload) {\n\t\tif (skew < 0) {\n\t\t\tskew += 32;\n\t\t} else {\n\t\t\tskew -= 32;\n\t\t}\n\t}\n\n\t/* calculate increments from end of 1 line to start of next */\n\n\tsourceIndex = ((sy * sourcePitch)) + ((DIV(sx, (DIV(32, sourceDepth)))) * 4);\n\tsourceDelta = (sourcePitch * vDir) - (4 * (nWords * hDir));\n\tif (preload) {\n\n\t\t/* Compensate for extra source word fetched */\n\n\t\tsourceDelta -= 4 * hDir;\n\t}\n}\n\nfunction sourceWordwith(sourceWord, destinationWord) {\n\treturn sourceWord;\n}\n\nfunction subWordwith(sourceWord, destinationWord) {\n\treturn sourceWord - destinationWord;\n}\n\n\n/*\tTally pixels into the color map.  Those tallied are exactly those\n\tin the destination rectangle.  Note that the source should be \n\tspecified == destination, in order for the proper color map checks \n\tto be performed at setup. */\n\nfunction tallyIntoMapwith(sourceWord, destinationWord) {\n\tvar pixMask;\n\tvar mapIndex;\n\tvar destShifted;\n\tvar i;\n\tvar maskShifted;\n\tvar pixVal;\n\n\tif ((cmFlags & (ColorMapPresent | ColorMapIndexedPart)) !== (ColorMapPresent | ColorMapIndexedPart)) {\n\t\treturn destinationWord;\n\t}\n\tpixMask = maskTable[destDepth];\n\tdestShifted = destinationWord;\n\tmaskShifted = destMask;\n\tfor (i = 1; i <= destPPW; i++) {\n\t\tif ((maskShifted & pixMask) !== 0) {\n\n\t\t\t/* Only tally pixels within the destination rectangle */\n\n\t\t\tpixVal = destShifted & pixMask;\n\t\t\tif (destDepth < 16) {\n\t\t\t\tmapIndex = pixVal;\n\t\t\t} else {\n\t\t\t\tif (destDepth === 16) {\n\t\t\t\t\tmapIndex = rgbMapfromto(pixVal, 5, cmBitsPerColor);\n\t\t\t\t} else {\n\t\t\t\t\tmapIndex = rgbMapfromto(pixVal, 8, cmBitsPerColor);\n\t\t\t\t}\n\t\t\t}\n\t\t\ttallyMapAtput(mapIndex, tallyMapAt(mapIndex) + 1);\n\t\t}\n\t\tmaskShifted = SHR(maskShifted, destDepth);\n\t\tdestShifted = SHR(destShifted, destDepth);\n\t}\n\treturn destinationWord;\n}\n\n\n/*\tReturn the word at position idx from the colorMap */\n\nfunction tallyMapAt(idx) {\n\treturn cmLookupTable[idx & cmMask];\n}\n\n\n/*\tStore the word at position idx in the colorMap */\n\nfunction tallyMapAtput(idx, value) {\n\treturn cmLookupTable[idx & cmMask] = value;\n}\n\n\n/*\tShortcut for stuff that's being run from the balloon engine.\n\tSince we do this at each scan line we should avoid the expensive \n\tsetup for source and destination. */\n/*\tWe need a source. */\n\nfunction tryCopyingBitsQuickly() {\n\tif (noSource) {\n\t\treturn false;\n\t}\n\tif (!((combinationRule === 34) || (combinationRule === 41))) {\n\t\treturn false;\n\t}\n\tif (sourceDepth !== 32) {\n\t\treturn false;\n\t}\n\tif (sourceForm === destForm) {\n\t\treturn false;\n\t}\n\tif (combinationRule === 41) {\n\t\tif (destDepth === 32) {\n\t\t\trgbComponentAlpha32();\n\t\t\taffectedL = dx;\n\t\t\taffectedR = dx + bbW;\n\t\t\taffectedT = dy;\n\t\t\taffectedB = dy + bbH;\n\t\t\treturn true;\n\t\t}\n\t\tif (destDepth === 16) {\n\t\t\trgbComponentAlpha16();\n\t\t\taffectedL = dx;\n\t\t\taffectedR = dx + bbW;\n\t\t\taffectedT = dy;\n\t\t\taffectedB = dy + bbH;\n\t\t\treturn true;\n\t\t}\n\t\tif (destDepth === 8) {\n\t\t\trgbComponentAlpha8();\n\t\t\taffectedL = dx;\n\t\t\taffectedR = dx + bbW;\n\t\t\taffectedT = dy;\n\t\t\taffectedB = dy + bbH;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\tif (destDepth < 8) {\n\t\treturn false;\n\t}\n\tif ((destDepth === 8) && ((cmFlags & ColorMapPresent) === 0)) {\n\t\treturn false;\n\t}\n\tif (destDepth === 32) {\n\t\talphaSourceBlendBits32();\n\t}\n\tif (destDepth === 16) {\n\t\talphaSourceBlendBits16();\n\t}\n\tif (destDepth === 8) {\n\t\talphaSourceBlendBits8();\n\t}\n\taffectedL = dx;\n\taffectedR = dx + bbW;\n\taffectedT = dy;\n\taffectedB = dy + bbH;\n\treturn true;\n}\n\n\n/*\tUnlock the bits of any OS surfaces. */\n/*\tSee the comment in lockSurfaces. Similar rules apply. That is, the area provided in ioUnlockSurface can be used to determine the dirty region after drawing. If a source is unlocked, then the area will be (0,0,0,0) to indicate that no portion is dirty. */\n\nfunction unlockSurfaces() {\n\tvar destHandle;\n\tvar sourceHandle;\n\tvar fn;\n\tvar destLocked;\n\n\tif (hasSurfaceLock) {\n\t\tif (!unlockSurfaceFn) {\n\t\t\tif (!loadSurfacePlugin()) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\tfn = unlockSurfaceFn;\n\t\tdestLocked = false;\n\t\tdestHandle = interpreterProxy.fetchPointerofObject(FormBitsIndex, destForm);\n\t\tif (typeof destHandle === \"number\") {\n\n\t\t\t/* The destBits are always assumed to be dirty */\n\n\t\t\tdestHandle = destHandle;\n\t\t\tfn(destHandle, affectedL, affectedT, affectedR-affectedL, affectedB-affectedT);\n\t\t\tdestBits = (destPitch = 0);\n\t\t\tdestLocked = true;\n\t\t}\n\t\tif (!noSource) {\n\t\t\tsourceHandle = interpreterProxy.fetchPointerofObject(FormBitsIndex, sourceForm);\n\t\t\tif (typeof sourceHandle === \"number\") {\n\n\t\t\t\t/* Only unlock sourceHandle if different from destHandle */\n\n\t\t\t\tsourceHandle = sourceHandle;\n\t\t\t\tif (!(destLocked && (sourceHandle === destHandle))) {\n\t\t\t\t\tfn(sourceHandle, 0, 0, 0, 0);\n\t\t\t\t}\n\t\t\t\tsourceBits = (sourcePitch = 0);\n\t\t\t}\n\t\t}\n\t\thasSurfaceLock = false;\n\t}\n}\n\nfunction warpBits() {\n\tvar ns;\n\n\tns = noSource;\n\tnoSource = true;\n\tclipRange();\n\tnoSource = ns;\n\tif (noSource || ((bbW <= 0) || (bbH <= 0))) {\n\n\t\t/* zero width or height; noop */\n\n\t\taffectedL = (affectedR = (affectedT = (affectedB = 0)));\n\t\treturn null;\n\t}\n\tif (!lockSurfaces()) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tdestMaskAndPointerInit();\n\twarpLoop();\n\tif (hDir > 0) {\n\t\taffectedL = dx;\n\t\taffectedR = dx + bbW;\n\t} else {\n\t\taffectedL = (dx - bbW) + 1;\n\t\taffectedR = dx + 1;\n\t}\n\tif (vDir > 0) {\n\t\taffectedT = dy;\n\t\taffectedB = dy + bbH;\n\t} else {\n\t\taffectedT = (dy - bbH) + 1;\n\t\taffectedB = dy + 1;\n\t}\n\tunlockSurfaces();\n}\n\n\n/*\tThis version of the inner loop traverses an arbirary quadrilateral\n\tsource, thus producing a general affine transformation. */\n\nfunction warpLoop() {\n\tvar mapperFlags;\n\tvar dstShiftLeft;\n\tvar words;\n\tvar skewWord;\n\tvar nSteps;\n\tvar deltaP43y;\n\tvar destWord;\n\tvar startBits;\n\tvar mergeFnwith;\n\tvar deltaP43x;\n\tvar pBy;\n\tvar i;\n\tvar yDelta;\n\tvar halftoneWord;\n\tvar mergeWord;\n\tvar pAy;\n\tvar dstShiftInc;\n\tvar pBx;\n\tvar sourceMapOop;\n\tvar xDelta;\n\tvar pAx;\n\tvar deltaP12y;\n\tvar endBits;\n\tvar nPix;\n\tvar deltaP12x;\n\tvar smoothingCount;\n\n\tmergeFnwith = opTable[combinationRule + 1];\n\tmergeFnwith;\n\tif (!(SIZEOF(bitBltOop) >= (BBWarpBase + 12))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tnSteps = height - 1;\n\tif (nSteps <= 0) {\n\t\tnSteps = 1;\n\t}\n\tpAx = fetchIntOrFloatofObject(BBWarpBase, bitBltOop);\n\twords = fetchIntOrFloatofObject(BBWarpBase + 3, bitBltOop);\n\tdeltaP12x = deltaFromtonSteps(pAx, words, nSteps);\n\tif (deltaP12x < 0) {\n\t\tpAx = words - (nSteps * deltaP12x);\n\t}\n\tpAy = fetchIntOrFloatofObject(BBWarpBase + 1, bitBltOop);\n\twords = fetchIntOrFloatofObject(BBWarpBase + 4, bitBltOop);\n\tdeltaP12y = deltaFromtonSteps(pAy, words, nSteps);\n\tif (deltaP12y < 0) {\n\t\tpAy = words - (nSteps * deltaP12y);\n\t}\n\tpBx = fetchIntOrFloatofObject(BBWarpBase + 9, bitBltOop);\n\twords = fetchIntOrFloatofObject(BBWarpBase + 6, bitBltOop);\n\tdeltaP43x = deltaFromtonSteps(pBx, words, nSteps);\n\tif (deltaP43x < 0) {\n\t\tpBx = words - (nSteps * deltaP43x);\n\t}\n\tpBy = fetchIntOrFloatofObject(BBWarpBase + 10, bitBltOop);\n\twords = fetchIntOrFloatofObject(BBWarpBase + 7, bitBltOop);\n\tdeltaP43y = deltaFromtonSteps(pBy, words, nSteps);\n\tif (deltaP43y < 0) {\n\t\tpBy = words - (nSteps * deltaP43y);\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn false;\n\t}\n\tif (interpreterProxy.methodArgumentCount() === 2) {\n\t\tsmoothingCount = interpreterProxy.stackIntegerValue(1);\n\t\tsourceMapOop = interpreterProxy.stackValue(0);\n\t\tif (sourceMapOop.isNil) {\n\t\t\tif (sourceDepth < 16) {\n\n\t\t\t\t/* color map is required to smooth non-RGB dest */\n\n\t\t\t\treturn interpreterProxy.primitiveFail();\n\t\t\t}\n\t\t} else {\n\t\t\tif (SIZEOF(sourceMapOop) < (SHL(1, sourceDepth))) {\n\n\t\t\t\t/* sourceMap must be long enough for sourceDepth */\n\n\t\t\t\treturn interpreterProxy.primitiveFail();\n\t\t\t}\n\t\t\tsourceMapOop = sourceMapOop.wordsOrBytes();\n\t\t}\n\t} else {\n\t\tsmoothingCount = 1;\n\t\tsourceMapOop = interpreterProxy.nilObject();\n\t}\n\tnSteps = width - 1;\n\tif (nSteps <= 0) {\n\t\tnSteps = 1;\n\t}\n\tstartBits = destPPW - (dx & (destPPW - 1));\n\tendBits = (((dx + bbW) - 1) & (destPPW - 1)) + 1;\n\tif (bbW < startBits) {\n\t\tstartBits = bbW;\n\t}\n\tif (destY < clipY) {\n\n\t\t/* Advance increments if there was clipping in y */\n\n\t\tpAx += (clipY - destY) * deltaP12x;\n\t\tpAy += (clipY - destY) * deltaP12y;\n\t\tpBx += (clipY - destY) * deltaP43x;\n\t\tpBy += (clipY - destY) * deltaP43y;\n\t}\n\twarpLoopSetup();\n\tif ((smoothingCount > 1) && ((cmFlags & ColorMapNewStyle) === 0)) {\n\t\tif (!cmLookupTable) {\n\t\t\tif (destDepth === 16) {\n\t\t\t\tsetupColorMasksFromto(8, 5);\n\t\t\t}\n\t\t} else {\n\t\t\tsetupColorMasksFromto(8, cmBitsPerColor);\n\t\t}\n\t}\n\tmapperFlags = cmFlags & ~ColorMapNewStyle;\n\tif (destMSB) {\n\t\tdstShiftInc = 0 - destDepth;\n\t\tdstShiftLeft = 32 - destDepth;\n\t} else {\n\t\tdstShiftInc = destDepth;\n\t\tdstShiftLeft = 0;\n\t}\n\tfor (i = 1; i <= bbH; i++) {\n\n\t\t/* here is the vertical loop... */\n\n\t\txDelta = deltaFromtonSteps(pAx, pBx, nSteps);\n\t\tif (xDelta >= 0) {\n\t\t\tsx = pAx;\n\t\t} else {\n\t\t\tsx = pBx - (nSteps * xDelta);\n\t\t}\n\t\tyDelta = deltaFromtonSteps(pAy, pBy, nSteps);\n\t\tif (yDelta >= 0) {\n\t\t\tsy = pAy;\n\t\t} else {\n\t\t\tsy = pBy - (nSteps * yDelta);\n\t\t}\n\t\tif (destMSB) {\n\t\t\tdstBitShift = 32 - (((dx & (destPPW - 1)) + 1) * destDepth);\n\t\t} else {\n\t\t\tdstBitShift = (dx & (destPPW - 1)) * destDepth;\n\t\t}\n\t\tif (destX < clipX) {\n\n\t\t\t/* Advance increments if there was clipping in x */\n\n\t\t\tsx += (clipX - destX) * xDelta;\n\t\t\tsy += (clipX - destX) * yDelta;\n\t\t}\n\t\tif (noHalftone) {\n\t\t\thalftoneWord = AllOnes;\n\t\t} else {\n\t\t\thalftoneWord = halftoneAt((dy + i) - 1);\n\t\t}\n\t\tdestMask = mask1;\n\n\t\t/* Here is the inner loop... */\n\n\t\tnPix = startBits;\n\t\twords = nWords;\n\t\tdo {\n\n\t\t\t/* pick up word */\n\n\t\t\tif (smoothingCount === 1) {\n\n\t\t\t\t/* Faster if not smoothing */\n\n\t\t\t\tskewWord = warpPickSourcePixelsxDeltahyDeltahxDeltavyDeltavdstShiftIncflags(nPix, xDelta, yDelta, deltaP12x, deltaP12y, dstShiftInc, mapperFlags);\n\t\t\t} else {\n\n\t\t\t\t/* more difficult with smoothing */\n\n\t\t\t\tskewWord = warpPickSmoothPixelsxDeltahyDeltahxDeltavyDeltavsourceMapsmoothingdstShiftInc(nPix, xDelta, yDelta, deltaP12x, deltaP12y, sourceMapOop, smoothingCount, dstShiftInc);\n\t\t\t}\n\t\t\tdstBitShift = dstShiftLeft;\n\t\t\tif (destMask === AllOnes) {\n\n\t\t\t\t/* avoid read-modify-write */\n\n\t\t\t\tmergeWord = mergeFnwith(skewWord & halftoneWord, destBits[destIndex >>> 2]);\n\t\t\t\tdestBits[destIndex >>> 2] = destMask & mergeWord;\n\t\t\t} else {\n\n\t\t\t\t/* General version using dest masking */\n\n\t\t\t\tdestWord = destBits[destIndex >>> 2];\n\t\t\t\tmergeWord = mergeFnwith(skewWord & halftoneWord, destWord & destMask);\n\t\t\t\tdestWord = (destMask & mergeWord) | (destWord & ~destMask);\n\t\t\t\tdestBits[destIndex >>> 2] = destWord;\n\t\t\t}\n\t\t\tdestIndex += 4;\n\t\t\tif (words === 2) {\n\n\t\t\t\t/* e.g., is the next word the last word? */\n\t\t\t\t/* set mask for last word in this row */\n\n\t\t\t\tdestMask = mask2;\n\t\t\t\tnPix = endBits;\n\t\t\t} else {\n\n\t\t\t\t/* use fullword mask for inner loop */\n\n\t\t\t\tdestMask = AllOnes;\n\t\t\t\tnPix = destPPW;\n\t\t\t}\n\t\t} while(!(((--words)) === 0));\n\t\tpAx += deltaP12x;\n\t\tpAy += deltaP12y;\n\t\tpBx += deltaP43x;\n\t\tpBy += deltaP43y;\n\t\tdestIndex += destDelta;\n\t}\n}\n\n\n/*\tSetup values for faster pixel fetching. */\n\nfunction warpLoopSetup() {\n\tvar i;\n\tvar words;\n\n\n\t/* warpSrcShift = log2(sourceDepth) */\n\n\twarpSrcShift = 0;\n\n\t/* recycle temp */\n\n\twords = sourceDepth;\n\twhile (!(words === 1)) {\n\t\t++warpSrcShift;\n\t\twords = words >>> 1;\n\t}\n\n\t/* warpAlignShift: Shift for aligning x position to word boundary */\n\n\twarpSrcMask = maskTable[sourceDepth];\n\n\t/* warpAlignMask: Mask for extracting the pixel position from an x position */\n\n\twarpAlignShift = 5 - warpSrcShift;\n\n\t/* Setup the lookup table for source bit shifts */\n\t/* warpBitShiftTable: given an sub-word x value what's the bit shift? */\n\n\twarpAlignMask = (SHL(1, warpAlignShift)) - 1;\n\tfor (i = 0; i <= warpAlignMask; i++) {\n\t\tif (sourceMSB) {\n\t\t\twarpBitShiftTable[i] = (32 - (SHL((i + 1), warpSrcShift)));\n\t\t} else {\n\t\t\twarpBitShiftTable[i] = (SHL(i, warpSrcShift));\n\t\t}\n\t}\n}\n\n\n/*\tPick n (sub-) pixels from the source form, mapped by sourceMap,\n\taverage the RGB values, map by colorMap and return the new word.\n\tThis version is only called from WarpBlt with smoothingCount > 1 */\n\nfunction warpPickSmoothPixelsxDeltahyDeltahxDeltavyDeltavsourceMapsmoothingdstShiftInc(nPixels, xDeltah, yDeltah, xDeltav, yDeltav, sourceMap, n, dstShiftInc) {\n\tvar k;\n\tvar destWord;\n\tvar xdh;\n\tvar j;\n\tvar ydh;\n\tvar i;\n\tvar xdv;\n\tvar dstMask;\n\tvar ydv;\n\tvar rgb;\n\tvar y;\n\tvar b;\n\tvar yy;\n\tvar g;\n\tvar x;\n\tvar a;\n\tvar r;\n\tvar nPix;\n\tvar xx;\n\n\n\t/* nope - too much stuff in here */\n\n\tdstMask = maskTable[destDepth];\n\tdestWord = 0;\n\tif (n === 2) {\n\n\t\t/* Try avoiding divides for most common n (divide by 2 is generated as shift) */\n\n\t\txdh = xDeltah >> 1;\n\t\tydh = yDeltah >> 1;\n\t\txdv = xDeltav >> 1;\n\t\tydv = yDeltav >> 1;\n\t} else {\n\t\txdh = DIV(xDeltah, n);\n\t\tydh = DIV(yDeltah, n);\n\t\txdv = DIV(xDeltav, n);\n\t\tydv = DIV(yDeltav, n);\n\t}\n\ti = nPixels;\n\tdo {\n\t\tx = sx;\n\t\ty = sy;\n\n\t\t/* Pick and average n*n subpixels */\n\n\t\ta = (r = (g = (b = 0)));\n\n\t\t/* actual number of pixels (not clipped and not transparent) */\n\n\t\tnPix = 0;\n\t\tj = n;\n\t\tdo {\n\t\t\txx = x;\n\t\t\tyy = y;\n\t\t\tk = n;\n\t\t\tdo {\n\n\t\t\t\t/* get a single subpixel */\n\n\t\t\t\trgb = pickWarpPixelAtXy(xx, yy);\n\t\t\t\tif (!((combinationRule === 25) && (rgb === 0))) {\n\n\t\t\t\t\t/* If not clipped and not transparent, then tally rgb values */\n\n\t\t\t\t\t++nPix;\n\t\t\t\t\tif (sourceDepth < 16) {\n\n\t\t\t\t\t\t/* Get RGBA values from sourcemap table */\n\n\t\t\t\t\t\trgb = sourceMap[rgb];\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t/* Already in RGB format */\n\n\t\t\t\t\t\tif (sourceDepth === 16) {\n\t\t\t\t\t\t\trgb = rgbMap16To32(rgb);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trgb = rgbMap32To32(rgb);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tb += rgb & 255;\n\t\t\t\t\tg += (rgb >>> 8) & 255;\n\t\t\t\t\tr += (rgb >>> 16) & 255;\n\t\t\t\t\ta += rgb >>> 24;\n\t\t\t\t}\n\t\t\t\txx += xdh;\n\t\t\t\tyy += ydh;\n\t\t\t} while(!(((--k)) === 0));\n\t\t\tx += xdv;\n\t\t\ty += ydv;\n\t\t} while(!(((--j)) === 0));\n\t\tif ((nPix === 0) || ((combinationRule === 25) && (nPix < ((n * n) >> 1)))) {\n\n\t\t\t/* All pixels were 0, or most were transparent */\n\n\t\t\trgb = 0;\n\t\t} else {\n\n\t\t\t/* normalize rgba sums */\n\n\t\t\tif (nPix === 4) {\n\n\t\t\t\t/* Try to avoid divides for most common n */\n\n\t\t\t\tr = r >>> 2;\n\t\t\t\tg = g >>> 2;\n\t\t\t\tb = b >>> 2;\n\t\t\t\ta = a >>> 2;\n\t\t\t} else {\n\t\t\t\tr = DIV(r, nPix);\n\t\t\t\tg = DIV(g, nPix);\n\t\t\t\tb = DIV(b, nPix);\n\t\t\t\ta = DIV(a, nPix);\n\t\t\t}\n\n\t\t\t/* map the pixel */\n\n\t\t\trgb = (((a << 24) + (r << 16)) + (g << 8)) + b;\n\t\t\tif (rgb === 0) {\n\n\t\t\t\t/* only generate zero if pixel is really transparent */\n\n\t\t\t\tif ((((r + g) + b) + a) > 0) {\n\t\t\t\t\trgb = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\trgb = mapPixelflags(rgb, cmFlags);\n\t\t}\n\t\tdestWord = destWord | (SHL((rgb & dstMask), dstBitShift));\n\t\tdstBitShift += dstShiftInc;\n\t\tsx += xDeltah;\n\t\tsy += yDeltah;\n\t} while(!(((--i)) === 0));\n\treturn destWord;\n}\n\n\n/*\tPick n pixels from the source form,\n\tmap by colorMap and return aligned by dstBitShift.\n\tThis version is only called from WarpBlt with smoothingCount = 1 */\n\nfunction warpPickSourcePixelsxDeltahyDeltahxDeltavyDeltavdstShiftIncflags(nPixels, xDeltah, yDeltah, xDeltav, yDeltav, dstShiftInc, mapperFlags) {\n\tvar sourcePix;\n\tvar nPix;\n\tvar destPix;\n\tvar dstMask;\n\tvar destWord;\n\n\n\t/* Yepp - this should go into warpLoop */\n\n\tdstMask = maskTable[destDepth];\n\tdestWord = 0;\n\tnPix = nPixels;\n\tif (mapperFlags === (ColorMapPresent | ColorMapIndexedPart)) {\n\n\t\t/* a little optimization for (pretty crucial) blits using indexed lookups only */\n\t\t/* grab, colormap and mix in pixel */\n\n\t\tdo {\n\t\t\tsourcePix = pickWarpPixelAtXy(sx, sy);\n\t\t\tdestPix = cmLookupTable[sourcePix & cmMask];\n\t\t\tdestWord = destWord | (SHL((destPix & dstMask), dstBitShift));\n\t\t\tdstBitShift += dstShiftInc;\n\t\t\tsx += xDeltah;\n\t\t\tsy += yDeltah;\n\t\t} while(!(((--nPix)) === 0));\n\t} else {\n\n\t\t/* grab, colormap and mix in pixel */\n\n\t\tdo {\n\t\t\tsourcePix = pickWarpPixelAtXy(sx, sy);\n\t\t\tdestPix = mapPixelflags(sourcePix, mapperFlags);\n\t\t\tdestWord = destWord | (SHL((destPix & dstMask), dstBitShift));\n\t\t\tdstBitShift += dstShiftInc;\n\t\t\tsx += xDeltah;\n\t\t\tsy += yDeltah;\n\t\t} while(!(((--nPix)) === 0));\n\t}\n\treturn destWord;\n}\n\n\nSqueak.registerExternalModule(\"BitBltPlugin\", {\n\tprimitiveCopyBits: primitiveCopyBits,\n\tcopyBits: copyBits,\n\tmoduleUnloaded: moduleUnloaded,\n\tprimitiveDrawLoop: primitiveDrawLoop,\n\tprimitiveDisplayString: primitiveDisplayString,\n\tinitialiseModule: initialiseModule,\n\tloadBitBltFrom: loadBitBltFrom,\n\tsetInterpreter: setInterpreter,\n\tprimitiveWarpBits: primitiveWarpBits,\n\tgetModuleName: getModuleName,\n\tprimitivePixelValueAt: primitivePixelValueAt,\n\tcopyBitsFromtoat: copyBitsFromtoat,\n});\n\n}); // end of module\n","/* Smalltalk from Squeak4.5 with VMMaker 4.13.6 translated as JS source on 3 November 2014 1:52:20 pm */\n/* Automatically generated by\n\tJSPluginCodeGenerator VMMakerJS-bf.15 uuid: fd4e10f2-3773-4e80-8bb5-c4b471a014e5\n   from\n\tFFTPlugin VMMaker-bf.353 uuid: 8ae25e7e-8d2c-451e-8277-598b30e9c002\n */\n\nmodule(\"users.bert.SqueakJS.plugins.FFTPlugin\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";\n\nvar VM_PROXY_MAJOR = 1;\nvar VM_PROXY_MINOR = 11;\n\n/*** Functions ***/\nfunction CLASSOF(obj) { return typeof obj === \"number\" ? interpreterProxy.classSmallInteger() : obj.sqClass }\nfunction SIZEOF(obj) { return obj.pointers ? obj.pointers.length : obj.words ? obj.words.length : obj.bytes ? obj.bytes.length : 0 }\nfunction BYTESIZEOF(obj) { return obj.bytes ? obj.bytes.length : obj.words ? obj.words.length * 4 : 0 }\nfunction DIV(a, b) { return Math.floor(a / b) | 0; }   // integer division\nfunction MOD(a, b) { return a - DIV(a, b) * b | 0; }   // signed modulus\nfunction SHL(a, b) { return b > 31 ? 0 : a << b; }     // fix JS shift\nfunction SHR(a, b) { return b > 31 ? 0 : a >>> b; }    // fix JS shift\nfunction SHIFT(a, b) { return b < 0 ? (b < -31 ? 0 : a >>> (0-b) ) : (b > 31 ? 0 : a << b); }\n\n/*** Variables ***/\nvar fftSize = 0;\nvar imagData = null;\nvar imagDataSize = 0;\nvar interpreterProxy = null;\nvar moduleName = \"FFTPlugin 3 November 2014 (e)\";\nvar nu = 0;\nvar permTable = null;\nvar permTableSize = 0;\nvar realData = null;\nvar realDataSize = 0;\nvar sinTable = null;\nvar sinTableSize = 0;\n\n\n\n/*\tReturn the first indexable word of oop which is assumed to be variableWordSubclass */\n\nfunction checkedFloatPtrOf(oop) {\n\tinterpreterProxy.success(interpreterProxy.isWords(oop));\n\tif (interpreterProxy.failed()) {\n\t\treturn 0;\n\t}\n\treturn oop.wordsAsFloat32Array();\n}\n\n\n/*\tReturn the first indexable word of oop which is assumed to be variableWordSubclass */\n\nfunction checkedWordPtrOf(oop) {\n\tinterpreterProxy.success(interpreterProxy.isWords(oop));\n\treturn oop.words;\n}\n\n\n/*\tNote: This is hardcoded so it can be run from Squeak.\n\tThe module name is used for validating a module *after*\n\tit is loaded to check if it does really contain the module\n\twe're thinking it contains. This is important! */\n\nfunction getModuleName() {\n\treturn moduleName;\n}\n\nfunction halt() {\n\t;\n}\n\nfunction loadFFTFrom(fftOop) {\n\tvar oop;\n\n\tinterpreterProxy.success(SIZEOF(fftOop) >= 6);\n\tif (interpreterProxy.failed()) {\n\t\treturn false;\n\t}\n\tnu = interpreterProxy.fetchIntegerofObject(0, fftOop);\n\tfftSize = interpreterProxy.fetchIntegerofObject(1, fftOop);\n\toop = interpreterProxy.fetchPointerofObject(2, fftOop);\n\tsinTableSize = SIZEOF(oop);\n\tsinTable = checkedFloatPtrOf(oop);\n\toop = interpreterProxy.fetchPointerofObject(3, fftOop);\n\tpermTableSize = SIZEOF(oop);\n\tpermTable = checkedWordPtrOf(oop);\n\toop = interpreterProxy.fetchPointerofObject(4, fftOop);\n\trealDataSize = SIZEOF(oop);\n\trealData = checkedFloatPtrOf(oop);\n\toop = interpreterProxy.fetchPointerofObject(5, fftOop);\n\timagDataSize = SIZEOF(oop);\n\n\t/* Check assumptions about sizes */\n\n\timagData = checkedFloatPtrOf(oop);\n\tinterpreterProxy.success((((((SHL(1, nu)) === fftSize) && (((fftSize >> 2) + 1) === sinTableSize)) && (fftSize === realDataSize)) && (fftSize === imagDataSize)) && (realDataSize === imagDataSize));\n\treturn interpreterProxy.failed() === false;\n}\n\nfunction permuteData() {\n\tvar a;\n\tvar b;\n\tvar end;\n\tvar i;\n\tvar tmp;\n\n\ti = 0;\n\tend = permTableSize;\n\twhile (i < end) {\n\t\ta = permTable[i] - 1;\n\t\tb = permTable[i + 1] - 1;\n\t\tif (!((a < realDataSize) && (b < realDataSize))) {\n\t\t\treturn interpreterProxy.success(false);\n\t\t}\n\t\ttmp = realData[a];\n\t\trealData[a] = realData[b];\n\t\trealData[b] = tmp;\n\t\ttmp = imagData[a];\n\t\timagData[a] = imagData[b];\n\t\timagData[b] = tmp;\n\t\ti += 2;\n\t}\n}\n\nfunction primitiveFFTPermuteData() {\n\tvar rcvr;\n\n\trcvr = interpreterProxy.stackObjectValue(0);\n\tif (!loadFFTFrom(rcvr)) {\n\t\treturn null;\n\t}\n\tpermuteData();\n\tif (interpreterProxy.failed()) {\n\n\t\t/* permuteData went wrong. Do the permutation again -- this will restore the original order */\n\n\t\tpermuteData();\n\t}\n}\n\nfunction primitiveFFTScaleData() {\n\tvar rcvr;\n\n\trcvr = interpreterProxy.stackObjectValue(0);\n\tif (!loadFFTFrom(rcvr)) {\n\t\treturn null;\n\t}\n\tscaleData();\n}\n\nfunction primitiveFFTTransformData() {\n\tvar forward;\n\tvar rcvr;\n\n\tforward = interpreterProxy.booleanValueOf(interpreterProxy.stackValue(0));\n\trcvr = interpreterProxy.stackObjectValue(1);\n\tif (!loadFFTFrom(rcvr)) {\n\t\treturn null;\n\t}\n\ttransformData(forward);\n\tif (!interpreterProxy.failed()) {\n\t\tinterpreterProxy.pop(1);\n\t}\n}\n\n\n/*\tScale all elements by 1/n when doing inverse */\n\nfunction scaleData() {\n\tvar i;\n\tvar realN;\n\n\tif (fftSize <= 1) {\n\t\treturn null;\n\t}\n\trealN = (1.0 / fftSize);\n\tfor (i = 0; i <= (fftSize - 1); i++) {\n\t\trealData[i] = (realData[i] * realN);\n\t\timagData[i] = (imagData[i] * realN);\n\t}\n}\n\n\n/*\tNote: This is coded so that is can be run from Squeak. */\n\nfunction setInterpreter(anInterpreter) {\n\tvar ok;\n\n\tinterpreterProxy = anInterpreter;\n\tok = interpreterProxy.majorVersion() == VM_PROXY_MAJOR;\n\tif (ok === false) {\n\t\treturn false;\n\t}\n\tok = interpreterProxy.minorVersion() >= VM_PROXY_MINOR;\n\treturn ok;\n}\n\nfunction transformData(forward) {\n\tpermuteData();\n\tif (interpreterProxy.failed()) {\n\n\t\t/* permuteData went wrong. Do the permutation again -- this will restore the original order */\n\n\t\tpermuteData();\n\t\treturn null;\n\t}\n\ttransformForward(forward);\n\tif (!forward) {\n\t\tscaleData();\n\t}\n}\n\nfunction transformForward(forward) {\n\tvar fftScale;\n\tvar fftSize2;\n\tvar fftSize4;\n\tvar i;\n\tvar ii;\n\tvar imagT;\n\tvar imagU;\n\tvar ip;\n\tvar j;\n\tvar lev;\n\tvar lev1;\n\tvar level;\n\tvar realT;\n\tvar realU;\n\tvar theta;\n\n\tfftSize2 = fftSize >> 1;\n\tfftSize4 = fftSize >> 2;\n\tfor (level = 1; level <= nu; level++) {\n\t\tlev = SHL(1, level);\n\t\tlev1 = lev >> 1;\n\t\tfftScale = DIV(fftSize, lev);\n\t\tfor (j = 1; j <= lev1; j++) {\n\n\t\t\t/* pi * (j-1) / lev1 mapped onto 0..n/2 */\n\n\t\t\ttheta = (j - 1) * fftScale;\n\t\t\tif (theta < fftSize4) {\n\n\t\t\t\t/* Compute U, the complex multiplier for each level */\n\n\t\t\t\trealU = sinTable[(sinTableSize - theta) - 1];\n\t\t\t\timagU = sinTable[theta];\n\t\t\t} else {\n\t\t\t\trealU = 0.0 - sinTable[theta - fftSize4];\n\t\t\t\timagU = sinTable[fftSize2 - theta];\n\t\t\t}\n\t\t\tif (!forward) {\n\t\t\t\timagU = 0.0 - imagU;\n\t\t\t}\n\t\t\ti = j;\n\t\t\twhile (i <= fftSize) {\n\t\t\t\tip = (i + lev1) - 1;\n\t\t\t\tii = i - 1;\n\t\t\t\trealT = (realData[ip] * realU) - (imagData[ip] * imagU);\n\t\t\t\timagT = (realData[ip] * imagU) + (imagData[ip] * realU);\n\t\t\t\trealData[ip] = (realData[ii] - realT);\n\t\t\t\timagData[ip] = (imagData[ii] - imagT);\n\t\t\t\trealData[ii] = (realData[ii] + realT);\n\t\t\t\timagData[ii] = (imagData[ii] + imagT);\n\t\t\t\ti += lev;\n\t\t\t}\n\t\t}\n\t}\n}\n\n\nSqueak.registerExternalModule(\"FFTPlugin\", {\n\tprimitiveFFTTransformData: primitiveFFTTransformData,\n\tsetInterpreter: setInterpreter,\n\tprimitiveFFTPermuteData: primitiveFFTPermuteData,\n\tprimitiveFFTScaleData: primitiveFFTScaleData,\n\tgetModuleName: getModuleName,\n});\n\n}); // end of module\n","/* Smalltalk from Squeak4.5 with VMMaker 4.13.6 translated as JS source on 3 November 2014 1:52:20 pm */\n/* Automatically generated by\n\tJSPluginCodeGenerator VMMakerJS-bf.15 uuid: fd4e10f2-3773-4e80-8bb5-c4b471a014e5\n   from\n\tFloatArrayPlugin VMMaker-bf.353 uuid: 8ae25e7e-8d2c-451e-8277-598b30e9c002\n */\n\nmodule(\"users.bert.SqueakJS.plugins.FloatArrayPlugin\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";\n\nvar VM_PROXY_MAJOR = 1;\nvar VM_PROXY_MINOR = 11;\n\n/*** Functions ***/\nfunction CLASSOF(obj) { return typeof obj === \"number\" ? interpreterProxy.classSmallInteger() : obj.sqClass }\nfunction SIZEOF(obj) { return obj.pointers ? obj.pointers.length : obj.words ? obj.words.length : obj.bytes ? obj.bytes.length : 0 }\nfunction BYTESIZEOF(obj) { return obj.bytes ? obj.bytes.length : obj.words ? obj.words.length * 4 : 0 }\nfunction DIV(a, b) { return Math.floor(a / b) | 0; }   // integer division\nfunction MOD(a, b) { return a - DIV(a, b) * b | 0; }   // signed modulus\nfunction SHL(a, b) { return b > 31 ? 0 : a << b; }     // fix JS shift\nfunction SHR(a, b) { return b > 31 ? 0 : a >>> b; }    // fix JS shift\nfunction SHIFT(a, b) { return b < 0 ? (b < -31 ? 0 : a >>> (0-b) ) : (b > 31 ? 0 : a << b); }\n\n/*** Variables ***/\nvar interpreterProxy = null;\nvar moduleName = \"FloatArrayPlugin 3 November 2014 (e)\";\n\n\n\n/*\tNote: This is hardcoded so it can be run from Squeak.\n\tThe module name is used for validating a module *after*\n\tit is loaded to check if it does really contain the module\n\twe're thinking it contains. This is important! */\n\nfunction getModuleName() {\n\treturn moduleName;\n}\n\nfunction halt() {\n\t;\n}\n\n\n/*\tPrimitive. Add the receiver and the argument, both FloatArrays and store the result into the receiver. */\n\nfunction primitiveAddFloatArray() {\n\tvar arg;\n\tvar argPtr;\n\tvar i;\n\tvar length;\n\tvar rcvr;\n\tvar rcvrPtr;\n\n\targ = interpreterProxy.stackObjectValue(0);\n\trcvr = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(arg));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(arg);\n\tinterpreterProxy.success(length === SIZEOF(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\trcvrPtr = rcvr.wordsAsFloat32Array();\n\targPtr = arg.wordsAsFloat32Array();\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\trcvrPtr[i] = (rcvrPtr[i] + argPtr[i]);\n\t}\n\tinterpreterProxy.pop(1);\n}\n\n\n/*\tPrimitive. Add the argument, a scalar value to the receiver, a FloatArray */\n\nfunction primitiveAddScalar() {\n\tvar i;\n\tvar length;\n\tvar rcvr;\n\tvar rcvrPtr;\n\tvar value;\n\n\tvalue = interpreterProxy.stackFloatValue(0);\n\trcvr = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvr);\n\trcvrPtr = rcvr.wordsAsFloat32Array();\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\trcvrPtr[i] = (rcvrPtr[i] + value);\n\t}\n\tinterpreterProxy.pop(1);\n}\n\nfunction primitiveAt() {\n\tvar floatPtr;\n\tvar floatValue;\n\tvar index;\n\tvar rcvr;\n\n\tindex = interpreterProxy.stackIntegerValue(0);\n\trcvr = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvr));\n\tinterpreterProxy.success((index > 0) && (index <= SIZEOF(rcvr)));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tfloatPtr = rcvr.wordsAsFloat32Array();\n\tfloatValue = floatPtr[index - 1];\n\tinterpreterProxy.pop(2);\n\tinterpreterProxy.pushFloat(floatValue);\n}\n\nfunction primitiveAtPut() {\n\tvar floatPtr;\n\tvar floatValue;\n\tvar index;\n\tvar rcvr;\n\tvar value;\n\n\tvalue = interpreterProxy.stackValue(0);\n\tif (typeof value === \"number\") {\n\t\tfloatValue = value;\n\t} else {\n\t\tfloatValue = interpreterProxy.floatValueOf(value);\n\t}\n\tindex = interpreterProxy.stackIntegerValue(1);\n\trcvr = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvr));\n\tinterpreterProxy.success((index > 0) && (index <= SIZEOF(rcvr)));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tfloatPtr = rcvr.wordsAsFloat32Array();\n\tfloatPtr[index - 1] = floatValue;\n\tif (!interpreterProxy.failed()) {\n\t\tinterpreterProxy.popthenPush(3, value);\n\t}\n}\n\n\n/*\tPrimitive. Add the receiver and the argument, both FloatArrays and store the result into the receiver. */\n\nfunction primitiveDivFloatArray() {\n\tvar arg;\n\tvar argPtr;\n\tvar i;\n\tvar length;\n\tvar rcvr;\n\tvar rcvrPtr;\n\n\targ = interpreterProxy.stackObjectValue(0);\n\trcvr = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(arg));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(arg);\n\tinterpreterProxy.success(length === SIZEOF(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\trcvrPtr = rcvr.wordsAsFloat32Array();\n\n\t/* Check if any of the argument's values is zero */\n\n\targPtr = arg.wordsAsFloat32Array();\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\tif (argPtr[i] === 0) {\n\t\t\treturn interpreterProxy.primitiveFail();\n\t\t}\n\t}\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\trcvrPtr[i] = (rcvrPtr[i] / argPtr[i]);\n\t}\n\tinterpreterProxy.pop(1);\n}\n\n\n/*\tPrimitive. Add the argument, a scalar value to the receiver, a FloatArray */\n\nfunction primitiveDivScalar() {\n\tvar i;\n\tvar inverse;\n\tvar length;\n\tvar rcvr;\n\tvar rcvrPtr;\n\tvar value;\n\n\tvalue = interpreterProxy.stackFloatValue(0);\n\trcvr = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (value === 0.0) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvr);\n\trcvrPtr = rcvr.wordsAsFloat32Array();\n\tinverse = 1.0 / value;\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\trcvrPtr[i] = (rcvrPtr[i] * inverse);\n\t}\n\tinterpreterProxy.pop(1);\n}\n\n\n/*\tPrimitive. Compute the dot product of the receiver and the argument.\n\tThe dot product is defined as the sum of the products of the individual elements. */\n\nfunction primitiveDotProduct() {\n\tvar arg;\n\tvar argPtr;\n\tvar i;\n\tvar length;\n\tvar rcvr;\n\tvar rcvrPtr;\n\tvar result;\n\n\targ = interpreterProxy.stackObjectValue(0);\n\trcvr = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(arg));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(arg);\n\tinterpreterProxy.success(length === SIZEOF(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\trcvrPtr = rcvr.wordsAsFloat32Array();\n\targPtr = arg.wordsAsFloat32Array();\n\tresult = 0.0;\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\tresult += rcvrPtr[i] * argPtr[i];\n\t}\n\tinterpreterProxy.pop(2);\n\tinterpreterProxy.pushFloat(result);\n}\n\nfunction primitiveEqual() {\n\tvar arg;\n\tvar argPtr;\n\tvar i;\n\tvar length;\n\tvar rcvr;\n\tvar rcvrPtr;\n\n\targ = interpreterProxy.stackObjectValue(0);\n\trcvr = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(arg));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(2);\n\tlength = SIZEOF(arg);\n\tif (length !== SIZEOF(rcvr)) {\n\t\treturn interpreterProxy.pushBool(false);\n\t}\n\trcvrPtr = rcvr.wordsAsFloat32Array();\n\targPtr = arg.wordsAsFloat32Array();\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\tif (rcvrPtr[i] !== argPtr[i]) {\n\t\t\treturn interpreterProxy.pushBool(false);\n\t\t}\n\t}\n\treturn interpreterProxy.pushBool(true);\n}\n\nfunction primitiveHashArray() {\n\tvar i;\n\tvar length;\n\tvar rcvr;\n\tvar rcvrPtr;\n\tvar result;\n\n\trcvr = interpreterProxy.stackObjectValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvr);\n\trcvrPtr = rcvr.wordsAsInt32Array();\n\tresult = 0;\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\tresult += rcvrPtr[i];\n\t}\n\tinterpreterProxy.pop(1);\n\treturn interpreterProxy.pushInteger(result & 536870911);\n}\n\n\n/*\tPrimitive. Compute the length of the argument (sqrt of sum of component squares). */\n\nfunction primitiveLength() {\n\tvar i;\n\tvar length;\n\tvar rcvr;\n\tvar rcvrPtr;\n\tvar result;\n\n\trcvr = interpreterProxy.stackObjectValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvr);\n\tinterpreterProxy.success(true);\n\trcvrPtr = rcvr.wordsAsFloat32Array();\n\tresult = 0.0;\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\tresult += rcvrPtr[i] * rcvrPtr[i];\n\t}\n\tresult = Math.sqrt(result);\n\tinterpreterProxy.popthenPush(1, interpreterProxy.floatObjectOf(result));\n}\n\n\n/*\tPrimitive. Add the receiver and the argument, both FloatArrays and store the result into the receiver. */\n\nfunction primitiveMulFloatArray() {\n\tvar arg;\n\tvar argPtr;\n\tvar i;\n\tvar length;\n\tvar rcvr;\n\tvar rcvrPtr;\n\n\targ = interpreterProxy.stackObjectValue(0);\n\trcvr = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(arg));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(arg);\n\tinterpreterProxy.success(length === SIZEOF(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\trcvrPtr = rcvr.wordsAsFloat32Array();\n\targPtr = arg.wordsAsFloat32Array();\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\trcvrPtr[i] = (rcvrPtr[i] * argPtr[i]);\n\t}\n\tinterpreterProxy.pop(1);\n}\n\n\n/*\tPrimitive. Add the argument, a scalar value to the receiver, a FloatArray */\n\nfunction primitiveMulScalar() {\n\tvar i;\n\tvar length;\n\tvar rcvr;\n\tvar rcvrPtr;\n\tvar value;\n\n\tvalue = interpreterProxy.stackFloatValue(0);\n\trcvr = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvr);\n\trcvrPtr = rcvr.wordsAsFloat32Array();\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\trcvrPtr[i] = (rcvrPtr[i] * value);\n\t}\n\tinterpreterProxy.pop(1);\n}\n\n\n/*\tPrimitive. Normalize the argument (A FloatArray) in place. */\n\nfunction primitiveNormalize() {\n\tvar i;\n\tvar len;\n\tvar length;\n\tvar rcvr;\n\tvar rcvrPtr;\n\n\trcvr = interpreterProxy.stackObjectValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvr);\n\tinterpreterProxy.success(true);\n\trcvrPtr = rcvr.wordsAsFloat32Array();\n\tlen = 0.0;\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\tlen += rcvrPtr[i] * rcvrPtr[i];\n\t}\n\tinterpreterProxy.success(len > 0.0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlen = Math.sqrt(len);\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\trcvrPtr[i] = (rcvrPtr[i] / len);\n\t}\n}\n\n\n/*\tPrimitive. Add the receiver and the argument, both FloatArrays and store the result into the receiver. */\n\nfunction primitiveSubFloatArray() {\n\tvar arg;\n\tvar argPtr;\n\tvar i;\n\tvar length;\n\tvar rcvr;\n\tvar rcvrPtr;\n\n\targ = interpreterProxy.stackObjectValue(0);\n\trcvr = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(arg));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(arg);\n\tinterpreterProxy.success(length === SIZEOF(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\trcvrPtr = rcvr.wordsAsFloat32Array();\n\targPtr = arg.wordsAsFloat32Array();\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\trcvrPtr[i] = (rcvrPtr[i] - argPtr[i]);\n\t}\n\tinterpreterProxy.pop(1);\n}\n\n\n/*\tPrimitive. Add the argument, a scalar value to the receiver, a FloatArray */\n\nfunction primitiveSubScalar() {\n\tvar i;\n\tvar length;\n\tvar rcvr;\n\tvar rcvrPtr;\n\tvar value;\n\n\tvalue = interpreterProxy.stackFloatValue(0);\n\trcvr = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvr);\n\trcvrPtr = rcvr.wordsAsFloat32Array();\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\trcvrPtr[i] = (rcvrPtr[i] - value);\n\t}\n\tinterpreterProxy.pop(1);\n}\n\n\n/*\tPrimitive. Find the sum of each float in the receiver, a FloatArray, and stash the result into the argument Float. */\n\nfunction primitiveSum() {\n\tvar i;\n\tvar length;\n\tvar rcvr;\n\tvar rcvrPtr;\n\tvar sum;\n\n\trcvr = interpreterProxy.stackObjectValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvr));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvr);\n\trcvrPtr = rcvr.wordsAsFloat32Array();\n\tsum = 0.0;\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\tsum += rcvrPtr[i];\n\t}\n\tinterpreterProxy.popthenPush(1, interpreterProxy.floatObjectOf(sum));\n}\n\n\n/*\tNote: This is coded so that is can be run from Squeak. */\n\nfunction setInterpreter(anInterpreter) {\n\tvar ok;\n\n\tinterpreterProxy = anInterpreter;\n\tok = interpreterProxy.majorVersion() == VM_PROXY_MAJOR;\n\tif (ok === false) {\n\t\treturn false;\n\t}\n\tok = interpreterProxy.minorVersion() >= VM_PROXY_MINOR;\n\treturn ok;\n}\n\n\nSqueak.registerExternalModule(\"FloatArrayPlugin\", {\n\tprimitiveMulFloatArray: primitiveMulFloatArray,\n\tprimitiveEqual: primitiveEqual,\n\tprimitiveAtPut: primitiveAtPut,\n\tprimitiveAt: primitiveAt,\n\tprimitiveNormalize: primitiveNormalize,\n\tprimitiveSubFloatArray: primitiveSubFloatArray,\n\tprimitiveDivFloatArray: primitiveDivFloatArray,\n\tprimitiveAddScalar: primitiveAddScalar,\n\tprimitiveDotProduct: primitiveDotProduct,\n\tprimitiveSubScalar: primitiveSubScalar,\n\tsetInterpreter: setInterpreter,\n\tprimitiveSum: primitiveSum,\n\tgetModuleName: getModuleName,\n\tprimitiveHashArray: primitiveHashArray,\n\tprimitiveMulScalar: primitiveMulScalar,\n\tprimitiveLength: primitiveLength,\n\tprimitiveAddFloatArray: primitiveAddFloatArray,\n\tprimitiveDivScalar: primitiveDivScalar,\n});\n\n}); // end of module\n","/* Smalltalk from Squeak4.5 with VMMaker 4.13.6 translated as JS source on 14 November 2014 12:21:50 am */\n/* Automatically generated by\n\tJSSmartSyntaxPluginCodeGenerator VMMakerJS-bf.17 uuid: 399be48b-95d8-4722-bdcc-39a94a12c486\n   from\n\tGeniePlugin VMMaker-bf.353 uuid: 8ae25e7e-8d2c-451e-8277-598b30e9c002\n */\n\nmodule(\"users.bert.SqueakJS.plugins.GeniePlugin\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";\n\nvar VM_PROXY_MAJOR = 1;\nvar VM_PROXY_MINOR = 11;\n\n/*** Functions ***/\nfunction CLASSOF(obj) { return typeof obj === \"number\" ? interpreterProxy.classSmallInteger() : obj.sqClass }\nfunction SIZEOF(obj) { return obj.pointers ? obj.pointers.length : obj.words ? obj.words.length : obj.bytes ? obj.bytes.length : 0 }\nfunction BYTESIZEOF(obj) { return obj.bytes ? obj.bytes.length : obj.words ? obj.words.length * 4 : 0 }\nfunction DIV(a, b) { return Math.floor(a / b) | 0; }   // integer division\nfunction MOD(a, b) { return a - DIV(a, b) * b | 0; }   // signed modulus\nfunction SHL(a, b) { return b > 31 ? 0 : a << b; }     // fix JS shift\nfunction SHR(a, b) { return b > 31 ? 0 : a >>> b; }    // fix JS shift\nfunction SHIFT(a, b) { return b < 0 ? (b < -31 ? 0 : a >>> (0-b) ) : (b > 31 ? 0 : a << b); }\nfunction PTR_ADD(p, n) { return new Int32Array(p.buffer, p.byteOffset + n * 4); }\nfunction FPTR_ADD(p, n) { return new Float32Array(p.buffer, p.byteOffset + n * 4); }\n\n/*** Variables ***/\nvar interpreterProxy = null;\nvar moduleName = \"GeniePlugin v2.0 14 November 2014 (e)\";\n\n\n\n/*\targuments are pointer to ints paired as x,y coordinates of points */\n\nfunction cSquaredDistanceFromto(aPoint, bPoint) {\n\tvar aPointX;\n\tvar bPointX;\n\tvar xDiff;\n\tvar aPointY;\n\tvar bPointY;\n\tvar yDiff;\n\n\taPointX = aPoint[0];\n\taPointY = aPoint[1];\n\tbPointX = bPoint[0];\n\tbPointY = bPoint[1];\n\txDiff = bPointX - aPointX;\n\tyDiff = bPointY - aPointY;\n\treturn (xDiff * xDiff) + (yDiff * yDiff);\n}\n\nfunction cSubstAngleFactorFromto(startDegreeNumber, endDegreeNumber) {\n\tvar absDiff;\n\n\tabsDiff = Math.abs(endDegreeNumber - startDegreeNumber);\n\tif (absDiff > 180) {\n\t\tabsDiff = 360 - absDiff;\n\t}\n\treturn (absDiff * absDiff) >>> 6;\n}\n\n\n/*\tNote: This is hardcoded so it can be run from Squeak.\n\tThe module name is used for validating a module *after*\n\tit is loaded to check if it does really contain the module\n\twe're thinking it contains. This is important! */\n\nfunction getModuleName() {\n\treturn moduleName;\n}\n\nfunction halt() {\n\t;\n}\n\nfunction majorNO() {\n\treturn 2;\n}\n\nfunction minorNO() {\n\treturn 0;\n}\n\nfunction msg(s) {\n\tconsole.log(moduleName + \": \" + s);\n}\n\nfunction primSameClassAbsoluteStrokeDistanceMyPoints_otherPoints_myVectors_otherVectors_mySquaredLengths_otherSquaredLengths_myAngles_otherAngles_maxSizeAndReferenceFlag_rowBase_rowInsertRemove_rowInsertRemoveCount() {\n\tvar otherAngles;\n\tvar otherSquaredLengthsSize;\n\tvar forReference;\n\tvar jM1;\n\tvar iM1;\n\tvar jM1T2;\n\tvar base;\n\tvar insert;\n\tvar otherVectors;\n\tvar otherVectorsSize;\n\tvar otherSquaredLengths;\n\tvar rowBaseSize;\n\tvar myPoints;\n\tvar jLimiT;\n\tvar mySquaredLengths;\n\tvar additionalMultiInsertRemoveCost;\n\tvar remove;\n\tvar otherPoints;\n\tvar otherPointsSize;\n\tvar myVectors;\n\tvar rowInsertRemoveCount;\n\tvar rowBase;\n\tvar maxDist;\n\tvar iM1T2;\n\tvar j;\n\tvar insertRemove;\n\tvar i;\n\tvar myVectorsSize;\n\tvar subst;\n\tvar maxSize;\n\tvar removeBase;\n\tvar substBase;\n\tvar myAngles;\n\tvar insertRemoveCount;\n\tvar rowInsertRemove;\n\tvar insertBase;\n\tvar myPointsOop;\n\tvar otherPointsOop;\n\tvar myVectorsOop;\n\tvar otherVectorsOop;\n\tvar mySquaredLengthsOop;\n\tvar otherSquaredLengthsOop;\n\tvar myAnglesOop;\n\tvar otherAnglesOop;\n\tvar maxSizeAndRefFlag;\n\tvar rowBaseOop;\n\tvar rowInsertRemoveOop;\n\tvar rowInsertRemoveCountOop;\n\tvar _return_value;\n\n\tmyPointsOop = interpreterProxy.stackValue(11);\n\totherPointsOop = interpreterProxy.stackValue(10);\n\tmyVectorsOop = interpreterProxy.stackValue(9);\n\totherVectorsOop = interpreterProxy.stackValue(8);\n\tmySquaredLengthsOop = interpreterProxy.stackValue(7);\n\totherSquaredLengthsOop = interpreterProxy.stackValue(6);\n\tmyAnglesOop = interpreterProxy.stackValue(5);\n\totherAnglesOop = interpreterProxy.stackValue(4);\n\tmaxSizeAndRefFlag = interpreterProxy.stackIntegerValue(3);\n\trowBaseOop = interpreterProxy.stackValue(2);\n\trowInsertRemoveOop = interpreterProxy.stackValue(1);\n\trowInsertRemoveCountOop = interpreterProxy.stackValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\tmsg(\"failed 1\");\n\t\treturn null;\n\t}\n\tinterpreterProxy.success((((((((((interpreterProxy.isWords(myPointsOop) && interpreterProxy.isWords(otherPointsOop)) && interpreterProxy.isWords(myVectorsOop)) && interpreterProxy.isWords(otherVectorsOop)) && interpreterProxy.isWords(mySquaredLengthsOop)) && interpreterProxy.isWords(otherSquaredLengthsOop)) && interpreterProxy.isWords(myAnglesOop)) && interpreterProxy.isWords(otherAnglesOop)) && interpreterProxy.isWords(rowBaseOop)) && interpreterProxy.isWords(rowInsertRemoveOop)) && interpreterProxy.isWords(rowInsertRemoveCountOop));\n\tif (interpreterProxy.failed()) {\n\t\tmsg(\"failed 2\");\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isMemberOf(myPointsOop, \"PointArray\") && interpreterProxy.isMemberOf(otherPointsOop, \"PointArray\"));\n\tif (interpreterProxy.failed()) {\n\t\tmsg(\"failed 3\");\n\t\treturn null;\n\t}\n\tmyPoints = myPointsOop.wordsAsInt32Array();\n\totherPoints = otherPointsOop.wordsAsInt32Array();\n\tmyVectors = myVectorsOop.wordsAsInt32Array();\n\totherVectors = otherVectorsOop.wordsAsInt32Array();\n\tmySquaredLengths = mySquaredLengthsOop.wordsAsInt32Array();\n\totherSquaredLengths = otherSquaredLengthsOop.wordsAsInt32Array();\n\tmyAngles = myAnglesOop.wordsAsInt32Array();\n\totherAngles = otherAnglesOop.wordsAsInt32Array();\n\trowBase = rowBaseOop.wordsAsInt32Array();\n\trowInsertRemove = rowInsertRemoveOop.wordsAsInt32Array();\n\n\t/* Note: myPointsSize and mySquaredLengthsSize variables eliminated to reduce\n\tmethod temporary variable count for closure-enabled images */\n\t/* PointArrays */\n\t/* myPointsSize := (interpreterProxy stSizeOf: myPointsOop) bitShift: -1. */\n\n\trowInsertRemoveCount = rowInsertRemoveCountOop.wordsAsInt32Array();\n\totherPointsSize = SIZEOF(otherPointsOop) >>> 1;\n\tmyVectorsSize = SIZEOF(myVectorsOop) >>> 1;\n\n\t/* IntegerArrays */\n\t/* mySquaredLengthsSize := interpreterProxy stSizeOf: mySquaredLengthsOop. */\n\n\totherVectorsSize = SIZEOF(otherVectorsOop) >>> 1;\n\totherSquaredLengthsSize = SIZEOF(otherSquaredLengthsOop);\n\trowBaseSize = SIZEOF(rowBaseOop);\n\tinterpreterProxy.success(((rowBaseSize === SIZEOF(rowInsertRemoveOop)) && (rowBaseSize === SIZEOF(rowInsertRemoveCountOop))) && (rowBaseSize > otherVectorsSize));\n\tif (interpreterProxy.failed()) {\n\t\tmsg(\"failed 4\");\n\t\treturn null;\n\t}\n\tinterpreterProxy.success((((((SIZEOF(mySquaredLengthsOop) >= (myVectorsSize - 1)) && ((SIZEOF(myPointsOop) >>> 1) >= myVectorsSize)) && (otherSquaredLengthsSize >= (otherVectorsSize - 1))) && (otherPointsSize >= otherVectorsSize)) && (SIZEOF(myAnglesOop) >= (myVectorsSize - 1))) && (SIZEOF(otherAnglesOop) >= (otherVectorsSize - 1)));\n\tif (interpreterProxy.failed()) {\n\t\tmsg(\"failed 5\");\n\t\treturn null;\n\t}\n\tforReference = maxSizeAndRefFlag & 1;\n\tmaxSize = maxSizeAndRefFlag >>> 1;\n\tmaxDist = 1 << 29;\n\tif (forReference) {\n\t\tadditionalMultiInsertRemoveCost = 0;\n\t} else {\n\t\tadditionalMultiInsertRemoveCost = (maxSize * maxSize) >>> 10;\n\t}\n\trowBase[0] = 0;\n\trowInsertRemove[0] = 0;\n\trowInsertRemoveCount[0] = 2;\n\tinsertRemove = 0 - additionalMultiInsertRemoveCost;\n\tjLimiT = otherVectorsSize;\n\tif (!((otherPointsSize >= (jLimiT - 1)) && (otherSquaredLengthsSize >= (jLimiT - 1)))) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tfor (j = 1; j <= jLimiT; j++) {\n\t\tjM1 = j - 1;\n\t\tinsertRemove = (insertRemove + ((otherSquaredLengths[jM1] + cSquaredDistanceFromto(PTR_ADD(otherPoints, (jM1 << 1)), myPoints)) >>> 7)) + additionalMultiInsertRemoveCost;\n\t\trowInsertRemove[j] = insertRemove;\n\t\trowBase[j] = (insertRemove * j);\n\t\trowInsertRemoveCount[j] = (j + 1);\n\t}\n\tinsertRemove = rowInsertRemove[0] - additionalMultiInsertRemoveCost;\n\tfor (i = 1; i <= myVectorsSize; i++) {\n\t\tiM1 = i - 1;\n\t\tiM1T2 = iM1 << 1;\n\t\tsubstBase = rowBase[0];\n\t\tinsertRemove = (insertRemove + ((mySquaredLengths[iM1] + cSquaredDistanceFromto(PTR_ADD(myPoints, iM1T2), otherPoints)) >>> 7)) + additionalMultiInsertRemoveCost;\n\t\trowInsertRemove[0] = insertRemove;\n\t\trowBase[0] = (insertRemove * i);\n\t\trowInsertRemoveCount[0] = (i + 1);\n\t\tjLimiT = otherVectorsSize;\n\t\tfor (j = 1; j <= jLimiT; j++) {\n\t\t\tjM1 = j - 1;\n\t\t\tjM1T2 = jM1 << 1;\n\t\t\tremoveBase = rowBase[j];\n\t\t\tinsertBase = rowBase[jM1];\n\t\t\tremove = (mySquaredLengths[iM1] + cSquaredDistanceFromto(PTR_ADD(myPoints, iM1T2), PTR_ADD(otherPoints, (j << 1)))) >>> 7;\n\t\t\tif (((insertRemove = rowInsertRemove[j])) === 0) {\n\t\t\t\tremoveBase += remove;\n\t\t\t} else {\n\t\t\t\tremoveBase = (removeBase + insertRemove) + (remove * rowInsertRemoveCount[j]);\n\t\t\t\tremove += insertRemove;\n\t\t\t}\n\t\t\tinsert = (otherSquaredLengths[jM1] + cSquaredDistanceFromto(PTR_ADD(otherPoints, jM1T2), PTR_ADD(myPoints, (i << 1)))) >>> 7;\n\t\t\tif (((insertRemove = rowInsertRemove[jM1])) === 0) {\n\t\t\t\tinsertBase += insert;\n\t\t\t} else {\n\t\t\t\tinsertBase = (insertBase + insertRemove) + (insert * rowInsertRemoveCount[jM1]);\n\t\t\t\tinsert += insertRemove;\n\t\t\t}\n\t\t\tif (forReference) {\n\t\t\t\tsubstBase = maxDist;\n\t\t\t} else {\n\t\t\t\tsubst = ((cSquaredDistanceFromto(PTR_ADD(otherVectors, jM1T2), PTR_ADD(myVectors, iM1T2)) + cSquaredDistanceFromto(PTR_ADD(otherPoints, jM1T2), PTR_ADD(myPoints, iM1T2))) * (16 + cSubstAngleFactorFromto(otherAngles[jM1], myAngles[iM1]))) >>> 11;\n\t\t\t\tsubstBase += subst;\n\t\t\t}\n\t\t\tif ((substBase <= removeBase) && (substBase <= insertBase)) {\n\t\t\t\tbase = substBase;\n\t\t\t\tinsertRemove = 0;\n\t\t\t\tinsertRemoveCount = 1;\n\t\t\t} else {\n\t\t\t\tif (removeBase <= insertBase) {\n\t\t\t\t\tbase = removeBase;\n\t\t\t\t\tinsertRemove = remove + additionalMultiInsertRemoveCost;\n\t\t\t\t\tinsertRemoveCount = rowInsertRemoveCount[j] + 1;\n\t\t\t\t} else {\n\t\t\t\t\tbase = insertBase;\n\t\t\t\t\tinsertRemove = insert + additionalMultiInsertRemoveCost;\n\t\t\t\t\tinsertRemoveCount = rowInsertRemoveCount[jM1] + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tsubstBase = rowBase[j];\n\t\t\trowBase[j] = Math.min(base, maxDist);\n\t\t\trowInsertRemove[j] = Math.min(insertRemove, maxDist);\n\t\t\trowInsertRemoveCount[j] = insertRemoveCount;\n\t\t}\n\t\tinsertRemove = rowInsertRemove[0];\n\t}\n\t_return_value = base;\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(13, _return_value);\n\treturn null;\n}\n\n\n/*\tmajorNO * 1000 + minorNO */\n\nfunction primVersionNO() {\n\tvar _return_value;\n\n\t_return_value = ((majorNO() * 1000) + minorNO());\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(1, _return_value);\n\treturn null;\n}\n\n\n/*\tNote: This is coded so that is can be run from Squeak. */\n\nfunction setInterpreter(anInterpreter) {\n\tvar ok;\n\n\tinterpreterProxy = anInterpreter;\n\tok = interpreterProxy.majorVersion() == VM_PROXY_MAJOR;\n\tif (ok === false) {\n\t\treturn false;\n\t}\n\tok = interpreterProxy.minorVersion() >= VM_PROXY_MINOR;\n\treturn ok;\n}\n\n\nSqueak.registerExternalModule(\"GeniePlugin\", {\n\tprimVersionNO: primVersionNO,\n\tsetInterpreter: setInterpreter,\n\tprimSameClassAbsoluteStrokeDistanceMyPoints_otherPoints_myVectors_otherVectors_mySquaredLengths_otherSquaredLengths_myAngles_otherAngles_maxSizeAndReferenceFlag_rowBase_rowInsertRemove_rowInsertRemoveCount: primSameClassAbsoluteStrokeDistanceMyPoints_otherPoints_myVectors_otherVectors_mySquaredLengths_otherSquaredLengths_myAngles_otherAngles_maxSizeAndReferenceFlag_rowBase_rowInsertRemove_rowInsertRemoveCount,\n\tgetModuleName: getModuleName,\n});\n\n}); // end of module\n","/* Smalltalk from Squeak4.5 with VMMaker 4.13.6 translated as JS source on 3 November 2014 1:52:20 pm */\n/* Automatically generated by\n\tJSPluginCodeGenerator VMMakerJS-bf.15 uuid: fd4e10f2-3773-4e80-8bb5-c4b471a014e5\n   from\n\tJPEGReaderPlugin VMMaker-bf.353 uuid: 8ae25e7e-8d2c-451e-8277-598b30e9c002\n */\n\nmodule(\"users.bert.SqueakJS.plugins.JPEGReaderPlugin\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";\n\nvar VM_PROXY_MAJOR = 1;\nvar VM_PROXY_MINOR = 11;\n\n/*** Functions ***/\nfunction CLASSOF(obj) { return typeof obj === \"number\" ? interpreterProxy.classSmallInteger() : obj.sqClass }\nfunction SIZEOF(obj) { return obj.pointers ? obj.pointers.length : obj.words ? obj.words.length : obj.bytes ? obj.bytes.length : 0 }\nfunction BYTESIZEOF(obj) { return obj.bytes ? obj.bytes.length : obj.words ? obj.words.length * 4 : 0 }\nfunction DIV(a, b) { return Math.floor(a / b) | 0; }   // integer division\nfunction MOD(a, b) { return a - DIV(a, b) * b | 0; }   // signed modulus\nfunction SHL(a, b) { return b > 31 ? 0 : a << b; }     // fix JS shift\nfunction SHR(a, b) { return b > 31 ? 0 : a >>> b; }    // fix JS shift\nfunction SHIFT(a, b) { return b < 0 ? (b < -31 ? 0 : a >>> (0-b) ) : (b > 31 ? 0 : a << b); }\n\n/*** Constants ***/\nvar BlockWidthIndex = 5;\nvar BlueIndex = 2;\nvar ConstBits = 13;\nvar CurrentXIndex = 0;\nvar CurrentYIndex = 1;\nvar DCTSize = 8;\nvar DCTSize2 = 64;\nvar FIXn0n298631336 = 2446;\nvar FIXn0n34414 = 22554;\nvar FIXn0n390180644 = 3196;\nvar FIXn0n541196100 = 4433;\nvar FIXn0n71414 = 46802;\nvar FIXn0n765366865 = 6270;\nvar FIXn0n899976223 = 7373;\nvar FIXn1n175875602 = 9633;\nvar FIXn1n40200 = 91881;\nvar FIXn1n501321110 = 12299;\nvar FIXn1n77200 = 116130;\nvar FIXn1n847759065 = 15137;\nvar FIXn1n961570560 = 16069;\nvar FIXn2n053119869 = 16819;\nvar FIXn2n562915447 = 20995;\nvar FIXn3n072711026 = 25172;\nvar GreenIndex = 1;\nvar HScaleIndex = 2;\nvar MCUBlockIndex = 4;\nvar MCUWidthIndex = 8;\nvar MaxBits = 16;\nvar MaxMCUBlocks = 128;\nvar MaxSample = 255;\nvar MinComponentSize = 11;\nvar Pass1Bits = 2;\nvar Pass1Div = 2048;\nvar Pass2Div = 262144;\nvar PriorDCValueIndex = 10;\nvar RedIndex = 0;\nvar SampleOffset = 127;\nvar VScaleIndex = 3;\n\n/*** Variables ***/\nvar acTable = null;\nvar acTableSize = 0;\nvar cbBlocks = new Array(128);\nvar cbComponent = new Array(11);\nvar cbSampleStream = 0;\nvar crBlocks = new Array(128);\nvar crComponent = new Array(11);\nvar crSampleStream = 0;\nvar dcTable = null;\nvar dcTableSize = 0;\nvar ditherMask = 0;\nvar interpreterProxy = null;\nvar jpegBits = null;\nvar jpegBitsSize = 0;\nvar jpegNaturalOrder = [\n\t0, 1, 8, 16, 9, 2, 3, 10, \n\t17, 24, 32, 25, 18, 11, 4, 5, \n\t12, 19, 26, 33, 40, 48, 41, 34, \n\t27, 20, 13, 6, 7, 14, 21, 28, \n\t35, 42, 49, 56, 57, 50, 43, 36, \n\t29, 22, 15, 23, 30, 37, 44, 51, \n\t58, 59, 52, 45, 38, 31, 39, 46, \n\t53, 60, 61, 54, 47, 55, 62, 63\n];\nvar jsBitBuffer = 0;\nvar jsBitCount = 0;\nvar jsCollection = null;\nvar jsPosition = 0;\nvar jsReadLimit = 0;\nvar moduleName = \"JPEGReaderPlugin 3 November 2014 (e)\";\nvar residuals = null;\nvar yBlocks = new Array(128);\nvar yComponent = new Array(11);\nvar ySampleStream = 0;\n\n\nfunction cbColorComponentFrom(oop) {\n\treturn colorComponentfrom(cbComponent, oop) && (colorComponentBlocksfrom(cbBlocks, oop));\n}\n\nfunction colorComponentfrom(aColorComponent, oop) {\n\tif (typeof oop === \"number\") {\n\t\treturn false;\n\t}\n\tif (!interpreterProxy.isPointers(oop)) {\n\t\treturn false;\n\t}\n\tif (SIZEOF(oop) < MinComponentSize) {\n\t\treturn false;\n\t}\n\taColorComponent[CurrentXIndex] = interpreterProxy.fetchIntegerofObject(CurrentXIndex, oop);\n\taColorComponent[CurrentYIndex] = interpreterProxy.fetchIntegerofObject(CurrentYIndex, oop);\n\taColorComponent[HScaleIndex] = interpreterProxy.fetchIntegerofObject(HScaleIndex, oop);\n\taColorComponent[VScaleIndex] = interpreterProxy.fetchIntegerofObject(VScaleIndex, oop);\n\taColorComponent[BlockWidthIndex] = interpreterProxy.fetchIntegerofObject(BlockWidthIndex, oop);\n\taColorComponent[MCUWidthIndex] = interpreterProxy.fetchIntegerofObject(MCUWidthIndex, oop);\n\taColorComponent[PriorDCValueIndex] = interpreterProxy.fetchIntegerofObject(PriorDCValueIndex, oop);\n\treturn !interpreterProxy.failed();\n}\n\nfunction colorComponentBlocksfrom(blocks, oop) {\n\tvar arrayOop;\n\tvar blockOop;\n\tvar i;\n\tvar max;\n\n\tif (typeof oop === \"number\") {\n\t\treturn false;\n\t}\n\tif (!interpreterProxy.isPointers(oop)) {\n\t\treturn false;\n\t}\n\tif (SIZEOF(oop) < MinComponentSize) {\n\t\treturn false;\n\t}\n\tarrayOop = interpreterProxy.fetchPointerofObject(MCUBlockIndex, oop);\n\tif (typeof arrayOop === \"number\") {\n\t\treturn false;\n\t}\n\tif (!interpreterProxy.isPointers(arrayOop)) {\n\t\treturn false;\n\t}\n\tmax = SIZEOF(arrayOop);\n\tif (max > MaxMCUBlocks) {\n\t\treturn false;\n\t}\n\tfor (i = 0; i <= (max - 1); i++) {\n\t\tblockOop = interpreterProxy.fetchPointerofObject(i, arrayOop);\n\t\tif (typeof blockOop === \"number\") {\n\t\t\treturn false;\n\t\t}\n\t\tif (!interpreterProxy.isWords(blockOop)) {\n\t\t\treturn false;\n\t\t}\n\t\tif (SIZEOF(blockOop) !== DCTSize2) {\n\t\t\treturn false;\n\t\t}\n\t\tblocks[i] = blockOop.wordsAsInt32Array();\n\t}\n\treturn !interpreterProxy.failed();\n}\n\nfunction colorConvertGrayscaleMCU() {\n\tvar i;\n\tvar y;\n\n\tyComponent[CurrentXIndex] = 0;\n\tyComponent[CurrentYIndex] = 0;\n\tfor (i = 0; i <= (jpegBitsSize - 1); i++) {\n\t\ty = nextSampleY();\n\t\ty += residuals[GreenIndex];\n\t\ty = Math.min(y, MaxSample);\n\t\tresiduals[GreenIndex] = (y & ditherMask);\n\t\ty = y & (MaxSample - ditherMask);\n\t\ty = Math.max(y, 1);\n\t\tjpegBits[i] = (((4278190080 + (y << 16)) + (y << 8)) + y);\n\t}\n}\n\nfunction colorConvertMCU() {\n\tvar blue;\n\tvar cb;\n\tvar cr;\n\tvar green;\n\tvar i;\n\tvar red;\n\tvar y;\n\n\tyComponent[CurrentXIndex] = 0;\n\tyComponent[CurrentYIndex] = 0;\n\tcbComponent[CurrentXIndex] = 0;\n\tcbComponent[CurrentYIndex] = 0;\n\tcrComponent[CurrentXIndex] = 0;\n\tcrComponent[CurrentYIndex] = 0;\n\tfor (i = 0; i <= (jpegBitsSize - 1); i++) {\n\t\ty = nextSampleY();\n\t\tcb = nextSampleCb();\n\t\tcb -= SampleOffset;\n\t\tcr = nextSampleCr();\n\t\tcr -= SampleOffset;\n\t\tred = (y + ((FIXn1n40200 * cr) >> 16)) + residuals[RedIndex];\n\t\tred = Math.min(red, MaxSample);\n\t\tred = Math.max(red, 0);\n\t\tresiduals[RedIndex] = (red & ditherMask);\n\t\tred = red & (MaxSample - ditherMask);\n\t\tred = Math.max(red, 1);\n\t\tgreen = ((y - ((FIXn0n34414 * cb) >> 16)) - ((FIXn0n71414 * cr) >> 16)) + residuals[GreenIndex];\n\t\tgreen = Math.min(green, MaxSample);\n\t\tgreen = Math.max(green, 0);\n\t\tresiduals[GreenIndex] = (green & ditherMask);\n\t\tgreen = green & (MaxSample - ditherMask);\n\t\tgreen = Math.max(green, 1);\n\t\tblue = (y + ((FIXn1n77200 * cb) >> 16)) + residuals[BlueIndex];\n\t\tblue = Math.min(blue, MaxSample);\n\t\tblue = Math.max(blue, 0);\n\t\tresiduals[BlueIndex] = (blue & ditherMask);\n\t\tblue = blue & (MaxSample - ditherMask);\n\t\tblue = Math.max(blue, 1);\n\t\tjpegBits[i] = (((4278190080 + (red << 16)) + (green << 8)) + blue);\n\t}\n}\n\nfunction crColorComponentFrom(oop) {\n\treturn colorComponentfrom(crComponent, oop) && (colorComponentBlocksfrom(crBlocks, oop));\n}\n\nfunction decodeBlockIntocomponent(anArray, aColorComponent) {\n\tvar bits;\n\tvar byte;\n\tvar i;\n\tvar index;\n\tvar zeroCount;\n\n\tbyte = jpegDecodeValueFromsize(dcTable, dcTableSize);\n\tif (byte < 0) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (byte !== 0) {\n\t\tbits = getBits(byte);\n\t\tbyte = scaleAndSignExtendinFieldWidth(bits, byte);\n\t}\n\tbyte = aColorComponent[PriorDCValueIndex] = (aColorComponent[PriorDCValueIndex] + byte);\n\tanArray[0] = byte;\n\tfor (i = 1; i <= (DCTSize2 - 1); i++) {\n\t\tanArray[i] = 0;\n\t}\n\tindex = 1;\n\twhile (index < DCTSize2) {\n\t\tbyte = jpegDecodeValueFromsize(acTable, acTableSize);\n\t\tif (byte < 0) {\n\t\t\treturn interpreterProxy.primitiveFail();\n\t\t}\n\t\tzeroCount = byte >>> 4;\n\t\tbyte = byte & 15;\n\t\tif (byte !== 0) {\n\t\t\tindex += zeroCount;\n\t\t\tbits = getBits(byte);\n\t\t\tbyte = scaleAndSignExtendinFieldWidth(bits, byte);\n\t\t\tif ((index < 0) || (index >= DCTSize2)) {\n\t\t\t\treturn interpreterProxy.primitiveFail();\n\t\t\t}\n\t\t\tanArray[jpegNaturalOrder[index]] = byte;\n\t\t} else {\n\t\t\tif (zeroCount === 15) {\n\t\t\t\tindex += zeroCount;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\t++index;\n\t}\n}\n\nfunction fillBuffer() {\n\tvar byte;\n\n\twhile (jsBitCount <= 16) {\n\t\tif (!(jsPosition < jsReadLimit)) {\n\t\t\treturn jsBitCount;\n\t\t}\n\t\tbyte = jsCollection[jsPosition];\n\t\t++jsPosition;\n\t\tif (byte === 255) {\n\n\t\t\t/* peek for 00 */\n\n\t\t\tif (!((jsPosition < jsReadLimit) && (jsCollection[jsPosition] === 0))) {\n\t\t\t\t--jsPosition;\n\t\t\t\treturn jsBitCount;\n\t\t\t}\n\t\t\t++jsPosition;\n\t\t}\n\t\tjsBitBuffer = (jsBitBuffer << 8) | byte;\n\t\tjsBitCount += 8;\n\t}\n\treturn jsBitCount;\n}\n\nfunction getBits(requestedBits) {\n\tvar value;\n\n\tif (requestedBits > jsBitCount) {\n\t\tfillBuffer();\n\t\tif (requestedBits > jsBitCount) {\n\t\t\treturn -1;\n\t\t}\n\t}\n\tjsBitCount -= requestedBits;\n\tvalue = SHR(jsBitBuffer, jsBitCount);\n\tjsBitBuffer = jsBitBuffer & ((SHL(1, jsBitCount)) - 1);\n\treturn value;\n}\n\n\n/*\tNote: This is hardcoded so it can be run from Squeak.\n\tThe module name is used for validating a module *after*\n\tit is loaded to check if it does really contain the module\n\twe're thinking it contains. This is important! */\n\nfunction getModuleName() {\n\treturn moduleName;\n}\n\nfunction halt() {\n\t;\n}\n\nfunction idctBlockIntqt(anArray, qt) {\n\tvar anACTerm;\n\tvar dcval;\n\tvar i;\n\tvar j;\n\tvar row;\n\tvar t0;\n\tvar t1;\n\tvar t10;\n\tvar t11;\n\tvar t12;\n\tvar t13;\n\tvar t2;\n\tvar t3;\n\tvar v;\n\tvar ws = new Array(64);\n\tvar z1;\n\tvar z2;\n\tvar z3;\n\tvar z4;\n\tvar z5;\n\n\t;\n\tfor (i = 0; i <= (DCTSize - 1); i++) {\n\t\tanACTerm = -1;\n\t\tfor (row = 1; row <= (DCTSize - 1); row++) {\n\t\t\tif (anACTerm === -1) {\n\t\t\t\tif (anArray[(row * DCTSize) + i] !== 0) {\n\t\t\t\t\tanACTerm = row;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (anACTerm === -1) {\n\t\t\tdcval = (anArray[i] * qt[0]) << 2;\n\t\t\tfor (j = 0; j <= (DCTSize - 1); j++) {\n\t\t\t\tws[(j * DCTSize) + i] = dcval;\n\t\t\t}\n\t\t} else {\n\t\t\tz2 = anArray[(DCTSize * 2) + i] * qt[(DCTSize * 2) + i];\n\t\t\tz3 = anArray[(DCTSize * 6) + i] * qt[(DCTSize * 6) + i];\n\t\t\tz1 = (z2 + z3) * FIXn0n541196100;\n\t\t\tt2 = z1 + (z3 * (0 - FIXn1n847759065));\n\t\t\tt3 = z1 + (z2 * FIXn0n765366865);\n\t\t\tz2 = anArray[i] * qt[i];\n\t\t\tz3 = anArray[(DCTSize * 4) + i] * qt[(DCTSize * 4) + i];\n\t\t\tt0 = (z2 + z3) << 13;\n\t\t\tt1 = (z2 - z3) << 13;\n\t\t\tt10 = t0 + t3;\n\t\t\tt13 = t0 - t3;\n\t\t\tt11 = t1 + t2;\n\t\t\tt12 = t1 - t2;\n\t\t\tt0 = anArray[(DCTSize * 7) + i] * qt[(DCTSize * 7) + i];\n\t\t\tt1 = anArray[(DCTSize * 5) + i] * qt[(DCTSize * 5) + i];\n\t\t\tt2 = anArray[(DCTSize * 3) + i] * qt[(DCTSize * 3) + i];\n\t\t\tt3 = anArray[DCTSize + i] * qt[DCTSize + i];\n\t\t\tz1 = t0 + t3;\n\t\t\tz2 = t1 + t2;\n\t\t\tz3 = t0 + t2;\n\t\t\tz4 = t1 + t3;\n\t\t\tz5 = (z3 + z4) * FIXn1n175875602;\n\t\t\tt0 = t0 * FIXn0n298631336;\n\t\t\tt1 = t1 * FIXn2n053119869;\n\t\t\tt2 = t2 * FIXn3n072711026;\n\t\t\tt3 = t3 * FIXn1n501321110;\n\t\t\tz1 = z1 * (0 - FIXn0n899976223);\n\t\t\tz2 = z2 * (0 - FIXn2n562915447);\n\t\t\tz3 = z3 * (0 - FIXn1n961570560);\n\t\t\tz4 = z4 * (0 - FIXn0n390180644);\n\t\t\tz3 += z5;\n\t\t\tz4 += z5;\n\t\t\tt0 = (t0 + z1) + z3;\n\t\t\tt1 = (t1 + z2) + z4;\n\t\t\tt2 = (t2 + z2) + z3;\n\t\t\tt3 = (t3 + z1) + z4;\n\t\t\tws[i] = ((t10 + t3) >> 11);\n\t\t\tws[(DCTSize * 7) + i] = ((t10 - t3) >> 11);\n\t\t\tws[(DCTSize * 1) + i] = ((t11 + t2) >> 11);\n\t\t\tws[(DCTSize * 6) + i] = ((t11 - t2) >> 11);\n\t\t\tws[(DCTSize * 2) + i] = ((t12 + t1) >> 11);\n\t\t\tws[(DCTSize * 5) + i] = ((t12 - t1) >> 11);\n\t\t\tws[(DCTSize * 3) + i] = ((t13 + t0) >> 11);\n\t\t\tws[(DCTSize * 4) + i] = ((t13 - t0) >> 11);\n\t\t}\n\t}\n\tfor (i = 0; i <= (DCTSize2 - DCTSize); i += DCTSize) {\n\t\tz2 = ws[i + 2];\n\t\tz3 = ws[i + 6];\n\t\tz1 = (z2 + z3) * FIXn0n541196100;\n\t\tt2 = z1 + (z3 * (0 - FIXn1n847759065));\n\t\tt3 = z1 + (z2 * FIXn0n765366865);\n\t\tt0 = (ws[i] + ws[i + 4]) << 13;\n\t\tt1 = (ws[i] - ws[i + 4]) << 13;\n\t\tt10 = t0 + t3;\n\t\tt13 = t0 - t3;\n\t\tt11 = t1 + t2;\n\t\tt12 = t1 - t2;\n\t\tt0 = ws[i + 7];\n\t\tt1 = ws[i + 5];\n\t\tt2 = ws[i + 3];\n\t\tt3 = ws[i + 1];\n\t\tz1 = t0 + t3;\n\t\tz2 = t1 + t2;\n\t\tz3 = t0 + t2;\n\t\tz4 = t1 + t3;\n\t\tz5 = (z3 + z4) * FIXn1n175875602;\n\t\tt0 = t0 * FIXn0n298631336;\n\t\tt1 = t1 * FIXn2n053119869;\n\t\tt2 = t2 * FIXn3n072711026;\n\t\tt3 = t3 * FIXn1n501321110;\n\t\tz1 = z1 * (0 - FIXn0n899976223);\n\t\tz2 = z2 * (0 - FIXn2n562915447);\n\t\tz3 = z3 * (0 - FIXn1n961570560);\n\t\tz4 = z4 * (0 - FIXn0n390180644);\n\t\tz3 += z5;\n\t\tz4 += z5;\n\t\tt0 = (t0 + z1) + z3;\n\t\tt1 = (t1 + z2) + z4;\n\t\tt2 = (t2 + z2) + z3;\n\t\tt3 = (t3 + z1) + z4;\n\t\tv = ((t10 + t3) >> 18) + SampleOffset;\n\t\tv = Math.min(v, MaxSample);\n\t\tv = Math.max(v, 0);\n\t\tanArray[i] = v;\n\t\tv = ((t10 - t3) >> 18) + SampleOffset;\n\t\tv = Math.min(v, MaxSample);\n\t\tv = Math.max(v, 0);\n\t\tanArray[i + 7] = v;\n\t\tv = ((t11 + t2) >> 18) + SampleOffset;\n\t\tv = Math.min(v, MaxSample);\n\t\tv = Math.max(v, 0);\n\t\tanArray[i + 1] = v;\n\t\tv = ((t11 - t2) >> 18) + SampleOffset;\n\t\tv = Math.min(v, MaxSample);\n\t\tv = Math.max(v, 0);\n\t\tanArray[i + 6] = v;\n\t\tv = ((t12 + t1) >> 18) + SampleOffset;\n\t\tv = Math.min(v, MaxSample);\n\t\tv = Math.max(v, 0);\n\t\tanArray[i + 2] = v;\n\t\tv = ((t12 - t1) >> 18) + SampleOffset;\n\t\tv = Math.min(v, MaxSample);\n\t\tv = Math.max(v, 0);\n\t\tanArray[i + 5] = v;\n\t\tv = ((t13 + t0) >> 18) + SampleOffset;\n\t\tv = Math.min(v, MaxSample);\n\t\tv = Math.max(v, 0);\n\t\tanArray[i + 3] = v;\n\t\tv = ((t13 - t0) >> 18) + SampleOffset;\n\t\tv = Math.min(v, MaxSample);\n\t\tv = Math.max(v, 0);\n\t\tanArray[i + 4] = v;\n\t}\n}\n\n\n/*\tDecode the next value in the receiver using the given huffman table. */\n\nfunction jpegDecodeValueFromsize(table, tableSize) {\n\tvar bits;\n\tvar bitsNeeded;\n\tvar index;\n\tvar tableIndex;\n\tvar value;\n\n\n\t/* Initial bits needed */\n\n\tbitsNeeded = table[0] >>> 24;\n\tif (bitsNeeded > MaxBits) {\n\t\treturn -1;\n\t}\n\n\t/* First real table */\n\n\ttableIndex = 2;\n\twhile (true) {\n\n\t\t/* Get bits */\n\n\t\tbits = getBits(bitsNeeded);\n\t\tif (bits < 0) {\n\t\t\treturn -1;\n\t\t}\n\t\tindex = (tableIndex + bits) - 1;\n\t\tif (index >= tableSize) {\n\t\t\treturn -1;\n\t\t}\n\n\t\t/* Lookup entry in table */\n\n\t\tvalue = table[index];\n\t\tif ((value & 1056964608) === 0) {\n\t\t\treturn value;\n\t\t}\n\n\t\t/* Table offset in low 16 bit */\n\n\t\ttableIndex = value & 65535;\n\n\t\t/* Additional bits in high 8 bit */\n\n\t\tbitsNeeded = (value >>> 24) & 255;\n\t\tif (bitsNeeded > MaxBits) {\n\t\t\treturn -1;\n\t\t}\n\t}\n\treturn -1;\n}\n\nfunction loadJPEGStreamFrom(streamOop) {\n\tvar oop;\n\tvar sz;\n\n\tif (SIZEOF(streamOop) < 5) {\n\t\treturn false;\n\t}\n\tif (!interpreterProxy.isPointers(streamOop)) {\n\t\treturn false;\n\t}\n\toop = interpreterProxy.fetchPointerofObject(0, streamOop);\n\tif (typeof oop === \"number\") {\n\t\treturn false;\n\t}\n\tif (!interpreterProxy.isBytes(oop)) {\n\t\treturn false;\n\t}\n\tjsCollection = oop.bytes;\n\tsz = BYTESIZEOF(oop);\n\tjsPosition = interpreterProxy.fetchIntegerofObject(1, streamOop);\n\tjsReadLimit = interpreterProxy.fetchIntegerofObject(2, streamOop);\n\tjsBitBuffer = interpreterProxy.fetchIntegerofObject(3, streamOop);\n\tjsBitCount = interpreterProxy.fetchIntegerofObject(4, streamOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn false;\n\t}\n\tif (sz < jsReadLimit) {\n\t\treturn false;\n\t}\n\tif ((jsPosition < 0) || (jsPosition >= jsReadLimit)) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction nextSampleCb() {\n\tvar blockIndex;\n\tvar curX;\n\tvar dx;\n\tvar dy;\n\tvar sample;\n\tvar sampleIndex;\n\tvar sx;\n\tvar sy;\n\n\tdx = (curX = cbComponent[CurrentXIndex]);\n\tdy = cbComponent[CurrentYIndex];\n\tsx = cbComponent[HScaleIndex];\n\tsy = cbComponent[VScaleIndex];\n\tif ((sx !== 0) && (sy !== 0)) {\n\t\tdx = DIV(dx, sx);\n\t\tdy = DIV(dy, sy);\n\t}\n\tblockIndex = ((dy >>> 3) * cbComponent[BlockWidthIndex]) + (dx >>> 3);\n\tsampleIndex = ((dy & 7) << 3) + (dx & 7);\n\tsample = cbBlocks[blockIndex][sampleIndex];\n\t++curX;\n\tif (curX < (cbComponent[MCUWidthIndex] * 8)) {\n\t\tcbComponent[CurrentXIndex] = curX;\n\t} else {\n\t\tcbComponent[CurrentXIndex] = 0;\n\t\tcbComponent[CurrentYIndex]++;\n\t}\n\treturn sample;\n}\n\nfunction nextSampleCr() {\n\tvar blockIndex;\n\tvar curX;\n\tvar dx;\n\tvar dy;\n\tvar sample;\n\tvar sampleIndex;\n\tvar sx;\n\tvar sy;\n\n\tdx = (curX = crComponent[CurrentXIndex]);\n\tdy = crComponent[CurrentYIndex];\n\tsx = crComponent[HScaleIndex];\n\tsy = crComponent[VScaleIndex];\n\tif ((sx !== 0) && (sy !== 0)) {\n\t\tdx = DIV(dx, sx);\n\t\tdy = DIV(dy, sy);\n\t}\n\tblockIndex = ((dy >>> 3) * crComponent[BlockWidthIndex]) + (dx >>> 3);\n\tsampleIndex = ((dy & 7) << 3) + (dx & 7);\n\tsample = crBlocks[blockIndex][sampleIndex];\n\t++curX;\n\tif (curX < (crComponent[MCUWidthIndex] * 8)) {\n\t\tcrComponent[CurrentXIndex] = curX;\n\t} else {\n\t\tcrComponent[CurrentXIndex] = 0;\n\t\tcrComponent[CurrentYIndex]++;\n\t}\n\treturn sample;\n}\n\nfunction nextSampleY() {\n\tvar blockIndex;\n\tvar curX;\n\tvar dx;\n\tvar dy;\n\tvar sample;\n\tvar sampleIndex;\n\tvar sx;\n\tvar sy;\n\n\tdx = (curX = yComponent[CurrentXIndex]);\n\tdy = yComponent[CurrentYIndex];\n\tsx = yComponent[HScaleIndex];\n\tsy = yComponent[VScaleIndex];\n\tif ((sx !== 0) && (sy !== 0)) {\n\t\tdx = DIV(dx, sx);\n\t\tdy = DIV(dy, sy);\n\t}\n\tblockIndex = ((dy >>> 3) * yComponent[BlockWidthIndex]) + (dx >>> 3);\n\tsampleIndex = ((dy & 7) << 3) + (dx & 7);\n\tsample = yBlocks[blockIndex][sampleIndex];\n\t++curX;\n\tif (curX < (yComponent[MCUWidthIndex] * 8)) {\n\t\tyComponent[CurrentXIndex] = curX;\n\t} else {\n\t\tyComponent[CurrentXIndex] = 0;\n\t\tyComponent[CurrentYIndex]++;\n\t}\n\treturn sample;\n}\n\n\n/*\tRequires:\n\t\tJPEGColorComponent\n\t\tbits\n\t\tWordArray with: 3*Integer (residuals)\n\t\tditherMask\n\t */\n\nfunction primitiveColorConvertGrayscaleMCU() {\n\tvar arrayOop;\n\n\tstInit();\n\tif (interpreterProxy.methodArgumentCount() !== 4) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tditherMask = interpreterProxy.stackIntegerValue(0);\n\tarrayOop = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!(interpreterProxy.isWords(arrayOop) && (SIZEOF(arrayOop) === 3))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tresiduals = arrayOop.wordsAsInt32Array();\n\tarrayOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(arrayOop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tjpegBitsSize = SIZEOF(arrayOop);\n\tjpegBits = arrayOop.wordsAsInt32Array();\n\tarrayOop = interpreterProxy.stackObjectValue(3);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!yColorComponentFrom(arrayOop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tcolorConvertGrayscaleMCU();\n\tinterpreterProxy.pop(4);\n}\n\n\n/*\tRequires:\n\t\tArray with: 3*JPEGColorComponent\n\t\tbits\n\t\tWordArray with: 3*Integer (residuals)\n\t\tditherMask\n\t */\n\nfunction primitiveColorConvertMCU() {\n\tvar arrayOop;\n\n\tstInit();\n\tif (interpreterProxy.methodArgumentCount() !== 4) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tditherMask = interpreterProxy.stackIntegerValue(0);\n\tarrayOop = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!(interpreterProxy.isWords(arrayOop) && (SIZEOF(arrayOop) === 3))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tresiduals = arrayOop.wordsAsInt32Array();\n\tarrayOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(arrayOop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tjpegBitsSize = SIZEOF(arrayOop);\n\tjpegBits = arrayOop.wordsAsInt32Array();\n\tarrayOop = interpreterProxy.stackObjectValue(3);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!(interpreterProxy.isPointers(arrayOop) && (SIZEOF(arrayOop) === 3))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!yColorComponentFrom(interpreterProxy.fetchPointerofObject(0, arrayOop))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!cbColorComponentFrom(interpreterProxy.fetchPointerofObject(1, arrayOop))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!crColorComponentFrom(interpreterProxy.fetchPointerofObject(2, arrayOop))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tcolorConvertMCU();\n\tinterpreterProxy.pop(4);\n}\n\n\n/*\tIn:\n\t\tanArray \t\tWordArray of: DCTSize2\n\t\taColorComponent JPEGColorComponent\n\t\tdcTable\t\t\tWordArray\n\t\tacTable\t\t\tWordArray\n\t\tstream\t\t\tJPEGStream\n\t */\n\nfunction primitiveDecodeMCU() {\n\tvar anArray;\n\tvar arrayOop;\n\tvar oop;\n\n\t;\n\tif (interpreterProxy.methodArgumentCount() !== 5) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\toop = interpreterProxy.stackObjectValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!loadJPEGStreamFrom(oop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tarrayOop = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(arrayOop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tacTableSize = SIZEOF(arrayOop);\n\tacTable = arrayOop.wordsAsInt32Array();\n\tarrayOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(arrayOop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tdcTableSize = SIZEOF(arrayOop);\n\tdcTable = arrayOop.wordsAsInt32Array();\n\toop = interpreterProxy.stackObjectValue(3);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!colorComponentfrom(yComponent, oop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tarrayOop = interpreterProxy.stackObjectValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(arrayOop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (SIZEOF(arrayOop) !== DCTSize2) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tanArray = arrayOop.wordsAsInt32Array();\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tdecodeBlockIntocomponent(anArray, yComponent);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tstoreJPEGStreamOn(interpreterProxy.stackValue(0));\n\tinterpreterProxy.storeIntegerofObjectwithValue(PriorDCValueIndex, interpreterProxy.stackValue(3), yComponent[PriorDCValueIndex]);\n\tinterpreterProxy.pop(5);\n}\n\n\n/*\tIn:\n\t\tanArray: IntegerArray new: DCTSize2\n\t\tqt: IntegerArray new: DCTSize2.\n\t */\n\nfunction primitiveIdctInt() {\n\tvar anArray;\n\tvar arrayOop;\n\tvar qt;\n\n\t;\n\tif (interpreterProxy.methodArgumentCount() !== 2) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tarrayOop = interpreterProxy.stackObjectValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!(interpreterProxy.isWords(arrayOop) && (SIZEOF(arrayOop) === DCTSize2))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tqt = arrayOop.wordsAsInt32Array();\n\tarrayOop = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!(interpreterProxy.isWords(arrayOop) && (SIZEOF(arrayOop) === DCTSize2))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tanArray = arrayOop.wordsAsInt32Array();\n\tidctBlockIntqt(anArray, qt);\n\tinterpreterProxy.pop(2);\n}\n\nfunction scaleAndSignExtendinFieldWidth(aNumber, w) {\n\tif (aNumber < (SHL(1, (w - 1)))) {\n\t\treturn (aNumber - (SHL(1, w))) + 1;\n\t} else {\n\t\treturn aNumber;\n\t}\n}\n\n\n/*\tNote: This is coded so that is can be run from Squeak. */\n\nfunction setInterpreter(anInterpreter) {\n\tvar ok;\n\n\tinterpreterProxy = anInterpreter;\n\tok = interpreterProxy.majorVersion() == VM_PROXY_MAJOR;\n\tif (ok === false) {\n\t\treturn false;\n\t}\n\tok = interpreterProxy.minorVersion() >= VM_PROXY_MINOR;\n\treturn ok;\n}\n\nfunction stInit() {\n\t;\n}\n\nfunction storeJPEGStreamOn(streamOop) {\n\tinterpreterProxy.storeIntegerofObjectwithValue(1, streamOop, jsPosition);\n\tinterpreterProxy.storeIntegerofObjectwithValue(3, streamOop, jsBitBuffer);\n\tinterpreterProxy.storeIntegerofObjectwithValue(4, streamOop, jsBitCount);\n}\n\nfunction yColorComponentFrom(oop) {\n\treturn colorComponentfrom(yComponent, oop) && (colorComponentBlocksfrom(yBlocks, oop));\n}\n\n\nSqueak.registerExternalModule(\"JPEGReaderPlugin\", {\n\tsetInterpreter: setInterpreter,\n\tprimitiveIdctInt: primitiveIdctInt,\n\tprimitiveColorConvertMCU: primitiveColorConvertMCU,\n\tprimitiveColorConvertGrayscaleMCU: primitiveColorConvertGrayscaleMCU,\n\tprimitiveDecodeMCU: primitiveDecodeMCU,\n\tgetModuleName: getModuleName,\n});\n\n}); // end of module\n","/* Smalltalk from Squeak4.5 with VMMaker 4.13.6 translated as JS source on 3 November 2014 1:52:21 pm */\n/* Automatically generated by\n\tJSPluginCodeGenerator VMMakerJS-bf.15 uuid: fd4e10f2-3773-4e80-8bb5-c4b471a014e5\n   from\n\tKedamaPlugin Kedama-Plugins-yo.1 uuid: 3fc7d691-0149-ba4d-a339-5d27cd44a2f8\n */\n\nmodule(\"users.bert.SqueakJS.plugins.KedamaPlugin\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";\n\nvar VM_PROXY_MAJOR = 1;\nvar VM_PROXY_MINOR = 11;\n\n/*** Functions ***/\nfunction CLASSOF(obj) { return typeof obj === \"number\" ? interpreterProxy.classSmallInteger() : obj.sqClass }\nfunction SIZEOF(obj) { return obj.pointers ? obj.pointers.length : obj.words ? obj.words.length : obj.bytes ? obj.bytes.length : 0 }\nfunction BYTESIZEOF(obj) { return obj.bytes ? obj.bytes.length : obj.words ? obj.words.length * 4 : 0 }\nfunction DIV(a, b) { return Math.floor(a / b) | 0; }   // integer division\nfunction MOD(a, b) { return a - DIV(a, b) * b | 0; }   // signed modulus\nfunction SHL(a, b) { return b > 31 ? 0 : a << b; }     // fix JS shift\nfunction SHR(a, b) { return b > 31 ? 0 : a >>> b; }    // fix JS shift\nfunction SHIFT(a, b) { return b < 0 ? (b < -31 ? 0 : a >>> (0-b) ) : (b > 31 ? 0 : a << b); }\n\n/*** Variables ***/\nvar interpreterProxy = null;\nvar kedamaRandomSeed = 0;\nvar moduleName = \"KedamaPlugin 3 November 2014 (e)\";\nvar randA = 0;\nvar randM = 0;\nvar randQ = 0;\nvar randR = 0;\n\n\nfunction degreesFromXy(x, y) {\n\tvar tanVal;\n\tvar theta;\n\n\t/* inline: true */;\n\tif (x === 0.0) {\n\t\tif (y >= 0.0) {\n\t\t\treturn 90.0;\n\t\t} else {\n\t\t\treturn 270.0;\n\t\t}\n\t} else {\n\t\ttanVal = y / x;\n\t\ttheta = Math.atan(tanVal);\n\t\tif (x >= 0.0) {\n\t\t\tif (y >= 0.0) {\n\t\t\t\treturn theta / 0.0174532925199433;\n\t\t\t} else {\n\t\t\t\treturn 360.0 + (theta / 0.0174532925199433);\n\t\t\t}\n\t\t} else {\n\t\t\treturn 180.0 + (theta / 0.0174532925199433);\n\t\t}\n\t}\n\treturn 0.0;\n}\n\nfunction degreesToRadians(degrees) {\n\tvar deg;\n\tvar headingRadians;\n\tvar q;\n\n\t/* inline: true */;\n\tdeg = 90.0 - degrees;\n\tq = deg / 360.0|0;\n\tif (deg < 0.0) {\n\t\t--q;\n\t}\n\theadingRadians = (deg - (q * 360.0)) * 0.0174532925199433;\n\treturn headingRadians;\n}\n\nfunction drawTurtlesInArray() {\n\tvar bitsIndex;\n\tvar colorArray;\n\tvar colorOop;\n\tvar destBits;\n\tvar destHeight;\n\tvar destOop;\n\tvar destWidth;\n\tvar i;\n\tvar size;\n\tvar visible;\n\tvar visibleArray;\n\tvar visibleOop;\n\tvar x;\n\tvar xArray;\n\tvar xOop;\n\tvar y;\n\tvar yArray;\n\tvar yOop;\n\n\t/* inline: true */;\n\tvisibleOop = interpreterProxy.stackValue(0);\n\tcolorOop = interpreterProxy.stackValue(1);\n\tyOop = interpreterProxy.stackValue(2);\n\txOop = interpreterProxy.stackValue(3);\n\tdestHeight = interpreterProxy.stackIntegerValue(4);\n\tdestWidth = interpreterProxy.stackIntegerValue(5);\n\tdestOop = interpreterProxy.stackValue(6);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(destOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(colorOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isBytes(visibleOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif ((destHeight * destWidth) !== SIZEOF(destOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(xOop);\n\tif (SIZEOF(yOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(colorOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(visibleOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\txArray = xOop.wordsAsFloat32Array();\n\tyArray = yOop.wordsAsFloat32Array();\n\tcolorArray = colorOop.words;\n\tvisibleArray = visibleOop.bytes;\n\tdestBits = destOop.words;\n\tfor (i = 0; i <= (size - 1); i++) {\n\t\tx = (xArray[i]|0);\n\t\t;\n\t\ty = (yArray[i]|0);\n\t\t;\n\t\tvisible = visibleArray[i];\n\t\tif ((visible !== 0) && (((x >= 0) && (y >= 0)) && ((x < destWidth) && (y < destHeight)))) {\n\t\t\tbitsIndex = (y * destWidth) + x;\n\t\t\tdestBits[bitsIndex] = colorArray[i];\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(7);\n}\n\nfunction getHeadingArrayInto() {\n\tvar heading;\n\tvar headingArray;\n\tvar headingOop;\n\tvar i;\n\tvar resultArray;\n\tvar resultOop;\n\tvar size;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackValue(0);\n\theadingOop = interpreterProxy.stackValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(resultOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(headingOop);\n\tif (SIZEOF(resultOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\theadingArray = headingOop.wordsAsFloat32Array();\n\tresultArray = resultOop.wordsAsFloat32Array();\n\tfor (i = 0; i <= (size - 1); i++) {\n\t\theading = headingArray[i];\n\t\theading = heading / 0.0174532925199433;\n\t\theading = 90.0 - heading;\n\t\tif (!(heading > 0.0)) {\n\t\t\theading += 360.0;\n\t\t}\n\t\tresultArray[i] = heading;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(2);\n}\n\n\n/*\tNote: This is hardcoded so it can be run from Squeak.\n\tThe module name is used for validating a module *after*\n\tit is loaded to check if it does really contain the module\n\twe're thinking it contains. This is important! */\n\nfunction getModuleName() {\n\treturn moduleName;\n}\n\nfunction getScalarHeading() {\n\tvar heading;\n\tvar headingArray;\n\tvar headingOop;\n\tvar index;\n\n\t/* inline: true */;\n\theadingOop = interpreterProxy.stackValue(0);\n\tindex = interpreterProxy.stackIntegerValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(headingOop) < index) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\theadingArray = headingOop.wordsAsFloat32Array();\n\theading = headingArray[index - 1];\n\theading = radiansToDegrees(heading);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(3);\n\tinterpreterProxy.pushFloat(heading);\n}\n\nfunction halt() {\n\t;\n}\n\nfunction initialiseModule() {\n\tkedamaRandomSeed = 17;\n\n\t/*  magic constant =      16807  */\n\n\trandA = 16807;\n\n\t/*  magic constant = 2147483647  */\n\n\trandM = 2147483647;\n\trandQ = DIV(randM, randA);\n\trandR = MOD(randM, randA);\n}\n\nfunction kedamaRandom2(range) {\n\tvar hi;\n\tvar lo;\n\tvar r;\n\tvar v;\n\tvar val;\n\n\t/* inline: true */;\n\tif (range < 0) {\n\t\tr = 0 - range;\n\t} else {\n\t\tr = range;\n\t}\n\thi = DIV(kedamaRandomSeed, randQ);\n\tlo = MOD(kedamaRandomSeed, randQ);\n\tkedamaRandomSeed = (randA * lo) - (randR * hi);\n\tv = kedamaRandomSeed & 65535;\n\tval = (v * (r + 1)) >>> 16;\n\tif (range < 0) {\n\t\treturn 0 - val;\n\t} else {\n\t\treturn val;\n\t}\n}\n\nfunction kedamaSetRandomSeed() {\n\tvar seed;\n\n\t/* inline: true */;\n\tseed = interpreterProxy.stackIntegerValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tkedamaRandomSeed = seed & 65536;\n\tinterpreterProxy.pop(1);\n}\n\nfunction makeMask() {\n\tvar alpha;\n\tvar dOrigin;\n\tvar data;\n\tvar dataBits;\n\tvar dataSize;\n\tvar highMask;\n\tvar i;\n\tvar mOrigin;\n\tvar maskBits;\n\tvar maskSize;\n\tvar pixel;\n\tvar shiftAmount;\n\n\t/* inline: true */;\n\tshiftAmount = interpreterProxy.stackIntegerValue(0);\n\tpixel = interpreterProxy.stackIntegerValue(1);\n\tmaskBits = interpreterProxy.stackValue(2);\n\tdataBits = interpreterProxy.stackValue(3);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tdataSize = SIZEOF(dataBits);\n\tmaskSize = SIZEOF(maskBits);\n\tif (dataSize !== maskSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (shiftAmount < -32) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (shiftAmount > 8) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tdOrigin = dataBits.words;\n\tmOrigin = maskBits.words;\n\thighMask = 4278190080;\n\tfor (i = 0; i <= (dataSize - 1); i++) {\n\t\tdata = dOrigin[i];\n\t\talpha = SHIFT(data, shiftAmount);\n\t\tif (alpha > 255) {\n\t\t\talpha = 255;\n\t\t}\n\t\tif (alpha < 0) {\n\t\t\talpha = 0;\n\t\t}\n\t\tmOrigin[i] = (((alpha << 24) & highMask) | pixel);\n\t}\n\tinterpreterProxy.pop(4);\n}\n\nfunction makeMaskLog() {\n\tvar alpha;\n\tvar dOrigin;\n\tvar data;\n\tvar dataBits;\n\tvar dataSize;\n\tvar highMask;\n\tvar i;\n\tvar mOrigin;\n\tvar maskBits;\n\tvar maskSize;\n\tvar max;\n\tvar maxFirst;\n\tvar maxLog;\n\tvar maxOop;\n\tvar pixel;\n\n\t/* inline: true */;\n\tmaxOop = interpreterProxy.stackValue(0);\n\tpixel = interpreterProxy.stackIntegerValue(1);\n\tmaskBits = interpreterProxy.stackValue(2);\n\tdataBits = interpreterProxy.stackValue(3);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tmaxFirst = maxOop.words;\n\tmax = maxFirst[0];\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tmaxLog = Math.log(max);\n\tdataSize = SIZEOF(dataBits);\n\tmaskSize = SIZEOF(maskBits);\n\tif (dataSize !== maskSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tdOrigin = dataBits.words;\n\tmOrigin = maskBits.words;\n\thighMask = 4278190080;\n\tfor (i = 0; i <= (dataSize - 1); i++) {\n\t\tdata = dOrigin[i];\n\t\tif (data === 0) {\n\t\t\talpha = 0;\n\t\t} else {\n\t\t\talpha = (((255.0 / maxLog) * Math.log(data))|0);\n\t\t}\n\t\tif (alpha > 255) {\n\t\t\talpha = 255;\n\t\t}\n\t\tmOrigin[i] = (((alpha << 24) & highMask) | pixel);\n\t}\n\tinterpreterProxy.pop(4);\n}\n\nfunction makeTurtlesMap() {\n\tvar height;\n\tvar index;\n\tvar map;\n\tvar mapIndex;\n\tvar mapOop;\n\tvar size;\n\tvar whoArray;\n\tvar whoOop;\n\tvar width;\n\tvar x;\n\tvar xArray;\n\tvar xOop;\n\tvar y;\n\tvar yArray;\n\tvar yOop;\n\n\t/* inline: true */;\n\theight = interpreterProxy.stackIntegerValue(0);\n\twidth = interpreterProxy.stackIntegerValue(1);\n\tyOop = interpreterProxy.stackValue(2);\n\txOop = interpreterProxy.stackValue(3);\n\twhoOop = interpreterProxy.stackValue(4);\n\tmapOop = interpreterProxy.stackValue(5);\n\tif (!interpreterProxy.isWords(yOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(whoOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(mapOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(whoOop);\n\tif (SIZEOF(xOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(yOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(mapOop) !== (height * width)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\txArray = xOop.wordsAsFloat32Array();\n\tyArray = yOop.wordsAsFloat32Array();\n\twhoArray = whoOop.words;\n\tmap = mapOop.words;\n\tfor (index = 0; index <= ((height * width) - 1); index++) {\n\t\tmap[index] = 0;\n\t}\n\tfor (index = 0; index <= (size - 1); index++) {\n\t\tx = xArray[index];\n\t\ty = yArray[index];\n\t\tmapIndex = (width * y) + x;\n\t\tif ((mapIndex >= 0) && (mapIndex < (height * width))) {\n\t\t\tmap[mapIndex] = whoArray[index];\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(6);\n}\n\nfunction primPixelAtXY() {\n\tvar bits;\n\tvar bitsOop;\n\tvar height;\n\tvar index;\n\tvar ret;\n\tvar width;\n\tvar x;\n\tvar xPos;\n\tvar y;\n\tvar yPos;\n\n\t/* inline: true */;\n\theight = interpreterProxy.stackIntegerValue(0);\n\twidth = interpreterProxy.stackIntegerValue(1);\n\tyPos = interpreterProxy.stackFloatValue(2);\n\txPos = interpreterProxy.stackFloatValue(3);\n\tbitsOop = interpreterProxy.stackValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(bitsOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(bitsOop) !== (height * width)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tx = xPos|0;\n\ty = yPos|0;\n\tbits = bitsOop.words;\n\tif ((((x >= 0) && (x < width)) && (y >= 0)) && (y < height)) {\n\t\tindex = (y * width) + x;\n\t\tret = bits[index];\n\t} else {\n\t\tret = 0;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(6);\n\tinterpreterProxy.pushInteger(ret);\n}\n\nfunction primPixelAtXYPut() {\n\tvar bits;\n\tvar bitsOop;\n\tvar height;\n\tvar index;\n\tvar v;\n\tvar value;\n\tvar width;\n\tvar x;\n\tvar xPos;\n\tvar y;\n\tvar yPos;\n\n\t/* inline: true */;\n\theight = interpreterProxy.stackIntegerValue(0);\n\twidth = interpreterProxy.stackIntegerValue(1);\n\tvalue = interpreterProxy.stackIntegerValue(2);\n\tyPos = interpreterProxy.stackFloatValue(3);\n\txPos = interpreterProxy.stackFloatValue(4);\n\tbitsOop = interpreterProxy.stackValue(5);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(bitsOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(bitsOop) !== (height * width)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tx = xPos|0;\n\ty = yPos|0;\n\tv = value;\n\tif (v > 1073741823) {\n\t\tv = 1073741823;\n\t}\n\tif (v < 0) {\n\t\tv = 0;\n\t}\n\tbits = bitsOop.words;\n\tif ((((x >= 0) && (x < width)) && (y >= 0)) && (y < height)) {\n\t\tindex = (y * width) + x;\n\t\tbits[index] = v;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(6);\n}\n\nfunction primPixelsAtXY() {\n\tvar bits;\n\tvar bitsHeight;\n\tvar bitsIndex;\n\tvar bitsOop;\n\tvar bitsWidth;\n\tvar destWords;\n\tvar destWordsOop;\n\tvar i;\n\tvar size;\n\tvar x;\n\tvar xArray;\n\tvar xArrayOop;\n\tvar y;\n\tvar yArray;\n\tvar yArrayOop;\n\n\t/* inline: true */;\n\tdestWordsOop = interpreterProxy.stackValue(0);\n\tbitsHeight = interpreterProxy.stackIntegerValue(1);\n\tbitsWidth = interpreterProxy.stackIntegerValue(2);\n\tbitsOop = interpreterProxy.stackValue(3);\n\tyArrayOop = interpreterProxy.stackValue(4);\n\txArrayOop = interpreterProxy.stackValue(5);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(destWordsOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(bitsOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif ((bitsHeight * bitsWidth) !== SIZEOF(bitsOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(xArrayOop);\n\tif (SIZEOF(yArrayOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(destWordsOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\txArray = xArrayOop.wordsAsFloat32Array();\n\tyArray = yArrayOop.wordsAsFloat32Array();\n\tdestWords = destWordsOop.words;\n\tbits = bitsOop.words;\n\tfor (i = 0; i <= (size - 1); i++) {\n\t\tx = (xArray[i]|0);\n\t\t;\n\t\ty = (yArray[i]|0);\n\t\t;\n\t\tif (((x >= 0) && (y >= 0)) && ((x < bitsWidth) && (y < bitsHeight))) {\n\t\t\tbitsIndex = (y * bitsWidth) + x;\n\t\t\tdestWords[i] = bits[bitsIndex];\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(6);\n}\n\nfunction primScalarForward() {\n\tvar bottomEdgeMode;\n\tvar destHeight;\n\tvar destWidth;\n\tvar dist;\n\tvar headingArray;\n\tvar headingOop;\n\tvar i;\n\tvar index;\n\tvar leftEdgeMode;\n\tvar newX;\n\tvar newY;\n\tvar rightEdgeMode;\n\tvar size;\n\tvar topEdgeMode;\n\tvar val;\n\tvar xArray;\n\tvar xOop;\n\tvar yArray;\n\tvar yOop;\n\n\t/* inline: true */;\n\tbottomEdgeMode = interpreterProxy.stackIntegerValue(0);\n\ttopEdgeMode = interpreterProxy.stackIntegerValue(1);\n\trightEdgeMode = interpreterProxy.stackIntegerValue(2);\n\tleftEdgeMode = interpreterProxy.stackIntegerValue(3);\n\tdestHeight = interpreterProxy.stackFloatValue(4);\n\tdestWidth = interpreterProxy.stackFloatValue(5);\n\tval = interpreterProxy.stackFloatValue(6);\n\theadingOop = interpreterProxy.stackValue(7);\n\tyOop = interpreterProxy.stackValue(8);\n\txOop = interpreterProxy.stackValue(9);\n\tindex = interpreterProxy.stackIntegerValue(10);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(xOop);\n\tif (SIZEOF(yOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(headingOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\txArray = xOop.wordsAsFloat32Array();\n\tyArray = yOop.wordsAsFloat32Array();\n\theadingArray = headingOop.wordsAsFloat32Array();\n\tdist = val;\n\ti = index - 1;\n\tnewX = xArray[i] + (dist * Math.cos(headingArray[i]));\n\tnewY = yArray[i] - (dist * Math.sin(headingArray[i]));\n\tscalarXAtxArrayheadingArrayvaluedestWidthleftEdgeModerightEdgeMode(i, xArray, headingArray, newX, destWidth, leftEdgeMode, rightEdgeMode);\n\tscalarYAtyArrayheadingArrayvaluedestHeighttopEdgeModebottomEdgeMode(i, yArray, headingArray, newY, destHeight, topEdgeMode, bottomEdgeMode);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(11);\n}\n\nfunction primSetPixelsAtXY() {\n\tvar bits;\n\tvar bitsHeight;\n\tvar bitsIndex;\n\tvar bitsOop;\n\tvar bitsWidth;\n\tvar i;\n\tvar intValue;\n\tvar isValueInt;\n\tvar size;\n\tvar value;\n\tvar valueOop;\n\tvar wordsValue;\n\tvar x;\n\tvar xArray;\n\tvar xArrayOop;\n\tvar y;\n\tvar yArray;\n\tvar yArrayOop;\n\n\t/* inline: true */;\n\tvalueOop = interpreterProxy.stackValue(0);\n\tbitsHeight = interpreterProxy.stackIntegerValue(1);\n\tbitsWidth = interpreterProxy.stackIntegerValue(2);\n\tbitsOop = interpreterProxy.stackValue(3);\n\tyArrayOop = interpreterProxy.stackValue(4);\n\txArrayOop = interpreterProxy.stackValue(5);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(bitsOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif ((bitsHeight * bitsWidth) !== SIZEOF(bitsOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(xArrayOop);\n\tif (SIZEOF(yArrayOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tisValueInt = typeof valueOop === \"number\";\n\tif (isValueInt) {\n\t\tintValue = valueOop;\n\t}\n\tif (!isValueInt) {\n\t\tif (!interpreterProxy.isMemberOf(valueOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t\tif (SIZEOF(valueOop) !== size) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\txArray = xArrayOop.wordsAsFloat32Array();\n\tyArray = yArrayOop.wordsAsFloat32Array();\n\tif (!isValueInt) {\n\t\twordsValue = valueOop.words;\n\t}\n\tbits = bitsOop.words;\n\tif (isValueInt) {\n\t\tvalue = intValue;\n\t}\n\tfor (i = 0; i <= (size - 1); i++) {\n\t\tx = (xArray[i]|0);\n\t\t;\n\t\ty = (yArray[i]|0);\n\t\t;\n\t\tif (((x >= 0) && (y >= 0)) && ((x < bitsWidth) && (y < bitsHeight))) {\n\t\t\tbitsIndex = (y * bitsWidth) + x;\n\t\t\tif (!isValueInt) {\n\t\t\t\tvalue = wordsValue[i];\n\t\t\t}\n\t\t\tbits[bitsIndex] = value;\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(6);\n}\n\nfunction primTurtlesForward() {\n\tvar bottomEdgeMode;\n\tvar destHeight;\n\tvar destWidth;\n\tvar dist;\n\tvar headingArray;\n\tvar headingOop;\n\tvar i;\n\tvar isValVector;\n\tvar leftEdgeMode;\n\tvar newX;\n\tvar newY;\n\tvar rightEdgeMode;\n\tvar size;\n\tvar topEdgeMode;\n\tvar val;\n\tvar valArray;\n\tvar valOop;\n\tvar xArray;\n\tvar xOop;\n\tvar yArray;\n\tvar yOop;\n\n\t/* inline: true */;\n\tbottomEdgeMode = interpreterProxy.stackIntegerValue(0);\n\ttopEdgeMode = interpreterProxy.stackIntegerValue(1);\n\trightEdgeMode = interpreterProxy.stackIntegerValue(2);\n\tleftEdgeMode = interpreterProxy.stackIntegerValue(3);\n\tdestHeight = interpreterProxy.stackFloatValue(4);\n\tdestWidth = interpreterProxy.stackFloatValue(5);\n\tvalOop = interpreterProxy.stackValue(6);\n\theadingOop = interpreterProxy.stackValue(7);\n\tyOop = interpreterProxy.stackValue(8);\n\txOop = interpreterProxy.stackValue(9);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (valOop.isFloat) {\n\t\tisValVector = false;\n\t} else {\n\t\tif (interpreterProxy.isWords(valOop)) {\n\t\t\tisValVector = true;\n\t\t} else {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tsize = SIZEOF(xOop);\n\tif (SIZEOF(yOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(headingOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (isValVector) {\n\t\tif (SIZEOF(valOop) !== size) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\txArray = xOop.wordsAsFloat32Array();\n\tyArray = yOop.wordsAsFloat32Array();\n\theadingArray = headingOop.wordsAsFloat32Array();\n\tif (isValVector) {\n\t\tvalArray = valOop.wordsAsFloat32Array();\n\t} else {\n\t\tval = interpreterProxy.floatValueOf(valOop);\n\t}\n\tfor (i = 0; i <= (size - 1); i++) {\n\t\tif (isValVector) {\n\t\t\tdist = valArray[i];\n\t\t} else {\n\t\t\tdist = val;\n\t\t}\n\t\tnewX = xArray[i] + (dist * Math.cos(headingArray[i]));\n\t\tnewY = yArray[i] - (dist * Math.sin(headingArray[i]));\n\t\tscalarXAtxArrayheadingArrayvaluedestWidthleftEdgeModerightEdgeMode(i, xArray, headingArray, newX, destWidth, leftEdgeMode, rightEdgeMode);\n\t\tscalarYAtyArrayheadingArrayvaluedestHeighttopEdgeModebottomEdgeMode(i, yArray, headingArray, newY, destHeight, topEdgeMode, bottomEdgeMode);\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(10);\n}\n\nfunction primUpHill() {\n\tvar bits;\n\tvar bitsOop;\n\tvar endX;\n\tvar endY;\n\tvar height;\n\tvar maxVal;\n\tvar maxValX;\n\tvar maxValY;\n\tvar ret;\n\tvar rowOffset;\n\tvar sniffRange;\n\tvar startX;\n\tvar startY;\n\tvar tH;\n\tvar tX;\n\tvar tY;\n\tvar thisVal;\n\tvar turtleX;\n\tvar turtleY;\n\tvar width;\n\tvar x;\n\tvar y;\n\n\t/* inline: true */;\n\tsniffRange = interpreterProxy.stackIntegerValue(0);\n\theight = interpreterProxy.stackIntegerValue(1);\n\twidth = interpreterProxy.stackIntegerValue(2);\n\tbitsOop = interpreterProxy.stackValue(3);\n\ttH = interpreterProxy.stackFloatValue(4);\n\ttY = interpreterProxy.stackFloatValue(5);\n\ttX = interpreterProxy.stackFloatValue(6);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(bitsOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(bitsOop) !== (height * width)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tbits = bitsOop.words;\n\tturtleX = tX;\n\tturtleY = tY;\n\tturtleX = Math.max(turtleX, 0);\n\tturtleY = Math.max(turtleY, 0);\n\tturtleX = Math.min(turtleX, (width - 1));\n\tturtleY = Math.min(turtleY, (height - 1));\n\tstartX = Math.max((turtleX - sniffRange), 0);\n\tendX = Math.min((turtleX + sniffRange), (width - 1));\n\tstartY = Math.max((turtleY - sniffRange), 0);\n\tendY = Math.min((turtleY + sniffRange), (height - 1));\n\tmaxVal = bits[(turtleY * width) + turtleX];\n\tmaxValX = -1;\n\tfor (y = startY; y <= endY; y++) {\n\t\trowOffset = y * width;\n\t\tfor (x = startX; x <= endX; x++) {\n\t\t\tthisVal = bits[rowOffset + x];\n\t\t\tif (thisVal > maxVal) {\n\t\t\t\tmaxValX = x;\n\t\t\t\tmaxValY = y;\n\t\t\t\tmaxVal = thisVal;\n\t\t\t}\n\t\t}\n\t}\n\tif (-1 === maxValX) {\n\t\tret = radiansToDegrees(tH);\n\t} else {\n\t\tret = degreesFromXy((maxValX - turtleX), (maxValY - turtleY)) + 90.0|0;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(8);\n\tinterpreterProxy.pushFloat(ret);\n}\n\nfunction primitiveAddArrays() {\n\tvar argOop;\n\tvar floatsArg;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar isArgWords;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsArg;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackObjectValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(argOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(argOop);\n\tinterpreterProxy.success(length === SIZEOF(rcvrOop));\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgWords = interpreterProxy.isMemberOf(argOop, \"WordArray\");\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgWords && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgWords) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\twordsArg = argOop.words;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordsResult[i] = (wordsRcvr[i] + wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (wordsRcvr[i] + floatsArg[i]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgWords) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\twordsArg = argOop.words;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] + wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] + floatsArg[i]);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveAddScalar() {\n\tvar argOop;\n\tvar floatArg;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar intArg;\n\tvar isArgInt;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvrOop);\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgInt = typeof argOop === \"number\";\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgInt && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgInt) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tintArg = argOop;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordsResult[i] = (wordsRcvr[i] + intArg);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (wordsRcvr[i] + floatArg);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgInt) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tintArg = argOop;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] + intArg);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] + floatArg);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveDivArrays() {\n\tvar argOop;\n\tvar floatsArg;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar isArgWords;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsArg;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackObjectValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(argOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(argOop);\n\tinterpreterProxy.success(length === SIZEOF(rcvrOop));\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgWords = interpreterProxy.isMemberOf(argOop, \"WordArray\");\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgWords && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgWords) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\twordsArg = argOop.words;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordsResult[i] = (wordsRcvr[i] / wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (wordsRcvr[i] / floatsArg[i]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgWords) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\twordsArg = argOop.words;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] / wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] / floatsArg[i]);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveDivScalar() {\n\tvar argOop;\n\tvar floatArg;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar intArg;\n\tvar isArgInt;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvrOop);\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgInt = typeof argOop === \"number\";\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgInt && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgInt) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tintArg = argOop;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordsResult[i] = (DIV(wordsRcvr[i], intArg));\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (wordsRcvr[i] / floatArg);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgInt) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tintArg = argOop;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] / intArg);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] / floatArg);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveMulArrays() {\n\tvar argOop;\n\tvar floatsArg;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar isArgWords;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsArg;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackObjectValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(argOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(argOop);\n\tinterpreterProxy.success(length === SIZEOF(rcvrOop));\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgWords = interpreterProxy.isMemberOf(argOop, \"WordArray\");\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgWords && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgWords) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\twordsArg = argOop.words;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordsResult[i] = (wordsRcvr[i] * wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (wordsRcvr[i] * floatsArg[i]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgWords) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\twordsArg = argOop.words;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] * wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] * floatsArg[i]);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveMulScalar() {\n\tvar argOop;\n\tvar floatArg;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar intArg;\n\tvar isArgInt;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvrOop);\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgInt = typeof argOop === \"number\";\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgInt && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgInt) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tintArg = argOop;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordsResult[i] = (wordsRcvr[i] * intArg);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (wordsRcvr[i] * floatArg);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgInt) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tintArg = argOop;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] * intArg);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] * floatArg);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveSubArrays() {\n\tvar argOop;\n\tvar floatsArg;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar isArgWords;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsArg;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackObjectValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(argOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(argOop);\n\tinterpreterProxy.success(length === SIZEOF(rcvrOop));\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgWords = interpreterProxy.isMemberOf(argOop, \"WordArray\");\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgWords && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgWords) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\twordsArg = argOop.words;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordsResult[i] = (wordsRcvr[i] - wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (wordsRcvr[i] - floatsArg[i]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgWords) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\twordsArg = argOop.words;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] - wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] - floatsArg[i]);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveSubScalar() {\n\tvar argOop;\n\tvar floatArg;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar intArg;\n\tvar isArgInt;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvrOop);\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgInt = typeof argOop === \"number\";\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgInt && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgInt) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tintArg = argOop;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordsResult[i] = (wordsRcvr[i] - intArg);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (wordsRcvr[i] - floatArg);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgInt) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tintArg = argOop;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] - intArg);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] - floatArg);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction radiansToDegrees(radians) {\n\tvar deg;\n\tvar degrees;\n\n\t/* inline: true */;\n\tdegrees = radians / 0.0174532925199433;\n\tdeg = 90.0 - degrees;\n\tif (!(deg > 0.0)) {\n\t\tdeg += 360.0;\n\t}\n\treturn deg;\n}\n\nfunction randomIntoFloatArray() {\n\tvar factor;\n\tvar floatArray;\n\tvar floatArrayOop;\n\tvar from;\n\tvar index;\n\tvar range;\n\tvar size;\n\tvar to;\n\n\t/* inline: true */;\n\tfactor = interpreterProxy.stackFloatValue(0);\n\tfloatArrayOop = interpreterProxy.stackValue(1);\n\tto = interpreterProxy.stackIntegerValue(2);\n\tfrom = interpreterProxy.stackIntegerValue(3);\n\trange = interpreterProxy.stackIntegerValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(floatArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(floatArrayOop);\n\tif (!((size >= to) && ((from >= 1) && (to >= from)))) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tfloatArray = floatArrayOop.wordsAsFloat32Array();\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tfor (index = from; index <= to; index++) {\n\t\tfloatArray[index - 1] = (kedamaRandom2(range) * factor);\n\t}\n\tinterpreterProxy.pop(5);\n}\n\nfunction randomIntoIntegerArray() {\n\tvar factor;\n\tvar from;\n\tvar index;\n\tvar integerArray;\n\tvar integerArrayOop;\n\tvar range;\n\tvar size;\n\tvar to;\n\n\t/* inline: true */;\n\tfactor = interpreterProxy.stackFloatValue(0);\n\tintegerArrayOop = interpreterProxy.stackValue(1);\n\tto = interpreterProxy.stackIntegerValue(2);\n\tfrom = interpreterProxy.stackIntegerValue(3);\n\trange = interpreterProxy.stackIntegerValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(integerArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(integerArrayOop);\n\tif (!((size >= to) && ((from >= 1) && (to >= from)))) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tintegerArray = integerArrayOop.words;\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tfor (index = from; index <= to; index++) {\n\t\tintegerArray[index - 1] = ((kedamaRandom2(range) * factor)|0);\n\t}\n\tinterpreterProxy.pop(5);\n}\n\nfunction randomRange() {\n\tvar range;\n\tvar ret;\n\n\t/* inline: true */;\n\trange = interpreterProxy.stackIntegerValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tret = kedamaRandom2(range);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(2);\n\tinterpreterProxy.pushInteger(ret);\n}\n\nfunction scalarGetAngleTo() {\n\tvar fromX;\n\tvar fromY;\n\tvar r;\n\tvar toX;\n\tvar toY;\n\tvar x;\n\tvar y;\n\n\t/* inline: true */;\n\tfromY = interpreterProxy.stackFloatValue(0);\n\tfromX = interpreterProxy.stackFloatValue(1);\n\ttoY = interpreterProxy.stackFloatValue(2);\n\ttoX = interpreterProxy.stackFloatValue(3);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tx = toX - fromX;\n\ty = toY - fromY;\n\tr = degreesFromXy(x, y);\n\tr += 90.0;\n\tif (r > 360.0) {\n\t\tr -= 360.0;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(5);\n\tinterpreterProxy.pushFloat(r);\n}\n\nfunction scalarGetDistanceTo() {\n\tvar fromX;\n\tvar fromY;\n\tvar r;\n\tvar toX;\n\tvar toY;\n\tvar x;\n\tvar y;\n\n\t/* inline: true */;\n\tfromY = interpreterProxy.stackFloatValue(0);\n\tfromX = interpreterProxy.stackFloatValue(1);\n\ttoY = interpreterProxy.stackFloatValue(2);\n\ttoX = interpreterProxy.stackFloatValue(3);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tx = fromX - toX;\n\ty = fromY - toY;\n\tr = Math.sqrt((x * x) + (y * y));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(5);\n\tinterpreterProxy.pushFloat(r);\n}\n\nfunction scalarXAtxArrayheadingArrayvaluedestWidthleftEdgeModerightEdgeMode(index, xArray, headingArray, val, destWidth, leftEdgeMode, rightEdgeMode) {\n\tvar headingRadians;\n\tvar newX;\n\n\t/* inline: true */;\n\tnewX = val;\n\tif (newX < 0.0) {\n\t\tif (leftEdgeMode === 1) {\n\n\t\t\t/* wrap */\n\n\t\t\tnewX += destWidth;\n\t\t}\n\t\tif (leftEdgeMode === 2) {\n\n\t\t\t/* stick */\n\n\t\t\tnewX = 0.0;\n\t\t}\n\t\tif (leftEdgeMode === 3) {\n\n\t\t\t/* bounce */\n\n\t\t\tnewX = 0.0 - newX;\n\t\t\theadingRadians = headingArray[index];\n\t\t\tif (headingRadians < 3.141592653589793) {\n\t\t\t\theadingArray[index] = (3.141592653589793 - headingRadians);\n\t\t\t} else {\n\t\t\t\theadingArray[index] = (9.42477796076938 - headingRadians);\n\t\t\t}\n\t\t}\n\t}\n\tif (newX >= destWidth) {\n\t\tif (rightEdgeMode === 1) {\n\t\t\tnewX -= destWidth;\n\t\t}\n\t\tif (rightEdgeMode === 2) {\n\t\t\tnewX = destWidth - 1.0e-6;\n\t\t}\n\t\tif (rightEdgeMode === 3) {\n\t\t\tnewX = (destWidth - 1.0e-6) - (newX - destWidth);\n\t\t\theadingRadians = headingArray[index];\n\t\t\tif (headingRadians < 3.141592653589793) {\n\t\t\t\theadingArray[index] = (3.141592653589793 - headingRadians);\n\t\t\t} else {\n\t\t\t\theadingArray[index] = (9.42477796076938 - headingRadians);\n\t\t\t}\n\t\t}\n\t}\n\txArray[index] = newX;\n}\n\nfunction scalarYAtyArrayheadingArrayvaluedestHeighttopEdgeModebottomEdgeMode(index, yArray, headingArray, val, destHeight, topEdgeMode, bottomEdgeMode) {\n\tvar newY;\n\n\t/* inline: true */;\n\tnewY = val;\n\tif (newY < 0.0) {\n\t\tif (topEdgeMode === 1) {\n\n\t\t\t/* wrap */\n\n\t\t\tnewY += destHeight;\n\t\t}\n\t\tif (topEdgeMode === 2) {\n\n\t\t\t/* stick */\n\n\t\t\tnewY = 0.0;\n\t\t}\n\t\tif (topEdgeMode === 3) {\n\n\t\t\t/* bounce */\n\n\t\t\tnewY = 0.0 - newY;\n\t\t\theadingArray[index] = (6.283185307179586 - headingArray[index]);\n\t\t}\n\t}\n\tif (newY >= destHeight) {\n\t\tif (bottomEdgeMode === 1) {\n\t\t\tnewY -= destHeight;\n\t\t}\n\t\tif (bottomEdgeMode === 2) {\n\t\t\tnewY = destHeight - 1.0e-6;\n\t\t}\n\t\tif (bottomEdgeMode === 3) {\n\t\t\tnewY = (destHeight - 1.0e-6) - (newY - destHeight);\n\t\t\theadingArray[index] = (6.283185307179586 - headingArray[index]);\n\t\t}\n\t}\n\tyArray[index] = newY;\n}\n\nfunction setHeadingArrayFrom() {\n\tvar heading;\n\tvar headingArray;\n\tvar headingOop;\n\tvar i;\n\tvar isValVector;\n\tvar resultArray;\n\tvar resultOop;\n\tvar size;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackValue(0);\n\theadingOop = interpreterProxy.stackValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(headingOop);\n\tif (resultOop.isFloat) {\n\t\tisValVector = false;\n\t} else {\n\t\tif (interpreterProxy.isWords(resultOop)) {\n\t\t\tif (SIZEOF(resultOop) !== size) {\n\t\t\t\tinterpreterProxy.primitiveFail();\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tisValVector = true;\n\t\t} else {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\theadingArray = headingOop.wordsAsFloat32Array();\n\tif (isValVector) {\n\t\tresultArray = resultOop.wordsAsFloat32Array();\n\t} else {\n\t\theading = interpreterProxy.floatValueOf(resultOop);\n\t\theading = degreesToRadians(heading);\n\t}\n\tfor (i = 0; i <= (size - 1); i++) {\n\t\tif (isValVector) {\n\t\t\theading = resultArray[i];\n\t\t\theading = degreesToRadians(heading);\n\t\t}\n\t\theadingArray[i] = heading;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(2);\n}\n\n\n/*\tNote: This is coded so that is can be run from Squeak. */\n\nfunction setInterpreter(anInterpreter) {\n\tvar ok;\n\n\tinterpreterProxy = anInterpreter;\n\tok = interpreterProxy.majorVersion() == VM_PROXY_MAJOR;\n\tif (ok === false) {\n\t\treturn false;\n\t}\n\tok = interpreterProxy.minorVersion() >= VM_PROXY_MINOR;\n\treturn ok;\n}\n\nfunction setScalarHeading() {\n\tvar heading;\n\tvar headingArray;\n\tvar headingOop;\n\tvar index;\n\n\t/* inline: true */;\n\theading = interpreterProxy.stackFloatValue(0);\n\theadingOop = interpreterProxy.stackValue(1);\n\tindex = interpreterProxy.stackIntegerValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(headingOop) < index) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\theadingArray = headingOop.wordsAsFloat32Array();\n\theadingArray[index - 1] = degreesToRadians(heading);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(3);\n}\n\nfunction shutdownModule() {\n\treturn true;\n}\n\nfunction turtleScalarSetX() {\n\tvar destWidth;\n\tvar headingArray;\n\tvar headingOop;\n\tvar leftEdgeMode;\n\tvar rightEdgeMode;\n\tvar size;\n\tvar val;\n\tvar xArray;\n\tvar xIndex;\n\tvar xOop;\n\n\t/* inline: true */;\n\trightEdgeMode = interpreterProxy.stackIntegerValue(0);\n\tleftEdgeMode = interpreterProxy.stackIntegerValue(1);\n\tdestWidth = interpreterProxy.stackFloatValue(2);\n\tval = interpreterProxy.stackFloatValue(3);\n\theadingOop = interpreterProxy.stackValue(4);\n\txIndex = interpreterProxy.stackIntegerValue(5);\n\txOop = interpreterProxy.stackValue(6);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(xOop);\n\tif (SIZEOF(headingOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\txArray = xOop.wordsAsFloat32Array();\n\theadingArray = headingOop.wordsAsFloat32Array();\n\tscalarXAtxArrayheadingArrayvaluedestWidthleftEdgeModerightEdgeMode(xIndex - 1, xArray, headingArray, val, destWidth, leftEdgeMode, rightEdgeMode);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(7);\n}\n\nfunction turtleScalarSetY() {\n\tvar bottomEdgeMode;\n\tvar destHeight;\n\tvar headingArray;\n\tvar headingOop;\n\tvar size;\n\tvar topEdgeMode;\n\tvar val;\n\tvar yArray;\n\tvar yIndex;\n\tvar yOop;\n\n\t/* inline: true */;\n\tbottomEdgeMode = interpreterProxy.stackIntegerValue(0);\n\ttopEdgeMode = interpreterProxy.stackIntegerValue(1);\n\tdestHeight = interpreterProxy.stackFloatValue(2);\n\tval = interpreterProxy.stackFloatValue(3);\n\theadingOop = interpreterProxy.stackValue(4);\n\tyIndex = interpreterProxy.stackIntegerValue(5);\n\tyOop = interpreterProxy.stackValue(6);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(yOop);\n\tif (SIZEOF(headingOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tyArray = yOop.wordsAsFloat32Array();\n\theadingArray = headingOop.wordsAsFloat32Array();\n\tscalarYAtyArrayheadingArrayvaluedestHeighttopEdgeModebottomEdgeMode(yIndex - 1, yArray, headingArray, val, destHeight, topEdgeMode, bottomEdgeMode);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(7);\n}\n\nfunction turtlesSetX() {\n\tvar destWidth;\n\tvar headingArray;\n\tvar headingOop;\n\tvar i;\n\tvar isValVector;\n\tvar leftEdgeMode;\n\tvar newX;\n\tvar rightEdgeMode;\n\tvar size;\n\tvar val;\n\tvar valArray;\n\tvar valOop;\n\tvar xArray;\n\tvar xOop;\n\n\t/* inline: true */;\n\trightEdgeMode = interpreterProxy.stackIntegerValue(0);\n\tleftEdgeMode = interpreterProxy.stackIntegerValue(1);\n\tdestWidth = interpreterProxy.stackFloatValue(2);\n\tvalOop = interpreterProxy.stackValue(3);\n\theadingOop = interpreterProxy.stackValue(4);\n\txOop = interpreterProxy.stackValue(5);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (valOop.isFloat) {\n\t\tisValVector = false;\n\t} else {\n\t\tif (interpreterProxy.isWords(valOop)) {\n\t\t\tisValVector = true;\n\t\t} else {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tsize = SIZEOF(xOop);\n\tif (SIZEOF(headingOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (isValVector) {\n\t\tif (SIZEOF(valOop) !== size) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\txArray = xOop.wordsAsFloat32Array();\n\theadingArray = headingOop.wordsAsFloat32Array();\n\tif (isValVector) {\n\t\tvalArray = valOop.wordsAsFloat32Array();\n\t} else {\n\t\tval = interpreterProxy.floatValueOf(valOop);\n\t}\n\tfor (i = 0; i <= (size - 1); i++) {\n\t\tif (isValVector) {\n\t\t\tnewX = valArray[i];\n\t\t} else {\n\t\t\tnewX = val;\n\t\t}\n\t\tscalarXAtxArrayheadingArrayvaluedestWidthleftEdgeModerightEdgeMode(i, xArray, headingArray, newX, destWidth, leftEdgeMode, rightEdgeMode);\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(6);\n}\n\nfunction turtlesSetY() {\n\tvar bottomEdgeMode;\n\tvar destHeight;\n\tvar headingArray;\n\tvar headingOop;\n\tvar i;\n\tvar isValVector;\n\tvar newY;\n\tvar size;\n\tvar topEdgeMode;\n\tvar val;\n\tvar valArray;\n\tvar valOop;\n\tvar yArray;\n\tvar yOop;\n\n\t/* inline: true */;\n\tbottomEdgeMode = interpreterProxy.stackIntegerValue(0);\n\ttopEdgeMode = interpreterProxy.stackIntegerValue(1);\n\tdestHeight = interpreterProxy.stackFloatValue(2);\n\tvalOop = interpreterProxy.stackValue(3);\n\theadingOop = interpreterProxy.stackValue(4);\n\tyOop = interpreterProxy.stackValue(5);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (valOop.isFloat) {\n\t\tisValVector = false;\n\t} else {\n\t\tif (interpreterProxy.isWords(valOop)) {\n\t\t\tisValVector = true;\n\t\t} else {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tsize = SIZEOF(yOop);\n\tif (SIZEOF(headingOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (isValVector) {\n\t\tif (SIZEOF(valOop) !== size) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tyArray = yOop.wordsAsFloat32Array();\n\theadingArray = headingOop.wordsAsFloat32Array();\n\tif (isValVector) {\n\t\tvalArray = valOop.wordsAsFloat32Array();\n\t} else {\n\t\tval = interpreterProxy.floatValueOf(valOop);\n\t}\n\tfor (i = 0; i <= (size - 1); i++) {\n\t\tif (isValVector) {\n\t\t\tnewY = valArray[i];\n\t\t} else {\n\t\t\tnewY = val;\n\t\t}\n\t\tscalarYAtyArrayheadingArrayvaluedestHeighttopEdgeModebottomEdgeMode(i, yArray, headingArray, newY, destHeight, topEdgeMode, bottomEdgeMode);\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(6);\n}\n\nfunction vectorGetAngleTo() {\n\tvar index;\n\tvar isVector;\n\tvar pX;\n\tvar pXOop;\n\tvar pY;\n\tvar pYOop;\n\tvar ppx;\n\tvar ppy;\n\tvar r;\n\tvar result;\n\tvar resultOop;\n\tvar size;\n\tvar x;\n\tvar xArray;\n\tvar xArrayOop;\n\tvar y;\n\tvar yArray;\n\tvar yArrayOop;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackValue(0);\n\tyArrayOop = interpreterProxy.stackValue(1);\n\txArrayOop = interpreterProxy.stackValue(2);\n\tpYOop = interpreterProxy.stackValue(3);\n\tpXOop = interpreterProxy.stackValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(resultOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(resultOop);\n\tif (size < 0) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(xArrayOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(yArrayOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (pXOop.isFloat) {\n\t\tif (pYOop.isFloat) {\n\t\t\tisVector = false;\n\t\t} else {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (pYOop.isFloat) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t} else {\n\t\t\tisVector = true;\n\t\t}\n\t}\n\tif (isVector) {\n\t\tif (SIZEOF(pXOop) !== size) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t\tif (SIZEOF(pYOop) !== size) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tresult = resultOop.wordsAsFloat32Array();\n\txArray = xArrayOop.wordsAsFloat32Array();\n\tyArray = yArrayOop.wordsAsFloat32Array();\n\tif (isVector) {\n\t\tpX = pXOop.wordsAsFloat32Array();\n\t\tpY = pYOop.wordsAsFloat32Array();\n\t}\n\tif (!isVector) {\n\t\tppx = interpreterProxy.floatValueOf(pXOop);\n\t\tppy = interpreterProxy.floatValueOf(pYOop);\n\t}\n\tfor (index = 0; index <= (size - 1); index++) {\n\t\tif (isVector) {\n\t\t\tppx = pX[index];\n\t\t\tppy = pY[index];\n\t\t}\n\t\tx = ppx - xArray[index];\n\t\ty = ppy - yArray[index];\n\t\tr = degreesFromXy(x, y);\n\t\tr += 90.0;\n\t\tif (r > 360.0) {\n\t\t\tr -= 360.0;\n\t\t}\n\t\tresult[index] = r;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(6);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction vectorGetDistanceTo() {\n\tvar index;\n\tvar isVector;\n\tvar pX;\n\tvar pXOop;\n\tvar pY;\n\tvar pYOop;\n\tvar ppx;\n\tvar ppy;\n\tvar result;\n\tvar resultOop;\n\tvar size;\n\tvar x;\n\tvar xArray;\n\tvar xArrayOop;\n\tvar y;\n\tvar yArray;\n\tvar yArrayOop;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackValue(0);\n\tyArrayOop = interpreterProxy.stackValue(1);\n\txArrayOop = interpreterProxy.stackValue(2);\n\tpYOop = interpreterProxy.stackValue(3);\n\tpXOop = interpreterProxy.stackValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(resultOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(resultOop);\n\tif (size < 0) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(xArrayOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(yArrayOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (pXOop.isFloat) {\n\t\tif (pYOop.isFloat) {\n\t\t\tisVector = false;\n\t\t} else {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (pYOop.isFloat) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t} else {\n\t\t\tisVector = true;\n\t\t}\n\t}\n\tif (isVector) {\n\t\tif (SIZEOF(pXOop) !== size) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t\tif (SIZEOF(pYOop) !== size) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tresult = resultOop.wordsAsFloat32Array();\n\txArray = xArrayOop.wordsAsFloat32Array();\n\tyArray = yArrayOop.wordsAsFloat32Array();\n\tif (isVector) {\n\t\tpX = pXOop.wordsAsFloat32Array();\n\t\tpY = pYOop.wordsAsFloat32Array();\n\t}\n\tif (!isVector) {\n\t\tppx = interpreterProxy.floatValueOf(pXOop);\n\t\tppy = interpreterProxy.floatValueOf(pYOop);\n\t}\n\tfor (index = 0; index <= (size - 1); index++) {\n\t\tif (isVector) {\n\t\t\tppx = pX[index];\n\t\t\tppy = pY[index];\n\t\t}\n\t\tx = ppx - xArray[index];\n\t\ty = ppy - yArray[index];\n\t\tresult[index] = Math.sqrt((x * x) + (y * y));\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(6);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction zoomBitmap() {\n\tvar bit;\n\tvar dOrigin;\n\tvar dst;\n\tvar dstIndex;\n\tvar dstSize;\n\tvar dummy;\n\tvar sHeight;\n\tvar sOrigin;\n\tvar sWidth;\n\tvar src;\n\tvar srcIndex;\n\tvar srcOrigin;\n\tvar srcSize;\n\tvar sx;\n\tvar sy;\n\tvar xFactor;\n\tvar y;\n\tvar yFactor;\n\n\t/* inline: true */;\n\tyFactor = interpreterProxy.stackIntegerValue(0);\n\txFactor = interpreterProxy.stackIntegerValue(1);\n\tsHeight = interpreterProxy.stackIntegerValue(2);\n\tsWidth = interpreterProxy.stackIntegerValue(3);\n\tdst = interpreterProxy.stackValue(4);\n\tsrc = interpreterProxy.stackValue(5);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tsrcSize = SIZEOF(src);\n\tdstSize = SIZEOF(dst);\n\tif ((sWidth * sHeight) !== srcSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (((srcSize * xFactor) * yFactor) !== dstSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsOrigin = src.words;\n\tdOrigin = dst.words;\n\tsrcIndex = 0;\n\tsrcOrigin = 0;\n\tdstIndex = 0;\n\tfor (sy = 0; sy <= (sHeight - 1); sy++) {\n\t\tfor (y = 0; y <= (yFactor - 1); y++) {\n\t\t\tfor (sx = 0; sx <= (sWidth - 1); sx++) {\n\t\t\t\tbit = sOrigin[srcIndex];\n\t\t\t\t++srcIndex;\n\t\t\t\tfor (dummy = 0; dummy <= (xFactor - 1); dummy++) {\n\t\t\t\t\tdOrigin[dstIndex] = bit;\n\t\t\t\t\t++dstIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t\tsrcIndex = srcOrigin;\n\t\t}\n\t\tsrcOrigin += sWidth;\n\t\tsrcIndex = srcOrigin;\n\t}\n\tinterpreterProxy.pop(6);\n}\n\n\nSqueak.registerExternalModule(\"KedamaPlugin\", {\n\tmakeMaskLog: makeMaskLog,\n\tvectorGetDistanceTo: vectorGetDistanceTo,\n\tgetScalarHeading: getScalarHeading,\n\tshutdownModule: shutdownModule,\n\tprimitiveAddScalar: primitiveAddScalar,\n\tprimSetPixelsAtXY: primSetPixelsAtXY,\n\tturtleScalarSetX: turtleScalarSetX,\n\tprimPixelAtXY: primPixelAtXY,\n\tprimUpHill: primUpHill,\n\tprimScalarForward: primScalarForward,\n\tprimitiveDivArrays: primitiveDivArrays,\n\tgetModuleName: getModuleName,\n\tprimitiveSubArrays: primitiveSubArrays,\n\tscalarGetAngleTo: scalarGetAngleTo,\n\trandomRange: randomRange,\n\tsetInterpreter: setInterpreter,\n\tkedamaSetRandomSeed: kedamaSetRandomSeed,\n\tdrawTurtlesInArray: drawTurtlesInArray,\n\tturtleScalarSetY: turtleScalarSetY,\n\trandomIntoIntegerArray: randomIntoIntegerArray,\n\tgetHeadingArrayInto: getHeadingArrayInto,\n\tmakeTurtlesMap: makeTurtlesMap,\n\tsetHeadingArrayFrom: setHeadingArrayFrom,\n\tturtlesSetX: turtlesSetX,\n\tsetScalarHeading: setScalarHeading,\n\tmakeMask: makeMask,\n\tprimitiveDivScalar: primitiveDivScalar,\n\tprimitiveSubScalar: primitiveSubScalar,\n\tprimPixelsAtXY: primPixelsAtXY,\n\tvectorGetAngleTo: vectorGetAngleTo,\n\tprimitiveMulArrays: primitiveMulArrays,\n\tprimPixelAtXYPut: primPixelAtXYPut,\n\tzoomBitmap: zoomBitmap,\n\tinitialiseModule: initialiseModule,\n\tprimitiveAddArrays: primitiveAddArrays,\n\tscalarGetDistanceTo: scalarGetDistanceTo,\n\tturtlesSetY: turtlesSetY,\n\trandomIntoFloatArray: randomIntoFloatArray,\n\tprimTurtlesForward: primTurtlesForward,\n\tprimitiveMulScalar: primitiveMulScalar,\n});\n\n}); // end of module\n","/* Smalltalk from Squeak4.5 with VMMaker 4.13.6 translated as JS source on 13 November 2014 7:11:01 pm */\n/* Automatically generated by\n\tJSPluginCodeGenerator VMMakerJS-bf.16 uuid: aa9fd3da-7901-4c62-ae34-c166f1492d3b\n   from\n\tKedamaPlugin2 Kedama-Plugins-yo.1 uuid: 3fc7d691-0149-ba4d-a339-5d27cd44a2f8\n */\n\nmodule(\"users.bert.SqueakJS.plugins.KedamaPlugin2\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";\n\nvar VM_PROXY_MAJOR = 1;\nvar VM_PROXY_MINOR = 11;\n\n/*** Functions ***/\nfunction CLASSOF(obj) { return typeof obj === \"number\" ? interpreterProxy.classSmallInteger() : obj.sqClass }\nfunction SIZEOF(obj) { return obj.pointers ? obj.pointers.length : obj.words ? obj.words.length : obj.bytes ? obj.bytes.length : 0 }\nfunction BYTESIZEOF(obj) { return obj.bytes ? obj.bytes.length : obj.words ? obj.words.length * 4 : 0 }\nfunction DIV(a, b) { return Math.floor(a / b) | 0; }   // integer division\nfunction MOD(a, b) { return a - DIV(a, b) * b | 0; }   // signed modulus\nfunction SHL(a, b) { return b > 31 ? 0 : a << b; }     // fix JS shift\nfunction SHR(a, b) { return b > 31 ? 0 : a >>> b; }    // fix JS shift\nfunction SHIFT(a, b) { return b < 0 ? (b < -31 ? 0 : a >>> (0-b) ) : (b > 31 ? 0 : a << b); }\n\n/*** Variables ***/\nvar interpreterProxy = null;\nvar kedamaRandomSeed = 0;\nvar moduleName = \"KedamaPlugin2 13 November 2014 (e)\";\nvar randA = 0;\nvar randM = 0;\nvar randQ = 0;\nvar randR = 0;\n\n\nfunction degreesFromXy(x, y) {\n\tvar tanVal;\n\tvar theta;\n\n\t/* inline: true */;\n\tif (x === 0.0) {\n\t\tif (y >= 0.0) {\n\t\t\treturn 90.0;\n\t\t} else {\n\t\t\treturn 270.0;\n\t\t}\n\t} else {\n\t\ttanVal = y / x;\n\t\ttheta = Math.atan(tanVal);\n\t\tif (x >= 0.0) {\n\t\t\tif (y >= 0.0) {\n\t\t\t\treturn theta / 0.0174532925199433;\n\t\t\t} else {\n\t\t\t\treturn 360.0 + (theta / 0.0174532925199433);\n\t\t\t}\n\t\t} else {\n\t\t\treturn 180.0 + (theta / 0.0174532925199433);\n\t\t}\n\t}\n\treturn 0.0;\n}\n\nfunction degreesToRadians(degrees) {\n\tvar deg;\n\tvar headingRadians;\n\tvar q;\n\n\t/* inline: true */;\n\tdeg = 90.0 - degrees;\n\tq = deg / 360.0|0;\n\tif (deg < 0.0) {\n\t\t--q;\n\t}\n\theadingRadians = (deg - (q * 360.0)) * 0.0174532925199433;\n\treturn headingRadians;\n}\n\nfunction drawTurtlesInArray() {\n\tvar bitsIndex;\n\tvar colorArray;\n\tvar colorOop;\n\tvar destBits;\n\tvar destHeight;\n\tvar destOop;\n\tvar destWidth;\n\tvar i;\n\tvar size;\n\tvar visible;\n\tvar visibleArray;\n\tvar visibleOop;\n\tvar x;\n\tvar xArray;\n\tvar xOop;\n\tvar y;\n\tvar yArray;\n\tvar yOop;\n\n\t/* inline: true */;\n\tvisibleOop = interpreterProxy.stackValue(0);\n\tcolorOop = interpreterProxy.stackValue(1);\n\tyOop = interpreterProxy.stackValue(2);\n\txOop = interpreterProxy.stackValue(3);\n\tdestHeight = interpreterProxy.stackIntegerValue(4);\n\tdestWidth = interpreterProxy.stackIntegerValue(5);\n\tdestOop = interpreterProxy.stackValue(6);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(destOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(colorOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isBytes(visibleOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif ((destHeight * destWidth) !== SIZEOF(destOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(xOop);\n\tif (SIZEOF(yOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(colorOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(visibleOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\txArray = xOop.wordsAsFloat32Array();\n\tyArray = yOop.wordsAsFloat32Array();\n\tcolorArray = colorOop.words;\n\tvisibleArray = visibleOop.bytes;\n\tdestBits = destOop.words;\n\tfor (i = 0; i <= (size - 1); i++) {\n\t\tx = (xArray[i]|0);\n\t\t;\n\t\ty = (yArray[i]|0);\n\t\t;\n\t\tvisible = visibleArray[i];\n\t\tif ((visible !== 0) && (((x >= 0) && (y >= 0)) && ((x < destWidth) && (y < destHeight)))) {\n\t\t\tbitsIndex = (y * destWidth) + x;\n\t\t\tdestBits[bitsIndex] = colorArray[i];\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(7);\n}\n\nfunction getHeadingArrayInto() {\n\tvar heading;\n\tvar headingArray;\n\tvar headingOop;\n\tvar i;\n\tvar resultArray;\n\tvar resultOop;\n\tvar size;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackValue(0);\n\theadingOop = interpreterProxy.stackValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(resultOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(headingOop);\n\tif (SIZEOF(resultOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\theadingArray = headingOop.wordsAsFloat32Array();\n\tresultArray = resultOop.wordsAsFloat32Array();\n\tfor (i = 0; i <= (size - 1); i++) {\n\t\theading = headingArray[i];\n\t\theading = heading / 0.0174532925199433;\n\t\theading = 90.0 - heading;\n\t\tif (!(heading > 0.0)) {\n\t\t\theading += 360.0;\n\t\t}\n\t\tresultArray[i] = heading;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(2);\n}\n\n\n/*\tNote: This is hardcoded so it can be run from Squeak.\n\tThe module name is used for validating a module *after*\n\tit is loaded to check if it does really contain the module\n\twe're thinking it contains. This is important! */\n\nfunction getModuleName() {\n\treturn moduleName;\n}\n\nfunction getScalarHeading() {\n\tvar heading;\n\tvar headingArray;\n\tvar headingOop;\n\tvar index;\n\n\t/* inline: true */;\n\theadingOop = interpreterProxy.stackValue(0);\n\tindex = interpreterProxy.stackIntegerValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(headingOop) < index) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\theadingArray = headingOop.wordsAsFloat32Array();\n\theading = headingArray[index - 1];\n\theading = radiansToDegrees(heading);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(3);\n\tinterpreterProxy.pushFloat(heading);\n}\n\nfunction halt() {\n\t;\n}\n\nfunction initialiseModule() {\n\tkedamaRandomSeed = 17;\n\n\t/*  magic constant =      16807  */\n\n\trandA = 16807;\n\n\t/*  magic constant = 2147483647  */\n\n\trandM = 2147483647;\n\trandQ = DIV(randM, randA);\n\trandR = MOD(randM, randA);\n}\n\nfunction kedamaRandom2(range) {\n\tvar hi;\n\tvar lo;\n\tvar r;\n\tvar v;\n\tvar val;\n\n\t/* inline: true */;\n\tif (range < 0) {\n\t\tr = 0 - range;\n\t} else {\n\t\tr = range;\n\t}\n\thi = DIV(kedamaRandomSeed, randQ);\n\tlo = MOD(kedamaRandomSeed, randQ);\n\tkedamaRandomSeed = (randA * lo) - (randR * hi);\n\tv = kedamaRandomSeed & 65535;\n\tval = (v * (r + 1)) >>> 16;\n\tif (range < 0) {\n\t\treturn 0 - val;\n\t} else {\n\t\treturn val;\n\t}\n}\n\nfunction kedamaSetRandomSeed() {\n\tvar seed;\n\n\t/* inline: true */;\n\tseed = interpreterProxy.stackIntegerValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tkedamaRandomSeed = seed & 65536;\n\tinterpreterProxy.pop(1);\n}\n\nfunction makeMask() {\n\tvar alpha;\n\tvar dOrigin;\n\tvar data;\n\tvar dataBits;\n\tvar dataSize;\n\tvar highMask;\n\tvar i;\n\tvar mOrigin;\n\tvar maskBits;\n\tvar maskSize;\n\tvar pixel;\n\tvar shiftAmount;\n\n\t/* inline: true */;\n\tshiftAmount = interpreterProxy.stackIntegerValue(0);\n\tpixel = interpreterProxy.stackIntegerValue(1);\n\tmaskBits = interpreterProxy.stackValue(2);\n\tdataBits = interpreterProxy.stackValue(3);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tdataSize = SIZEOF(dataBits);\n\tmaskSize = SIZEOF(maskBits);\n\tif (dataSize !== maskSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (shiftAmount < -32) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (shiftAmount > 8) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tdOrigin = dataBits.words;\n\tmOrigin = maskBits.words;\n\thighMask = 4278190080;\n\tfor (i = 0; i <= (dataSize - 1); i++) {\n\t\tdata = dOrigin[i];\n\t\talpha = SHIFT(data, shiftAmount);\n\t\tif (alpha > 255) {\n\t\t\talpha = 255;\n\t\t}\n\t\tif (alpha < 0) {\n\t\t\talpha = 0;\n\t\t}\n\t\tmOrigin[i] = (((alpha << 24) & highMask) | pixel);\n\t}\n\tinterpreterProxy.pop(4);\n}\n\nfunction makeMaskLog() {\n\tvar alpha;\n\tvar dOrigin;\n\tvar data;\n\tvar dataBits;\n\tvar dataSize;\n\tvar highMask;\n\tvar i;\n\tvar mOrigin;\n\tvar maskBits;\n\tvar maskSize;\n\tvar max;\n\tvar maxFirst;\n\tvar maxLog;\n\tvar maxOop;\n\tvar pixel;\n\n\t/* inline: true */;\n\tmaxOop = interpreterProxy.stackValue(0);\n\tpixel = interpreterProxy.stackIntegerValue(1);\n\tmaskBits = interpreterProxy.stackValue(2);\n\tdataBits = interpreterProxy.stackValue(3);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tmaxFirst = maxOop.words;\n\tmax = maxFirst[0];\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tmaxLog = Math.log(max);\n\tdataSize = SIZEOF(dataBits);\n\tmaskSize = SIZEOF(maskBits);\n\tif (dataSize !== maskSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tdOrigin = dataBits.words;\n\tmOrigin = maskBits.words;\n\thighMask = 4278190080;\n\tfor (i = 0; i <= (dataSize - 1); i++) {\n\t\tdata = dOrigin[i];\n\t\tif (data === 0) {\n\t\t\talpha = 0;\n\t\t} else {\n\t\t\talpha = (((255.0 / maxLog) * Math.log(data))|0);\n\t\t}\n\t\tif (alpha > 255) {\n\t\t\talpha = 255;\n\t\t}\n\t\tmOrigin[i] = (((alpha << 24) & highMask) | pixel);\n\t}\n\tinterpreterProxy.pop(4);\n}\n\nfunction makeTurtlesMap() {\n\tvar height;\n\tvar index;\n\tvar map;\n\tvar mapIndex;\n\tvar mapOop;\n\tvar size;\n\tvar whoArray;\n\tvar whoOop;\n\tvar width;\n\tvar x;\n\tvar xArray;\n\tvar xOop;\n\tvar y;\n\tvar yArray;\n\tvar yOop;\n\n\t/* inline: true */;\n\theight = interpreterProxy.stackIntegerValue(0);\n\twidth = interpreterProxy.stackIntegerValue(1);\n\tyOop = interpreterProxy.stackValue(2);\n\txOop = interpreterProxy.stackValue(3);\n\twhoOop = interpreterProxy.stackValue(4);\n\tmapOop = interpreterProxy.stackValue(5);\n\tif (!interpreterProxy.isWords(yOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(whoOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(mapOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(whoOop);\n\tif (SIZEOF(xOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(yOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(mapOop) !== (height * width)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\txArray = xOop.wordsAsFloat32Array();\n\tyArray = yOop.wordsAsFloat32Array();\n\twhoArray = whoOop.words;\n\tmap = mapOop.words;\n\tfor (index = 0; index <= ((height * width) - 1); index++) {\n\t\tmap[index] = 0;\n\t}\n\tfor (index = 0; index <= (size - 1); index++) {\n\t\tx = xArray[index];\n\t\ty = yArray[index];\n\t\tmapIndex = (width * y) + x;\n\t\tif ((mapIndex >= 0) && (mapIndex < (height * width))) {\n\t\t\tmap[mapIndex] = whoArray[index];\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(6);\n}\n\nfunction primPixelAtXY() {\n\tvar bits;\n\tvar bitsOop;\n\tvar height;\n\tvar index;\n\tvar ret;\n\tvar width;\n\tvar x;\n\tvar xPos;\n\tvar y;\n\tvar yPos;\n\n\t/* inline: true */;\n\theight = interpreterProxy.stackIntegerValue(0);\n\twidth = interpreterProxy.stackIntegerValue(1);\n\tyPos = interpreterProxy.stackFloatValue(2);\n\txPos = interpreterProxy.stackFloatValue(3);\n\tbitsOop = interpreterProxy.stackValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(bitsOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(bitsOop) !== (height * width)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tx = xPos|0;\n\ty = yPos|0;\n\tbits = bitsOop.words;\n\tif ((((x >= 0) && (x < width)) && (y >= 0)) && (y < height)) {\n\t\tindex = (y * width) + x;\n\t\tret = bits[index];\n\t} else {\n\t\tret = 0;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(6);\n\tinterpreterProxy.pushInteger(ret);\n}\n\nfunction primPixelAtXYPut() {\n\tvar bits;\n\tvar bitsOop;\n\tvar height;\n\tvar index;\n\tvar v;\n\tvar value;\n\tvar width;\n\tvar x;\n\tvar xPos;\n\tvar y;\n\tvar yPos;\n\n\t/* inline: true */;\n\theight = interpreterProxy.stackIntegerValue(0);\n\twidth = interpreterProxy.stackIntegerValue(1);\n\tvalue = interpreterProxy.stackIntegerValue(2);\n\tyPos = interpreterProxy.stackFloatValue(3);\n\txPos = interpreterProxy.stackFloatValue(4);\n\tbitsOop = interpreterProxy.stackValue(5);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(bitsOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(bitsOop) !== (height * width)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tx = xPos|0;\n\ty = yPos|0;\n\tv = value;\n\tif (v > 1073741823) {\n\t\tv = 1073741823;\n\t}\n\tif (v < 0) {\n\t\tv = 0;\n\t}\n\tbits = bitsOop.words;\n\tif ((((x >= 0) && (x < width)) && (y >= 0)) && (y < height)) {\n\t\tindex = (y * width) + x;\n\t\tbits[index] = v;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(6);\n}\n\nfunction primPixelsAtXY() {\n\tvar bits;\n\tvar bitsHeight;\n\tvar bitsIndex;\n\tvar bitsOop;\n\tvar bitsWidth;\n\tvar destWords;\n\tvar destWordsOop;\n\tvar i;\n\tvar size;\n\tvar x;\n\tvar xArray;\n\tvar xArrayOop;\n\tvar y;\n\tvar yArray;\n\tvar yArrayOop;\n\n\t/* inline: true */;\n\tdestWordsOop = interpreterProxy.stackValue(0);\n\tbitsHeight = interpreterProxy.stackIntegerValue(1);\n\tbitsWidth = interpreterProxy.stackIntegerValue(2);\n\tbitsOop = interpreterProxy.stackValue(3);\n\tyArrayOop = interpreterProxy.stackValue(4);\n\txArrayOop = interpreterProxy.stackValue(5);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(destWordsOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(bitsOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif ((bitsHeight * bitsWidth) !== SIZEOF(bitsOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(xArrayOop);\n\tif (SIZEOF(yArrayOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(destWordsOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\txArray = xArrayOop.wordsAsFloat32Array();\n\tyArray = yArrayOop.wordsAsFloat32Array();\n\tdestWords = destWordsOop.words;\n\tbits = bitsOop.words;\n\tfor (i = 0; i <= (size - 1); i++) {\n\t\tx = (xArray[i]|0);\n\t\t;\n\t\ty = (yArray[i]|0);\n\t\t;\n\t\tif (((x >= 0) && (y >= 0)) && ((x < bitsWidth) && (y < bitsHeight))) {\n\t\t\tbitsIndex = (y * bitsWidth) + x;\n\t\t\tdestWords[i] = bits[bitsIndex];\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(6);\n}\n\nfunction primScalarForward() {\n\tvar bottomEdgeMode;\n\tvar destHeight;\n\tvar destWidth;\n\tvar dist;\n\tvar headingArray;\n\tvar headingOop;\n\tvar i;\n\tvar index;\n\tvar leftEdgeMode;\n\tvar newX;\n\tvar newY;\n\tvar rightEdgeMode;\n\tvar size;\n\tvar topEdgeMode;\n\tvar val;\n\tvar xArray;\n\tvar xOop;\n\tvar yArray;\n\tvar yOop;\n\n\t/* inline: true */;\n\tbottomEdgeMode = interpreterProxy.stackIntegerValue(0);\n\ttopEdgeMode = interpreterProxy.stackIntegerValue(1);\n\trightEdgeMode = interpreterProxy.stackIntegerValue(2);\n\tleftEdgeMode = interpreterProxy.stackIntegerValue(3);\n\tdestHeight = interpreterProxy.stackFloatValue(4);\n\tdestWidth = interpreterProxy.stackFloatValue(5);\n\tval = interpreterProxy.stackFloatValue(6);\n\theadingOop = interpreterProxy.stackValue(7);\n\tyOop = interpreterProxy.stackValue(8);\n\txOop = interpreterProxy.stackValue(9);\n\tindex = interpreterProxy.stackIntegerValue(10);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(xOop);\n\tif (SIZEOF(yOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(headingOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\txArray = xOop.wordsAsFloat32Array();\n\tyArray = yOop.wordsAsFloat32Array();\n\theadingArray = headingOop.wordsAsFloat32Array();\n\tdist = val;\n\ti = index - 1;\n\tnewX = xArray[i] + (dist * Math.cos(headingArray[i]));\n\tnewY = yArray[i] - (dist * Math.sin(headingArray[i]));\n\tscalarXAtxArrayheadingArrayvaluedestWidthleftEdgeModerightEdgeMode(i, xArray, headingArray, newX, destWidth, leftEdgeMode, rightEdgeMode);\n\tscalarYAtyArrayheadingArrayvaluedestHeighttopEdgeModebottomEdgeMode(i, yArray, headingArray, newY, destHeight, topEdgeMode, bottomEdgeMode);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(11);\n}\n\nfunction primSetPixelsAtXY() {\n\tvar bits;\n\tvar bitsHeight;\n\tvar bitsIndex;\n\tvar bitsOop;\n\tvar bitsWidth;\n\tvar floatsValue;\n\tvar fv;\n\tvar i;\n\tvar intValue;\n\tvar isValueInt;\n\tvar isValueWordArray;\n\tvar pArray;\n\tvar pArrayOop;\n\tvar size;\n\tvar value;\n\tvar valueOop;\n\tvar wordsValue;\n\tvar x;\n\tvar xArray;\n\tvar xArrayOop;\n\tvar y;\n\tvar yArray;\n\tvar yArrayOop;\n\n\t/* inline: true */;\n\tvalueOop = interpreterProxy.stackValue(0);\n\tbitsHeight = interpreterProxy.stackIntegerValue(1);\n\tbitsWidth = interpreterProxy.stackIntegerValue(2);\n\tbitsOop = interpreterProxy.stackValue(3);\n\tyArrayOop = interpreterProxy.stackValue(4);\n\txArrayOop = interpreterProxy.stackValue(5);\n\tpArrayOop = interpreterProxy.stackValue(6);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isBytes(pArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(bitsOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif ((bitsHeight * bitsWidth) !== SIZEOF(bitsOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(xArrayOop);\n\tif (SIZEOF(pArrayOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(yArrayOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tpArray = pArrayOop.bytes;\n\txArray = xArrayOop.wordsAsFloat32Array();\n\tyArray = yArrayOop.wordsAsFloat32Array();\n\tisValueInt = typeof valueOop === \"number\";\n\tif (isValueInt) {\n\t\tintValue = valueOop;\n\t\tvalue = intValue;\n\t} else {\n\t\tif (SIZEOF(valueOop) !== size) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t\tisValueWordArray = interpreterProxy.isMemberOf(valueOop, \"WordArray\");\n\t\tif (isValueWordArray) {\n\t\t\twordsValue = valueOop.words;\n\t\t} else {\n\t\t\tfloatsValue = valueOop.wordsAsFloat32Array();\n\t\t}\n\t}\n\tbits = bitsOop.words;\n\tfor (i = 0; i <= (size - 1); i++) {\n\t\tif (pArray[i] === 1) {\n\t\t\tx = (xArray[i]|0);\n\t\t\t;\n\t\t\ty = (yArray[i]|0);\n\t\t\t;\n\t\t\tif (((x >= 0) && (y >= 0)) && ((x < bitsWidth) && (y < bitsHeight))) {\n\t\t\t\tbitsIndex = (y * bitsWidth) + x;\n\t\t\t\tif (isValueInt) {\n\t\t\t\t\tbits[bitsIndex] = value;\n\t\t\t\t} else {\n\t\t\t\t\tif (isValueWordArray) {\n\t\t\t\t\t\tbits[bitsIndex] = wordsValue[i];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfv = floatsValue[i];\n\t\t\t\t\t\t;\n\t\t\t\t\t\tbits[bitsIndex] = fv;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(7);\n}\n\nfunction primTurtlesForward() {\n\tvar bottomEdgeMode;\n\tvar destHeight;\n\tvar destWidth;\n\tvar dist;\n\tvar headingArray;\n\tvar headingOop;\n\tvar i;\n\tvar isValVector;\n\tvar leftEdgeMode;\n\tvar newX;\n\tvar newY;\n\tvar pArray;\n\tvar pOop;\n\tvar rightEdgeMode;\n\tvar size;\n\tvar topEdgeMode;\n\tvar val;\n\tvar valArray;\n\tvar valOop;\n\tvar xArray;\n\tvar xOop;\n\tvar yArray;\n\tvar yOop;\n\n\t/* inline: true */;\n\tbottomEdgeMode = interpreterProxy.stackIntegerValue(0);\n\ttopEdgeMode = interpreterProxy.stackIntegerValue(1);\n\trightEdgeMode = interpreterProxy.stackIntegerValue(2);\n\tleftEdgeMode = interpreterProxy.stackIntegerValue(3);\n\tdestHeight = interpreterProxy.stackFloatValue(4);\n\tdestWidth = interpreterProxy.stackFloatValue(5);\n\tvalOop = interpreterProxy.stackValue(6);\n\theadingOop = interpreterProxy.stackValue(7);\n\tyOop = interpreterProxy.stackValue(8);\n\txOop = interpreterProxy.stackValue(9);\n\tpOop = interpreterProxy.stackValue(10);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isBytes(pOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (valOop.isFloat) {\n\t\tisValVector = false;\n\t} else {\n\t\tif (interpreterProxy.isWords(valOop)) {\n\t\t\tisValVector = true;\n\t\t} else {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tsize = SIZEOF(xOop);\n\tif (SIZEOF(yOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(headingOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(pOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (isValVector) {\n\t\tif (SIZEOF(valOop) !== size) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tpArray = pOop.bytes;\n\txArray = xOop.wordsAsFloat32Array();\n\tyArray = yOop.wordsAsFloat32Array();\n\theadingArray = headingOop.wordsAsFloat32Array();\n\tif (isValVector) {\n\t\tvalArray = valOop.wordsAsFloat32Array();\n\t} else {\n\t\tval = interpreterProxy.floatValueOf(valOop);\n\t}\n\tfor (i = 0; i <= (size - 1); i++) {\n\t\tif (pArray[i] === 1) {\n\t\t\tif (isValVector) {\n\t\t\t\tdist = valArray[i];\n\t\t\t} else {\n\t\t\t\tdist = val;\n\t\t\t}\n\t\t\tnewX = xArray[i] + (dist * Math.cos(headingArray[i]));\n\t\t\tnewY = yArray[i] - (dist * Math.sin(headingArray[i]));\n\t\t\tscalarXAtxArrayheadingArrayvaluedestWidthleftEdgeModerightEdgeMode(i, xArray, headingArray, newX, destWidth, leftEdgeMode, rightEdgeMode);\n\t\t\tscalarYAtyArrayheadingArrayvaluedestHeighttopEdgeModebottomEdgeMode(i, yArray, headingArray, newY, destHeight, topEdgeMode, bottomEdgeMode);\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(11);\n}\n\nfunction primUpHill() {\n\tvar bits;\n\tvar bitsOop;\n\tvar endX;\n\tvar endY;\n\tvar height;\n\tvar maxVal;\n\tvar maxValX;\n\tvar maxValY;\n\tvar ret;\n\tvar rowOffset;\n\tvar sniffRange;\n\tvar startX;\n\tvar startY;\n\tvar tH;\n\tvar tX;\n\tvar tY;\n\tvar thisVal;\n\tvar turtleX;\n\tvar turtleY;\n\tvar width;\n\tvar x;\n\tvar y;\n\n\t/* inline: true */;\n\tsniffRange = interpreterProxy.stackIntegerValue(0);\n\theight = interpreterProxy.stackIntegerValue(1);\n\twidth = interpreterProxy.stackIntegerValue(2);\n\tbitsOop = interpreterProxy.stackValue(3);\n\ttH = interpreterProxy.stackFloatValue(4);\n\ttY = interpreterProxy.stackFloatValue(5);\n\ttX = interpreterProxy.stackFloatValue(6);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(bitsOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(bitsOop) !== (height * width)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tbits = bitsOop.words;\n\tturtleX = tX;\n\tturtleY = tY;\n\tturtleX = Math.max(turtleX, 0);\n\tturtleY = Math.max(turtleY, 0);\n\tturtleX = Math.min(turtleX, (width - 1));\n\tturtleY = Math.min(turtleY, (height - 1));\n\tstartX = Math.max((turtleX - sniffRange), 0);\n\tendX = Math.min((turtleX + sniffRange), (width - 1));\n\tstartY = Math.max((turtleY - sniffRange), 0);\n\tendY = Math.min((turtleY + sniffRange), (height - 1));\n\tmaxVal = bits[(turtleY * width) + turtleX];\n\tmaxValX = -1;\n\tfor (y = startY; y <= endY; y++) {\n\t\trowOffset = y * width;\n\t\tfor (x = startX; x <= endX; x++) {\n\t\t\tthisVal = bits[rowOffset + x];\n\t\t\tif (thisVal > maxVal) {\n\t\t\t\tmaxValX = x;\n\t\t\t\tmaxValY = y;\n\t\t\t\tmaxVal = thisVal;\n\t\t\t}\n\t\t}\n\t}\n\tif (-1 === maxValX) {\n\t\tret = radiansToDegrees(tH);\n\t} else {\n\t\tret = degreesFromXy((maxValX - turtleX), (maxValY - turtleY)) + 90.0|0;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(8);\n\tinterpreterProxy.pushFloat(ret);\n}\n\nfunction primitiveAddArrays() {\n\tvar argOop;\n\tvar floatsArg;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar isArgWords;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsArg;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackObjectValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(argOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(argOop);\n\tinterpreterProxy.success(length === SIZEOF(rcvrOop));\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgWords = interpreterProxy.isMemberOf(argOop, \"WordArray\");\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgWords && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgWords) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\twordsArg = argOop.words;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordsResult[i] = (wordsRcvr[i] + wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (wordsRcvr[i] + floatsArg[i]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgWords) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\twordsArg = argOop.words;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] + wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] + floatsArg[i]);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveAddScalar() {\n\tvar argOop;\n\tvar floatArg;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar intArg;\n\tvar isArgInt;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvrOop);\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgInt = typeof argOop === \"number\";\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgInt && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgInt) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tintArg = argOop;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordsResult[i] = (wordsRcvr[i] + intArg);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (wordsRcvr[i] + floatArg);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgInt) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tintArg = argOop;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] + intArg);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] + floatArg);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveAndByteArray() {\n\tvar i;\n\tvar length;\n\tvar length1;\n\tvar length2;\n\tvar otherArray;\n\tvar otherOop;\n\tvar rcvrArray;\n\tvar rcvrOop;\n\n\t/* inline: true */;\n\totherOop = interpreterProxy.stackObjectValue(0);\n\trcvrOop = interpreterProxy.stackValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isBytes(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isBytes(otherOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength1 = SIZEOF(rcvrOop);\n\tlength2 = SIZEOF(otherOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = length1;\n\tif (length1 > length2) {\n\t\tlength = length2;\n\t}\n\totherArray = otherOop.bytes;\n\trcvrArray = rcvrOop.bytes;\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\trcvrArray[i] = ((rcvrArray[i] + otherArray[i]) === 2);\n\t}\n\tinterpreterProxy.pop(1);\n}\n\nfunction primitiveDivArrays() {\n\tvar argOop;\n\tvar floatsArg;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar isArgWords;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsArg;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackObjectValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(argOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(argOop);\n\tinterpreterProxy.success(length === SIZEOF(rcvrOop));\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgWords = interpreterProxy.isMemberOf(argOop, \"WordArray\");\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgWords && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgWords) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\twordsArg = argOop.words;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordsResult[i] = (wordsRcvr[i] / wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (wordsRcvr[i] / floatsArg[i]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgWords) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\twordsArg = argOop.words;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] / wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] / floatsArg[i]);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveDivScalar() {\n\tvar argOop;\n\tvar floatArg;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar intArg;\n\tvar isArgInt;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvrOop);\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgInt = typeof argOop === \"number\";\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgInt && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgInt) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tintArg = argOop;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordsResult[i] = (DIV(wordsRcvr[i], intArg));\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (wordsRcvr[i] / floatArg);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgInt) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tintArg = argOop;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] / intArg);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] / floatArg);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveEQArrays() {\n\tvar argOop;\n\tvar bytesResult;\n\tvar floatsArg;\n\tvar floatsRcvr;\n\tvar i;\n\tvar isArgWords;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsArg;\n\tvar wordsRcvr;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackObjectValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(argOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isBytes(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(argOop);\n\tinterpreterProxy.success(length === SIZEOF(rcvrOop));\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgWords = interpreterProxy.isMemberOf(argOop, \"WordArray\");\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isRcvrWords) {\n\t\tif (isArgWords) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\twordsArg = argOop.words;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] === wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] === floatsArg[i]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgWords) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\twordsArg = argOop.words;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] === wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] === floatsArg[i]);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveEQScalar() {\n\tvar argOop;\n\tvar bytesResult;\n\tvar floatArg;\n\tvar floatsRcvr;\n\tvar i;\n\tvar intArg;\n\tvar isArgInt;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsRcvr;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isBytes(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvrOop);\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgInt = typeof argOop === \"number\";\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isRcvrWords) {\n\t\tif (isArgInt) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tintArg = argOop;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] === intArg);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] === floatArg);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgInt) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tintArg = argOop;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] === intArg);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] === floatArg);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveGEArrays() {\n\tvar argOop;\n\tvar bytesResult;\n\tvar floatsArg;\n\tvar floatsRcvr;\n\tvar i;\n\tvar isArgWords;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsArg;\n\tvar wordsRcvr;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackObjectValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(argOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isBytes(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(argOop);\n\tinterpreterProxy.success(length === SIZEOF(rcvrOop));\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgWords = interpreterProxy.isMemberOf(argOop, \"WordArray\");\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isRcvrWords) {\n\t\tif (isArgWords) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\twordsArg = argOop.words;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] >= wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] >= floatsArg[i]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgWords) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\twordsArg = argOop.words;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] >= wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] >= floatsArg[i]);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveGEScalar() {\n\tvar argOop;\n\tvar bytesResult;\n\tvar floatArg;\n\tvar floatsRcvr;\n\tvar i;\n\tvar intArg;\n\tvar isArgInt;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsRcvr;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isBytes(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvrOop);\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgInt = typeof argOop === \"number\";\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isRcvrWords) {\n\t\tif (isArgInt) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tintArg = argOop;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] >= intArg);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] >= floatArg);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgInt) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tintArg = argOop;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] >= intArg);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] >= floatArg);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveGTArrays() {\n\tvar argOop;\n\tvar bytesResult;\n\tvar floatsArg;\n\tvar floatsRcvr;\n\tvar i;\n\tvar isArgWords;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsArg;\n\tvar wordsRcvr;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackObjectValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(argOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isBytes(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(argOop);\n\tinterpreterProxy.success(length === SIZEOF(rcvrOop));\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgWords = interpreterProxy.isMemberOf(argOop, \"WordArray\");\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isRcvrWords) {\n\t\tif (isArgWords) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\twordsArg = argOop.words;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] > wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] > floatsArg[i]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgWords) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\twordsArg = argOop.words;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] > wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] > floatsArg[i]);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveGTScalar() {\n\tvar argOop;\n\tvar bytesResult;\n\tvar floatArg;\n\tvar floatsRcvr;\n\tvar i;\n\tvar intArg;\n\tvar isArgInt;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsRcvr;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isBytes(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvrOop);\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgInt = typeof argOop === \"number\";\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isRcvrWords) {\n\t\tif (isArgInt) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tintArg = argOop;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] > intArg);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] > floatArg);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgInt) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tintArg = argOop;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] > intArg);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] > floatArg);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveLEArrays() {\n\tvar argOop;\n\tvar bytesResult;\n\tvar floatsArg;\n\tvar floatsRcvr;\n\tvar i;\n\tvar isArgWords;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsArg;\n\tvar wordsRcvr;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackObjectValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(argOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isBytes(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(argOop);\n\tinterpreterProxy.success(length === SIZEOF(rcvrOop));\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgWords = interpreterProxy.isMemberOf(argOop, \"WordArray\");\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isRcvrWords) {\n\t\tif (isArgWords) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\twordsArg = argOop.words;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] <= wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] <= floatsArg[i]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgWords) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\twordsArg = argOop.words;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] <= wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] <= floatsArg[i]);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveLEScalar() {\n\tvar argOop;\n\tvar bytesResult;\n\tvar floatArg;\n\tvar floatsRcvr;\n\tvar i;\n\tvar intArg;\n\tvar isArgInt;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsRcvr;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isBytes(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvrOop);\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgInt = typeof argOop === \"number\";\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isRcvrWords) {\n\t\tif (isArgInt) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tintArg = argOop;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] <= intArg);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] <= floatArg);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgInt) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tintArg = argOop;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] <= intArg);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] <= floatArg);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveLTArrays() {\n\tvar argOop;\n\tvar bytesResult;\n\tvar floatsArg;\n\tvar floatsRcvr;\n\tvar i;\n\tvar isArgWords;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsArg;\n\tvar wordsRcvr;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackObjectValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(argOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isBytes(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(argOop);\n\tinterpreterProxy.success(length === SIZEOF(rcvrOop));\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgWords = interpreterProxy.isMemberOf(argOop, \"WordArray\");\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isRcvrWords) {\n\t\tif (isArgWords) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\twordsArg = argOop.words;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] < wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] < floatsArg[i]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgWords) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\twordsArg = argOop.words;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] < wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] < floatsArg[i]);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveLTScalar() {\n\tvar argOop;\n\tvar bytesResult;\n\tvar floatArg;\n\tvar floatsRcvr;\n\tvar i;\n\tvar intArg;\n\tvar isArgInt;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsRcvr;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isBytes(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvrOop);\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgInt = typeof argOop === \"number\";\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isRcvrWords) {\n\t\tif (isArgInt) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tintArg = argOop;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] < intArg);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] < floatArg);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgInt) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tintArg = argOop;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] < intArg);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] < floatArg);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveMulArrays() {\n\tvar argOop;\n\tvar floatsArg;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar isArgWords;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsArg;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackObjectValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(argOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(argOop);\n\tinterpreterProxy.success(length === SIZEOF(rcvrOop));\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgWords = interpreterProxy.isMemberOf(argOop, \"WordArray\");\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgWords && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgWords) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\twordsArg = argOop.words;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordsResult[i] = (wordsRcvr[i] * wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (wordsRcvr[i] * floatsArg[i]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgWords) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\twordsArg = argOop.words;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] * wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] * floatsArg[i]);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveMulScalar() {\n\tvar argOop;\n\tvar floatArg;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar intArg;\n\tvar isArgInt;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvrOop);\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgInt = typeof argOop === \"number\";\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgInt && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgInt) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tintArg = argOop;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordsResult[i] = (wordsRcvr[i] * intArg);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (wordsRcvr[i] * floatArg);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgInt) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tintArg = argOop;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] * intArg);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] * floatArg);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveNEArrays() {\n\tvar argOop;\n\tvar bytesResult;\n\tvar floatsArg;\n\tvar floatsRcvr;\n\tvar i;\n\tvar isArgWords;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsArg;\n\tvar wordsRcvr;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackObjectValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(argOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isBytes(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(argOop);\n\tinterpreterProxy.success(length === SIZEOF(rcvrOop));\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgWords = interpreterProxy.isMemberOf(argOop, \"WordArray\");\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isRcvrWords) {\n\t\tif (isArgWords) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\twordsArg = argOop.words;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] !== wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] !== floatsArg[i]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgWords) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\twordsArg = argOop.words;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] !== wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] !== floatsArg[i]);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveNEScalar() {\n\tvar argOop;\n\tvar bytesResult;\n\tvar floatArg;\n\tvar floatsRcvr;\n\tvar i;\n\tvar intArg;\n\tvar isArgInt;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsRcvr;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isBytes(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvrOop);\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgInt = typeof argOop === \"number\";\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isRcvrWords) {\n\t\tif (isArgInt) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tintArg = argOop;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] !== intArg);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (wordsRcvr[i] !== floatArg);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgInt) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tintArg = argOop;\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] !== intArg);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tbytesResult = resultOop.bytes;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tbytesResult[i] = (floatsRcvr[i] !== floatArg);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveNotByteArray() {\n\tvar i;\n\tvar length;\n\tvar rcvrArray;\n\tvar rcvrOop;\n\n\t/* inline: true */;\n\trcvrOop = interpreterProxy.stackValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isBytes(rcvrOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvrOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\trcvrArray = rcvrOop.bytes;\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\tif (rcvrArray[i] === 0) {\n\t\t\trcvrArray[i] = 1;\n\t\t} else {\n\t\t\trcvrArray[i] = 0;\n\t\t}\n\t}\n}\n\nfunction primitiveOrByteArray() {\n\tvar i;\n\tvar length;\n\tvar length1;\n\tvar length2;\n\tvar otherArray;\n\tvar otherOop;\n\tvar rcvrArray;\n\tvar rcvrOop;\n\n\t/* inline: true */;\n\totherOop = interpreterProxy.stackObjectValue(0);\n\trcvrOop = interpreterProxy.stackValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isBytes(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isBytes(otherOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength1 = SIZEOF(rcvrOop);\n\tlength2 = SIZEOF(otherOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = length1;\n\tif (length1 > length2) {\n\t\tlength = length2;\n\t}\n\totherArray = otherOop.bytes;\n\trcvrArray = rcvrOop.bytes;\n\tfor (i = 0; i <= (length - 1); i++) {\n\t\trcvrArray[i] = ((rcvrArray[i] + otherArray[i]) > 0);\n\t}\n\tinterpreterProxy.pop(1);\n}\n\nfunction primitivePredicateAtAllPutBoolean() {\n\tvar i;\n\tvar predicates;\n\tvar predicatesOop;\n\tvar rcvrOop;\n\tvar val;\n\tvar valOop;\n\tvar values;\n\tvar valuesOop;\n\n\t/* inline: true */;\n\tvalOop = interpreterProxy.stackValue(0);\n\trcvrOop = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (interpreterProxy.isIntegerValue(valOop)) {\n\t\tval = valOop;\n\t} else {\n\t\tval = interpreterProxy.booleanValueOf(valOop);\n\t}\n\tvaluesOop = interpreterProxy.fetchPointerofObject(1, rcvrOop);\n\tpredicatesOop = interpreterProxy.fetchPointerofObject(0, rcvrOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isBytes(predicatesOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isBytes(valuesOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tvalues = valuesOop.bytes;\n\tpredicates = predicatesOop.bytes;\n\tfor (i = 0; i <= (SIZEOF(valuesOop) - 1); i++) {\n\t\tif (predicates[i] === 1) {\n\t\t\tvalues[i] = val;\n\t\t}\n\t}\n\tinterpreterProxy.pop(1);\n}\n\nfunction primitivePredicateAtAllPutColor() {\n\tvar i;\n\tvar predicates;\n\tvar predicatesOop;\n\tvar rcvrOop;\n\tvar val;\n\tvar values;\n\tvar valuesOop;\n\n\t/* inline: true */;\n\tval = interpreterProxy.stackIntegerValue(0);\n\trcvrOop = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tval = val | 4278190080;\n\tvaluesOop = interpreterProxy.fetchPointerofObject(1, rcvrOop);\n\tpredicatesOop = interpreterProxy.fetchPointerofObject(0, rcvrOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isBytes(predicatesOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(valuesOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tvalues = valuesOop.words;\n\tpredicates = predicatesOop.bytes;\n\tfor (i = 0; i <= (SIZEOF(valuesOop) - 1); i++) {\n\t\tif (predicates[i] === 1) {\n\t\t\tvalues[i] = val;\n\t\t}\n\t}\n\tinterpreterProxy.pop(1);\n}\n\nfunction primitivePredicateAtAllPutNumber() {\n\tvar i;\n\tvar predicates;\n\tvar predicatesOop;\n\tvar rcvrOop;\n\tvar val;\n\tvar values;\n\tvar valuesOop;\n\n\t/* inline: true */;\n\tval = interpreterProxy.stackFloatValue(0);\n\trcvrOop = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tvaluesOop = interpreterProxy.fetchPointerofObject(1, rcvrOop);\n\tpredicatesOop = interpreterProxy.fetchPointerofObject(0, rcvrOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isBytes(predicatesOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(valuesOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tvalues = valuesOop.wordsAsFloat32Array();\n\tpredicates = predicatesOop.bytes;\n\tfor (i = 0; i <= (SIZEOF(valuesOop) - 1); i++) {\n\t\tif (predicates[i] === 1) {\n\t\t\tvalues[i] = val;\n\t\t}\n\t}\n\tinterpreterProxy.pop(1);\n}\n\nfunction primitivePredicateAtAllPutObject() {\n\tvar i;\n\tvar predicates;\n\tvar predicatesOop;\n\tvar rcvrOop;\n\tvar valOop;\n\tvar values;\n\tvar valuesOop;\n\n\t/* inline: true */;\n\tvalOop = interpreterProxy.stackValue(0);\n\trcvrOop = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tvaluesOop = interpreterProxy.fetchPointerofObject(1, rcvrOop);\n\tpredicatesOop = interpreterProxy.fetchPointerofObject(0, rcvrOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isBytes(predicatesOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isPointers(valuesOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tvalues = valuesOop.wordsAsInt32Array();\n\tpredicates = predicatesOop.bytes;\n\tfor (i = 0; i <= (SIZEOF(valuesOop) - 1); i++) {\n\t\tif (predicates[i] === 1) {\n\t\t\tvalues[i] = valOop;\n\t\t}\n\t}\n\tinterpreterProxy.pop(1);\n}\n\nfunction primitivePredicateReplaceBytes() {\n\tvar i;\n\tvar predicates;\n\tvar predicatesOop;\n\tvar predicatesSize;\n\tvar rcvrOop;\n\tvar repOop;\n\tvar repStart;\n\tvar replacement;\n\tvar replacementSize;\n\tvar start;\n\tvar stop;\n\tvar values;\n\tvar valuesOop;\n\tvar valuesSize;\n\n\t/* inline: true */;\n\trepStart = interpreterProxy.stackIntegerValue(0);\n\trepOop = interpreterProxy.stackObjectValue(1);\n\tstop = interpreterProxy.stackIntegerValue(2);\n\tstart = interpreterProxy.stackIntegerValue(3);\n\trcvrOop = interpreterProxy.stackObjectValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tvaluesOop = interpreterProxy.fetchPointerofObject(1, rcvrOop);\n\tpredicatesOop = interpreterProxy.fetchPointerofObject(0, rcvrOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isBytes(predicatesOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!(interpreterProxy.isBytes(valuesOop) && (interpreterProxy.isBytes(repOop)))) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tvalues = valuesOop.bytes;\n\tpredicates = predicatesOop.bytes;\n\treplacement = repOop.bytes;\n\tvaluesSize = SIZEOF(valuesOop);\n\tpredicatesSize = SIZEOF(predicatesOop);\n\treplacementSize = SIZEOF(repOop);\n\tif (start > stop) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (start < 1) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (start > valuesSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (start > predicatesSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (stop > valuesSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (stop > predicatesSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (repStart < 1) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (repStart > replacementSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (((replacementSize - repStart) + 1) < ((stop - start) + 1)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tfor (i = (start - 1); i <= (stop - 1); i++) {\n\t\tif (predicates[i] === 1) {\n\t\t\tvalues[i] = replacement[(repStart + i) - start];\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n}\n\nfunction primitivePredicateReplaceWords() {\n\tvar floatReplacement;\n\tvar floatValues;\n\tvar fv;\n\tvar i;\n\tvar predicates;\n\tvar predicatesOop;\n\tvar predicatesSize;\n\tvar rIsFloat;\n\tvar rcvrOop;\n\tvar repOop;\n\tvar repStart;\n\tvar replacement;\n\tvar replacementSize;\n\tvar start;\n\tvar stop;\n\tvar vIsFloat;\n\tvar values;\n\tvar valuesOop;\n\tvar valuesSize;\n\n\t/* inline: true */;\n\trepStart = interpreterProxy.stackIntegerValue(0);\n\trepOop = interpreterProxy.stackObjectValue(1);\n\tstop = interpreterProxy.stackIntegerValue(2);\n\tstart = interpreterProxy.stackIntegerValue(3);\n\trcvrOop = interpreterProxy.stackObjectValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tvaluesOop = interpreterProxy.fetchPointerofObject(1, rcvrOop);\n\tpredicatesOop = interpreterProxy.fetchPointerofObject(0, rcvrOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isBytes(predicatesOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!((interpreterProxy.isWords(valuesOop) && (interpreterProxy.isWords(repOop))) || (interpreterProxy.isPointers(valuesOop) && (interpreterProxy.isPointers(repOop))))) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tpredicates = predicatesOop.bytes;\n\tvaluesSize = SIZEOF(valuesOop);\n\tpredicatesSize = SIZEOF(predicatesOop);\n\treplacementSize = SIZEOF(repOop);\n\tif (start > stop) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (start < 1) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (start > valuesSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (start > predicatesSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (stop > valuesSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (stop > predicatesSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (repStart < 1) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (repStart > replacementSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (((replacementSize - repStart) + 1) < ((stop - start) + 1)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tvIsFloat = interpreterProxy.isMemberOf(valuesOop, \"KedamaFloatArray\");\n\trIsFloat = interpreterProxy.isMemberOf(repOop, \"KedamaFloatArray\");\n\tif (vIsFloat && (rIsFloat)) {\n\t\tfloatValues = valuesOop.wordsAsFloat32Array();\n\t\tfloatReplacement = repOop.wordsAsFloat32Array();\n\t\tfor (i = (start - 1); i <= (stop - 1); i++) {\n\t\t\tif (predicates[i] === 1) {\n\t\t\t\tfloatValues[i] = floatReplacement[(repStart + i) - start];\n\t\t\t}\n\t\t}\n\t}\n\tif (vIsFloat && (!rIsFloat)) {\n\t\tfloatValues = valuesOop.wordsAsFloat32Array();\n\t\treplacement = repOop.words;\n\t\tfor (i = (start - 1); i <= (stop - 1); i++) {\n\t\t\tif (predicates[i] === 1) {\n\t\t\t\tfloatValues[i] = replacement[(repStart + i) - start];\n\t\t\t}\n\t\t}\n\t}\n\tif (!vIsFloat && (rIsFloat)) {\n\t\tvalues = valuesOop.words;\n\t\tfloatReplacement = repOop.wordsAsFloat32Array();\n\t\tfor (i = (start - 1); i <= (stop - 1); i++) {\n\t\t\tif (predicates[i] === 1) {\n\t\t\t\tfv = (floatReplacement[(repStart + i) - start]>>>0);\n\t\t\t\t;\n\t\t\t\tvalues[i] = fv;\n\t\t\t}\n\t\t}\n\t}\n\tif (!vIsFloat && (!rIsFloat)) {\n\t\tvalues = valuesOop.words;\n\t\treplacement = repOop.words;\n\t\tfor (i = (start - 1); i <= (stop - 1); i++) {\n\t\t\tif (predicates[i] === 1) {\n\t\t\t\tvalues[i] = replacement[(repStart + i) - start];\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n}\n\nfunction primitiveRemArrays() {\n\tvar argOop;\n\tvar floatArg;\n\tvar floatRcvr;\n\tvar floatResult;\n\tvar floatsArg;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar isArgWords;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordArg;\n\tvar wordRcvr;\n\tvar wordResult;\n\tvar wordsArg;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackObjectValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(argOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(argOop);\n\tinterpreterProxy.success(length === SIZEOF(rcvrOop));\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgWords = interpreterProxy.isMemberOf(argOop, \"WordArray\");\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgWords && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgWords) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\twordsArg = argOop.words;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordRcvr = wordsRcvr[i];\n\t\t\t\twordArg = wordsArg[i];\n\n\t\t\t\t/* In this primitive, words are supposed to be unsigned. */\n\n\t\t\t\twordResult = MOD(wordRcvr, wordArg);\n\t\t\t\twordsResult[i] = wordResult;\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordRcvr = wordsRcvr[i];\n\t\t\t\tfloatArg = floatsArg[i];\n\t\t\t\tfloatResult = wordRcvr / floatArg;\n\t\t\t\tfloatResult = Math.floor(floatResult);\n\t\t\t\tfloatsResult[i] = (wordRcvr - (floatResult * floatArg));\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgWords) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\twordsArg = argOop.words;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatRcvr = floatsRcvr[i];\n\t\t\t\twordArg = wordsArg[i];\n\t\t\t\tfloatResult = floatRcvr / wordArg;\n\t\t\t\tfloatResult = Math.floor(floatResult);\n\t\t\t\tfloatsResult[i] = (floatRcvr - (floatResult * wordArg));\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatRcvr = floatsRcvr[i];\n\t\t\t\tfloatArg = floatsArg[i];\n\t\t\t\tfloatResult = floatRcvr / floatArg;\n\t\t\t\tfloatResult = Math.floor(floatResult);\n\t\t\t\tfloatsResult[i] = (floatRcvr - (floatResult * floatArg));\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveRemScalar() {\n\tvar argOop;\n\tvar floatArg;\n\tvar floatRcvr;\n\tvar floatResult;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar intArg;\n\tvar isArgInt;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordRcvr;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvrOop);\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgInt = typeof argOop === \"number\";\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgInt && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgInt) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tintArg = argOop;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordsResult[i] = (MOD(wordsRcvr[i], intArg));\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordRcvr = wordsRcvr[i];\n\t\t\t\tfloatResult = wordRcvr / floatArg;\n\t\t\t\tfloatResult = Math.floor(floatResult);\n\t\t\t\tfloatsResult[i] = (wordRcvr - (floatResult * floatArg));\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgInt) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tintArg = argOop;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatRcvr = floatsRcvr[i];\n\t\t\t\tfloatResult = floatRcvr / intArg;\n\t\t\t\tfloatResult = Math.floor(floatResult);\n\t\t\t\tfloatsResult[i] = (floatRcvr - (floatResult * intArg));\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatRcvr = floatsRcvr[i];\n\t\t\t\tfloatResult = floatRcvr / floatArg;\n\t\t\t\tfloatResult = Math.floor(floatResult);\n\t\t\t\tfloatsResult[i] = (floatRcvr - (floatResult * floatArg));\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveSubArrays() {\n\tvar argOop;\n\tvar floatsArg;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar isArgWords;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsArg;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackObjectValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(argOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(argOop);\n\tinterpreterProxy.success(length === SIZEOF(rcvrOop));\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgWords = interpreterProxy.isMemberOf(argOop, \"WordArray\");\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgWords && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgWords) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\twordsArg = argOop.words;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordsResult[i] = (wordsRcvr[i] - wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (wordsRcvr[i] - floatsArg[i]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgWords) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\twordsArg = argOop.words;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] - wordsArg[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatsArg = argOop.wordsAsFloat32Array();\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] - floatsArg[i]);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction primitiveSubScalar() {\n\tvar argOop;\n\tvar floatArg;\n\tvar floatsRcvr;\n\tvar floatsResult;\n\tvar i;\n\tvar intArg;\n\tvar isArgInt;\n\tvar isRcvrWords;\n\tvar length;\n\tvar rcvrOop;\n\tvar resultOop;\n\tvar wordsRcvr;\n\tvar wordsResult;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackObjectValue(0);\n\targOop = interpreterProxy.stackValue(1);\n\trcvrOop = interpreterProxy.stackObjectValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success(interpreterProxy.isWords(rcvrOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlength = SIZEOF(rcvrOop);\n\tinterpreterProxy.success(length === SIZEOF(resultOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisArgInt = typeof argOop === \"number\";\n\tisRcvrWords = interpreterProxy.isMemberOf(rcvrOop, \"WordArray\");\n\tif (isArgInt && isRcvrWords) {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"WordArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (!interpreterProxy.isMemberOf(resultOop, \"KedamaFloatArray\")) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (isRcvrWords) {\n\t\tif (isArgInt) {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tintArg = argOop;\n\t\t\twordsResult = resultOop.words;\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\twordsResult[i] = (wordsRcvr[i] - intArg);\n\t\t\t}\n\t\t} else {\n\t\t\twordsRcvr = rcvrOop.words;\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (wordsRcvr[i] - floatArg);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (isArgInt) {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tintArg = argOop;\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] - intArg);\n\t\t\t}\n\t\t} else {\n\t\t\tfloatsRcvr = rcvrOop.wordsAsFloat32Array();\n\t\t\tfloatArg = interpreterProxy.floatValueOf(argOop);\n\t\t\tfloatsResult = resultOop.wordsAsFloat32Array();\n\t\t\tfor (i = 0; i <= (length - 1); i++) {\n\t\t\t\tfloatsResult[i] = (floatsRcvr[i] - floatArg);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction radiansToDegrees(radians) {\n\tvar deg;\n\tvar degrees;\n\n\t/* inline: true */;\n\tdegrees = radians / 0.0174532925199433;\n\tdeg = 90.0 - degrees;\n\tif (!(deg > 0.0)) {\n\t\tdeg += 360.0;\n\t}\n\treturn deg;\n}\n\nfunction randomIntoFloatArray() {\n\tvar factor;\n\tvar floatArray;\n\tvar floatArrayOop;\n\tvar from;\n\tvar index;\n\tvar range;\n\tvar size;\n\tvar to;\n\n\t/* inline: true */;\n\tfactor = interpreterProxy.stackFloatValue(0);\n\tfloatArrayOop = interpreterProxy.stackValue(1);\n\tto = interpreterProxy.stackIntegerValue(2);\n\tfrom = interpreterProxy.stackIntegerValue(3);\n\trange = interpreterProxy.stackIntegerValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(floatArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(floatArrayOop);\n\tif (!((size >= to) && ((from >= 1) && (to >= from)))) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tfloatArray = floatArrayOop.wordsAsFloat32Array();\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tfor (index = from; index <= to; index++) {\n\t\tfloatArray[index - 1] = (kedamaRandom2(range) * factor);\n\t}\n\tinterpreterProxy.pop(5);\n}\n\nfunction randomIntoIntegerArray() {\n\tvar factor;\n\tvar from;\n\tvar index;\n\tvar integerArray;\n\tvar integerArrayOop;\n\tvar range;\n\tvar size;\n\tvar to;\n\n\t/* inline: true */;\n\tfactor = interpreterProxy.stackFloatValue(0);\n\tintegerArrayOop = interpreterProxy.stackValue(1);\n\tto = interpreterProxy.stackIntegerValue(2);\n\tfrom = interpreterProxy.stackIntegerValue(3);\n\trange = interpreterProxy.stackIntegerValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(integerArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(integerArrayOop);\n\tif (!((size >= to) && ((from >= 1) && (to >= from)))) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tintegerArray = integerArrayOop.words;\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tfor (index = from; index <= to; index++) {\n\t\tintegerArray[index - 1] = ((kedamaRandom2(range) * factor)|0);\n\t}\n\tinterpreterProxy.pop(5);\n}\n\nfunction randomRange() {\n\tvar range;\n\tvar ret;\n\n\t/* inline: true */;\n\trange = interpreterProxy.stackIntegerValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tret = kedamaRandom2(range);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(2);\n\tinterpreterProxy.pushInteger(ret);\n}\n\nfunction scalarGetAngleTo() {\n\tvar fromX;\n\tvar fromY;\n\tvar r;\n\tvar toX;\n\tvar toY;\n\tvar x;\n\tvar y;\n\n\t/* inline: true */;\n\tfromY = interpreterProxy.stackFloatValue(0);\n\tfromX = interpreterProxy.stackFloatValue(1);\n\ttoY = interpreterProxy.stackFloatValue(2);\n\ttoX = interpreterProxy.stackFloatValue(3);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tx = toX - fromX;\n\ty = toY - fromY;\n\tr = degreesFromXy(x, y);\n\tr += 90.0;\n\tif (r > 360.0) {\n\t\tr -= 360.0;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(5);\n\tinterpreterProxy.pushFloat(r);\n}\n\nfunction scalarGetDistanceTo() {\n\tvar fromX;\n\tvar fromY;\n\tvar r;\n\tvar toX;\n\tvar toY;\n\tvar x;\n\tvar y;\n\n\t/* inline: true */;\n\tfromY = interpreterProxy.stackFloatValue(0);\n\tfromX = interpreterProxy.stackFloatValue(1);\n\ttoY = interpreterProxy.stackFloatValue(2);\n\ttoX = interpreterProxy.stackFloatValue(3);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tx = fromX - toX;\n\ty = fromY - toY;\n\tr = Math.sqrt((x * x) + (y * y));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(5);\n\tinterpreterProxy.pushFloat(r);\n}\n\nfunction scalarXAtxArrayheadingArrayvaluedestWidthleftEdgeModerightEdgeMode(index, xArray, headingArray, val, destWidth, leftEdgeMode, rightEdgeMode) {\n\tvar headingRadians;\n\tvar newX;\n\n\t/* inline: true */;\n\tnewX = val;\n\tif (newX < 0.0) {\n\t\tif (leftEdgeMode === 1) {\n\n\t\t\t/* wrap */\n\n\t\t\tnewX += destWidth;\n\t\t}\n\t\tif (leftEdgeMode === 2) {\n\n\t\t\t/* stick */\n\n\t\t\tnewX = 0.0;\n\t\t}\n\t\tif (leftEdgeMode === 3) {\n\n\t\t\t/* bounce */\n\n\t\t\tnewX = 0.0 - newX;\n\t\t\theadingRadians = headingArray[index];\n\t\t\tif (headingRadians < 3.141592653589793) {\n\t\t\t\theadingArray[index] = (3.141592653589793 - headingRadians);\n\t\t\t} else {\n\t\t\t\theadingArray[index] = (9.42477796076938 - headingRadians);\n\t\t\t}\n\t\t}\n\t}\n\tif (newX >= destWidth) {\n\t\tif (rightEdgeMode === 1) {\n\t\t\tnewX -= destWidth;\n\t\t}\n\t\tif (rightEdgeMode === 2) {\n\t\t\tnewX = destWidth - 1.0e-6;\n\t\t}\n\t\tif (rightEdgeMode === 3) {\n\t\t\tnewX = (destWidth - 1.0e-6) - (newX - destWidth);\n\t\t\theadingRadians = headingArray[index];\n\t\t\tif (headingRadians < 3.141592653589793) {\n\t\t\t\theadingArray[index] = (3.141592653589793 - headingRadians);\n\t\t\t} else {\n\t\t\t\theadingArray[index] = (9.42477796076938 - headingRadians);\n\t\t\t}\n\t\t}\n\t}\n\txArray[index] = newX;\n}\n\nfunction scalarYAtyArrayheadingArrayvaluedestHeighttopEdgeModebottomEdgeMode(index, yArray, headingArray, val, destHeight, topEdgeMode, bottomEdgeMode) {\n\tvar newY;\n\n\t/* inline: true */;\n\tnewY = val;\n\tif (newY < 0.0) {\n\t\tif (topEdgeMode === 1) {\n\n\t\t\t/* wrap */\n\n\t\t\tnewY += destHeight;\n\t\t}\n\t\tif (topEdgeMode === 2) {\n\n\t\t\t/* stick */\n\n\t\t\tnewY = 0.0;\n\t\t}\n\t\tif (topEdgeMode === 3) {\n\n\t\t\t/* bounce */\n\n\t\t\tnewY = 0.0 - newY;\n\t\t\theadingArray[index] = (6.283185307179586 - headingArray[index]);\n\t\t}\n\t}\n\tif (newY >= destHeight) {\n\t\tif (bottomEdgeMode === 1) {\n\t\t\tnewY -= destHeight;\n\t\t}\n\t\tif (bottomEdgeMode === 2) {\n\t\t\tnewY = destHeight - 1.0e-6;\n\t\t}\n\t\tif (bottomEdgeMode === 3) {\n\t\t\tnewY = (destHeight - 1.0e-6) - (newY - destHeight);\n\t\t\theadingArray[index] = (6.283185307179586 - headingArray[index]);\n\t\t}\n\t}\n\tyArray[index] = newY;\n}\n\nfunction setHeadingArrayFrom() {\n\tvar heading;\n\tvar headingArray;\n\tvar headingOop;\n\tvar i;\n\tvar isValVector;\n\tvar pArray;\n\tvar pOop;\n\tvar resultArray;\n\tvar resultOop;\n\tvar size;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackValue(0);\n\theadingOop = interpreterProxy.stackValue(1);\n\tpOop = interpreterProxy.stackValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isBytes(pOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(headingOop);\n\tif (resultOop.isFloat) {\n\t\tisValVector = false;\n\t} else {\n\t\tif (interpreterProxy.isWords(resultOop)) {\n\t\t\tif (SIZEOF(resultOop) !== size) {\n\t\t\t\tinterpreterProxy.primitiveFail();\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tisValVector = true;\n\t\t} else {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tpArray = pOop.bytes;\n\theadingArray = headingOop.wordsAsFloat32Array();\n\tif (isValVector) {\n\t\tresultArray = resultOop.wordsAsFloat32Array();\n\t} else {\n\t\theading = interpreterProxy.floatValueOf(resultOop);\n\t\theading = degreesToRadians(heading);\n\t}\n\tfor (i = 0; i <= (size - 1); i++) {\n\t\tif (pArray[i] === 1) {\n\t\t\tif (isValVector) {\n\t\t\t\theading = resultArray[i];\n\t\t\t\theading = degreesToRadians(heading);\n\t\t\t}\n\t\t\theadingArray[i] = heading;\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(3);\n}\n\n\n/*\tNote: This is coded so that is can be run from Squeak. */\n\nfunction setInterpreter(anInterpreter) {\n\tvar ok;\n\n\tinterpreterProxy = anInterpreter;\n\tok = interpreterProxy.majorVersion() == VM_PROXY_MAJOR;\n\tif (ok === false) {\n\t\treturn false;\n\t}\n\tok = interpreterProxy.minorVersion() >= VM_PROXY_MINOR;\n\treturn ok;\n}\n\nfunction setScalarHeading() {\n\tvar heading;\n\tvar headingArray;\n\tvar headingOop;\n\tvar index;\n\n\t/* inline: true */;\n\theading = interpreterProxy.stackFloatValue(0);\n\theadingOop = interpreterProxy.stackValue(1);\n\tindex = interpreterProxy.stackIntegerValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(headingOop) < index) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\theadingArray = headingOop.wordsAsFloat32Array();\n\theadingArray[index - 1] = degreesToRadians(heading);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(3);\n}\n\nfunction shutdownModule() {\n\treturn true;\n}\n\nfunction turtleScalarSetX() {\n\tvar destWidth;\n\tvar headingArray;\n\tvar headingOop;\n\tvar leftEdgeMode;\n\tvar rightEdgeMode;\n\tvar size;\n\tvar val;\n\tvar xArray;\n\tvar xIndex;\n\tvar xOop;\n\n\t/* inline: true */;\n\trightEdgeMode = interpreterProxy.stackIntegerValue(0);\n\tleftEdgeMode = interpreterProxy.stackIntegerValue(1);\n\tdestWidth = interpreterProxy.stackFloatValue(2);\n\tval = interpreterProxy.stackFloatValue(3);\n\theadingOop = interpreterProxy.stackValue(4);\n\txIndex = interpreterProxy.stackIntegerValue(5);\n\txOop = interpreterProxy.stackValue(6);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(xOop);\n\tif (SIZEOF(headingOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\txArray = xOop.wordsAsFloat32Array();\n\theadingArray = headingOop.wordsAsFloat32Array();\n\tscalarXAtxArrayheadingArrayvaluedestWidthleftEdgeModerightEdgeMode(xIndex - 1, xArray, headingArray, val, destWidth, leftEdgeMode, rightEdgeMode);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(7);\n}\n\nfunction turtleScalarSetY() {\n\tvar bottomEdgeMode;\n\tvar destHeight;\n\tvar headingArray;\n\tvar headingOop;\n\tvar size;\n\tvar topEdgeMode;\n\tvar val;\n\tvar yArray;\n\tvar yIndex;\n\tvar yOop;\n\n\t/* inline: true */;\n\tbottomEdgeMode = interpreterProxy.stackIntegerValue(0);\n\ttopEdgeMode = interpreterProxy.stackIntegerValue(1);\n\tdestHeight = interpreterProxy.stackFloatValue(2);\n\tval = interpreterProxy.stackFloatValue(3);\n\theadingOop = interpreterProxy.stackValue(4);\n\tyIndex = interpreterProxy.stackIntegerValue(5);\n\tyOop = interpreterProxy.stackValue(6);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(yOop);\n\tif (SIZEOF(headingOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tyArray = yOop.wordsAsFloat32Array();\n\theadingArray = headingOop.wordsAsFloat32Array();\n\tscalarYAtyArrayheadingArrayvaluedestHeighttopEdgeModebottomEdgeMode(yIndex - 1, yArray, headingArray, val, destHeight, topEdgeMode, bottomEdgeMode);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(7);\n}\n\nfunction turtlesSetX() {\n\tvar destWidth;\n\tvar headingArray;\n\tvar headingOop;\n\tvar i;\n\tvar isValVector;\n\tvar isWordVector;\n\tvar leftEdgeMode;\n\tvar newX;\n\tvar pArray;\n\tvar pOop;\n\tvar rightEdgeMode;\n\tvar size;\n\tvar val;\n\tvar valArray;\n\tvar valOop;\n\tvar wordValArray;\n\tvar xArray;\n\tvar xOop;\n\n\t/* inline: true */;\n\trightEdgeMode = interpreterProxy.stackIntegerValue(0);\n\tleftEdgeMode = interpreterProxy.stackIntegerValue(1);\n\tdestWidth = interpreterProxy.stackFloatValue(2);\n\tvalOop = interpreterProxy.stackValue(3);\n\theadingOop = interpreterProxy.stackValue(4);\n\txOop = interpreterProxy.stackValue(5);\n\tpOop = interpreterProxy.stackValue(6);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isBytes(pOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (valOop.isFloat) {\n\t\tisValVector = false;\n\t} else {\n\t\tif (interpreterProxy.isWords(valOop)) {\n\t\t\tisValVector = true;\n\t\t\tisWordVector = interpreterProxy.isMemberOf(valOop, \"WordArray\");\n\t\t} else {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tsize = SIZEOF(xOop);\n\tif (SIZEOF(pOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(headingOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (isValVector) {\n\t\tif (SIZEOF(valOop) !== size) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tpArray = pOop.bytes;\n\txArray = xOop.wordsAsFloat32Array();\n\theadingArray = headingOop.wordsAsFloat32Array();\n\tif (isValVector) {\n\t\tif (isWordVector) {\n\t\t\twordValArray = valOop.words;\n\t\t} else {\n\t\t\tvalArray = valOop.wordsAsFloat32Array();\n\t\t}\n\t} else {\n\t\tval = interpreterProxy.floatValueOf(valOop);\n\t}\n\tfor (i = 0; i <= (size - 1); i++) {\n\t\tif (pArray[i] === 1) {\n\t\t\tif (isValVector) {\n\t\t\t\tif (isWordVector) {\n\t\t\t\t\tnewX = wordValArray[i];\n\t\t\t\t\t;\n\t\t\t\t} else {\n\t\t\t\t\tnewX = valArray[i];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewX = val;\n\t\t\t}\n\t\t\tscalarXAtxArrayheadingArrayvaluedestWidthleftEdgeModerightEdgeMode(i, xArray, headingArray, newX, destWidth, leftEdgeMode, rightEdgeMode);\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(7);\n}\n\nfunction turtlesSetY() {\n\tvar bottomEdgeMode;\n\tvar destHeight;\n\tvar headingArray;\n\tvar headingOop;\n\tvar i;\n\tvar isValVector;\n\tvar isWordVector;\n\tvar newY;\n\tvar pArray;\n\tvar pOop;\n\tvar size;\n\tvar topEdgeMode;\n\tvar val;\n\tvar valArray;\n\tvar valOop;\n\tvar wordValArray;\n\tvar yArray;\n\tvar yOop;\n\n\t/* inline: true */;\n\tbottomEdgeMode = interpreterProxy.stackIntegerValue(0);\n\ttopEdgeMode = interpreterProxy.stackIntegerValue(1);\n\tdestHeight = interpreterProxy.stackFloatValue(2);\n\tvalOop = interpreterProxy.stackValue(3);\n\theadingOop = interpreterProxy.stackValue(4);\n\tyOop = interpreterProxy.stackValue(5);\n\tpOop = interpreterProxy.stackValue(6);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isBytes(pOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(headingOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (valOop.isFloat) {\n\t\tisValVector = false;\n\t} else {\n\t\tif (interpreterProxy.isWords(valOop)) {\n\t\t\tisValVector = true;\n\t\t\tisWordVector = interpreterProxy.isMemberOf(valOop, \"WordArray\");\n\t\t} else {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tsize = SIZEOF(yOop);\n\tif (SIZEOF(pOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(headingOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (isValVector) {\n\t\tif (SIZEOF(valOop) !== size) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tpArray = pOop.bytes;\n\tyArray = yOop.wordsAsFloat32Array();\n\theadingArray = headingOop.wordsAsFloat32Array();\n\tif (isValVector) {\n\t\tif (isWordVector) {\n\t\t\twordValArray = valOop.words;\n\t\t} else {\n\t\t\tvalArray = valOop.wordsAsFloat32Array();\n\t\t}\n\t} else {\n\t\tval = interpreterProxy.floatValueOf(valOop);\n\t}\n\tfor (i = 0; i <= (size - 1); i++) {\n\t\tif (pArray[i] === 1) {\n\t\t\tif (isValVector) {\n\t\t\t\tif (isWordVector) {\n\t\t\t\t\tnewY = wordValArray[i];\n\t\t\t\t\t;\n\t\t\t\t} else {\n\t\t\t\t\tnewY = valArray[i];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewY = val;\n\t\t\t}\n\t\t\tscalarYAtyArrayheadingArrayvaluedestHeighttopEdgeModebottomEdgeMode(i, yArray, headingArray, newY, destHeight, topEdgeMode, bottomEdgeMode);\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(7);\n}\n\nfunction vectorGetAngleTo() {\n\tvar index;\n\tvar isVector;\n\tvar pX;\n\tvar pXOop;\n\tvar pY;\n\tvar pYOop;\n\tvar ppx;\n\tvar ppy;\n\tvar r;\n\tvar result;\n\tvar resultOop;\n\tvar size;\n\tvar x;\n\tvar xArray;\n\tvar xArrayOop;\n\tvar y;\n\tvar yArray;\n\tvar yArrayOop;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackValue(0);\n\tyArrayOop = interpreterProxy.stackValue(1);\n\txArrayOop = interpreterProxy.stackValue(2);\n\tpYOop = interpreterProxy.stackValue(3);\n\tpXOop = interpreterProxy.stackValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(resultOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(resultOop);\n\tif (size < 0) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(xArrayOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(yArrayOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (pXOop.isFloat) {\n\t\tif (pYOop.isFloat) {\n\t\t\tisVector = false;\n\t\t} else {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (pYOop.isFloat) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t} else {\n\t\t\tisVector = true;\n\t\t}\n\t}\n\tif (isVector) {\n\t\tif (SIZEOF(pXOop) !== size) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t\tif (SIZEOF(pYOop) !== size) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tresult = resultOop.wordsAsFloat32Array();\n\txArray = xArrayOop.wordsAsFloat32Array();\n\tyArray = yArrayOop.wordsAsFloat32Array();\n\tif (isVector) {\n\t\tpX = pXOop.wordsAsFloat32Array();\n\t\tpY = pYOop.wordsAsFloat32Array();\n\t}\n\tif (!isVector) {\n\t\tppx = interpreterProxy.floatValueOf(pXOop);\n\t\tppy = interpreterProxy.floatValueOf(pYOop);\n\t}\n\tfor (index = 0; index <= (size - 1); index++) {\n\t\tif (isVector) {\n\t\t\tppx = pX[index];\n\t\t\tppy = pY[index];\n\t\t}\n\t\tx = ppx - xArray[index];\n\t\ty = ppy - yArray[index];\n\t\tr = degreesFromXy(x, y);\n\t\tr += 90.0;\n\t\tif (r > 360.0) {\n\t\t\tr -= 360.0;\n\t\t}\n\t\tresult[index] = r;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(6);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction vectorGetDistanceTo() {\n\tvar index;\n\tvar isVector;\n\tvar pX;\n\tvar pXOop;\n\tvar pY;\n\tvar pYOop;\n\tvar ppx;\n\tvar ppy;\n\tvar result;\n\tvar resultOop;\n\tvar size;\n\tvar x;\n\tvar xArray;\n\tvar xArrayOop;\n\tvar y;\n\tvar yArray;\n\tvar yArrayOop;\n\n\t/* inline: true */;\n\tresultOop = interpreterProxy.stackValue(0);\n\tyArrayOop = interpreterProxy.stackValue(1);\n\txArrayOop = interpreterProxy.stackValue(2);\n\tpYOop = interpreterProxy.stackValue(3);\n\tpXOop = interpreterProxy.stackValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(resultOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(xArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(yArrayOop)) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsize = SIZEOF(resultOop);\n\tif (size < 0) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(xArrayOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (SIZEOF(yArrayOop) !== size) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (pXOop.isFloat) {\n\t\tif (pYOop.isFloat) {\n\t\t\tisVector = false;\n\t\t} else {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\tif (pYOop.isFloat) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t} else {\n\t\t\tisVector = true;\n\t\t}\n\t}\n\tif (isVector) {\n\t\tif (SIZEOF(pXOop) !== size) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t\tif (SIZEOF(pYOop) !== size) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t}\n\tresult = resultOop.wordsAsFloat32Array();\n\txArray = xArrayOop.wordsAsFloat32Array();\n\tyArray = yArrayOop.wordsAsFloat32Array();\n\tif (isVector) {\n\t\tpX = pXOop.wordsAsFloat32Array();\n\t\tpY = pYOop.wordsAsFloat32Array();\n\t}\n\tif (!isVector) {\n\t\tppx = interpreterProxy.floatValueOf(pXOop);\n\t\tppy = interpreterProxy.floatValueOf(pYOop);\n\t}\n\tfor (index = 0; index <= (size - 1); index++) {\n\t\tif (isVector) {\n\t\t\tppx = pX[index];\n\t\t\tppy = pY[index];\n\t\t}\n\t\tx = ppx - xArray[index];\n\t\ty = ppy - yArray[index];\n\t\tresult[index] = Math.sqrt((x * x) + (y * y));\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(6);\n\tinterpreterProxy.push(resultOop);\n}\n\nfunction zoomBitmap() {\n\tvar bit;\n\tvar dOrigin;\n\tvar dst;\n\tvar dstIndex;\n\tvar dstSize;\n\tvar dummy;\n\tvar sHeight;\n\tvar sOrigin;\n\tvar sWidth;\n\tvar src;\n\tvar srcIndex;\n\tvar srcOrigin;\n\tvar srcSize;\n\tvar sx;\n\tvar sy;\n\tvar xFactor;\n\tvar y;\n\tvar yFactor;\n\n\t/* inline: true */;\n\tyFactor = interpreterProxy.stackIntegerValue(0);\n\txFactor = interpreterProxy.stackIntegerValue(1);\n\tsHeight = interpreterProxy.stackIntegerValue(2);\n\tsWidth = interpreterProxy.stackIntegerValue(3);\n\tdst = interpreterProxy.stackValue(4);\n\tsrc = interpreterProxy.stackValue(5);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tsrcSize = SIZEOF(src);\n\tdstSize = SIZEOF(dst);\n\tif ((sWidth * sHeight) !== srcSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (((srcSize * xFactor) * yFactor) !== dstSize) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tsOrigin = src.words;\n\tdOrigin = dst.words;\n\tsrcIndex = 0;\n\tsrcOrigin = 0;\n\tdstIndex = 0;\n\tfor (sy = 0; sy <= (sHeight - 1); sy++) {\n\t\tfor (y = 0; y <= (yFactor - 1); y++) {\n\t\t\tfor (sx = 0; sx <= (sWidth - 1); sx++) {\n\t\t\t\tbit = sOrigin[srcIndex];\n\t\t\t\t++srcIndex;\n\t\t\t\tfor (dummy = 0; dummy <= (xFactor - 1); dummy++) {\n\t\t\t\t\tdOrigin[dstIndex] = bit;\n\t\t\t\t\t++dstIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t\tsrcIndex = srcOrigin;\n\t\t}\n\t\tsrcOrigin += sWidth;\n\t\tsrcIndex = srcOrigin;\n\t}\n\tinterpreterProxy.pop(6);\n}\n\n\nSqueak.registerExternalModule(\"KedamaPlugin2\", {\n\tprimitiveAddArrays: primitiveAddArrays,\n\tgetModuleName: getModuleName,\n\tprimitiveMulArrays: primitiveMulArrays,\n\tdrawTurtlesInArray: drawTurtlesInArray,\n\tprimitiveGTScalar: primitiveGTScalar,\n\tsetScalarHeading: setScalarHeading,\n\tprimitiveSubScalar: primitiveSubScalar,\n\tturtleScalarSetY: turtleScalarSetY,\n\tvectorGetAngleTo: vectorGetAngleTo,\n\tprimitiveRemArrays: primitiveRemArrays,\n\tprimitiveLTArrays: primitiveLTArrays,\n\tprimitiveAddScalar: primitiveAddScalar,\n\tprimPixelsAtXY: primPixelsAtXY,\n\tprimitiveMulScalar: primitiveMulScalar,\n\tprimSetPixelsAtXY: primSetPixelsAtXY,\n\tsetHeadingArrayFrom: setHeadingArrayFrom,\n\tprimPixelAtXYPut: primPixelAtXYPut,\n\tmakeMaskLog: makeMaskLog,\n\tprimitiveLTScalar: primitiveLTScalar,\n\tscalarGetAngleTo: scalarGetAngleTo,\n\tprimitiveOrByteArray: primitiveOrByteArray,\n\tprimitiveLEArrays: primitiveLEArrays,\n\tprimitiveRemScalar: primitiveRemScalar,\n\tgetHeadingArrayInto: getHeadingArrayInto,\n\tturtlesSetX: turtlesSetX,\n\tprimitivePredicateReplaceBytes: primitivePredicateReplaceBytes,\n\tprimitiveDivArrays: primitiveDivArrays,\n\tmakeMask: makeMask,\n\tprimitiveLEScalar: primitiveLEScalar,\n\tkedamaSetRandomSeed: kedamaSetRandomSeed,\n\trandomIntoIntegerArray: randomIntoIntegerArray,\n\tsetInterpreter: setInterpreter,\n\tprimitivePredicateAtAllPutColor: primitivePredicateAtAllPutColor,\n\tmakeTurtlesMap: makeTurtlesMap,\n\trandomIntoFloatArray: randomIntoFloatArray,\n\tprimUpHill: primUpHill,\n\tshutdownModule: shutdownModule,\n\tprimitiveDivScalar: primitiveDivScalar,\n\tprimitiveGEArrays: primitiveGEArrays,\n\tprimitiveNotByteArray: primitiveNotByteArray,\n\trandomRange: randomRange,\n\tinitialiseModule: initialiseModule,\n\tgetScalarHeading: getScalarHeading,\n\tprimPixelAtXY: primPixelAtXY,\n\tprimitivePredicateAtAllPutNumber: primitivePredicateAtAllPutNumber,\n\tprimitiveEQArrays: primitiveEQArrays,\n\tprimitiveNEArrays: primitiveNEArrays,\n\tprimScalarForward: primScalarForward,\n\tvectorGetDistanceTo: vectorGetDistanceTo,\n\tturtlesSetY: turtlesSetY,\n\tturtleScalarSetX: turtleScalarSetX,\n\tprimTurtlesForward: primTurtlesForward,\n\tprimitiveGEScalar: primitiveGEScalar,\n\tprimitiveAndByteArray: primitiveAndByteArray,\n\tprimitivePredicateReplaceWords: primitivePredicateReplaceWords,\n\tprimitiveGTArrays: primitiveGTArrays,\n\tprimitivePredicateAtAllPutObject: primitivePredicateAtAllPutObject,\n\tprimitiveEQScalar: primitiveEQScalar,\n\tprimitivePredicateAtAllPutBoolean: primitivePredicateAtAllPutBoolean,\n\tzoomBitmap: zoomBitmap,\n\tprimitiveNEScalar: primitiveNEScalar,\n\tscalarGetDistanceTo: scalarGetDistanceTo,\n\tprimitiveSubArrays: primitiveSubArrays,\n});\n\n}); // end of module\n","/* Smalltalk from Squeak4.5 with VMMaker 4.13.6 translated as JS source on 3 November 2014 1:52:21 pm */\n/* Automatically generated by\n\tJSPluginCodeGenerator VMMakerJS-bf.15 uuid: fd4e10f2-3773-4e80-8bb5-c4b471a014e5\n   from\n\tKlattSynthesizerPlugin VMMaker-bf.353 uuid: 8ae25e7e-8d2c-451e-8277-598b30e9c002\n */\n\nmodule(\"users.bert.SqueakJS.plugins.Klatt\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";\n\nvar VM_PROXY_MAJOR = 1;\nvar VM_PROXY_MINOR = 11;\n\n/*** Functions ***/\nfunction CLASSOF(obj) { return typeof obj === \"number\" ? interpreterProxy.classSmallInteger() : obj.sqClass }\nfunction SIZEOF(obj) { return obj.pointers ? obj.pointers.length : obj.words ? obj.words.length : obj.bytes ? obj.bytes.length : 0 }\nfunction BYTESIZEOF(obj) { return obj.bytes ? obj.bytes.length : obj.words ? obj.words.length * 4 : 0 }\nfunction DIV(a, b) { return Math.floor(a / b) | 0; }   // integer division\nfunction MOD(a, b) { return a - DIV(a, b) * b | 0; }   // signed modulus\nfunction SHL(a, b) { return b > 31 ? 0 : a << b; }     // fix JS shift\nfunction SHR(a, b) { return b > 31 ? 0 : a >>> b; }    // fix JS shift\nfunction SHIFT(a, b) { return b < 0 ? (b < -31 ? 0 : a >>> (0-b) ) : (b > 31 ? 0 : a << b); }\n\n/*** Constants ***/\nvar A1v = 46;\nvar A2f = 34;\nvar A2v = 47;\nvar A3f = 35;\nvar A3v = 48;\nvar A4f = 36;\nvar A4v = 49;\nvar A5f = 37;\nvar A6f = 38;\nvar Anv = 45;\nvar Aspiration = 9;\nvar Atv = 50;\nvar B1 = 13;\nvar B2 = 17;\nvar B2f = 40;\nvar B3 = 19;\nvar B3f = 41;\nvar B4 = 21;\nvar B4f = 42;\nvar B5 = 23;\nvar B5f = 43;\nvar B6 = 25;\nvar B6f = 44;\nvar Bnp = 27;\nvar Bnz = 29;\nvar Btp = 31;\nvar Btz = 33;\nvar Bypass = 39;\nvar Diplophonia = 4;\nvar Epsilon = 0.0001;\nvar F0 = 0;\nvar F1 = 12;\nvar F2 = 16;\nvar F3 = 18;\nvar F4 = 20;\nvar F5 = 22;\nvar F6 = 24;\nvar Flutter = 1;\nvar Fnp = 26;\nvar Fnz = 28;\nvar Friction = 10;\nvar Ftp = 30;\nvar Ftz = 32;\nvar Gain = 51;\nvar Jitter = 2;\nvar PI = 3.141592653589793;\nvar R1c = 12;\nvar R1vp = 3;\nvar R2c = 13;\nvar R2fp = 7;\nvar R2vp = 4;\nvar R3c = 14;\nvar R3fp = 8;\nvar R3vp = 5;\nvar R4c = 15;\nvar R4fp = 9;\nvar R4vp = 6;\nvar R5c = 16;\nvar R5fp = 10;\nvar R6c = 17;\nvar R6fp = 11;\nvar R7c = 18;\nvar R8c = 19;\nvar Ra = 7;\nvar Rk = 8;\nvar Rnpc = 20;\nvar Rnpp = 1;\nvar Rnz = 21;\nvar Ro = 6;\nvar Rout = 24;\nvar Rtpc = 22;\nvar Rtpp = 2;\nvar Rtz = 23;\nvar Shimmer = 3;\nvar Turbulence = 11;\nvar Voicing = 5;\n\n/*** Variables ***/\nvar a1 = 0;\nvar a2 = 0;\nvar b1 = 0;\nvar c1 = 0;\nvar cascade = 0;\nvar frame = null;\nvar glast = 0;\nvar interpreterProxy = null;\nvar moduleName = \"Klatt 3 November 2014 (e)\";\nvar nlast = 0;\nvar nmod = 0;\nvar nopen = 0;\nvar nper = 0;\nvar periodCount = 0;\nvar pitch = 0;\nvar resonators = null;\nvar samplesCount = 0;\nvar samplesPerFrame = 0;\nvar samplingRate = 0;\nvar seed = 0;\nvar t0 = 0;\nvar vlast = 0;\nvar x1 = 0;\nvar x2 = 0;\n\n\n\n/*\tAdd diplophonia (bicyclic voice). Change voicing amplitude. */\n\nfunction addAmplitudeDiplophonia() {\n\tif ((MOD(periodCount, 2)) !== 0) {\n\n\t\t/* x1 must be <= 0 */\n\n\t\tx1 = x1 * (1.0 - frame[Diplophonia]);\n\t\tif (x1 > 0) {\n\t\t\tx1 = 0;\n\t\t}\n\t}\n}\n\n\n/*\tAdd F0 flutter, as specified in:\n\t\t'Analysis, synthesis and perception of voice quality variations among\n\t\tfemale and male talkers' D.H. Klatt and L.C. Klatt JASA 87(2) February 1990.\n\tFlutter is added by applying a quasi-random element constructed from three\n\tslowly varying sine waves. */\n\nfunction addFlutter() {\n\tvar asin;\n\tvar bsin;\n\tvar csin;\n\tvar deltaF0;\n\tvar timeCount;\n\n\ttimeCount = samplesCount / samplingRate;\n\tasin = Math.sin(((2.0 * PI) * 12.7) * timeCount);\n\tbsin = Math.sin(((2.0 * PI) * 7.1) * timeCount);\n\tcsin = Math.sin(((2.0 * PI) * 4.7) * timeCount);\n\tdeltaF0 = (((frame[Flutter] * 2.0) * frame[F0]) / 100.0) * ((asin + bsin) + csin);\n\tpitch += deltaF0;\n}\n\n\n/*\tAdd diplophonia (bicyclic voice). Change F0. */\n\nfunction addFrequencyDiplophonia() {\n\tif ((MOD(periodCount, 2)) === 0) {\n\t\tpitch += (frame[Diplophonia] * frame[F0]) * (1.0 - frame[Ro]);\n\t} else {\n\t\tpitch -= (frame[Diplophonia] * frame[F0]) * (1.0 - frame[Ro]);\n\t}\n}\n\n\n/*\tAdd jitter (random F0 perturbation). */\n\nfunction addJitter() {\n\tpitch += (((nextRandom() - 32767) * frame[Jitter]) / 32768.0) * frame[F0];\n}\n\n\n/*\tAdd shimmer (random voicing amplitude perturbation). */\n\nfunction addShimmer() {\n\n\t/* x1 must be <= 0 */\n\n\tx1 += (((nextRandom() - 32767) * frame[Shimmer]) / 32768.0) * x1;\n\tif (x1 > 0) {\n\t\tx1 = 0;\n\t}\n}\n\n\n/*\tSet up an anti-resonator */\n\nfunction antiResonatorfrequencybandwidth(index, freq, bw) {\n\tvar a;\n\tvar arg;\n\tvar b;\n\tvar c;\n\tvar r;\n\n\targ = ((0.0 - PI) / samplingRate) * bw;\n\tr = Math.exp(arg);\n\tc = 0.0 - (r * r);\n\targ = ((PI * 2.0) / samplingRate) * freq;\n\tb = (r * Math.cos(arg)) * 2.0;\n\ta = (1.0 - b) - c;\n\ta = 1.0 / a;\n\tb = (0.0 - b) * a;\n\tc = (0.0 - c) * a;\n\tresonatorAput(index, a);\n\tresonatorBput(index, b);\n\tresonatorCput(index, c);\n}\n\nfunction antiResonatorvalue(index, aFloat) {\n\tvar answer;\n\tvar p1;\n\n\tanswer = ((resonatorA(index) * aFloat) + (resonatorB(index) * ((p1 = resonatorP1(index))))) + (resonatorC(index) * resonatorP2(index));\n\tresonatorP2put(index, p1);\n\tresonatorP1put(index, aFloat);\n\treturn answer;\n}\n\n\n/*\tCascade vocal tract, excited by laryngeal sources.\n\tNasal antiresonator, nasal resonator, tracheal antirresonator,\n\ttracheal resonator, then formants F8, F7, F6, F5, F4, F3, F2, F1. */\n\nfunction cascadeBranch(source) {\n\tvar out;\n\n\tif (!(cascade > 0)) {\n\t\treturn 0.0;\n\t}\n\tout = antiResonatorvalue(Rnz, source);\n\tout = resonatorvalue(Rnpc, out);\n\tout = antiResonatorvalue(Rtz, out);\n\n\t/* Do not use unless sample rate >= 16000 */\n\n\tout = resonatorvalue(Rtpc, out);\n\tif (cascade >= 8) {\n\t\tout = resonatorvalue(R8c, out);\n\t}\n\tif (cascade >= 7) {\n\t\tout = resonatorvalue(R7c, out);\n\t}\n\tif (cascade >= 6) {\n\t\tout = resonatorvalue(R6c, out);\n\t}\n\tif (cascade >= 5) {\n\t\tout = resonatorvalue(R5c, out);\n\t}\n\tif (cascade >= 4) {\n\t\tout = resonatorvalue(R4c, out);\n\t}\n\tif (cascade >= 3) {\n\t\tout = resonatorvalue(R3c, out);\n\t}\n\tif (cascade >= 2) {\n\t\tout = resonatorvalue(R2c, out);\n\t}\n\tif (cascade >= 1) {\n\t\tout = resonatorvalue(R1c, out);\n\t}\n\treturn out;\n}\n\n\n/*\tReturn the first indexable word of oop which is assumed to be variableWordSubclass */\n\nfunction checkedFloatPtrOf(oop) {\n\tinterpreterProxy.success(interpreterProxy.isWords(oop));\n\tif (interpreterProxy.failed()) {\n\t\treturn 0;\n\t}\n\treturn oop.wordsAsFloat32Array();\n}\n\n\n/*\tReturn the first indexable word of oop which is assumed to be variableWordSubclass */\n\nfunction checkedShortPtrOf(oop) {\n\tinterpreterProxy.success(interpreterProxy.isWords(oop));\n\tif (interpreterProxy.failed()) {\n\t\treturn 0;\n\t}\n\treturn oop.wordsAsInt16Array();\n}\n\n\n/*\tNote: This is hardcoded so it can be run from Squeak.\n\tThe module name is used for validating a module *after*\n\tit is loaded to check if it does really contain the module\n\twe're thinking it contains. This is important! */\n\nfunction getModuleName() {\n\treturn moduleName;\n}\n\nfunction glottalSource() {\n\tvar x0;\n\n\tif (t0 === 0) {\n\t\treturn 0;\n\t}\n\tif (nper < nopen) {\n\t\tx0 = (a1 * x1) + (a2 * x2);\n\t\tx2 = x1;\n\t\tx1 = x0;\n\t} else {\n\t\tx0 = (b1 * x1) - c1;\n\t\tx1 = x0;\n\t}\n\tif (nper >= t0) {\n\t\tnper = 0;\n\t\tpitchSynchronousReset();\n\t}\n\t++nper;\n\treturn x0;\n}\n\nfunction halt() {\n\t;\n}\n\nfunction linearFromdB(aNumber) {\n\treturn Math.pow(2.0,((aNumber - 87.0) / 6.0)) * 32.767;\n}\n\nfunction loadFrom(klattOop) {\n\tvar oop;\n\n\tinterpreterProxy.success(SIZEOF(klattOop) === 22);\n\tif (interpreterProxy.failed()) {\n\t\treturn false;\n\t}\n\toop = interpreterProxy.fetchPointerofObject(0, klattOop);\n\tresonators = checkedFloatPtrOf(oop);\n\tpitch = interpreterProxy.fetchFloatofObject(2, klattOop);\n\tt0 = interpreterProxy.fetchIntegerofObject(3, klattOop);\n\tnper = interpreterProxy.fetchIntegerofObject(4, klattOop);\n\tnopen = interpreterProxy.fetchIntegerofObject(5, klattOop);\n\tnmod = interpreterProxy.fetchIntegerofObject(6, klattOop);\n\ta1 = interpreterProxy.fetchFloatofObject(7, klattOop);\n\ta2 = interpreterProxy.fetchFloatofObject(8, klattOop);\n\tx1 = interpreterProxy.fetchFloatofObject(9, klattOop);\n\tx2 = interpreterProxy.fetchFloatofObject(10, klattOop);\n\tb1 = interpreterProxy.fetchFloatofObject(11, klattOop);\n\tc1 = interpreterProxy.fetchFloatofObject(12, klattOop);\n\tglast = interpreterProxy.fetchFloatofObject(13, klattOop);\n\tvlast = interpreterProxy.fetchFloatofObject(14, klattOop);\n\tnlast = interpreterProxy.fetchFloatofObject(15, klattOop);\n\tperiodCount = interpreterProxy.fetchIntegerofObject(16, klattOop);\n\tsamplesCount = interpreterProxy.fetchIntegerofObject(17, klattOop);\n\tseed = interpreterProxy.fetchIntegerofObject(18, klattOop);\n\tcascade = interpreterProxy.fetchIntegerofObject(19, klattOop);\n\tsamplesPerFrame = interpreterProxy.fetchIntegerofObject(20, klattOop);\n\tsamplingRate = interpreterProxy.fetchIntegerofObject(21, klattOop);\n\treturn interpreterProxy.failed() === false;\n}\n\n\n/*\tAnswer a random number between 0 and 65535. */\n\nfunction nextRandom() {\n\tseed = ((seed * 1309) + 13849) & 65535;\n\treturn seed;\n}\n\nfunction normalizeGlottalPulse() {\n\tvar ingore;\n\tvar s0;\n\tvar s1;\n\tvar s2;\n\n\ts0 = 0.0;\n\ts1 = x1;\n\ts2 = x2;\n\tfor (ingore = 1; ingore <= nopen; ingore++) {\n\t\ts0 = (a1 * s1) + (a2 * s2);\n\t\ts2 = s1;\n\t\ts1 = s0;\n\t}\n\tif (s0 !== 0.0) {\n\t\tx1 = (x1 / s0) * 10000.0;\n\t}\n}\n\n\n/*\tFriction-excited parallel vocal tract formants F6, F5, F4, F3, F2,\n\toutputs added with alternating sign. Sound source for other\n\tparallel resonators is friction plus first difference of\n\tvoicing waveform. */\n\nfunction parallelFrictionBranch(source) {\n\treturn (((resonatorvalue(R2fp, source) - resonatorvalue(R3fp, source)) + resonatorvalue(R4fp, source)) - resonatorvalue(R5fp, source)) + resonatorvalue(R6fp, source);\n}\n\n\n/*\tVoice-excited parallel vocal tract F1, F2, F3, F4, FNP and FTP. */\n\nfunction parallelVoicedBranch(source) {\n\treturn ((((resonatorvalue(R1vp, source) + resonatorvalue(R2vp, source)) + resonatorvalue(R3vp, source)) + resonatorvalue(R4vp, source)) + resonatorvalue(Rnpp, source)) + resonatorvalue(Rtpp, source);\n}\n\nfunction pitchSynchronousReset() {\n\tif (frame[F0] > 0) {\n\t\tvoicedPitchSynchronousReset();\n\t\tperiodCount = MOD((periodCount + 1), 65535);\n\t} else {\n\t\tt0 = 1;\n\t\tnmod = t0;\n\t}\n}\n\nfunction primitiveSynthesizeFrameIntoStartingAt() {\n\tvar aKlattFrame;\n\tvar buffer;\n\tvar bufferOop;\n\tvar rcvr;\n\tvar startIndex;\n\n\taKlattFrame = checkedFloatPtrOf(interpreterProxy.stackValue(2));\n\tbuffer = checkedShortPtrOf((bufferOop = interpreterProxy.stackValue(1)));\n\tstartIndex = interpreterProxy.stackIntegerValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\trcvr = interpreterProxy.stackObjectValue(3);\n\tif (!loadFrom(rcvr)) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.success((SIZEOF(bufferOop) * 2) >= samplesPerFrame);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tsynthesizeFrameintostartingAt(aKlattFrame, buffer, startIndex);\n\tif (!saveTo(rcvr)) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(3);\n}\n\nfunction quphicosphisinphirphid(u, phi, cosphi, sinphi, rphid) {\n\tvar expuphi;\n\n\texpuphi = Math.exp(u * phi);\n\treturn (expuphi * ((((rphid * ((u * u) + 1.0)) + u) * sinphi) - cosphi)) + 1.0;\n}\n\n\n/*\tConvert formant frequencies and bandwidth into\n\tresonator difference equation coefficients. */\n\nfunction resonatorfrequencybandwidth(index, freq, bw) {\n\tvar a;\n\tvar arg;\n\tvar b;\n\tvar c;\n\tvar r;\n\n\targ = ((0.0 - PI) / samplingRate) * bw;\n\tr = Math.exp(arg);\n\tc = 0.0 - (r * r);\n\targ = ((PI * 2.0) / samplingRate) * freq;\n\tb = (r * Math.cos(arg)) * 2.0;\n\ta = (1.0 - b) - c;\n\tresonatorAput(index, a);\n\tresonatorBput(index, b);\n\tresonatorCput(index, c);\n}\n\n\n/*\tConvert formant frequencies and bandwidth into\n\tresonator difference equation coefficients. */\n\nfunction resonatorfrequencybandwidthgain(index, freq, bw, gain) {\n\tresonatorfrequencybandwidth(index, freq, bw);\n\tresonatorAput(index, resonatorA(index) * gain);\n}\n\nfunction resonatorvalue(index, aFloat) {\n\tvar answer;\n\tvar p1;\n\n\n\t/* (p1 between: -100000 and: 100000) ifFalse: [self halt].\n\t(answer between: -100000 and: 100000) ifFalse: [self halt]. */\n\n\tanswer = ((resonatorA(index) * aFloat) + (resonatorB(index) * ((p1 = resonatorP1(index))))) + (resonatorC(index) * resonatorP2(index));\n\tresonatorP2put(index, p1);\n\tresonatorP1put(index, answer);\n\treturn answer;\n}\n\nfunction resonatorA(index) {\n\treturn resonators[(index * 5) - 5];\n}\n\nfunction resonatorAput(index, aFloat) {\n\tresonators[(index * 5) - 5] = aFloat;\n}\n\nfunction resonatorB(index) {\n\treturn resonators[(index * 5) - 4];\n}\n\nfunction resonatorBput(index, aFloat) {\n\tresonators[(index * 5) - 4] = aFloat;\n}\n\nfunction resonatorC(index) {\n\treturn resonators[(index * 5) - 3];\n}\n\nfunction resonatorCput(index, aFloat) {\n\tresonators[(index * 5) - 3] = aFloat;\n}\n\nfunction resonatorP1(index) {\n\treturn resonators[(index * 5) - 2];\n}\n\nfunction resonatorP1put(index, aFloat) {\n\tresonators[(index * 5) - 2] = aFloat;\n}\n\nfunction resonatorP2(index) {\n\treturn resonators[(index * 5) - 1];\n}\n\nfunction resonatorP2put(index, aFloat) {\n\tresonators[(index * 5) - 1] = aFloat;\n}\n\nfunction rorark(roNumber, raNumber, rkNumber) {\n\tvar cosphi;\n\tvar d;\n\tvar gamma;\n\tvar gammapwr;\n\tvar phi;\n\tvar r;\n\tvar ra;\n\tvar rho;\n\tvar rk;\n\tvar ro;\n\tvar rphid;\n\tvar sinphi;\n\tvar te;\n\tvar theta;\n\tvar u;\n\n\tte = ((t0 * roNumber)|0);\n\tro = te / t0;\n\trk = rkNumber;\n\tra = raNumber;\n\tif (ra <= 0.0) {\n\t\td = 1.0;\n\t} else {\n\t\tr = (1.0 - ro) / ra;\n\t\td = 1.0 - (r / (Math.exp(r) - 1.0));\n\t}\n\tphi = PI * (rk + 1.0);\n\tcosphi = Math.cos(phi);\n\tsinphi = Math.sin(phi);\n\trphid = ((ra / ro) * phi) * d;\n\tu = zeroQphicosphisinphirphid(phi, cosphi, sinphi, rphid);\n\ttheta = phi / te;\n\trho = Math.exp(u * theta);\n\ta1 = (2.0 * Math.cos(theta)) * rho;\n\ta2 = 0.0 - (rho * rho);\n\tx2 = 0.0;\n\tx1 = rho * Math.sin(theta);\n\tgamma = Math.exp(-1.0 / (ra * t0));\n\tgammapwr = Math.pow(gamma,(t0 - te));\n\tb1 = gamma;\n\tc1 = ((1.0 - gamma) * gammapwr) / (1.0 - gammapwr);\n\tnormalizeGlottalPulse();\n}\n\nfunction saveTo(origKlattOop) {\n\tvar a1Oop;\n\tvar a2Oop;\n\tvar b1Oop;\n\tvar c1Oop;\n\tvar glastOop;\n\tvar klattOop;\n\tvar nlastOop;\n\tvar pitchOop;\n\tvar vlastOop;\n\tvar x1Oop;\n\tvar x2Oop;\n\n\tinterpreterProxy.pushRemappableOop(origKlattOop);\n\tinterpreterProxy.pushRemappableOop(interpreterProxy.floatObjectOf(pitch));\n\tinterpreterProxy.pushRemappableOop(interpreterProxy.floatObjectOf(a1));\n\tinterpreterProxy.pushRemappableOop(interpreterProxy.floatObjectOf(a2));\n\tinterpreterProxy.pushRemappableOop(interpreterProxy.floatObjectOf(x1));\n\tinterpreterProxy.pushRemappableOop(interpreterProxy.floatObjectOf(x2));\n\tinterpreterProxy.pushRemappableOop(interpreterProxy.floatObjectOf(b1));\n\tinterpreterProxy.pushRemappableOop(interpreterProxy.floatObjectOf(c1));\n\tinterpreterProxy.pushRemappableOop(interpreterProxy.floatObjectOf(glast));\n\tinterpreterProxy.pushRemappableOop(interpreterProxy.floatObjectOf(vlast));\n\tnlastOop = interpreterProxy.floatObjectOf(nlast);\n\tvlastOop = interpreterProxy.popRemappableOop();\n\tglastOop = interpreterProxy.popRemappableOop();\n\tc1Oop = interpreterProxy.popRemappableOop();\n\tb1Oop = interpreterProxy.popRemappableOop();\n\tx2Oop = interpreterProxy.popRemappableOop();\n\tx1Oop = interpreterProxy.popRemappableOop();\n\ta2Oop = interpreterProxy.popRemappableOop();\n\ta1Oop = interpreterProxy.popRemappableOop();\n\tpitchOop = interpreterProxy.popRemappableOop();\n\tklattOop = interpreterProxy.popRemappableOop();\n\tif (interpreterProxy.failed()) {\n\t\treturn false;\n\t}\n\tinterpreterProxy.storePointerofObjectwithValue(2, klattOop, pitchOop);\n\tinterpreterProxy.storeIntegerofObjectwithValue(3, klattOop, t0);\n\tinterpreterProxy.storeIntegerofObjectwithValue(4, klattOop, nper);\n\tinterpreterProxy.storeIntegerofObjectwithValue(5, klattOop, nopen);\n\tinterpreterProxy.storeIntegerofObjectwithValue(6, klattOop, nmod);\n\tinterpreterProxy.storePointerofObjectwithValue(7, klattOop, a1Oop);\n\tinterpreterProxy.storePointerofObjectwithValue(8, klattOop, a2Oop);\n\tinterpreterProxy.storePointerofObjectwithValue(9, klattOop, x1Oop);\n\tinterpreterProxy.storePointerofObjectwithValue(10, klattOop, x2Oop);\n\tinterpreterProxy.storePointerofObjectwithValue(11, klattOop, b1Oop);\n\tinterpreterProxy.storePointerofObjectwithValue(12, klattOop, c1Oop);\n\tinterpreterProxy.storePointerofObjectwithValue(13, klattOop, glastOop);\n\tinterpreterProxy.storePointerofObjectwithValue(14, klattOop, vlastOop);\n\tinterpreterProxy.storePointerofObjectwithValue(15, klattOop, nlastOop);\n\tinterpreterProxy.storeIntegerofObjectwithValue(16, klattOop, periodCount);\n\tinterpreterProxy.storeIntegerofObjectwithValue(17, klattOop, samplesCount);\n\tinterpreterProxy.storeIntegerofObjectwithValue(18, klattOop, seed);\n\treturn interpreterProxy.failed() === false;\n}\n\nfunction setCurrentFrame(aKlattFrame) {\n\tvar ampF1V;\n\tvar ampF2F;\n\tvar ampF2V;\n\tvar ampF3F;\n\tvar ampF3V;\n\tvar ampF4F;\n\tvar ampF4V;\n\tvar ampF5F;\n\tvar ampF6F;\n\tvar ampFNV;\n\tvar ampFTV;\n\n\n\t/* Fudge factors... */\n\n\tframe = aKlattFrame;\n\n\t/* -4.44 dB */\n\n\tampFNV = linearFromdB(frame[Anv]) * 0.6;\n\n\t/* -4.44 dB */\n\n\tampFTV = linearFromdB(frame[Atv]) * 0.6;\n\n\t/* -7.96 dB */\n\n\tampF1V = linearFromdB(frame[A1v]) * 0.4;\n\n\t/* -16.5 dB */\n\n\tampF2V = linearFromdB(frame[A2v]) * 0.15;\n\n\t/* -24.4 dB */\n\n\tampF3V = linearFromdB(frame[A3v]) * 0.06;\n\n\t/* -28.0 dB */\n\n\tampF4V = linearFromdB(frame[A4v]) * 0.04;\n\n\t/* -16.5 dB */\n\n\tampF2F = linearFromdB(frame[A2f]) * 0.15;\n\n\t/* -24.4 dB */\n\n\tampF3F = linearFromdB(frame[A3f]) * 0.06;\n\n\t/* -28.0 dB */\n\n\tampF4F = linearFromdB(frame[A4f]) * 0.04;\n\n\t/* -33.2 dB */\n\n\tampF5F = linearFromdB(frame[A5f]) * 0.022;\n\n\t/* -30.5 dB */\n\t/* Set coefficients of variable cascade resonators */\n\n\tampF6F = linearFromdB(frame[A6f]) * 0.03;\n\tif (cascade >= 8) {\n\t\tif (samplingRate >= 16000) {\n\n\t\t\t/* Inside Nyquist rate? */\n\n\t\t\tresonatorfrequencybandwidth(R8c, 7500, 600);\n\t\t} else {\n\t\t\tcascade = 6;\n\t\t}\n\t}\n\tif (cascade >= 7) {\n\t\tif (samplingRate >= 16000) {\n\n\t\t\t/* Inside Nyquist rate? */\n\n\t\t\tresonatorfrequencybandwidth(R7c, 6500, 500);\n\t\t} else {\n\t\t\tcascade = 6;\n\t\t}\n\t}\n\tif (cascade >= 6) {\n\t\tresonatorfrequencybandwidth(R6c, frame[F6], frame[B6]);\n\t}\n\tif (cascade >= 5) {\n\t\tresonatorfrequencybandwidth(R5c, frame[F5], frame[B5]);\n\t}\n\tresonatorfrequencybandwidth(R4c, frame[F4], frame[B4]);\n\tresonatorfrequencybandwidth(R3c, frame[F3], frame[B3]);\n\tresonatorfrequencybandwidth(R2c, frame[F2], frame[B2]);\n\tresonatorfrequencybandwidth(R1c, frame[F1], frame[B1]);\n\tresonatorfrequencybandwidth(Rnpc, frame[Fnp], frame[Bnp]);\n\tresonatorfrequencybandwidth(Rtpc, frame[Ftp], frame[Btp]);\n\tantiResonatorfrequencybandwidth(Rnz, frame[Fnz], frame[Bnz]);\n\tantiResonatorfrequencybandwidth(Rtz, frame[Ftz], frame[Btz]);\n\tresonatorfrequencybandwidthgain(Rnpp, frame[Fnp], frame[Bnp], ampFNV);\n\tresonatorfrequencybandwidthgain(Rtpp, frame[Ftp], frame[Btp], ampFTV);\n\tresonatorfrequencybandwidthgain(R1vp, frame[F1], frame[B1], ampF1V);\n\tresonatorfrequencybandwidthgain(R2vp, frame[F2], frame[B2], ampF2V);\n\tresonatorfrequencybandwidthgain(R3vp, frame[F3], frame[B3], ampF3V);\n\tresonatorfrequencybandwidthgain(R4vp, frame[F4], frame[B4], ampF4V);\n\tresonatorfrequencybandwidthgain(R2fp, frame[F2], frame[B2f], ampF2F);\n\tresonatorfrequencybandwidthgain(R3fp, frame[F3], frame[B3f], ampF3F);\n\tresonatorfrequencybandwidthgain(R4fp, frame[F4], frame[B4f], ampF4F);\n\tresonatorfrequencybandwidthgain(R5fp, frame[F5], frame[B5f], ampF5F);\n\tresonatorfrequencybandwidthgain(R6fp, frame[F6], frame[B6f], ampF6F);\n}\n\n\n/*\tNote: This is coded so that is can be run from Squeak. */\n\nfunction setInterpreter(anInterpreter) {\n\tvar ok;\n\n\tinterpreterProxy = anInterpreter;\n\tok = interpreterProxy.majorVersion() == VM_PROXY_MAJOR;\n\tif (ok === false) {\n\t\treturn false;\n\t}\n\tok = interpreterProxy.minorVersion() >= VM_PROXY_MINOR;\n\treturn ok;\n}\n\nfunction synthesizeFrameintostartingAt(aKlattFrame, buffer, startIndex) {\n\tvar ampGain;\n\tvar aspiration;\n\tvar aspirationNoise;\n\tvar bypass;\n\tvar friction;\n\tvar frictionNoise;\n\tvar gain;\n\tvar glotout;\n\tvar index;\n\tvar noise;\n\tvar out;\n\tvar parGlotout;\n\tvar parVoicing;\n\tvar source;\n\tvar temp;\n\tvar top;\n\tvar turbulence;\n\tvar voice;\n\tvar voicing;\n\n\tsetCurrentFrame(aKlattFrame);\n\tif (pitch > 0) {\n\t\tvoicing = linearFromdB(frame[Voicing] - 7);\n\t\tparVoicing = linearFromdB(frame[Voicing]);\n\t\tturbulence = linearFromdB(frame[Turbulence]) * 0.1;\n\t} else {\n\t\tvoicing = (parVoicing = (turbulence = 0.0));\n\t}\n\tfriction = linearFromdB(frame[Friction]) * 0.25;\n\taspiration = linearFromdB(frame[Aspiration]) * 0.05;\n\n\t/* -26.0 dB */\n\t/* Flod overall gain into output resonator (low-pass filter) */\n\n\tbypass = linearFromdB(frame[Bypass]) * 0.05;\n\tgain = frame[Gain] - 3;\n\tif (gain <= 0) {\n\t\tgain = 57;\n\t}\n\tampGain = linearFromdB(gain);\n\tresonatorfrequencybandwidthgain(Rout, 0, samplingRate, ampGain);\n\tnoise = nlast;\n\tindex = startIndex;\n\ttop = (samplesPerFrame + startIndex) - 1;\n\twhile (index <= top) {\n\n\t\t/* Get low-passed random number for aspiration and friction noise */\n\n\n\t\t/* radom number between -8196.0 and 8196.0 */\n\t\t/* Tilt down noise spectrum by soft low-pass filter having\n\t\t a pole near the origin in the z-plane. */\n\n\t\tnoise = (nextRandom() - 32768) / 4.0;\n\t\tnoise += 0.75 * nlast;\n\n\t\t/* Amplitude modulate noise (reduce noise amplitude during second\n\t\t half of glottal period) if voicing  simultaneously present. */\n\n\t\tnlast = noise;\n\t\tif (nper > nmod) {\n\t\t\tnoise = noise * 0.5;\n\t\t}\n\n\t\t/* Compute voicing waveform. */\n\n\t\tfrictionNoise = friction * noise;\n\t\tvoice = glottalSource();\n\n\t\t/* Add turbulence during glottal open phase.\n\t\t Use random rather than noise because noise is low-passed. */\n\n\t\tvlast = voice;\n\t\tif (nper < nopen) {\n\t\t\tvoice += (turbulence * (nextRandom() - 32768)) / 4.0;\n\t\t}\n\t\tglotout = voicing * voice;\n\n\t\t/* Compute aspiration amplitude and add to voicing source. */\n\n\t\tparGlotout = parVoicing * voice;\n\t\taspirationNoise = aspiration * noise;\n\t\tglotout += aspirationNoise;\n\n\t\t/* Cascade vocal tract, excited by laryngeal sources.\n\t\t Nasal antiresonator, nasal resonator, trachearl antirresonator,\n\t\t tracheal resonator, then formants F8, F7, F6, F5, F4, F3, F2, F1. */\n\n\t\tparGlotout += aspirationNoise;\n\n\t\t/* Voice-excited parallel vocal tract F1, F2, F3, F4, FNP and FTP. */\n\n\t\tout = cascadeBranch(glotout);\n\n\t\t/* Source is voicing plus aspiration. */\n\n\t\tsource = parGlotout;\n\n\t\t/* Friction-excited parallel vocal tract formants F6, F5, F4, F3, F2,\n\t\t outputs added with alternating sign. Sound source for other\n\t\t parallel resonators is friction plus first difference of\n\t\t voicing waveform. */\n\n\t\tout += parallelVoicedBranch(source);\n\t\tsource = (frictionNoise + parGlotout) - glast;\n\t\tglast = parGlotout;\n\n\t\t/* Apply bypas and output low-pass filter */\n\n\t\tout = parallelFrictionBranch(source) - out;\n\t\tout = (bypass * source) - out;\n\t\tout = resonatorvalue(Rout, out);\n\t\ttemp = ((out * ampGain)|0);\n\t\tif (temp < -32768) {\n\t\t\ttemp = -32768;\n\t\t}\n\t\tif (temp > 32767) {\n\t\t\ttemp = 32767;\n\t\t}\n\t\tbuffer[index - 1] = temp;\n\t\t++index;\n\t\t++samplesCount;\n\t}\n}\n\n\n/*\tSet the pitch. */\n\nfunction voicedPitchSynchronousReset() {\n\n\t/* Add flutter and jitter (F0 perturbations). */\n\n\tpitch = frame[F0];\n\taddFlutter();\n\taddJitter();\n\taddFrequencyDiplophonia();\n\tif (pitch < 0) {\n\t\tpitch = 0;\n\t}\n\n\t/* Duration of period before amplitude modulation. */\n\n\tt0 = ((samplingRate / pitch)|0);\n\tnmod = t0;\n\tif (frame[Voicing] > 0) {\n\t\tnmod = nmod >> 1;\n\t}\n\n\t/* Set the LF glottal pulse model parameters. */\n\n\tnopen = ((t0 * frame[Ro])|0);\n\trorark(frame[Ro], frame[Ra], frame[Rk]);\n\taddShimmer();\n\taddAmplitudeDiplophonia();\n}\n\nfunction zeroQphicosphisinphirphid(phi, cosphi, sinphi, rphid) {\n\tvar qa;\n\tvar qb;\n\tvar qc;\n\tvar qzero;\n\tvar ua;\n\tvar ub;\n\tvar uc;\n\n\tqzero = quphicosphisinphirphid(0, phi, cosphi, sinphi, rphid);\n\tif (qzero > 0) {\n\t\tua = 0;\n\t\tub = 1;\n\t\tqa = qzero;\n\t\tqb = quphicosphisinphirphid(ub, phi, cosphi, sinphi, rphid);\n\t\twhile (qb > 0) {\n\t\t\tua = ub;\n\t\t\tqa = qb;\n\t\t\tub = ub * 2;\n\t\t\tqb = quphicosphisinphirphid(ub, phi, cosphi, sinphi, rphid);\n\t\t}\n\t} else {\n\t\tua = -1;\n\t\tub = 0;\n\t\tqa = quphicosphisinphirphid(ua, phi, cosphi, sinphi, rphid);\n\t\tqb = qzero;\n\t\twhile (qa < 0) {\n\t\t\tub = ua;\n\t\t\tqb = qa;\n\t\t\tua = ua * 2;\n\t\t\tqa = quphicosphisinphirphid(ua, phi, cosphi, sinphi, rphid);\n\t\t}\n\t}\n\twhile ((ub - ua) > Epsilon) {\n\t\tuc = (ub + ua) / 2.0;\n\t\tqc = quphicosphisinphirphid(uc, phi, cosphi, sinphi, rphid);\n\t\tif (qc > 0) {\n\t\t\tua = uc;\n\t\t\tqa = qc;\n\t\t} else {\n\t\t\tub = uc;\n\t\t\tqb = qc;\n\t\t}\n\t}\n\treturn (ub + ua) / 2.0;\n}\n\n\nSqueak.registerExternalModule(\"Klatt\", {\n\tsetInterpreter: setInterpreter,\n\tprimitiveSynthesizeFrameIntoStartingAt: primitiveSynthesizeFrameIntoStartingAt,\n\tgetModuleName: getModuleName,\n});\n\n}); // end of module\n","/* Smalltalk from Squeak4.5 with VMMaker 4.13.6 translated as JS source on 3 November 2014 1:52:21 pm */\n/* Automatically generated by\n\tJSSmartSyntaxPluginCodeGenerator VMMakerJS-bf.15 uuid: fd4e10f2-3773-4e80-8bb5-c4b471a014e5\n   from\n\tLargeIntegersPlugin VMMaker-bf.353 uuid: 8ae25e7e-8d2c-451e-8277-598b30e9c002\n */\n\nmodule(\"users.bert.SqueakJS.plugins.LargeIntegers\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";\n\nvar VM_PROXY_MAJOR = 1;\nvar VM_PROXY_MINOR = 11;\n\n/*** Functions ***/\nfunction CLASSOF(obj) { return typeof obj === \"number\" ? interpreterProxy.classSmallInteger() : obj.sqClass }\nfunction SIZEOF(obj) { return obj.pointers ? obj.pointers.length : obj.words ? obj.words.length : obj.bytes ? obj.bytes.length : 0 }\nfunction BYTESIZEOF(obj) { return obj.bytes ? obj.bytes.length : obj.words ? obj.words.length * 4 : 0 }\nfunction DIV(a, b) { return Math.floor(a / b) | 0; }   // integer division\nfunction MOD(a, b) { return a - DIV(a, b) * b | 0; }   // signed modulus\nfunction SHL(a, b) { return b > 31 ? 0 : a << b; }     // fix JS shift\nfunction SHR(a, b) { return b > 31 ? 0 : a >>> b; }    // fix JS shift\nfunction SHIFT(a, b) { return b < 0 ? (b < -31 ? 0 : a >>> (0-b) ) : (b > 31 ? 0 : a << b); }\n\n/*** Variables ***/\nvar andOpIndex = 0;\nvar interpreterProxy = null;\nvar moduleName = \"LargeIntegers v1.5 (e)\";\nvar orOpIndex = 1;\nvar xorOpIndex = 2;\n\n\n\n/*\tArgument has to be aBytesOop! */\n/*\tTests for any magnitude bits in the interval from start to stopArg. */\n\nfunction anyBitOfBytesfromto(aBytesOop, start, stopArg) {\n\tvar lastByteIx;\n\tvar digit;\n\tvar magnitude;\n\tvar leftShift;\n\tvar rightShift;\n\tvar firstByteIx;\n\tvar stop;\n\tvar mask;\n\tvar ix;\n\n\t// missing DebugCode;\n\tif ((start < 1) || (stopArg < 1)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tmagnitude = aBytesOop;\n\tstop = Math.min(stopArg, highBitOfBytes(magnitude));\n\tif (start > stop) {\n\t\treturn false;\n\t}\n\tfirstByteIx = ((start - 1) >> 3) + 1;\n\tlastByteIx = ((stop - 1) >> 3) + 1;\n\trightShift = MOD((start - 1), 8);\n\tleftShift = 7 - (MOD((stop - 1), 8));\n\tif (firstByteIx === lastByteIx) {\n\t\tmask = (SHL(255, rightShift)) & (SHR(255, leftShift));\n\t\tdigit = digitOfBytesat(magnitude, firstByteIx);\n\t\treturn (digit & mask) !== 0;\n\t}\n\tif ((SHR(digitOfBytesat(magnitude, firstByteIx), rightShift)) !== 0) {\n\t\treturn true;\n\t}\n\tfor (ix = (firstByteIx + 1); ix <= (lastByteIx - 1); ix++) {\n\t\tif (digitOfBytesat(magnitude, ix) !== 0) {\n\t\t\treturn true;\n\t\t}\n\t}\n\tif (((SHL(digitOfBytesat(magnitude, lastByteIx), leftShift)) & 255) !== 0) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n\n/*\tPrecondition: bytesOop is not anInteger and a bytes object. */\n/*\tFunction #byteSizeOf: is used by the interpreter, be careful with name\n\tclashes... */\n\nfunction byteSizeOfBytes(bytesOop) {\n\treturn SIZEOF(bytesOop);\n}\n\n\n/*\tAttention: this method invalidates all oop's! Only newBytes is valid at return. */\n/*\tDoes not normalize. */\n\nfunction bytesgrowTo(aBytesObject, newLen) {\n\tvar oldLen;\n\tvar copyLen;\n\tvar newBytes;\n\n\tnewBytes = interpreterProxy.instantiateClassindexableSize(CLASSOF(aBytesObject), newLen);\n;\n\toldLen = BYTESIZEOF(aBytesObject);\n\tif (oldLen < newLen) {\n\t\tcopyLen = oldLen;\n\t} else {\n\t\tcopyLen = newLen;\n\t}\n\tcDigitCopyFromtolen(aBytesObject.bytes, newBytes.bytes, copyLen);\n\treturn newBytes;\n}\n\n\n/*\tAttention: this method invalidates all oop's! Only newBytes is valid at return. */\n\nfunction bytesOrIntgrowTo(oop, len) {\n\tvar sq_class;\n\tvar val;\n\tvar newBytes;\n\n\tif (typeof oop === \"number\") {\n\t\tval = oop;\n\t\tif (val < 0) {\n\t\t\tsq_class = interpreterProxy.classLargeNegativeInteger();\n\t\t} else {\n\t\t\tsq_class = interpreterProxy.classLargePositiveInteger();\n\t\t}\n\t\tnewBytes = interpreterProxy.instantiateClassindexableSize(sq_class, len);\n\t\tcCopyIntValtoBytes(val, newBytes);\n\t} else {\n\t\tnewBytes = bytesgrowTo(oop, len);\n\t}\n\treturn newBytes;\n}\n\nfunction cCopyIntValtoBytes(val, bytes) {\n\tvar pByte;\n\tvar ix;\n\tvar ixLimiT;\n\n\tpByte = bytes.bytes;\n\tfor (ix = 1, ixLimiT = cDigitLengthOfCSI(val); ix <= ixLimiT; ix++) {\n\t\tpByte[ix - 1] = cDigitOfCSIat(val, ix);\n\t}\n}\n\n\n/*\tpByteRes len = longLen; returns over.. */\n\nfunction cDigitAddlenwithleninto(pByteShort, shortLen, pByteLong, longLen, pByteRes) {\n\tvar i;\n\tvar limit;\n\tvar accum;\n\n\taccum = 0;\n\tlimit = shortLen - 1;\n\tfor (i = 0; i <= limit; i++) {\n\t\taccum = ((accum >>> 8) + pByteShort[i]) + pByteLong[i];\n\t\tpByteRes[i] = (accum & 255);\n\t}\n\tlimit = longLen - 1;\n\tfor (i = shortLen; i <= limit; i++) {\n\t\taccum = (accum >>> 8) + pByteLong[i];\n\t\tpByteRes[i] = (accum & 255);\n\t}\n\treturn accum >>> 8;\n}\n\n\n/*\tPrecondition: pFirst len = pSecond len. */\n\nfunction cDigitComparewithlen(pFirst, pSecond, len) {\n\tvar firstDigit;\n\tvar secondDigit;\n\tvar ix;\n\n\tix = len - 1;\n\twhile (ix >= 0) {\n\t\tif (((secondDigit = pSecond[ix])) !== ((firstDigit = pFirst[ix]))) {\n\t\t\tif (secondDigit < firstDigit) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t\t--ix;\n\t}\n\treturn 0;\n}\n\nfunction cDigitCopyFromtolen(pFrom, pTo, len) {\n\tvar limit;\n\tvar i;\n\n\t;\n\tlimit = len - 1;\n\tfor (i = 0; i <= limit; i++) {\n\t\tpTo[i] = pFrom[i];\n\t}\n\treturn 0;\n}\n\nfunction cDigitDivlenremlenquolen(pDiv, divLen, pRem, remLen, pQuo, quoLen) {\n\tvar b;\n\tvar q;\n\tvar a;\n\tvar dnh;\n\tvar lo;\n\tvar hi;\n\tvar r3;\n\tvar mul;\n\tvar cond;\n\tvar l;\n\tvar k;\n\tvar j;\n\tvar i;\n\tvar dl;\n\tvar ql;\n\tvar r1r2;\n\tvar dh;\n\tvar t;\n\n\n\t/* Last actual byte of data (ST ix) */\n\n\tdl = divLen - 1;\n\tql = quoLen;\n\tdh = pDiv[dl - 1];\n\tif (dl === 1) {\n\t\tdnh = 0;\n\t} else {\n\t\tdnh = pDiv[dl - 2];\n\t}\n\tfor (k = 1; k <= ql; k++) {\n\n\t\t/* maintain quo*arg+rem=self */\n\t\t/* Estimate rem/div by dividing the leading two digits of rem by dh. */\n\t\t/* The estimate is q = qhi*16r100+qlo, where qhi and qlo are unsigned char. */\n\n\n\t\t/* r1 := rem digitAt: j. */\n\n\t\tj = (remLen + 1) - k;\n\t\tif (pRem[j - 1] === dh) {\n\t\t\tq = 255;\n\t\t} else {\n\n\t\t\t/* Compute q = (r1,r2)//dh, t = (r1,r2)\\\\dh. */\n\t\t\t/* r2 := (rem digitAt: j - 2). */\n\n\t\t\tr1r2 = pRem[j - 1];\n\t\t\tr1r2 = (r1r2 << 8) + pRem[j - 2];\n\t\t\tt = MOD(r1r2, dh);\n\n\t\t\t/* Next compute (hi,lo) := q*dnh */\n\n\t\t\tq = DIV(r1r2, dh);\n\t\t\tmul = q * dnh;\n\t\t\thi = mul >>> 8;\n\n\t\t\t/* Correct overestimate of q.                \n\t\t\t\tMax of 2 iterations through loop -- see Knuth vol. 2 */\n\n\t\t\tlo = mul & 255;\n\t\t\tif (j < 3) {\n\t\t\t\tr3 = 0;\n\t\t\t} else {\n\t\t\t\tr3 = pRem[j - 3];\n\t\t\t}\n\t\t\t\t\twhile (true) {\n\t\t\t\tif ((t < hi) || ((t === hi) && (r3 < lo))) {\n\n\t\t\t\t\t/* i.e. (t,r3) < (hi,lo) */\n\n\t\t\t\t\t--q;\n\t\t\t\t\tif (lo < dnh) {\n\t\t\t\t\t\t--hi;\n\t\t\t\t\t\tlo = (lo + 256) - dnh;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlo -= dnh;\n\t\t\t\t\t}\n\t\t\t\t\tcond = hi >= dh;\n\t\t\t\t} else {\n\t\t\t\t\tcond = false;\n\t\t\t\t}\n\t\t\t\tif (!(cond)) break;\n\t\t\t\thi -= dh;\n\t\t\t}\n\t\t}\n\t\tl = j - dl;\n\t\ta = 0;\n\t\tfor (i = 1; i <= divLen; i++) {\n\t\t\thi = pDiv[i - 1] * (q >>> 8);\n\t\t\tlo = pDiv[i - 1] * (q & 255);\n\t\t\tb = (pRem[l - 1] - a) - (lo & 255);\n\t\t\tpRem[l - 1] = (b & 255);\n\n\t\t\t/* This is a possible replacement to simulate arithmetic shift (preserving sign of b) */\n\t\t\t/* b := b >> 8 bitOr: (0 - (b >> ((interpreterProxy sizeof: b)*8 */\n\t\t\t/* CHAR_BIT */\n\t\t\t/* -1)) << 8). */\n\n\t\t\tb = b >> 8;\n\t\t\ta = (hi + (lo >>> 8)) - b;\n\t\t\t++l;\n\t\t}\n\t\tif (a > 0) {\n\n\t\t\t/* Add div back into rem, decrease q by 1 */\n\n\t\t\t--q;\n\t\t\tl = j - dl;\n\t\t\ta = 0;\n\t\t\tfor (i = 1; i <= divLen; i++) {\n\t\t\t\ta = ((a >>> 8) + pRem[l - 1]) + pDiv[i - 1];\n\t\t\t\tpRem[l - 1] = (a & 255);\n\t\t\t\t++l;\n\t\t\t}\n\t\t}\n\t\tpQuo[quoLen - k] = q;\n\t}\n\treturn 0;\n}\n\n\n/*\tAnswer the index (in bits) of the high order bit of the receiver, or zero if the    \n\t receiver is zero. This method is allowed (and needed) for     \n\tLargeNegativeIntegers as well, since Squeak's LargeIntegers are     \n\tsign/magnitude. */\n\nfunction cDigitHighBitlen(pByte, len) {\n\tvar lastDigit;\n\tvar realLength;\n\n\trealLength = len;\n\twhile (((lastDigit = pByte[realLength - 1])) === 0) {\n\t\tif (((--realLength)) === 0) {\n\t\t\treturn 0;\n\t\t}\n\t}\n\treturn cHighBit(lastDigit) + (8 * (realLength - 1));\n}\n\n\n/*\tAnswer the number of indexable fields of a CSmallInteger. This value is \n\t   the same as the largest legal subscript. */\n\nfunction cDigitLengthOfCSI(csi) {\n\tif ((csi < 256) && (csi > -256)) {\n\t\treturn 1;\n\t}\n\tif ((csi < 65536) && (csi > -65536)) {\n\t\treturn 2;\n\t}\n\tif ((csi < 16777216) && (csi > -16777216)) {\n\t\treturn 3;\n\t}\n\treturn 4;\n}\n\n\n/*\tC indexed! */\n\nfunction cDigitLshiftfromlentolen(shiftCount, pFrom, lenFrom, pTo, lenTo) {\n\tvar digitShift;\n\tvar carry;\n\tvar digit;\n\tvar i;\n\tvar bitShift;\n\tvar rshift;\n\tvar limit;\n\n\tdigitShift = shiftCount >> 3;\n\tbitShift = MOD(shiftCount, 8);\n\tlimit = digitShift - 1;\n\tfor (i = 0; i <= limit; i++) {\n\t\tpTo[i] = 0;\n\t}\n\tif (bitShift === 0) {\n\n\t\t/* Fast version for digit-aligned shifts */\n\t\t/* C indexed! */\n\n\t\treturn cDigitReplacefromtowithstartingAt(pTo, digitShift, lenTo - 1, pFrom, 0);\n\t}\n\trshift = 8 - bitShift;\n\tcarry = 0;\n\tlimit = lenFrom - 1;\n\tfor (i = 0; i <= limit; i++) {\n\t\tdigit = pFrom[i];\n\t\tpTo[i + digitShift] = ((carry | (SHL(digit, bitShift))) & 255);\n\t\tcarry = SHR(digit, rshift);\n\t}\n\tif (carry !== 0) {\n\t\tpTo[lenTo - 1] = carry;\n\t}\n\treturn 0;\n}\n\nfunction cDigitMontgomerylentimeslenmodulolenmInvModBinto(pBytesFirst, firstLen, pBytesSecond, secondLen, pBytesThird, thirdLen, mInv, pBytesRes) {\n\tvar k;\n\tvar i;\n\tvar lastByte;\n\tvar limit3;\n\tvar limit2;\n\tvar limit1;\n\tvar u;\n\tvar accum;\n\n\tlimit1 = firstLen - 1;\n\tlimit2 = secondLen - 1;\n\tlimit3 = thirdLen - 1;\n\tlastByte = 0;\n\tfor (i = 0; i <= limit1; i++) {\n\t\taccum = pBytesRes[0] + (pBytesFirst[i] * pBytesSecond[0]);\n\t\tu = (accum * mInv) & 255;\n\t\taccum += u * pBytesThird[0];\n\t\tfor (k = 1; k <= limit2; k++) {\n\t\t\taccum = (((accum >>> 8) + pBytesRes[k]) + (pBytesFirst[i] * pBytesSecond[k])) + (u * pBytesThird[k]);\n\t\t\tpBytesRes[k - 1] = (accum & 255);\n\t\t}\n\t\tfor (k = secondLen; k <= limit3; k++) {\n\t\t\taccum = ((accum >>> 8) + pBytesRes[k]) + (u * pBytesThird[k]);\n\t\t\tpBytesRes[k - 1] = (accum & 255);\n\t\t}\n\t\taccum = (accum >>> 8) + lastByte;\n\t\tpBytesRes[limit3] = (accum & 255);\n\t\tlastByte = accum >>> 8;\n\t}\n\tfor (i = firstLen; i <= limit3; i++) {\n\t\taccum = pBytesRes[0];\n\t\tu = (accum * mInv) & 255;\n\t\taccum += u * pBytesThird[0];\n\t\tfor (k = 1; k <= limit3; k++) {\n\t\t\taccum = ((accum >>> 8) + pBytesRes[k]) + (u * pBytesThird[k]);\n\t\t\tpBytesRes[k - 1] = (accum & 255);\n\t\t}\n\t\taccum = (accum >>> 8) + lastByte;\n\t\tpBytesRes[limit3] = (accum & 255);\n\t\tlastByte = accum >>> 8;\n\t}\n\tif (!((lastByte === 0) && (cDigitComparewithlen(pBytesThird, pBytesRes, thirdLen) === 1))) {\n\n\t\t/* self cDigitSub: pBytesThird len: thirdLen with: pBytesRes len: thirdLen into: pBytesRes */\n\n\t\taccum = 0;\n\t\tfor (i = 0; i <= limit3; i++) {\n\t\t\taccum = (accum + pBytesRes[i]) - pBytesThird[i];\n\t\t\tpBytesRes[i] = (accum & 255);\n\t\t\taccum = accum >> 8;\n\t\t}\n\t}\n}\n\nfunction cDigitMultiplylenwithleninto(pByteShort, shortLen, pByteLong, longLen, pByteRes) {\n\tvar ab;\n\tvar j;\n\tvar digit;\n\tvar carry;\n\tvar i;\n\tvar limitLong;\n\tvar k;\n\tvar limitShort;\n\n\tif ((shortLen === 1) && (pByteShort[0] === 0)) {\n\t\treturn 0;\n\t}\n\tif ((longLen === 1) && (pByteLong[0] === 0)) {\n\t\treturn 0;\n\t}\n\tlimitShort = shortLen - 1;\n\tlimitLong = longLen - 1;\n\tfor (i = 0; i <= limitShort; i++) {\n\t\tif (((digit = pByteShort[i])) !== 0) {\n\t\t\tk = i;\n\n\t\t\t/* Loop invariant: 0<=carry<=0377, k=i+j-1 (ST) */\n\t\t\t/* -> Loop invariant: 0<=carry<=0377, k=i+j (C) (?) */\n\n\t\t\tcarry = 0;\n\t\t\tfor (j = 0; j <= limitLong; j++) {\n\t\t\t\tab = pByteLong[j];\n\t\t\t\tab = ((ab * digit) + carry) + pByteRes[k];\n\t\t\t\tcarry = ab >>> 8;\n\t\t\t\tpByteRes[k] = (ab & 255);\n\t\t\t\t++k;\n\t\t\t}\n\t\t\tpByteRes[k] = carry;\n\t\t}\n\t}\n\treturn 0;\n}\n\n\n/*\tAnswer the value of an indexable field in the receiver.              \n\tLargePositiveInteger uses bytes of base two number, and each is a       \n\t      'digit' base 256. */\n/*\tST indexed! */\n\nfunction cDigitOfCSIat(csi, ix) {\n\tif (ix < 1) {\n\t\tinterpreterProxy.primitiveFail();\n\t}\n\tif (ix > 4) {\n\t\treturn 0;\n\t}\n\tif (csi < 0) {\n\t\t;\n\t\treturn (SHR((0 - csi), ((ix - 1) * 8))) & 255;\n\t} else {\n\t\treturn (SHR(csi, ((ix - 1) * 8))) & 255;\n\t}\n}\n\n\n/*\tpByteRes len = longLen. */\n\nfunction cDigitOpshortlenlongleninto(opIndex, pByteShort, shortLen, pByteLong, longLen, pByteRes) {\n\tvar i;\n\tvar limit;\n\n\tlimit = shortLen - 1;\n\tif (opIndex === andOpIndex) {\n\t\tfor (i = 0; i <= limit; i++) {\n\t\t\tpByteRes[i] = (pByteShort[i] & pByteLong[i]);\n\t\t}\n\t\tlimit = longLen - 1;\n\t\tfor (i = shortLen; i <= limit; i++) {\n\t\t\tpByteRes[i] = 0;\n\t\t}\n\t\treturn 0;\n\t}\n\tif (opIndex === orOpIndex) {\n\t\tfor (i = 0; i <= limit; i++) {\n\t\t\tpByteRes[i] = (pByteShort[i] | pByteLong[i]);\n\t\t}\n\t\tlimit = longLen - 1;\n\t\tfor (i = shortLen; i <= limit; i++) {\n\t\t\tpByteRes[i] = pByteLong[i];\n\t\t}\n\t\treturn 0;\n\t}\n\tif (opIndex === xorOpIndex) {\n\t\tfor (i = 0; i <= limit; i++) {\n\t\t\tpByteRes[i] = (pByteShort[i] ^ pByteLong[i]);\n\t\t}\n\t\tlimit = longLen - 1;\n\t\tfor (i = shortLen; i <= limit; i++) {\n\t\t\tpByteRes[i] = pByteLong[i];\n\t\t}\n\t\treturn 0;\n\t}\n\treturn interpreterProxy.primitiveFail();\n}\n\n\n/*\tC indexed! */\n\nfunction cDigitReplacefromtowithstartingAt(pTo, start, stop, pFrom, repStart) {\n\treturn function() {\n\t\t// inlining self cDigitCopyFrom: pFrom + repStart to: pTo + start len: stop - start + 1\n\t\tvar len = stop - start + 1;\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tpTo[i + start] = pFrom[i + repStart];\n\t\t}\n\t\treturn 0;\n\t}();\n;\n}\n\nfunction cDigitRshiftfromlentolen(shiftCount, pFrom, fromLen, pTo, toLen) {\n\tvar j;\n\tvar digitShift;\n\tvar carry;\n\tvar digit;\n\tvar bitShift;\n\tvar leftShift;\n\tvar limit;\n\tvar start;\n\n\tdigitShift = shiftCount >> 3;\n\tbitShift = MOD(shiftCount, 8);\n\tif (bitShift === 0) {\n\n\t\t/* Fast version for byte-aligned shifts */\n\t\t/* C indexed! */\n\n\t\treturn cDigitReplacefromtowithstartingAt(pTo, 0, toLen - 1, pFrom, digitShift);\n\t}\n\tleftShift = 8 - bitShift;\n\tcarry = SHR(pFrom[digitShift], bitShift);\n\tstart = digitShift + 1;\n\tlimit = fromLen - 1;\n\tfor (j = start; j <= limit; j++) {\n\t\tdigit = pFrom[j];\n\t\tpTo[j - start] = ((carry | (SHL(digit, leftShift))) & 255);\n\t\tcarry = SHR(digit, bitShift);\n\t}\n\tif (carry !== 0) {\n\t\tpTo[toLen - 1] = carry;\n\t}\n\treturn 0;\n}\n\nfunction cDigitSublenwithleninto(pByteSmall, smallLen, pByteLarge, largeLen, pByteRes) {\n\tvar i;\n\tvar z;\n\n\n\t/* Loop invariant is -1<=z<=0 */\n\n\tz = 0;\n\tfor (i = 0; i <= (smallLen - 1); i++) {\n\t\tz = (z + pByteLarge[i]) - pByteSmall[i];\n\t\tpByteRes[i] = (z & 255);\n\t\tz = z >> 8;\n\t}\n\tfor (i = smallLen; i <= (largeLen - 1); i++) {\n\t\tz += pByteLarge[i];\n\t\tpByteRes[i] = (z & 255);\n\t\tz = z >> 8;\n\t}\n}\n\n\n/*\tAnswer the index of the high order bit of the argument, or zero if the  \n\targument is zero. */\n/*\tFor 64 bit uints there could be added a 32-shift. */\n\nfunction cHighBit(uint) {\n\tvar shifted;\n\tvar bitNo;\n\n\tshifted = uint;\n\tbitNo = 0;\n\tif (!(shifted < (1 << 16))) {\n\t\tshifted = shifted >>> 16;\n\t\tbitNo += 16;\n\t}\n\tif (!(shifted < (1 << 8))) {\n\t\tshifted = shifted >>> 8;\n\t\tbitNo += 8;\n\t}\n\tif (!(shifted < (1 << 4))) {\n\t\tshifted = shifted >>> 4;\n\t\tbitNo += 4;\n\t}\n\tif (!(shifted < (1 << 2))) {\n\t\tshifted = shifted >>> 2;\n\t\tbitNo += 2;\n\t}\n\tif (!(shifted < (1 << 1))) {\n\t\tshifted = shifted >>> 1;\n\t\t++bitNo;\n\t}\n\treturn bitNo + shifted;\n}\n\n\n/*\tanOop has to be a SmallInteger! */\n\nfunction createLargeFromSmallInteger(anOop) {\n\tvar size;\n\tvar res;\n\tvar pByte;\n\tvar ix;\n\tvar sq_class;\n\tvar val;\n\n\tval = anOop;\n\tif (val < 0) {\n\t\tsq_class = interpreterProxy.classLargeNegativeInteger();\n\t} else {\n\t\tsq_class = interpreterProxy.classLargePositiveInteger();\n\t}\n\tsize = cDigitLengthOfCSI(val);\n\tres = interpreterProxy.instantiateClassindexableSize(sq_class, size);\n\tpByte = res.bytes;\n\tfor (ix = 1; ix <= size; ix++) {\n\t\tpByte[ix - 1] = cDigitOfCSIat(val, ix);\n\t}\n\treturn res;\n}\n\n\n/*\tAttention: this method invalidates all oop's! Only newBytes is valid at return. */\n/*\tDoes not normalize. */\n\nfunction digitLshift(aBytesOop, shiftCount) {\n\tvar newLen;\n\tvar oldLen;\n\tvar newBytes;\n\tvar highBit;\n\n\toldLen = BYTESIZEOF(aBytesOop);\n\tif (((highBit = cDigitHighBitlen(aBytesOop.bytes, oldLen))) === 0) {\n\t\treturn 0;\n\t}\n\tnewLen = ((highBit + shiftCount) + 7) >> 3;\n\tnewBytes = interpreterProxy.instantiateClassindexableSize(CLASSOF(aBytesOop), newLen);\n;\n\tcDigitLshiftfromlentolen(shiftCount, aBytesOop.bytes, oldLen, newBytes.bytes, newLen);\n\treturn newBytes;\n}\n\n\n/*\tAttention: this method invalidates all oop's! Only newBytes is valid at return. */\n/*\tShift right shiftCount bits, 0<=shiftCount.         \n\tDiscard all digits beyond a, and all zeroes at or below a. */\n/*\tDoes not normalize. */\n\nfunction digitRshiftlookfirst(aBytesOop, shiftCount, a) {\n\tvar newOop;\n\tvar oldDigitLen;\n\tvar newByteLen;\n\tvar newBitLen;\n\tvar oldBitLen;\n\n\toldBitLen = cDigitHighBitlen(aBytesOop.bytes, a);\n\toldDigitLen = (oldBitLen + 7) >> 3;\n\tnewBitLen = oldBitLen - shiftCount;\n\tif (newBitLen <= 0) {\n\n\t\t/* All bits lost */\n\n\t\treturn interpreterProxy.instantiateClassindexableSize(CLASSOF(aBytesOop), 0);\n\t}\n\tnewByteLen = (newBitLen + 7) >> 3;\n\tnewOop = interpreterProxy.instantiateClassindexableSize(CLASSOF(aBytesOop), newByteLen);\n;\n\tcDigitRshiftfromlentolen(shiftCount, aBytesOop.bytes, oldDigitLen, newOop.bytes, newByteLen);\n\treturn newOop;\n}\n\n\n/*\tDoes not need to normalize! */\n\nfunction digitAddLargewith(firstInteger, secondInteger) {\n\tvar sum;\n\tvar shortLen;\n\tvar over;\n\tvar shortInt;\n\tvar resClass;\n\tvar newSum;\n\tvar longLen;\n\tvar firstLen;\n\tvar secondLen;\n\tvar longInt;\n\n\tfirstLen = BYTESIZEOF(firstInteger);\n\tsecondLen = BYTESIZEOF(secondInteger);\n\tresClass = CLASSOF(firstInteger);\n\tif (firstLen <= secondLen) {\n\t\tshortInt = firstInteger;\n\t\tshortLen = firstLen;\n\t\tlongInt = secondInteger;\n\t\tlongLen = secondLen;\n\t} else {\n\t\tshortInt = secondInteger;\n\t\tshortLen = secondLen;\n\t\tlongInt = firstInteger;\n\t\tlongLen = firstLen;\n\t}\n\tsum = interpreterProxy.instantiateClassindexableSize(resClass, longLen);\n;\n\tover = cDigitAddlenwithleninto(shortInt.bytes, shortLen, longInt.bytes, longLen, sum.bytes);\n\tif (over > 0) {\n\n\t\t/* sum := sum growby: 1. */\n\n\t\t\tnewSum = interpreterProxy.instantiateClassindexableSize(resClass, longLen + 1);\n;\n\t\tcDigitCopyFromtolen(sum.bytes, newSum.bytes, longLen);\n\n\t\t/* C index! */\n\n\t\tsum = newSum;\n\t\tsum.bytes[longLen] = over;\n\t}\n\treturn sum;\n}\n\n\n/*\tBit logic here is only implemented for positive integers or Zero;\n\tif rec or arg is negative, it fails. */\n\nfunction digitBitLogicwithopIndex(firstInteger, secondInteger, opIx) {\n\tvar shortLen;\n\tvar shortLarge;\n\tvar firstLarge;\n\tvar secondLarge;\n\tvar longLen;\n\tvar longLarge;\n\tvar firstLen;\n\tvar secondLen;\n\tvar result;\n\n\tif (typeof firstInteger === \"number\") {\n\t\tif (firstInteger < 0) {\n\t\t\treturn interpreterProxy.primitiveFail();\n\t\t}\n\t\t\tfirstLarge = createLargeFromSmallInteger(firstInteger);\n;\n\t} else {\n\t\tif (CLASSOF(firstInteger) === interpreterProxy.classLargeNegativeInteger()) {\n\t\t\treturn interpreterProxy.primitiveFail();\n\t\t}\n\t\tfirstLarge = firstInteger;\n\t}\n\tif (typeof secondInteger === \"number\") {\n\t\tif (secondInteger < 0) {\n\t\t\treturn interpreterProxy.primitiveFail();\n\t\t}\n\t\t\tsecondLarge = createLargeFromSmallInteger(secondInteger);\n;\n\t} else {\n\t\tif (CLASSOF(secondInteger) === interpreterProxy.classLargeNegativeInteger()) {\n\t\t\treturn interpreterProxy.primitiveFail();\n\t\t}\n\t\tsecondLarge = secondInteger;\n\t}\n\tfirstLen = BYTESIZEOF(firstLarge);\n\tsecondLen = BYTESIZEOF(secondLarge);\n\tif (firstLen < secondLen) {\n\t\tshortLen = firstLen;\n\t\tshortLarge = firstLarge;\n\t\tlongLen = secondLen;\n\t\tlongLarge = secondLarge;\n\t} else {\n\t\tshortLen = secondLen;\n\t\tshortLarge = secondLarge;\n\t\tlongLen = firstLen;\n\t\tlongLarge = firstLarge;\n\t}\n\tresult = interpreterProxy.instantiateClassindexableSize(interpreterProxy.classLargePositiveInteger(), longLen);\n;\n\tcDigitOpshortlenlongleninto(opIx, shortLarge.bytes, shortLen, longLarge.bytes, longLen, result.bytes);\n\tif (interpreterProxy.failed()) {\n\t\treturn 0;\n\t}\n\treturn normalizePositive(result);\n}\n\n\n/*\tCompare the magnitude of firstInteger with that of secondInteger.      \n\tReturn a code of 1, 0, -1 for firstInteger >, = , < secondInteger */\n\nfunction digitCompareLargewith(firstInteger, secondInteger) {\n\tvar secondLen;\n\tvar firstLen;\n\n\tfirstLen = BYTESIZEOF(firstInteger);\n\tsecondLen = BYTESIZEOF(secondInteger);\n\tif (secondLen !== firstLen) {\n\t\tif (secondLen > firstLen) {\n\t\t\treturn -1;\n\t\t} else {\n\t\t\treturn 1;\n\t\t}\n\t}\n\treturn cDigitComparewithlen(firstInteger.bytes, secondInteger.bytes, firstLen);\n}\n\n\n/*\tDoes not normalize. */\n/*\tDivision by zero has to be checked in caller. */\n\nfunction digitDivLargewithnegative(firstInteger, secondInteger, neg) {\n\tvar resultClass;\n\tvar result;\n\tvar rem;\n\tvar div;\n\tvar quo;\n\tvar d;\n\tvar l;\n\tvar secondLen;\n\tvar firstLen;\n\n\tfirstLen = BYTESIZEOF(firstInteger);\n\tsecondLen = BYTESIZEOF(secondInteger);\n\tif (neg) {\n\t\tresultClass = interpreterProxy.classLargeNegativeInteger();\n\t} else {\n\t\tresultClass = interpreterProxy.classLargePositiveInteger();\n\t}\n\tl = (firstLen - secondLen) + 1;\n\tif (l <= 0) {\n\t\t\tresult = interpreterProxy.instantiateClassindexableSize(interpreterProxy.classArray(), 2);\n;\n\t\tinterpreterProxy.stObjectatput(result,1,0);\n\t\tinterpreterProxy.stObjectatput(result,2,firstInteger);\n\t\treturn result;\n\t}\n\td = 8 - cHighBit(unsafeByteOfat(secondInteger, secondLen));\n\tdiv = digitLshift(secondInteger, d);\ndiv = bytesOrIntgrowTo(div, digitLength(div) + 1);\n;\n\trem = digitLshift(firstInteger, d);\nif (digitLength(rem) === firstLen) {\n\trem = bytesOrIntgrowTo(rem, firstLen + 1);\n}\n;\n\tquo = interpreterProxy.instantiateClassindexableSize(resultClass, l);\n;\n\tcDigitDivlenremlenquolen(div.bytes, digitLength(div), rem.bytes, digitLength(rem), quo.bytes, digitLength(quo));\n\trem = digitRshiftlookfirst(rem, d, digitLength(div) - 1);\n;\n\tresult = interpreterProxy.instantiateClassindexableSize(interpreterProxy.classArray(), 2);\n;\n\tinterpreterProxy.stObjectatput(result,1,quo);\n\tinterpreterProxy.stObjectatput(result,2,rem);\n\treturn result;\n}\n\nfunction digitLength(oop) {\n\tif (typeof oop === \"number\") {\n\t\treturn cDigitLengthOfCSI(oop);\n\t} else {\n\t\treturn BYTESIZEOF(oop);\n\t}\n}\n\nfunction digitMontgomerytimesmodulomInvModB(firstLarge, secondLarge, thirdLarge, mInv) {\n\tvar prod;\n\tvar thirdLen;\n\tvar firstLen;\n\tvar secondLen;\n\n\tfirstLen = BYTESIZEOF(firstLarge);\n\tsecondLen = BYTESIZEOF(secondLarge);\n\tthirdLen = BYTESIZEOF(thirdLarge);\n\tif (!(firstLen <= thirdLen)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!(secondLen <= thirdLen)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!((mInv >= 0) && (mInv <= 255))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tprod = interpreterProxy.instantiateClassindexableSize(interpreterProxy.classLargePositiveInteger(), thirdLen);\n;\n\tcDigitMontgomerylentimeslenmodulolenmInvModBinto(firstLarge.bytes, firstLen, secondLarge.bytes, secondLen, thirdLarge.bytes, thirdLen, mInv, prod.bytes);\n\treturn normalizePositive(prod);\n}\n\n\n/*\tNormalizes. */\n\nfunction digitMultiplyLargewithnegative(firstInteger, secondInteger, neg) {\n\tvar longInt;\n\tvar resultClass;\n\tvar shortLen;\n\tvar shortInt;\n\tvar longLen;\n\tvar prod;\n\tvar secondLen;\n\tvar firstLen;\n\n\tfirstLen = BYTESIZEOF(firstInteger);\n\tsecondLen = BYTESIZEOF(secondInteger);\n\tif (firstLen <= secondLen) {\n\t\tshortInt = firstInteger;\n\t\tshortLen = firstLen;\n\t\tlongInt = secondInteger;\n\t\tlongLen = secondLen;\n\t} else {\n\t\tshortInt = secondInteger;\n\t\tshortLen = secondLen;\n\t\tlongInt = firstInteger;\n\t\tlongLen = firstLen;\n\t}\n\tif (neg) {\n\t\tresultClass = interpreterProxy.classLargeNegativeInteger();\n\t} else {\n\t\tresultClass = interpreterProxy.classLargePositiveInteger();\n\t}\n\tprod = interpreterProxy.instantiateClassindexableSize(resultClass, longLen + shortLen);\n;\n\tcDigitMultiplylenwithleninto(shortInt.bytes, shortLen, longInt.bytes, longLen, prod.bytes);\n\treturn normalize(prod);\n}\n\n\n/*\tArgument has to be aLargeInteger! */\n\nfunction digitOfBytesat(aBytesOop, ix) {\n\tif (ix > BYTESIZEOF(aBytesOop)) {\n\t\treturn 0;\n\t} else {\n\t\treturn unsafeByteOfat(aBytesOop, ix);\n\t}\n}\n\n\n/*\tNormalizes. */\n\nfunction digitSubLargewith(firstInteger, secondInteger) {\n\tvar smallerLen;\n\tvar larger;\n\tvar res;\n\tvar smaller;\n\tvar resLen;\n\tvar largerLen;\n\tvar firstNeg;\n\tvar firstLen;\n\tvar secondLen;\n\tvar neg;\n\n\tfirstNeg = CLASSOF(firstInteger) === interpreterProxy.classLargeNegativeInteger();\n\tfirstLen = BYTESIZEOF(firstInteger);\n\tsecondLen = BYTESIZEOF(secondInteger);\n\tif (firstLen === secondLen) {\n\t\twhile ((firstLen > 1) && (digitOfBytesat(firstInteger, firstLen) === digitOfBytesat(secondInteger, firstLen))) {\n\t\t\t--firstLen;\n\t\t}\n\t\tsecondLen = firstLen;\n\t}\n\tif ((firstLen < secondLen) || ((firstLen === secondLen) && (digitOfBytesat(firstInteger, firstLen) < digitOfBytesat(secondInteger, firstLen)))) {\n\t\tlarger = secondInteger;\n\t\tlargerLen = secondLen;\n\t\tsmaller = firstInteger;\n\t\tsmallerLen = firstLen;\n\t\tneg = firstNeg === false;\n\t} else {\n\t\tlarger = firstInteger;\n\t\tlargerLen = firstLen;\n\t\tsmaller = secondInteger;\n\t\tsmallerLen = secondLen;\n\t\tneg = firstNeg;\n\t}\n\tresLen = largerLen;\n\tres = interpreterProxy.instantiateClassindexableSize((neg\n\t? interpreterProxy.classLargeNegativeInteger()\n\t: interpreterProxy.classLargePositiveInteger()), resLen);\n;\n\tcDigitSublenwithleninto(smaller.bytes, smallerLen, larger.bytes, largerLen, res.bytes);\n\treturn (neg\n\t\t? normalizeNegative(res)\n\t\t: normalizePositive(res));\n}\n\n\n/*\tNote: This is hardcoded so it can be run from Squeak.\n\tThe module name is used for validating a module *after*\n\tit is loaded to check if it does really contain the module\n\twe're thinking it contains. This is important! */\n\nfunction getModuleName() {\n\treturn moduleName;\n}\n\nfunction halt() {\n\t;\n}\n\nfunction highBitOfBytes(aBytesOop) {\n\treturn cDigitHighBitlen(aBytesOop.bytes, BYTESIZEOF(aBytesOop));\n}\n\nfunction isNormalized(anInteger) {\n\tvar ix;\n\tvar len;\n\tvar sLen;\n\tvar minVal;\n\tvar maxVal;\n\n\tif (typeof anInteger === \"number\") {\n\t\treturn true;\n\t}\n\tlen = digitLength(anInteger);\n\tif (len === 0) {\n\t\treturn false;\n\t}\n\tif (unsafeByteOfat(anInteger, len) === 0) {\n\t\treturn false;\n\t}\n\n\t/* maximal digitLength of aSmallInteger */\n\n\tsLen = 4;\n\tif (len > sLen) {\n\t\treturn true;\n\t}\n\tif (len < sLen) {\n\t\treturn false;\n\t}\n\tif (CLASSOF(anInteger) === interpreterProxy.classLargePositiveInteger()) {\n\n\t\t/* SmallInteger maxVal */\n\t\t/* all bytes of maxVal but the highest one are just FF's */\n\n\t\tmaxVal = 1073741823;\n\t\treturn unsafeByteOfat(anInteger, sLen) > cDigitOfCSIat(maxVal, sLen);\n\t} else {\n\n\t\t/* SmallInteger minVal */\n\t\t/* all bytes of minVal but the highest one are just 00's */\n\n\t\tminVal = -1073741824;\n\t\tif (unsafeByteOfat(anInteger, sLen) < cDigitOfCSIat(minVal, sLen)) {\n\t\t\treturn false;\n\t\t} else {\n\n\t\t\t/* if just one digit differs, then anInteger < minval (the corresponding digit byte is greater!)\n\t\t\t\t\t\tand therefore a LargeNegativeInteger */\n\n\t\t\tfor (ix = 1; ix <= sLen; ix++) {\n\t\t\t\tif (unsafeByteOfat(anInteger, ix) !== cDigitOfCSIat(minVal, ix)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction msg(s) {\n\tconsole.log(moduleName + \": \" + s);\n}\n\n\n/*\tCheck for leading zeroes and return shortened copy if so. */\n\nfunction normalize(aLargeInteger) {\n\t// missing DebugCode;\n\tif (CLASSOF(aLargeInteger) === interpreterProxy.classLargePositiveInteger()) {\n\t\treturn normalizePositive(aLargeInteger);\n\t} else {\n\t\treturn normalizeNegative(aLargeInteger);\n\t}\n}\n\n\n/*\tCheck for leading zeroes and return shortened copy if so. */\n/*\tFirst establish len = significant length. */\n\nfunction normalizeNegative(aLargeNegativeInteger) {\n\tvar i;\n\tvar len;\n\tvar sLen;\n\tvar minVal;\n\tvar oldLen;\n\tvar val;\n\n\tlen = (oldLen = digitLength(aLargeNegativeInteger));\n\twhile ((len !== 0) && (unsafeByteOfat(aLargeNegativeInteger, len) === 0)) {\n\t\t--len;\n\t}\n\tif (len === 0) {\n\t\treturn 0;\n\t}\n\n\t/* SmallInteger minVal digitLength */\n\n\tsLen = 4;\n\tif (len <= sLen) {\n\n\t\t/* SmallInteger minVal */\n\n\t\tminVal = -1073741824;\n\t\tif ((len < sLen) || (digitOfBytesat(aLargeNegativeInteger, sLen) < cDigitOfCSIat(minVal, sLen))) {\n\n\t\t\t/* If high digit less, then can be small */\n\n\t\t\tval = 0;\n\t\t\tfor (i = len; i >= 1; i += -1) {\n\t\t\t\tval = (val * 256) - unsafeByteOfat(aLargeNegativeInteger, i);\n\t\t\t}\n\t\t\treturn val;\n\t\t}\n\t\tfor (i = 1; i <= sLen; i++) {\n\n\t\t\t/* If all digits same, then = minVal (sr: minVal digits 1 to 3 are \n\t\t\t\t          0) */\n\n\t\t\tif (digitOfBytesat(aLargeNegativeInteger, i) !== cDigitOfCSIat(minVal, i)) {\n\n\t\t\t\t/* Not so; return self shortened */\n\n\t\t\t\tif (len < oldLen) {\n\n\t\t\t\t\t/* ^ self growto: len */\n\n\t\t\t\t\treturn bytesgrowTo(aLargeNegativeInteger, len);\n\t\t\t\t} else {\n\t\t\t\t\treturn aLargeNegativeInteger;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn minVal;\n\t}\n\tif (len < oldLen) {\n\n\t\t/* ^ self growto: len */\n\n\t\treturn bytesgrowTo(aLargeNegativeInteger, len);\n\t} else {\n\t\treturn aLargeNegativeInteger;\n\t}\n}\n\n\n/*\tCheck for leading zeroes and return shortened copy if so. */\n/*\tFirst establish len = significant length. */\n\nfunction normalizePositive(aLargePositiveInteger) {\n\tvar i;\n\tvar len;\n\tvar sLen;\n\tvar val;\n\tvar oldLen;\n\n\tlen = (oldLen = digitLength(aLargePositiveInteger));\n\twhile ((len !== 0) && (unsafeByteOfat(aLargePositiveInteger, len) === 0)) {\n\t\t--len;\n\t}\n\tif (len === 0) {\n\t\treturn 0;\n\t}\n\n\t/* SmallInteger maxVal digitLength. */\n\n\tsLen = 4;\n\tif ((len <= sLen) && (digitOfBytesat(aLargePositiveInteger, sLen) <= cDigitOfCSIat(1073741823, sLen))) {\n\n\t\t/* If so, return its SmallInt value */\n\n\t\tval = 0;\n\t\tfor (i = len; i >= 1; i += -1) {\n\t\t\tval = (val * 256) + unsafeByteOfat(aLargePositiveInteger, i);\n\t\t}\n\t\treturn val;\n\t}\n\tif (len < oldLen) {\n\n\t\t/* ^ self growto: len */\n\n\t\treturn bytesgrowTo(aLargePositiveInteger, len);\n\t} else {\n\t\treturn aLargePositiveInteger;\n\t}\n}\n\nfunction primAnyBitFromTo() {\n\tvar integer;\n\tvar large;\n\tvar from;\n\tvar to;\n\tvar _return_value;\n\n\tfrom = interpreterProxy.stackIntegerValue(1);\n\tto = interpreterProxy.stackIntegerValue(0);\n\t// missing DebugCode;\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(2)));\n\tinteger = interpreterProxy.stackValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (typeof integer === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\tlarge = createLargeFromSmallInteger(integer);\n\t} else {\n\t\tlarge = integer;\n\t}\n\t_return_value = (anyBitOfBytesfromto(large, from, to)? interpreterProxy.trueObject() : interpreterProxy.falseObject());\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(3, _return_value);\n\treturn null;\n}\n\n\n/*\tConverts a SmallInteger into a - non normalized! - LargeInteger;          \n\t aLargeInteger will be returned unchanged. */\n/*\tDo not check for forced fail, because we need this conversion to test the \n\tplugin in ST during forced fail, too. */\n\nfunction primAsLargeInteger() {\n\tvar anInteger;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(0)));\n\tanInteger = interpreterProxy.stackValue(0);\n\t// missing DebugCode;\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (typeof anInteger === \"number\") {\n\t\t_return_value = createLargeFromSmallInteger(anInteger);\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tinterpreterProxy.popthenPush(2, _return_value);\n\t\treturn null;\n\t} else {\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tinterpreterProxy.popthenPush(2, anInteger);\n\t\treturn null;\n\t}\n}\n\n\n/*\tIf calling this primitive fails, then C module does not exist. Do not check for forced fail, because we want to know if module exists during forced fail, too. */\n\nfunction primCheckIfCModuleExists() {\n\tvar _return_value;\n\n\t_return_value = (true? interpreterProxy.trueObject() : interpreterProxy.falseObject());\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(1, _return_value);\n\treturn null;\n}\n\nfunction _primDigitBitShift() {\n\tvar rShift;\n\tvar aLarge;\n\tvar anInteger;\n\tvar shiftCount;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tanInteger = interpreterProxy.stackValue(1);\n\tshiftCount = interpreterProxy.stackIntegerValue(0);\n\t// missing DebugCode;\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (typeof anInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\taLarge = createLargeFromSmallInteger(anInteger);\n\t} else {\n\t\taLarge = anInteger;\n\t}\n\tif (shiftCount >= 0) {\n\t\t_return_value = digitLshift(aLarge, shiftCount);\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tinterpreterProxy.popthenPush(3, _return_value);\n\t\treturn null;\n\t} else {\n\t\trShift = 0 - shiftCount;\n\t\t_return_value = normalize(digitRshiftlookfirst(aLarge, rShift, BYTESIZEOF(aLarge)));\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tinterpreterProxy.popthenPush(3, _return_value);\n\t\treturn null;\n\t}\n}\n\nfunction primDigitAdd() {\n\tvar firstLarge;\n\tvar firstInteger;\n\tvar secondLarge;\n\tvar secondInteger;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(0)));\n\tsecondInteger = interpreterProxy.stackValue(0);\n\t// missing DebugCode;\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tfirstInteger = interpreterProxy.stackValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (typeof firstInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\t\tfirstLarge = createLargeFromSmallInteger(firstInteger);\n;\n\t} else {\n\t\tfirstLarge = firstInteger;\n\t}\n\tif (typeof secondInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\t\tsecondLarge = createLargeFromSmallInteger(secondInteger);\n;\n\t} else {\n\t\tsecondLarge = secondInteger;\n\t}\n\t_return_value = digitAddLargewith(firstLarge, secondLarge);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(2, _return_value);\n\treturn null;\n}\n\nfunction primDigitAddWith() {\n\tvar firstLarge;\n\tvar secondLarge;\n\tvar firstInteger;\n\tvar secondInteger;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tfirstInteger = interpreterProxy.stackValue(1);\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(0)));\n\tsecondInteger = interpreterProxy.stackValue(0);\n\t// missing DebugCode;\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (typeof firstInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\t\tfirstLarge = createLargeFromSmallInteger(firstInteger);\n;\n\t} else {\n\t\tfirstLarge = firstInteger;\n\t}\n\tif (typeof secondInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\t\tsecondLarge = createLargeFromSmallInteger(secondInteger);\n;\n\t} else {\n\t\tsecondLarge = secondInteger;\n\t}\n\t_return_value = digitAddLargewith(firstLarge, secondLarge);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(3, _return_value);\n\treturn null;\n}\n\n\n/*\tBit logic here is only implemented for positive integers or Zero; if rec \n\tor arg is negative, it fails. */\n\nfunction primDigitBitAnd() {\n\tvar firstInteger;\n\tvar secondInteger;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(0)));\n\tsecondInteger = interpreterProxy.stackValue(0);\n\t// missing DebugCode;\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tfirstInteger = interpreterProxy.stackValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\t_return_value = digitBitLogicwithopIndex(firstInteger, secondInteger, andOpIndex);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(2, _return_value);\n\treturn null;\n}\n\n\n/*\tBit logic here is only implemented for positive integers or Zero; if any arg is negative, it fails. */\n\nfunction primDigitBitLogicWithOp() {\n\tvar firstInteger;\n\tvar secondInteger;\n\tvar opIndex;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(2)));\n\tfirstInteger = interpreterProxy.stackValue(2);\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tsecondInteger = interpreterProxy.stackValue(1);\n\topIndex = interpreterProxy.stackIntegerValue(0);\n\t// missing DebugCode;\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\t_return_value = digitBitLogicwithopIndex(firstInteger, secondInteger, opIndex);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(4, _return_value);\n\treturn null;\n}\n\n\n/*\tBit logic here is only implemented for positive integers or Zero; if rec \n\tor arg is negative, it fails. */\n\nfunction primDigitBitOr() {\n\tvar firstInteger;\n\tvar secondInteger;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(0)));\n\tsecondInteger = interpreterProxy.stackValue(0);\n\t// missing DebugCode;\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tfirstInteger = interpreterProxy.stackValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\t_return_value = digitBitLogicwithopIndex(firstInteger, secondInteger, orOpIndex);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(2, _return_value);\n\treturn null;\n}\n\nfunction primDigitBitShift() {\n\tvar aLarge;\n\tvar rShift;\n\tvar anInteger;\n\tvar shiftCount;\n\tvar _return_value;\n\n\tshiftCount = interpreterProxy.stackIntegerValue(0);\n\t// missing DebugCode;\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tanInteger = interpreterProxy.stackValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (typeof anInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\taLarge = createLargeFromSmallInteger(anInteger);\n\t} else {\n\t\taLarge = anInteger;\n\t}\n\tif (shiftCount >= 0) {\n\t\t_return_value = digitLshift(aLarge, shiftCount);\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tinterpreterProxy.popthenPush(2, _return_value);\n\t\treturn null;\n\t} else {\n\t\trShift = 0 - shiftCount;\n\t\t_return_value = normalize(digitRshiftlookfirst(aLarge, rShift, BYTESIZEOF(aLarge)));\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tinterpreterProxy.popthenPush(2, _return_value);\n\t\treturn null;\n\t}\n}\n\nfunction primDigitBitShiftMagnitude() {\n\tvar aLarge;\n\tvar rShift;\n\tvar anInteger;\n\tvar shiftCount;\n\tvar _return_value;\n\n\tshiftCount = interpreterProxy.stackIntegerValue(0);\n\t// missing DebugCode;\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tanInteger = interpreterProxy.stackValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (typeof anInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\taLarge = createLargeFromSmallInteger(anInteger);\n\t} else {\n\t\taLarge = anInteger;\n\t}\n\tif (shiftCount >= 0) {\n\t\t_return_value = digitLshift(aLarge, shiftCount);\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tinterpreterProxy.popthenPush(2, _return_value);\n\t\treturn null;\n\t} else {\n\t\trShift = 0 - shiftCount;\n\t\t_return_value = normalize(digitRshiftlookfirst(aLarge, rShift, BYTESIZEOF(aLarge)));\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tinterpreterProxy.popthenPush(2, _return_value);\n\t\treturn null;\n\t}\n}\n\n\n/*\tBit logic here is only implemented for positive integers or Zero; if rec \n\tor arg is negative, it fails. */\n\nfunction primDigitBitXor() {\n\tvar firstInteger;\n\tvar secondInteger;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(0)));\n\tsecondInteger = interpreterProxy.stackValue(0);\n\t// missing DebugCode;\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tfirstInteger = interpreterProxy.stackValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\t_return_value = digitBitLogicwithopIndex(firstInteger, secondInteger, xorOpIndex);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(2, _return_value);\n\treturn null;\n}\n\nfunction primDigitCompare() {\n\tvar firstVal;\n\tvar firstInteger;\n\tvar secondVal;\n\tvar secondInteger;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(0)));\n\tsecondInteger = interpreterProxy.stackValue(0);\n\t// missing DebugCode;\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tfirstInteger = interpreterProxy.stackValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (typeof firstInteger === \"number\") {\n\n\t\t/* first */\n\n\t\tif (typeof secondInteger === \"number\") {\n\n\t\t\t/* second */\n\n\t\t\tif (((firstVal = firstInteger)) > ((secondVal = secondInteger))) {\n\t\t\t\t_return_value = 1;\n\t\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tinterpreterProxy.popthenPush(2, _return_value);\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\tif (firstVal < secondVal) {\n\t\t\t\t\t_return_value = -1;\n\t\t\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tinterpreterProxy.popthenPush(2, _return_value);\n\t\t\t\t\treturn null;\n\t\t\t\t} else {\n\t\t\t\t\t_return_value = 0;\n\t\t\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tinterpreterProxy.popthenPush(2, _return_value);\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\n\t\t\t/* SECOND */\n\n\t\t\t_return_value = -1;\n\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tinterpreterProxy.popthenPush(2, _return_value);\n\t\t\treturn null;\n\t\t}\n\t} else {\n\n\t\t/* FIRST */\n\n\t\tif (typeof secondInteger === \"number\") {\n\n\t\t\t/* second */\n\n\t\t\t_return_value = 1;\n\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tinterpreterProxy.popthenPush(2, _return_value);\n\t\t\treturn null;\n\t\t} else {\n\n\t\t\t/* SECOND */\n\n\t\t\t_return_value = digitCompareLargewith(firstInteger, secondInteger);\n\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tinterpreterProxy.popthenPush(2, _return_value);\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nfunction primDigitCompareWith() {\n\tvar firstVal;\n\tvar secondVal;\n\tvar firstInteger;\n\tvar secondInteger;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tfirstInteger = interpreterProxy.stackValue(1);\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(0)));\n\tsecondInteger = interpreterProxy.stackValue(0);\n\t// missing DebugCode;\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (typeof firstInteger === \"number\") {\n\n\t\t/* first */\n\n\t\tif (typeof secondInteger === \"number\") {\n\n\t\t\t/* second */\n\n\t\t\tif (((firstVal = firstInteger)) > ((secondVal = secondInteger))) {\n\t\t\t\t_return_value = 1;\n\t\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tinterpreterProxy.popthenPush(3, _return_value);\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\tif (firstVal < secondVal) {\n\t\t\t\t\t_return_value = -1;\n\t\t\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tinterpreterProxy.popthenPush(3, _return_value);\n\t\t\t\t\treturn null;\n\t\t\t\t} else {\n\t\t\t\t\t_return_value = 0;\n\t\t\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tinterpreterProxy.popthenPush(3, _return_value);\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\n\t\t\t/* SECOND */\n\n\t\t\t_return_value = -1;\n\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tinterpreterProxy.popthenPush(3, _return_value);\n\t\t\treturn null;\n\t\t}\n\t} else {\n\n\t\t/* FIRST */\n\n\t\tif (typeof secondInteger === \"number\") {\n\n\t\t\t/* second */\n\n\t\t\t_return_value = 1;\n\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tinterpreterProxy.popthenPush(3, _return_value);\n\t\t\treturn null;\n\t\t} else {\n\n\t\t\t/* SECOND */\n\n\t\t\t_return_value = digitCompareLargewith(firstInteger, secondInteger);\n\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tinterpreterProxy.popthenPush(3, _return_value);\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\n\n/*\tAnswer the result of dividing firstInteger by secondInteger. \n\tFail if parameters are not integers, not normalized or secondInteger is \n\tzero.  */\n\nfunction primDigitDivNegative() {\n\tvar firstAsLargeInteger;\n\tvar firstInteger;\n\tvar secondAsLargeInteger;\n\tvar secondInteger;\n\tvar neg;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tsecondInteger = interpreterProxy.stackValue(1);\n\tneg = interpreterProxy.booleanValueOf(interpreterProxy.stackValue(0));\n\t// missing DebugCode;\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(2)));\n\tfirstInteger = interpreterProxy.stackValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!isNormalized(firstInteger)) {\n\t\t// missing DebugCode;\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (!isNormalized(secondInteger)) {\n\t\t// missing DebugCode;\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\tif (typeof firstInteger === \"number\") {\n\n\t\t/* convert to LargeInteger */\n\n\t\t\tfirstAsLargeInteger = createLargeFromSmallInteger(firstInteger);\n;\n\t} else {\n\t\tfirstAsLargeInteger = firstInteger;\n\t}\n\tif (typeof secondInteger === \"number\") {\n\n\t\t/* check for zerodivide and convert to LargeInteger */\n\n\t\tif (secondInteger === 0) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t\t\tsecondAsLargeInteger = createLargeFromSmallInteger(secondInteger);\n;\n\t} else {\n\t\tsecondAsLargeInteger = secondInteger;\n\t}\n\t_return_value = digitDivLargewithnegative(firstAsLargeInteger, secondAsLargeInteger, neg);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(3, _return_value);\n\treturn null;\n}\n\n\n/*\tAnswer the result of dividing firstInteger by secondInteger.\n\tFail if parameters are not integers or secondInteger is zero. */\n\nfunction primDigitDivWithNegative() {\n\tvar firstAsLargeInteger;\n\tvar secondAsLargeInteger;\n\tvar firstInteger;\n\tvar secondInteger;\n\tvar neg;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(2)));\n\tfirstInteger = interpreterProxy.stackValue(2);\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tsecondInteger = interpreterProxy.stackValue(1);\n\tneg = interpreterProxy.booleanValueOf(interpreterProxy.stackValue(0));\n\t// missing DebugCode;\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (typeof firstInteger === \"number\") {\n\n\t\t/* convert to LargeInteger */\n\n\t\t\tfirstAsLargeInteger = createLargeFromSmallInteger(firstInteger);\n;\n\t} else {\n\t\tfirstAsLargeInteger = firstInteger;\n\t}\n\tif (typeof secondInteger === \"number\") {\n\n\t\t/* check for zerodivide and convert to LargeInteger */\n\n\t\tif (secondInteger === 0) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t\t\tsecondAsLargeInteger = createLargeFromSmallInteger(secondInteger);\n;\n\t} else {\n\t\tsecondAsLargeInteger = secondInteger;\n\t}\n\t_return_value = digitDivLargewithnegative(firstAsLargeInteger, secondAsLargeInteger, neg);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(4, _return_value);\n\treturn null;\n}\n\nfunction primDigitMultiplyNegative() {\n\tvar firstLarge;\n\tvar firstInteger;\n\tvar secondLarge;\n\tvar secondInteger;\n\tvar neg;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tsecondInteger = interpreterProxy.stackValue(1);\n\tneg = interpreterProxy.booleanValueOf(interpreterProxy.stackValue(0));\n\t// missing DebugCode;\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(2)));\n\tfirstInteger = interpreterProxy.stackValue(2);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (typeof firstInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\t\tfirstLarge = createLargeFromSmallInteger(firstInteger);\n;\n\t} else {\n\t\tfirstLarge = firstInteger;\n\t}\n\tif (typeof secondInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\t\tsecondLarge = createLargeFromSmallInteger(secondInteger);\n;\n\t} else {\n\t\tsecondLarge = secondInteger;\n\t}\n\t_return_value = digitMultiplyLargewithnegative(firstLarge, secondLarge, neg);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(3, _return_value);\n\treturn null;\n}\n\nfunction primDigitMultiplyWithNegative() {\n\tvar firstLarge;\n\tvar secondLarge;\n\tvar firstInteger;\n\tvar secondInteger;\n\tvar neg;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(2)));\n\tfirstInteger = interpreterProxy.stackValue(2);\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tsecondInteger = interpreterProxy.stackValue(1);\n\tneg = interpreterProxy.booleanValueOf(interpreterProxy.stackValue(0));\n\t// missing DebugCode;\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (typeof firstInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\t\tfirstLarge = createLargeFromSmallInteger(firstInteger);\n;\n\t} else {\n\t\tfirstLarge = firstInteger;\n\t}\n\tif (typeof secondInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\t\tsecondLarge = createLargeFromSmallInteger(secondInteger);\n;\n\t} else {\n\t\tsecondLarge = secondInteger;\n\t}\n\t_return_value = digitMultiplyLargewithnegative(firstLarge, secondLarge, neg);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(4, _return_value);\n\treturn null;\n}\n\nfunction primDigitSubtract() {\n\tvar firstLarge;\n\tvar firstInteger;\n\tvar secondLarge;\n\tvar secondInteger;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(0)));\n\tsecondInteger = interpreterProxy.stackValue(0);\n\t// missing DebugCode;\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tfirstInteger = interpreterProxy.stackValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (typeof firstInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\t\tfirstLarge = createLargeFromSmallInteger(firstInteger);\n;\n\t} else {\n\t\tfirstLarge = firstInteger;\n\t}\n\tif (typeof secondInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\t\tsecondLarge = createLargeFromSmallInteger(secondInteger);\n;\n\t} else {\n\t\tsecondLarge = secondInteger;\n\t}\n\t_return_value = digitSubLargewith(firstLarge, secondLarge);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(2, _return_value);\n\treturn null;\n}\n\nfunction primDigitSubtractWith() {\n\tvar firstLarge;\n\tvar secondLarge;\n\tvar firstInteger;\n\tvar secondInteger;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tfirstInteger = interpreterProxy.stackValue(1);\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(0)));\n\tsecondInteger = interpreterProxy.stackValue(0);\n\t// missing DebugCode;\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (typeof firstInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\t\tfirstLarge = createLargeFromSmallInteger(firstInteger);\n;\n\t} else {\n\t\tfirstLarge = firstInteger;\n\t}\n\tif (typeof secondInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\t\tsecondLarge = createLargeFromSmallInteger(secondInteger);\n;\n\t} else {\n\t\tsecondLarge = secondInteger;\n\t}\n\t_return_value = digitSubLargewith(firstLarge, secondLarge);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(3, _return_value);\n\treturn null;\n}\n\n\n/*\tIf calling this primitive fails, then C module does not exist. */\n\nfunction primGetModuleName() {\n\tvar strPtr;\n\tvar strLen;\n\tvar i;\n\tvar strOop;\n\n\t// missing DebugCode;\n\tstrLen = strlen(getModuleName());\n\tstrOop = interpreterProxy.instantiateClassindexableSize(interpreterProxy.classString(), strLen);\n\tstrPtr = strOop.bytes;\n\tfor (i = 0; i <= (strLen - 1); i++) {\n\t\tstrPtr[i] = getModuleName()[i];\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(1, strOop);\n\treturn null;\n}\n\nfunction primMontgomeryTimesModulo() {\n\tvar firstLarge;\n\tvar secondLarge;\n\tvar firstInteger;\n\tvar thirdLarge;\n\tvar secondOperandInteger;\n\tvar thirdModuloInteger;\n\tvar smallInverseInteger;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(2)));\n\tsecondOperandInteger = interpreterProxy.stackValue(2);\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(1)));\n\tthirdModuloInteger = interpreterProxy.stackValue(1);\n\tsmallInverseInteger = interpreterProxy.stackIntegerValue(0);\n\t// missing DebugCode;\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(3)));\n\tfirstInteger = interpreterProxy.stackValue(3);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (typeof firstInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\t\tfirstLarge = createLargeFromSmallInteger(firstInteger);\n;\n\t} else {\n\t\tfirstLarge = firstInteger;\n\t}\n\tif (typeof secondOperandInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\t\tsecondLarge = createLargeFromSmallInteger(secondOperandInteger);\n;\n\t} else {\n\t\tsecondLarge = secondOperandInteger;\n\t}\n\tif (typeof thirdModuloInteger === \"number\") {\n\n\t\t/* convert it to a not normalized LargeInteger */\n\n\t\t\tthirdLarge = createLargeFromSmallInteger(thirdModuloInteger);\n;\n\t} else {\n\t\tthirdLarge = thirdModuloInteger;\n\t}\n\t_return_value = digitMontgomerytimesmodulomInvModB(firstLarge, secondLarge, thirdLarge, smallInverseInteger);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(4, _return_value);\n\treturn null;\n}\n\n\n/*\tParameter specification #(Integer) doesn't convert! */\n\nfunction primNormalize() {\n\tvar anInteger;\n\tvar _return_value;\n\n\tinterpreterProxy.success(interpreterProxy.isKindOfInteger(interpreterProxy.stackValue(0)));\n\tanInteger = interpreterProxy.stackValue(0);\n\t// missing DebugCode;\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (typeof anInteger === \"number\") {\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tinterpreterProxy.popthenPush(2, anInteger);\n\t\treturn null;\n\t}\n\t_return_value = normalize(anInteger);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(2, _return_value);\n\treturn null;\n}\n\nfunction primNormalizeNegative() {\n\tvar rcvr;\n\tvar _return_value;\n\n\t// missing DebugCode;\n\tinterpreterProxy.success(interpreterProxy.stackValue(0).sqClass === interpreterProxy.classLargeNegativeInteger());\n\trcvr = interpreterProxy.stackValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\t_return_value = normalizeNegative(rcvr);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(1, _return_value);\n\treturn null;\n}\n\nfunction primNormalizePositive() {\n\tvar rcvr;\n\tvar _return_value;\n\n\t// missing DebugCode;\n\tinterpreterProxy.success(interpreterProxy.stackValue(0).sqClass === interpreterProxy.classLargePositiveInteger());\n\trcvr = interpreterProxy.stackValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\t_return_value = normalizePositive(rcvr);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(1, _return_value);\n\treturn null;\n}\n\n\n/*\tNote: This is coded so that is can be run from Squeak. */\n\nfunction setInterpreter(anInterpreter) {\n\tvar ok;\n\n\tinterpreterProxy = anInterpreter;\n\tok = interpreterProxy.majorVersion() == VM_PROXY_MAJOR;\n\tif (ok === false) {\n\t\treturn false;\n\t}\n\tok = interpreterProxy.minorVersion() >= VM_PROXY_MINOR;\n\treturn ok;\n}\n\n\n/*\tArgument bytesOop must not be aSmallInteger! */\n\nfunction unsafeByteOfat(bytesOop, ix) {\n\tvar pointer;\n\n\treturn ((pointer = bytesOop.bytes))[ix - 1];\n}\n\n\nSqueak.registerExternalModule(\"LargeIntegers\", {\n\tprimDigitAddWith: primDigitAddWith,\n\tprimDigitBitShiftMagnitude: primDigitBitShiftMagnitude,\n\tprimGetModuleName: primGetModuleName,\n\tprimDigitBitLogicWithOp: primDigitBitLogicWithOp,\n\tprimCheckIfCModuleExists: primCheckIfCModuleExists,\n\tprimDigitCompare: primDigitCompare,\n\tprimDigitMultiplyNegative: primDigitMultiplyNegative,\n\tprimDigitBitShift: primDigitBitShift,\n\tprimNormalizePositive: primNormalizePositive,\n\tprimDigitSubtractWith: primDigitSubtractWith,\n\t_primDigitBitShift: _primDigitBitShift,\n\tprimDigitMultiplyWithNegative: primDigitMultiplyWithNegative,\n\tprimDigitSubtract: primDigitSubtract,\n\tprimDigitDivNegative: primDigitDivNegative,\n\tprimNormalizeNegative: primNormalizeNegative,\n\tprimDigitBitOr: primDigitBitOr,\n\tprimMontgomeryTimesModulo: primMontgomeryTimesModulo,\n\tprimDigitBitAnd: primDigitBitAnd,\n\tprimDigitDivWithNegative: primDigitDivWithNegative,\n\tsetInterpreter: setInterpreter,\n\tprimNormalize: primNormalize,\n\tprimDigitBitXor: primDigitBitXor,\n\tprimDigitCompareWith: primDigitCompareWith,\n\tprimDigitAdd: primDigitAdd,\n\tgetModuleName: getModuleName,\n\tprimAsLargeInteger: primAsLargeInteger,\n\tprimAnyBitFromTo: primAnyBitFromTo,\n});\n\n}); // end of module\n","/* Smalltalk from Squeak4.5 with VMMaker 4.13.6 translated as JS source on 3 November 2014 1:52:21 pm */\n/* Automatically generated by\n\tJSPluginCodeGenerator VMMakerJS-bf.15 uuid: fd4e10f2-3773-4e80-8bb5-c4b471a014e5\n   from\n\tMatrix2x3Plugin VMMaker-bf.353 uuid: 8ae25e7e-8d2c-451e-8277-598b30e9c002\n */\n\nmodule(\"users.bert.SqueakJS.plugins.Matrix2x3Plugin\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";\n\nvar VM_PROXY_MAJOR = 1;\nvar VM_PROXY_MINOR = 11;\n\n/*** Functions ***/\nfunction CLASSOF(obj) { return typeof obj === \"number\" ? interpreterProxy.classSmallInteger() : obj.sqClass }\nfunction SIZEOF(obj) { return obj.pointers ? obj.pointers.length : obj.words ? obj.words.length : obj.bytes ? obj.bytes.length : 0 }\nfunction BYTESIZEOF(obj) { return obj.bytes ? obj.bytes.length : obj.words ? obj.words.length * 4 : 0 }\nfunction DIV(a, b) { return Math.floor(a / b) | 0; }   // integer division\nfunction MOD(a, b) { return a - DIV(a, b) * b | 0; }   // signed modulus\nfunction SHL(a, b) { return b > 31 ? 0 : a << b; }     // fix JS shift\nfunction SHR(a, b) { return b > 31 ? 0 : a >>> b; }    // fix JS shift\nfunction SHIFT(a, b) { return b < 0 ? (b < -31 ? 0 : a >>> (0-b) ) : (b > 31 ? 0 : a << b); }\n\n/*** Variables ***/\nvar interpreterProxy = null;\nvar m23ArgX = 0;\nvar m23ArgY = 0;\nvar m23ResultX = 0;\nvar m23ResultY = 0;\nvar moduleName = \"Matrix2x3Plugin 3 November 2014 (e)\";\n\n\n\n/*\tNote: This is hardcoded so it can be run from Squeak.\n\tThe module name is used for validating a module *after*\n\tit is loaded to check if it does really contain the module\n\twe're thinking it contains. This is important! */\n\nfunction getModuleName() {\n\treturn moduleName;\n}\n\nfunction halt() {\n\t;\n}\n\n\n/*\tLoad the argument matrix */\n\nfunction loadArgumentMatrix(matrix) {\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!(interpreterProxy.isWords(matrix) && (SIZEOF(matrix) === 6))) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn null;\n\t}\n\treturn matrix.wordsAsFloat32Array();\n}\n\n\n/*\tLoad the argument point into m23ArgX and m23ArgY */\n\nfunction loadArgumentPoint(point) {\n\tvar isInt;\n\tvar oop;\n\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (CLASSOF(point) !== interpreterProxy.classPoint()) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\toop = interpreterProxy.fetchPointerofObject(0, point);\n\tisInt = typeof oop === \"number\";\n\tif (!(isInt || (oop.isFloat))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (isInt) {\n\t\tm23ArgX = oop;\n\t} else {\n\t\tm23ArgX = interpreterProxy.floatValueOf(oop);\n\t}\n\toop = interpreterProxy.fetchPointerofObject(1, point);\n\tisInt = typeof oop === \"number\";\n\tif (!(isInt || (oop.isFloat))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (isInt) {\n\t\tm23ArgY = oop;\n\t} else {\n\t\tm23ArgY = interpreterProxy.floatValueOf(oop);\n\t}\n}\n\n\n/*\tMultiply matrix m1 with m2 and store the result into m3. */\n\nfunction matrix2x3ComposeMatrixwithinto(m1, m2, m3) {\n\tvar a11;\n\tvar a12;\n\tvar a13;\n\tvar a21;\n\tvar a22;\n\tvar a23;\n\n\ta11 = (m1[0] * m2[0]) + (m1[1] * m2[3]);\n\ta12 = (m1[0] * m2[1]) + (m1[1] * m2[4]);\n\ta13 = ((m1[0] * m2[2]) + (m1[1] * m2[5])) + m1[2];\n\ta21 = (m1[3] * m2[0]) + (m1[4] * m2[3]);\n\ta22 = (m1[3] * m2[1]) + (m1[4] * m2[4]);\n\ta23 = ((m1[3] * m2[2]) + (m1[4] * m2[5])) + m1[5];\n\tm3[0] = a11;\n\tm3[1] = a12;\n\tm3[2] = a13;\n\tm3[3] = a21;\n\tm3[4] = a22;\n\tm3[5] = a23;\n}\n\n\n/*\tInvert the pre-loaded argument point by the given matrix */\n\nfunction matrix2x3InvertPoint(m) {\n\tvar det;\n\tvar detX;\n\tvar detY;\n\tvar x;\n\tvar y;\n\n\tx = m23ArgX - m[2];\n\ty = m23ArgY - m[5];\n\tdet = (m[0] * m[4]) - (m[1] * m[3]);\n\tif (det === 0.0) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tdet = 1.0 / det;\n\tdetX = (x * m[4]) - (m[1] * y);\n\tdetY = (m[0] * y) - (x * m[3]);\n\tm23ResultX = detX * det;\n\tm23ResultY = detY * det;\n}\n\n\n/*\tTransform the pre-loaded argument point by the given matrix */\n\nfunction matrix2x3TransformPoint(m) {\n\tm23ResultX = ((m23ArgX * m[0]) + (m23ArgY * m[1])) + m[2];\n\tm23ResultY = ((m23ArgX * m[3]) + (m23ArgY * m[4])) + m[5];\n}\n\nfunction okayIntValue(value) {\n\treturn (value >= -1073741824) && (m23ResultX <= 1073741823);\n}\n\nfunction primitiveComposeMatrix() {\n\tvar m1;\n\tvar m2;\n\tvar m3;\n\tvar result;\n\n\t;\n\tm3 = loadArgumentMatrix((result = interpreterProxy.stackObjectValue(0)));\n\tm2 = loadArgumentMatrix(interpreterProxy.stackObjectValue(1));\n\tm1 = loadArgumentMatrix(interpreterProxy.stackObjectValue(2));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tmatrix2x3ComposeMatrixwithinto(m1, m2, m3);\n\tinterpreterProxy.popthenPush(3, result);\n}\n\nfunction primitiveInvertPoint() {\n\tvar matrix;\n\n\tloadArgumentPoint(interpreterProxy.stackObjectValue(0));\n\tmatrix = loadArgumentMatrix(interpreterProxy.stackObjectValue(1));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tmatrix2x3InvertPoint(matrix);\n\tif (!interpreterProxy.failed()) {\n\t\troundAndStoreResultPoint(2);\n\t}\n}\n\nfunction primitiveInvertRectInto() {\n\tvar cornerX;\n\tvar cornerY;\n\tvar dstOop;\n\tvar matrix;\n\tvar maxX;\n\tvar maxY;\n\tvar minX;\n\tvar minY;\n\tvar originX;\n\tvar originY;\n\tvar srcOop;\n\n\tdstOop = interpreterProxy.stackObjectValue(0);\n\tsrcOop = interpreterProxy.stackObjectValue(1);\n\tmatrix = loadArgumentMatrix(interpreterProxy.stackObjectValue(2));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (CLASSOF(srcOop) !== CLASSOF(dstOop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!interpreterProxy.isPointers(srcOop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (SIZEOF(srcOop) !== 2) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tloadArgumentPoint(interpreterProxy.fetchPointerofObject(0, srcOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\toriginX = m23ArgX;\n\toriginY = m23ArgY;\n\tmatrix2x3InvertPoint(matrix);\n\tminX = (maxX = m23ResultX);\n\n\t/* Load bottom-right point */\n\n\tminY = (maxY = m23ResultY);\n\tloadArgumentPoint(interpreterProxy.fetchPointerofObject(1, srcOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tcornerX = m23ArgX;\n\tcornerY = m23ArgY;\n\tmatrix2x3InvertPoint(matrix);\n\tminX = Math.min(minX, m23ResultX);\n\tmaxX = Math.max(maxX, m23ResultX);\n\tminY = Math.min(minY, m23ResultY);\n\n\t/* Load top-right point */\n\n\tmaxY = Math.max(maxY, m23ResultY);\n\tm23ArgX = cornerX;\n\tm23ArgY = originY;\n\tmatrix2x3InvertPoint(matrix);\n\tminX = Math.min(minX, m23ResultX);\n\tmaxX = Math.max(maxX, m23ResultX);\n\tminY = Math.min(minY, m23ResultY);\n\n\t/* Load bottom-left point */\n\n\tmaxY = Math.max(maxY, m23ResultY);\n\tm23ArgX = originX;\n\tm23ArgY = cornerY;\n\tmatrix2x3InvertPoint(matrix);\n\tminX = Math.min(minX, m23ResultX);\n\tmaxX = Math.max(maxX, m23ResultX);\n\tminY = Math.min(minY, m23ResultY);\n\tmaxY = Math.max(maxY, m23ResultY);\n\tif (!interpreterProxy.failed()) {\n\t\tdstOop = roundAndStoreResultRectx0y0x1y1(dstOop, minX, minY, maxX, maxY);\n\t}\n\tif (!interpreterProxy.failed()) {\n\t\tinterpreterProxy.popthenPush(3, dstOop);\n\t}\n}\n\nfunction primitiveIsIdentity() {\n\tvar matrix;\n\n\tmatrix = loadArgumentMatrix(interpreterProxy.stackObjectValue(0));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(1);\n\tinterpreterProxy.pushBool((((((matrix[0] === 1.0) && (matrix[1] === 0.0)) && (matrix[2] === 0.0)) && (matrix[3] === 0.0)) && (matrix[4] === 1.0)) && (matrix[5] === 0.0));\n}\n\nfunction primitiveIsPureTranslation() {\n\tvar matrix;\n\n\tmatrix = loadArgumentMatrix(interpreterProxy.stackObjectValue(0));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(1);\n\tinterpreterProxy.pushBool((((matrix[0] === 1.0) && (matrix[1] === 0.0)) && (matrix[3] === 0.0)) && (matrix[4] === 1.0));\n}\n\nfunction primitiveTransformPoint() {\n\tvar matrix;\n\n\tloadArgumentPoint(interpreterProxy.stackObjectValue(0));\n\tmatrix = loadArgumentMatrix(interpreterProxy.stackObjectValue(1));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tmatrix2x3TransformPoint(matrix);\n\troundAndStoreResultPoint(2);\n}\n\nfunction primitiveTransformRectInto() {\n\tvar cornerX;\n\tvar cornerY;\n\tvar dstOop;\n\tvar matrix;\n\tvar maxX;\n\tvar maxY;\n\tvar minX;\n\tvar minY;\n\tvar originX;\n\tvar originY;\n\tvar srcOop;\n\n\tdstOop = interpreterProxy.stackObjectValue(0);\n\tsrcOop = interpreterProxy.stackObjectValue(1);\n\tmatrix = loadArgumentMatrix(interpreterProxy.stackObjectValue(2));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (CLASSOF(srcOop) !== CLASSOF(dstOop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!interpreterProxy.isPointers(srcOop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (SIZEOF(srcOop) !== 2) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tloadArgumentPoint(interpreterProxy.fetchPointerofObject(0, srcOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\toriginX = m23ArgX;\n\toriginY = m23ArgY;\n\tmatrix2x3TransformPoint(matrix);\n\tminX = (maxX = m23ResultX);\n\n\t/* Load bottom-right point */\n\n\tminY = (maxY = m23ResultY);\n\tloadArgumentPoint(interpreterProxy.fetchPointerofObject(1, srcOop));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tcornerX = m23ArgX;\n\tcornerY = m23ArgY;\n\tmatrix2x3TransformPoint(matrix);\n\tminX = Math.min(minX, m23ResultX);\n\tmaxX = Math.max(maxX, m23ResultX);\n\tminY = Math.min(minY, m23ResultY);\n\n\t/* Load top-right point */\n\n\tmaxY = Math.max(maxY, m23ResultY);\n\tm23ArgX = cornerX;\n\tm23ArgY = originY;\n\tmatrix2x3TransformPoint(matrix);\n\tminX = Math.min(minX, m23ResultX);\n\tmaxX = Math.max(maxX, m23ResultX);\n\tminY = Math.min(minY, m23ResultY);\n\n\t/* Load bottom-left point */\n\n\tmaxY = Math.max(maxY, m23ResultY);\n\tm23ArgX = originX;\n\tm23ArgY = cornerY;\n\tmatrix2x3TransformPoint(matrix);\n\tminX = Math.min(minX, m23ResultX);\n\tmaxX = Math.max(maxX, m23ResultX);\n\tminY = Math.min(minY, m23ResultY);\n\tmaxY = Math.max(maxY, m23ResultY);\n\tdstOop = roundAndStoreResultRectx0y0x1y1(dstOop, minX, minY, maxX, maxY);\n\tif (!interpreterProxy.failed()) {\n\t\tinterpreterProxy.popthenPush(3, dstOop);\n\t}\n}\n\n\n/*\tStore the result of a previous operation.\n\tFail if we cannot represent the result as SmallInteger */\n\nfunction roundAndStoreResultPoint(nItemsToPop) {\n\tm23ResultX += 0.5;\n\tm23ResultY += 0.5;\n\tif (!okayIntValue(m23ResultX)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!okayIntValue(m23ResultY)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tinterpreterProxy.popthenPush(nItemsToPop, interpreterProxy.makePointwithxValueyValue((m23ResultX|0), (m23ResultY|0)));\n}\n\n\n/*\tCheck, round and store the result of a rectangle operation */\n\nfunction roundAndStoreResultRectx0y0x1y1(dstOop, x0, y0, x1, y1) {\n\tvar cornerOop;\n\tvar maxX;\n\tvar maxY;\n\tvar minX;\n\tvar minY;\n\tvar originOop;\n\tvar rectOop;\n\n\tminX = x0 + 0.5;\n\tif (!okayIntValue(minX)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tmaxX = x1 + 0.5;\n\tif (!okayIntValue(maxX)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tminY = y0 + 0.5;\n\tif (!okayIntValue(minY)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tmaxY = y1 + 0.5;\n\tif (!okayIntValue(maxY)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tinterpreterProxy.pushRemappableOop(dstOop);\n\toriginOop = interpreterProxy.makePointwithxValueyValue((minX|0), (minY|0));\n\tinterpreterProxy.pushRemappableOop(originOop);\n\tcornerOop = interpreterProxy.makePointwithxValueyValue((maxX|0), (maxY|0));\n\toriginOop = interpreterProxy.popRemappableOop();\n\trectOop = interpreterProxy.popRemappableOop();\n\tinterpreterProxy.storePointerofObjectwithValue(0, rectOop, originOop);\n\tinterpreterProxy.storePointerofObjectwithValue(1, rectOop, cornerOop);\n\treturn rectOop;\n}\n\n\n/*\tNote: This is coded so that is can be run from Squeak. */\n\nfunction setInterpreter(anInterpreter) {\n\tvar ok;\n\n\tinterpreterProxy = anInterpreter;\n\tok = interpreterProxy.majorVersion() == VM_PROXY_MAJOR;\n\tif (ok === false) {\n\t\treturn false;\n\t}\n\tok = interpreterProxy.minorVersion() >= VM_PROXY_MINOR;\n\treturn ok;\n}\n\n\nSqueak.registerExternalModule(\"Matrix2x3Plugin\", {\n\tprimitiveInvertPoint: primitiveInvertPoint,\n\tprimitiveInvertRectInto: primitiveInvertRectInto,\n\tprimitiveIsIdentity: primitiveIsIdentity,\n\tprimitiveComposeMatrix: primitiveComposeMatrix,\n\tsetInterpreter: setInterpreter,\n\tprimitiveTransformRectInto: primitiveTransformRectInto,\n\tprimitiveIsPureTranslation: primitiveIsPureTranslation,\n\tgetModuleName: getModuleName,\n\tprimitiveTransformPoint: primitiveTransformPoint,\n});\n\n}); // end of module\n","/* Smalltalk from Squeak4.5 with VMMaker 4.13.6 translated as JS source on 3 November 2014 1:52:23 pm */\n/* Automatically generated by\n\tJSPluginCodeGenerator VMMakerJS-bf.15 uuid: fd4e10f2-3773-4e80-8bb5-c4b471a014e5\n   from\n\tMiscPrimitivePlugin VMMaker-bf.353 uuid: 8ae25e7e-8d2c-451e-8277-598b30e9c002\n */\n\nmodule(\"users.bert.SqueakJS.plugins.MiscPrimitivePlugin\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";\n\nvar VM_PROXY_MAJOR = 1;\nvar VM_PROXY_MINOR = 11;\n\n/*** Functions ***/\nfunction CLASSOF(obj) { return typeof obj === \"number\" ? interpreterProxy.classSmallInteger() : obj.sqClass }\nfunction SIZEOF(obj) { return obj.pointers ? obj.pointers.length : obj.words ? obj.words.length : obj.bytes ? obj.bytes.length : 0 }\nfunction BYTESIZEOF(obj) { return obj.bytes ? obj.bytes.length : obj.words ? obj.words.length * 4 : 0 }\nfunction DIV(a, b) { return Math.floor(a / b) | 0; }   // integer division\nfunction MOD(a, b) { return a - DIV(a, b) * b | 0; }   // signed modulus\nfunction SHL(a, b) { return b > 31 ? 0 : a << b; }     // fix JS shift\nfunction SHR(a, b) { return b > 31 ? 0 : a >>> b; }    // fix JS shift\nfunction SHIFT(a, b) { return b < 0 ? (b < -31 ? 0 : a >>> (0-b) ) : (b > 31 ? 0 : a << b); }\n\n/*** Variables ***/\nvar interpreterProxy = null;\nvar moduleName = \"MiscPrimitivePlugin 3 November 2014 (e)\";\n\n\n\n/*\tCopy the integer anInt into byteArray ba at index i, and return the next index */\n\nfunction encodeBytesOfinat(anInt, ba, i) {\n\tvar j;\n\n\tfor (j = 0; j <= 3; j++) {\n\t\tba[(i + j) - 1] = ((SHR(anInt, ((3 - j) * 8))) & 255);\n\t}\n\treturn i + 4;\n}\n\n\n/*\tEncode the integer anInt in byteArray ba at index i, and return the next index.\n\tThe encoding is as follows...\n\t\t0-223\t0-223\n\t\t224-254\t(0-30)*256 + next byte (0-7935)\n\t\t255\t\tnext 4 bytes */\n\nfunction encodeIntinat(anInt, ba, i) {\n\tif (anInt <= 223) {\n\t\tba[i - 1] = anInt;\n\t\treturn i + 1;\n\t}\n\tif (anInt <= 7935) {\n\t\tba[i - 1] = ((anInt >> 8) + 224);\n\t\tba[i] = (MOD(anInt, 256));\n\t\treturn i + 2;\n\t}\n\tba[i - 1] = 255;\n\treturn encodeBytesOfinat(anInt, ba, i + 1);\n}\n\n\n/*\tNote: This is coded so that plugins can be run from Squeak. */\n\nfunction getInterpreter() {\n\treturn interpreterProxy;\n}\n\n\n/*\tNote: This is hardcoded so it can be run from Squeak.\n\tThe module name is used for validating a module *after*\n\tit is loaded to check if it does really contain the module\n\twe're thinking it contains. This is important! */\n\nfunction getModuleName() {\n\treturn moduleName;\n}\n\nfunction halt() {\n\t;\n}\n\nfunction msg(s) {\n\tconsole.log(moduleName + \": \" + s);\n}\n\n\n/*\tReturn 1, 2 or 3, if string1 is <, =, or > string2, with the collating order of characters given by the order array. */\n\nfunction primitiveCompareString() {\n\tvar rcvr;\n\tvar string1;\n\tvar string2;\n\tvar order;\n\tvar c1;\n\tvar c2;\n\tvar i;\n\tvar len1;\n\tvar len2;\n\n\trcvr = interpreterProxy.stackValue(3);\n\tstring1 = interpreterProxy.stackBytes(2);\n\tstring2 = interpreterProxy.stackBytes(1);\n\torder = interpreterProxy.stackBytes(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlen1 = string1.length;\n\tlen2 = string2.length;\n\tfor (i = 1; i <= Math.min(len1, len2); i++) {\n\t\tc1 = order[string1[i - 1]];\n\t\tc2 = order[string2[i - 1]];\n\t\tif (c1 !== c2) {\n\t\t\tif (c1 < c2) {\n\t\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tinterpreterProxy.popthenPush(4, 1);\n\t\t\t\treturn null;\n\t\t\t} else {\n\t\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tinterpreterProxy.popthenPush(4, 3);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t}\n\tif (len1 === len2) {\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tinterpreterProxy.popthenPush(4, 2);\n\t\treturn null;\n\t}\n\tif (len1 < len2) {\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tinterpreterProxy.popthenPush(4, 1);\n\t\treturn null;\n\t} else {\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tinterpreterProxy.popthenPush(4, 3);\n\t\treturn null;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(3);\n}\n\n\n/*\tStore a run-coded compression of the receiver into the byteArray ba,\n\tand return the last index stored into. ba is assumed to be large enough.\n\tThe encoding is as follows...\n\t\tS {N D}*.\n\t\tS is the size of the original bitmap, followed by run-coded pairs.\n\t\tN is a run-length * 4 + data code.\n\t\tD, the data, depends on the data code...\n\t\t\t0\tskip N words, D is absent\n\t\t\t1\tN words with all 4 bytes = D (1 byte)\n\t\t\t2\tN words all = D (4 bytes)\n\t\t\t3\tN words follow in D (4N bytes)\n\t\tS and N are encoded as follows...\n\t\t\t0-223\t0-223\n\t\t\t224-254\t(0-30)*256 + next byte (0-7935)\n\t\t\t255\t\tnext 4 bytes */\n\nfunction primitiveCompressToByteArray() {\n\tvar rcvr;\n\tvar bm;\n\tvar ba;\n\tvar eqBytes;\n\tvar i;\n\tvar j;\n\tvar k;\n\tvar lowByte;\n\tvar m;\n\tvar size;\n\tvar word;\n\n\trcvr = interpreterProxy.stackValue(2);\n\tbm = interpreterProxy.stackInt32Array(1);\n\tba = interpreterProxy.stackBytes(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tsize = bm.length;\n\ti = encodeIntinat(size, ba, 1);\n\tk = 1;\n\twhile (k <= size) {\n\t\tword = bm[k - 1];\n\t\tlowByte = word & 255;\n\t\teqBytes = (((word >>> 8) & 255) === lowByte) && ((((word >>> 16) & 255) === lowByte) && (((word >>> 24) & 255) === lowByte));\n\t\tj = k;\n\t\twhile ((j < size) && (word === bm[j])) {\n\t\t\t++j;\n\t\t}\n\t\tif (j > k) {\n\n\t\t\t/* We have two or more = words, ending at j */\n\n\t\t\tif (eqBytes) {\n\n\t\t\t\t/* Actually words of = bytes */\n\n\t\t\t\ti = encodeIntinat((((j - k) + 1) * 4) + 1, ba, i);\n\t\t\t\tba[i - 1] = lowByte;\n\t\t\t\t++i;\n\t\t\t} else {\n\t\t\t\ti = encodeIntinat((((j - k) + 1) * 4) + 2, ba, i);\n\t\t\t\ti = encodeBytesOfinat(word, ba, i);\n\t\t\t}\n\t\t\tk = j + 1;\n\t\t} else {\n\n\t\t\t/* Check for word of 4 = bytes */\n\n\t\t\tif (eqBytes) {\n\n\t\t\t\t/* Note 1 word of 4 = bytes */\n\n\t\t\t\ti = encodeIntinat((1 * 4) + 1, ba, i);\n\t\t\t\tba[i - 1] = lowByte;\n\t\t\t\t++i;\n\t\t\t\t++k;\n\t\t\t} else {\n\n\t\t\t\t/* Finally, check for junk */\n\n\t\t\t\twhile ((j < size) && (bm[j - 1] !== bm[j])) {\n\t\t\t\t\t++j;\n\t\t\t\t}\n\t\t\t\tif (j === size) {\n\t\t\t\t\t++j;\n\t\t\t\t}\n\t\t\t\ti = encodeIntinat(((j - k) * 4) + 3, ba, i);\n\t\t\t\tfor (m = k; m <= (j - 1); m++) {\n\t\t\t\t\ti = encodeBytesOfinat(bm[m - 1], ba, i);\n\t\t\t\t}\n\t\t\t\tk = j;\n\t\t\t}\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(3, i - 1);\n\treturn null;\n}\n\n\n/*\tCopy the contents of the given array of signed 8-bit samples into the given array of 16-bit signed samples. */\n\nfunction primitiveConvert8BitSigned() {\n\tvar rcvr;\n\tvar aByteArray;\n\tvar aSoundBuffer;\n\tvar i;\n\tvar n;\n\tvar s;\n\n\trcvr = interpreterProxy.stackValue(2);\n\taByteArray = interpreterProxy.stackBytes(1);\n\taSoundBuffer = interpreterProxy.stackUint16Array(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tn = aByteArray.length;\n\tfor (i = 1; i <= n; i++) {\n\t\ts = aByteArray[i - 1];\n\t\tif (s > 127) {\n\t\t\taSoundBuffer[i - 1] = ((s - 256) << 8);\n\t\t} else {\n\t\t\taSoundBuffer[i - 1] = (s << 8);\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(2);\n}\n\n\n/*\tDecompress the body of a byteArray encoded by compressToByteArray (qv)...\n\tThe format is simply a sequence of run-coded pairs, {N D}*.\n\t\tN is a run-length * 4 + data code.\n\t\tD, the data, depends on the data code...\n\t\t\t0\tskip N words, D is absent\n\t\t\t\t(could be used to skip from one raster line to the next)\n\t\t\t1\tN words with all 4 bytes = D (1 byte)\n\t\t\t2\tN words all = D (4 bytes)\n\t\t\t3\tN words follow in D (4N bytes)\n\t\tS and N are encoded as follows (see decodeIntFrom:)...\n\t\t\t0-223\t0-223\n\t\t\t224-254\t(0-30)*256 + next byte (0-7935)\n\t\t\t255\t\tnext 4 bytes */\n/*\tNOTE:  If fed with garbage, this routine could read past the end of ba, but it should fail before writing past the ned of bm. */\n\nfunction primitiveDecompressFromByteArray() {\n\tvar rcvr;\n\tvar bm;\n\tvar ba;\n\tvar index;\n\tvar anInt;\n\tvar code;\n\tvar data;\n\tvar end;\n\tvar i;\n\tvar j;\n\tvar k;\n\tvar m;\n\tvar n;\n\tvar pastEnd;\n\n\trcvr = interpreterProxy.stackValue(3);\n\tbm = interpreterProxy.stackInt32Array(2);\n\tba = interpreterProxy.stackBytes(1);\n\tindex = interpreterProxy.stackIntegerValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\n\t/* byteArray read index */\n\n\ti = index;\n\tend = ba.length;\n\n\t/* bitmap write index */\n\n\tk = 1;\n\tpastEnd = bm.length + 1;\n\twhile (i <= end) {\n\n\t\t/* Decode next run start N */\n\n\t\tanInt = ba[i - 1];\n\t\t++i;\n\t\tif (!(anInt <= 223)) {\n\t\t\tif (anInt <= 254) {\n\t\t\t\tanInt = ((anInt - 224) * 256) + ba[i - 1];\n\t\t\t\t++i;\n\t\t\t} else {\n\t\t\t\tanInt = 0;\n\t\t\t\tfor (j = 1; j <= 4; j++) {\n\t\t\t\t\tanInt = (anInt << 8) + ba[i - 1];\n\t\t\t\t\t++i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tn = anInt >>> 2;\n\t\tif ((k + n) > pastEnd) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn null;\n\t\t}\n\t\tcode = anInt & 3;\n\t\tif (code === 0) {\n\n\t\t\t/* skip */\n\n\t\t\tnull;\n\t\t}\n\t\tif (code === 1) {\n\n\t\t\t/* n consecutive words of 4 bytes = the following byte */\n\n\t\t\tdata = ba[i - 1];\n\t\t\t++i;\n\t\t\tdata = data | (data << 8);\n\t\t\tdata = data | (data << 16);\n\t\t\tfor (j = 1; j <= n; j++) {\n\t\t\t\tbm[k - 1] = data;\n\t\t\t\t++k;\n\t\t\t}\n\t\t}\n\t\tif (code === 2) {\n\n\t\t\t/* n consecutive words = 4 following bytes */\n\n\t\t\tdata = 0;\n\t\t\tfor (j = 1; j <= 4; j++) {\n\t\t\t\tdata = (data << 8) | ba[i - 1];\n\t\t\t\t++i;\n\t\t\t}\n\t\t\tfor (j = 1; j <= n; j++) {\n\t\t\t\tbm[k - 1] = data;\n\t\t\t\t++k;\n\t\t\t}\n\t\t}\n\t\tif (code === 3) {\n\n\t\t\t/* n consecutive words from the data... */\n\n\t\t\tfor (m = 1; m <= n; m++) {\n\t\t\t\tdata = 0;\n\t\t\t\tfor (j = 1; j <= 4; j++) {\n\t\t\t\t\tdata = (data << 8) | ba[i - 1];\n\t\t\t\t\t++i;\n\t\t\t\t}\n\t\t\t\tbm[k - 1] = data;\n\t\t\t\t++k;\n\t\t\t}\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(3);\n}\n\nfunction primitiveFindFirstInString() {\n\tvar rcvr;\n\tvar aString;\n\tvar inclusionMap;\n\tvar start;\n\tvar i;\n\tvar stringSize;\n\n\trcvr = interpreterProxy.stackValue(3);\n\taString = interpreterProxy.stackBytes(2);\n\tinclusionMap = interpreterProxy.stackBytes(1);\n\tstart = interpreterProxy.stackIntegerValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (inclusionMap.length !== 256) {\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tinterpreterProxy.popthenPush(4, 0);\n\t\treturn null;\n\t}\n\ti = start;\n\tstringSize = aString.length;\n\twhile ((i <= stringSize) && (inclusionMap[aString[i - 1]] === 0)) {\n\t\t++i;\n\t}\n\tif (i > stringSize) {\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tinterpreterProxy.popthenPush(4, 0);\n\t\treturn null;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(4, i);\n\treturn null;\n}\n\n\n/*\tAnswer the index in the string body at which the substring key first occurs, at or beyond start.  The match is determined using matchTable, which can be used to effect, eg, case-insensitive matches.  If no match is found, zero will be returned.\n\n\tThe algorithm below is not optimum -- it is intended to be translated to C which will go so fast that it wont matter. */\n\nfunction primitiveFindSubstring() {\n\tvar rcvr;\n\tvar key;\n\tvar body;\n\tvar start;\n\tvar matchTable;\n\tvar index;\n\tvar startIndex;\n\n\trcvr = interpreterProxy.stackValue(4);\n\tkey = interpreterProxy.stackBytes(3);\n\tbody = interpreterProxy.stackBytes(2);\n\tstart = interpreterProxy.stackIntegerValue(1);\n\tmatchTable = interpreterProxy.stackBytes(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (key.length === 0) {\n\t\tif (interpreterProxy.failed()) {\n\t\t\treturn null;\n\t\t}\n\t\tinterpreterProxy.popthenPush(5, 0);\n\t\treturn null;\n\t}\n\tfor (startIndex = start; startIndex <= ((body.length - key.length) + 1); startIndex++) {\n\t\tindex = 1;\n\t\twhile (matchTable[body[((startIndex + index) - 1) - 1]] === matchTable[key[index - 1]]) {\n\t\t\tif (index === key.length) {\n\t\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tinterpreterProxy.popthenPush(5, startIndex);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t++index;\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(5, 0);\n\treturn null;\n}\n\nfunction primitiveIndexOfAsciiInString() {\n\tvar rcvr;\n\tvar anInteger;\n\tvar aString;\n\tvar start;\n\tvar pos;\n\tvar stringSize;\n\n\trcvr = interpreterProxy.stackValue(3);\n\tanInteger = interpreterProxy.stackIntegerValue(2);\n\taString = interpreterProxy.stackBytes(1);\n\tstart = interpreterProxy.stackIntegerValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tstringSize = aString.length;\n\tfor (pos = start; pos <= stringSize; pos++) {\n\t\tif (aString[pos - 1] === anInteger) {\n\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tinterpreterProxy.popthenPush(4, pos);\n\t\t\treturn null;\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(4, 0);\n\treturn null;\n}\n\n\n/*\tAnswer the hash of a byte-indexed collection,\n\tusing speciesHash as the initial value.\n\tSee SmallInteger>>hashMultiply.\n\n\tThe primitive should be renamed at a\n\tsuitable point in the future */\n\nfunction primitiveStringHash() {\n\tvar rcvr;\n\tvar aByteArray;\n\tvar speciesHash;\n\tvar byteArraySize;\n\tvar hash;\n\tvar low;\n\tvar pos;\n\n\trcvr = interpreterProxy.stackValue(2);\n\taByteArray = interpreterProxy.stackBytes(1);\n\tspeciesHash = interpreterProxy.stackIntegerValue(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tbyteArraySize = aByteArray.length;\n\thash = speciesHash & 268435455;\n\tfor (pos = 1; pos <= byteArraySize; pos++) {\n\n\t\t/* Begin hashMultiply */\n\n\t\thash += aByteArray[pos - 1];\n\t\tlow = hash & 16383;\n\t\thash = ((9741 * low) + ((((9741 * (hash >>> 14)) + (101 * low)) & 16383) * 16384)) & 268435455;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.popthenPush(3, hash);\n\treturn null;\n}\n\n\n/*\ttranslate the characters in the string by the given table, in place */\n\nfunction primitiveTranslateStringWithTable() {\n\tvar rcvr;\n\tvar aString;\n\tvar start;\n\tvar stop;\n\tvar table;\n\tvar i;\n\n\trcvr = interpreterProxy.stackValue(4);\n\taString = interpreterProxy.stackBytes(3);\n\tstart = interpreterProxy.stackIntegerValue(2);\n\tstop = interpreterProxy.stackIntegerValue(1);\n\ttable = interpreterProxy.stackBytes(0);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tfor (i = start; i <= stop; i++) {\n\t\taString[i - 1] = table[aString[i - 1]];\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.pop(4);\n}\n\n\n/*\tNote: This is coded so that is can be run from Squeak. */\n\nfunction setInterpreter(anInterpreter) {\n\tvar ok;\n\n\tinterpreterProxy = anInterpreter;\n\tok = interpreterProxy.majorVersion() == VM_PROXY_MAJOR;\n\tif (ok === false) {\n\t\treturn false;\n\t}\n\tok = interpreterProxy.minorVersion() >= VM_PROXY_MINOR;\n\treturn ok;\n}\n\n\nSqueak.registerExternalModule(\"MiscPrimitivePlugin\", {\n\tprimitiveConvert8BitSigned: primitiveConvert8BitSigned,\n\tprimitiveCompareString: primitiveCompareString,\n\tprimitiveTranslateStringWithTable: primitiveTranslateStringWithTable,\n\tprimitiveStringHash: primitiveStringHash,\n\tprimitiveCompressToByteArray: primitiveCompressToByteArray,\n\tprimitiveFindSubstring: primitiveFindSubstring,\n\tprimitiveIndexOfAsciiInString: primitiveIndexOfAsciiInString,\n\tsetInterpreter: setInterpreter,\n\tprimitiveDecompressFromByteArray: primitiveDecompressFromByteArray,\n\tgetModuleName: getModuleName,\n\tprimitiveFindFirstInString: primitiveFindFirstInString,\n});\n\n}); // end of module\n","/* Smalltalk from Squeak4.5 with VMMaker 4.13.6 translated as JS source on 3 November 2014 1:52:23 pm */\n/* Automatically generated by\n\tJSPluginCodeGenerator VMMakerJS-bf.15 uuid: fd4e10f2-3773-4e80-8bb5-c4b471a014e5\n   from\n\tScratchPlugin VMMaker-bf.353 uuid: 8ae25e7e-8d2c-451e-8277-598b30e9c002\n */\n\nmodule(\"users.bert.SqueakJS.plugins.ScratchPlugin\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";\n\nvar VM_PROXY_MAJOR = 1;\nvar VM_PROXY_MINOR = 11;\n\n/*** Functions ***/\nfunction CLASSOF(obj) { return typeof obj === \"number\" ? interpreterProxy.classSmallInteger() : obj.sqClass }\nfunction SIZEOF(obj) { return obj.pointers ? obj.pointers.length : obj.words ? obj.words.length : obj.bytes ? obj.bytes.length : 0 }\nfunction BYTESIZEOF(obj) { return obj.bytes ? obj.bytes.length : obj.words ? obj.words.length * 4 : 0 }\nfunction DIV(a, b) { return Math.floor(a / b) | 0; }   // integer division\nfunction MOD(a, b) { return a - DIV(a, b) * b | 0; }   // signed modulus\nfunction SHL(a, b) { return b > 31 ? 0 : a << b; }     // fix JS shift\nfunction SHR(a, b) { return b > 31 ? 0 : a >>> b; }    // fix JS shift\nfunction SHIFT(a, b) { return b < 0 ? (b < -31 ? 0 : a >>> (0-b) ) : (b > 31 ? 0 : a << b); }\n\n/*** Variables ***/\nvar interpreterProxy = null;\nvar moduleName = \"ScratchPlugin 3 November 2014 (e)\";\n\n\nfunction bitmapatputHsv(bitmap, i, hue, saturation, brightness) {\n\tvar hF;\n\tvar hI;\n\tvar outPix;\n\tvar p;\n\tvar q;\n\tvar t;\n\tvar v;\n\n\n\t/* integer part of hue (0..5) */\n\n\thI = DIV(hue, 60);\n\n\t/* fractional part ofhue */\n\n\thF = MOD(hue, 60);\n\tp = (1000 - saturation) * brightness;\n\tq = (1000 - (DIV((saturation * hF), 60))) * brightness;\n\tt = (1000 - (DIV((saturation * (60 - hF)), 60))) * brightness;\n\tv = DIV((brightness * 1000), 3922);\n\tp = DIV(p, 3922);\n\tq = DIV(q, 3922);\n\tt = DIV(t, 3922);\n\tif (0 === hI) {\n\t\toutPix = ((v << 16) + (t << 8)) + p;\n\t}\n\tif (1 === hI) {\n\t\toutPix = ((q << 16) + (v << 8)) + p;\n\t}\n\tif (2 === hI) {\n\t\toutPix = ((p << 16) + (v << 8)) + t;\n\t}\n\tif (3 === hI) {\n\t\toutPix = ((p << 16) + (q << 8)) + v;\n\t}\n\tif (4 === hI) {\n\t\toutPix = ((t << 16) + (p << 8)) + v;\n\t}\n\tif (5 === hI) {\n\t\toutPix = ((v << 16) + (p << 8)) + q;\n\t}\n\tif (outPix === 0) {\n\t\toutPix = 1;\n\t}\n\tbitmap[i] = outPix;\n\treturn 0;\n}\n\n\n/*\tReturn an unsigned int pointer to the first indexable word of oop, which must be a words object. */\n\nfunction checkedFloatPtrOf(oop) {\n\tinterpreterProxy.success(interpreterProxy.isWordsOrBytes(oop));\n\tif (interpreterProxy.failed()) {\n\t\treturn 0;\n\t}\n\treturn oop.wordsAsFloat64Array();\n}\n\n\n/*\tReturn an unsigned int pointer to the first indexable word of oop, which must be a words object. */\n\nfunction checkedUnsignedIntPtrOf(oop) {\n\tinterpreterProxy.success(interpreterProxy.isWords(oop));\n\tif (interpreterProxy.failed()) {\n\t\treturn 0;\n\t}\n\treturn oop.words;\n}\n\n\n/*\tNote: This is hardcoded so it can be run from Squeak.\n\tThe module name is used for validating a module *after*\n\tit is loaded to check if it does really contain the module\n\twe're thinking it contains. This is important! */\n\nfunction getModuleName() {\n\treturn moduleName;\n}\n\nfunction halt() {\n\t;\n}\n\n\n/*\tAnswer the hue, an angle between 0 and 360. */\n\nfunction hueFromRGBminmax(r, g, b, min, max) {\n\tvar result;\n\tvar span;\n\n\tspan = max - min;\n\tif (span === 0) {\n\t\treturn 0;\n\t}\n\tif (r === max) {\n\t\tresult = DIV((60 * (g - b)), span);\n\t} else {\n\t\tif (g === max) {\n\t\t\tresult = 120 + (DIV((60 * (b - r)), span));\n\t\t} else {\n\t\t\tresult = 240 + (DIV((60 * (r - g)), span));\n\t\t}\n\t}\n\tif (result < 0) {\n\t\treturn result + 360;\n\t}\n\treturn result;\n}\n\n\n/*\tAnswer the interpolated pixel value between the given two pixel values. If either pixel is zero (transparent) answer the other pixel. If both pixels are  transparent, answer transparent. The fraction is between 0 and 1023, out of a total range of 1024. */\n\nfunction interpolateandfrac(pix1, pix2, frac2) {\n\tvar b;\n\tvar frac1;\n\tvar g;\n\tvar r;\n\tvar result;\n\n\tif (pix1 === 0) {\n\t\treturn pix2;\n\t}\n\tif (pix2 === 0) {\n\t\treturn pix1;\n\t}\n\tfrac1 = 1024 - frac2;\n\tr = ((frac1 * ((pix1 >>> 16) & 255)) + (frac2 * ((pix2 >>> 16) & 255))) >> 10;\n\tg = ((frac1 * ((pix1 >>> 8) & 255)) + (frac2 * ((pix2 >>> 8) & 255))) >> 10;\n\tb = ((frac1 * (pix1 & 255)) + (frac2 * (pix2 & 255))) >> 10;\n\tresult = ((r << 16) + (g << 8)) + b;\n\tif (result === 0) {\n\t\tresult = 1;\n\t}\n\treturn result;\n}\n\n\n/*\tAnswer the interpolated pixel value from the given bitmap at the given point. The x and y coordinates are fixed-point integers with 10 bits of fraction (i.e. they were multiplied by 1024, then truncated). If the given point is right on an edge, answer the nearest edge pixel value. If it is entirely outside of the image, answer 0 (transparent). */\n\nfunction interpolatedFromxywidthheight(bitmap, xFixed, yFixed, w, h) {\n\tvar bottomPix;\n\tvar index;\n\tvar topPix;\n\tvar x;\n\tvar xFrac;\n\tvar y;\n\tvar yFrac;\n\n\tx = xFixed >>> 10;\n\tif ((x < -1) || (x >= w)) {\n\t\treturn 0;\n\t}\n\ty = yFixed >>> 10;\n\tif ((y < -1) || (y >= h)) {\n\t\treturn 0;\n\t}\n\txFrac = xFixed & 1023;\n\tif (x === -1) {\n\t\tx = 0;\n\t\txFrac = 0;\n\t}\n\tif (x === (w - 1)) {\n\t\txFrac = 0;\n\t}\n\tyFrac = yFixed & 1023;\n\tif (y === -1) {\n\t\ty = 0;\n\t\tyFrac = 0;\n\t}\n\tif (y === (h - 1)) {\n\t\tyFrac = 0;\n\t}\n\n\t/* for squeak: + 1 */\n\n\tindex = (y * w) + x;\n\ttopPix = bitmap[index] & 16777215;\n\tif (xFrac > 0) {\n\t\ttopPix = interpolateandfrac(topPix, bitmap[index + 1] & 16777215, xFrac);\n\t}\n\tif (yFrac === 0) {\n\t\treturn topPix;\n\t}\n\n\t/* for squeak: + 1 */\n\n\tindex = ((y + 1) * w) + x;\n\tbottomPix = bitmap[index] & 16777215;\n\tif (xFrac > 0) {\n\t\tbottomPix = interpolateandfrac(bottomPix, bitmap[index + 1] & 16777215, xFrac);\n\t}\n\treturn interpolateandfrac(topPix, bottomPix, yFrac);\n}\n\nfunction primitiveBlur() {\n\tvar bTotal;\n\tvar dX;\n\tvar dY;\n\tvar gTotal;\n\tvar height;\n\tvar in_;\n\tvar inOop;\n\tvar n;\n\tvar out;\n\tvar outOop;\n\tvar outPix;\n\tvar pix;\n\tvar rTotal;\n\tvar sz;\n\tvar width;\n\tvar x;\n\tvar y;\n\n\tinOop = interpreterProxy.stackValue(2);\n\toutOop = interpreterProxy.stackValue(1);\n\twidth = interpreterProxy.stackIntegerValue(0);\n\tin_ = checkedUnsignedIntPtrOf(inOop);\n\tout = checkedUnsignedIntPtrOf(outOop);\n\tsz = SIZEOF(inOop);\n\tinterpreterProxy.success(SIZEOF(outOop) === sz);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\theight = DIV(sz, width);\n\tfor (y = 1; y <= (height - 2); y++) {\n\t\tfor (x = 1; x <= (width - 2); x++) {\n\t\t\tn = (rTotal = (gTotal = (bTotal = 0)));\n\t\t\tfor (dY = -1; dY <= 1; dY++) {\n\t\t\t\tfor (dX = -1; dX <= 1; dX++) {\n\n\t\t\t\t\t/* add 1 when testing in Squeak */\n\n\t\t\t\t\tpix = in_[((y + dY) * width) + (x + dX)] & 16777215;\n\t\t\t\t\tif (pix !== 0) {\n\n\t\t\t\t\t\t/* skip transparent pixels */\n\n\t\t\t\t\t\trTotal += (pix >>> 16) & 255;\n\t\t\t\t\t\tgTotal += (pix >>> 8) & 255;\n\t\t\t\t\t\tbTotal += pix & 255;\n\t\t\t\t\t\t++n;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (n === 0) {\n\t\t\t\toutPix = 0;\n\t\t\t} else {\n\t\t\t\toutPix = (((DIV(rTotal, n)) << 16) + ((DIV(gTotal, n)) << 8)) + (DIV(bTotal, n));\n\t\t\t}\n\t\t\tout[(y * width) + x] = outPix;\n\t\t}\n\t}\n\tinterpreterProxy.pop(3);\n\treturn 0;\n}\n\nfunction primitiveBrightnessShift() {\n\tvar b;\n\tvar brightness;\n\tvar g;\n\tvar hue;\n\tvar i;\n\tvar in_;\n\tvar inOop;\n\tvar max;\n\tvar min;\n\tvar out;\n\tvar outOop;\n\tvar pix;\n\tvar r;\n\tvar saturation;\n\tvar shift;\n\tvar sz;\n\n\tinOop = interpreterProxy.stackValue(2);\n\toutOop = interpreterProxy.stackValue(1);\n\tshift = interpreterProxy.stackIntegerValue(0);\n\tin_ = checkedUnsignedIntPtrOf(inOop);\n\tsz = SIZEOF(inOop);\n\tout = checkedUnsignedIntPtrOf(outOop);\n\tinterpreterProxy.success(SIZEOF(outOop) === sz);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tfor (i = 0; i <= (sz - 1); i++) {\n\t\tpix = in_[i] & 16777215;\n\t\tif (pix !== 0) {\n\n\t\t\t/* skip pixel values of 0 (transparent) */\n\n\t\t\tr = (pix >>> 16) & 255;\n\t\t\tg = (pix >>> 8) & 255;\n\n\t\t\t/* find min and max color components */\n\n\t\t\tb = pix & 255;\n\t\t\tmax = (min = r);\n\t\t\tif (g > max) {\n\t\t\t\tmax = g;\n\t\t\t}\n\t\t\tif (b > max) {\n\t\t\t\tmax = b;\n\t\t\t}\n\t\t\tif (g < min) {\n\t\t\t\tmin = g;\n\t\t\t}\n\t\t\tif (b < min) {\n\t\t\t\tmin = b;\n\t\t\t}\n\n\t\t\t/* find current saturation and brightness with range 0 to 1000 */\n\n\t\t\thue = hueFromRGBminmax(r, g, b, min, max);\n\t\t\tif (max === 0) {\n\t\t\t\tsaturation = 0;\n\t\t\t} else {\n\t\t\t\tsaturation = DIV(((max - min) * 1000), max);\n\t\t\t}\n\n\t\t\t/* compute new brigthness */\n\n\t\t\tbrightness = DIV((max * 1000), 255);\n\t\t\tbrightness += shift * 10;\n\t\t\tif (brightness > 1000) {\n\t\t\t\tbrightness = 1000;\n\t\t\t}\n\t\t\tif (brightness < 0) {\n\t\t\t\tbrightness = 0;\n\t\t\t}\n\t\t\tbitmapatputHsv(out, i, hue, saturation, brightness);\n\t\t}\n\t}\n\tinterpreterProxy.pop(3);\n\treturn 0;\n}\n\nfunction primitiveCondenseSound() {\n\tvar count;\n\tvar dst;\n\tvar dstOop;\n\tvar factor;\n\tvar i;\n\tvar j;\n\tvar max;\n\tvar src;\n\tvar srcOop;\n\tvar sz;\n\tvar v;\n\tvar _src = 0;\n\tvar _dst = 0;\n\n\tsrcOop = interpreterProxy.stackValue(2);\n\tdstOop = interpreterProxy.stackValue(1);\n\tfactor = interpreterProxy.stackIntegerValue(0);\n\tinterpreterProxy.success(interpreterProxy.isWords(srcOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(dstOop));\n\tcount = DIV((2 * SIZEOF(srcOop)), factor);\n\tsz = 2 * SIZEOF(dstOop);\n\tinterpreterProxy.success(sz >= count);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tsrc = srcOop.wordsAsInt16Array();\n\tdst = dstOop.wordsAsInt16Array();\n\tfor (i = 1; i <= count; i++) {\n\t\tmax = 0;\n\t\tfor (j = 1; j <= factor; j++) {\n\t\t\tv = src[_src++];\n\t\t\tif (v < 0) {\n\t\t\t\tv = 0 - v;\n\t\t\t}\n\t\t\tif (v > max) {\n\t\t\t\tmax = v;\n\t\t\t}\n\t\t}\n\t\tdst[_dst++] = max;\n\t}\n\tinterpreterProxy.pop(3);\n\treturn 0;\n}\n\nfunction primitiveDoubleSize() {\n\tvar baseIndex;\n\tvar dstX;\n\tvar dstY;\n\tvar i;\n\tvar in_;\n\tvar inH;\n\tvar inOop;\n\tvar inW;\n\tvar out;\n\tvar outH;\n\tvar outOop;\n\tvar outW;\n\tvar pix;\n\tvar x;\n\tvar y;\n\n\tinOop = interpreterProxy.stackValue(7);\n\tinW = interpreterProxy.stackIntegerValue(6);\n\tinH = interpreterProxy.stackIntegerValue(5);\n\toutOop = interpreterProxy.stackValue(4);\n\toutW = interpreterProxy.stackIntegerValue(3);\n\toutH = interpreterProxy.stackIntegerValue(2);\n\tdstX = interpreterProxy.stackIntegerValue(1);\n\tdstY = interpreterProxy.stackIntegerValue(0);\n\tin_ = checkedUnsignedIntPtrOf(inOop);\n\tout = checkedUnsignedIntPtrOf(outOop);\n\tinterpreterProxy.success((dstX + (2 * inW)) < outW);\n\tinterpreterProxy.success((dstY + (2 * inH)) < outH);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tfor (y = 0; y <= (inH - 1); y++) {\n\t\tbaseIndex = ((dstY + (2 * y)) * outW) + dstX;\n\t\tfor (x = 0; x <= (inW - 1); x++) {\n\t\t\tpix = in_[x + (y * inW)];\n\t\t\ti = baseIndex + (2 * x);\n\t\t\tout[i] = pix;\n\t\t\tout[i + 1] = pix;\n\t\t\tout[i + outW] = pix;\n\t\t\tout[(i + outW) + 1] = pix;\n\t\t}\n\t}\n\tinterpreterProxy.pop(8);\n\treturn 0;\n}\n\nfunction primitiveExtractChannel() {\n\tvar dst;\n\tvar dstOop;\n\tvar i;\n\tvar rightFlag;\n\tvar src;\n\tvar srcOop;\n\tvar sz;\n\tvar _src = 0;\n\tvar _dst = 0;\n\n\tsrcOop = interpreterProxy.stackValue(2);\n\tdstOop = interpreterProxy.stackValue(1);\n\trightFlag = interpreterProxy.booleanValueOf(interpreterProxy.stackValue(0));\n\tinterpreterProxy.success(interpreterProxy.isWords(srcOop));\n\tinterpreterProxy.success(interpreterProxy.isWords(dstOop));\n\tsz = SIZEOF(srcOop);\n\tinterpreterProxy.success(SIZEOF(dstOop) >= (sz >> 1));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tsrc = srcOop.wordsAsInt16Array();\n\tdst = dstOop.wordsAsInt16Array();\n\tif (rightFlag) {\n\t\t_src++;\n\t}\n\tfor (i = 1; i <= sz; i++) {\n\t\tdst[_dst++] = src[_src]; _src += 2;\n\t}\n\tinterpreterProxy.pop(3);\n\treturn 0;\n}\n\nfunction primitiveFisheye() {\n\tvar ang;\n\tvar centerX;\n\tvar centerY;\n\tvar dx;\n\tvar dy;\n\tvar height;\n\tvar in_;\n\tvar inOop;\n\tvar out;\n\tvar outOop;\n\tvar pix;\n\tvar power;\n\tvar r;\n\tvar scaledPower;\n\tvar srcX;\n\tvar srcY;\n\tvar sz;\n\tvar width;\n\tvar x;\n\tvar y;\n\n\tinOop = interpreterProxy.stackValue(3);\n\toutOop = interpreterProxy.stackValue(2);\n\twidth = interpreterProxy.stackIntegerValue(1);\n\tpower = interpreterProxy.stackIntegerValue(0);\n\tin_ = checkedUnsignedIntPtrOf(inOop);\n\tout = checkedUnsignedIntPtrOf(outOop);\n\tsz = SIZEOF(inOop);\n\tinterpreterProxy.success(SIZEOF(outOop) === sz);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\theight = DIV(sz, width);\n\tcenterX = width >> 1;\n\tcenterY = height >> 1;\n\theight = DIV(sz, width);\n\tcenterX = width >> 1;\n\tcenterY = height >> 1;\n\tscaledPower = power / 100.0;\n\tfor (x = 0; x <= (width - 1); x++) {\n\t\tfor (y = 0; y <= (height - 1); y++) {\n\t\t\tdx = (x - centerX) / centerX;\n\t\t\tdy = (y - centerY) / centerY;\n\t\t\tr = Math.pow(Math.sqrt((dx * dx) + (dy * dy)),scaledPower);\n\t\t\tif (r <= 1.0) {\n\t\t\t\tang = Math.atan2(dy,dx);\n\t\t\t\tsrcX = ((1024 * (centerX + ((r * Math.cos(ang)) * centerX)))|0);\n\t\t\t\tsrcY = ((1024 * (centerY + ((r * Math.sin(ang)) * centerY)))|0);\n\t\t\t} else {\n\t\t\t\tsrcX = 1024 * x;\n\t\t\t\tsrcY = 1024 * y;\n\t\t\t}\n\t\t\tpix = interpolatedFromxywidthheight(in_, srcX, srcY, width, height);\n\t\t\tout[(y * width) + x] = pix;\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\treturn 0;\n}\n\nfunction primitiveHalfSizeAverage() {\n\tvar b;\n\tvar dstH;\n\tvar dstIndex;\n\tvar dstW;\n\tvar dstX;\n\tvar dstY;\n\tvar g;\n\tvar in_;\n\tvar inH;\n\tvar inW;\n\tvar out;\n\tvar outH;\n\tvar outW;\n\tvar pixel;\n\tvar r;\n\tvar srcIndex;\n\tvar srcX;\n\tvar srcY;\n\tvar x;\n\tvar y;\n\n\tin_ = checkedUnsignedIntPtrOf(interpreterProxy.stackValue(11));\n\tinW = interpreterProxy.stackIntegerValue(10);\n\tinH = interpreterProxy.stackIntegerValue(9);\n\tout = checkedUnsignedIntPtrOf(interpreterProxy.stackValue(8));\n\toutW = interpreterProxy.stackIntegerValue(7);\n\toutH = interpreterProxy.stackIntegerValue(6);\n\tsrcX = interpreterProxy.stackIntegerValue(5);\n\tsrcY = interpreterProxy.stackIntegerValue(4);\n\tdstX = interpreterProxy.stackIntegerValue(3);\n\tdstY = interpreterProxy.stackIntegerValue(2);\n\tdstW = interpreterProxy.stackIntegerValue(1);\n\tdstH = interpreterProxy.stackIntegerValue(0);\n\tinterpreterProxy.success((srcX >= 0) && (srcY >= 0));\n\tinterpreterProxy.success((srcX + (2 * dstW)) <= inW);\n\tinterpreterProxy.success((srcY + (2 * dstH)) <= inH);\n\tinterpreterProxy.success((dstX >= 0) && (dstY >= 0));\n\tinterpreterProxy.success((dstX + dstW) <= outW);\n\tinterpreterProxy.success((dstY + dstH) <= outH);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tfor (y = 0; y <= (dstH - 1); y++) {\n\t\tsrcIndex = (inW * (srcY + (2 * y))) + srcX;\n\t\tdstIndex = (outW * (dstY + y)) + dstX;\n\t\tfor (x = 0; x <= (dstW - 1); x++) {\n\t\t\tpixel = in_[srcIndex];\n\t\t\tr = pixel & 16711680;\n\t\t\tg = pixel & 65280;\n\t\t\tb = pixel & 255;\n\t\t\tpixel = in_[srcIndex + 1];\n\t\t\tr += pixel & 16711680;\n\t\t\tg += pixel & 65280;\n\t\t\tb += pixel & 255;\n\t\t\tpixel = in_[srcIndex + inW];\n\t\t\tr += pixel & 16711680;\n\t\t\tg += pixel & 65280;\n\t\t\tb += pixel & 255;\n\t\t\tpixel = in_[(srcIndex + inW) + 1];\n\t\t\tr += pixel & 16711680;\n\t\t\tg += pixel & 65280;\n\n\t\t\t/* store combined RGB into target bitmap */\n\n\t\t\tb += pixel & 255;\n\t\t\tout[dstIndex] = (((r >>> 2) & 16711680) | (((g >>> 2) & 65280) | (b >>> 2)));\n\t\t\tsrcIndex += 2;\n\t\t\t++dstIndex;\n\t\t}\n\t}\n\tinterpreterProxy.pop(12);\n\treturn 0;\n}\n\nfunction primitiveHalfSizeDiagonal() {\n\tvar b;\n\tvar dstH;\n\tvar dstIndex;\n\tvar dstW;\n\tvar dstX;\n\tvar dstY;\n\tvar g;\n\tvar in_;\n\tvar inH;\n\tvar inW;\n\tvar out;\n\tvar outH;\n\tvar outW;\n\tvar p1;\n\tvar p2;\n\tvar r;\n\tvar srcIndex;\n\tvar srcX;\n\tvar srcY;\n\tvar x;\n\tvar y;\n\n\tin_ = checkedUnsignedIntPtrOf(interpreterProxy.stackValue(11));\n\tinW = interpreterProxy.stackIntegerValue(10);\n\tinH = interpreterProxy.stackIntegerValue(9);\n\tout = checkedUnsignedIntPtrOf(interpreterProxy.stackValue(8));\n\toutW = interpreterProxy.stackIntegerValue(7);\n\toutH = interpreterProxy.stackIntegerValue(6);\n\tsrcX = interpreterProxy.stackIntegerValue(5);\n\tsrcY = interpreterProxy.stackIntegerValue(4);\n\tdstX = interpreterProxy.stackIntegerValue(3);\n\tdstY = interpreterProxy.stackIntegerValue(2);\n\tdstW = interpreterProxy.stackIntegerValue(1);\n\tdstH = interpreterProxy.stackIntegerValue(0);\n\tinterpreterProxy.success((srcX >= 0) && (srcY >= 0));\n\tinterpreterProxy.success((srcX + (2 * dstW)) <= inW);\n\tinterpreterProxy.success((srcY + (2 * dstH)) <= inH);\n\tinterpreterProxy.success((dstX >= 0) && (dstY >= 0));\n\tinterpreterProxy.success((dstX + dstW) <= outW);\n\tinterpreterProxy.success((dstY + dstH) <= outH);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tfor (y = 0; y <= (dstH - 1); y++) {\n\t\tsrcIndex = (inW * (srcY + (2 * y))) + srcX;\n\t\tdstIndex = (outW * (dstY + y)) + dstX;\n\t\tfor (x = 0; x <= (dstW - 1); x++) {\n\t\t\tp1 = in_[srcIndex];\n\t\t\tp2 = in_[(srcIndex + inW) + 1];\n\t\t\tr = (((p1 & 16711680) + (p2 & 16711680)) >>> 1) & 16711680;\n\t\t\tg = (((p1 & 65280) + (p2 & 65280)) >>> 1) & 65280;\n\n\t\t\t/* store combined RGB into target bitmap */\n\n\t\t\tb = ((p1 & 255) + (p2 & 255)) >>> 1;\n\t\t\tout[dstIndex] = (r | (g | b));\n\t\t\tsrcIndex += 2;\n\t\t\t++dstIndex;\n\t\t}\n\t}\n\tinterpreterProxy.pop(12);\n\treturn 0;\n}\n\nfunction primitiveHueShift() {\n\tvar b;\n\tvar brightness;\n\tvar g;\n\tvar hue;\n\tvar i;\n\tvar in_;\n\tvar inOop;\n\tvar max;\n\tvar min;\n\tvar out;\n\tvar outOop;\n\tvar pix;\n\tvar r;\n\tvar saturation;\n\tvar shift;\n\tvar sz;\n\n\tinOop = interpreterProxy.stackValue(2);\n\toutOop = interpreterProxy.stackValue(1);\n\tshift = interpreterProxy.stackIntegerValue(0);\n\tin_ = checkedUnsignedIntPtrOf(inOop);\n\tsz = SIZEOF(inOop);\n\tout = checkedUnsignedIntPtrOf(outOop);\n\tinterpreterProxy.success(SIZEOF(outOop) === sz);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tfor (i = 0; i <= (sz - 1); i++) {\n\t\tpix = in_[i] & 16777215;\n\t\tif (pix !== 0) {\n\n\t\t\t/* skip pixel values of 0 (transparent) */\n\n\t\t\tr = (pix >>> 16) & 255;\n\t\t\tg = (pix >>> 8) & 255;\n\n\t\t\t/* find min and max color components */\n\n\t\t\tb = pix & 255;\n\t\t\tmax = (min = r);\n\t\t\tif (g > max) {\n\t\t\t\tmax = g;\n\t\t\t}\n\t\t\tif (b > max) {\n\t\t\t\tmax = b;\n\t\t\t}\n\t\t\tif (g < min) {\n\t\t\t\tmin = g;\n\t\t\t}\n\t\t\tif (b < min) {\n\t\t\t\tmin = b;\n\t\t\t}\n\t\t\tbrightness = DIV((max * 1000), 255);\n\t\t\tif (max === 0) {\n\t\t\t\tsaturation = 0;\n\t\t\t} else {\n\t\t\t\tsaturation = DIV(((max - min) * 1000), max);\n\t\t\t}\n\t\t\tif (brightness < 110) {\n\n\t\t\t\t/* force black to a very dark, saturated gray */\n\n\t\t\t\tbrightness = 110;\n\t\t\t\tsaturation = 1000;\n\t\t\t}\n\t\t\tif (saturation < 90) {\n\t\t\t\tsaturation = 90;\n\t\t\t}\n\t\t\tif ((brightness === 110) || (saturation === 90)) {\n\n\t\t\t\t/* tint all blacks and grays the same */\n\n\t\t\t\thue = 0;\n\t\t\t} else {\n\t\t\t\thue = hueFromRGBminmax(r, g, b, min, max);\n\t\t\t}\n\n\t\t\t/* compute new hue */\n\n\t\t\thue = MOD(((hue + shift) + 360000000), 360);\n\t\t\tbitmapatputHsv(out, i, hue, saturation, brightness);\n\t\t}\n\t}\n\tinterpreterProxy.pop(3);\n\treturn 0;\n}\n\nfunction primitiveInterpolate() {\n\tvar in_;\n\tvar inOop;\n\tvar result;\n\tvar sz;\n\tvar width;\n\tvar xFixed;\n\tvar yFixed;\n\n\tinOop = interpreterProxy.stackValue(3);\n\twidth = interpreterProxy.stackIntegerValue(2);\n\txFixed = interpreterProxy.stackIntegerValue(1);\n\tyFixed = interpreterProxy.stackIntegerValue(0);\n\tin_ = checkedUnsignedIntPtrOf(inOop);\n\tsz = SIZEOF(inOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tresult = interpolatedFromxywidthheight(in_, xFixed, yFixed, width, DIV(sz, width));\n\tinterpreterProxy.pop(5);\n\tinterpreterProxy.pushInteger(result);\n\treturn 0;\n}\n\nfunction primitiveSaturationShift() {\n\tvar b;\n\tvar brightness;\n\tvar g;\n\tvar hue;\n\tvar i;\n\tvar in_;\n\tvar inOop;\n\tvar max;\n\tvar min;\n\tvar out;\n\tvar outOop;\n\tvar pix;\n\tvar r;\n\tvar saturation;\n\tvar shift;\n\tvar sz;\n\n\tinOop = interpreterProxy.stackValue(2);\n\toutOop = interpreterProxy.stackValue(1);\n\tshift = interpreterProxy.stackIntegerValue(0);\n\tin_ = checkedUnsignedIntPtrOf(inOop);\n\tsz = SIZEOF(inOop);\n\tout = checkedUnsignedIntPtrOf(outOop);\n\tinterpreterProxy.success(SIZEOF(outOop) === sz);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tfor (i = 0; i <= (sz - 1); i++) {\n\t\tpix = in_[i] & 16777215;\n\t\tif (!(pix < 2)) {\n\n\t\t\t/* skip pixel values of 0 (transparent) and 1 (black) */\n\n\t\t\tr = (pix >>> 16) & 255;\n\t\t\tg = (pix >>> 8) & 255;\n\n\t\t\t/* find min and max color components */\n\n\t\t\tb = pix & 255;\n\t\t\tmax = (min = r);\n\t\t\tif (g > max) {\n\t\t\t\tmax = g;\n\t\t\t}\n\t\t\tif (b > max) {\n\t\t\t\tmax = b;\n\t\t\t}\n\t\t\tif (g < min) {\n\t\t\t\tmin = g;\n\t\t\t}\n\t\t\tif (b < min) {\n\t\t\t\tmin = b;\n\t\t\t}\n\t\t\tbrightness = DIV((max * 1000), 255);\n\t\t\tif (max === 0) {\n\t\t\t\tsaturation = 0;\n\t\t\t} else {\n\t\t\t\tsaturation = DIV(((max - min) * 1000), max);\n\t\t\t}\n\t\t\tif (saturation > 0) {\n\n\t\t\t\t/* do nothing if pixel is unsaturated (gray) */\n\n\n\t\t\t\t/* compute new saturation */\n\n\t\t\t\thue = hueFromRGBminmax(r, g, b, min, max);\n\t\t\t\tsaturation += shift * 10;\n\t\t\t\tif (saturation > 1000) {\n\t\t\t\t\tsaturation = 1000;\n\t\t\t\t}\n\t\t\t\tif (saturation < 0) {\n\t\t\t\t\tsaturation = 0;\n\t\t\t\t}\n\t\t\t\tbitmapatputHsv(out, i, hue, saturation, brightness);\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(3);\n\treturn 0;\n}\n\n\n/*\tScale using bilinear interpolation. */\n\nfunction primitiveScale() {\n\tvar in_;\n\tvar inH;\n\tvar inOop;\n\tvar inW;\n\tvar inX;\n\tvar inY;\n\tvar out;\n\tvar outH;\n\tvar outOop;\n\tvar outPix;\n\tvar outW;\n\tvar outX;\n\tvar outY;\n\tvar p1;\n\tvar p2;\n\tvar p3;\n\tvar p4;\n\tvar t;\n\tvar tWeight;\n\tvar w1;\n\tvar w2;\n\tvar w3;\n\tvar w4;\n\tvar xIncr;\n\tvar yIncr;\n\n\tinOop = interpreterProxy.stackValue(5);\n\tinW = interpreterProxy.stackIntegerValue(4);\n\tinH = interpreterProxy.stackIntegerValue(3);\n\toutOop = interpreterProxy.stackValue(2);\n\toutW = interpreterProxy.stackIntegerValue(1);\n\toutH = interpreterProxy.stackIntegerValue(0);\n\tinterpreterProxy.success(SIZEOF(inOop) === (inW * inH));\n\tinterpreterProxy.success(SIZEOF(outOop) === (outW * outH));\n\tin_ = checkedUnsignedIntPtrOf(inOop);\n\tout = checkedUnsignedIntPtrOf(outOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\n\t/* source x and y, scaled by 1024 */\n\n\tinX = (inY = 0);\n\n\t/* source x increment, scaled by 1024 */\n\n\txIncr = DIV((inW * 1024), outW);\n\n\t/* source y increment, scaled by 1024 */\n\n\tyIncr = DIV((inH * 1024), outH);\n\tfor (outY = 0; outY <= (outH - 1); outY++) {\n\t\tinX = 0;\n\t\tfor (outX = 0; outX <= (outW - 1); outX++) {\n\n\t\t\t/* compute weights, scaled by 2^20 */\n\n\t\t\tw1 = (1024 - (inX & 1023)) * (1024 - (inY & 1023));\n\t\t\tw2 = (inX & 1023) * (1024 - (inY & 1023));\n\t\t\tw3 = (1024 - (inX & 1023)) * (inY & 1023);\n\n\t\t\t/* get source pixels */\n\n\t\t\tw4 = (inX & 1023) * (inY & 1023);\n\t\t\tt = ((inY >>> 10) * inW) + (inX >>> 10);\n\t\t\tp1 = in_[t];\n\t\t\tif ((inX >>> 10) < (inW - 1)) {\n\t\t\t\tp2 = in_[t + 1];\n\t\t\t} else {\n\t\t\t\tp2 = p1;\n\t\t\t}\n\t\t\tif ((inY >>> 10) < (inH - 1)) {\n\t\t\t\tt += inW;\n\t\t\t}\n\t\t\tp3 = in_[t];\n\t\t\tif ((inX >>> 10) < (inW - 1)) {\n\t\t\t\tp4 = in_[t + 1];\n\t\t\t} else {\n\t\t\t\tp4 = p3;\n\t\t\t}\n\t\t\ttWeight = 0;\n\t\t\tif (p1 === 0) {\n\t\t\t\tp1 = p2;\n\t\t\t\ttWeight += w1;\n\t\t\t}\n\t\t\tif (p2 === 0) {\n\t\t\t\tp2 = p1;\n\t\t\t\ttWeight += w2;\n\t\t\t}\n\t\t\tif (p3 === 0) {\n\t\t\t\tp3 = p4;\n\t\t\t\ttWeight += w3;\n\t\t\t}\n\t\t\tif (p4 === 0) {\n\t\t\t\tp4 = p3;\n\t\t\t\ttWeight += w4;\n\t\t\t}\n\t\t\tif (p1 === 0) {\n\t\t\t\tp1 = p3;\n\t\t\t\tp2 = p4;\n\t\t\t}\n\t\t\tif (p3 === 0) {\n\t\t\t\tp3 = p1;\n\t\t\t\tp4 = p2;\n\t\t\t}\n\t\t\toutPix = 0;\n\t\t\tif (tWeight < 500000) {\n\n\t\t\t\t/* compute an (opaque) output pixel if less than 50% transparent */\n\n\t\t\t\tt = (((w1 * ((p1 >>> 16) & 255)) + (w2 * ((p2 >>> 16) & 255))) + (w3 * ((p3 >>> 16) & 255))) + (w4 * ((p4 >>> 16) & 255));\n\t\t\t\toutPix = ((t >>> 20) & 255) << 16;\n\t\t\t\tt = (((w1 * ((p1 >>> 8) & 255)) + (w2 * ((p2 >>> 8) & 255))) + (w3 * ((p3 >>> 8) & 255))) + (w4 * ((p4 >>> 8) & 255));\n\t\t\t\toutPix = outPix | (((t >>> 20) & 255) << 8);\n\t\t\t\tt = (((w1 * (p1 & 255)) + (w2 * (p2 & 255))) + (w3 * (p3 & 255))) + (w4 * (p4 & 255));\n\t\t\t\toutPix = outPix | ((t >>> 20) & 255);\n\t\t\t\tif (outPix === 0) {\n\t\t\t\t\toutPix = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tout[(outY * outW) + outX] = outPix;\n\t\t\tinX += xIncr;\n\t\t}\n\t\tinY += yIncr;\n\t}\n\tinterpreterProxy.pop(6);\n\treturn 0;\n}\n\nfunction primitiveWaterRipples1() {\n\tvar aArOop;\n\tvar aArray;\n\tvar allPix;\n\tvar bArOop;\n\tvar bArray;\n\tvar blops;\n\tvar d;\n\tvar dist;\n\tvar dx;\n\tvar dx2;\n\tvar dy;\n\tvar dy2;\n\tvar f;\n\tvar g;\n\tvar h;\n\tvar height;\n\tvar i;\n\tvar in_;\n\tvar inOop;\n\tvar j;\n\tvar newLoc;\n\tvar out;\n\tvar outOop;\n\tvar pix;\n\tvar power;\n\tvar q;\n\tvar ripply;\n\tvar t;\n\tvar t1;\n\tvar temp;\n\tvar val;\n\tvar val2;\n\tvar width;\n\tvar x;\n\tvar y;\n\n\tinOop = interpreterProxy.stackValue(5);\n\toutOop = interpreterProxy.stackValue(4);\n\twidth = interpreterProxy.stackIntegerValue(3);\n\tin_ = checkedUnsignedIntPtrOf(inOop);\n\tout = checkedUnsignedIntPtrOf(outOop);\n\tallPix = SIZEOF(inOop);\n\tripply = interpreterProxy.stackIntegerValue(2);\n\taArOop = interpreterProxy.stackValue(1);\n\tbArOop = interpreterProxy.stackValue(0);\n\taArray = checkedFloatPtrOf(aArOop);\n\tbArray = checkedFloatPtrOf(bArOop);\n\tinterpreterProxy.success(SIZEOF(outOop) === allPix);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\theight = DIV(allPix, width);\n\tt1 = Math.random();\n\tblops = (MOD(t1, ripply)) - 1;\n\tfor (t = 0; t <= ((blops / 2) - 1); t++) {\n\t\tt1 = Math.random();\n\t\tx = MOD(t1, width);\n\t\tt1 = Math.random();\n\t\ty = MOD(t1, height);\n\t\tt1 = Math.random();\n\t\tpower = MOD(t1, 8);\n\t\tfor (g = -4; g <= 4; g++) {\n\t\t\tfor (h = -4; h <= 4; h++) {\n\t\t\t\tdist = ((g * g) + (h * h));\n\t\t\t\tif ((dist < 25) && (dist > 0)) {\n\t\t\t\t\tdx = ((x + g)|0);\n\t\t\t\t\tdy = ((y + h)|0);\n\t\t\t\t\tif ((dx > 0) && ((dy > 0) && ((dy < height) && (dx < width)))) {\n\t\t\t\t\t\taArray[(dy * width) + dx] = (power * (1.0 - (dist / 25.0)));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfor (f = 1; f <= (width - 2); f++) {\n\t\tfor (d = 1; d <= (height - 2); d++) {\n\t\t\tval = (d * width) + f;\n\t\t\taArray[val] = (((((((((bArray[val + 1] + bArray[val - 1]) + bArray[val + width]) + bArray[val - width]) + (bArray[(val - 1) - width] / 2)) + (bArray[(val - 1) + width] / 2)) + (bArray[(val + 1) - width] / 2)) + (bArray[(val + 1) + width] / 2)) / 4) - aArray[val]);\n\t\t\taArray[val] = (aArray[val] * 0.9);\n\t\t}\n\t}\n\tfor (q = 0; q <= (width * height); q++) {\n\t\ttemp = bArray[q];\n\t\tbArray[q] = aArray[q];\n\t\taArray[q] = temp;\n\t}\n\tfor (j = 0; j <= (height - 1); j++) {\n\t\tfor (i = 0; i <= (width - 1); i++) {\n\t\t\tif ((i > 1) && ((i < (width - 1)) && ((j > 1) && (j < (height - 1))))) {\n\t\t\t\tval2 = (j * width) + i;\n\t\t\t\tdx2 = (((aArray[val2] - aArray[val2 - 1]) + (aArray[val2 + 1] - aArray[val2])) * 64);\n\t\t\t\tdy2 = (((aArray[val2] - aArray[val2 - width]) + (aArray[val2 + width] - aArray[val2])) / 64);\n\t\t\t\tif (dx2 < 2) {\n\t\t\t\t\tdx2 = -2;\n\t\t\t\t}\n\t\t\t\tif (dx2 > 2) {\n\t\t\t\t\tdx2 = 2;\n\t\t\t\t}\n\t\t\t\tif (dy2 < 2) {\n\t\t\t\t\tdy2 = -2;\n\t\t\t\t}\n\t\t\t\tif (dy2 > 2) {\n\t\t\t\t\tdy2 = 2;\n\t\t\t\t}\n\t\t\t\tnewLoc = ((((j + dy2) * width) + (i + dx2))|0);\n\t\t\t\tif ((newLoc < (width * height)) && (newLoc >= 0)) {\n\t\t\t\t\tpix = in_[newLoc];\n\t\t\t\t} else {\n\t\t\t\t\tpix = in_[i + (j * width)];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpix = in_[i + (j * width)];\n\t\t\t}\n\t\t\tout[i + (j * width)] = pix;\n\t\t}\n\t}\n\tinterpreterProxy.pop(6);\n\treturn 0;\n}\n\nfunction primitiveWhirl() {\n\tvar ang;\n\tvar centerX;\n\tvar centerY;\n\tvar cosa;\n\tvar d;\n\tvar degrees;\n\tvar dx;\n\tvar dy;\n\tvar factor;\n\tvar height;\n\tvar in_;\n\tvar inOop;\n\tvar out;\n\tvar outOop;\n\tvar pix;\n\tvar radius;\n\tvar radiusSquared;\n\tvar scaleX;\n\tvar scaleY;\n\tvar sina;\n\tvar sz;\n\tvar whirlRadians;\n\tvar width;\n\tvar x;\n\tvar y;\n\n\tinOop = interpreterProxy.stackValue(3);\n\toutOop = interpreterProxy.stackValue(2);\n\twidth = interpreterProxy.stackIntegerValue(1);\n\tdegrees = interpreterProxy.stackIntegerValue(0);\n\tin_ = checkedUnsignedIntPtrOf(inOop);\n\tout = checkedUnsignedIntPtrOf(outOop);\n\tsz = SIZEOF(inOop);\n\tinterpreterProxy.success(SIZEOF(outOop) === sz);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\theight = DIV(sz, width);\n\tcenterX = width >> 1;\n\tcenterY = height >> 1;\n\tif (centerX < centerY) {\n\t\tradius = centerX;\n\t\tscaleX = centerY / centerX;\n\t\tscaleY = 1.0;\n\t} else {\n\t\tradius = centerY;\n\t\tscaleX = 1.0;\n\t\tif (centerY < centerX) {\n\t\t\tscaleY = centerX / centerY;\n\t\t} else {\n\t\t\tscaleY = 1.0;\n\t\t}\n\t}\n\twhirlRadians = (-3.141592653589793 * degrees) / 180.0;\n\tradiusSquared = (radius * radius);\n\tfor (x = 0; x <= (width - 1); x++) {\n\t\tfor (y = 0; y <= (height - 1); y++) {\n\t\t\tdx = scaleX * (x - centerX);\n\t\t\tdy = scaleY * (y - centerY);\n\t\t\td = (dx * dx) + (dy * dy);\n\t\t\tif (d < radiusSquared) {\n\n\t\t\t\t/* inside the whirl circle */\n\n\t\t\t\tfactor = 1.0 - (Math.sqrt(d) / radius);\n\t\t\t\tang = whirlRadians * (factor * factor);\n\t\t\t\tsina = Math.sin(ang);\n\t\t\t\tcosa = Math.cos(ang);\n\t\t\t\tpix = interpolatedFromxywidthheight(in_, ((1024.0 * ((((cosa * dx) - (sina * dy)) / scaleX) + centerX))|0), ((1024.0 * ((((sina * dx) + (cosa * dy)) / scaleY) + centerY))|0), width, height);\n\t\t\t\tout[(width * y) + x] = pix;\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(4);\n\treturn 0;\n}\n\n\n/*\tNote: This is coded so that is can be run from Squeak. */\n\nfunction setInterpreter(anInterpreter) {\n\tvar ok;\n\n\tinterpreterProxy = anInterpreter;\n\tok = interpreterProxy.majorVersion() == VM_PROXY_MAJOR;\n\tif (ok === false) {\n\t\treturn false;\n\t}\n\tok = interpreterProxy.minorVersion() >= VM_PROXY_MINOR;\n\treturn ok;\n}\n\n\nSqueak.registerExternalModule(\"ScratchPlugin\", {\n\tprimitiveCondenseSound: primitiveCondenseSound,\n\tgetModuleName: getModuleName,\n\tprimitiveFisheye: primitiveFisheye,\n\tprimitiveWaterRipples1: primitiveWaterRipples1,\n\tprimitiveHalfSizeDiagonal: primitiveHalfSizeDiagonal,\n\tprimitiveScale: primitiveScale,\n\tprimitiveDoubleSize: primitiveDoubleSize,\n\tsetInterpreter: setInterpreter,\n\tprimitiveWhirl: primitiveWhirl,\n\tprimitiveBlur: primitiveBlur,\n\tprimitiveBrightnessShift: primitiveBrightnessShift,\n\tprimitiveHalfSizeAverage: primitiveHalfSizeAverage,\n\tprimitiveSaturationShift: primitiveSaturationShift,\n\tprimitiveHueShift: primitiveHueShift,\n\tprimitiveInterpolate: primitiveInterpolate,\n\tprimitiveExtractChannel: primitiveExtractChannel,\n});\n\n}); // end of module\n","/* Smalltalk from Squeak4.5 with VMMaker 4.13.6 translated as JS source on 3 November 2014 1:52:26 pm */\n/* Automatically generated by\n\tJSPluginCodeGenerator VMMakerJS-bf.15 uuid: fd4e10f2-3773-4e80-8bb5-c4b471a014e5\n   from\n\tSoundGenerationPlugin VMMaker-bf.353 uuid: 8ae25e7e-8d2c-451e-8277-598b30e9c002\n */\n\nmodule(\"users.bert.SqueakJS.plugins.SoundGenerationPlugin\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";\n\nvar VM_PROXY_MAJOR = 1;\nvar VM_PROXY_MINOR = 11;\n\n/*** Functions ***/\nfunction CLASSOF(obj) { return typeof obj === \"number\" ? interpreterProxy.classSmallInteger() : obj.sqClass }\nfunction SIZEOF(obj) { return obj.pointers ? obj.pointers.length : obj.words ? obj.words.length : obj.bytes ? obj.bytes.length : 0 }\nfunction BYTESIZEOF(obj) { return obj.bytes ? obj.bytes.length : obj.words ? obj.words.length * 4 : 0 }\nfunction DIV(a, b) { return Math.floor(a / b) | 0; }   // integer division\nfunction MOD(a, b) { return a - DIV(a, b) * b | 0; }   // signed modulus\nfunction SHL(a, b) { return b > 31 ? 0 : a << b; }     // fix JS shift\nfunction SHR(a, b) { return b > 31 ? 0 : a >>> b; }    // fix JS shift\nfunction SHIFT(a, b) { return b < 0 ? (b < -31 ? 0 : a >>> (0-b) ) : (b > 31 ? 0 : a << b); }\n\n/*** Constants ***/\nvar IncrementFractionBits = 16;\nvar LoopIndexFractionMask = 511;\nvar LoopIndexScaleFactor = 512;\nvar ScaleFactor = 32768;\nvar ScaledIndexOverflow = 536870912;\n\n/*** Variables ***/\nvar interpreterProxy = null;\nvar moduleName = \"SoundGenerationPlugin 3 November 2014 (e)\";\n\n\n\n/*\tNote: This is coded so that plugins can be run from Squeak. */\n\nfunction getInterpreter() {\n\treturn interpreterProxy;\n}\n\n\n/*\tNote: This is hardcoded so it can be run from Squeak.\n\tThe module name is used for validating a module *after*\n\tit is loaded to check if it does really contain the module\n\twe're thinking it contains. This is important! */\n\nfunction getModuleName() {\n\treturn moduleName;\n}\n\nfunction halt() {\n\t;\n}\n\nfunction msg(s) {\n\tconsole.log(moduleName + \": \" + s);\n}\n\nfunction primitiveApplyReverb() {\n\tvar rcvr;\n\tvar aSoundBuffer;\n\tvar startIndex;\n\tvar n;\n\tvar delayedLeft;\n\tvar delayedRight;\n\tvar i;\n\tvar j;\n\tvar out;\n\tvar sliceIndex;\n\tvar tapGain;\n\tvar tapIndex;\n\tvar bufferIndex;\n\tvar bufferSize;\n\tvar leftBuffer;\n\tvar rightBuffer;\n\tvar tapCount;\n\tvar tapDelays;\n\tvar tapGains;\n\n\trcvr = interpreterProxy.stackValue(3);\n\taSoundBuffer = interpreterProxy.stackInt16Array(2);\n\tstartIndex = interpreterProxy.stackIntegerValue(1);\n\tn = interpreterProxy.stackIntegerValue(0);\n\ttapDelays = interpreterProxy.fetchInt32ArrayofObject(7, rcvr);\n\ttapGains = interpreterProxy.fetchInt32ArrayofObject(8, rcvr);\n\ttapCount = interpreterProxy.fetchIntegerofObject(9, rcvr);\n\tbufferSize = interpreterProxy.fetchIntegerofObject(10, rcvr);\n\tbufferIndex = interpreterProxy.fetchIntegerofObject(11, rcvr);\n\tleftBuffer = interpreterProxy.fetchInt16ArrayofObject(12, rcvr);\n\trightBuffer = interpreterProxy.fetchInt16ArrayofObject(13, rcvr);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tfor (sliceIndex = startIndex; sliceIndex <= ((startIndex + n) - 1); sliceIndex++) {\n\t\tdelayedLeft = (delayedRight = 0);\n\t\tfor (tapIndex = 1; tapIndex <= tapCount; tapIndex++) {\n\t\t\ti = bufferIndex - tapDelays[tapIndex - 1];\n\t\t\tif (i < 1) {\n\t\t\t\ti += bufferSize;\n\t\t\t}\n\t\t\ttapGain = tapGains[tapIndex - 1];\n\t\t\tdelayedLeft += tapGain * leftBuffer[i - 1];\n\t\t\tdelayedRight += tapGain * rightBuffer[i - 1];\n\t\t}\n\t\tj = (2 * sliceIndex) - 1;\n\t\tout = aSoundBuffer[j - 1] + (delayedLeft >> 15);\n\t\tif (out > 32767) {\n\t\t\tout = 32767;\n\t\t}\n\t\tif (out < -32767) {\n\t\t\tout = -32767;\n\t\t}\n\t\taSoundBuffer[j - 1] = out;\n\t\tleftBuffer[bufferIndex - 1] = out;\n\t\t++j;\n\t\tout = aSoundBuffer[j - 1] + (delayedRight >> 15);\n\t\tif (out > 32767) {\n\t\t\tout = 32767;\n\t\t}\n\t\tif (out < -32767) {\n\t\t\tout = -32767;\n\t\t}\n\t\taSoundBuffer[j - 1] = out;\n\t\trightBuffer[bufferIndex - 1] = out;\n\t\tbufferIndex = (MOD(bufferIndex, bufferSize)) + 1;\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.storeIntegerofObjectwithValue(11, rcvr, bufferIndex);\n\tinterpreterProxy.pop(3);\n}\n\n\n/*\tPlay samples from a wave table by stepping a fixed amount through the table on every sample. The table index and increment are scaled to allow fractional increments for greater pitch accuracy. */\n/*\t(FMSound pitch: 440.0 dur: 1.0 loudness: 0.5) play */\n\nfunction primitiveMixFMSound() {\n\tvar rcvr;\n\tvar n;\n\tvar aSoundBuffer;\n\tvar startIndex;\n\tvar leftVol;\n\tvar rightVol;\n\tvar doingFM;\n\tvar i;\n\tvar lastIndex;\n\tvar offset;\n\tvar s;\n\tvar sample;\n\tvar sliceIndex;\n\tvar count;\n\tvar normalizedModulation;\n\tvar scaledIndex;\n\tvar scaledIndexIncr;\n\tvar scaledOffsetIndex;\n\tvar scaledOffsetIndexIncr;\n\tvar scaledVol;\n\tvar scaledVolIncr;\n\tvar scaledVolLimit;\n\tvar scaledWaveTableSize;\n\tvar waveTable;\n\n\trcvr = interpreterProxy.stackValue(5);\n\tn = interpreterProxy.stackIntegerValue(4);\n\taSoundBuffer = interpreterProxy.stackInt16Array(3);\n\tstartIndex = interpreterProxy.stackIntegerValue(2);\n\tleftVol = interpreterProxy.stackIntegerValue(1);\n\trightVol = interpreterProxy.stackIntegerValue(0);\n\tscaledVol = interpreterProxy.fetchIntegerofObject(3, rcvr);\n\tscaledVolIncr = interpreterProxy.fetchIntegerofObject(4, rcvr);\n\tscaledVolLimit = interpreterProxy.fetchIntegerofObject(5, rcvr);\n\tcount = interpreterProxy.fetchIntegerofObject(7, rcvr);\n\twaveTable = interpreterProxy.fetchInt16ArrayofObject(8, rcvr);\n\tscaledWaveTableSize = interpreterProxy.fetchIntegerofObject(9, rcvr);\n\tscaledIndex = interpreterProxy.fetchIntegerofObject(10, rcvr);\n\tscaledIndexIncr = interpreterProxy.fetchIntegerofObject(11, rcvr);\n\tnormalizedModulation = interpreterProxy.fetchIntegerofObject(14, rcvr);\n\tscaledOffsetIndex = interpreterProxy.fetchIntegerofObject(15, rcvr);\n\tscaledOffsetIndexIncr = interpreterProxy.fetchIntegerofObject(16, rcvr);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tdoingFM = (normalizedModulation !== 0) && (scaledOffsetIndexIncr !== 0);\n\tlastIndex = (startIndex + n) - 1;\n\tfor (sliceIndex = startIndex; sliceIndex <= lastIndex; sliceIndex++) {\n\t\tsample = (scaledVol * waveTable[scaledIndex >> 15]) >> 15;\n\t\tif (doingFM) {\n\t\t\toffset = normalizedModulation * waveTable[scaledOffsetIndex >> 15];\n\t\t\tscaledOffsetIndex = MOD((scaledOffsetIndex + scaledOffsetIndexIncr), scaledWaveTableSize);\n\t\t\tif (scaledOffsetIndex < 0) {\n\t\t\t\tscaledOffsetIndex += scaledWaveTableSize;\n\t\t\t}\n\t\t\tscaledIndex = MOD(((scaledIndex + scaledIndexIncr) + offset), scaledWaveTableSize);\n\t\t\tif (scaledIndex < 0) {\n\t\t\t\tscaledIndex += scaledWaveTableSize;\n\t\t\t}\n\t\t} else {\n\t\t\tscaledIndex = MOD((scaledIndex + scaledIndexIncr), scaledWaveTableSize);\n\t\t}\n\t\tif (leftVol > 0) {\n\t\t\ti = (2 * sliceIndex) - 1;\n\t\t\ts = aSoundBuffer[i - 1] + ((sample * leftVol) >> 15);\n\t\t\tif (s > 32767) {\n\t\t\t\ts = 32767;\n\t\t\t}\n\t\t\tif (s < -32767) {\n\t\t\t\ts = -32767;\n\t\t\t}\n\t\t\taSoundBuffer[i - 1] = s;\n\t\t}\n\t\tif (rightVol > 0) {\n\t\t\ti = 2 * sliceIndex;\n\t\t\ts = aSoundBuffer[i - 1] + ((sample * rightVol) >> 15);\n\t\t\tif (s > 32767) {\n\t\t\t\ts = 32767;\n\t\t\t}\n\t\t\tif (s < -32767) {\n\t\t\t\ts = -32767;\n\t\t\t}\n\t\t\taSoundBuffer[i - 1] = s;\n\t\t}\n\t\tif (scaledVolIncr !== 0) {\n\t\t\tscaledVol += scaledVolIncr;\n\t\t\tif (((scaledVolIncr > 0) && (scaledVol >= scaledVolLimit)) || ((scaledVolIncr < 0) && (scaledVol <= scaledVolLimit))) {\n\n\t\t\t\t/* reached the limit; stop incrementing */\n\n\t\t\t\tscaledVol = scaledVolLimit;\n\t\t\t\tscaledVolIncr = 0;\n\t\t\t}\n\t\t}\n\t}\n\tcount -= n;\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.storeIntegerofObjectwithValue(3, rcvr, scaledVol);\n\tinterpreterProxy.storeIntegerofObjectwithValue(4, rcvr, scaledVolIncr);\n\tinterpreterProxy.storeIntegerofObjectwithValue(7, rcvr, count);\n\tinterpreterProxy.storeIntegerofObjectwithValue(10, rcvr, scaledIndex);\n\tinterpreterProxy.storeIntegerofObjectwithValue(15, rcvr, scaledOffsetIndex);\n\tinterpreterProxy.pop(5);\n}\n\n\n/*\tPlay samples from a wave table by stepping a fixed amount through the table on every sample. The table index and increment are scaled to allow fractional increments for greater pitch accuracy.  If a loop length is specified, then the index is looped back when the loopEnd index is reached until count drops below releaseCount. This allows a short sampled sound to be sustained indefinitely. */\n/*\t(LoopedSampledSound pitch: 440.0 dur: 5.0 loudness: 0.5) play */\n\nfunction primitiveMixLoopedSampledSound() {\n\tvar rcvr;\n\tvar n;\n\tvar aSoundBuffer;\n\tvar startIndex;\n\tvar leftVol;\n\tvar rightVol;\n\tvar compositeLeftVol;\n\tvar compositeRightVol;\n\tvar i;\n\tvar isInStereo;\n\tvar lastIndex;\n\tvar leftVal;\n\tvar m;\n\tvar nextSampleIndex;\n\tvar rightVal;\n\tvar s;\n\tvar sampleIndex;\n\tvar sliceIndex;\n\tvar count;\n\tvar lastSample;\n\tvar leftSamples;\n\tvar loopEnd;\n\tvar releaseCount;\n\tvar rightSamples;\n\tvar scaledIndex;\n\tvar scaledIndexIncr;\n\tvar scaledLoopLength;\n\tvar scaledVol;\n\tvar scaledVolIncr;\n\tvar scaledVolLimit;\n\n\trcvr = interpreterProxy.stackValue(5);\n\tn = interpreterProxy.stackIntegerValue(4);\n\taSoundBuffer = interpreterProxy.stackInt16Array(3);\n\tstartIndex = interpreterProxy.stackIntegerValue(2);\n\tleftVol = interpreterProxy.stackIntegerValue(1);\n\trightVol = interpreterProxy.stackIntegerValue(0);\n\tscaledVol = interpreterProxy.fetchIntegerofObject(3, rcvr);\n\tscaledVolIncr = interpreterProxy.fetchIntegerofObject(4, rcvr);\n\tscaledVolLimit = interpreterProxy.fetchIntegerofObject(5, rcvr);\n\tcount = interpreterProxy.fetchIntegerofObject(7, rcvr);\n\treleaseCount = interpreterProxy.fetchIntegerofObject(8, rcvr);\n\tleftSamples = interpreterProxy.fetchInt16ArrayofObject(10, rcvr);\n\trightSamples = interpreterProxy.fetchInt16ArrayofObject(11, rcvr);\n\tlastSample = interpreterProxy.fetchIntegerofObject(16, rcvr);\n\tloopEnd = interpreterProxy.fetchIntegerofObject(17, rcvr);\n\tscaledLoopLength = interpreterProxy.fetchIntegerofObject(18, rcvr);\n\tscaledIndex = interpreterProxy.fetchIntegerofObject(19, rcvr);\n\tscaledIndexIncr = interpreterProxy.fetchIntegerofObject(20, rcvr);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tisInStereo = leftSamples !== rightSamples;\n\tcompositeLeftVol = (leftVol * scaledVol) >> 15;\n\tcompositeRightVol = (rightVol * scaledVol) >> 15;\n\ti = (2 * startIndex) - 1;\n\tlastIndex = (startIndex + n) - 1;\n\tfor (sliceIndex = startIndex; sliceIndex <= lastIndex; sliceIndex++) {\n\t\tsampleIndex = ((scaledIndex += scaledIndexIncr)) >> 9;\n\t\tif ((sampleIndex > loopEnd) && (count > releaseCount)) {\n\n\t\t\t/* loop back if not within releaseCount of the note end */\n\t\t\t/* note: unlooped sounds will have loopEnd = lastSample */\n\n\t\t\tsampleIndex = ((scaledIndex -= scaledLoopLength)) >> 9;\n\t\t}\n\t\tif (((nextSampleIndex = sampleIndex + 1)) > lastSample) {\n\t\t\tif (sampleIndex > lastSample) {\n\t\t\t\tcount = 0;\n\t\t\t\tif (interpreterProxy.failed()) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tinterpreterProxy.storeIntegerofObjectwithValue(3, rcvr, scaledVol);\n\t\t\t\tinterpreterProxy.storeIntegerofObjectwithValue(4, rcvr, scaledVolIncr);\n\t\t\t\tinterpreterProxy.storeIntegerofObjectwithValue(7, rcvr, count);\n\t\t\t\tinterpreterProxy.storeIntegerofObjectwithValue(19, rcvr, scaledIndex);\n\t\t\t\tinterpreterProxy.popthenPush(6, null);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (scaledLoopLength === 0) {\n\t\t\t\tnextSampleIndex = sampleIndex;\n\t\t\t} else {\n\t\t\t\tnextSampleIndex = ((scaledIndex - scaledLoopLength) >> 9) + 1;\n\t\t\t}\n\t\t}\n\t\tm = scaledIndex & LoopIndexFractionMask;\n\t\trightVal = (leftVal = ((leftSamples[sampleIndex - 1] * (LoopIndexScaleFactor - m)) + (leftSamples[nextSampleIndex - 1] * m)) >> 9);\n\t\tif (isInStereo) {\n\t\t\trightVal = ((rightSamples[sampleIndex - 1] * (LoopIndexScaleFactor - m)) + (rightSamples[nextSampleIndex - 1] * m)) >> 9;\n\t\t}\n\t\tif (leftVol > 0) {\n\t\t\ts = aSoundBuffer[i - 1] + ((compositeLeftVol * leftVal) >> 15);\n\t\t\tif (s > 32767) {\n\t\t\t\ts = 32767;\n\t\t\t}\n\t\t\tif (s < -32767) {\n\t\t\t\ts = -32767;\n\t\t\t}\n\t\t\taSoundBuffer[i - 1] = s;\n\t\t}\n\t\t++i;\n\t\tif (rightVol > 0) {\n\t\t\ts = aSoundBuffer[i - 1] + ((compositeRightVol * rightVal) >> 15);\n\t\t\tif (s > 32767) {\n\t\t\t\ts = 32767;\n\t\t\t}\n\t\t\tif (s < -32767) {\n\t\t\t\ts = -32767;\n\t\t\t}\n\t\t\taSoundBuffer[i - 1] = s;\n\t\t}\n\t\t++i;\n\t\tif (scaledVolIncr !== 0) {\n\n\t\t\t/* update volume envelope if it is changing */\n\n\t\t\tscaledVol += scaledVolIncr;\n\t\t\tif (((scaledVolIncr > 0) && (scaledVol >= scaledVolLimit)) || ((scaledVolIncr < 0) && (scaledVol <= scaledVolLimit))) {\n\n\t\t\t\t/* reached the limit; stop incrementing */\n\n\t\t\t\tscaledVol = scaledVolLimit;\n\t\t\t\tscaledVolIncr = 0;\n\t\t\t}\n\t\t\tcompositeLeftVol = (leftVol * scaledVol) >> 15;\n\t\t\tcompositeRightVol = (rightVol * scaledVol) >> 15;\n\t\t}\n\t}\n\tcount -= n;\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.storeIntegerofObjectwithValue(3, rcvr, scaledVol);\n\tinterpreterProxy.storeIntegerofObjectwithValue(4, rcvr, scaledVolIncr);\n\tinterpreterProxy.storeIntegerofObjectwithValue(7, rcvr, count);\n\tinterpreterProxy.storeIntegerofObjectwithValue(19, rcvr, scaledIndex);\n\tinterpreterProxy.pop(5);\n}\n\n\n/*\tThe Karplus-Strong plucked string algorithm: start with a buffer full of random noise and repeatedly play the contents of that buffer while averaging adjacent samples. High harmonics damp out more quickly, transfering their energy to lower ones. The length of the buffer corresponds to the length of the string. */\n/*\t(PluckedSound pitch: 220.0 dur: 6.0 loudness: 0.8) play */\n\nfunction primitiveMixPluckedSound() {\n\tvar rcvr;\n\tvar n;\n\tvar aSoundBuffer;\n\tvar startIndex;\n\tvar leftVol;\n\tvar rightVol;\n\tvar average;\n\tvar i;\n\tvar lastIndex;\n\tvar s;\n\tvar sample;\n\tvar scaledNextIndex;\n\tvar scaledThisIndex;\n\tvar sliceIndex;\n\tvar count;\n\tvar ring;\n\tvar scaledIndex;\n\tvar scaledIndexIncr;\n\tvar scaledIndexLimit;\n\tvar scaledVol;\n\tvar scaledVolIncr;\n\tvar scaledVolLimit;\n\n\trcvr = interpreterProxy.stackValue(5);\n\tn = interpreterProxy.stackIntegerValue(4);\n\taSoundBuffer = interpreterProxy.stackInt16Array(3);\n\tstartIndex = interpreterProxy.stackIntegerValue(2);\n\tleftVol = interpreterProxy.stackIntegerValue(1);\n\trightVol = interpreterProxy.stackIntegerValue(0);\n\tscaledVol = interpreterProxy.fetchIntegerofObject(3, rcvr);\n\tscaledVolIncr = interpreterProxy.fetchIntegerofObject(4, rcvr);\n\tscaledVolLimit = interpreterProxy.fetchIntegerofObject(5, rcvr);\n\tcount = interpreterProxy.fetchIntegerofObject(7, rcvr);\n\tring = interpreterProxy.fetchInt16ArrayofObject(8, rcvr);\n\tscaledIndex = interpreterProxy.fetchIntegerofObject(9, rcvr);\n\tscaledIndexIncr = interpreterProxy.fetchIntegerofObject(10, rcvr);\n\tscaledIndexLimit = interpreterProxy.fetchIntegerofObject(11, rcvr);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlastIndex = (startIndex + n) - 1;\n\tscaledThisIndex = (scaledNextIndex = scaledIndex);\n\tfor (sliceIndex = startIndex; sliceIndex <= lastIndex; sliceIndex++) {\n\t\tscaledNextIndex = scaledThisIndex + scaledIndexIncr;\n\t\tif (scaledNextIndex >= scaledIndexLimit) {\n\t\t\tscaledNextIndex = ScaleFactor + (scaledNextIndex - scaledIndexLimit);\n\t\t}\n\t\taverage = (ring[(scaledThisIndex >> 15) - 1] + ring[(scaledNextIndex >> 15) - 1]) >> 1;\n\t\tring[(scaledThisIndex >> 15) - 1] = average;\n\n\t\t/* scale by volume */\n\n\t\tsample = (average * scaledVol) >> 15;\n\t\tscaledThisIndex = scaledNextIndex;\n\t\tif (leftVol > 0) {\n\t\t\ti = (2 * sliceIndex) - 1;\n\t\t\ts = aSoundBuffer[i - 1] + ((sample * leftVol) >> 15);\n\t\t\tif (s > 32767) {\n\t\t\t\ts = 32767;\n\t\t\t}\n\t\t\tif (s < -32767) {\n\t\t\t\ts = -32767;\n\t\t\t}\n\t\t\taSoundBuffer[i - 1] = s;\n\t\t}\n\t\tif (rightVol > 0) {\n\t\t\ti = 2 * sliceIndex;\n\t\t\ts = aSoundBuffer[i - 1] + ((sample * rightVol) >> 15);\n\t\t\tif (s > 32767) {\n\t\t\t\ts = 32767;\n\t\t\t}\n\t\t\tif (s < -32767) {\n\t\t\t\ts = -32767;\n\t\t\t}\n\t\t\taSoundBuffer[i - 1] = s;\n\t\t}\n\t\tif (scaledVolIncr !== 0) {\n\t\t\tscaledVol += scaledVolIncr;\n\t\t\tif (((scaledVolIncr > 0) && (scaledVol >= scaledVolLimit)) || ((scaledVolIncr < 0) && (scaledVol <= scaledVolLimit))) {\n\n\t\t\t\t/* reached the limit; stop incrementing */\n\n\t\t\t\tscaledVol = scaledVolLimit;\n\t\t\t\tscaledVolIncr = 0;\n\t\t\t}\n\t\t}\n\t}\n\tscaledIndex = scaledNextIndex;\n\tcount -= n;\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.storeIntegerofObjectwithValue(3, rcvr, scaledVol);\n\tinterpreterProxy.storeIntegerofObjectwithValue(4, rcvr, scaledVolIncr);\n\tinterpreterProxy.storeIntegerofObjectwithValue(7, rcvr, count);\n\tinterpreterProxy.storeIntegerofObjectwithValue(9, rcvr, scaledIndex);\n\tinterpreterProxy.pop(5);\n}\n\n\n/*\tMix the given number of samples with the samples already in the given buffer starting at the given index. Assume that the buffer size is at least (index + count) - 1. */\n\nfunction primitiveMixSampledSound() {\n\tvar rcvr;\n\tvar n;\n\tvar aSoundBuffer;\n\tvar startIndex;\n\tvar leftVol;\n\tvar rightVol;\n\tvar i;\n\tvar lastIndex;\n\tvar outIndex;\n\tvar overflow;\n\tvar s;\n\tvar sample;\n\tvar sampleIndex;\n\tvar count;\n\tvar indexHighBits;\n\tvar samples;\n\tvar samplesSize;\n\tvar scaledIncrement;\n\tvar scaledIndex;\n\tvar scaledVol;\n\tvar scaledVolIncr;\n\tvar scaledVolLimit;\n\n\trcvr = interpreterProxy.stackValue(5);\n\tn = interpreterProxy.stackIntegerValue(4);\n\taSoundBuffer = interpreterProxy.stackInt16Array(3);\n\tstartIndex = interpreterProxy.stackIntegerValue(2);\n\tleftVol = interpreterProxy.stackIntegerValue(1);\n\trightVol = interpreterProxy.stackIntegerValue(0);\n\tscaledVol = interpreterProxy.fetchIntegerofObject(3, rcvr);\n\tscaledVolIncr = interpreterProxy.fetchIntegerofObject(4, rcvr);\n\tscaledVolLimit = interpreterProxy.fetchIntegerofObject(5, rcvr);\n\tcount = interpreterProxy.fetchIntegerofObject(7, rcvr);\n\tsamples = interpreterProxy.fetchInt16ArrayofObject(8, rcvr);\n\tsamplesSize = interpreterProxy.fetchIntegerofObject(10, rcvr);\n\tscaledIndex = interpreterProxy.fetchIntegerofObject(11, rcvr);\n\tindexHighBits = interpreterProxy.fetchIntegerofObject(12, rcvr);\n\tscaledIncrement = interpreterProxy.fetchIntegerofObject(13, rcvr);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tlastIndex = (startIndex + n) - 1;\n\n\t/* index of next stereo output sample pair */\n\n\toutIndex = startIndex;\n\tsampleIndex = indexHighBits + (scaledIndex >>> 16);\n\twhile ((sampleIndex <= samplesSize) && (outIndex <= lastIndex)) {\n\t\tsample = (samples[sampleIndex - 1] * scaledVol) >> 15;\n\t\tif (leftVol > 0) {\n\t\t\ti = (2 * outIndex) - 1;\n\t\t\ts = aSoundBuffer[i - 1] + ((sample * leftVol) >> 15);\n\t\t\tif (s > 32767) {\n\t\t\t\ts = 32767;\n\t\t\t}\n\t\t\tif (s < -32767) {\n\t\t\t\ts = -32767;\n\t\t\t}\n\t\t\taSoundBuffer[i - 1] = s;\n\t\t}\n\t\tif (rightVol > 0) {\n\t\t\ti = 2 * outIndex;\n\t\t\ts = aSoundBuffer[i - 1] + ((sample * rightVol) >> 15);\n\t\t\tif (s > 32767) {\n\t\t\t\ts = 32767;\n\t\t\t}\n\t\t\tif (s < -32767) {\n\t\t\t\ts = -32767;\n\t\t\t}\n\t\t\taSoundBuffer[i - 1] = s;\n\t\t}\n\t\tif (scaledVolIncr !== 0) {\n\t\t\tscaledVol += scaledVolIncr;\n\t\t\tif (((scaledVolIncr > 0) && (scaledVol >= scaledVolLimit)) || ((scaledVolIncr < 0) && (scaledVol <= scaledVolLimit))) {\n\n\t\t\t\t/* reached the limit; stop incrementing */\n\n\t\t\t\tscaledVol = scaledVolLimit;\n\t\t\t\tscaledVolIncr = 0;\n\t\t\t}\n\t\t}\n\t\tscaledIndex += scaledIncrement;\n\t\tif (scaledIndex >= ScaledIndexOverflow) {\n\t\t\toverflow = scaledIndex >>> 16;\n\t\t\tindexHighBits += overflow;\n\t\t\tscaledIndex -= overflow << 16;\n\t\t}\n\t\tsampleIndex = indexHighBits + (scaledIndex >>> 16);\n\t\t++outIndex;\n\t}\n\tcount -= n;\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.storeIntegerofObjectwithValue(3, rcvr, scaledVol);\n\tinterpreterProxy.storeIntegerofObjectwithValue(4, rcvr, scaledVolIncr);\n\tinterpreterProxy.storeIntegerofObjectwithValue(7, rcvr, count);\n\tinterpreterProxy.storeIntegerofObjectwithValue(11, rcvr, scaledIndex);\n\tinterpreterProxy.storeIntegerofObjectwithValue(12, rcvr, indexHighBits);\n\tinterpreterProxy.pop(5);\n}\n\n\n/*\tNote: This is coded so that is can be run from Squeak. */\n\nfunction setInterpreter(anInterpreter) {\n\tvar ok;\n\n\tinterpreterProxy = anInterpreter;\n\tok = interpreterProxy.majorVersion() == VM_PROXY_MAJOR;\n\tif (ok === false) {\n\t\treturn false;\n\t}\n\tok = interpreterProxy.minorVersion() >= VM_PROXY_MINOR;\n\treturn ok;\n}\n\n\nSqueak.registerExternalModule(\"SoundGenerationPlugin\", {\n\tprimitiveMixFMSound: primitiveMixFMSound,\n\tprimitiveMixSampledSound: primitiveMixSampledSound,\n\tsetInterpreter: setInterpreter,\n\tgetModuleName: getModuleName,\n\tprimitiveApplyReverb: primitiveApplyReverb,\n\tprimitiveMixPluckedSound: primitiveMixPluckedSound,\n\tprimitiveMixLoopedSampledSound: primitiveMixLoopedSampledSound,\n});\n\n}); // end of module\n","/* Smalltalk from Squeak4.5 with VMMaker 4.13.6 translated as JS source on 3 November 2014 1:52:26 pm */\n/* Automatically generated by\n\tJSPluginCodeGenerator VMMakerJS-bf.15 uuid: fd4e10f2-3773-4e80-8bb5-c4b471a014e5\n   from\n\tStarSqueakPlugin VMMaker-bf.353 uuid: 8ae25e7e-8d2c-451e-8277-598b30e9c002\n */\n\nmodule(\"users.bert.SqueakJS.plugins.StarSqueakPlugin\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";\n\nvar VM_PROXY_MAJOR = 1;\nvar VM_PROXY_MINOR = 11;\n\n/*** Functions ***/\nfunction CLASSOF(obj) { return typeof obj === \"number\" ? interpreterProxy.classSmallInteger() : obj.sqClass }\nfunction SIZEOF(obj) { return obj.pointers ? obj.pointers.length : obj.words ? obj.words.length : obj.bytes ? obj.bytes.length : 0 }\nfunction BYTESIZEOF(obj) { return obj.bytes ? obj.bytes.length : obj.words ? obj.words.length * 4 : 0 }\nfunction DIV(a, b) { return Math.floor(a / b) | 0; }   // integer division\nfunction MOD(a, b) { return a - DIV(a, b) * b | 0; }   // signed modulus\nfunction SHL(a, b) { return b > 31 ? 0 : a << b; }     // fix JS shift\nfunction SHR(a, b) { return b > 31 ? 0 : a >>> b; }    // fix JS shift\nfunction SHIFT(a, b) { return b < 0 ? (b < -31 ? 0 : a >>> (0-b) ) : (b > 31 ? 0 : a << b); }\n\n/*** Variables ***/\nvar interpreterProxy = null;\nvar moduleName = \"StarSqueakPlugin 3 November 2014 (e)\";\n\n\n\n/*\tReturn an unsigned int pointer to the first indexable word of oop, which must be a words object. */\n\nfunction checkedUnsignedIntPtrOf(oop) {\n\tinterpreterProxy.success(interpreterProxy.isWords(oop));\n\tif (interpreterProxy.failed()) {\n\t\treturn 0;\n\t}\n\treturn oop.words;\n}\n\n\n/*\tNote: This is hardcoded so it can be run from Squeak.\n\tThe module name is used for validating a module *after*\n\tit is loaded to check if it does really contain the module\n\twe're thinking it contains. This is important! */\n\nfunction getModuleName() {\n\treturn moduleName;\n}\n\nfunction halt() {\n\t;\n}\n\n\n/*\tDiffuse the integer values of the source patch variable Bitmap into the output Bitmap. Each cell of the output is the average of the NxN area around it in the source, where N = (2 * delta) + 1. */\n\nfunction primitiveDiffuseFromToWidthHeightDelta() {\n\tvar area;\n\tvar delta;\n\tvar dst;\n\tvar dstOop;\n\tvar endX;\n\tvar endY;\n\tvar height;\n\tvar rowStart;\n\tvar src;\n\tvar srcOop;\n\tvar startX;\n\tvar startY;\n\tvar sum;\n\tvar width;\n\tvar x;\n\tvar x2;\n\tvar y;\n\tvar y2;\n\n\tsrcOop = interpreterProxy.stackValue(4);\n\tdstOop = interpreterProxy.stackValue(3);\n\twidth = interpreterProxy.stackIntegerValue(2);\n\theight = interpreterProxy.stackIntegerValue(1);\n\tdelta = interpreterProxy.stackIntegerValue(0);\n\tsrc = checkedUnsignedIntPtrOf(srcOop);\n\tdst = checkedUnsignedIntPtrOf(dstOop);\n\tinterpreterProxy.success(SIZEOF(srcOop) === SIZEOF(dstOop));\n\tinterpreterProxy.success(SIZEOF(srcOop) === (width * height));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tarea = ((2 * delta) + 1) * ((2 * delta) + 1);\n\tfor (y = 0; y <= (height - 1); y++) {\n\t\tstartY = y - delta;\n\t\tif (startY < 0) {\n\t\t\tstartY = 0;\n\t\t}\n\t\tendY = y + delta;\n\t\tif (endY >= height) {\n\t\t\tendY = height - 1;\n\t\t}\n\t\tfor (x = 0; x <= (width - 1); x++) {\n\t\t\tstartX = x - delta;\n\t\t\tif (startX < 0) {\n\t\t\t\tstartX = 0;\n\t\t\t}\n\t\t\tendX = x + delta;\n\t\t\tif (endX >= width) {\n\t\t\t\tendX = width - 1;\n\t\t\t}\n\t\t\tsum = 0;\n\t\t\tfor (y2 = startY; y2 <= endY; y2++) {\n\t\t\t\trowStart = y2 * width;\n\t\t\t\tfor (x2 = startX; x2 <= endX; x2++) {\n\t\t\t\t\tsum += src[rowStart + x2];\n\t\t\t\t}\n\t\t\t}\n\t\t\tdst[(y * width) + x] = (DIV(sum, area));\n\t\t}\n\t}\n\tinterpreterProxy.pop(5);\n}\n\n\n/*\tEvaporate the integer values of the source Bitmap at the given rate. The rate is an integer between 0 and 1024, where 1024 is a scale factor of 1.0 (i.e., no evaporation). */\n\nfunction primitiveEvaporateRate() {\n\tvar i;\n\tvar patchVar;\n\tvar patchVarOop;\n\tvar rate;\n\tvar sz;\n\n\tpatchVarOop = interpreterProxy.stackValue(1);\n\trate = interpreterProxy.stackIntegerValue(0);\n\tpatchVar = checkedUnsignedIntPtrOf(patchVarOop);\n\tsz = SIZEOF(patchVarOop);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tfor (i = 0; i <= (sz - 1); i++) {\n\t\tpatchVar[i] = ((patchVar[i] * rate) >>> 10);\n\t}\n\tinterpreterProxy.pop(2);\n}\n\nfunction primitiveMapFromToWidthHeightPatchSizeRgbFlagsShift() {\n\tvar dst;\n\tvar dstIndex;\n\tvar dstOop;\n\tvar h;\n\tvar level;\n\tvar offset;\n\tvar patchSize;\n\tvar pixel;\n\tvar rgbFlags;\n\tvar rgbMult;\n\tvar rowStart;\n\tvar shiftAmount;\n\tvar src;\n\tvar srcIndex;\n\tvar srcOop;\n\tvar w;\n\tvar x;\n\tvar y;\n\n\tsrcOop = interpreterProxy.stackValue(6);\n\tdstOop = interpreterProxy.stackValue(5);\n\tw = interpreterProxy.stackIntegerValue(4);\n\th = interpreterProxy.stackIntegerValue(3);\n\tpatchSize = interpreterProxy.stackIntegerValue(2);\n\trgbFlags = interpreterProxy.stackIntegerValue(1);\n\tshiftAmount = interpreterProxy.stackIntegerValue(0);\n\tsrc = checkedUnsignedIntPtrOf(srcOop);\n\tdst = checkedUnsignedIntPtrOf(dstOop);\n\tinterpreterProxy.success(SIZEOF(dstOop) === (w * h));\n\tinterpreterProxy.success(SIZEOF(dstOop) === ((SIZEOF(srcOop) * patchSize) * patchSize));\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\trgbMult = 0;\n\tif ((rgbFlags & 4) > 0) {\n\t\trgbMult += 65536;\n\t}\n\tif ((rgbFlags & 2) > 0) {\n\t\trgbMult += 256;\n\t}\n\tif ((rgbFlags & 1) > 0) {\n\t\t++rgbMult;\n\t}\n\tsrcIndex = -1;\n\tfor (y = 0; y <= ((DIV(h, patchSize)) - 1); y++) {\n\t\tfor (x = 0; x <= ((DIV(w, patchSize)) - 1); x++) {\n\t\t\tlevel = SHIFT(src[(++srcIndex)], shiftAmount);\n\t\t\tif (level > 255) {\n\t\t\t\tlevel = 255;\n\t\t\t}\n\t\t\tif (level <= 0) {\n\n\t\t\t\t/* non-transparent black */\n\n\t\t\t\tpixel = 1;\n\t\t\t} else {\n\t\t\t\tpixel = level * rgbMult;\n\t\t\t}\n\t\t\toffset = ((y * w) + x) * patchSize;\n\t\t\tfor (rowStart = offset; rowStart <= (offset + ((patchSize - 1) * w)); rowStart += w) {\n\t\t\t\tfor (dstIndex = rowStart; dstIndex <= ((rowStart + patchSize) - 1); dstIndex++) {\n\t\t\t\t\tdst[dstIndex] = pixel;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tinterpreterProxy.pop(7);\n}\n\n\n/*\tNote: This is coded so that is can be run from Squeak. */\n\nfunction setInterpreter(anInterpreter) {\n\tvar ok;\n\n\tinterpreterProxy = anInterpreter;\n\tok = interpreterProxy.majorVersion() == VM_PROXY_MAJOR;\n\tif (ok === false) {\n\t\treturn false;\n\t}\n\tok = interpreterProxy.minorVersion() >= VM_PROXY_MINOR;\n\treturn ok;\n}\n\n\nSqueak.registerExternalModule(\"StarSqueakPlugin\", {\n\tprimitiveDiffuseFromToWidthHeightDelta: primitiveDiffuseFromToWidthHeightDelta,\n\tprimitiveEvaporateRate: primitiveEvaporateRate,\n\tsetInterpreter: setInterpreter,\n\tprimitiveMapFromToWidthHeightPatchSizeRgbFlagsShift: primitiveMapFromToWidthHeightPatchSizeRgbFlagsShift,\n\tgetModuleName: getModuleName,\n});\n\n}); // end of module\n","/* Smalltalk from Squeak4.5 with VMMaker 4.13.6 translated as JS source on 3 November 2014 1:52:20 pm */\n/* Automatically generated by\n\tJSPluginCodeGenerator VMMakerJS-bf.15 uuid: fd4e10f2-3773-4e80-8bb5-c4b471a014e5\n   from\n\tDeflatePlugin VMMaker-bf.353 uuid: 8ae25e7e-8d2c-451e-8277-598b30e9c002\n */\n\nmodule(\"users.bert.SqueakJS.plugins.ZipPlugin\").requires(\"users.bert.SqueakJS.vm\").toRun(function() {\n\"use strict\";\n\nvar VM_PROXY_MAJOR = 1;\nvar VM_PROXY_MINOR = 11;\n\n/*** Functions ***/\nfunction CLASSOF(obj) { return typeof obj === \"number\" ? interpreterProxy.classSmallInteger() : obj.sqClass }\nfunction SIZEOF(obj) { return obj.pointers ? obj.pointers.length : obj.words ? obj.words.length : obj.bytes ? obj.bytes.length : 0 }\nfunction BYTESIZEOF(obj) { return obj.bytes ? obj.bytes.length : obj.words ? obj.words.length * 4 : 0 }\nfunction DIV(a, b) { return Math.floor(a / b) | 0; }   // integer division\nfunction MOD(a, b) { return a - DIV(a, b) * b | 0; }   // signed modulus\nfunction SHL(a, b) { return b > 31 ? 0 : a << b; }     // fix JS shift\nfunction SHR(a, b) { return b > 31 ? 0 : a >>> b; }    // fix JS shift\nfunction SHIFT(a, b) { return b < 0 ? (b < -31 ? 0 : a >>> (0-b) ) : (b > 31 ? 0 : a << b); }\n\n/*** Constants ***/\nvar DeflateHashMask = 32767;\nvar DeflateHashShift = 5;\nvar DeflateHashTableSize = 32768;\nvar DeflateMaxDistance = 32768;\nvar DeflateMaxDistanceCodes = 30;\nvar DeflateMaxLiteralCodes = 286;\nvar DeflateMaxMatch = 258;\nvar DeflateMinMatch = 3;\nvar DeflateWindowMask = 32767;\nvar DeflateWindowSize = 32768;\nvar MaxBits = 16;\nvar StateNoMoreData = 1;\n\n/*** Variables ***/\nvar interpreterProxy = null;\nvar moduleName = \"ZipPlugin 3 November 2014 (e)\";\nvar readStreamInstSize = 0;\nvar writeStreamInstSize = 0;\nvar zipBaseDistance = [\n0, 1, 2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64, 96, 128, 192, \n256, 384, 512, 768, 1024, 1536, 2048, 3072, 4096, 6144, 8192, 12288, 16384, 24576];\nvar zipBaseLength = [\n0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 16, 20, 24, 28, \n32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 0];\nvar zipBitBuf = 0;\nvar zipBitPos = 0;\nvar zipBlockPos = 0;\nvar zipBlockStart = 0;\nvar zipCollection = null;\nvar zipCollectionSize = 0;\nvar zipCrcTable = [\n0, 1996959894, 3993919788, 2567524794, 124634137, 1886057615, 3915621685, 2657392035, 249268274, 2044508324, 3772115230, 2547177864, 162941995, 2125561021, 3887607047, 2428444049, \n498536548, 1789927666, 4089016648, 2227061214, 450548861, 1843258603, 4107580753, 2211677639, 325883990, 1684777152, 4251122042, 2321926636, 335633487, 1661365465, 4195302755, 2366115317, \n997073096, 1281953886, 3579855332, 2724688242, 1006888145, 1258607687, 3524101629, 2768942443, 901097722, 1119000684, 3686517206, 2898065728, 853044451, 1172266101, 3705015759, 2882616665, \n651767980, 1373503546, 3369554304, 3218104598, 565507253, 1454621731, 3485111705, 3099436303, 671266974, 1594198024, 3322730930, 2970347812, 795835527, 1483230225, 3244367275, 3060149565, \n1994146192, 31158534, 2563907772, 4023717930, 1907459465, 112637215, 2680153253, 3904427059, 2013776290, 251722036, 2517215374, 3775830040, 2137656763, 141376813, 2439277719, 3865271297, \n1802195444, 476864866, 2238001368, 4066508878, 1812370925, 453092731, 2181625025, 4111451223, 1706088902, 314042704, 2344532202, 4240017532, 1658658271, 366619977, 2362670323, 4224994405, \n1303535960, 984961486, 2747007092, 3569037538, 1256170817, 1037604311, 2765210733, 3554079995, 1131014506, 879679996, 2909243462, 3663771856, 1141124467, 855842277, 2852801631, 3708648649, \n1342533948, 654459306, 3188396048, 3373015174, 1466479909, 544179635, 3110523913, 3462522015, 1591671054, 702138776, 2966460450, 3352799412, 1504918807, 783551873, 3082640443, 3233442989, \n3988292384, 2596254646, 62317068, 1957810842, 3939845945, 2647816111, 81470997, 1943803523, 3814918930, 2489596804, 225274430, 2053790376, 3826175755, 2466906013, 167816743, 2097651377, \n4027552580, 2265490386, 503444072, 1762050814, 4150417245, 2154129355, 426522225, 1852507879, 4275313526, 2312317920, 282753626, 1742555852, 4189708143, 2394877945, 397917763, 1622183637, \n3604390888, 2714866558, 953729732, 1340076626, 3518719985, 2797360999, 1068828381, 1219638859, 3624741850, 2936675148, 906185462, 1090812512, 3747672003, 2825379669, 829329135, 1181335161, \n3412177804, 3160834842, 628085408, 1382605366, 3423369109, 3138078467, 570562233, 1426400815, 3317316542, 2998733608, 733239954, 1555261956, 3268935591, 3050360625, 752459403, 1541320221, \n2607071920, 3965973030, 1969922972, 40735498, 2617837225, 3943577151, 1913087877, 83908371, 2512341634, 3803740692, 2075208622, 213261112, 2463272603, 3855990285, 2094854071, 198958881, \n2262029012, 4057260610, 1759359992, 534414190, 2176718541, 4139329115, 1873836001, 414664567, 2282248934, 4279200368, 1711684554, 285281116, 2405801727, 4167216745, 1634467795, 376229701, \n2685067896, 3608007406, 1308918612, 956543938, 2808555105, 3495958263, 1231636301, 1047427035, 2932959818, 3654703836, 1088359270, 936918000, 2847714899, 3736837829, 1202900863, 817233897, \n3183342108, 3401237130, 1404277552, 615818150, 3134207493, 3453421203, 1423857449, 601450431, 3009837614, 3294710456, 1567103746, 711928724, 3020668471, 3272380065, 1510334235, 755167117];\nvar zipDistTable = null;\nvar zipDistTableSize = 0;\nvar zipDistanceCodes = [\n0, 1, 2, 3, 4, 4, 5, 5, 6, 6, 6, 6, 7, 7, 7, 7, \n8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, \n10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, \n11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, \n12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, \n12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, \n13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, \n13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, \n14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, \n14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, \n14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, \n14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, \n15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, \n15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, \n15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, \n15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, \n0, 0, 16, 17, 18, 18, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, \n22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, \n24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, \n25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, \n26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, \n26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, \n27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, \n27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, \n28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, \n28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, \n28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, \n28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, \n29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, \n29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, \n29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, \n29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29];\nvar zipDistanceFreq = null;\nvar zipDistances = null;\nvar zipExtraDistanceBits = [\n0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, \n7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13];\nvar zipExtraLengthBits = [\n0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, \n3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0];\nvar zipHashHead = null;\nvar zipHashTail = null;\nvar zipHashValue = 0;\nvar zipLitTable = null;\nvar zipLitTableSize = 0;\nvar zipLiteralCount = 0;\nvar zipLiteralFreq = null;\nvar zipLiteralSize = 0;\nvar zipLiterals = null;\nvar zipMatchCount = 0;\nvar zipMatchLengthCodes = [\n257, 258, 259, 260, 261, 262, 263, 264, 265, 265, 266, 266, 267, 267, 268, 268, \n269, 269, 269, 269, 270, 270, 270, 270, 271, 271, 271, 271, 272, 272, 272, 272, \n273, 273, 273, 273, 273, 273, 273, 273, 274, 274, 274, 274, 274, 274, 274, 274, \n275, 275, 275, 275, 275, 275, 275, 275, 276, 276, 276, 276, 276, 276, 276, 276, \n277, 277, 277, 277, 277, 277, 277, 277, 277, 277, 277, 277, 277, 277, 277, 277, \n278, 278, 278, 278, 278, 278, 278, 278, 278, 278, 278, 278, 278, 278, 278, 278, \n279, 279, 279, 279, 279, 279, 279, 279, 279, 279, 279, 279, 279, 279, 279, 279, \n280, 280, 280, 280, 280, 280, 280, 280, 280, 280, 280, 280, 280, 280, 280, 280, \n281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, \n281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, 281, \n282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, \n282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, 282, \n283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, \n283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, 283, \n284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, \n284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284, 284];\nvar zipPosition = 0;\nvar zipReadLimit = 0;\nvar zipSource = null;\nvar zipSourceLimit = 0;\nvar zipSourcePos = 0;\nvar zipState = 0;\n\n\n\n/*\tCompare the two strings and return the length of matching characters.\n\tminLength is a lower bound for match lengths that will be accepted.\n\tNote: here and matchPos are zero based. */\n\nfunction comparewithmin(here, matchPos, minLength) {\n\tvar length;\n\n\n\t/* First test if we can actually get longer than minLength */\n\n\tif (zipCollection[here + minLength] !== zipCollection[matchPos + minLength]) {\n\t\treturn 0;\n\t}\n\tif (zipCollection[(here + minLength) - 1] !== zipCollection[(matchPos + minLength) - 1]) {\n\t\treturn 0;\n\t}\n\tif (zipCollection[here] !== zipCollection[matchPos]) {\n\t\treturn 0;\n\t}\n\tif (zipCollection[here + 1] !== zipCollection[matchPos + 1]) {\n\t\treturn 1;\n\t}\n\tlength = 2;\n\twhile ((length < DeflateMaxMatch) && (zipCollection[here + length] === zipCollection[matchPos + length])) {\n\t\t++length;\n\t}\n\treturn length;\n}\n\n\n/*\tContinue deflating the receiver's collection from blockPosition to lastIndex.\n\tNote that lastIndex must be at least MaxMatch away from the end of collection */\n\nfunction deflateBlockchainLengthgoodMatch(lastIndex, chainLength, goodMatch) {\n\tvar flushNeeded;\n\tvar hasMatch;\n\tvar here;\n\tvar hereLength;\n\tvar hereMatch;\n\tvar i;\n\tvar matchResult;\n\tvar newLength;\n\tvar newMatch;\n\n\tif (zipBlockPos > lastIndex) {\n\t\treturn false;\n\t}\n\tif (zipLiteralCount >= zipLiteralSize) {\n\t\treturn true;\n\t}\n\thasMatch = false;\n\there = zipBlockPos;\n\twhile (here <= lastIndex) {\n\t\tif (!hasMatch) {\n\n\t\t\t/* Find the first match */\n\n\t\t\tmatchResult = findMatchlastLengthlastMatchchainLengthgoodMatch(here, DeflateMinMatch - 1, here, chainLength, goodMatch);\n\t\t\tinsertStringAt(here);\n\t\t\thereMatch = matchResult & 65535;\n\t\t\thereLength = matchResult >>> 16;\n\t\t}\n\t\tmatchResult = findMatchlastLengthlastMatchchainLengthgoodMatch(here + 1, hereLength, hereMatch, chainLength, goodMatch);\n\t\tnewMatch = matchResult & 65535;\n\n\t\t/* Now check if the next match is better than the current one.\n\t\tIf not, output the current match (provided that the current match\n\t\tis at least MinMatch long) */\n\n\t\tnewLength = matchResult >>> 16;\n\t\tif ((hereLength >= newLength) && (hereLength >= DeflateMinMatch)) {\n\n\t\t\t/* Encode the current match */\n\n\n\t\t\t/* Insert all strings up to the end of the current match.\n\t\t\tNote: The first string has already been inserted. */\n\n\t\t\tflushNeeded = encodeMatchdistance(hereLength, here - hereMatch);\n\t\t\tfor (i = 1; i <= (hereLength - 1); i++) {\n\t\t\t\tinsertStringAt((++here));\n\t\t\t}\n\t\t\thasMatch = false;\n\t\t\t++here;\n\t\t} else {\n\n\t\t\t/* Either the next match is better than the current one or we didn't\n\t\t\thave a good match after all (e.g., current match length < MinMatch).\n\t\t\tOutput a single literal. */\n\n\t\t\tflushNeeded = encodeLiteral(zipCollection[here]);\n\t\t\t++here;\n\t\t\tif ((here <= lastIndex) && (!flushNeeded)) {\n\n\t\t\t\t/* Cache the results for the next round */\n\n\t\t\t\tinsertStringAt(here);\n\t\t\t\thasMatch = true;\n\t\t\t\thereMatch = newMatch;\n\t\t\t\thereLength = newLength;\n\t\t\t}\n\t\t}\n\t\tif (flushNeeded) {\n\t\t\tzipBlockPos = here;\n\t\t\treturn true;\n\t\t}\n\t}\n\tzipBlockPos = here;\n\treturn false;\n}\n\n\n/*\tDetermine the inst size of the class above DeflateStream by\n\t looking for the first class whose inst size is less than 13. */\n\nfunction determineSizeOfReadStream(rcvr) {\n\tvar sq_class;\n\n\tsq_class = CLASSOF(rcvr);\n\twhile ((!sq_class.isNil) && (sq_class.classInstSize() >= 13)) {\n\t\tsq_class = sq_class.superclass();\n\t}\n\tif (sq_class.isNil) {\n\t\treturn false;\n\t}\n\treadStreamInstSize = sq_class.classInstSize();\n\treturn true;\n}\n\n\n/*\tDetermine the inst size of the class above DeflateStream or\n\t ZipEncoder by looking for the first class whose inst size is less than 7. */\n\nfunction determineSizeOfWriteStream(rcvr) {\n\tvar sq_class;\n\n\tsq_class = CLASSOF(rcvr);\n\twhile ((!sq_class.isNil) && (sq_class.classInstSize() >= 7)) {\n\t\tsq_class = sq_class.superclass();\n\t}\n\tif (sq_class.isNil) {\n\t\treturn false;\n\t}\n\twriteStreamInstSize = sq_class.classInstSize();\n\treturn true;\n}\n\n\n/*\tEncode the given literal */\n\nfunction encodeLiteral(lit) {\n\tzipLiterals[zipLiteralCount] = lit;\n\tzipDistances[zipLiteralCount] = 0;\n\tzipLiteralFreq[lit]++;\n\t++zipLiteralCount;\n\treturn (zipLiteralCount === zipLiteralSize) || (((zipLiteralCount & 4095) === 0) && (shouldFlush()));\n}\n\n\n/*\tEncode the given match of length length starting at dist bytes ahead */\n\nfunction encodeMatchdistance(length, dist) {\n\tvar distance;\n\tvar literal;\n\n\tzipLiterals[zipLiteralCount] = (length - DeflateMinMatch);\n\tzipDistances[zipLiteralCount] = dist;\n\tliteral = zipMatchLengthCodes[length - DeflateMinMatch];\n\tzipLiteralFreq[literal]++;\n\tif (dist < 257) {\n\t\tdistance = zipDistanceCodes[dist - 1];\n\t} else {\n\t\tdistance = zipDistanceCodes[256 + ((dist - 1) >>> 7)];\n\t}\n\tzipDistanceFreq[distance]++;\n\t++zipLiteralCount;\n\t++zipMatchCount;\n\treturn (zipLiteralCount === zipLiteralSize) || (((zipLiteralCount & 4095) === 0) && (shouldFlush()));\n}\n\n\n/*\tFind the longest match for the string starting at here.\n\tIf there is no match longer than lastLength return lastMatch/lastLength.\n\tTraverse at most maxChainLength entries in the hash table.\n\tStop if a match of at least goodMatch size has been found. */\n\nfunction findMatchlastLengthlastMatchchainLengthgoodMatch(here, lastLength, lastMatch, maxChainLength, goodMatch) {\n\tvar bestLength;\n\tvar chainLength;\n\tvar distance;\n\tvar length;\n\tvar limit;\n\tvar matchPos;\n\tvar matchResult;\n\n\n\t/* Compute the default match result */\n\n\n\t/* There is no way to find a better match than MaxMatch */\n\n\tmatchResult = (lastLength << 16) | lastMatch;\n\tif (lastLength >= DeflateMaxMatch) {\n\t\treturn matchResult;\n\t}\n\n\t/* Compute the distance to the (possible) match */\n\n\tmatchPos = zipHashHead[updateHashAt((here + DeflateMinMatch) - 1)];\n\n\t/* Note: It is required that 0 < distance < MaxDistance */\n\n\tdistance = here - matchPos;\n\tif (!((distance > 0) && (distance < DeflateMaxDistance))) {\n\t\treturn matchResult;\n\t}\n\n\t/* Max. nr of match chain to search */\n\n\tchainLength = maxChainLength;\n\tif (here > DeflateMaxDistance) {\n\n\t\t/* Limit for matches that are too old */\n\n\t\tlimit = here - DeflateMaxDistance;\n\t} else {\n\t\tlimit = 0;\n\t}\n\tbestLength = lastLength;\n\twhile (true) {\n\n\t\t/* Compare the current string with the string at match position */\n\n\n\t\t/* Truncate accidental matches beyound stream position */\n\n\t\tlength = comparewithmin(here, matchPos, bestLength);\n\t\tif ((here + length) > zipPosition) {\n\t\t\tlength = zipPosition - here;\n\t\t}\n\t\tif ((length === DeflateMinMatch) && ((here - matchPos) > (DeflateMaxDistance >> 2))) {\n\t\t\tlength = DeflateMinMatch - 1;\n\t\t}\n\t\tif (length > bestLength) {\n\n\t\t\t/* We have a new (better) match than before */\n\t\t\t/* Compute the new match result */\n\n\t\t\tmatchResult = (length << 16) | matchPos;\n\n\t\t\t/* There is no way to find a better match than MaxMatch */\n\n\t\t\tbestLength = length;\n\t\t\tif (bestLength >= DeflateMaxMatch) {\n\t\t\t\treturn matchResult;\n\t\t\t}\n\t\t\tif (bestLength > goodMatch) {\n\t\t\t\treturn matchResult;\n\t\t\t}\n\t\t}\n\t\tif (!(((--chainLength)) > 0)) {\n\t\t\treturn matchResult;\n\t\t}\n\t\tmatchPos = zipHashTail[matchPos & DeflateWindowMask];\n\t\tif (matchPos <= limit) {\n\t\t\treturn matchResult;\n\t\t}\n\t}\n}\n\n\n/*\tNote: This is hardcoded so it can be run from Squeak.\n\tThe module name is used for validating a module *after*\n\tit is loaded to check if it does really contain the module\n\twe're thinking it contains. This is important! */\n\nfunction getModuleName() {\n\treturn moduleName;\n}\n\nfunction halt() {\n\t;\n}\n\n\n/*\tInsert the string at the given start position into the hash table.\n\tNote: The hash value is updated starting at MinMatch-1 since\n\tall strings before have already been inserted into the hash table\n\t(and the hash value is updated as well). */\n\nfunction insertStringAt(here) {\n\tvar prevEntry;\n\n\tzipHashValue = updateHashAt((here + DeflateMinMatch) - 1);\n\tprevEntry = zipHashHead[zipHashValue];\n\tzipHashHead[zipHashValue] = here;\n\tzipHashTail[here & DeflateWindowMask] = prevEntry;\n}\n\nfunction loadDeflateStreamFrom(rcvr) {\n\tvar oop;\n\n\tif (!(interpreterProxy.isPointers(rcvr) && (SIZEOF(rcvr) >= 15))) {\n\t\treturn false;\n\t}\n\toop = interpreterProxy.fetchPointerofObject(0, rcvr);\n\tif (!interpreterProxy.isBytes(oop)) {\n\t\treturn false;\n\t}\n\tif (writeStreamInstSize === 0) {\n\t\tif (!determineSizeOfWriteStream(rcvr)) {\n\t\t\treturn false;\n\t\t}\n\t\tif (SIZEOF(rcvr) < (writeStreamInstSize + 5)) {\n\t\t\twriteStreamInstSize = 0;\n\t\t\treturn false;\n\t\t}\n\t}\n\tzipCollection = oop.bytes;\n\tzipCollectionSize = BYTESIZEOF(oop);\n\tzipPosition = interpreterProxy.fetchIntegerofObject(1, rcvr);\n\n\t/* zipWriteLimit := interpreterProxy fetchInteger: 3 ofObject: rcvr. */\n\n\tzipReadLimit = interpreterProxy.fetchIntegerofObject(2, rcvr);\n\toop = interpreterProxy.fetchPointerofObject(writeStreamInstSize + 0, rcvr);\n\tif (!(interpreterProxy.isWords(oop) && (SIZEOF(oop) === DeflateHashTableSize))) {\n\t\treturn false;\n\t}\n\tzipHashHead = oop.words;\n\toop = interpreterProxy.fetchPointerofObject(writeStreamInstSize + 1, rcvr);\n\tif (!(interpreterProxy.isWords(oop) && (SIZEOF(oop) === DeflateWindowSize))) {\n\t\treturn false;\n\t}\n\tzipHashTail = oop.words;\n\tzipHashValue = interpreterProxy.fetchIntegerofObject(writeStreamInstSize + 2, rcvr);\n\n\t/* zipBlockStart := interpreterProxy fetchInteger: writeStreamInstSize + 4 ofObject: rcvr. */\n\n\tzipBlockPos = interpreterProxy.fetchIntegerofObject(writeStreamInstSize + 3, rcvr);\n\toop = interpreterProxy.fetchPointerofObject(writeStreamInstSize + 5, rcvr);\n\tif (!interpreterProxy.isBytes(oop)) {\n\t\treturn false;\n\t}\n\tzipLiteralSize = SIZEOF(oop);\n\tzipLiterals = oop.bytes;\n\toop = interpreterProxy.fetchPointerofObject(writeStreamInstSize + 6, rcvr);\n\tif (!(interpreterProxy.isWords(oop) && (SIZEOF(oop) >= zipLiteralSize))) {\n\t\treturn false;\n\t}\n\tzipDistances = oop.words;\n\toop = interpreterProxy.fetchPointerofObject(writeStreamInstSize + 7, rcvr);\n\tif (!(interpreterProxy.isWords(oop) && (SIZEOF(oop) === DeflateMaxLiteralCodes))) {\n\t\treturn false;\n\t}\n\tzipLiteralFreq = oop.words;\n\toop = interpreterProxy.fetchPointerofObject(writeStreamInstSize + 8, rcvr);\n\tif (!(interpreterProxy.isWords(oop) && (SIZEOF(oop) === DeflateMaxDistanceCodes))) {\n\t\treturn false;\n\t}\n\tzipDistanceFreq = oop.words;\n\tzipLiteralCount = interpreterProxy.fetchIntegerofObject(writeStreamInstSize + 9, rcvr);\n\tzipMatchCount = interpreterProxy.fetchIntegerofObject(writeStreamInstSize + 10, rcvr);\n\treturn !interpreterProxy.failed();\n}\n\nfunction loadZipEncoderFrom(rcvr) {\n\tvar oop;\n\n\tif (writeStreamInstSize === 0) {\n\t\tif (!determineSizeOfWriteStream(rcvr)) {\n\t\t\treturn false;\n\t\t}\n\t\tif (SIZEOF(rcvr) < (writeStreamInstSize + 3)) {\n\t\t\twriteStreamInstSize = 0;\n\t\t\treturn false;\n\t\t}\n\t}\n\tif (!(interpreterProxy.isPointers(rcvr) && (SIZEOF(rcvr) >= (writeStreamInstSize + 3)))) {\n\t\treturn false;\n\t}\n\toop = interpreterProxy.fetchPointerofObject(0, rcvr);\n\tif (!interpreterProxy.isBytes(oop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tzipCollection = oop.bytes;\n\tzipCollectionSize = BYTESIZEOF(oop);\n\tzipPosition = interpreterProxy.fetchIntegerofObject(1, rcvr);\n\n\t/* zipWriteLimit := interpreterProxy fetchInteger: 3 ofObject: rcvr. */\n\n\tzipReadLimit = interpreterProxy.fetchIntegerofObject(2, rcvr);\n\tzipBitBuf = interpreterProxy.fetchIntegerofObject(writeStreamInstSize + 1, rcvr);\n\tzipBitPos = interpreterProxy.fetchIntegerofObject(writeStreamInstSize + 2, rcvr);\n\treturn !interpreterProxy.failed();\n}\n\n\n/*\tRequire:\n\t\tzipCollection, zipCollectionSize, zipPosition,\n\t\tzipBitBuf, zipBitPos.\n\t */\n\nfunction nextZipBitsput(nBits, value) {\n\tif (!((value >= 0) && ((SHL(1, nBits)) > value))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tzipBitBuf = zipBitBuf | (SHL(value, zipBitPos));\n\tzipBitPos += nBits;\n\twhile ((zipBitPos >= 8) && (zipPosition < zipCollectionSize)) {\n\t\tzipCollection[zipPosition] = (zipBitBuf & 255);\n\t\t++zipPosition;\n\t\tzipBitBuf = zipBitBuf >>> 8;\n\t\tzipBitPos -= 8;\n\t}\n}\n\n\n/*\tPrimitive. Deflate the current contents of the receiver. */\n\nfunction primitiveDeflateBlock() {\n\tvar chainLength;\n\tvar goodMatch;\n\tvar lastIndex;\n\tvar rcvr;\n\tvar result;\n\n\tif (interpreterProxy.methodArgumentCount() !== 3) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tgoodMatch = interpreterProxy.stackIntegerValue(0);\n\tchainLength = interpreterProxy.stackIntegerValue(1);\n\tlastIndex = interpreterProxy.stackIntegerValue(2);\n\trcvr = interpreterProxy.stackObjectValue(3);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\t;\n\tif (!loadDeflateStreamFrom(rcvr)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tresult = deflateBlockchainLengthgoodMatch(lastIndex, chainLength, goodMatch);\n\tif (!interpreterProxy.failed()) {\n\n\t\t/* Store back modified values */\n\n\t\tinterpreterProxy.storeIntegerofObjectwithValue(writeStreamInstSize + 2, rcvr, zipHashValue);\n\t\tinterpreterProxy.storeIntegerofObjectwithValue(writeStreamInstSize + 3, rcvr, zipBlockPos);\n\t\tinterpreterProxy.storeIntegerofObjectwithValue(writeStreamInstSize + 9, rcvr, zipLiteralCount);\n\t\tinterpreterProxy.storeIntegerofObjectwithValue(writeStreamInstSize + 10, rcvr, zipMatchCount);\n\t}\n\tif (!interpreterProxy.failed()) {\n\t\tinterpreterProxy.pop(4);\n\t\tinterpreterProxy.pushBool(result);\n\t}\n}\n\n\n/*\tPrimitive. Update the hash tables after data has been moved by delta. */\n\nfunction primitiveDeflateUpdateHashTable() {\n\tvar delta;\n\tvar entry;\n\tvar i;\n\tvar table;\n\tvar tablePtr;\n\tvar tableSize;\n\n\tif (interpreterProxy.methodArgumentCount() !== 2) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tdelta = interpreterProxy.stackIntegerValue(0);\n\ttable = interpreterProxy.stackObjectValue(1);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!interpreterProxy.isWords(table)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\ttableSize = SIZEOF(table);\n\ttablePtr = table.wordsAsInt32Array();\n\tfor (i = 0; i <= (tableSize - 1); i++) {\n\t\tentry = tablePtr[i];\n\t\tif (entry >= delta) {\n\t\t\ttablePtr[i] = (entry - delta);\n\t\t} else {\n\t\t\ttablePtr[i] = 0;\n\t\t}\n\t}\n\tinterpreterProxy.pop(2);\n}\n\n\n/*\tPrimitive. Inflate a single block. */\n\nfunction primitiveInflateDecompressBlock() {\n\tvar oop;\n\tvar rcvr;\n\n\tif (interpreterProxy.methodArgumentCount() !== 2) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\toop = interpreterProxy.stackValue(0);\n\tif (!interpreterProxy.isWords(oop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tzipDistTable = oop.words;\n\n\t/* literal table */\n\n\tzipDistTableSize = SIZEOF(oop);\n\toop = interpreterProxy.stackValue(1);\n\tif (!interpreterProxy.isWords(oop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tzipLitTable = oop.words;\n\n\t/* Receiver (InflateStream) */\n\n\tzipLitTableSize = SIZEOF(oop);\n\trcvr = interpreterProxy.stackValue(2);\n\tif (!interpreterProxy.isPointers(rcvr)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (readStreamInstSize === 0) {\n\t\tif (!determineSizeOfReadStream(rcvr)) {\n\t\t\treturn interpreterProxy.primitiveFail();\n\t\t}\n\t\tif (SIZEOF(rcvr) < (readStreamInstSize + 8)) {\n\t\t\treadStreamInstSize = 0;\n\t\t\treturn interpreterProxy.primitiveFail();\n\t\t}\n\t}\n\tif (SIZEOF(rcvr) < (readStreamInstSize + 8)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tzipReadLimit = interpreterProxy.fetchIntegerofObject(2, rcvr);\n\tzipState = interpreterProxy.fetchIntegerofObject(readStreamInstSize + 0, rcvr);\n\tzipBitBuf = interpreterProxy.fetchIntegerofObject(readStreamInstSize + 1, rcvr);\n\tzipBitPos = interpreterProxy.fetchIntegerofObject(readStreamInstSize + 2, rcvr);\n\tzipSourcePos = interpreterProxy.fetchIntegerofObject(readStreamInstSize + 4, rcvr);\n\tzipSourceLimit = interpreterProxy.fetchIntegerofObject(readStreamInstSize + 5, rcvr);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\t--zipReadLimit;\n\t--zipSourcePos;\n\n\t/* collection */\n\n\t--zipSourceLimit;\n\toop = interpreterProxy.fetchPointerofObject(0, rcvr);\n\tif (!interpreterProxy.isBytes(oop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tzipCollection = oop.bytes;\n\n\t/* source */\n\n\tzipCollectionSize = BYTESIZEOF(oop);\n\toop = interpreterProxy.fetchPointerofObject(readStreamInstSize + 3, rcvr);\n\tif (!interpreterProxy.isBytes(oop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\n\t/* do the primitive */\n\n\tzipSource = oop.bytes;\n\tzipDecompressBlock();\n\tif (!interpreterProxy.failed()) {\n\n\t\t/* store modified values back */\n\n\t\tinterpreterProxy.storeIntegerofObjectwithValue(2, rcvr, zipReadLimit + 1);\n\t\tinterpreterProxy.storeIntegerofObjectwithValue(readStreamInstSize + 0, rcvr, zipState);\n\t\tinterpreterProxy.storeIntegerofObjectwithValue(readStreamInstSize + 1, rcvr, zipBitBuf);\n\t\tinterpreterProxy.storeIntegerofObjectwithValue(readStreamInstSize + 2, rcvr, zipBitPos);\n\t\tinterpreterProxy.storeIntegerofObjectwithValue(readStreamInstSize + 4, rcvr, zipSourcePos + 1);\n\t\tinterpreterProxy.pop(2);\n\t}\n}\n\n\n/*\tPrimitive. Update a 32bit CRC value. */\n\nfunction primitiveUpdateAdler32() {\n\tvar adler32;\n\tvar b;\n\tvar bytePtr;\n\tvar collection;\n\tvar i;\n\tvar length;\n\tvar s1;\n\tvar s2;\n\tvar startIndex;\n\tvar stopIndex;\n\n\tif (interpreterProxy.methodArgumentCount() !== 4) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tcollection = interpreterProxy.stackObjectValue(0);\n\tstopIndex = interpreterProxy.stackIntegerValue(1);\n\tstartIndex = interpreterProxy.stackIntegerValue(2);\n\tadler32 = interpreterProxy.positive32BitValueOf(interpreterProxy.stackValue(3));\n\tif (interpreterProxy.failed()) {\n\t\treturn 0;\n\t}\n\tif (!(interpreterProxy.isBytes(collection) && ((stopIndex >= startIndex) && (startIndex > 0)))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tlength = BYTESIZEOF(collection);\n\tif (!(stopIndex <= length)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tbytePtr = collection.bytes;\n\t--startIndex;\n\t--stopIndex;\n\ts1 = adler32 & 65535;\n\ts2 = (adler32 >>> 16) & 65535;\n\tfor (i = startIndex; i <= stopIndex; i++) {\n\t\tb = bytePtr[i];\n\t\ts1 = MOD((s1 + b), 65521);\n\t\ts2 = MOD((s2 + s1), 65521);\n\t}\n\tadler32 = (s2 << 16) + s1;\n\tinterpreterProxy.popthenPush(5, interpreterProxy.positive32BitIntegerFor(adler32));\n}\n\n\n/*\tPrimitive. Update a 32bit CRC value. */\n\nfunction primitiveUpdateGZipCrc32() {\n\tvar bytePtr;\n\tvar collection;\n\tvar crc;\n\tvar i;\n\tvar length;\n\tvar startIndex;\n\tvar stopIndex;\n\n\tif (interpreterProxy.methodArgumentCount() !== 4) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tcollection = interpreterProxy.stackObjectValue(0);\n\tstopIndex = interpreterProxy.stackIntegerValue(1);\n\tstartIndex = interpreterProxy.stackIntegerValue(2);\n\tcrc = interpreterProxy.positive32BitValueOf(interpreterProxy.stackValue(3));\n\tif (interpreterProxy.failed()) {\n\t\treturn 0;\n\t}\n\tif (!(interpreterProxy.isBytes(collection) && ((stopIndex >= startIndex) && (startIndex > 0)))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tlength = BYTESIZEOF(collection);\n\tif (!(stopIndex <= length)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tbytePtr = collection.bytes;\n\t;\n\t--startIndex;\n\t--stopIndex;\n\tfor (i = startIndex; i <= stopIndex; i++) {\n\t\tcrc = zipCrcTable[(crc ^ bytePtr[i]) & 255] ^ (crc >>> 8);\n\t}\n\tinterpreterProxy.popthenPush(5, interpreterProxy.positive32BitIntegerFor(crc));\n}\n\nfunction primitiveZipSendBlock() {\n\tvar distStream;\n\tvar distTree;\n\tvar litStream;\n\tvar litTree;\n\tvar rcvr;\n\tvar result;\n\n\tif (interpreterProxy.methodArgumentCount() !== 4) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tdistTree = interpreterProxy.stackObjectValue(0);\n\tlitTree = interpreterProxy.stackObjectValue(1);\n\tdistStream = interpreterProxy.stackObjectValue(2);\n\tlitStream = interpreterProxy.stackObjectValue(3);\n\trcvr = interpreterProxy.stackObjectValue(4);\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tif (!loadZipEncoderFrom(rcvr)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!(interpreterProxy.isPointers(distTree) && (SIZEOF(distTree) >= 2))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!(interpreterProxy.isPointers(litTree) && (SIZEOF(litTree) >= 2))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!(interpreterProxy.isPointers(litStream) && (SIZEOF(litStream) >= 3))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tif (!(interpreterProxy.isPointers(distStream) && (SIZEOF(distStream) >= 3))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\t;\n\tresult = sendBlockwithwithwith(litStream, distStream, litTree, distTree);\n\tif (!interpreterProxy.failed()) {\n\t\tinterpreterProxy.storeIntegerofObjectwithValue(1, rcvr, zipPosition);\n\t\tinterpreterProxy.storeIntegerofObjectwithValue(readStreamInstSize + 1, rcvr, zipBitBuf);\n\t\tinterpreterProxy.storeIntegerofObjectwithValue(readStreamInstSize + 2, rcvr, zipBitPos);\n\t}\n\tif (!interpreterProxy.failed()) {\n\t\tinterpreterProxy.pop(5);\n\t\tinterpreterProxy.pushInteger(result);\n\t}\n}\n\n\n/*\tRequire: \n\t\tzipCollection, zipCollectionSize, zipPosition,\n\t\tzipBitBuf, zipBitPos.\n\t */\n\nfunction sendBlockwithwithwith(literalStream, distanceStream, litTree, distTree) {\n\tvar code;\n\tvar dist;\n\tvar distArray;\n\tvar distBitLengths;\n\tvar distBlCount;\n\tvar distCodes;\n\tvar extra;\n\tvar lit;\n\tvar litArray;\n\tvar litBlCount;\n\tvar litLimit;\n\tvar litPos;\n\tvar llBitLengths;\n\tvar llCodes;\n\tvar oop;\n\tvar sum;\n\n\toop = interpreterProxy.fetchPointerofObject(0, literalStream);\n\tlitPos = interpreterProxy.fetchIntegerofObject(1, literalStream);\n\tlitLimit = interpreterProxy.fetchIntegerofObject(2, literalStream);\n\tif (!((litPos <= litLimit) && (interpreterProxy.isBytes(oop) && (litLimit <= BYTESIZEOF(oop))))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tlitArray = oop.bytes;\n\toop = interpreterProxy.fetchPointerofObject(0, distanceStream);\n\tif (!(interpreterProxy.isWords(oop) && ((litLimit <= SIZEOF(oop)) && ((interpreterProxy.fetchIntegerofObject(1, distanceStream) === litPos) && (interpreterProxy.fetchIntegerofObject(2, distanceStream) === litLimit))))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tdistArray = oop.words;\n\toop = interpreterProxy.fetchPointerofObject(0, litTree);\n\tif (!interpreterProxy.isWords(oop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tlitBlCount = SIZEOF(oop);\n\tllBitLengths = oop.words;\n\toop = interpreterProxy.fetchPointerofObject(1, litTree);\n\tif (!(interpreterProxy.isWords(oop) && (litBlCount === SIZEOF(oop)))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tllCodes = oop.words;\n\toop = interpreterProxy.fetchPointerofObject(0, distTree);\n\tif (!interpreterProxy.isWords(oop)) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tdistBlCount = SIZEOF(oop);\n\tdistBitLengths = oop.words;\n\toop = interpreterProxy.fetchPointerofObject(1, distTree);\n\tif (!(interpreterProxy.isWords(oop) && (distBlCount === SIZEOF(oop)))) {\n\t\treturn interpreterProxy.primitiveFail();\n\t}\n\tdistCodes = oop.words;\n\tnextZipBitsput(0, 0);\n\tsum = 0;\n\twhile ((litPos < litLimit) && ((zipPosition + 4) < zipCollectionSize)) {\n\t\tlit = litArray[litPos];\n\t\tdist = distArray[litPos];\n\t\t++litPos;\n\t\tif (dist === 0) {\n\n\t\t\t/* literal */\n\n\t\t\t++sum;\n\t\t\tif (!(lit < litBlCount)) {\n\t\t\t\treturn interpreterProxy.primitiveFail();\n\t\t\t}\n\t\t\tnextZipBitsput(llBitLengths[lit], llCodes[lit]);\n\t\t} else {\n\n\t\t\t/* match */\n\n\t\t\tsum = (sum + lit) + DeflateMinMatch;\n\t\t\tif (!(lit < 256)) {\n\t\t\t\treturn interpreterProxy.primitiveFail();\n\t\t\t}\n\t\t\tcode = zipMatchLengthCodes[lit];\n\t\t\tif (!(code < litBlCount)) {\n\t\t\t\treturn interpreterProxy.primitiveFail();\n\t\t\t}\n\t\t\tnextZipBitsput(llBitLengths[code], llCodes[code]);\n\t\t\textra = zipExtraLengthBits[code - 257];\n\t\t\tif (extra !== 0) {\n\t\t\t\tlit -= zipBaseLength[code - 257];\n\t\t\t\tnextZipBitsput(extra, lit);\n\t\t\t}\n\t\t\t--dist;\n\t\t\tif (!(dist < 32768)) {\n\t\t\t\treturn interpreterProxy.primitiveFail();\n\t\t\t}\n\t\t\tif (dist < 256) {\n\t\t\t\tcode = zipDistanceCodes[dist];\n\t\t\t} else {\n\t\t\t\tcode = zipDistanceCodes[256 + (dist >>> 7)];\n\t\t\t}\n\t\t\tif (!(code < distBlCount)) {\n\t\t\t\treturn interpreterProxy.primitiveFail();\n\t\t\t}\n\t\t\tnextZipBitsput(distBitLengths[code], distCodes[code]);\n\t\t\textra = zipExtraDistanceBits[code];\n\t\t\tif (extra !== 0) {\n\t\t\t\tdist -= zipBaseDistance[code];\n\t\t\t\tnextZipBitsput(extra, dist);\n\t\t\t}\n\t\t}\n\t}\n\tif (interpreterProxy.failed()) {\n\t\treturn null;\n\t}\n\tinterpreterProxy.storeIntegerofObjectwithValue(1, literalStream, litPos);\n\tinterpreterProxy.storeIntegerofObjectwithValue(1, distanceStream, litPos);\n\treturn sum;\n}\n\n\n/*\tNote: This is coded so that is can be run from Squeak. */\n\nfunction setInterpreter(anInterpreter) {\n\tvar ok;\n\n\tinterpreterProxy = anInterpreter;\n\tok = interpreterProxy.majorVersion() == VM_PROXY_MAJOR;\n\tif (ok === false) {\n\t\treturn false;\n\t}\n\tok = interpreterProxy.minorVersion() >= VM_PROXY_MINOR;\n\treturn ok;\n}\n\n\n/*\tCheck if we should flush the current block.\n\tFlushing can be useful if the input characteristics change. */\n\nfunction shouldFlush() {\n\tvar nLits;\n\n\tif (zipLiteralCount === zipLiteralSize) {\n\t\treturn true;\n\t}\n\tif ((zipLiteralCount & 4095) !== 0) {\n\t\treturn false;\n\t}\n\tif ((zipMatchCount * 10) <= zipLiteralCount) {\n\n\t\t/* This is basically random data. \n\t\tThere is no need to flush early since the overhead\n\t\tfor encoding the trees will add to the overall size */\n\n\t\treturn false;\n\t}\n\tnLits = zipLiteralCount - zipMatchCount;\n\tif (nLits <= zipMatchCount) {\n\t\treturn false;\n\t}\n\treturn (nLits * 4) <= zipMatchCount;\n}\n\n\n/*\tUpdate the running hash value based on the next input byte.\n\tReturn the new updated hash value. */\n\nfunction updateHash(nextValue) {\n\treturn ((zipHashValue << 5) ^ nextValue) & DeflateHashMask;\n}\n\n\n/*\tUpdate the hash value at position here (one based) */\n\nfunction updateHashAt(here) {\n\treturn updateHash(zipCollection[here]);\n}\n\n\n/*\tDecode the next value in the receiver using the given huffman table. */\n\nfunction zipDecodeValueFromsize(table, tableSize) {\n\tvar bits;\n\tvar bitsNeeded;\n\tvar index;\n\tvar tableIndex;\n\tvar value;\n\n\n\t/* Initial bits needed */\n\n\tbitsNeeded = table[0] >>> 24;\n\tif (bitsNeeded > MaxBits) {\n\t\tinterpreterProxy.primitiveFail();\n\t\treturn 0;\n\t}\n\n\t/* First real table */\n\n\ttableIndex = 2;\n\twhile (true) {\n\n\t\t/* Get bits */\n\n\t\tbits = zipNextBits(bitsNeeded);\n\t\tindex = (tableIndex + bits) - 1;\n\t\tif (index >= tableSize) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn 0;\n\t\t}\n\n\t\t/* Lookup entry in table */\n\n\t\tvalue = table[index];\n\t\tif ((value & 1056964608) === 0) {\n\t\t\treturn value;\n\t\t}\n\n\t\t/* Table offset in low 16 bit */\n\n\t\ttableIndex = value & 65535;\n\n\t\t/* Additional bits in high 8 bit */\n\n\t\tbitsNeeded = (value >>> 24) & 255;\n\t\tif (bitsNeeded > MaxBits) {\n\t\t\tinterpreterProxy.primitiveFail();\n\t\t\treturn 0;\n\t\t}\n\t}\n\treturn 0;\n}\n\nfunction zipDecompressBlock() {\n\tvar distance;\n\tvar dstPos;\n\tvar extra;\n\tvar i;\n\tvar length;\n\tvar max;\n\tvar oldBitPos;\n\tvar oldBits;\n\tvar oldPos;\n\tvar srcPos;\n\tvar value;\n\n\tmax = zipCollectionSize - 1;\n\twhile ((zipReadLimit < max) && (zipSourcePos <= zipSourceLimit)) {\n\n\t\t/* Back up stuff if we're running out of space */\n\n\t\toldBits = zipBitBuf;\n\t\toldBitPos = zipBitPos;\n\t\toldPos = zipSourcePos;\n\t\tvalue = zipDecodeValueFromsize(zipLitTable, zipLitTableSize);\n\t\tif (value < 256) {\n\n\t\t\t/* A literal */\n\n\t\t\tzipCollection[(++zipReadLimit)] = value;\n\t\t} else {\n\n\t\t\t/* length/distance or end of block */\n\n\t\t\tif (value === 256) {\n\n\t\t\t\t/* End of block */\n\n\t\t\t\tzipState = zipState & StateNoMoreData;\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\textra = (value >>> 16) - 1;\n\t\t\tlength = value & 65535;\n\t\t\tif (extra > 0) {\n\t\t\t\tlength += zipNextBits(extra);\n\t\t\t}\n\t\t\tvalue = zipDecodeValueFromsize(zipDistTable, zipDistTableSize);\n\t\t\textra = value >>> 16;\n\t\t\tdistance = value & 65535;\n\t\t\tif (extra > 0) {\n\t\t\t\tdistance += zipNextBits(extra);\n\t\t\t}\n\t\t\tif ((zipReadLimit + length) >= max) {\n\t\t\t\tzipBitBuf = oldBits;\n\t\t\t\tzipBitPos = oldBitPos;\n\t\t\t\tzipSourcePos = oldPos;\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tdstPos = zipReadLimit;\n\t\t\tsrcPos = zipReadLimit - distance;\n\t\t\tfor (i = 1; i <= length; i++) {\n\t\t\t\tzipCollection[dstPos + i] = zipCollection[srcPos + i];\n\t\t\t}\n\t\t\tzipReadLimit += length;\n\t\t}\n\t}\n}\n\nfunction zipNextBits(n) {\n\tvar bits;\n\tvar byte;\n\n\twhile (zipBitPos < n) {\n\t\tbyte = zipSource[(++zipSourcePos)];\n\t\tzipBitBuf += SHL(byte, zipBitPos);\n\t\tzipBitPos += 8;\n\t}\n\tbits = zipBitBuf & ((SHL(1, n)) - 1);\n\tzipBitBuf = SHR(zipBitBuf, n);\n\tzipBitPos -= n;\n\treturn bits;\n}\n\n\nSqueak.registerExternalModule(\"ZipPlugin\", {\n\tprimitiveZipSendBlock: primitiveZipSendBlock,\n\tprimitiveUpdateAdler32: primitiveUpdateAdler32,\n\tprimitiveUpdateGZipCrc32: primitiveUpdateGZipCrc32,\n\tprimitiveDeflateUpdateHashTable: primitiveDeflateUpdateHashTable,\n\tsetInterpreter: setInterpreter,\n\tgetModuleName: getModuleName,\n\tprimitiveDeflateBlock: primitiveDeflateBlock,\n\tprimitiveInflateDecompressBlock: primitiveInflateDecompressBlock,\n});\n\n}); // end of module\n","// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.3.3\nvar LZString = {\n  \n  \n  // private property\n  _keyStr : \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n  _f : String.fromCharCode,\n  \n  compressToBase64 : function (input) {\n    if (input == null) return \"\";\n    var output = \"\";\n    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n    var i = 0;\n    \n    input = LZString.compress(input);\n    \n    while (i < input.length*2) {\n      \n      if (i%2==0) {\n        chr1 = input.charCodeAt(i/2) >> 8;\n        chr2 = input.charCodeAt(i/2) & 255;\n        if (i/2+1 < input.length) \n          chr3 = input.charCodeAt(i/2+1) >> 8;\n        else \n          chr3 = NaN;\n      } else {\n        chr1 = input.charCodeAt((i-1)/2) & 255;\n        if ((i+1)/2 < input.length) {\n          chr2 = input.charCodeAt((i+1)/2) >> 8;\n          chr3 = input.charCodeAt((i+1)/2) & 255;\n        } else \n          chr2=chr3=NaN;\n      }\n      i+=3;\n      \n      enc1 = chr1 >> 2;\n      enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n      enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n      enc4 = chr3 & 63;\n      \n      if (isNaN(chr2)) {\n        enc3 = enc4 = 64;\n      } else if (isNaN(chr3)) {\n        enc4 = 64;\n      }\n      \n      output = output +\n        LZString._keyStr.charAt(enc1) + LZString._keyStr.charAt(enc2) +\n          LZString._keyStr.charAt(enc3) + LZString._keyStr.charAt(enc4);\n      \n    }\n    \n    return output;\n  },\n  \n  decompressFromBase64 : function (input) {\n    if (input == null) return \"\";\n    var output = \"\",\n        ol = 0, \n        output_,\n        chr1, chr2, chr3,\n        enc1, enc2, enc3, enc4,\n        i = 0, f=LZString._f;\n    \n    input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n    \n    while (i < input.length) {\n      \n      enc1 = LZString._keyStr.indexOf(input.charAt(i++));\n      enc2 = LZString._keyStr.indexOf(input.charAt(i++));\n      enc3 = LZString._keyStr.indexOf(input.charAt(i++));\n      enc4 = LZString._keyStr.indexOf(input.charAt(i++));\n      \n      chr1 = (enc1 << 2) | (enc2 >> 4);\n      chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n      chr3 = ((enc3 & 3) << 6) | enc4;\n      \n      if (ol%2==0) {\n        output_ = chr1 << 8;\n        \n        if (enc3 != 64) {\n          output += f(output_ | chr2);\n        }\n        if (enc4 != 64) {\n          output_ = chr3 << 8;\n        }\n      } else {\n        output = output + f(output_ | chr1);\n        \n        if (enc3 != 64) {\n          output_ = chr2 << 8;\n        }\n        if (enc4 != 64) {\n          output += f(output_ | chr3);\n        }\n      }\n      ol+=3;\n    }\n    \n    return LZString.decompress(output);\n    \n  },\n\n  compressToUTF16 : function (input) {\n    if (input == null) return \"\";\n    var output = \"\",\n        i,c,\n        current,\n        status = 0,\n        f = LZString._f;\n    \n    input = LZString.compress(input);\n    \n    for (i=0 ; i<input.length ; i++) {\n      c = input.charCodeAt(i);\n      switch (status++) {\n        case 0:\n          output += f((c >> 1)+32);\n          current = (c & 1) << 14;\n          break;\n        case 1:\n          output += f((current + (c >> 2))+32);\n          current = (c & 3) << 13;\n          break;\n        case 2:\n          output += f((current + (c >> 3))+32);\n          current = (c & 7) << 12;\n          break;\n        case 3:\n          output += f((current + (c >> 4))+32);\n          current = (c & 15) << 11;\n          break;\n        case 4:\n          output += f((current + (c >> 5))+32);\n          current = (c & 31) << 10;\n          break;\n        case 5:\n          output += f((current + (c >> 6))+32);\n          current = (c & 63) << 9;\n          break;\n        case 6:\n          output += f((current + (c >> 7))+32);\n          current = (c & 127) << 8;\n          break;\n        case 7:\n          output += f((current + (c >> 8))+32);\n          current = (c & 255) << 7;\n          break;\n        case 8:\n          output += f((current + (c >> 9))+32);\n          current = (c & 511) << 6;\n          break;\n        case 9:\n          output += f((current + (c >> 10))+32);\n          current = (c & 1023) << 5;\n          break;\n        case 10:\n          output += f((current + (c >> 11))+32);\n          current = (c & 2047) << 4;\n          break;\n        case 11:\n          output += f((current + (c >> 12))+32);\n          current = (c & 4095) << 3;\n          break;\n        case 12:\n          output += f((current + (c >> 13))+32);\n          current = (c & 8191) << 2;\n          break;\n        case 13:\n          output += f((current + (c >> 14))+32);\n          current = (c & 16383) << 1;\n          break;\n        case 14:\n          output += f((current + (c >> 15))+32, (c & 32767)+32);\n          status = 0;\n          break;\n      }\n    }\n    \n    return output + f(current + 32);\n  },\n  \n\n  decompressFromUTF16 : function (input) {\n    if (input == null) return \"\";\n    var output = \"\",\n        current,c,\n        status=0,\n        i = 0,\n        f = LZString._f;\n    \n    while (i < input.length) {\n      c = input.charCodeAt(i) - 32;\n      \n      switch (status++) {\n        case 0:\n          current = c << 1;\n          break;\n        case 1:\n          output += f(current | (c >> 14));\n          current = (c&16383) << 2;\n          break;\n        case 2:\n          output += f(current | (c >> 13));\n          current = (c&8191) << 3;\n          break;\n        case 3:\n          output += f(current | (c >> 12));\n          current = (c&4095) << 4;\n          break;\n        case 4:\n          output += f(current | (c >> 11));\n          current = (c&2047) << 5;\n          break;\n        case 5:\n          output += f(current | (c >> 10));\n          current = (c&1023) << 6;\n          break;\n        case 6:\n          output += f(current | (c >> 9));\n          current = (c&511) << 7;\n          break;\n        case 7:\n          output += f(current | (c >> 8));\n          current = (c&255) << 8;\n          break;\n        case 8:\n          output += f(current | (c >> 7));\n          current = (c&127) << 9;\n          break;\n        case 9:\n          output += f(current | (c >> 6));\n          current = (c&63) << 10;\n          break;\n        case 10:\n          output += f(current | (c >> 5));\n          current = (c&31) << 11;\n          break;\n        case 11:\n          output += f(current | (c >> 4));\n          current = (c&15) << 12;\n          break;\n        case 12:\n          output += f(current | (c >> 3));\n          current = (c&7) << 13;\n          break;\n        case 13:\n          output += f(current | (c >> 2));\n          current = (c&3) << 14;\n          break;\n        case 14:\n          output += f(current | (c >> 1));\n          current = (c&1) << 15;\n          break;\n        case 15:\n          output += f(current | c);\n          status=0;\n          break;\n      }\n      \n      \n      i++;\n    }\n    \n    return LZString.decompress(output);\n    //return output;\n    \n  },\n\n\n  \n  compress: function (uncompressed) {\n    if (uncompressed == null) return \"\";\n    var i, value,\n        context_dictionary= {},\n        context_dictionaryToCreate= {},\n        context_c=\"\",\n        context_wc=\"\",\n        context_w=\"\",\n        context_enlargeIn= 2, // Compensate for the first entry which should not count\n        context_dictSize= 3,\n        context_numBits= 2,\n        context_data_string=\"\", \n        context_data_val=0, \n        context_data_position=0,\n        ii,\n        f=LZString._f;\n    \n    for (ii = 0; ii < uncompressed.length; ii += 1) {\n      context_c = uncompressed.charAt(ii);\n      if (!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)) {\n        context_dictionary[context_c] = context_dictSize++;\n        context_dictionaryToCreate[context_c] = true;\n      }\n      \n      context_wc = context_w + context_c;\n      if (Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)) {\n        context_w = context_wc;\n      } else {\n        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n          if (context_w.charCodeAt(0)<256) {\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1);\n              if (context_data_position == 15) {\n                context_data_position = 0;\n                context_data_string += f(context_data_val);\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<8 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == 15) {\n                context_data_position = 0;\n                context_data_string += f(context_data_val);\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          } else {\n            value = 1;\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1) | value;\n              if (context_data_position == 15) {\n                context_data_position = 0;\n                context_data_string += f(context_data_val);\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = 0;\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<16 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == 15) {\n                context_data_position = 0;\n                context_data_string += f(context_data_val);\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          }\n          context_enlargeIn--;\n          if (context_enlargeIn == 0) {\n            context_enlargeIn = Math.pow(2, context_numBits);\n            context_numBits++;\n          }\n          delete context_dictionaryToCreate[context_w];\n        } else {\n          value = context_dictionary[context_w];\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == 15) {\n              context_data_position = 0;\n              context_data_string += f(context_data_val);\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n          \n          \n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        // Add wc to the dictionary.\n        context_dictionary[context_wc] = context_dictSize++;\n        context_w = String(context_c);\n      }\n    }\n    \n    // Output the code for w.\n    if (context_w !== \"\") {\n      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n        if (context_w.charCodeAt(0)<256) {\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1);\n            if (context_data_position == 15) {\n              context_data_position = 0;\n              context_data_string += f(context_data_val);\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<8 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == 15) {\n              context_data_position = 0;\n              context_data_string += f(context_data_val);\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        } else {\n          value = 1;\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | value;\n            if (context_data_position == 15) {\n              context_data_position = 0;\n              context_data_string += f(context_data_val);\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = 0;\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<16 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == 15) {\n              context_data_position = 0;\n              context_data_string += f(context_data_val);\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        delete context_dictionaryToCreate[context_w];\n      } else {\n        value = context_dictionary[context_w];\n        for (i=0 ; i<context_numBits ; i++) {\n          context_data_val = (context_data_val << 1) | (value&1);\n          if (context_data_position == 15) {\n            context_data_position = 0;\n            context_data_string += f(context_data_val);\n            context_data_val = 0;\n          } else {\n            context_data_position++;\n          }\n          value = value >> 1;\n        }\n        \n        \n      }\n      context_enlargeIn--;\n      if (context_enlargeIn == 0) {\n        context_enlargeIn = Math.pow(2, context_numBits);\n        context_numBits++;\n      }\n    }\n    \n    // Mark the end of the stream\n    value = 2;\n    for (i=0 ; i<context_numBits ; i++) {\n      context_data_val = (context_data_val << 1) | (value&1);\n      if (context_data_position == 15) {\n        context_data_position = 0;\n        context_data_string += f(context_data_val);\n        context_data_val = 0;\n      } else {\n        context_data_position++;\n      }\n      value = value >> 1;\n    }\n    \n    // Flush the last char\n    while (true) {\n      context_data_val = (context_data_val << 1);\n      if (context_data_position == 15) {\n        context_data_string += f(context_data_val);\n        break;\n      }\n      else context_data_position++;\n    }\n    return context_data_string;\n  },\n  \n  decompress: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    var dictionary = [],\n        next,\n        enlargeIn = 4,\n        dictSize = 4,\n        numBits = 3,\n        entry = \"\",\n        result = \"\",\n        i,\n        w,\n        bits, resb, maxpower, power,\n        c,\n        f = LZString._f,\n        data = {string:compressed, val:compressed.charCodeAt(0), position:32768, index:1};\n    \n    for (i = 0; i < 3; i += 1) {\n      dictionary[i] = i;\n    }\n    \n    bits = 0;\n    maxpower = Math.pow(2,2);\n    power=1;\n    while (power!=maxpower) {\n      resb = data.val & data.position;\n      data.position >>= 1;\n      if (data.position == 0) {\n        data.position = 32768;\n        data.val = data.string.charCodeAt(data.index++);\n      }\n      bits |= (resb>0 ? 1 : 0) * power;\n      power <<= 1;\n    }\n    \n    switch (next = bits) {\n      case 0: \n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = 32768;\n              data.val = data.string.charCodeAt(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 1: \n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = 32768;\n              data.val = data.string.charCodeAt(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 2: \n        return \"\";\n    }\n    dictionary[3] = c;\n    w = result = c;\n    while (true) {\n      if (data.index > data.string.length) {\n        return \"\";\n      }\n      \n      bits = 0;\n      maxpower = Math.pow(2,numBits);\n      power=1;\n      while (power!=maxpower) {\n        resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position == 0) {\n          data.position = 32768;\n          data.val = data.string.charCodeAt(data.index++);\n        }\n        bits |= (resb>0 ? 1 : 0) * power;\n        power <<= 1;\n      }\n\n      switch (c = bits) {\n        case 0: \n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = 32768;\n              data.val = data.string.charCodeAt(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 1: \n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = 32768;\n              data.val = data.string.charCodeAt(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 2: \n          return result;\n      }\n      \n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n      \n      if (dictionary[c]) {\n        entry = dictionary[c];\n      } else {\n        if (c === dictSize) {\n          entry = w + w.charAt(0);\n        } else {\n          return null;\n        }\n      }\n      result += entry;\n      \n      // Add w+entry[0] to the dictionary.\n      dictionary[dictSize++] = w + entry.charAt(0);\n      enlargeIn--;\n      \n      w = entry;\n      \n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n      \n    }\n  }\n};\n\nif( typeof module !== 'undefined' && module != null ) {\n  module.exports = LZString\n}\n","/*!\n\nJSZip - A Javascript class for generating and reading zip files\n<http://stuartk.com/jszip>\n\n(c) 2009-2014 Stuart Knightley <stuart [at] stuartk.com>\nDual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.\n\nJSZip uses the library pako released under the MIT license :\nhttps://github.com/nodeca/pako/blob/master/LICENSE\n*/\n\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.JSZip = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\nvar utils = require('./utils');\nvar support = require('./support');\n// private property\nvar _keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\n\n// public method for encoding\nexports.encode = function(input) {\n    var output = [];\n    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n    var i = 0, len = input.length, remainingBytes = len;\n\n    var isArray = utils.getTypeOf(input) !== \"string\";\n    while (i < input.length) {\n        remainingBytes = len - i;\n\n        if (!isArray) {\n            chr1 = input.charCodeAt(i++);\n            chr2 = i < len ? input.charCodeAt(i++) : 0;\n            chr3 = i < len ? input.charCodeAt(i++) : 0;\n        } else {\n            chr1 = input[i++];\n            chr2 = i < len ? input[i++] : 0;\n            chr3 = i < len ? input[i++] : 0;\n        }\n\n        enc1 = chr1 >> 2;\n        enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n        enc3 = remainingBytes > 1 ? (((chr2 & 15) << 2) | (chr3 >> 6)) : 64;\n        enc4 = remainingBytes > 2 ? (chr3 & 63) : 64;\n\n        output.push(_keyStr.charAt(enc1) + _keyStr.charAt(enc2) + _keyStr.charAt(enc3) + _keyStr.charAt(enc4));\n\n    }\n\n    return output.join(\"\");\n};\n\n// public method for decoding\nexports.decode = function(input) {\n    var chr1, chr2, chr3;\n    var enc1, enc2, enc3, enc4;\n    var i = 0, resultIndex = 0;\n\n    input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n    var totalLength = input.length * 3 / 4;\n    if(input.charAt(input.length - 1) === _keyStr.charAt(64)) {\n        totalLength--;\n    }\n    if(input.charAt(input.length - 2) === _keyStr.charAt(64)) {\n        totalLength--;\n    }\n    var output;\n    if (support.uint8array) {\n        output = new Uint8Array(totalLength);\n    } else {\n        output = new Array(totalLength);\n    }\n\n    while (i < input.length) {\n\n        enc1 = _keyStr.indexOf(input.charAt(i++));\n        enc2 = _keyStr.indexOf(input.charAt(i++));\n        enc3 = _keyStr.indexOf(input.charAt(i++));\n        enc4 = _keyStr.indexOf(input.charAt(i++));\n\n        chr1 = (enc1 << 2) | (enc2 >> 4);\n        chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n        chr3 = ((enc3 & 3) << 6) | enc4;\n\n        output[resultIndex++] = chr1;\n\n        if (enc3 !== 64) {\n            output[resultIndex++] = chr2;\n        }\n        if (enc4 !== 64) {\n            output[resultIndex++] = chr3;\n        }\n\n    }\n\n    return output;\n};\n\n},{\"./support\":27,\"./utils\":29}],2:[function(require,module,exports){\n'use strict';\n\nvar external = require(\"./external\");\nvar DataWorker = require('./stream/DataWorker');\nvar DataLengthProbe = require('./stream/DataLengthProbe');\nvar Crc32Probe = require('./stream/Crc32Probe');\nvar DataLengthProbe = require('./stream/DataLengthProbe');\n\n/**\n * Represent a compressed object, with everything needed to decompress it.\n * @constructor\n * @param {number} compressedSize the size of the data compressed.\n * @param {number} uncompressedSize the size of the data after decompression.\n * @param {number} crc32 the crc32 of the decompressed file.\n * @param {object} compression the type of compression, see lib/compressions.js.\n * @param {String|ArrayBuffer|Uint8Array|Buffer} data the compressed data.\n */\nfunction CompressedObject(compressedSize, uncompressedSize, crc32, compression, data) {\n    this.compressedSize = compressedSize;\n    this.uncompressedSize = uncompressedSize;\n    this.crc32 = crc32;\n    this.compression = compression;\n    this.compressedContent = data;\n}\n\nCompressedObject.prototype = {\n    /**\n     * Create a worker to get the uncompressed content.\n     * @return {GenericWorker} the worker.\n     */\n    getContentWorker : function () {\n        var worker = new DataWorker(external.Promise.resolve(this.compressedContent))\n        .pipe(this.compression.uncompressWorker())\n        .pipe(new DataLengthProbe(\"data_length\"));\n\n        var that = this;\n        worker.on(\"end\", function () {\n            if(this.streamInfo['data_length'] !== that.uncompressedSize) {\n                throw new Error(\"Bug : uncompressed data size mismatch\");\n            }\n        });\n        return worker;\n    },\n    /**\n     * Create a worker to get the compressed content.\n     * @return {GenericWorker} the worker.\n     */\n    getCompressedWorker : function () {\n        return new DataWorker(external.Promise.resolve(this.compressedContent))\n        .withStreamInfo(\"compressedSize\", this.compressedSize)\n        .withStreamInfo(\"uncompressedSize\", this.uncompressedSize)\n        .withStreamInfo(\"crc32\", this.crc32)\n        .withStreamInfo(\"compression\", this.compression)\n        ;\n    }\n};\n\n/**\n * Chain the given worker with other workers to compress the content with the\n * given compresion.\n * @param {GenericWorker} uncompressedWorker the worker to pipe.\n * @param {Object} compression the compression object.\n * @param {Object} compressionOptions the options to use when compressing.\n * @return {GenericWorker} the new worker compressing the content.\n */\nCompressedObject.createWorkerFrom = function (uncompressedWorker, compression, compressionOptions) {\n    return uncompressedWorker\n    .pipe(new Crc32Probe())\n    .pipe(new DataLengthProbe(\"uncompressedSize\"))\n    .pipe(compression.compressWorker(compressionOptions))\n    .pipe(new DataLengthProbe(\"compressedSize\"))\n    .withStreamInfo(\"compression\", compression);\n};\n\nmodule.exports = CompressedObject;\n\n},{\"./external\":6,\"./stream/Crc32Probe\":22,\"./stream/DataLengthProbe\":23,\"./stream/DataWorker\":24}],3:[function(require,module,exports){\n'use strict';\n\nvar GenericWorker = require(\"./stream/GenericWorker\");\n\nexports.STORE = {\n    magic: \"\\x00\\x00\",\n    compressWorker : function (compressionOptions) {\n        return new GenericWorker(\"STORE compression\");\n    },\n    uncompressWorker : function () {\n        return new GenericWorker(\"STORE decompression\");\n    }\n};\nexports.DEFLATE = require('./flate');\n\n},{\"./flate\":7,\"./stream/GenericWorker\":25}],4:[function(require,module,exports){\n'use strict';\n\nvar utils = require('./utils');\n\n/**\n * The following functions come from pako, from pako/lib/zlib/crc32.js\n * released under the MIT license, see pako https://github.com/nodeca/pako/\n */\n\n// Use ordinary array, since untyped makes no boost here\nfunction makeTable() {\n    var c, table = [];\n\n    for(var n =0; n < 256; n++){\n        c = n;\n        for(var k =0; k < 8; k++){\n            c = ((c&1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n        }\n        table[n] = c;\n    }\n\n    return table;\n}\n\n// Create table on load. Just 255 signed longs. Not a problem.\nvar crcTable = makeTable();\n\n\nfunction crc32(crc, buf, len, pos) {\n    var t = crcTable, end = pos + len;\n\n    crc = crc ^ (-1);\n\n    for (var i = pos; i < end; i++ ) {\n        crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n    }\n\n    return (crc ^ (-1)); // >>> 0;\n}\n\n// That's all for the pako functions.\n\n/**\n * Compute the crc32 of a string.\n * This is almost the same as the function crc32, but for strings. Using the\n * same function for the two use cases leads to horrible performances.\n * @param {Number} crc the starting value of the crc.\n * @param {String} str the string to use.\n * @param {Number} len the length of the string.\n * @param {Number} pos the starting position for the crc32 computation.\n * @return {Number} the computed crc32.\n */\nfunction crc32str(crc, str, len, pos) {\n    var t = crcTable, end = pos + len;\n\n    crc = crc ^ (-1);\n\n    for (var i = pos; i < end; i++ ) {\n        crc = (crc >>> 8) ^ t[(crc ^ str.charCodeAt(i)) & 0xFF];\n    }\n\n    return (crc ^ (-1)); // >>> 0;\n}\n\nmodule.exports = function crc32wrapper(input, crc) {\n    if (typeof input === \"undefined\" || !input.length) {\n        return 0;\n    }\n\n    var isArray = utils.getTypeOf(input) !== \"string\";\n\n    if(isArray) {\n        return crc32(crc|0, input, input.length, 0);\n    } else {\n        return crc32str(crc|0, input, input.length, 0);\n    }\n};\n// vim: set shiftwidth=4 softtabstop=4:\n\n},{\"./utils\":29}],5:[function(require,module,exports){\n'use strict';\nexports.base64 = false;\nexports.binary = false;\nexports.dir = false;\nexports.createFolders = true;\nexports.date = null;\nexports.compression = null;\nexports.compressionOptions = null;\nexports.comment = null;\nexports.unixPermissions = null;\nexports.dosPermissions = null;\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nvar ES6Promise = require(\"es6-promise\").Promise;\n\n/**\n * Let the user use/change some implementations.\n */\nmodule.exports = {\n    Promise: ES6Promise\n};\n\n},{\"es6-promise\":37}],7:[function(require,module,exports){\n'use strict';\nvar USE_TYPEDARRAY = (typeof Uint8Array !== 'undefined') && (typeof Uint16Array !== 'undefined') && (typeof Uint32Array !== 'undefined');\n\nvar pako = require(\"pako\");\nvar utils = require(\"./utils\");\nvar GenericWorker = require(\"./stream/GenericWorker\");\n\nvar ARRAY_TYPE = USE_TYPEDARRAY ? \"uint8array\" : \"array\";\n\nexports.magic = \"\\x08\\x00\";\n\n/**\n * Create a worker that uses pako to inflate/deflate.\n * @constructor\n * @param {String} action the name of the pako function to call : either \"Deflate\" or \"Inflate\".\n * @param {Object} options the options to use when (de)compressing.\n */\nfunction FlateWorker(action, options) {\n    GenericWorker.call(this, \"FlateWorker/\" + action);\n\n    this._pako = new pako[action]({\n        raw:true,\n        level : options.level || -1 // default compression\n    });\n    // the `meta` object from the last chunk received\n    // this allow this worker to pass around metadata\n    this.meta = {};\n\n    var self = this;\n    this._pako.onData = function(data) {\n        self.push({\n            data : data,\n            meta : self.meta\n        });\n    };\n}\n\nutils.inherits(FlateWorker, GenericWorker);\n\n/**\n * @see GenericWorker.processChunk\n */\nFlateWorker.prototype.processChunk = function (chunk) {\n    this.meta = chunk.meta;\n    this._pako.push(utils.transformTo(ARRAY_TYPE, chunk.data), false);\n};\n\n/**\n * @see GenericWorker.flush\n */\nFlateWorker.prototype.flush = function () {\n    GenericWorker.prototype.flush.call(this);\n    this._pako.push([], true);\n};\n/**\n * @see GenericWorker.cleanUp\n */\nFlateWorker.prototype.cleanUp = function () {\n    GenericWorker.prototype.cleanUp.call(this);\n    this._pako = null;\n};\n\nexports.compressWorker = function (compressionOptions) {\n    return new FlateWorker(\"Deflate\", compressionOptions);\n};\nexports.uncompressWorker = function () {\n    return new FlateWorker(\"Inflate\", {});\n};\n\n},{\"./stream/GenericWorker\":25,\"./utils\":29,\"pako\":38}],8:[function(require,module,exports){\n'use strict';\n\nvar utils = require('../utils');\nvar GenericWorker = require('../stream/GenericWorker');\nvar utf8 = require('../utf8');\nvar crc32 = require('../crc32');\nvar signature = require('../signature');\n\n/**\n * Transform an integer into a string in hexadecimal.\n * @private\n * @param {number} dec the number to convert.\n * @param {number} bytes the number of bytes to generate.\n * @returns {string} the result.\n */\nvar decToHex = function(dec, bytes) {\n    var hex = \"\", i;\n    for (i = 0; i < bytes; i++) {\n        hex += String.fromCharCode(dec & 0xff);\n        dec = dec >>> 8;\n    }\n    return hex;\n};\n\n/**\n * Generate the UNIX part of the external file attributes.\n * @param {Object} unixPermissions the unix permissions or null.\n * @param {Boolean} isDir true if the entry is a directory, false otherwise.\n * @return {Number} a 32 bit integer.\n *\n * adapted from http://unix.stackexchange.com/questions/14705/the-zip-formats-external-file-attribute :\n *\n * TTTTsstrwxrwxrwx0000000000ADVSHR\n * ^^^^____________________________ file type, see zipinfo.c (UNX_*)\n *     ^^^_________________________ setuid, setgid, sticky\n *        ^^^^^^^^^________________ permissions\n *                 ^^^^^^^^^^______ not used ?\n *                           ^^^^^^ DOS attribute bits : Archive, Directory, Volume label, System file, Hidden, Read only\n */\nvar generateUnixExternalFileAttr = function (unixPermissions, isDir) {\n\n    var result = unixPermissions;\n    if (!unixPermissions) {\n        // I can't use octal values in strict mode, hence the hexa.\n        //  040775 => 0x41fd\n        // 0100664 => 0x81b4\n        result = isDir ? 0x41fd : 0x81b4;\n    }\n    return (result & 0xFFFF) << 16;\n};\n\n/**\n * Generate the DOS part of the external file attributes.\n * @param {Object} dosPermissions the dos permissions or null.\n * @param {Boolean} isDir true if the entry is a directory, false otherwise.\n * @return {Number} a 32 bit integer.\n *\n * Bit 0     Read-Only\n * Bit 1     Hidden\n * Bit 2     System\n * Bit 3     Volume Label\n * Bit 4     Directory\n * Bit 5     Archive\n */\nvar generateDosExternalFileAttr = function (dosPermissions, isDir) {\n\n    // the dir flag is already set for compatibility\n    return (dosPermissions || 0)  & 0x3F;\n};\n\n/**\n * Generate the various parts used in the construction of the final zip file.\n * @param {Object} streamInfo the hash with informations about the compressed file.\n * @param {Boolean} streamedContent is the content streamed ?\n * @param {Boolean} streamingEnded is the stream finished ?\n * @param {number} offset the current offset from the start of the zip file.\n * @param {String} platform let's pretend we are this platform (change platform dependents fields)\n * @param {Function} encodeFileName the function to encode the file name / comment.\n * @return {Object} the zip parts.\n */\nvar generateZipParts = function(streamInfo, streamedContent, streamingEnded, offset, platform, encodeFileName) {\n    var file = streamInfo['file'],\n    compression = streamInfo['compression'],\n    useCustomEncoding = encodeFileName !== utf8.utf8encode,\n    encodedFileName = utils.transformTo(\"string\", encodeFileName(file.name)),\n    utfEncodedFileName = utils.transformTo(\"string\", utf8.utf8encode(file.name)),\n    comment = file.comment,\n    encodedComment = utils.transformTo(\"string\", encodeFileName(comment)),\n    utfEncodedComment = utils.transformTo(\"string\", utf8.utf8encode(comment)),\n    useUTF8ForFileName = utfEncodedFileName.length !== file.name.length,\n    useUTF8ForComment = utfEncodedComment.length !== comment.length,\n    dosTime,\n    dosDate,\n    extraFields = \"\",\n    unicodePathExtraField = \"\",\n    unicodeCommentExtraField = \"\",\n    dir = file.dir,\n    date = file.date;\n\n\n    var dataInfo = {\n        crc32 : 0,\n        compressedSize : 0,\n        uncompressedSize : 0\n    };\n\n    // if the content is streamed, the sizes/crc32 are only available AFTER\n    // the end of the stream.\n    if (!streamedContent || streamingEnded) {\n        dataInfo.crc32 = streamInfo['crc32'];\n        dataInfo.compressedSize = streamInfo['compressedSize'];\n        dataInfo.uncompressedSize = streamInfo['uncompressedSize'];\n    }\n\n    var bitflag = 0;\n    if (streamedContent) {\n        bitflag |= 0x0008;\n    }\n    if (!useCustomEncoding && (useUTF8ForFileName || useUTF8ForComment)) {\n        bitflag |= 0x0800;\n    }\n\n\n    var extFileAttr = 0;\n    var versionMadeBy = 0;\n    if (dir) {\n        // dos or unix, we set the dos dir flag\n        extFileAttr |= 0x00010;\n    }\n    if(platform === \"UNIX\") {\n        versionMadeBy = 0x031E; // UNIX, version 3.0\n        extFileAttr |= generateUnixExternalFileAttr(file.unixPermissions, dir);\n    } else { // DOS or other, fallback to DOS\n        versionMadeBy = 0x0014; // DOS, version 2.0\n        extFileAttr |= generateDosExternalFileAttr(file.dosPermissions, dir);\n    }\n\n    // date\n    // @see http://www.delorie.com/djgpp/doc/rbinter/it/52/13.html\n    // @see http://www.delorie.com/djgpp/doc/rbinter/it/65/16.html\n    // @see http://www.delorie.com/djgpp/doc/rbinter/it/66/16.html\n\n    dosTime = date.getUTCHours();\n    dosTime = dosTime << 6;\n    dosTime = dosTime | date.getUTCMinutes();\n    dosTime = dosTime << 5;\n    dosTime = dosTime | date.getUTCSeconds() / 2;\n\n    dosDate = date.getUTCFullYear() - 1980;\n    dosDate = dosDate << 4;\n    dosDate = dosDate | (date.getUTCMonth() + 1);\n    dosDate = dosDate << 5;\n    dosDate = dosDate | date.getUTCDate();\n\n    if (useUTF8ForFileName) {\n        // set the unicode path extra field. unzip needs at least one extra\n        // field to correctly handle unicode path, so using the path is as good\n        // as any other information. This could improve the situation with\n        // other archive managers too.\n        // This field is usually used without the utf8 flag, with a non\n        // unicode path in the header (winrar, winzip). This helps (a bit)\n        // with the messy Windows' default compressed folders feature but\n        // breaks on p7zip which doesn't seek the unicode path extra field.\n        // So for now, UTF-8 everywhere !\n        unicodePathExtraField =\n            // Version\n            decToHex(1, 1) +\n            // NameCRC32\n            decToHex(crc32(encodedFileName), 4) +\n            // UnicodeName\n            utfEncodedFileName;\n\n        extraFields +=\n            // Info-ZIP Unicode Path Extra Field\n            \"\\x75\\x70\" +\n            // size\n            decToHex(unicodePathExtraField.length, 2) +\n            // content\n            unicodePathExtraField;\n    }\n\n    if(useUTF8ForComment) {\n\n        unicodeCommentExtraField =\n            // Version\n            decToHex(1, 1) +\n            // CommentCRC32\n            decToHex(crc32(encodedComment), 4) +\n            // UnicodeName\n            utfEncodedComment;\n\n        extraFields +=\n            // Info-ZIP Unicode Path Extra Field\n            \"\\x75\\x63\" +\n            // size\n            decToHex(unicodeCommentExtraField.length, 2) +\n            // content\n            unicodeCommentExtraField;\n    }\n\n    var header = \"\";\n\n    // version needed to extract\n    header += \"\\x0A\\x00\";\n    // general purpose bit flag\n    // set bit 11 if utf8\n    header += decToHex(bitflag, 2);\n    // compression method\n    header += compression.magic;\n    // last mod file time\n    header += decToHex(dosTime, 2);\n    // last mod file date\n    header += decToHex(dosDate, 2);\n    // crc-32\n    header += decToHex(dataInfo.crc32, 4);\n    // compressed size\n    header += decToHex(dataInfo.compressedSize, 4);\n    // uncompressed size\n    header += decToHex(dataInfo.uncompressedSize, 4);\n    // file name length\n    header += decToHex(encodedFileName.length, 2);\n    // extra field length\n    header += decToHex(extraFields.length, 2);\n\n\n    var fileRecord = signature.LOCAL_FILE_HEADER + header + encodedFileName + extraFields;\n\n    var dirRecord = signature.CENTRAL_FILE_HEADER +\n        // version made by (00: DOS)\n        decToHex(versionMadeBy, 2) +\n        // file header (common to file and central directory)\n        header +\n        // file comment length\n        decToHex(encodedComment.length, 2) +\n        // disk number start\n        \"\\x00\\x00\" +\n        // internal file attributes TODO\n        \"\\x00\\x00\" +\n        // external file attributes\n        decToHex(extFileAttr, 4) +\n        // relative offset of local header\n        decToHex(offset, 4) +\n        // file name\n        encodedFileName +\n        // extra field\n        extraFields +\n        // file comment\n        encodedComment;\n\n    return {\n        fileRecord: fileRecord,\n        dirRecord: dirRecord\n    };\n};\n\n/**\n * Generate the EOCD record.\n * @param {Number} entriesCount the number of entries in the zip file.\n * @param {Number} centralDirLength the length (in bytes) of the central dir.\n * @param {Number} localDirLength the length (in bytes) of the local dir.\n * @param {String} comment the zip file comment as a binary string.\n * @param {Function} encodeFileName the function to encode the comment.\n * @return {String} the EOCD record.\n */\nvar generateCentralDirectoryEnd = function (entriesCount, centralDirLength, localDirLength, comment, encodeFileName) {\n    var dirEnd = \"\";\n    var encodedComment = utils.transformTo(\"string\", encodeFileName(comment));\n\n    // end of central dir signature\n    dirEnd = signature.CENTRAL_DIRECTORY_END +\n        // number of this disk\n        \"\\x00\\x00\" +\n        // number of the disk with the start of the central directory\n        \"\\x00\\x00\" +\n        // total number of entries in the central directory on this disk\n        decToHex(entriesCount, 2) +\n        // total number of entries in the central directory\n        decToHex(entriesCount, 2) +\n        // size of the central directory   4 bytes\n        decToHex(centralDirLength, 4) +\n        // offset of start of central directory with respect to the starting disk number\n        decToHex(localDirLength, 4) +\n        // .ZIP file comment length\n        decToHex(encodedComment.length, 2) +\n        // .ZIP file comment\n        encodedComment;\n\n    return dirEnd;\n};\n\n/**\n * Generate data descriptors for a file entry.\n * @param {Object} streamInfo the hash generated by a worker, containing informations\n * on the file entry.\n * @return {String} the data descriptors.\n */\nvar generateDataDescriptors = function (streamInfo) {\n    var descriptor = \"\";\n    descriptor = signature.DATA_DESCRIPTOR +\n        // crc-32                          4 bytes\n        decToHex(streamInfo['crc32'], 4) +\n        // compressed size                 4 bytes\n        decToHex(streamInfo['compressedSize'], 4) +\n        // uncompressed size               4 bytes\n        decToHex(streamInfo['uncompressedSize'], 4);\n\n    return descriptor;\n};\n\n\n/**\n * A worker to concatenate other workers to create a zip file.\n * @param {Boolean} streamFiles `true` to stream the content of the files,\n * `false` to accumulate it.\n * @param {String} comment the comment to use.\n * @param {String} platform the platform to use, \"UNIX\" or \"DOS\".\n * @param {Function} encodeFileName the function to encode file names and comments.\n */\nfunction ZipFileWorker(streamFiles, comment, platform, encodeFileName) {\n    GenericWorker.call(this, \"ZipFileWorker\");\n    // The number of bytes written so far. This doesn't count accumulated chunks.\n    this.bytesWritten = 0;\n    // The comment of the zip file\n    this.zipComment = comment;\n    // The platform \"generating\" the zip file.\n    this.zipPlatform = platform;\n    // the function to encode file names and comments.\n    this.encodeFileName = encodeFileName;\n    // Should we stream the content of the files ?\n    this.streamFiles = streamFiles;\n    // If `streamFiles` is false, we will need to accumulate the content of the\n    // files to calculate sizes / crc32 (and write them *before* the content).\n    // This boolean indicates if we are accumulating chunks (it will change a lot\n    // during the lifetime of this worker).\n    this.accumulate = false;\n    // The buffer receiving chunks when accumulating content.\n    this.contentBuffer = [];\n    // The list of generated directory records.\n    this.dirRecords = [];\n    // The offset (in bytes) from the beginning of the zip file for the current source.\n    this.currentSourceOffset = 0;\n    // The total number of entries in this zip file.\n    this.entriesCount = 0;\n    // the name of the file currently being added, null when handling the end of the zip file.\n    // Used for the emited metadata.\n    this.currentFile = null;\n\n\n\n    this._sources = [];\n}\nutils.inherits(ZipFileWorker, GenericWorker);\n\n/**\n * @see GenericWorker.push\n */\nZipFileWorker.prototype.push = function (chunk) {\n\n    var currentFilePercent = chunk.meta.percent || 0;\n    var entriesCount = this.entriesCount;\n    var remainingFiles = this._sources.length;\n\n    if(this.accumulate) {\n        this.contentBuffer.push(chunk);\n    } else {\n        this.bytesWritten += chunk.data.length;\n\n        GenericWorker.prototype.push.call(this, {\n            data : chunk.data,\n            meta : {\n                currentFile : this.currentFile,\n                percent : entriesCount ? (currentFilePercent + 100 * (entriesCount - remainingFiles - 1)) / entriesCount : 100\n            }\n        });\n    }\n};\n\n/**\n * The worker started a new source (an other worker).\n * @param {Object} streamInfo the streamInfo object from the new source.\n */\nZipFileWorker.prototype.openedSource = function (streamInfo) {\n    this.currentSourceOffset = this.bytesWritten;\n    this.currentFile = streamInfo['file'].name;\n\n    // don't stream folders (because they don't have any content)\n    if(this.streamFiles && !streamInfo['file'].dir) {\n        var record = generateZipParts(streamInfo, this.streamFiles, false, this.currentSourceOffset, this.zipPlatform, this.encodeFileName);\n        this.push({\n            data : record.fileRecord,\n            meta : {percent:0}\n        });\n    } else {\n        // we need to wait for the whole file before pushing anything\n        this.accumulate = true;\n    }\n};\n\n/**\n * The worker finished a source (an other worker).\n * @param {Object} streamInfo the streamInfo object from the finished source.\n */\nZipFileWorker.prototype.closedSource = function (streamInfo) {\n    this.accumulate = false;\n    var record = generateZipParts(streamInfo, this.streamFiles, true, this.currentSourceOffset, this.zipPlatform, this.encodeFileName);\n\n    this.dirRecords.push(record.dirRecord);\n    if(this.streamFiles && !streamInfo['file'].dir) {\n        // after the streamed file, we put data descriptors\n        this.push({\n            data : generateDataDescriptors(streamInfo),\n            meta : {percent:100}\n        });\n    } else {\n        // the content wasn't streamed, we need to push everything now\n        // first the file record, then the content\n        this.push({\n            data : record.fileRecord,\n            meta : {percent:0}\n        });\n        while(this.contentBuffer.length) {\n            this.push(this.contentBuffer.shift());\n        }\n    }\n    this.currentFile = null;\n};\n\n/**\n * @see GenericWorker.flush\n */\nZipFileWorker.prototype.flush = function () {\n\n    var localDirLength = this.bytesWritten;\n    for(var i = 0; i < this.dirRecords.length; i++) {\n        this.push({\n            data : this.dirRecords[i],\n            meta : {percent:100}\n        });\n    }\n    var centralDirLength = this.bytesWritten - localDirLength;\n\n    var dirEnd = generateCentralDirectoryEnd(this.dirRecords.length, centralDirLength, localDirLength, this.zipComment, this.encodeFileName);\n\n    this.push({\n        data : dirEnd,\n        meta : {percent:100}\n    });\n};\n\n/**\n * Prepare the next source to be read.\n */\nZipFileWorker.prototype.prepareNextSource = function () {\n    this.previous = this._sources.shift();\n    this.openedSource(this.previous.streamInfo);\n    if (this.isPaused) {\n        this.previous.pause();\n    } else {\n        this.previous.resume();\n    }\n};\n\n/**\n * @see GenericWorker.registerPrevious\n */\nZipFileWorker.prototype.registerPrevious = function (previous) {\n    this._sources.push(previous);\n    var self = this;\n\n    previous.on('data', function (chunk) {\n        self.processChunk(chunk);\n    });\n    previous.on('end', function () {\n        self.closedSource(self.previous.streamInfo);\n        if(self._sources.length) {\n            self.prepareNextSource();\n        } else {\n            self.end();\n        }\n    });\n    previous.on('error', function (e) {\n        self.error(e);\n    });\n    return this;\n};\n\n/**\n * @see GenericWorker.resume\n */\nZipFileWorker.prototype.resume = function () {\n    if(!GenericWorker.prototype.resume.call(this)) {\n        return false;\n    }\n\n    if (!this.previous && this._sources.length) {\n        this.prepareNextSource();\n        return true;\n    }\n    if (!this.previous && !this._sources.length && !this.generatedError) {\n        this.end();\n        return true;\n    }\n};\n\n/**\n * @see GenericWorker.error\n */\nZipFileWorker.prototype.error = function (e) {\n    var sources = this._sources;\n    if(!GenericWorker.prototype.error.call(this, e)) {\n        return false;\n    }\n    for(var i = 0; i < sources.length; i++) {\n        try {\n            sources[i].error(e);\n        } catch(e) {\n            // the `error` exploded, nothing to do\n        }\n    }\n    return true;\n};\n\n/**\n * @see GenericWorker.lock\n */\nZipFileWorker.prototype.lock = function () {\n    GenericWorker.prototype.lock.call(this);\n    var sources = this._sources;\n    for(var i = 0; i < sources.length; i++) {\n        sources[i].lock();\n    }\n};\n\nmodule.exports = ZipFileWorker;\n\n},{\"../crc32\":4,\"../signature\":20,\"../stream/GenericWorker\":25,\"../utf8\":28,\"../utils\":29}],9:[function(require,module,exports){\n'use strict';\n\nvar compressions = require('../compressions');\nvar ZipFileWorker = require('./ZipFileWorker');\n\n/**\n * Find the compression to use.\n * @param {String} fileCompression the compression defined at the file level, if any.\n * @param {String} zipCompression the compression defined at the load() level.\n * @return {Object} the compression object to use.\n */\nvar getCompression = function (fileCompression, zipCompression) {\n\n    var compressionName = fileCompression || zipCompression;\n    var compression = compressions[compressionName];\n    if (!compression) {\n        throw new Error(compressionName + \" is not a valid compression method !\");\n    }\n    return compression;\n};\n\n/**\n * Create a worker to generate a zip file.\n * @param {JSZip} zip the JSZip instance at the right root level.\n * @param {Object} options to generate the zip file.\n * @param {String} comment the comment to use.\n */\nexports.generateWorker = function (zip, options, comment) {\n\n    var zipFileWorker = new ZipFileWorker(options.streamFiles, comment, options.platform, options.encodeFileName);\n    var entriesCount = 0;\n    try {\n\n        zip.forEach(function (relativePath, file) {\n            entriesCount++;\n            var compression = getCompression(file.options.compression, options.compression);\n            var compressionOptions = file.options.compressionOptions || options.compressionOptions || {};\n            var dir = file.dir, date = file.date;\n\n            file._compressWorker(compression, compressionOptions)\n            .withStreamInfo(\"file\", {\n                name : relativePath,\n                dir : dir,\n                date : date,\n                comment : file.comment || \"\",\n                unixPermissions : file.unixPermissions,\n                dosPermissions : file.dosPermissions\n            })\n            .pipe(zipFileWorker);\n        });\n        zipFileWorker.entriesCount = entriesCount;\n    } catch (e) {\n        zipFileWorker.error(e);\n    }\n\n    return zipFileWorker;\n};\n\n},{\"../compressions\":3,\"./ZipFileWorker\":8}],10:[function(require,module,exports){\n'use strict';\n\n/**\n * Representation a of zip file in js\n * @constructor\n */\nfunction JSZip() {\n    // if this constructor isused without`new`, itadds `new` beforeitself:\n    if(!(this instanceof JSZip)) {\n        return new JSZip();\n    }\n\n    if(arguments.length) {\n        throw new Error(\"The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.\");\n    }\n\n    // object containing the files :\n    // {\n    //   \"folder/\" : {...},\n    //   \"folder/data.txt\" : {...}\n    // }\n    this.files = {};\n\n    this.comment = null;\n\n    // Where we are in the hierarchy\n    this.root = \"\";\n    this.clone = function() {\n        var newObj = new JSZip();\n        for (var i in this) {\n            if (typeof this[i] !== \"function\") {\n                newObj[i] = this[i];\n            }\n        }\n        return newObj;\n    };\n}\nJSZip.prototype = require('./object');\nJSZip.prototype.loadAsync = require('./load');\nJSZip.support = require('./support');\nJSZip.defaults = require('./defaults');\n\nJSZip.loadAsync = function (content, options) {\n    return new JSZip().loadAsync(content, options);\n};\n\nJSZip.external = require(\"./external\");\nmodule.exports = JSZip;\n\n},{\"./defaults\":5,\"./external\":6,\"./load\":11,\"./object\":13,\"./support\":27}],11:[function(require,module,exports){\n'use strict';\nvar utils = require('./utils');\nvar external = require(\"./external\");\nvar utf8 = require('./utf8');\nvar utils = require('./utils');\nvar ZipEntries = require('./zipEntries');\nvar Crc32Probe = require('./stream/Crc32Probe');\nvar nodejsUtils = require(\"./nodejsUtils\");\n\n/**\n * Check the CRC32 of an entry.\n * @param {ZipEntry} zipEntry the zip entry to check.\n * @return {Promise} the result.\n */\nfunction checkEntryCRC32(zipEntry) {\n    return new external.Promise(function (resolve, reject) {\n        var worker = zipEntry.decompressed.getContentWorker().pipe(new Crc32Probe());\n        worker.on(\"error\", function (e) {\n            reject(e);\n        })\n        .on(\"end\", function () {\n            if (worker.streamInfo.crc32 !== zipEntry.decompressed.crc32) {\n                reject(new Error(\"Corrupted zip : CRC32 mismatch\"));\n            } else {\n                resolve();\n            }\n        })\n        .resume();\n    });\n}\n\nmodule.exports = function(data, options) {\n    var zip = this;\n    options = utils.extend(options || {}, {\n        base64: false,\n        checkCRC32: false,\n        optimizedBinaryString: false,\n        createFolders: false,\n        decodeFileName: utf8.utf8decode\n    });\n\n    if (nodejsUtils.isNode && nodejsUtils.isStream(data)) {\n        return external.Promise.reject(new Error(\"JSZip can't accept a stream when loading a zip file.\"));\n    }\n\n    return utils.prepareContent(\"the loaded zip file\", data, true, options.optimizedBinaryString, options.base64)\n    .then(function(data) {\n        var zipEntries = new ZipEntries(options);\n        zipEntries.load(data);\n        return zipEntries;\n    }).then(function checkCRC32(zipEntries) {\n        var promises = [external.Promise.resolve(zipEntries)];\n        var files = zipEntries.files;\n        if (options.checkCRC32) {\n            for (var i = 0; i < files.length; i++) {\n                promises.push(checkEntryCRC32(files[i]));\n            }\n        }\n        return external.Promise.all(promises);\n    }).then(function addFiles(results) {\n        var zipEntries = results.shift();\n        var files = zipEntries.files;\n        for (var i = 0; i < files.length; i++) {\n            var input = files[i];\n            zip.file(input.fileNameStr, input.decompressed, {\n                binary: true,\n                optimizedBinaryString: true,\n                date: input.date,\n                dir: input.dir,\n                comment : input.fileCommentStr.length ? input.fileCommentStr : null,\n                unixPermissions : input.unixPermissions,\n                dosPermissions : input.dosPermissions,\n                createFolders: options.createFolders\n            });\n        }\n        if (zipEntries.zipComment.length) {\n            zip.comment = zipEntries.zipComment;\n        }\n\n        return zip;\n    });\n};\n\n},{\"./external\":6,\"./nodejsUtils\":12,\"./stream/Crc32Probe\":22,\"./utf8\":28,\"./utils\":29,\"./zipEntries\":30}],12:[function(require,module,exports){\n(function (Buffer){\n'use strict';\n\nmodule.exports = {\n    /**\n     * True if this is running in Nodejs, will be undefined in a browser.\n     * In a browser, browserify won't include this file and the whole module\n     * will be resolved an empty object.\n     */\n    isNode : typeof Buffer !== \"undefined\",\n    /**\n     * Create a new nodejs Buffer.\n     * @param {Object} data the data to pass to the constructor.\n     * @param {String} encoding the encoding to use.\n     * @return {Buffer} a new Buffer.\n     */\n    newBuffer : function(data, encoding){\n        return new Buffer(data, encoding);\n    },\n    /**\n     * Find out if an object is a Buffer.\n     * @param {Object} b the object to test.\n     * @return {Boolean} true if the object is a Buffer, false otherwise.\n     */\n    isBuffer : function(b){\n        return Buffer.isBuffer(b);\n    },\n\n    isStream : function (obj) {\n        return obj &&\n            typeof obj.on === \"function\" &&\n            typeof obj.pause === \"function\" &&\n            typeof obj.resume === \"function\";\n    }\n};\n\n}).call(this,(typeof Buffer !== \"undefined\" ? Buffer : undefined))\n},{}],13:[function(require,module,exports){\n'use strict';\nvar utf8 = require('./utf8');\nvar utils = require('./utils');\nvar GenericWorker = require('./stream/GenericWorker');\nvar StreamHelper = require('./stream/StreamHelper');\nvar defaults = require('./defaults');\nvar CompressedObject = require('./compressedObject');\nvar ZipObject = require('./zipObject');\nvar generate = require(\"./generate\");\nvar nodejsUtils = require(\"./nodejsUtils\");\nvar NodejsStreamInputAdapter = require(\"./nodejs/NodejsStreamInputAdapter\");\n\n\n/**\n * Add a file in the current folder.\n * @private\n * @param {string} name the name of the file\n * @param {String|ArrayBuffer|Uint8Array|Buffer} data the data of the file\n * @param {Object} o the options of the file\n * @return {Object} the new file.\n */\nvar fileAdd = function(name, data, o) {\n    // be sure sub folders exist\n    var dataType = utils.getTypeOf(data),\n        parent;\n\n\n    /*\n     * Correct options.\n     */\n\n    o = utils.extend(o || {}, defaults);\n    o.date = o.date || new Date();\n    if (o.compression !== null) {\n        o.compression = o.compression.toUpperCase();\n    }\n\n    if (typeof o.unixPermissions === \"string\") {\n        o.unixPermissions = parseInt(o.unixPermissions, 8);\n    }\n\n    // UNX_IFDIR  0040000 see zipinfo.c\n    if (o.unixPermissions && (o.unixPermissions & 0x4000)) {\n        o.dir = true;\n    }\n    // Bit 4    Directory\n    if (o.dosPermissions && (o.dosPermissions & 0x0010)) {\n        o.dir = true;\n    }\n\n    if (o.dir) {\n        name = forceTrailingSlash(name);\n    }\n    if (o.createFolders && (parent = parentFolder(name))) {\n        folderAdd.call(this, parent, true);\n    }\n\n    var isUnicodeString = dataType === \"string\" && o.binary === false && o.base64 === false;\n    o.binary = !isUnicodeString;\n\n\n    var isCompressedEmpty = (data instanceof CompressedObject) && data.uncompressedSize === 0;\n\n    if (isCompressedEmpty || o.dir || !data || data.length === 0) {\n        o.base64 = false;\n        o.binary = true;\n        data = \"\";\n        o.compression = \"STORE\";\n        dataType = \"string\";\n    }\n\n    /*\n     * Convert content to fit.\n     */\n\n    var zipObjectContent = null;\n    if (data instanceof CompressedObject || data instanceof GenericWorker) {\n        zipObjectContent = data;\n    } else if (nodejsUtils.isNode && nodejsUtils.isStream(data)) {\n        zipObjectContent = new NodejsStreamInputAdapter(name, data);\n    } else {\n        zipObjectContent = utils.prepareContent(name, data, o.binary, o.optimizedBinaryString, o.base64);\n    }\n\n    var object = new ZipObject(name, zipObjectContent, o);\n    this.files[name] = object;\n    /*\n    TODO: we can't throw an exception because we have async promises\n    (we can have a promise of a Date() for example) but returning a\n    promise is useless because file(name, data) returns the JSZip\n    object for chaining. Should we break that to allow the user\n    to catch the error ?\n\n    return external.Promise.resolve(zipObjectContent)\n    .then(function () {\n        return object;\n    });\n    */\n};\n\n/**\n * Find the parent folder of the path.\n * @private\n * @param {string} path the path to use\n * @return {string} the parent folder, or \"\"\n */\nvar parentFolder = function (path) {\n    if (path.slice(-1) === '/') {\n        path = path.substring(0, path.length - 1);\n    }\n    var lastSlash = path.lastIndexOf('/');\n    return (lastSlash > 0) ? path.substring(0, lastSlash) : \"\";\n};\n\n/**\n * Returns the path with a slash at the end.\n * @private\n * @param {String} path the path to check.\n * @return {String} the path with a trailing slash.\n */\nvar forceTrailingSlash = function(path) {\n    // Check the name ends with a /\n    if (path.slice(-1) !== \"/\") {\n        path += \"/\"; // IE doesn't like substr(-1)\n    }\n    return path;\n};\n\n/**\n * Add a (sub) folder in the current folder.\n * @private\n * @param {string} name the folder's name\n * @param {boolean=} [createFolders] If true, automatically create sub\n *  folders. Defaults to false.\n * @return {Object} the new folder.\n */\nvar folderAdd = function(name, createFolders) {\n    createFolders = (typeof createFolders !== 'undefined') ? createFolders : defaults.createFolders;\n\n    name = forceTrailingSlash(name);\n\n    // Does this folder already exist?\n    if (!this.files[name]) {\n        fileAdd.call(this, name, null, {\n            dir: true,\n            createFolders: createFolders\n        });\n    }\n    return this.files[name];\n};\n\n/**\n* Cross-window, cross-Node-context regular expression detection\n* @param  {Object}  object Anything\n* @return {Boolean}        true if the object is a regular expression,\n* false otherwise\n*/\nfunction isRegExp(object) {\n    return Object.prototype.toString.call(object) === \"[object RegExp]\";\n}\n\n// return the actual prototype of JSZip\nvar out = {\n    /**\n     * @see loadAsync\n     */\n    load: function() {\n        throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\");\n    },\n\n\n    /**\n     * Call a callback function for each entry at this folder level.\n     * @param {Function} cb the callback function:\n     * function (relativePath, file) {...}\n     * It takes 2 arguments : the relative path and the file.\n     */\n    forEach: function(cb) {\n        var filename, relativePath, file;\n        for (filename in this.files) {\n            if (!this.files.hasOwnProperty(filename)) {\n                continue;\n            }\n            file = this.files[filename];\n            relativePath = filename.slice(this.root.length, filename.length);\n            if (relativePath && filename.slice(0, this.root.length) === this.root) { // the file is in the current root\n                cb(relativePath, file); // TODO reverse the parameters ? need to be clean AND consistent with the filter search fn...\n            }\n        }\n    },\n\n    /**\n     * Filter nested files/folders with the specified function.\n     * @param {Function} search the predicate to use :\n     * function (relativePath, file) {...}\n     * It takes 2 arguments : the relative path and the file.\n     * @return {Array} An array of matching elements.\n     */\n    filter: function(search) {\n        var result = [];\n        this.forEach(function (relativePath, entry) {\n            if (search(relativePath, entry)) { // the file matches the function\n                result.push(entry);\n            }\n\n        });\n        return result;\n    },\n\n    /**\n     * Add a file to the zip file, or search a file.\n     * @param   {string|RegExp} name The name of the file to add (if data is defined),\n     * the name of the file to find (if no data) or a regex to match files.\n     * @param   {String|ArrayBuffer|Uint8Array|Buffer} data  The file data, either raw or base64 encoded\n     * @param   {Object} o     File options\n     * @return  {JSZip|Object|Array} this JSZip object (when adding a file),\n     * a file (when searching by string) or an array of files (when searching by regex).\n     */\n    file: function(name, data, o) {\n        if (arguments.length === 1) {\n            if (isRegExp(name)) {\n                var regexp = name;\n                return this.filter(function(relativePath, file) {\n                    return !file.dir && regexp.test(relativePath);\n                });\n            }\n            else { // text\n                var obj = this.files[this.root + name];\n                if (obj && !obj.dir) {\n                    return obj;\n                } else {\n                    return null;\n                }\n            }\n        }\n        else { // more than one argument : we have data !\n            name = this.root + name;\n            fileAdd.call(this, name, data, o);\n        }\n        return this;\n    },\n\n    /**\n     * Add a directory to the zip file, or search.\n     * @param   {String|RegExp} arg The name of the directory to add, or a regex to search folders.\n     * @return  {JSZip} an object with the new directory as the root, or an array containing matching folders.\n     */\n    folder: function(arg) {\n        if (!arg) {\n            return this;\n        }\n\n        if (isRegExp(arg)) {\n            return this.filter(function(relativePath, file) {\n                return file.dir && arg.test(relativePath);\n            });\n        }\n\n        // else, name is a new folder\n        var name = this.root + arg;\n        var newFolder = folderAdd.call(this, name);\n\n        // Allow chaining by returning a new object with this folder as the root\n        var ret = this.clone();\n        ret.root = newFolder.name;\n        return ret;\n    },\n\n    /**\n     * Delete a file, or a directory and all sub-files, from the zip\n     * @param {string} name the name of the file to delete\n     * @return {JSZip} this JSZip object\n     */\n    remove: function(name) {\n        name = this.root + name;\n        var file = this.files[name];\n        if (!file) {\n            // Look for any folders\n            if (name.slice(-1) !== \"/\") {\n                name += \"/\";\n            }\n            file = this.files[name];\n        }\n\n        if (file && !file.dir) {\n            // file\n            delete this.files[name];\n        } else {\n            // maybe a folder, delete recursively\n            var kids = this.filter(function(relativePath, file) {\n                return file.name.slice(0, name.length) === name;\n            });\n            for (var i = 0; i < kids.length; i++) {\n                delete this.files[kids[i].name];\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * Generate the complete zip file\n     * @param {Object} options the options to generate the zip file :\n     * - compression, \"STORE\" by default.\n     * - type, \"base64\" by default. Values are : string, base64, uint8array, arraybuffer, blob.\n     * @return {String|Uint8Array|ArrayBuffer|Buffer|Blob} the zip file\n     */\n    generate: function(options) {\n        throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\");\n    },\n\n    /**\n     * Generate the complete zip file as an internal stream.\n     * @param {Object} options the options to generate the zip file :\n     * - compression, \"STORE\" by default.\n     * - type, \"base64\" by default. Values are : string, base64, uint8array, arraybuffer, blob.\n     * @return {StreamHelper} the streamed zip file.\n     */\n    generateInternalStream: function(options) {\n      var worker, opts = {};\n      try {\n          opts = utils.extend(options || {}, {\n              streamFiles: false,\n              compression: \"STORE\",\n              compressionOptions : null,\n              type: \"\",\n              platform: \"DOS\",\n              comment: null,\n              mimeType: 'application/zip',\n              encodeFileName: utf8.utf8encode\n          });\n\n          opts.type = opts.type.toLowerCase();\n          opts.compression = opts.compression.toUpperCase();\n\n          // \"binarystring\" is prefered but the internals use \"string\".\n          if(opts.type === \"binarystring\") {\n            opts.type = \"string\";\n          }\n\n          if (!opts.type) {\n            throw new Error(\"No output type specified.\");\n          }\n\n          utils.checkSupport(opts.type);\n\n          // accept nodejs `process.platform`\n          if(\n              options.platform === 'darwin' ||\n              options.platform === 'freebsd' ||\n              options.platform === 'linux' ||\n              options.platform === 'sunos'\n          ) {\n              options.platform = \"UNIX\";\n          }\n          if (options.platform === 'win32') {\n              options.platform = \"DOS\";\n          }\n\n          var comment = opts.comment || this.comment || \"\";\n          worker = generate.generateWorker(this, opts, comment);\n      } catch (e) {\n        worker = new GenericWorker(\"error\");\n        worker.error(e);\n      }\n      return new StreamHelper(worker, opts.type || \"string\", opts.mimeType);\n    },\n    /**\n     * Generate the complete zip file asynchronously.\n     * @see generateInternalStream\n     */\n    generateAsync: function(options, onUpdate) {\n        return this.generateInternalStream(options).accumulate(onUpdate);\n    },\n    /**\n     * Generate the complete zip file asynchronously.\n     * @see generateInternalStream\n     */\n    generateNodeStream: function(options, onUpdate) {\n        options = options || {};\n        if (!options.type) {\n            options.type = \"nodebuffer\";\n        }\n        return this.generateInternalStream(options).toNodejsStream(onUpdate);\n    }\n};\nmodule.exports = out;\n\n},{\"./compressedObject\":2,\"./defaults\":5,\"./generate\":9,\"./nodejs/NodejsStreamInputAdapter\":35,\"./nodejsUtils\":12,\"./stream/GenericWorker\":25,\"./stream/StreamHelper\":26,\"./utf8\":28,\"./utils\":29,\"./zipObject\":32}],14:[function(require,module,exports){\n'use strict';\nvar DataReader = require('./DataReader');\nvar utils = require('../utils');\n\nfunction ArrayReader(data) {\n    DataReader.call(this, data);\n\tfor(var i = 0; i < this.data.length; i++) {\n\t\tdata[i] = data[i] & 0xFF;\n\t}\n}\nutils.inherits(ArrayReader, DataReader);\n/**\n * @see DataReader.byteAt\n */\nArrayReader.prototype.byteAt = function(i) {\n    return this.data[this.zero + i];\n};\n/**\n * @see DataReader.lastIndexOfSignature\n */\nArrayReader.prototype.lastIndexOfSignature = function(sig) {\n    var sig0 = sig.charCodeAt(0),\n        sig1 = sig.charCodeAt(1),\n        sig2 = sig.charCodeAt(2),\n        sig3 = sig.charCodeAt(3);\n    for (var i = this.length - 4; i >= 0; --i) {\n        if (this.data[i] === sig0 && this.data[i + 1] === sig1 && this.data[i + 2] === sig2 && this.data[i + 3] === sig3) {\n            return i - this.zero;\n        }\n    }\n\n    return -1;\n};\n/**\n * @see DataReader.readAndCheckSignature\n */\nArrayReader.prototype.readAndCheckSignature = function (sig) {\n    var sig0 = sig.charCodeAt(0),\n        sig1 = sig.charCodeAt(1),\n        sig2 = sig.charCodeAt(2),\n        sig3 = sig.charCodeAt(3),\n        data = this.readData(4);\n    return sig0 === data[0] && sig1 === data[1] && sig2 === data[2] && sig3 === data[3];\n};\n/**\n * @see DataReader.readData\n */\nArrayReader.prototype.readData = function(size) {\n    this.checkOffset(size);\n    if(size === 0) {\n        return [];\n    }\n    var result = this.data.slice(this.zero + this.index, this.zero + this.index + size);\n    this.index += size;\n    return result;\n};\nmodule.exports = ArrayReader;\n\n},{\"../utils\":29,\"./DataReader\":15}],15:[function(require,module,exports){\n'use strict';\nvar utils = require('../utils');\n\nfunction DataReader(data) {\n    this.data = data; // type : see implementation\n    this.length = data.length;\n    this.index = 0;\n    this.zero = 0;\n}\nDataReader.prototype = {\n    /**\n     * Check that the offset will not go too far.\n     * @param {string} offset the additional offset to check.\n     * @throws {Error} an Error if the offset is out of bounds.\n     */\n    checkOffset: function(offset) {\n        this.checkIndex(this.index + offset);\n    },\n    /**\n     * Check that the specifed index will not be too far.\n     * @param {string} newIndex the index to check.\n     * @throws {Error} an Error if the index is out of bounds.\n     */\n    checkIndex: function(newIndex) {\n        if (this.length < this.zero + newIndex || newIndex < 0) {\n            throw new Error(\"End of data reached (data length = \" + this.length + \", asked index = \" + (newIndex) + \"). Corrupted zip ?\");\n        }\n    },\n    /**\n     * Change the index.\n     * @param {number} newIndex The new index.\n     * @throws {Error} if the new index is out of the data.\n     */\n    setIndex: function(newIndex) {\n        this.checkIndex(newIndex);\n        this.index = newIndex;\n    },\n    /**\n     * Skip the next n bytes.\n     * @param {number} n the number of bytes to skip.\n     * @throws {Error} if the new index is out of the data.\n     */\n    skip: function(n) {\n        this.setIndex(this.index + n);\n    },\n    /**\n     * Get the byte at the specified index.\n     * @param {number} i the index to use.\n     * @return {number} a byte.\n     */\n    byteAt: function(i) {\n        // see implementations\n    },\n    /**\n     * Get the next number with a given byte size.\n     * @param {number} size the number of bytes to read.\n     * @return {number} the corresponding number.\n     */\n    readInt: function(size) {\n        var result = 0,\n            i;\n        this.checkOffset(size);\n        for (i = this.index + size - 1; i >= this.index; i--) {\n            result = (result << 8) + this.byteAt(i);\n        }\n        this.index += size;\n        return result;\n    },\n    /**\n     * Get the next string with a given byte size.\n     * @param {number} size the number of bytes to read.\n     * @return {string} the corresponding string.\n     */\n    readString: function(size) {\n        return utils.transformTo(\"string\", this.readData(size));\n    },\n    /**\n     * Get raw data without conversion, <size> bytes.\n     * @param {number} size the number of bytes to read.\n     * @return {Object} the raw data, implementation specific.\n     */\n    readData: function(size) {\n        // see implementations\n    },\n    /**\n     * Find the last occurence of a zip signature (4 bytes).\n     * @param {string} sig the signature to find.\n     * @return {number} the index of the last occurence, -1 if not found.\n     */\n    lastIndexOfSignature: function(sig) {\n        // see implementations\n    },\n    /**\n     * Read the signature (4 bytes) at the current position and compare it with sig.\n     * @param {string} sig the expected signature\n     * @return {boolean} true if the signature matches, false otherwise.\n     */\n    readAndCheckSignature: function(sig) {\n        // see implementations\n    },\n    /**\n     * Get the next date.\n     * @return {Date} the date.\n     */\n    readDate: function() {\n        var dostime = this.readInt(4);\n        return new Date(Date.UTC(\n        ((dostime >> 25) & 0x7f) + 1980, // year\n        ((dostime >> 21) & 0x0f) - 1, // month\n        (dostime >> 16) & 0x1f, // day\n        (dostime >> 11) & 0x1f, // hour\n        (dostime >> 5) & 0x3f, // minute\n        (dostime & 0x1f) << 1)); // second\n    }\n};\nmodule.exports = DataReader;\n\n},{\"../utils\":29}],16:[function(require,module,exports){\n'use strict';\nvar Uint8ArrayReader = require('./Uint8ArrayReader');\nvar utils = require('../utils');\n\nfunction NodeBufferReader(data) {\n    Uint8ArrayReader.call(this, data);\n}\nutils.inherits(NodeBufferReader, Uint8ArrayReader);\n\n/**\n * @see DataReader.readData\n */\nNodeBufferReader.prototype.readData = function(size) {\n    this.checkOffset(size);\n    var result = this.data.slice(this.zero + this.index, this.zero + this.index + size);\n    this.index += size;\n    return result;\n};\nmodule.exports = NodeBufferReader;\n\n},{\"../utils\":29,\"./Uint8ArrayReader\":18}],17:[function(require,module,exports){\n'use strict';\nvar DataReader = require('./DataReader');\nvar utils = require('../utils');\n\nfunction StringReader(data) {\n    DataReader.call(this, data);\n}\nutils.inherits(StringReader, DataReader);\n/**\n * @see DataReader.byteAt\n */\nStringReader.prototype.byteAt = function(i) {\n    return this.data.charCodeAt(this.zero + i);\n};\n/**\n * @see DataReader.lastIndexOfSignature\n */\nStringReader.prototype.lastIndexOfSignature = function(sig) {\n    return this.data.lastIndexOf(sig) - this.zero;\n};\n/**\n * @see DataReader.readAndCheckSignature\n */\nStringReader.prototype.readAndCheckSignature = function (sig) {\n    var data = this.readData(4);\n    return sig === data;\n};\n/**\n * @see DataReader.readData\n */\nStringReader.prototype.readData = function(size) {\n    this.checkOffset(size);\n    // this will work because the constructor applied the \"& 0xff\" mask.\n    var result = this.data.slice(this.zero + this.index, this.zero + this.index + size);\n    this.index += size;\n    return result;\n};\nmodule.exports = StringReader;\n\n},{\"../utils\":29,\"./DataReader\":15}],18:[function(require,module,exports){\n'use strict';\nvar ArrayReader = require('./ArrayReader');\nvar utils = require('../utils');\n\nfunction Uint8ArrayReader(data) {\n    ArrayReader.call(this, data);\n}\nutils.inherits(Uint8ArrayReader, ArrayReader);\n/**\n * @see DataReader.readData\n */\nUint8ArrayReader.prototype.readData = function(size) {\n    this.checkOffset(size);\n    if(size === 0) {\n        // in IE10, when using subarray(idx, idx), we get the array [0x00] instead of [].\n        return new Uint8Array(0);\n    }\n    var result = this.data.subarray(this.zero + this.index, this.zero + this.index + size);\n    this.index += size;\n    return result;\n};\nmodule.exports = Uint8ArrayReader;\n\n},{\"../utils\":29,\"./ArrayReader\":14}],19:[function(require,module,exports){\n'use strict';\n\nvar utils = require('../utils');\nvar support = require('../support');\nvar ArrayReader = require('./ArrayReader');\nvar StringReader = require('./StringReader');\nvar NodeBufferReader = require('./NodeBufferReader');\nvar Uint8ArrayReader = require('./Uint8ArrayReader');\n\n/**\n * Create a reader adapted to the data.\n * @param {String|ArrayBuffer|Uint8Array|Buffer} data the data to read.\n * @return {DataReader} the data reader.\n */\nmodule.exports = function (data) {\n    var type = utils.getTypeOf(data);\n    utils.checkSupport(type);\n    if (type === \"string\" && !support.uint8array) {\n        return new StringReader(data);\n    }\n    if (type === \"nodebuffer\") {\n        return new NodeBufferReader(data);\n    }\n    if (support.uint8array) {\n        return new Uint8ArrayReader(utils.transformTo(\"uint8array\", data));\n    }\n    return new ArrayReader(utils.transformTo(\"array\", data));\n};\n\n// vim: set shiftwidth=4 softtabstop=4:\n\n},{\"../support\":27,\"../utils\":29,\"./ArrayReader\":14,\"./NodeBufferReader\":16,\"./StringReader\":17,\"./Uint8ArrayReader\":18}],20:[function(require,module,exports){\n'use strict';\nexports.LOCAL_FILE_HEADER = \"PK\\x03\\x04\";\nexports.CENTRAL_FILE_HEADER = \"PK\\x01\\x02\";\nexports.CENTRAL_DIRECTORY_END = \"PK\\x05\\x06\";\nexports.ZIP64_CENTRAL_DIRECTORY_LOCATOR = \"PK\\x06\\x07\";\nexports.ZIP64_CENTRAL_DIRECTORY_END = \"PK\\x06\\x06\";\nexports.DATA_DESCRIPTOR = \"PK\\x07\\x08\";\n\n},{}],21:[function(require,module,exports){\n'use strict';\n\nvar GenericWorker = require('./GenericWorker');\nvar utils = require('../utils');\n\n/**\n * A worker which convert chunks to a specified type.\n * @constructor\n * @param {String} destType the destination type.\n */\nfunction ConvertWorker(destType) {\n    GenericWorker.call(this, \"ConvertWorker to \" + destType);\n    this.destType = destType;\n}\nutils.inherits(ConvertWorker, GenericWorker);\n\n/**\n * @see GenericWorker.processChunk\n */\nConvertWorker.prototype.processChunk = function (chunk) {\n    this.push({\n        data : utils.transformTo(this.destType, chunk.data),\n        meta : chunk.meta\n    });\n};\nmodule.exports = ConvertWorker;\n\n},{\"../utils\":29,\"./GenericWorker\":25}],22:[function(require,module,exports){\n'use strict';\n\nvar GenericWorker = require('./GenericWorker');\nvar crc32 = require('../crc32');\nvar utils = require('../utils');\n\n/**\n * A worker which calculate the crc32 of the data flowing through.\n * @constructor\n */\nfunction Crc32Probe() {\n    GenericWorker.call(this, \"Crc32Probe\");\n}\nutils.inherits(Crc32Probe, GenericWorker);\n\n/**\n * @see GenericWorker.processChunk\n */\nCrc32Probe.prototype.processChunk = function (chunk) {\n    this.streamInfo.crc32 = crc32(chunk.data, this.streamInfo.crc32 || 0);\n    this.push(chunk);\n};\nmodule.exports = Crc32Probe;\n\n},{\"../crc32\":4,\"../utils\":29,\"./GenericWorker\":25}],23:[function(require,module,exports){\n'use strict';\n\nvar utils = require('../utils');\nvar GenericWorker = require('./GenericWorker');\n\n/**\n * A worker which calculate the total length of the data flowing through.\n * @constructor\n * @param {String} propName the name used to expose the length\n */\nfunction DataLengthProbe(propName) {\n    GenericWorker.call(this, \"DataLengthProbe for \" + propName);\n    this.propName = propName;\n    this.withStreamInfo(propName, 0);\n}\nutils.inherits(DataLengthProbe, GenericWorker);\n\n/**\n * @see GenericWorker.processChunk\n */\nDataLengthProbe.prototype.processChunk = function (chunk) {\n    if(chunk) {\n        var length = this.streamInfo[this.propName] || 0;\n        this.streamInfo[this.propName] = length + chunk.data.length;\n    }\n    GenericWorker.prototype.processChunk.call(this, chunk);\n};\nmodule.exports = DataLengthProbe;\n\n\n},{\"../utils\":29,\"./GenericWorker\":25}],24:[function(require,module,exports){\n'use strict';\n\nvar utils = require('../utils');\nvar GenericWorker = require('./GenericWorker');\n\n// the size of the generated chunks\n// TODO expose this as a public variable\nvar DEFAULT_BLOCK_SIZE = 16 * 1024;\n\n/**\n * A worker that reads a content and emits chunks.\n * @constructor\n * @param {Promise} dataP the promise of the data to split\n */\nfunction DataWorker(dataP) {\n    GenericWorker.call(this, \"DataWorker\");\n    var self = this;\n    this.dataIsReady = false;\n    this.index = 0;\n    this.max = 0;\n    this.data = null;\n    this.type = \"\";\n\n    this._tickScheduled = false;\n\n    dataP.then(function (data) {\n        self.dataIsReady = true;\n        self.data = data;\n        self.max = data && data.length || 0;\n        self.type = utils.getTypeOf(data);\n        if(!self.isPaused) {\n            self._tickAndRepeat();\n        }\n    }, function (e) {\n        self.error(e);\n    });\n}\n\nutils.inherits(DataWorker, GenericWorker);\n\n/**\n * @see GenericWorker.cleanUp\n */\nDataWorker.prototype.cleanUp = function () {\n    GenericWorker.prototype.cleanUp.call(this);\n    this.data = null;\n};\n\n/**\n * @see GenericWorker.resume\n */\nDataWorker.prototype.resume = function () {\n    if(!GenericWorker.prototype.resume.call(this)) {\n        return false;\n    }\n\n    if (!this._tickScheduled && this.dataIsReady) {\n        this._tickScheduled = true;\n        utils.delay(this._tickAndRepeat, [], this);\n    }\n    return true;\n};\n\n/**\n * Trigger a tick a schedule an other call to this function.\n */\nDataWorker.prototype._tickAndRepeat = function() {\n    this._tickScheduled = false;\n    if(this.isPaused || this.isFinished) {\n        return;\n    }\n    this._tick();\n    if(!this.isFinished) {\n        utils.delay(this._tickAndRepeat, [], this);\n        this._tickScheduled = true;\n    }\n};\n\n/**\n * Read and push a chunk.\n */\nDataWorker.prototype._tick = function() {\n\n    if(this.isPaused || this.isFinished) {\n        return false;\n    }\n\n    var size = DEFAULT_BLOCK_SIZE;\n    var data = null, nextIndex = Math.min(this.max, this.index + size);\n    if (this.index >= this.max) {\n        // EOF\n        return this.end();\n    } else {\n        switch(this.type) {\n            case \"string\":\n                data = this.data.substring(this.index, nextIndex);\n            break;\n            case \"uint8array\":\n                data = this.data.subarray(this.index, nextIndex);\n            break;\n            case \"array\":\n            case \"nodebuffer\":\n                data = this.data.slice(this.index, nextIndex);\n            break;\n        }\n        this.index = nextIndex;\n        return this.push({\n            data : data,\n            meta : {\n                percent : this.max ? this.index / this.max * 100 : 0\n            }\n        });\n    }\n};\n\nmodule.exports = DataWorker;\n\n},{\"../utils\":29,\"./GenericWorker\":25}],25:[function(require,module,exports){\n'use strict';\n\n/**\n * A worker that does nothing but passing chunks to the next one. This is like\n * a nodejs stream but with some differences. On the good side :\n * - it works on IE 6-9 without any issue / polyfill\n * - it weights less than the full dependencies bundled with browserify\n * - it forwards errors (no need to declare an error handler EVERYWHERE)\n *\n * A chunk is an object with 2 attributes : `meta` and `data`. The former is an\n * object containing anything (`percent` for example), see each worker for more\n * details. The latter is the real data (String, Uint8Array, etc).\n *\n * @constructor\n * @param {String} name the name of the stream (mainly used for debugging purposes)\n */\nfunction GenericWorker(name) {\n    // the name of the worker\n    this.name = name || \"default\";\n    // an object containing metadata about the workers chain\n    this.streamInfo = {};\n    // an error which happened when the worker was paused\n    this.generatedError = null;\n    // an object containing metadata to be merged by this worker into the general metadata\n    this.extraStreamInfo = {};\n    // true if the stream is paused (and should not do anything), false otherwise\n    this.isPaused = true;\n    // true if the stream is finished (and should not do anything), false otherwise\n    this.isFinished = false;\n    // true if the stream is locked to prevent further structure updates (pipe), false otherwise\n    this.isLocked = false;\n    // the event listeners\n    this._listeners = {\n        'data':[],\n        'end':[],\n        'error':[]\n    };\n    // the previous worker, if any\n    this.previous = null;\n}\n\nGenericWorker.prototype = {\n    /**\n     * Push a chunk to the next workers.\n     * @param {Object} chunk the chunk to push\n     */\n    push : function (chunk) {\n        this.emit(\"data\", chunk);\n    },\n    /**\n     * End the stream.\n     * @return {Boolean} true if this call ended the worker, false otherwise.\n     */\n    end : function () {\n        if (this.isFinished) {\n            return false;\n        }\n\n        this.flush();\n        try {\n            this.emit(\"end\");\n            this.cleanUp();\n            this.isFinished = true;\n        } catch (e) {\n            this.emit(\"error\", e);\n        }\n        return true;\n    },\n    /**\n     * End the stream with an error.\n     * @param {Error} e the error which caused the premature end.\n     * @return {Boolean} true if this call ended the worker with an error, false otherwise.\n     */\n    error : function (e) {\n        if (this.isFinished) {\n            return false;\n        }\n\n        if(this.isPaused) {\n            this.generatedError = e;\n        } else {\n            this.isFinished = true;\n\n            this.emit(\"error\", e);\n\n            // in the workers chain exploded in the middle of the chain,\n            // the error event will go downward but we also need to notify\n            // workers upward that there has been an error.\n            if(this.previous) {\n                this.previous.error(e);\n            }\n\n            this.cleanUp();\n        }\n        return true;\n    },\n    /**\n     * Add a callback on an event.\n     * @param {String} name the name of the event (data, end, error)\n     * @param {Function} listener the function to call when the event is triggered\n     * @return {GenericWorker} the current object for chainability\n     */\n    on : function (name, listener) {\n        this._listeners[name].push(listener);\n        return this;\n    },\n    /**\n     * Clean any references when a worker is ending.\n     */\n    cleanUp : function () {\n        this.streamInfo = this.generatedError = this.extraStreamInfo = null;\n        this._listeners = [];\n    },\n    /**\n     * Trigger an event. This will call registered callback with the provided arg.\n     * @param {String} name the name of the event (data, end, error)\n     * @param {Object} arg the argument to call the callback with.\n     */\n    emit : function (name, arg) {\n        if (this._listeners[name]) {\n            for(var i = 0; i < this._listeners[name].length; i++) {\n                this._listeners[name][i].call(this, arg);\n            }\n        }\n    },\n    /**\n     * Chain a worker with an other.\n     * @param {Worker} next the worker receiving events from the current one.\n     * @return {worker} the next worker for chainability\n     */\n    pipe : function (next) {\n        return next.registerPrevious(this);\n    },\n    /**\n     * Same as `pipe` in the other direction.\n     * Using an API with `pipe(next)` is very easy.\n     * Implementing the API with the point of view of the next one registering\n     * a source is easier, see the ZipFileWorker.\n     * @param {Worker} previous the previous worker, sending events to this one\n     * @return {Worker} the current worker for chainability\n     */\n    registerPrevious : function (previous) {\n        if (this.isLocked) {\n            throw new Error(\"The stream '\" + this + \"' has already been used.\");\n        }\n\n        // sharing the streamInfo...\n        this.streamInfo = previous.streamInfo;\n        // ... and adding our own bits\n        this.mergeStreamInfo();\n        this.previous =  previous;\n        var self = this;\n        previous.on('data', function (chunk) {\n            self.processChunk(chunk);\n        });\n        previous.on('end', function () {\n            self.end();\n        });\n        previous.on('error', function (e) {\n            self.error(e);\n        });\n        return this;\n    },\n    /**\n     * Pause the stream so it doesn't send events anymore.\n     * @return {Boolean} true if this call paused the worker, false otherwise.\n     */\n    pause : function () {\n        if(this.isPaused || this.isFinished) {\n            return false;\n        }\n        this.isPaused = true;\n\n        if(this.previous) {\n            this.previous.pause();\n        }\n        return true;\n    },\n    /**\n     * Resume a paused stream.\n     * @return {Boolean} true if this call resumed the worker, false otherwise.\n     */\n    resume : function () {\n        if(!this.isPaused || this.isFinished) {\n            return false;\n        }\n        this.isPaused = false;\n\n        // if true, the worker tried to resume but failed\n        var withError = false;\n        if(this.generatedError) {\n            this.error(this.generatedError);\n            withError = true;\n        }\n        if(this.previous) {\n            this.previous.resume();\n        }\n\n        return !withError;\n    },\n    /**\n     * Flush any remaining bytes as the stream is ending.\n     */\n    flush : function () {},\n    /**\n     * Process a chunk. This is usually the method overridden.\n     * @param {Object} chunk the chunk to process.\n     */\n    processChunk : function(chunk) {\n        this.push(chunk);\n    },\n    /**\n     * Add a key/value to be added in the workers chain streamInfo once activated.\n     * @param {String} key the key to use\n     * @param {Object} value the associated value\n     * @return {Worker} the current worker for chainability\n     */\n    withStreamInfo : function (key, value) {\n        this.extraStreamInfo[key] = value;\n        this.mergeStreamInfo();\n        return this;\n    },\n    /**\n     * Merge this worker's streamInfo into the chain's streamInfo.\n     */\n    mergeStreamInfo : function () {\n        for(var key in this.extraStreamInfo) {\n            if (!this.extraStreamInfo.hasOwnProperty(key)) {\n                continue;\n            }\n            this.streamInfo[key] = this.extraStreamInfo[key];\n        }\n    },\n\n    /**\n     * Lock the stream to prevent further updates on the workers chain.\n     * After calling this method, all calls to pipe will fail.\n     */\n    lock: function () {\n        if (this.isLocked) {\n            throw new Error(\"The stream '\" + this + \"' has already been used.\");\n        }\n        this.isLocked = true;\n        if (this.previous) {\n            this.previous.lock();\n        }\n    },\n\n    /**\n     *\n     * Pretty print the workers chain.\n     */\n    toString : function () {\n        var me = \"Worker \" + this.name;\n        if (this.previous) {\n            return this.previous + \" -> \" + me;\n        } else {\n            return me;\n        }\n    }\n};\n\nmodule.exports = GenericWorker;\n\n},{}],26:[function(require,module,exports){\n(function (Buffer){\n'use strict';\n\nvar utils = require('../utils');\nvar ConvertWorker = require('./ConvertWorker');\nvar GenericWorker = require('./GenericWorker');\nvar base64 = require('../base64');\nvar NodejsStreamOutputAdapter = require('../nodejs/NodejsStreamOutputAdapter');\nvar external = require(\"../external\");\n\n/**\n * Apply the final transformation of the data. If the user wants a Blob for\n * example, it's easier to work with an U8intArray and finally do the\n * ArrayBuffer/Blob conversion.\n * @param {String} type the name of the final type\n * @param {String|Uint8Array|Buffer} content the content to transform\n * @param {String} mimeType the mime type of the content, if applicable.\n * @return {String|Uint8Array|ArrayBuffer|Buffer|Blob} the content in the right format.\n */\nfunction transformZipOutput(type, content, mimeType) {\n    switch(type) {\n        case \"blob\" :\n            return utils.newBlob(utils.transformTo(\"arraybuffer\", content), mimeType);\n        case \"base64\" :\n            return base64.encode(content);\n        default :\n            return utils.transformTo(type, content);\n    }\n}\n\n/**\n * Concatenate an array of data of the given type.\n * @param {String} type the type of the data in the given array.\n * @param {Array} dataArray the array containing the data chunks to concatenate\n * @return {String|Uint8Array|Buffer} the concatenated data\n * @throws Error if the asked type is unsupported\n */\nfunction concat (type, dataArray) {\n    var i, index = 0, res = null, totalLength = 0;\n    for(i = 0; i < dataArray.length; i++) {\n        totalLength += dataArray[i].length;\n    }\n    switch(type) {\n        case \"string\":\n            return dataArray.join(\"\");\n          case \"array\":\n            return Array.prototype.concat.apply([], dataArray);\n        case \"uint8array\":\n            res = new Uint8Array(totalLength);\n            for(i = 0; i < dataArray.length; i++) {\n                res.set(dataArray[i], index);\n                index += dataArray[i].length;\n            }\n            return res;\n        case \"nodebuffer\":\n            return Buffer.concat(dataArray);\n        default:\n            throw new Error(\"concat : unsupported type '\"  + type + \"'\");\n    }\n}\n\n/**\n * Listen a StreamHelper, accumulate its content and concatenate it into a\n * complete block.\n * @param {StreamHelper} helper the helper to use.\n * @param {Function} updateCallback a callback called on each update. Called\n * with one arg :\n * - the metadata linked to the update received.\n * @return Promise the promise for the accumulation.\n */\nfunction accumulate(helper, updateCallback) {\n    return new external.Promise(function (resolve, reject){\n        var dataArray = [];\n        var chunkType = helper._internalType,\n            resultType = helper._outputType,\n            mimeType = helper._mimeType;\n        helper\n        .on('data', function (data, meta) {\n            dataArray.push(data);\n            if(updateCallback) {\n                updateCallback(meta);\n            }\n        })\n        .on('error', function(err) {\n            dataArray = [];\n            reject(err);\n        })\n        .on('end', function (){\n            try {\n                var result = transformZipOutput(resultType, concat(chunkType, dataArray), mimeType);\n                resolve(result);\n            } catch (e) {\n                reject(e);\n            }\n            dataArray = [];\n        })\n        .resume();\n    });\n}\n\n/**\n * An helper to easily use workers outside of JSZip.\n * @constructor\n * @param {Worker} worker the worker to wrap\n * @param {String} outputType the type of data expected by the use\n * @param {String} mimeType the mime type of the content, if applicable.\n */\nfunction StreamHelper(worker, outputType, mimeType) {\n    var internalType = outputType;\n    switch(outputType) {\n        case \"blob\":\n        case \"arraybuffer\":\n            internalType = \"uint8array\";\n        break;\n        case \"base64\":\n            internalType = \"string\";\n        break;\n    }\n\n    try {\n        // the type used internally\n        this._internalType = internalType;\n        // the type used to output results\n        this._outputType = outputType;\n        // the mime type\n        this._mimeType = mimeType;\n        utils.checkSupport(internalType);\n        this._worker = worker.pipe(new ConvertWorker(internalType));\n        // the last workers can be rewired without issues but we need to\n        // prevent any updates on previous workers.\n        worker.lock();\n    } catch(e) {\n        this._worker = new GenericWorker(\"error\");\n        this._worker.error(e);\n    }\n}\n\nStreamHelper.prototype = {\n    /**\n     * Listen a StreamHelper, accumulate its content and concatenate it into a\n     * complete block.\n     * @param {Function} updateCb the update callback.\n     * @return Promise the promise for the accumulation.\n     */\n    accumulate : function (updateCb) {\n        return accumulate(this, updateCb);\n    },\n    /**\n     * Add a listener on an event triggered on a stream.\n     * @param {String} evt the name of the event\n     * @param {Function} fn the listener\n     * @return {StreamHelper} the current helper.\n     */\n    on : function (evt, fn) {\n        var self = this;\n\n        if(evt === \"data\") {\n            this._worker.on(evt, function (chunk) {\n                fn.call(self, chunk.data, chunk.meta);\n            });\n        } else {\n            this._worker.on(evt, function () {\n                utils.delay(fn, arguments, self);\n            });\n        }\n        return this;\n    },\n    /**\n     * Resume the flow of chunks.\n     * @return {StreamHelper} the current helper.\n     */\n    resume : function () {\n        utils.delay(this._worker.resume, [], this._worker);\n        return this;\n    },\n    /**\n     * Pause the flow of chunks.\n     * @return {StreamHelper} the current helper.\n     */\n    pause : function () {\n        this._worker.pause();\n        return this;\n    },\n    /**\n     * Return a nodejs stream for this helper.\n     * @param {Function} updateCb the update callback.\n     * @return {NodejsStreamOutputAdapter} the nodejs stream.\n     */\n    toNodejsStream : function (updateCb) {\n        utils.checkSupport(\"nodestream\");\n        if (this._outputType !== \"nodebuffer\") {\n            // an object stream containing blob/arraybuffer/uint8array/string\n            // is strange and I don't know if it would be useful.\n            // I you find this comment and have a good usecase, please open a\n            // bug report !\n            throw new Error(this._outputType + \" is not supported by this method\");\n        }\n\n        return new NodejsStreamOutputAdapter(this, {\n            objectMode : this._outputType !== \"nodebuffer\"\n        }, updateCb);\n    }\n};\n\n\nmodule.exports = StreamHelper;\n\n}).call(this,(typeof Buffer !== \"undefined\" ? Buffer : undefined))\n},{\"../base64\":1,\"../external\":6,\"../nodejs/NodejsStreamOutputAdapter\":35,\"../utils\":29,\"./ConvertWorker\":21,\"./GenericWorker\":25}],27:[function(require,module,exports){\n(function (Buffer){\n'use strict';\n\nexports.base64 = true;\nexports.array = true;\nexports.string = true;\nexports.arraybuffer = typeof ArrayBuffer !== \"undefined\" && typeof Uint8Array !== \"undefined\";\nexports.nodebuffer = typeof Buffer !== \"undefined\";\n// contains true if JSZip can read/generate Uint8Array, false otherwise.\nexports.uint8array = typeof Uint8Array !== \"undefined\";\n\nif (typeof ArrayBuffer === \"undefined\") {\n    exports.blob = false;\n}\nelse {\n    var buffer = new ArrayBuffer(0);\n    try {\n        exports.blob = new Blob([buffer], {\n            type: \"application/zip\"\n        }).size === 0;\n    }\n    catch (e) {\n        try {\n            var Builder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n            var builder = new Builder();\n            builder.append(buffer);\n            exports.blob = builder.getBlob('application/zip').size === 0;\n        }\n        catch (e) {\n            exports.blob = false;\n        }\n    }\n}\n\nexports.nodestream = !!require(\"./nodejs/NodejsStreamOutputAdapter\").prototype;\n\n}).call(this,(typeof Buffer !== \"undefined\" ? Buffer : undefined))\n},{\"./nodejs/NodejsStreamOutputAdapter\":35}],28:[function(require,module,exports){\n'use strict';\n\nvar utils = require('./utils');\nvar support = require('./support');\nvar nodejsUtils = require('./nodejsUtils');\nvar GenericWorker = require('./stream/GenericWorker');\n\n/**\n * The following functions come from pako, from pako/lib/utils/strings\n * released under the MIT license, see pako https://github.com/nodeca/pako/\n */\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nvar _utf8len = new Array(256);\nfor (var i=0; i<256; i++) {\n  _utf8len[i] = (i >= 252 ? 6 : i >= 248 ? 5 : i >= 240 ? 4 : i >= 224 ? 3 : i >= 192 ? 2 : 1);\n}\n_utf8len[254]=_utf8len[254]=1; // Invalid sequence start\n\n// convert string to array (typed, when possible)\nvar string2buf = function (str) {\n    var buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n    // count binary size\n    for (m_pos = 0; m_pos < str_len; m_pos++) {\n        c = str.charCodeAt(m_pos);\n        if ((c & 0xfc00) === 0xd800 && (m_pos+1 < str_len)) {\n            c2 = str.charCodeAt(m_pos+1);\n            if ((c2 & 0xfc00) === 0xdc00) {\n                c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n                m_pos++;\n            }\n        }\n        buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n    }\n\n    // allocate buffer\n    if (support.uint8array) {\n        buf = new Uint8Array(buf_len);\n    } else {\n        buf = new Array(buf_len);\n    }\n\n    // convert\n    for (i=0, m_pos = 0; i < buf_len; m_pos++) {\n        c = str.charCodeAt(m_pos);\n        if ((c & 0xfc00) === 0xd800 && (m_pos+1 < str_len)) {\n            c2 = str.charCodeAt(m_pos+1);\n            if ((c2 & 0xfc00) === 0xdc00) {\n                c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n                m_pos++;\n            }\n        }\n        if (c < 0x80) {\n            /* one byte */\n            buf[i++] = c;\n        } else if (c < 0x800) {\n            /* two bytes */\n            buf[i++] = 0xC0 | (c >>> 6);\n            buf[i++] = 0x80 | (c & 0x3f);\n        } else if (c < 0x10000) {\n            /* three bytes */\n            buf[i++] = 0xE0 | (c >>> 12);\n            buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n            buf[i++] = 0x80 | (c & 0x3f);\n        } else {\n            /* four bytes */\n            buf[i++] = 0xf0 | (c >>> 18);\n            buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n            buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n            buf[i++] = 0x80 | (c & 0x3f);\n        }\n    }\n\n    return buf;\n};\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nvar utf8border = function(buf, max) {\n    var pos;\n\n    max = max || buf.length;\n    if (max > buf.length) { max = buf.length; }\n\n    // go back from last position, until start of sequence found\n    pos = max-1;\n    while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n    // Fuckup - very small and broken sequence,\n    // return max, because we should return something anyway.\n    if (pos < 0) { return max; }\n\n    // If we came to start of buffer - that means vuffer is too small,\n    // return max too.\n    if (pos === 0) { return max; }\n\n    return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n\n// convert array to string\nvar buf2string = function (buf) {\n    var str, i, out, c, c_len;\n    var len = buf.length;\n\n    // Reserve max possible length (2 words per char)\n    // NB: by unknown reasons, Array is significantly faster for\n    //     String.fromCharCode.apply than Uint16Array.\n    var utf16buf = new Array(len*2);\n\n    for (out=0, i=0; i<len;) {\n        c = buf[i++];\n        // quick process ascii\n        if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n        c_len = _utf8len[c];\n        // skip 5 & 6 byte codes\n        if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len-1; continue; }\n\n        // apply mask on first byte\n        c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n        // join the rest\n        while (c_len > 1 && i < len) {\n            c = (c << 6) | (buf[i++] & 0x3f);\n            c_len--;\n        }\n\n        // terminated by end of string?\n        if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n        if (c < 0x10000) {\n            utf16buf[out++] = c;\n        } else {\n            c -= 0x10000;\n            utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n            utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n        }\n    }\n\n    // shrinkBuf(utf16buf, out)\n    if (utf16buf.length !== out) {\n        if(utf16buf.subarray) {\n            utf16buf = utf16buf.subarray(0, out);\n        } else {\n            utf16buf.length = out;\n        }\n    }\n\n    // return String.fromCharCode.apply(null, utf16buf);\n    return utils.applyFromCharCode(utf16buf);\n};\n\n\n// That's all for the pako functions.\n\n\n/**\n * Transform a javascript string into an array (typed if possible) of bytes,\n * UTF-8 encoded.\n * @param {String} str the string to encode\n * @return {Array|Uint8Array|Buffer} the UTF-8 encoded string.\n */\nexports.utf8encode = function utf8encode(str) {\n    if (support.nodebuffer) {\n        return nodejsUtils.newBuffer(str, \"utf-8\");\n    }\n\n    return string2buf(str);\n};\n\n\n/**\n * Transform a bytes array (or a representation) representing an UTF-8 encoded\n * string into a javascript string.\n * @param {Array|Uint8Array|Buffer} buf the data de decode\n * @return {String} the decoded string.\n */\nexports.utf8decode = function utf8decode(buf) {\n    if (support.nodebuffer) {\n        return utils.transformTo(\"nodebuffer\", buf).toString(\"utf-8\");\n    }\n\n    buf = utils.transformTo(support.uint8array ? \"uint8array\" : \"array\", buf);\n\n    return buf2string(buf);\n};\n\n/**\n * A worker to decode utf8 encoded binary chunks into string chunks.\n * @constructor\n */\nfunction Utf8DecodeWorker() {\n    GenericWorker.call(this, \"utf-8 decode\");\n    // the last bytes if a chunk didn't end with a complete codepoint.\n    this.leftOver = null;\n}\nutils.inherits(Utf8DecodeWorker, GenericWorker);\n\n/**\n * @see GenericWorker.processChunk\n */\nUtf8DecodeWorker.prototype.processChunk = function (chunk) {\n\n    var data = utils.transformTo(support.uint8array ? \"uint8array\" : \"array\", chunk.data);\n\n    // 1st step, re-use what's left of the previous chunk\n    if (this.leftOver && this.leftOver.length) {\n        if(support.uint8array) {\n            var previousData = data;\n            data = new Uint8Array(previousData.length + this.leftOver.length);\n            data.set(this.leftOver, 0);\n            data.set(previousData, this.leftOver.length);\n        } else {\n            data = this.leftOver.concat(data);\n        }\n        this.leftOver = null;\n    }\n\n    var nextBoundary = utf8border(data);\n    var usableData = data;\n    if (nextBoundary !== data.length) {\n        if (support.uint8array) {\n            usableData = data.subarray(0, nextBoundary);\n            this.leftOver = data.subarray(nextBoundary, data.length);\n        } else {\n            usableData = data.slice(0, nextBoundary);\n            this.leftOver = data.slice(nextBoundary, data.length);\n        }\n    }\n\n    this.push({\n        data : exports.utf8decode(usableData),\n        meta : chunk.meta\n    });\n};\n\n/**\n * @see GenericWorker.flush\n */\nUtf8DecodeWorker.prototype.flush = function () {\n    if(this.leftOver && this.leftOver.length) {\n        this.push({\n            data : exports.utf8decode(this.leftOver),\n            meta : {}\n        });\n        this.leftOver = null;\n    }\n};\nexports.Utf8DecodeWorker = Utf8DecodeWorker;\n\n/**\n * A worker to endcode string chunks into utf8 encoded binary chunks.\n * @constructor\n */\nfunction Utf8EncodeWorker() {\n    GenericWorker.call(this, \"utf-8 encode\");\n}\nutils.inherits(Utf8EncodeWorker, GenericWorker);\n\n/**\n * @see GenericWorker.processChunk\n */\nUtf8EncodeWorker.prototype.processChunk = function (chunk) {\n    this.push({\n        data : exports.utf8encode(chunk.data),\n        meta : chunk.meta\n    });\n};\nexports.Utf8EncodeWorker = Utf8EncodeWorker;\n\n},{\"./nodejsUtils\":12,\"./stream/GenericWorker\":25,\"./support\":27,\"./utils\":29}],29:[function(require,module,exports){\n'use strict';\n\nvar support = require('./support');\nvar base64 = require('./base64');\nvar nodejsUtils = require('./nodejsUtils');\nvar asap = require('asap');\nvar external = require(\"./external\");\n\n\n/**\n * Convert a string that pass as a \"binary string\": it should represent a byte\n * array but may have > 255 char codes. Be sure to take only the first byte\n * and returns the byte array.\n * @param {String} str the string to transform.\n * @return {Array|Uint8Array} the string in a binary format.\n */\nfunction string2binary(str) {\n    var result = null;\n    if (support.uint8array) {\n      result = new Uint8Array(str.length);\n    } else {\n      result = new Array(str.length);\n    }\n    return stringToArrayLike(str, result);\n}\n\n/**\n * Create a new blob with the given content and the given type.\n * @param {String|ArrayBuffer} part the content to put in the blob. DO NOT use\n * an Uint8Array because the stock browser of android 4 won't accept it (it\n * will be silently converted to a string, \"[object Uint8Array]\").\n * @param {String} type the mime type of the blob.\n * @return {Blob} the created blob.\n */\nexports.newBlob = function(part, type) {\n    exports.checkSupport(\"blob\");\n\n    try {\n        // Blob constructor\n        return new Blob([part], {\n            type: type\n        });\n    }\n    catch (e) {\n\n        try {\n            // deprecated, browser only, old way\n            var Builder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n            var builder = new Builder();\n            builder.append(part);\n            return builder.getBlob(type);\n        }\n        catch (e) {\n\n            // well, fuck ?!\n            throw new Error(\"Bug : can't construct the Blob.\");\n        }\n    }\n\n\n};\n/**\n * The identity function.\n * @param {Object} input the input.\n * @return {Object} the same input.\n */\nfunction identity(input) {\n    return input;\n}\n\n/**\n * Fill in an array with a string.\n * @param {String} str the string to use.\n * @param {Array|ArrayBuffer|Uint8Array|Buffer} array the array to fill in (will be mutated).\n * @return {Array|ArrayBuffer|Uint8Array|Buffer} the updated array.\n */\nfunction stringToArrayLike(str, array) {\n    for (var i = 0; i < str.length; ++i) {\n        array[i] = str.charCodeAt(i) & 0xFF;\n    }\n    return array;\n}\n\n/**\n * An helper for the function arrayLikeToString.\n * This contains static informations and functions that\n * can be optimized by the browser JIT compiler.\n */\nvar arrayToStringHelper = {\n    /**\n     * Transform an array of int into a string, chunk by chunk.\n     * See the performances notes on arrayLikeToString.\n     * @param {Array|ArrayBuffer|Uint8Array|Buffer} array the array to transform.\n     * @param {String} type the type of the array.\n     * @param {Integer} chunk the chunk size.\n     * @return {String} the resulting string.\n     * @throws Error if the chunk is too big for the stack.\n     */\n    stringifyByChunk: function(array, type, chunk) {\n        var result = [], k = 0, len = array.length;\n        // shortcut\n        if (len <= chunk) {\n            return String.fromCharCode.apply(null, array);\n        }\n        while (k < len) {\n            if (type === \"array\" || type === \"nodebuffer\") {\n                result.push(String.fromCharCode.apply(null, array.slice(k, Math.min(k + chunk, len))));\n            }\n            else {\n                result.push(String.fromCharCode.apply(null, array.subarray(k, Math.min(k + chunk, len))));\n            }\n            k += chunk;\n        }\n        return result.join(\"\");\n    },\n    /**\n     * Call String.fromCharCode on every item in the array.\n     * This is the naive implementation, which generate A LOT of intermediate string.\n     * This should be used when everything else fail.\n     * @param {Array|ArrayBuffer|Uint8Array|Buffer} array the array to transform.\n     * @return {String} the result.\n     */\n    stringifyByChar: function(array){\n        var resultStr = \"\";\n        for(var i = 0; i < array.length; i++) {\n            resultStr += String.fromCharCode(array[i]);\n        }\n        return resultStr;\n    },\n    applyCanBeUsed : {\n        /**\n         * true if the browser accepts to use String.fromCharCode on Uint8Array\n         */\n        uint8array : (function () {\n            try {\n                return support.uint8array && String.fromCharCode.apply(null, new Uint8Array(1)).length === 1;\n            } catch (e) {\n                return false;\n            }\n        })(),\n        /**\n         * true if the browser accepts to use String.fromCharCode on nodejs Buffer.\n         */\n        nodebuffer : (function () {\n            try {\n                return support.nodebuffer && String.fromCharCode.apply(null, nodejsUtils.newBuffer(1)).length === 1;\n            } catch (e) {\n                return false;\n            }\n        })()\n    }\n};\n\n/**\n * Transform an array-like object to a string.\n * @param {Array|ArrayBuffer|Uint8Array|Buffer} array the array to transform.\n * @return {String} the result.\n */\nfunction arrayLikeToString(array) {\n    // Performances notes :\n    // --------------------\n    // String.fromCharCode.apply(null, array) is the fastest, see\n    // see http://jsperf.com/converting-a-uint8array-to-a-string/2\n    // but the stack is limited (and we can get huge arrays !).\n    //\n    // result += String.fromCharCode(array[i]); generate too many strings !\n    //\n    // This code is inspired by http://jsperf.com/arraybuffer-to-string-apply-performance/2\n    // TODO : we now have workers that split the work. Do we still need that ?\n    var chunk = 65536,\n        type = exports.getTypeOf(array),\n        canUseApply = true;\n    if (type === \"uint8array\") {\n        canUseApply = arrayToStringHelper.applyCanBeUsed.uint8array;\n    } else if (type === \"nodebuffer\") {\n        canUseApply = arrayToStringHelper.applyCanBeUsed.nodebuffer;\n    }\n\n    if (canUseApply) {\n        while (chunk > 1) {\n            try {\n                return arrayToStringHelper.stringifyByChunk(array, type, chunk);\n            } catch (e) {\n                chunk = Math.floor(chunk / 2);\n            }\n        }\n    }\n\n    // no apply or chunk error : slow and painful algorithm\n    // default browser on android 4.*\n    return arrayToStringHelper.stringifyByChar(array);\n}\n\nexports.applyFromCharCode = arrayLikeToString;\n\n\n/**\n * Copy the data from an array-like to an other array-like.\n * @param {Array|ArrayBuffer|Uint8Array|Buffer} arrayFrom the origin array.\n * @param {Array|ArrayBuffer|Uint8Array|Buffer} arrayTo the destination array which will be mutated.\n * @return {Array|ArrayBuffer|Uint8Array|Buffer} the updated destination array.\n */\nfunction arrayLikeToArrayLike(arrayFrom, arrayTo) {\n    for (var i = 0; i < arrayFrom.length; i++) {\n        arrayTo[i] = arrayFrom[i];\n    }\n    return arrayTo;\n}\n\n// a matrix containing functions to transform everything into everything.\nvar transform = {};\n\n// string to ?\ntransform[\"string\"] = {\n    \"string\": identity,\n    \"array\": function(input) {\n        return stringToArrayLike(input, new Array(input.length));\n    },\n    \"arraybuffer\": function(input) {\n        return transform[\"string\"][\"uint8array\"](input).buffer;\n    },\n    \"uint8array\": function(input) {\n        return stringToArrayLike(input, new Uint8Array(input.length));\n    },\n    \"nodebuffer\": function(input) {\n        return stringToArrayLike(input, nodejsUtils.newBuffer(input.length));\n    }\n};\n\n// array to ?\ntransform[\"array\"] = {\n    \"string\": arrayLikeToString,\n    \"array\": identity,\n    \"arraybuffer\": function(input) {\n        return (new Uint8Array(input)).buffer;\n    },\n    \"uint8array\": function(input) {\n        return new Uint8Array(input);\n    },\n    \"nodebuffer\": function(input) {\n        return nodejsUtils.newBuffer(input);\n    }\n};\n\n// arraybuffer to ?\ntransform[\"arraybuffer\"] = {\n    \"string\": function(input) {\n        return arrayLikeToString(new Uint8Array(input));\n    },\n    \"array\": function(input) {\n        return arrayLikeToArrayLike(new Uint8Array(input), new Array(input.byteLength));\n    },\n    \"arraybuffer\": identity,\n    \"uint8array\": function(input) {\n        return new Uint8Array(input);\n    },\n    \"nodebuffer\": function(input) {\n        return nodejsUtils.newBuffer(new Uint8Array(input));\n    }\n};\n\n// uint8array to ?\ntransform[\"uint8array\"] = {\n    \"string\": arrayLikeToString,\n    \"array\": function(input) {\n        return arrayLikeToArrayLike(input, new Array(input.length));\n    },\n    \"arraybuffer\": function(input) {\n        return input.buffer;\n    },\n    \"uint8array\": identity,\n    \"nodebuffer\": function(input) {\n        return nodejsUtils.newBuffer(input);\n    }\n};\n\n// nodebuffer to ?\ntransform[\"nodebuffer\"] = {\n    \"string\": arrayLikeToString,\n    \"array\": function(input) {\n        return arrayLikeToArrayLike(input, new Array(input.length));\n    },\n    \"arraybuffer\": function(input) {\n        return transform[\"nodebuffer\"][\"uint8array\"](input).buffer;\n    },\n    \"uint8array\": function(input) {\n        return arrayLikeToArrayLike(input, new Uint8Array(input.length));\n    },\n    \"nodebuffer\": identity\n};\n\n/**\n * Transform an input into any type.\n * The supported output type are : string, array, uint8array, arraybuffer, nodebuffer.\n * If no output type is specified, the unmodified input will be returned.\n * @param {String} outputType the output type.\n * @param {String|Array|ArrayBuffer|Uint8Array|Buffer} input the input to convert.\n * @throws {Error} an Error if the browser doesn't support the requested output type.\n */\nexports.transformTo = function(outputType, input) {\n    if (!input) {\n        // undefined, null, etc\n        // an empty string won't harm.\n        input = \"\";\n    }\n    if (!outputType) {\n        return input;\n    }\n    exports.checkSupport(outputType);\n    var inputType = exports.getTypeOf(input);\n    var result = transform[inputType][outputType](input);\n    return result;\n};\n\n/**\n * Return the type of the input.\n * The type will be in a format valid for JSZip.utils.transformTo : string, array, uint8array, arraybuffer.\n * @param {Object} input the input to identify.\n * @return {String} the (lowercase) type of the input.\n */\nexports.getTypeOf = function(input) {\n    if (typeof input === \"string\") {\n        return \"string\";\n    }\n    if (Object.prototype.toString.call(input) === \"[object Array]\") {\n        return \"array\";\n    }\n    if (support.nodebuffer && nodejsUtils.isBuffer(input)) {\n        return \"nodebuffer\";\n    }\n    if (support.uint8array && input instanceof Uint8Array) {\n        return \"uint8array\";\n    }\n    if (support.arraybuffer && input instanceof ArrayBuffer) {\n        return \"arraybuffer\";\n    }\n};\n\n/**\n * Throw an exception if the type is not supported.\n * @param {String} type the type to check.\n * @throws {Error} an Error if the browser doesn't support the requested type.\n */\nexports.checkSupport = function(type) {\n    var supported = support[type.toLowerCase()];\n    if (!supported) {\n        throw new Error(type + \" is not supported by this platform\");\n    }\n};\n\nexports.MAX_VALUE_16BITS = 65535;\nexports.MAX_VALUE_32BITS = -1; // well, \"\\xFF\\xFF\\xFF\\xFF\\xFF\\xFF\\xFF\\xFF\" is parsed as -1\n\n/**\n * Prettify a string read as binary.\n * @param {string} str the string to prettify.\n * @return {string} a pretty string.\n */\nexports.pretty = function(str) {\n    var res = '',\n        code, i;\n    for (i = 0; i < (str || \"\").length; i++) {\n        code = str.charCodeAt(i);\n        res += '\\\\x' + (code < 16 ? \"0\" : \"\") + code.toString(16).toUpperCase();\n    }\n    return res;\n};\n\n/**\n * Defer the call of a function.\n * @param {Function} callback the function to call asynchronously.\n * @param {Array} args the arguments to give to the callback.\n */\nexports.delay = function(callback, args, self) {\n    asap(function () {\n        callback.apply(self || null, args || []);\n    });\n};\n\n/**\n * Extends a prototype with an other, without calling a constructor with\n * side effects. Inspired by nodejs' `utils.inherits`\n * @param {Function} ctor the constructor to augment\n * @param {Function} superCtor the parent constructor to use\n */\nexports.inherits = function (ctor, superCtor) {\n    var Obj = function() {};\n    Obj.prototype = superCtor.prototype;\n    ctor.prototype = new Obj();\n};\n\n/**\n * Merge the objects passed as parameters into a new one.\n * @private\n * @param {...Object} var_args All objects to merge.\n * @return {Object} a new object with the data of the others.\n */\nexports.extend = function() {\n    var result = {}, i, attr;\n    for (i = 0; i < arguments.length; i++) { // arguments is not enumerable in some browsers\n        for (attr in arguments[i]) {\n            if (arguments[i].hasOwnProperty(attr) && typeof result[attr] === \"undefined\") {\n                result[attr] = arguments[i][attr];\n            }\n        }\n    }\n    return result;\n};\n\n/**\n * Transform arbitrary content into a Promise.\n * @param {String} name a name for the content being processed.\n * @param {Object} inputData the content to process.\n * @param {Boolean} isBinary true if the content is not an unicode string\n * @param {Boolean} isOptimizedBinaryString true if the string content only has one byte per character.\n * @param {Boolean} isBase64 true if the string content is encoded with base64.\n * @return {Promise} a promise in a format usable by JSZip.\n */\nexports.prepareContent = function(name, inputData, isBinary, isOptimizedBinaryString, isBase64) {\n\n    var promise = null;\n    if (support.blob && inputData instanceof Blob && typeof FileReader !== \"undefined\") {\n        promise = new external.Promise(function (resolve, reject) {\n            var reader = new FileReader();\n\n            reader.onload = function(e) {\n                resolve(e.target.result);\n            };\n            reader.onerror = function(e) {\n                reject(e.target.error);\n            };\n            reader.readAsArrayBuffer(inputData);\n        });\n    } else {\n        // if data is already a promise, this flatten it.\n        promise = external.Promise.resolve(inputData);\n    }\n\n    return promise.then(function(data) {\n        var dataType = exports.getTypeOf(data);\n\n        if (!dataType) {\n            return external.Promise.reject(\n                new Error(\"The data of '\" + name + \"' is in an unsupported format !\")\n            );\n        }\n        // special case : it's way easier to work with Uint8Array than with ArrayBuffer\n        if (dataType === \"arraybuffer\") {\n            data = exports.transformTo(\"uint8array\", data);\n        } else if (dataType === \"string\") {\n            if (isBase64) {\n                data = base64.decode(data);\n            }\n            else if (isBinary) {\n                // optimizedBinaryString === true means that the file has already been filtered with a 0xFF mask\n                if (isOptimizedBinaryString !== true) {\n                    // this is a string, not in a base64 format.\n                    // Be sure that this is a correct \"binary string\"\n                    data = string2binary(data);\n                }\n            }\n        }\n        return data;\n    });\n};\n\n},{\"./base64\":1,\"./external\":6,\"./nodejsUtils\":12,\"./support\":27,\"asap\":33}],30:[function(require,module,exports){\n'use strict';\nvar readerFor = require('./reader/readerFor');\nvar utils = require('./utils');\nvar sig = require('./signature');\nvar ZipEntry = require('./zipEntry');\nvar utf8 = require('./utf8');\nvar support = require('./support');\n//  class ZipEntries {{{\n/**\n * All the entries in the zip file.\n * @constructor\n * @param {Object} loadOptions Options for loading the stream.\n */\nfunction ZipEntries(loadOptions) {\n    this.files = [];\n    this.loadOptions = loadOptions;\n}\nZipEntries.prototype = {\n    /**\n     * Check that the reader is on the speficied signature.\n     * @param {string} expectedSignature the expected signature.\n     * @throws {Error} if it is an other signature.\n     */\n    checkSignature: function(expectedSignature) {\n        if (!this.reader.readAndCheckSignature(expectedSignature)) {\n            this.reader.index -= 4;\n            var signature = this.reader.readString(4);\n            throw new Error(\"Corrupted zip or bug : unexpected signature \" + \"(\" + utils.pretty(signature) + \", expected \" + utils.pretty(expectedSignature) + \")\");\n        }\n    },\n    /**\n     * Check if the given signature is at the given index.\n     * @param {number} askedIndex the index to check.\n     * @param {string} expectedSignature the signature to expect.\n     * @return {boolean} true if the signature is here, false otherwise.\n     */\n    isSignature: function(askedIndex, expectedSignature) {\n        var currentIndex = this.reader.index;\n        this.reader.setIndex(askedIndex);\n        var signature = this.reader.readString(4);\n        var result = signature === expectedSignature;\n        this.reader.setIndex(currentIndex);\n        return result;\n    },\n    /**\n     * Read the end of the central directory.\n     */\n    readBlockEndOfCentral: function() {\n        this.diskNumber = this.reader.readInt(2);\n        this.diskWithCentralDirStart = this.reader.readInt(2);\n        this.centralDirRecordsOnThisDisk = this.reader.readInt(2);\n        this.centralDirRecords = this.reader.readInt(2);\n        this.centralDirSize = this.reader.readInt(4);\n        this.centralDirOffset = this.reader.readInt(4);\n\n        this.zipCommentLength = this.reader.readInt(2);\n        // warning : the encoding depends of the system locale\n        // On a linux machine with LANG=en_US.utf8, this field is utf8 encoded.\n        // On a windows machine, this field is encoded with the localized windows code page.\n        var zipComment = this.reader.readData(this.zipCommentLength);\n        var decodeParamType = support.uint8array ? \"uint8array\" : \"array\";\n        // To get consistent behavior with the generation part, we will assume that\n        // this is utf8 encoded unless specified otherwise.\n        var decodeContent = utils.transformTo(decodeParamType, zipComment);\n        this.zipComment = this.loadOptions.decodeFileName(decodeContent);\n    },\n    /**\n     * Read the end of the Zip 64 central directory.\n     * Not merged with the method readEndOfCentral :\n     * The end of central can coexist with its Zip64 brother,\n     * I don't want to read the wrong number of bytes !\n     */\n    readBlockZip64EndOfCentral: function() {\n        this.zip64EndOfCentralSize = this.reader.readInt(8);\n        this.reader.skip(4);\n        // this.versionMadeBy = this.reader.readString(2);\n        // this.versionNeeded = this.reader.readInt(2);\n        this.diskNumber = this.reader.readInt(4);\n        this.diskWithCentralDirStart = this.reader.readInt(4);\n        this.centralDirRecordsOnThisDisk = this.reader.readInt(8);\n        this.centralDirRecords = this.reader.readInt(8);\n        this.centralDirSize = this.reader.readInt(8);\n        this.centralDirOffset = this.reader.readInt(8);\n\n        this.zip64ExtensibleData = {};\n        var extraDataSize = this.zip64EndOfCentralSize - 44,\n            index = 0,\n            extraFieldId,\n            extraFieldLength,\n            extraFieldValue;\n        while (index < extraDataSize) {\n            extraFieldId = this.reader.readInt(2);\n            extraFieldLength = this.reader.readInt(4);\n            extraFieldValue = this.reader.readData(extraFieldLength);\n            this.zip64ExtensibleData[extraFieldId] = {\n                id: extraFieldId,\n                length: extraFieldLength,\n                value: extraFieldValue\n            };\n        }\n    },\n    /**\n     * Read the end of the Zip 64 central directory locator.\n     */\n    readBlockZip64EndOfCentralLocator: function() {\n        this.diskWithZip64CentralDirStart = this.reader.readInt(4);\n        this.relativeOffsetEndOfZip64CentralDir = this.reader.readInt(8);\n        this.disksCount = this.reader.readInt(4);\n        if (this.disksCount > 1) {\n            throw new Error(\"Multi-volumes zip are not supported\");\n        }\n    },\n    /**\n     * Read the local files, based on the offset read in the central part.\n     */\n    readLocalFiles: function() {\n        var i, file;\n        for (i = 0; i < this.files.length; i++) {\n            file = this.files[i];\n            this.reader.setIndex(file.localHeaderOffset);\n            this.checkSignature(sig.LOCAL_FILE_HEADER);\n            file.readLocalPart(this.reader);\n            file.handleUTF8();\n            file.processAttributes();\n        }\n    },\n    /**\n     * Read the central directory.\n     */\n    readCentralDir: function() {\n        var file;\n\n        this.reader.setIndex(this.centralDirOffset);\n        while (this.reader.readAndCheckSignature(sig.CENTRAL_FILE_HEADER)) {\n            file = new ZipEntry({\n                zip64: this.zip64\n            }, this.loadOptions);\n            file.readCentralPart(this.reader);\n            this.files.push(file);\n        }\n\n        if (this.centralDirRecords !== this.files.length) {\n            if (this.centralDirRecords !== 0 && this.files.length === 0) {\n                // We expected some records but couldn't find ANY.\n                // This is really suspicious, as if something went wrong.\n                throw new Error(\"Corrupted zip or bug: expected \" + this.centralDirRecords + \" records in central dir, got \" + this.files.length);\n            } else {\n                // We found some records but not all.\n                // Something is wrong but we got something for the user: no error here.\n                // console.warn(\"expected\", this.centralDirRecords, \"records in central dir, got\", this.files.length);\n            }\n        }\n    },\n    /**\n     * Read the end of central directory.\n     */\n    readEndOfCentral: function() {\n        var offset = this.reader.lastIndexOfSignature(sig.CENTRAL_DIRECTORY_END);\n        if (offset < 0) {\n            // Check if the content is a truncated zip or complete garbage.\n            // A \"LOCAL_FILE_HEADER\" is not required at the beginning (auto\n            // extractible zip for example) but it can give a good hint.\n            // If an ajax request was used without responseType, we will also\n            // get unreadable data.\n            var isGarbage = !this.isSignature(0, sig.LOCAL_FILE_HEADER);\n\n            if (isGarbage) {\n                throw new Error(\"Can't find end of central directory : is this a zip file ? \" +\n                                \"If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html\");\n            } else {\n                throw new Error(\"Corrupted zip : can't find end of central directory\");\n            }\n\n        }\n        this.reader.setIndex(offset);\n        var endOfCentralDirOffset = offset;\n        this.checkSignature(sig.CENTRAL_DIRECTORY_END);\n        this.readBlockEndOfCentral();\n\n\n        /* extract from the zip spec :\n            4)  If one of the fields in the end of central directory\n                record is too small to hold required data, the field\n                should be set to -1 (0xFFFF or 0xFFFFFFFF) and the\n                ZIP64 format record should be created.\n            5)  The end of central directory record and the\n                Zip64 end of central directory locator record must\n                reside on the same disk when splitting or spanning\n                an archive.\n         */\n        if (this.diskNumber === utils.MAX_VALUE_16BITS || this.diskWithCentralDirStart === utils.MAX_VALUE_16BITS || this.centralDirRecordsOnThisDisk === utils.MAX_VALUE_16BITS || this.centralDirRecords === utils.MAX_VALUE_16BITS || this.centralDirSize === utils.MAX_VALUE_32BITS || this.centralDirOffset === utils.MAX_VALUE_32BITS) {\n            this.zip64 = true;\n\n            /*\n            Warning : the zip64 extension is supported, but ONLY if the 64bits integer read from\n            the zip file can fit into a 32bits integer. This cannot be solved : Javascript represents\n            all numbers as 64-bit double precision IEEE 754 floating point numbers.\n            So, we have 53bits for integers and bitwise operations treat everything as 32bits.\n            see https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators\n            and http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-262.pdf section 8.5\n            */\n\n            // should look for a zip64 EOCD locator\n            offset = this.reader.lastIndexOfSignature(sig.ZIP64_CENTRAL_DIRECTORY_LOCATOR);\n            if (offset < 0) {\n                throw new Error(\"Corrupted zip : can't find the ZIP64 end of central directory locator\");\n            }\n            this.reader.setIndex(offset);\n            this.checkSignature(sig.ZIP64_CENTRAL_DIRECTORY_LOCATOR);\n            this.readBlockZip64EndOfCentralLocator();\n\n            // now the zip64 EOCD record\n            if (!this.isSignature(this.relativeOffsetEndOfZip64CentralDir, sig.ZIP64_CENTRAL_DIRECTORY_END)) {\n                // console.warn(\"ZIP64 end of central directory not where expected.\");\n                this.relativeOffsetEndOfZip64CentralDir = this.reader.lastIndexOfSignature(sig.ZIP64_CENTRAL_DIRECTORY_END);\n                if (this.relativeOffsetEndOfZip64CentralDir < 0) {\n                    throw new Error(\"Corrupted zip : can't find the ZIP64 end of central directory\");\n                }\n            }\n            this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir);\n            this.checkSignature(sig.ZIP64_CENTRAL_DIRECTORY_END);\n            this.readBlockZip64EndOfCentral();\n        }\n\n        var expectedEndOfCentralDirOffset = this.centralDirOffset + this.centralDirSize;\n        if (this.zip64) {\n            expectedEndOfCentralDirOffset += 20; // end of central dir 64 locator\n            expectedEndOfCentralDirOffset += 12 /* should not include the leading 12 bytes */ + this.zip64EndOfCentralSize;\n        }\n\n        var extraBytes = endOfCentralDirOffset - expectedEndOfCentralDirOffset;\n\n        if (extraBytes > 0) {\n            // console.warn(extraBytes, \"extra bytes at beginning or within zipfile\");\n            if (this.isSignature(endOfCentralDirOffset, sig.CENTRAL_FILE_HEADER)) {\n                // The offsets seem wrong, but we have something at the specified offset.\n                // So we keep it.\n            } else {\n                // the offset is wrong, update the \"zero\" of the reader\n                // this happens if data has been prepended (crx files for example)\n                this.reader.zero = extraBytes;\n            }\n        } else if (extraBytes < 0) {\n            throw new Error(\"Corrupted zip: missing \" + Math.abs(extraBytes) + \" bytes.\");\n        }\n    },\n    prepareReader: function(data) {\n        this.reader = readerFor(data);\n    },\n    /**\n     * Read a zip file and create ZipEntries.\n     * @param {String|ArrayBuffer|Uint8Array|Buffer} data the binary string representing a zip file.\n     */\n    load: function(data) {\n        this.prepareReader(data);\n        this.readEndOfCentral();\n        this.readCentralDir();\n        this.readLocalFiles();\n    }\n};\n// }}} end of ZipEntries\nmodule.exports = ZipEntries;\n\n},{\"./reader/readerFor\":19,\"./signature\":20,\"./support\":27,\"./utf8\":28,\"./utils\":29,\"./zipEntry\":31}],31:[function(require,module,exports){\n'use strict';\nvar readerFor = require('./reader/readerFor');\nvar utils = require('./utils');\nvar CompressedObject = require('./compressedObject');\nvar crc32fn = require('./crc32');\nvar utf8 = require('./utf8');\nvar compressions = require('./compressions');\nvar support = require('./support');\n\nvar MADE_BY_DOS = 0x00;\nvar MADE_BY_UNIX = 0x03;\n\n/**\n * Find a compression registered in JSZip.\n * @param {string} compressionMethod the method magic to find.\n * @return {Object|null} the JSZip compression object, null if none found.\n */\nvar findCompression = function(compressionMethod) {\n    for (var method in compressions) {\n        if (!compressions.hasOwnProperty(method)) {\n            continue;\n        }\n        if (compressions[method].magic === compressionMethod) {\n            return compressions[method];\n        }\n    }\n    return null;\n};\n\n// class ZipEntry {{{\n/**\n * An entry in the zip file.\n * @constructor\n * @param {Object} options Options of the current file.\n * @param {Object} loadOptions Options for loading the stream.\n */\nfunction ZipEntry(options, loadOptions) {\n    this.options = options;\n    this.loadOptions = loadOptions;\n}\nZipEntry.prototype = {\n    /**\n     * say if the file is encrypted.\n     * @return {boolean} true if the file is encrypted, false otherwise.\n     */\n    isEncrypted: function() {\n        // bit 1 is set\n        return (this.bitFlag & 0x0001) === 0x0001;\n    },\n    /**\n     * say if the file has utf-8 filename/comment.\n     * @return {boolean} true if the filename/comment is in utf-8, false otherwise.\n     */\n    useUTF8: function() {\n        // bit 11 is set\n        return (this.bitFlag & 0x0800) === 0x0800;\n    },\n    /**\n     * Read the local part of a zip file and add the info in this object.\n     * @param {DataReader} reader the reader to use.\n     */\n    readLocalPart: function(reader) {\n        var compression, localExtraFieldsLength;\n\n        // we already know everything from the central dir !\n        // If the central dir data are false, we are doomed.\n        // On the bright side, the local part is scary  : zip64, data descriptors, both, etc.\n        // The less data we get here, the more reliable this should be.\n        // Let's skip the whole header and dash to the data !\n        reader.skip(22);\n        // in some zip created on windows, the filename stored in the central dir contains \\ instead of /.\n        // Strangely, the filename here is OK.\n        // I would love to treat these zip files as corrupted (see http://www.info-zip.org/FAQ.html#backslashes\n        // or APPNOTE#4.4.17.1, \"All slashes MUST be forward slashes '/'\") but there are a lot of bad zip generators...\n        // Search \"unzip mismatching \"local\" filename continuing with \"central\" filename version\" on\n        // the internet.\n        //\n        // I think I see the logic here : the central directory is used to display\n        // content and the local directory is used to extract the files. Mixing / and \\\n        // may be used to display \\ to windows users and use / when extracting the files.\n        // Unfortunately, this lead also to some issues : http://seclists.org/fulldisclosure/2009/Sep/394\n        this.fileNameLength = reader.readInt(2);\n        localExtraFieldsLength = reader.readInt(2); // can't be sure this will be the same as the central dir\n        // the fileName is stored as binary data, the handleUTF8 method will take care of the encoding.\n        this.fileName = reader.readData(this.fileNameLength);\n        reader.skip(localExtraFieldsLength);\n\n        if (this.compressedSize === -1 || this.uncompressedSize === -1) {\n            throw new Error(\"Bug or corrupted zip : didn't get enough informations from the central directory \" + \"(compressedSize === -1 || uncompressedSize === -1)\");\n        }\n\n        compression = findCompression(this.compressionMethod);\n        if (compression === null) { // no compression found\n            throw new Error(\"Corrupted zip : compression \" + utils.pretty(this.compressionMethod) + \" unknown (inner file : \" + utils.transformTo(\"string\", this.fileName) + \")\");\n        }\n        this.decompressed = new CompressedObject(this.compressedSize, this.uncompressedSize, this.crc32, compression, reader.readData(this.compressedSize));\n    },\n\n    /**\n     * Read the central part of a zip file and add the info in this object.\n     * @param {DataReader} reader the reader to use.\n     */\n    readCentralPart: function(reader) {\n        this.versionMadeBy = reader.readInt(2);\n        reader.skip(2);\n        // this.versionNeeded = reader.readInt(2);\n        this.bitFlag = reader.readInt(2);\n        this.compressionMethod = reader.readString(2);\n        this.date = reader.readDate();\n        this.crc32 = reader.readInt(4);\n        this.compressedSize = reader.readInt(4);\n        this.uncompressedSize = reader.readInt(4);\n        var fileNameLength = reader.readInt(2);\n        this.extraFieldsLength = reader.readInt(2);\n        this.fileCommentLength = reader.readInt(2);\n        this.diskNumberStart = reader.readInt(2);\n        this.internalFileAttributes = reader.readInt(2);\n        this.externalFileAttributes = reader.readInt(4);\n        this.localHeaderOffset = reader.readInt(4);\n\n        if (this.isEncrypted()) {\n            throw new Error(\"Encrypted zip are not supported\");\n        }\n\n        // will be read in the local part, see the comments there\n        reader.skip(fileNameLength);\n        this.readExtraFields(reader);\n        this.parseZIP64ExtraField(reader);\n        this.fileComment = reader.readData(this.fileCommentLength);\n    },\n\n    /**\n     * Parse the external file attributes and get the unix/dos permissions.\n     */\n    processAttributes: function () {\n        this.unixPermissions = null;\n        this.dosPermissions = null;\n        var madeBy = this.versionMadeBy >> 8;\n\n        // Check if we have the DOS directory flag set.\n        // We look for it in the DOS and UNIX permissions\n        // but some unknown platform could set it as a compatibility flag.\n        this.dir = this.externalFileAttributes & 0x0010 ? true : false;\n\n        if(madeBy === MADE_BY_DOS) {\n            // first 6 bits (0 to 5)\n            this.dosPermissions = this.externalFileAttributes & 0x3F;\n        }\n\n        if(madeBy === MADE_BY_UNIX) {\n            this.unixPermissions = (this.externalFileAttributes >> 16) & 0xFFFF;\n            // the octal permissions are in (this.unixPermissions & 0x01FF).toString(8);\n        }\n\n        // fail safe : if the name ends with a / it probably means a folder\n        if (!this.dir && this.fileNameStr.slice(-1) === '/') {\n            this.dir = true;\n        }\n    },\n\n    /**\n     * Parse the ZIP64 extra field and merge the info in the current ZipEntry.\n     * @param {DataReader} reader the reader to use.\n     */\n    parseZIP64ExtraField: function(reader) {\n\n        if (!this.extraFields[0x0001]) {\n            return;\n        }\n\n        // should be something, preparing the extra reader\n        var extraReader = readerFor(this.extraFields[0x0001].value);\n\n        // I really hope that these 64bits integer can fit in 32 bits integer, because js\n        // won't let us have more.\n        if (this.uncompressedSize === utils.MAX_VALUE_32BITS) {\n            this.uncompressedSize = extraReader.readInt(8);\n        }\n        if (this.compressedSize === utils.MAX_VALUE_32BITS) {\n            this.compressedSize = extraReader.readInt(8);\n        }\n        if (this.localHeaderOffset === utils.MAX_VALUE_32BITS) {\n            this.localHeaderOffset = extraReader.readInt(8);\n        }\n        if (this.diskNumberStart === utils.MAX_VALUE_32BITS) {\n            this.diskNumberStart = extraReader.readInt(4);\n        }\n    },\n    /**\n     * Read the central part of a zip file and add the info in this object.\n     * @param {DataReader} reader the reader to use.\n     */\n    readExtraFields: function(reader) {\n        var end = reader.index + this.extraFieldsLength,\n            extraFieldId,\n            extraFieldLength,\n            extraFieldValue;\n\n        if (!this.extraFields) {\n            this.extraFields = {};\n        }\n\n        while (reader.index < end) {\n            extraFieldId = reader.readInt(2);\n            extraFieldLength = reader.readInt(2);\n            extraFieldValue = reader.readData(extraFieldLength);\n\n            this.extraFields[extraFieldId] = {\n                id: extraFieldId,\n                length: extraFieldLength,\n                value: extraFieldValue\n            };\n        }\n    },\n    /**\n     * Apply an UTF8 transformation if needed.\n     */\n    handleUTF8: function() {\n        var decodeParamType = support.uint8array ? \"uint8array\" : \"array\";\n        if (this.useUTF8()) {\n            this.fileNameStr = utf8.utf8decode(this.fileName);\n            this.fileCommentStr = utf8.utf8decode(this.fileComment);\n        } else {\n            var upath = this.findExtraFieldUnicodePath();\n            if (upath !== null) {\n                this.fileNameStr = upath;\n            } else {\n                // ASCII text or unsupported code page\n                var fileNameByteArray =  utils.transformTo(decodeParamType, this.fileName);\n                this.fileNameStr = this.loadOptions.decodeFileName(fileNameByteArray);\n            }\n\n            var ucomment = this.findExtraFieldUnicodeComment();\n            if (ucomment !== null) {\n                this.fileCommentStr = ucomment;\n            } else {\n                // ASCII text or unsupported code page\n                var commentByteArray =  utils.transformTo(decodeParamType, this.fileComment);\n                this.fileCommentStr = this.loadOptions.decodeFileName(commentByteArray);\n            }\n        }\n    },\n\n    /**\n     * Find the unicode path declared in the extra field, if any.\n     * @return {String} the unicode path, null otherwise.\n     */\n    findExtraFieldUnicodePath: function() {\n        var upathField = this.extraFields[0x7075];\n        if (upathField) {\n            var extraReader = readerFor(upathField.value);\n\n            // wrong version\n            if (extraReader.readInt(1) !== 1) {\n                return null;\n            }\n\n            // the crc of the filename changed, this field is out of date.\n            if (crc32fn(this.fileName) !== extraReader.readInt(4)) {\n                return null;\n            }\n\n            return utf8.utf8decode(extraReader.readData(upathField.length - 5));\n        }\n        return null;\n    },\n\n    /**\n     * Find the unicode comment declared in the extra field, if any.\n     * @return {String} the unicode comment, null otherwise.\n     */\n    findExtraFieldUnicodeComment: function() {\n        var ucommentField = this.extraFields[0x6375];\n        if (ucommentField) {\n            var extraReader = readerFor(ucommentField.value);\n\n            // wrong version\n            if (extraReader.readInt(1) !== 1) {\n                return null;\n            }\n\n            // the crc of the comment changed, this field is out of date.\n            if (crc32fn(this.fileComment) !== extraReader.readInt(4)) {\n                return null;\n            }\n\n            return utf8.utf8decode(extraReader.readData(ucommentField.length - 5));\n        }\n        return null;\n    }\n};\nmodule.exports = ZipEntry;\n\n},{\"./compressedObject\":2,\"./compressions\":3,\"./crc32\":4,\"./reader/readerFor\":19,\"./support\":27,\"./utf8\":28,\"./utils\":29}],32:[function(require,module,exports){\n'use strict';\n\nvar StreamHelper = require('./stream/StreamHelper');\nvar DataWorker = require('./stream/DataWorker');\nvar utf8 = require('./utf8');\nvar CompressedObject = require('./compressedObject');\nvar GenericWorker = require('./stream/GenericWorker');\n\n/**\n * A simple object representing a file in the zip file.\n * @constructor\n * @param {string} name the name of the file\n * @param {String|ArrayBuffer|Uint8Array|Buffer} data the data\n * @param {Object} options the options of the file\n */\nvar ZipObject = function(name, data, options) {\n    this.name = name;\n    this.dir = options.dir;\n    this.date = options.date;\n    this.comment = options.comment;\n    this.unixPermissions = options.unixPermissions;\n    this.dosPermissions = options.dosPermissions;\n\n    this._data = data;\n    this._dataBinary = options.binary;\n    // keep only the compression\n    this.options = {\n        compression : options.compression,\n        compressionOptions : options.compressionOptions\n    };\n};\n\nZipObject.prototype = {\n    /**\n     * Create an internal stream for the content of this object.\n     * @param {String} type the type of each chunk.\n     * @return StreamHelper the stream.\n     */\n    internalStream: function (type) {\n        var outputType = type.toLowerCase();\n        var askUnicodeString = outputType === \"string\" || outputType === \"text\";\n        if (outputType === \"binarystring\" || outputType === \"text\") {\n            outputType = \"string\";\n        }\n        var result = this._decompressWorker();\n\n        var isUnicodeString = !this._dataBinary;\n\n        if (isUnicodeString && !askUnicodeString) {\n            result = result.pipe(new utf8.Utf8EncodeWorker());\n        }\n        if (!isUnicodeString && askUnicodeString) {\n            result = result.pipe(new utf8.Utf8DecodeWorker());\n        }\n\n        return new StreamHelper(result, outputType, \"\");\n    },\n\n    /**\n     * Prepare the content in the asked type.\n     * @param {String} type the type of the result.\n     * @param {Function} onUpdate a function to call on each internal update.\n     * @return Promise the promise of the result.\n     */\n    async: function (type, onUpdate) {\n        return this.internalStream(type).accumulate(onUpdate);\n    },\n\n    /**\n     * Prepare the content as a nodejs stream.\n     * @param {String} type the type of each chunk.\n     * @param {Function} onUpdate a function to call on each internal update.\n     * @return Stream the stream.\n     */\n    nodeStream: function (type, onUpdate) {\n        return this.internalStream(type || \"nodebuffer\").toNodejsStream(onUpdate);\n    },\n\n    /**\n     * Return a worker for the compressed content.\n     * @private\n     * @param {Object} compression the compression object to use.\n     * @param {Object} compressionOptions the options to use when compressing.\n     * @return Worker the worker.\n     */\n    _compressWorker: function (compression, compressionOptions) {\n        if (\n            this._data instanceof CompressedObject &&\n            this._data.compression.magic === compression.magic\n        ) {\n            return this._data.getCompressedWorker();\n        } else {\n            var result = this._decompressWorker();\n            if(!this._dataBinary) {\n                result = result.pipe(new utf8.Utf8EncodeWorker());\n            }\n            return CompressedObject.createWorkerFrom(result, compression, compressionOptions);\n        }\n    },\n    /**\n     * Return a worker for the decompressed content.\n     * @private\n     * @return Worker the worker.\n     */\n    _decompressWorker : function () {\n        if (this._data instanceof CompressedObject) {\n            return this._data.getContentWorker();\n        } else if (this._data instanceof GenericWorker) {\n            return this._data;\n        } else {\n            return new DataWorker(this._data);\n        }\n    }\n};\n\nvar removedMethods = [\"asText\", \"asBinary\", \"asNodeBuffer\", \"asUint8Array\", \"asArrayBuffer\"];\nvar removedFn = function () {\n    throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\");\n};\n\nfor(var i = 0; i < removedMethods.length; i++) {\n    ZipObject.prototype[removedMethods[i]] = removedFn;\n}\nmodule.exports = ZipObject;\n\n},{\"./compressedObject\":2,\"./stream/DataWorker\":24,\"./stream/GenericWorker\":25,\"./stream/StreamHelper\":26,\"./utf8\":28}],33:[function(require,module,exports){\n\"use strict\";\n\n// rawAsap provides everything we need except exception management.\nvar rawAsap = require(\"./raw\");\n// RawTasks are recycled to reduce GC churn.\nvar freeTasks = [];\n// We queue errors to ensure they are thrown in right order (FIFO).\n// Array-as-queue is good enough here, since we are just dealing with exceptions.\nvar pendingErrors = [];\nvar requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);\n\nfunction throwFirstError() {\n    if (pendingErrors.length) {\n        throw pendingErrors.shift();\n    }\n}\n\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\nmodule.exports = asap;\nfunction asap(task) {\n    var rawTask;\n    if (freeTasks.length) {\n        rawTask = freeTasks.pop();\n    } else {\n        rawTask = new RawTask();\n    }\n    rawTask.task = task;\n    rawAsap(rawTask);\n}\n\n// We wrap tasks with recyclable task objects.  A task object implements\n// `call`, just like a function.\nfunction RawTask() {\n    this.task = null;\n}\n\n// The sole purpose of wrapping the task is to catch the exception and recycle\n// the task object after its single use.\nRawTask.prototype.call = function () {\n    try {\n        this.task.call();\n    } catch (error) {\n        if (asap.onerror) {\n            // This hook exists purely for testing purposes.\n            // Its name will be periodically randomized to break any code that\n            // depends on its existence.\n            asap.onerror(error);\n        } else {\n            // In a web browser, exceptions are not fatal. However, to avoid\n            // slowing down the queue of pending tasks, we rethrow the error in a\n            // lower priority turn.\n            pendingErrors.push(error);\n            requestErrorThrow();\n        }\n    } finally {\n        this.task = null;\n        freeTasks[freeTasks.length] = this;\n    }\n};\n\n},{\"./raw\":34}],34:[function(require,module,exports){\n(function (global){\n\"use strict\";\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\nvar BrowserMutationObserver = global.MutationObserver || global.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.jss\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],35:[function(require,module,exports){\n\n},{}],36:[function(require,module,exports){\n// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],37:[function(require,module,exports){\n(function (process,global){\n/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE\n * @version   3.0.2\n */\n\n(function() {\n    \"use strict\";\n    function lib$es6$promise$utils$$objectOrFunction(x) {\n      return typeof x === 'function' || (typeof x === 'object' && x !== null);\n    }\n\n    function lib$es6$promise$utils$$isFunction(x) {\n      return typeof x === 'function';\n    }\n\n    function lib$es6$promise$utils$$isMaybeThenable(x) {\n      return typeof x === 'object' && x !== null;\n    }\n\n    var lib$es6$promise$utils$$_isArray;\n    if (!Array.isArray) {\n      lib$es6$promise$utils$$_isArray = function (x) {\n        return Object.prototype.toString.call(x) === '[object Array]';\n      };\n    } else {\n      lib$es6$promise$utils$$_isArray = Array.isArray;\n    }\n\n    var lib$es6$promise$utils$$isArray = lib$es6$promise$utils$$_isArray;\n    var lib$es6$promise$asap$$len = 0;\n    var lib$es6$promise$asap$$toString = {}.toString;\n    var lib$es6$promise$asap$$vertxNext;\n    var lib$es6$promise$asap$$customSchedulerFn;\n\n    var lib$es6$promise$asap$$asap = function asap(callback, arg) {\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len] = callback;\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len + 1] = arg;\n      lib$es6$promise$asap$$len += 2;\n      if (lib$es6$promise$asap$$len === 2) {\n        // If len is 2, that means that we need to schedule an async flush.\n        // If additional callbacks are queued before the queue is flushed, they\n        // will be processed by this flush that we are scheduling.\n        if (lib$es6$promise$asap$$customSchedulerFn) {\n          lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);\n        } else {\n          lib$es6$promise$asap$$scheduleFlush();\n        }\n      }\n    }\n\n    function lib$es6$promise$asap$$setScheduler(scheduleFn) {\n      lib$es6$promise$asap$$customSchedulerFn = scheduleFn;\n    }\n\n    function lib$es6$promise$asap$$setAsap(asapFn) {\n      lib$es6$promise$asap$$asap = asapFn;\n    }\n\n    var lib$es6$promise$asap$$browserWindow = (typeof window !== 'undefined') ? window : undefined;\n    var lib$es6$promise$asap$$browserGlobal = lib$es6$promise$asap$$browserWindow || {};\n    var lib$es6$promise$asap$$BrowserMutationObserver = lib$es6$promise$asap$$browserGlobal.MutationObserver || lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;\n    var lib$es6$promise$asap$$isNode = typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n    // test for web worker but not in IE10\n    var lib$es6$promise$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' &&\n      typeof importScripts !== 'undefined' &&\n      typeof MessageChannel !== 'undefined';\n\n    // node\n    function lib$es6$promise$asap$$useNextTick() {\n      // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n      // see https://github.com/cujojs/when/issues/410 for details\n      return function() {\n        process.nextTick(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    // vertx\n    function lib$es6$promise$asap$$useVertxTimer() {\n      return function() {\n        lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    function lib$es6$promise$asap$$useMutationObserver() {\n      var iterations = 0;\n      var observer = new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);\n      var node = document.createTextNode('');\n      observer.observe(node, { characterData: true });\n\n      return function() {\n        node.data = (iterations = ++iterations % 2);\n      };\n    }\n\n    // web worker\n    function lib$es6$promise$asap$$useMessageChannel() {\n      var channel = new MessageChannel();\n      channel.port1.onmessage = lib$es6$promise$asap$$flush;\n      return function () {\n        channel.port2.postMessage(0);\n      };\n    }\n\n    function lib$es6$promise$asap$$useSetTimeout() {\n      return function() {\n        setTimeout(lib$es6$promise$asap$$flush, 1);\n      };\n    }\n\n    var lib$es6$promise$asap$$queue = new Array(1000);\n    function lib$es6$promise$asap$$flush() {\n      for (var i = 0; i < lib$es6$promise$asap$$len; i+=2) {\n        var callback = lib$es6$promise$asap$$queue[i];\n        var arg = lib$es6$promise$asap$$queue[i+1];\n\n        callback(arg);\n\n        lib$es6$promise$asap$$queue[i] = undefined;\n        lib$es6$promise$asap$$queue[i+1] = undefined;\n      }\n\n      lib$es6$promise$asap$$len = 0;\n    }\n\n    function lib$es6$promise$asap$$attemptVertx() {\n      try {\n        var r = require;\n        var vertx = r('vertx');\n        lib$es6$promise$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;\n        return lib$es6$promise$asap$$useVertxTimer();\n      } catch(e) {\n        return lib$es6$promise$asap$$useSetTimeout();\n      }\n    }\n\n    var lib$es6$promise$asap$$scheduleFlush;\n    // Decide what async method to use to triggering processing of queued callbacks:\n    if (lib$es6$promise$asap$$isNode) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useNextTick();\n    } else if (lib$es6$promise$asap$$BrowserMutationObserver) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMutationObserver();\n    } else if (lib$es6$promise$asap$$isWorker) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMessageChannel();\n    } else if (lib$es6$promise$asap$$browserWindow === undefined && typeof require === 'function') {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$attemptVertx();\n    } else {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useSetTimeout();\n    }\n\n    function lib$es6$promise$$internal$$noop() {}\n\n    var lib$es6$promise$$internal$$PENDING   = void 0;\n    var lib$es6$promise$$internal$$FULFILLED = 1;\n    var lib$es6$promise$$internal$$REJECTED  = 2;\n\n    var lib$es6$promise$$internal$$GET_THEN_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$selfFulfillment() {\n      return new TypeError(\"You cannot resolve a promise with itself\");\n    }\n\n    function lib$es6$promise$$internal$$cannotReturnOwn() {\n      return new TypeError('A promises callback cannot return that same promise.');\n    }\n\n    function lib$es6$promise$$internal$$getThen(promise) {\n      try {\n        return promise.then;\n      } catch(error) {\n        lib$es6$promise$$internal$$GET_THEN_ERROR.error = error;\n        return lib$es6$promise$$internal$$GET_THEN_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n      try {\n        then.call(value, fulfillmentHandler, rejectionHandler);\n      } catch(e) {\n        return e;\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleForeignThenable(promise, thenable, then) {\n       lib$es6$promise$asap$$asap(function(promise) {\n        var sealed = false;\n        var error = lib$es6$promise$$internal$$tryThen(then, thenable, function(value) {\n          if (sealed) { return; }\n          sealed = true;\n          if (thenable !== value) {\n            lib$es6$promise$$internal$$resolve(promise, value);\n          } else {\n            lib$es6$promise$$internal$$fulfill(promise, value);\n          }\n        }, function(reason) {\n          if (sealed) { return; }\n          sealed = true;\n\n          lib$es6$promise$$internal$$reject(promise, reason);\n        }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n        if (!sealed && error) {\n          sealed = true;\n          lib$es6$promise$$internal$$reject(promise, error);\n        }\n      }, promise);\n    }\n\n    function lib$es6$promise$$internal$$handleOwnThenable(promise, thenable) {\n      if (thenable._state === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, thenable._result);\n      } else if (thenable._state === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, thenable._result);\n      } else {\n        lib$es6$promise$$internal$$subscribe(thenable, undefined, function(value) {\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleMaybeThenable(promise, maybeThenable) {\n      if (maybeThenable.constructor === promise.constructor) {\n        lib$es6$promise$$internal$$handleOwnThenable(promise, maybeThenable);\n      } else {\n        var then = lib$es6$promise$$internal$$getThen(maybeThenable);\n\n        if (then === lib$es6$promise$$internal$$GET_THEN_ERROR) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$GET_THEN_ERROR.error);\n        } else if (then === undefined) {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        } else if (lib$es6$promise$utils$$isFunction(then)) {\n          lib$es6$promise$$internal$$handleForeignThenable(promise, maybeThenable, then);\n        } else {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        }\n      }\n    }\n\n    function lib$es6$promise$$internal$$resolve(promise, value) {\n      if (promise === value) {\n        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$selfFulfillment());\n      } else if (lib$es6$promise$utils$$objectOrFunction(value)) {\n        lib$es6$promise$$internal$$handleMaybeThenable(promise, value);\n      } else {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publishRejection(promise) {\n      if (promise._onerror) {\n        promise._onerror(promise._result);\n      }\n\n      lib$es6$promise$$internal$$publish(promise);\n    }\n\n    function lib$es6$promise$$internal$$fulfill(promise, value) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n\n      promise._result = value;\n      promise._state = lib$es6$promise$$internal$$FULFILLED;\n\n      if (promise._subscribers.length !== 0) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, promise);\n      }\n    }\n\n    function lib$es6$promise$$internal$$reject(promise, reason) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n      promise._state = lib$es6$promise$$internal$$REJECTED;\n      promise._result = reason;\n\n      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection, promise);\n    }\n\n    function lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection) {\n      var subscribers = parent._subscribers;\n      var length = subscribers.length;\n\n      parent._onerror = null;\n\n      subscribers[length] = child;\n      subscribers[length + lib$es6$promise$$internal$$FULFILLED] = onFulfillment;\n      subscribers[length + lib$es6$promise$$internal$$REJECTED]  = onRejection;\n\n      if (length === 0 && parent._state) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, parent);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publish(promise) {\n      var subscribers = promise._subscribers;\n      var settled = promise._state;\n\n      if (subscribers.length === 0) { return; }\n\n      var child, callback, detail = promise._result;\n\n      for (var i = 0; i < subscribers.length; i += 3) {\n        child = subscribers[i];\n        callback = subscribers[i + settled];\n\n        if (child) {\n          lib$es6$promise$$internal$$invokeCallback(settled, child, callback, detail);\n        } else {\n          callback(detail);\n        }\n      }\n\n      promise._subscribers.length = 0;\n    }\n\n    function lib$es6$promise$$internal$$ErrorObject() {\n      this.error = null;\n    }\n\n    var lib$es6$promise$$internal$$TRY_CATCH_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$tryCatch(callback, detail) {\n      try {\n        return callback(detail);\n      } catch(e) {\n        lib$es6$promise$$internal$$TRY_CATCH_ERROR.error = e;\n        return lib$es6$promise$$internal$$TRY_CATCH_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$invokeCallback(settled, promise, callback, detail) {\n      var hasCallback = lib$es6$promise$utils$$isFunction(callback),\n          value, error, succeeded, failed;\n\n      if (hasCallback) {\n        value = lib$es6$promise$$internal$$tryCatch(callback, detail);\n\n        if (value === lib$es6$promise$$internal$$TRY_CATCH_ERROR) {\n          failed = true;\n          error = value.error;\n          value = null;\n        } else {\n          succeeded = true;\n        }\n\n        if (promise === value) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$cannotReturnOwn());\n          return;\n        }\n\n      } else {\n        value = detail;\n        succeeded = true;\n      }\n\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) {\n        // noop\n      } else if (hasCallback && succeeded) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      } else if (failed) {\n        lib$es6$promise$$internal$$reject(promise, error);\n      } else if (settled === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      } else if (settled === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$initializePromise(promise, resolver) {\n      try {\n        resolver(function resolvePromise(value){\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function rejectPromise(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      } catch(e) {\n        lib$es6$promise$$internal$$reject(promise, e);\n      }\n    }\n\n    function lib$es6$promise$enumerator$$Enumerator(Constructor, input) {\n      var enumerator = this;\n\n      enumerator._instanceConstructor = Constructor;\n      enumerator.promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (enumerator._validateInput(input)) {\n        enumerator._input     = input;\n        enumerator.length     = input.length;\n        enumerator._remaining = input.length;\n\n        enumerator._init();\n\n        if (enumerator.length === 0) {\n          lib$es6$promise$$internal$$fulfill(enumerator.promise, enumerator._result);\n        } else {\n          enumerator.length = enumerator.length || 0;\n          enumerator._enumerate();\n          if (enumerator._remaining === 0) {\n            lib$es6$promise$$internal$$fulfill(enumerator.promise, enumerator._result);\n          }\n        }\n      } else {\n        lib$es6$promise$$internal$$reject(enumerator.promise, enumerator._validationError());\n      }\n    }\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._validateInput = function(input) {\n      return lib$es6$promise$utils$$isArray(input);\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._validationError = function() {\n      return new Error('Array Methods must be provided an Array');\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._init = function() {\n      this._result = new Array(this.length);\n    };\n\n    var lib$es6$promise$enumerator$$default = lib$es6$promise$enumerator$$Enumerator;\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function() {\n      var enumerator = this;\n\n      var length  = enumerator.length;\n      var promise = enumerator.promise;\n      var input   = enumerator._input;\n\n      for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        enumerator._eachEntry(input[i], i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function(entry, i) {\n      var enumerator = this;\n      var c = enumerator._instanceConstructor;\n\n      if (lib$es6$promise$utils$$isMaybeThenable(entry)) {\n        if (entry.constructor === c && entry._state !== lib$es6$promise$$internal$$PENDING) {\n          entry._onerror = null;\n          enumerator._settledAt(entry._state, i, entry._result);\n        } else {\n          enumerator._willSettleAt(c.resolve(entry), i);\n        }\n      } else {\n        enumerator._remaining--;\n        enumerator._result[i] = entry;\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function(state, i, value) {\n      var enumerator = this;\n      var promise = enumerator.promise;\n\n      if (promise._state === lib$es6$promise$$internal$$PENDING) {\n        enumerator._remaining--;\n\n        if (state === lib$es6$promise$$internal$$REJECTED) {\n          lib$es6$promise$$internal$$reject(promise, value);\n        } else {\n          enumerator._result[i] = value;\n        }\n      }\n\n      if (enumerator._remaining === 0) {\n        lib$es6$promise$$internal$$fulfill(promise, enumerator._result);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function(promise, i) {\n      var enumerator = this;\n\n      lib$es6$promise$$internal$$subscribe(promise, undefined, function(value) {\n        enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED, i, value);\n      }, function(reason) {\n        enumerator._settledAt(lib$es6$promise$$internal$$REJECTED, i, reason);\n      });\n    };\n    function lib$es6$promise$promise$all$$all(entries) {\n      return new lib$es6$promise$enumerator$$default(this, entries).promise;\n    }\n    var lib$es6$promise$promise$all$$default = lib$es6$promise$promise$all$$all;\n    function lib$es6$promise$promise$race$$race(entries) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (!lib$es6$promise$utils$$isArray(entries)) {\n        lib$es6$promise$$internal$$reject(promise, new TypeError('You must pass an array to race.'));\n        return promise;\n      }\n\n      var length = entries.length;\n\n      function onFulfillment(value) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      }\n\n      function onRejection(reason) {\n        lib$es6$promise$$internal$$reject(promise, reason);\n      }\n\n      for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]), undefined, onFulfillment, onRejection);\n      }\n\n      return promise;\n    }\n    var lib$es6$promise$promise$race$$default = lib$es6$promise$promise$race$$race;\n    function lib$es6$promise$promise$resolve$$resolve(object) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      if (object && typeof object === 'object' && object.constructor === Constructor) {\n        return object;\n      }\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$resolve(promise, object);\n      return promise;\n    }\n    var lib$es6$promise$promise$resolve$$default = lib$es6$promise$promise$resolve$$resolve;\n    function lib$es6$promise$promise$reject$$reject(reason) {\n      /*jshint validthis:true */\n      var Constructor = this;\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$reject(promise, reason);\n      return promise;\n    }\n    var lib$es6$promise$promise$reject$$default = lib$es6$promise$promise$reject$$reject;\n\n    var lib$es6$promise$promise$$counter = 0;\n\n    function lib$es6$promise$promise$$needsResolver() {\n      throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n    }\n\n    function lib$es6$promise$promise$$needsNew() {\n      throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n    }\n\n    var lib$es6$promise$promise$$default = lib$es6$promise$promise$$Promise;\n    /**\n      Promise objects represent the eventual result of an asynchronous operation. The\n      primary way of interacting with a promise is through its `then` method, which\n      registers callbacks to receive either a promise's eventual value or the reason\n      why the promise cannot be fulfilled.\n\n      Terminology\n      -----------\n\n      - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n      - `thenable` is an object or function that defines a `then` method.\n      - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n      - `exception` is a value that is thrown using the throw statement.\n      - `reason` is a value that indicates why a promise was rejected.\n      - `settled` the final resting state of a promise, fulfilled or rejected.\n\n      A promise can be in one of three states: pending, fulfilled, or rejected.\n\n      Promises that are fulfilled have a fulfillment value and are in the fulfilled\n      state.  Promises that are rejected have a rejection reason and are in the\n      rejected state.  A fulfillment value is never a thenable.\n\n      Promises can also be said to *resolve* a value.  If this value is also a\n      promise, then the original promise's settled state will match the value's\n      settled state.  So a promise that *resolves* a promise that rejects will\n      itself reject, and a promise that *resolves* a promise that fulfills will\n      itself fulfill.\n\n\n      Basic Usage:\n      ------------\n\n      ```js\n      var promise = new Promise(function(resolve, reject) {\n        // on success\n        resolve(value);\n\n        // on failure\n        reject(reason);\n      });\n\n      promise.then(function(value) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Advanced Usage:\n      ---------------\n\n      Promises shine when abstracting away asynchronous interactions such as\n      `XMLHttpRequest`s.\n\n      ```js\n      function getJSON(url) {\n        return new Promise(function(resolve, reject){\n          var xhr = new XMLHttpRequest();\n\n          xhr.open('GET', url);\n          xhr.onreadystatechange = handler;\n          xhr.responseType = 'json';\n          xhr.setRequestHeader('Accept', 'application/json');\n          xhr.send();\n\n          function handler() {\n            if (this.readyState === this.DONE) {\n              if (this.status === 200) {\n                resolve(this.response);\n              } else {\n                reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n              }\n            }\n          };\n        });\n      }\n\n      getJSON('/posts.json').then(function(json) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Unlike callbacks, promises are great composable primitives.\n\n      ```js\n      Promise.all([\n        getJSON('/posts'),\n        getJSON('/comments')\n      ]).then(function(values){\n        values[0] // => postsJSON\n        values[1] // => commentsJSON\n\n        return values;\n      });\n      ```\n\n      @class Promise\n      @param {function} resolver\n      Useful for tooling.\n      @constructor\n    */\n    function lib$es6$promise$promise$$Promise(resolver) {\n      this._id = lib$es6$promise$promise$$counter++;\n      this._state = undefined;\n      this._result = undefined;\n      this._subscribers = [];\n\n      if (lib$es6$promise$$internal$$noop !== resolver) {\n        if (!lib$es6$promise$utils$$isFunction(resolver)) {\n          lib$es6$promise$promise$$needsResolver();\n        }\n\n        if (!(this instanceof lib$es6$promise$promise$$Promise)) {\n          lib$es6$promise$promise$$needsNew();\n        }\n\n        lib$es6$promise$$internal$$initializePromise(this, resolver);\n      }\n    }\n\n    lib$es6$promise$promise$$Promise.all = lib$es6$promise$promise$all$$default;\n    lib$es6$promise$promise$$Promise.race = lib$es6$promise$promise$race$$default;\n    lib$es6$promise$promise$$Promise.resolve = lib$es6$promise$promise$resolve$$default;\n    lib$es6$promise$promise$$Promise.reject = lib$es6$promise$promise$reject$$default;\n    lib$es6$promise$promise$$Promise._setScheduler = lib$es6$promise$asap$$setScheduler;\n    lib$es6$promise$promise$$Promise._setAsap = lib$es6$promise$asap$$setAsap;\n    lib$es6$promise$promise$$Promise._asap = lib$es6$promise$asap$$asap;\n\n    lib$es6$promise$promise$$Promise.prototype = {\n      constructor: lib$es6$promise$promise$$Promise,\n\n    /**\n      The primary way of interacting with a promise is through its `then` method,\n      which registers callbacks to receive either a promise's eventual value or the\n      reason why the promise cannot be fulfilled.\n\n      ```js\n      findUser().then(function(user){\n        // user is available\n      }, function(reason){\n        // user is unavailable, and you are given the reason why\n      });\n      ```\n\n      Chaining\n      --------\n\n      The return value of `then` is itself a promise.  This second, 'downstream'\n      promise is resolved with the return value of the first promise's fulfillment\n      or rejection handler, or rejected if the handler throws an exception.\n\n      ```js\n      findUser().then(function (user) {\n        return user.name;\n      }, function (reason) {\n        return 'default name';\n      }).then(function (userName) {\n        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n        // will be `'default name'`\n      });\n\n      findUser().then(function (user) {\n        throw new Error('Found user, but still unhappy');\n      }, function (reason) {\n        throw new Error('`findUser` rejected and we're unhappy');\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n      });\n      ```\n      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n\n      ```js\n      findUser().then(function (user) {\n        throw new PedagogicalException('Upstream error');\n      }).then(function (value) {\n        // never reached\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // The `PedgagocialException` is propagated all the way down to here\n      });\n      ```\n\n      Assimilation\n      ------------\n\n      Sometimes the value you want to propagate to a downstream promise can only be\n      retrieved asynchronously. This can be achieved by returning a promise in the\n      fulfillment or rejection handler. The downstream promise will then be pending\n      until the returned promise is settled. This is called *assimilation*.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // The user's comments are now available\n      });\n      ```\n\n      If the assimliated promise rejects, then the downstream promise will also reject.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // If `findCommentsByAuthor` fulfills, we'll have the value here\n      }, function (reason) {\n        // If `findCommentsByAuthor` rejects, we'll have the reason here\n      });\n      ```\n\n      Simple Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var result;\n\n      try {\n        result = findResult();\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n      findResult(function(result, err){\n        if (err) {\n          // failure\n        } else {\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findResult().then(function(result){\n        // success\n      }, function(reason){\n        // failure\n      });\n      ```\n\n      Advanced Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var author, books;\n\n      try {\n        author = findAuthor();\n        books  = findBooksByAuthor(author);\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n\n      function foundBooks(books) {\n\n      }\n\n      function failure(reason) {\n\n      }\n\n      findAuthor(function(author, err){\n        if (err) {\n          failure(err);\n          // failure\n        } else {\n          try {\n            findBoooksByAuthor(author, function(books, err) {\n              if (err) {\n                failure(err);\n              } else {\n                try {\n                  foundBooks(books);\n                } catch(reason) {\n                  failure(reason);\n                }\n              }\n            });\n          } catch(error) {\n            failure(err);\n          }\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findAuthor().\n        then(findBooksByAuthor).\n        then(function(books){\n          // found books\n      }).catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method then\n      @param {Function} onFulfilled\n      @param {Function} onRejected\n      Useful for tooling.\n      @return {Promise}\n    */\n      then: function(onFulfillment, onRejection) {\n        var parent = this;\n        var state = parent._state;\n\n        if (state === lib$es6$promise$$internal$$FULFILLED && !onFulfillment || state === lib$es6$promise$$internal$$REJECTED && !onRejection) {\n          return this;\n        }\n\n        var child = new this.constructor(lib$es6$promise$$internal$$noop);\n        var result = parent._result;\n\n        if (state) {\n          var callback = arguments[state - 1];\n          lib$es6$promise$asap$$asap(function(){\n            lib$es6$promise$$internal$$invokeCallback(state, child, callback, result);\n          });\n        } else {\n          lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection);\n        }\n\n        return child;\n      },\n\n    /**\n      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n      as the catch block of a try/catch statement.\n\n      ```js\n      function findAuthor(){\n        throw new Error('couldn't find that author');\n      }\n\n      // synchronous\n      try {\n        findAuthor();\n      } catch(reason) {\n        // something went wrong\n      }\n\n      // async with promises\n      findAuthor().catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method catch\n      @param {Function} onRejection\n      Useful for tooling.\n      @return {Promise}\n    */\n      'catch': function(onRejection) {\n        return this.then(null, onRejection);\n      }\n    };\n    function lib$es6$promise$polyfill$$polyfill() {\n      var local;\n\n      if (typeof global !== 'undefined') {\n          local = global;\n      } else if (typeof self !== 'undefined') {\n          local = self;\n      } else {\n          try {\n              local = Function('return this')();\n          } catch (e) {\n              throw new Error('polyfill failed because global object is unavailable in this environment');\n          }\n      }\n\n      var P = local.Promise;\n\n      if (P && Object.prototype.toString.call(P.resolve()) === '[object Promise]' && !P.cast) {\n        return;\n      }\n\n      local.Promise = lib$es6$promise$promise$$default;\n    }\n    var lib$es6$promise$polyfill$$default = lib$es6$promise$polyfill$$polyfill;\n\n    var lib$es6$promise$umd$$ES6Promise = {\n      'Promise': lib$es6$promise$promise$$default,\n      'polyfill': lib$es6$promise$polyfill$$default\n    };\n\n    /* global define:true module:true window: true */\n    if (typeof define === 'function' && define['amd']) {\n      define(function() { return lib$es6$promise$umd$$ES6Promise; });\n    } else if (typeof module !== 'undefined' && module['exports']) {\n      module['exports'] = lib$es6$promise$umd$$ES6Promise;\n    } else if (typeof this !== 'undefined') {\n      this['ES6Promise'] = lib$es6$promise$umd$$ES6Promise;\n    }\n\n    lib$es6$promise$polyfill$$default();\n}).call(this);\n\n\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"_process\":36}],38:[function(require,module,exports){\n// Top level file is just a mixin of submodules & constants\n'use strict';\n\nvar assign    = require('./lib/utils/common').assign;\n\nvar deflate   = require('./lib/deflate');\nvar inflate   = require('./lib/inflate');\nvar constants = require('./lib/zlib/constants');\n\nvar pako = {};\n\nassign(pako, deflate, inflate, constants);\n\nmodule.exports = pako;\n\n},{\"./lib/deflate\":39,\"./lib/inflate\":40,\"./lib/utils/common\":41,\"./lib/zlib/constants\":44}],39:[function(require,module,exports){\n'use strict';\n\n\nvar zlib_deflate = require('./zlib/deflate');\nvar utils        = require('./utils/common');\nvar strings      = require('./utils/strings');\nvar msg          = require('./zlib/messages');\nvar ZStream      = require('./zlib/zstream');\n\nvar toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nvar Z_NO_FLUSH      = 0;\nvar Z_FINISH        = 4;\n\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_SYNC_FLUSH    = 2;\n\nvar Z_DEFAULT_COMPRESSION = -1;\n\nvar Z_DEFAULT_STRATEGY    = 0;\n\nvar Z_DEFLATED  = 8;\n\n/* ===========================================================================*/\n\n\n/**\n * class Deflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[deflate]],\n * [[deflateRaw]] and [[gzip]].\n **/\n\n/* internal\n * Deflate.chunks -> Array\n *\n * Chunks of output data, if [[Deflate#onData]] not overriden.\n **/\n\n/**\n * Deflate.result -> Uint8Array|Array\n *\n * Compressed result, generated by default [[Deflate#onData]]\n * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Deflate#push]] with `Z_FINISH` / `true` param)  or if you\n * push a chunk with explicit flush (call [[Deflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Deflate.err -> Number\n *\n * Error code after deflate finished. 0 (Z_OK) on success.\n * You will not need it in real life, because deflate errors\n * are possible only on wrong options or bad `onData` / `onEnd`\n * custom handlers.\n **/\n\n/**\n * Deflate.msg -> String\n *\n * Error message, if [[Deflate.err]] != 0\n **/\n\n\n/**\n * new Deflate(options)\n * - options (Object): zlib deflate options.\n *\n * Creates new deflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `level`\n * - `windowBits`\n * - `memLevel`\n * - `strategy`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw deflate\n * - `gzip` (Boolean) - create gzip wrapper\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n * - `header` (Object) - custom header for gzip\n *   - `text` (Boolean) - true if compressed data believed to be text\n *   - `time` (Number) - modification time, unix timestamp\n *   - `os` (Number) - operation system code\n *   - `extra` (Array) - array of bytes with extra data (max 65536)\n *   - `name` (String) - file name (binary string)\n *   - `comment` (String) - comment (binary string)\n *   - `hcrc` (Boolean) - true if header crc should be added\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var deflate = new pako.Deflate({ level: 3});\n *\n * deflate.push(chunk1, false);\n * deflate.push(chunk2, true);  // true -> last chunk\n *\n * if (deflate.err) { throw new Error(deflate.err); }\n *\n * console.log(deflate.result);\n * ```\n **/\nfunction Deflate(options) {\n  if (!(this instanceof Deflate)) return new Deflate(options);\n\n  this.options = utils.assign({\n    level: Z_DEFAULT_COMPRESSION,\n    method: Z_DEFLATED,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  }\n\n  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status = zlib_deflate.deflateInit2(\n    this.strm,\n    opt.level,\n    opt.method,\n    opt.windowBits,\n    opt.memLevel,\n    opt.strategy\n  );\n\n  if (status !== Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  if (opt.header) {\n    zlib_deflate.deflateSetHeader(this.strm, opt.header);\n  }\n\n  if (opt.dictionary) {\n    var dict;\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      // If we need to compress text, change encoding to utf8.\n      dict = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      dict = new Uint8Array(opt.dictionary);\n    } else {\n      dict = opt.dictionary;\n    }\n\n    status = zlib_deflate.deflateSetDictionary(this.strm, dict);\n\n    if (status !== Z_OK) {\n      throw new Error(msg[status]);\n    }\n\n    this._dict_set = true;\n  }\n}\n\n/**\n * Deflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data. Strings will be\n *   converted to utf8 byte sequence.\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` meansh Z_FINISH.\n *\n * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n * new compressed chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Deflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the compression context.\n *\n * On fail call [[Deflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * array format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nDeflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var status, _mode;\n\n  if (this.ended) { return false; }\n\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? Z_FINISH : Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // If we need to compress text, change encoding to utf8.\n    strm.input = strings.string2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n    status = zlib_deflate.deflate(strm, _mode);    /* no bad return value */\n\n    if (status !== Z_STREAM_END && status !== Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n    if (strm.avail_out === 0 || (strm.avail_in === 0 && (_mode === Z_FINISH || _mode === Z_SYNC_FLUSH))) {\n      if (this.options.to === 'string') {\n        this.onData(strings.buf2binstring(utils.shrinkBuf(strm.output, strm.next_out)));\n      } else {\n        this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n      }\n    }\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== Z_STREAM_END);\n\n  // Finalize on the last chunk.\n  if (_mode === Z_FINISH) {\n    status = zlib_deflate.deflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === Z_SYNC_FLUSH) {\n    this.onEnd(Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Deflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): ouput data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nDeflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Deflate#onEnd(status) -> Void\n * - status (Number): deflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called once after you tell deflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nDeflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * deflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * Compress `data` with deflate algorithm and `options`.\n *\n * Supported options are:\n *\n * - level\n * - windowBits\n * - memLevel\n * - strategy\n * - dictionary\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , data = Uint8Array([1,2,3,4,5,6,7,8,9]);\n *\n * console.log(pako.deflate(data));\n * ```\n **/\nfunction deflate(input, options) {\n  var deflator = new Deflate(options);\n\n  deflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (deflator.err) { throw deflator.msg; }\n\n  return deflator.result;\n}\n\n\n/**\n * deflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction deflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate(input, options);\n}\n\n\n/**\n * gzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but create gzip wrapper instead of\n * deflate one.\n **/\nfunction gzip(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate(input, options);\n}\n\n\nexports.Deflate = Deflate;\nexports.deflate = deflate;\nexports.deflateRaw = deflateRaw;\nexports.gzip = gzip;\n\n},{\"./utils/common\":41,\"./utils/strings\":42,\"./zlib/deflate\":46,\"./zlib/messages\":51,\"./zlib/zstream\":53}],40:[function(require,module,exports){\n'use strict';\n\n\nvar zlib_inflate = require('./zlib/inflate');\nvar utils        = require('./utils/common');\nvar strings      = require('./utils/strings');\nvar c            = require('./zlib/constants');\nvar msg          = require('./zlib/messages');\nvar ZStream      = require('./zlib/zstream');\nvar GZheader     = require('./zlib/gzheader');\n\nvar toString = Object.prototype.toString;\n\n/**\n * class Inflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[inflate]]\n * and [[inflateRaw]].\n **/\n\n/* internal\n * inflate.chunks -> Array\n *\n * Chunks of output data, if [[Inflate#onData]] not overriden.\n **/\n\n/**\n * Inflate.result -> Uint8Array|Array|String\n *\n * Uncompressed result, generated by default [[Inflate#onData]]\n * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Inflate#push]] with `Z_FINISH` / `true` param) or if you\n * push a chunk with explicit flush (call [[Inflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Inflate.err -> Number\n *\n * Error code after inflate finished. 0 (Z_OK) on success.\n * Should be checked if broken data possible.\n **/\n\n/**\n * Inflate.msg -> String\n *\n * Error message, if [[Inflate.err]] != 0\n **/\n\n\n/**\n * new Inflate(options)\n * - options (Object): zlib inflate options.\n *\n * Creates new inflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `windowBits`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw inflate\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n * By default, when no options set, autodetect deflate/gzip data format via\n * wrapper header.\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var inflate = new pako.Inflate({ level: 3});\n *\n * inflate.push(chunk1, false);\n * inflate.push(chunk2, true);  // true -> last chunk\n *\n * if (inflate.err) { throw new Error(inflate.err); }\n *\n * console.log(inflate.result);\n * ```\n **/\nfunction Inflate(options) {\n  if (!(this instanceof Inflate)) return new Inflate(options);\n\n  this.options = utils.assign({\n    chunkSize: 16384,\n    windowBits: 0,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  // Force window size for `raw` data, if not set directly,\n  // because we have no header for autodetect.\n  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {\n    opt.windowBits = -opt.windowBits;\n    if (opt.windowBits === 0) { opt.windowBits = -15; }\n  }\n\n  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\n  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&\n      !(options && options.windowBits)) {\n    opt.windowBits += 32;\n  }\n\n  // Gzip header has no info about windows size, we can do autodetect only\n  // for deflate. So, if window size not set, force it to max when gzip possible\n  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {\n    // bit 3 (16) -> gzipped data\n    // bit 4 (32) -> autodetect gzip/deflate\n    if ((opt.windowBits & 15) === 0) {\n      opt.windowBits |= 15;\n    }\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm   = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status  = zlib_inflate.inflateInit2(\n    this.strm,\n    opt.windowBits\n  );\n\n  if (status !== c.Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  this.header = new GZheader();\n\n  zlib_inflate.inflateGetHeader(this.strm, this.header);\n}\n\n/**\n * Inflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` meansh Z_FINISH.\n *\n * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\n * new output chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Inflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the decompression context.\n *\n * On fail call [[Inflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nInflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var dictionary = this.options.dictionary;\n  var status, _mode;\n  var next_out_utf8, tail, utf8str;\n  var dict;\n\n  // Flag to properly process Z_BUF_ERROR on testing inflate call\n  // when we check that all output data was flushed.\n  var allowBufError = false;\n\n  if (this.ended) { return false; }\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? c.Z_FINISH : c.Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // Only binary strings can be decompressed on practice\n    strm.input = strings.binstring2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    status = zlib_inflate.inflate(strm, c.Z_NO_FLUSH);    /* no bad return value */\n\n    if (status === c.Z_NEED_DICT && dictionary) {\n      // Convert data if needed\n      if (typeof dictionary === 'string') {\n        dict = strings.string2buf(dictionary);\n      } else if (toString.call(dictionary) === '[object ArrayBuffer]') {\n        dict = new Uint8Array(dictionary);\n      } else {\n        dict = dictionary;\n      }\n\n      status = zlib_inflate.inflateSetDictionary(this.strm, dict);\n\n    }\n\n    if (status === c.Z_BUF_ERROR && allowBufError === true) {\n      status = c.Z_OK;\n      allowBufError = false;\n    }\n\n    if (status !== c.Z_STREAM_END && status !== c.Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n\n    if (strm.next_out) {\n      if (strm.avail_out === 0 || status === c.Z_STREAM_END || (strm.avail_in === 0 && (_mode === c.Z_FINISH || _mode === c.Z_SYNC_FLUSH))) {\n\n        if (this.options.to === 'string') {\n\n          next_out_utf8 = strings.utf8border(strm.output, strm.next_out);\n\n          tail = strm.next_out - next_out_utf8;\n          utf8str = strings.buf2string(strm.output, next_out_utf8);\n\n          // move tail\n          strm.next_out = tail;\n          strm.avail_out = chunkSize - tail;\n          if (tail) { utils.arraySet(strm.output, strm.output, next_out_utf8, tail, 0); }\n\n          this.onData(utf8str);\n\n        } else {\n          this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n        }\n      }\n    }\n\n    // When no more input data, we should check that internal inflate buffers\n    // are flushed. The only way to do it when avail_out = 0 - run one more\n    // inflate pass. But if output data not exists, inflate return Z_BUF_ERROR.\n    // Here we set flag to process this error properly.\n    //\n    // NOTE. Deflate does not return error in this case and does not needs such\n    // logic.\n    if (strm.avail_in === 0 && strm.avail_out === 0) {\n      allowBufError = true;\n    }\n\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== c.Z_STREAM_END);\n\n  if (status === c.Z_STREAM_END) {\n    _mode = c.Z_FINISH;\n  }\n\n  // Finalize on the last chunk.\n  if (_mode === c.Z_FINISH) {\n    status = zlib_inflate.inflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === c.Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === c.Z_SYNC_FLUSH) {\n    this.onEnd(c.Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Inflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): ouput data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nInflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Inflate#onEnd(status) -> Void\n * - status (Number): inflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called either after you tell inflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nInflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === c.Z_OK) {\n    if (this.options.to === 'string') {\n      // Glue & convert here, until we teach pako to send\n      // utf8 alligned strings to onData\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * inflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Decompress `data` with inflate/ungzip and `options`. Autodetect\n * format via wrapper header by default. That's why we don't provide\n * separate `ungzip` method.\n *\n * Supported options are:\n *\n * - windowBits\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , input = pako.deflate([1,2,3,4,5,6,7,8,9])\n *   , output;\n *\n * try {\n *   output = pako.inflate(input);\n * } catch (err)\n *   console.log(err);\n * }\n * ```\n **/\nfunction inflate(input, options) {\n  var inflator = new Inflate(options);\n\n  inflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (inflator.err) { throw inflator.msg; }\n\n  return inflator.result;\n}\n\n\n/**\n * inflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * The same as [[inflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction inflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return inflate(input, options);\n}\n\n\n/**\n * ungzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Just shortcut to [[inflate]], because it autodetects format\n * by header.content. Done for convenience.\n **/\n\n\nexports.Inflate = Inflate;\nexports.inflate = inflate;\nexports.inflateRaw = inflateRaw;\nexports.ungzip  = inflate;\n\n},{\"./utils/common\":41,\"./utils/strings\":42,\"./zlib/constants\":44,\"./zlib/gzheader\":47,\"./zlib/inflate\":49,\"./zlib/messages\":51,\"./zlib/zstream\":53}],41:[function(require,module,exports){\n'use strict';\n\n\nvar TYPED_OK =  (typeof Uint8Array !== 'undefined') &&\n                (typeof Uint16Array !== 'undefined') &&\n                (typeof Int32Array !== 'undefined');\n\n\nexports.assign = function (obj /*from1, from2, from3, ...*/) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    var source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (var p in source) {\n      if (source.hasOwnProperty(p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// reduce buffer size, avoiding mem copy\nexports.shrinkBuf = function (buf, size) {\n  if (buf.length === size) { return buf; }\n  if (buf.subarray) { return buf.subarray(0, size); }\n  buf.length = size;\n  return buf;\n};\n\n\nvar fnTyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    if (src.subarray && dest.subarray) {\n      dest.set(src.subarray(src_offs, src_offs + len), dest_offs);\n      return;\n    }\n    // Fallback to ordinary array\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    var i, l, len, pos, chunk, result;\n\n    // calculate data length\n    len = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      len += chunks[i].length;\n    }\n\n    // join chunks\n    result = new Uint8Array(len);\n    pos = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      chunk = chunks[i];\n      result.set(chunk, pos);\n      pos += chunk.length;\n    }\n\n    return result;\n  }\n};\n\nvar fnUntyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    return [].concat.apply([], chunks);\n  }\n};\n\n\n// Enable/Disable typed arrays use, for testing\n//\nexports.setTyped = function (on) {\n  if (on) {\n    exports.Buf8  = Uint8Array;\n    exports.Buf16 = Uint16Array;\n    exports.Buf32 = Int32Array;\n    exports.assign(exports, fnTyped);\n  } else {\n    exports.Buf8  = Array;\n    exports.Buf16 = Array;\n    exports.Buf32 = Array;\n    exports.assign(exports, fnUntyped);\n  }\n};\n\nexports.setTyped(TYPED_OK);\n\n},{}],42:[function(require,module,exports){\n// String encode/decode helpers\n'use strict';\n\n\nvar utils = require('./common');\n\n\n// Quick check if we can use fast array to bin string conversion\n//\n// - apply(Array) can fail on Android 2.2\n// - apply(Uint8Array) can fail on iOS 5.1 Safary\n//\nvar STR_APPLY_OK = true;\nvar STR_APPLY_UIA_OK = true;\n\ntry { String.fromCharCode.apply(null, [ 0 ]); } catch (__) { STR_APPLY_OK = false; }\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }\n\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nvar _utf8len = new utils.Buf8(256);\nfor (var q = 0; q < 256; q++) {\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n}\n_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n\n\n// convert string to array (typed, when possible)\nexports.string2buf = function (str) {\n  var buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n  // count binary size\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n  }\n\n  // allocate buffer\n  buf = new utils.Buf8(buf_len);\n\n  // convert\n  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    if (c < 0x80) {\n      /* one byte */\n      buf[i++] = c;\n    } else if (c < 0x800) {\n      /* two bytes */\n      buf[i++] = 0xC0 | (c >>> 6);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else if (c < 0x10000) {\n      /* three bytes */\n      buf[i++] = 0xE0 | (c >>> 12);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else {\n      /* four bytes */\n      buf[i++] = 0xf0 | (c >>> 18);\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    }\n  }\n\n  return buf;\n};\n\n// Helper (used in 2 places)\nfunction buf2binstring(buf, len) {\n  // use fallback for big arrays to avoid stack overflow\n  if (len < 65537) {\n    if ((buf.subarray && STR_APPLY_UIA_OK) || (!buf.subarray && STR_APPLY_OK)) {\n      return String.fromCharCode.apply(null, utils.shrinkBuf(buf, len));\n    }\n  }\n\n  var result = '';\n  for (var i = 0; i < len; i++) {\n    result += String.fromCharCode(buf[i]);\n  }\n  return result;\n}\n\n\n// Convert byte array to binary string\nexports.buf2binstring = function (buf) {\n  return buf2binstring(buf, buf.length);\n};\n\n\n// Convert binary string (typed, when possible)\nexports.binstring2buf = function (str) {\n  var buf = new utils.Buf8(str.length);\n  for (var i = 0, len = buf.length; i < len; i++) {\n    buf[i] = str.charCodeAt(i);\n  }\n  return buf;\n};\n\n\n// convert array to string\nexports.buf2string = function (buf, max) {\n  var i, out, c, c_len;\n  var len = max || buf.length;\n\n  // Reserve max possible length (2 words per char)\n  // NB: by unknown reasons, Array is significantly faster for\n  //     String.fromCharCode.apply than Uint16Array.\n  var utf16buf = new Array(len * 2);\n\n  for (out = 0, i = 0; i < len;) {\n    c = buf[i++];\n    // quick process ascii\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n    c_len = _utf8len[c];\n    // skip 5 & 6 byte codes\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }\n\n    // apply mask on first byte\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n    // join the rest\n    while (c_len > 1 && i < len) {\n      c = (c << 6) | (buf[i++] & 0x3f);\n      c_len--;\n    }\n\n    // terminated by end of string?\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n    if (c < 0x10000) {\n      utf16buf[out++] = c;\n    } else {\n      c -= 0x10000;\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n    }\n  }\n\n  return buf2binstring(utf16buf, out);\n};\n\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nexports.utf8border = function (buf, max) {\n  var pos;\n\n  max = max || buf.length;\n  if (max > buf.length) { max = buf.length; }\n\n  // go back from last position, until start of sequence found\n  pos = max - 1;\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n  // Fuckup - very small and broken sequence,\n  // return max, because we should return something anyway.\n  if (pos < 0) { return max; }\n\n  // If we came to start of buffer - that means vuffer is too small,\n  // return max too.\n  if (pos === 0) { return max; }\n\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n\n},{\"./common\":41}],43:[function(require,module,exports){\n'use strict';\n\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\n// It doesn't worth to make additional optimizationa as in original.\n// Small size is preferable.\n\nfunction adler32(adler, buf, len, pos) {\n  var s1 = (adler & 0xffff) |0,\n      s2 = ((adler >>> 16) & 0xffff) |0,\n      n = 0;\n\n  while (len !== 0) {\n    // Set limit ~ twice less than 5552, to keep\n    // s2 in 31-bits, because we force signed ints.\n    // in other case %= will fail.\n    n = len > 2000 ? 2000 : len;\n    len -= n;\n\n    do {\n      s1 = (s1 + buf[pos++]) |0;\n      s2 = (s2 + s1) |0;\n    } while (--n);\n\n    s1 %= 65521;\n    s2 %= 65521;\n  }\n\n  return (s1 | (s2 << 16)) |0;\n}\n\n\nmodule.exports = adler32;\n\n},{}],44:[function(require,module,exports){\n'use strict';\n\n\nmodule.exports = {\n\n  /* Allowed flush values; see deflate() and inflate() below for details */\n  Z_NO_FLUSH:         0,\n  Z_PARTIAL_FLUSH:    1,\n  Z_SYNC_FLUSH:       2,\n  Z_FULL_FLUSH:       3,\n  Z_FINISH:           4,\n  Z_BLOCK:            5,\n  Z_TREES:            6,\n\n  /* Return codes for the compression/decompression functions. Negative values\n  * are errors, positive values are used for special but normal events.\n  */\n  Z_OK:               0,\n  Z_STREAM_END:       1,\n  Z_NEED_DICT:        2,\n  Z_ERRNO:           -1,\n  Z_STREAM_ERROR:    -2,\n  Z_DATA_ERROR:      -3,\n  //Z_MEM_ERROR:     -4,\n  Z_BUF_ERROR:       -5,\n  //Z_VERSION_ERROR: -6,\n\n  /* compression levels */\n  Z_NO_COMPRESSION:         0,\n  Z_BEST_SPEED:             1,\n  Z_BEST_COMPRESSION:       9,\n  Z_DEFAULT_COMPRESSION:   -1,\n\n\n  Z_FILTERED:               1,\n  Z_HUFFMAN_ONLY:           2,\n  Z_RLE:                    3,\n  Z_FIXED:                  4,\n  Z_DEFAULT_STRATEGY:       0,\n\n  /* Possible values of the data_type field (though see inflate()) */\n  Z_BINARY:                 0,\n  Z_TEXT:                   1,\n  //Z_ASCII:                1, // = Z_TEXT (deprecated)\n  Z_UNKNOWN:                2,\n\n  /* The deflate compression method */\n  Z_DEFLATED:               8\n  //Z_NULL:                 null // Use -1 or null inline, depending on var type\n};\n\n},{}],45:[function(require,module,exports){\n'use strict';\n\n// Note: we can't get significant speed boost here.\n// So write code to minimize size - no pregenerated tables\n// and array tools dependencies.\n\n\n// Use ordinary array, since untyped makes no boost here\nfunction makeTable() {\n  var c, table = [];\n\n  for (var n = 0; n < 256; n++) {\n    c = n;\n    for (var k = 0; k < 8; k++) {\n      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    table[n] = c;\n  }\n\n  return table;\n}\n\n// Create table on load. Just 255 signed longs. Not a problem.\nvar crcTable = makeTable();\n\n\nfunction crc32(crc, buf, len, pos) {\n  var t = crcTable,\n      end = pos + len;\n\n  crc ^= -1;\n\n  for (var i = pos; i < end; i++) {\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)); // >>> 0;\n}\n\n\nmodule.exports = crc32;\n\n},{}],46:[function(require,module,exports){\n'use strict';\n\nvar utils   = require('../utils/common');\nvar trees   = require('./trees');\nvar adler32 = require('./adler32');\nvar crc32   = require('./crc32');\nvar msg     = require('./messages');\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\nvar Z_NO_FLUSH      = 0;\nvar Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\nvar Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\n//var Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\n//var Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\n//var Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n\n/* compression levels */\n//var Z_NO_COMPRESSION      = 0;\n//var Z_BEST_SPEED          = 1;\n//var Z_BEST_COMPRESSION    = 9;\nvar Z_DEFAULT_COMPRESSION = -1;\n\n\nvar Z_FILTERED            = 1;\nvar Z_HUFFMAN_ONLY        = 2;\nvar Z_RLE                 = 3;\nvar Z_FIXED               = 4;\nvar Z_DEFAULT_STRATEGY    = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\n//var Z_BINARY              = 0;\n//var Z_TEXT                = 1;\n//var Z_ASCII               = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n/*============================================================================*/\n\n\nvar MAX_MEM_LEVEL = 9;\n/* Maximum value for memLevel in deflateInit2 */\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_MEM_LEVEL = 8;\n\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\nvar D_CODES       = 30;\n/* number of distance codes */\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\nvar MAX_BITS  = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar MIN_MATCH = 3;\nvar MAX_MATCH = 258;\nvar MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\n\nvar PRESET_DICT = 0x20;\n\nvar INIT_STATE = 42;\nvar EXTRA_STATE = 69;\nvar NAME_STATE = 73;\nvar COMMENT_STATE = 91;\nvar HCRC_STATE = 103;\nvar BUSY_STATE = 113;\nvar FINISH_STATE = 666;\n\nvar BS_NEED_MORE      = 1; /* block not completed, need more input or more output */\nvar BS_BLOCK_DONE     = 2; /* block flush performed */\nvar BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */\nvar BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */\n\nvar OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\nfunction err(strm, errorCode) {\n  strm.msg = msg[errorCode];\n  return errorCode;\n}\n\nfunction rank(f) {\n  return ((f) << 1) - ((f) > 4 ? 9 : 0);\n}\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n\n/* =========================================================================\n * Flush as much pending output as possible. All deflate() output goes\n * through this function so some applications may wish to modify it\n * to avoid allocating a large strm->output buffer and copying into it.\n * (See also read_buf()).\n */\nfunction flush_pending(strm) {\n  var s = strm.state;\n\n  //_tr_flush_bits(s);\n  var len = s.pending;\n  if (len > strm.avail_out) {\n    len = strm.avail_out;\n  }\n  if (len === 0) { return; }\n\n  utils.arraySet(strm.output, s.pending_buf, s.pending_out, len, strm.next_out);\n  strm.next_out += len;\n  s.pending_out += len;\n  strm.total_out += len;\n  strm.avail_out -= len;\n  s.pending -= len;\n  if (s.pending === 0) {\n    s.pending_out = 0;\n  }\n}\n\n\nfunction flush_block_only(s, last) {\n  trees._tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);\n  s.block_start = s.strstart;\n  flush_pending(s.strm);\n}\n\n\nfunction put_byte(s, b) {\n  s.pending_buf[s.pending++] = b;\n}\n\n\n/* =========================================================================\n * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n * IN assertion: the stream state is correct and there is enough room in\n * pending_buf.\n */\nfunction putShortMSB(s, b) {\n//  put_byte(s, (Byte)(b >> 8));\n//  put_byte(s, (Byte)(b & 0xff));\n  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n  s.pending_buf[s.pending++] = b & 0xff;\n}\n\n\n/* ===========================================================================\n * Read a new buffer from the current input stream, update the adler32\n * and total number of bytes read.  All deflate() input goes through\n * this function so some applications may wish to modify it to avoid\n * allocating a large strm->input buffer and copying from it.\n * (See also flush_pending()).\n */\nfunction read_buf(strm, buf, start, size) {\n  var len = strm.avail_in;\n\n  if (len > size) { len = size; }\n  if (len === 0) { return 0; }\n\n  strm.avail_in -= len;\n\n  // zmemcpy(buf, strm->next_in, len);\n  utils.arraySet(buf, strm.input, strm.next_in, len, start);\n  if (strm.state.wrap === 1) {\n    strm.adler = adler32(strm.adler, buf, len, start);\n  }\n\n  else if (strm.state.wrap === 2) {\n    strm.adler = crc32(strm.adler, buf, len, start);\n  }\n\n  strm.next_in += len;\n  strm.total_in += len;\n\n  return len;\n}\n\n\n/* ===========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n * OUT assertion: the match length is not greater than s->lookahead.\n */\nfunction longest_match(s, cur_match) {\n  var chain_length = s.max_chain_length;      /* max hash chain length */\n  var scan = s.strstart; /* current string */\n  var match;                       /* matched string */\n  var len;                           /* length of current match */\n  var best_len = s.prev_length;              /* best match length so far */\n  var nice_match = s.nice_match;             /* stop if match long enough */\n  var limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?\n      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;\n\n  var _win = s.window; // shortcut\n\n  var wmask = s.w_mask;\n  var prev  = s.prev;\n\n  /* Stop when cur_match becomes <= limit. To simplify the code,\n   * we prevent matches with the string of window index 0.\n   */\n\n  var strend = s.strstart + MAX_MATCH;\n  var scan_end1  = _win[scan + best_len - 1];\n  var scan_end   = _win[scan + best_len];\n\n  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n   * It is easy to get rid of this optimization if necessary.\n   */\n  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n  /* Do not waste too much time if we already have a good match: */\n  if (s.prev_length >= s.good_match) {\n    chain_length >>= 2;\n  }\n  /* Do not look for matches beyond the end of the input. This is necessary\n   * to make deflate deterministic.\n   */\n  if (nice_match > s.lookahead) { nice_match = s.lookahead; }\n\n  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n  do {\n    // Assert(cur_match < s->strstart, \"no future\");\n    match = cur_match;\n\n    /* Skip to next match if the match length cannot increase\n     * or if the match length is less than 2.  Note that the checks below\n     * for insufficient lookahead only occur occasionally for performance\n     * reasons.  Therefore uninitialized memory will be accessed, and\n     * conditional jumps will be made that depend on those values.\n     * However the length of the match is limited to the lookahead, so\n     * the output of deflate is not affected by the uninitialized values.\n     */\n\n    if (_win[match + best_len]     !== scan_end  ||\n        _win[match + best_len - 1] !== scan_end1 ||\n        _win[match]                !== _win[scan] ||\n        _win[++match]              !== _win[scan + 1]) {\n      continue;\n    }\n\n    /* The check at best_len-1 can be removed because it will be made\n     * again later. (This heuristic is not always a win.)\n     * It is not necessary to compare scan[2] and match[2] since they\n     * are always equal when the other bytes match, given that\n     * the hash keys are equal and that HASH_BITS >= 8.\n     */\n    scan += 2;\n    match++;\n    // Assert(*scan == *match, \"match[2]?\");\n\n    /* We check for insufficient lookahead only every 8th comparison;\n     * the 256th check will be made at strstart+258.\n     */\n    do {\n      /*jshint noempty:false*/\n    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             scan < strend);\n\n    // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n    len = MAX_MATCH - (strend - scan);\n    scan = strend - MAX_MATCH;\n\n    if (len > best_len) {\n      s.match_start = cur_match;\n      best_len = len;\n      if (len >= nice_match) {\n        break;\n      }\n      scan_end1  = _win[scan + best_len - 1];\n      scan_end   = _win[scan + best_len];\n    }\n  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n  if (best_len <= s.lookahead) {\n    return best_len;\n  }\n  return s.lookahead;\n}\n\n\n/* ===========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead.\n *\n * IN assertion: lookahead < MIN_LOOKAHEAD\n * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n *    At least one byte has been read, or avail_in == 0; reads are\n *    performed for at least two bytes (required for the zip translate_eol\n *    option -- not supported here).\n */\nfunction fill_window(s) {\n  var _w_size = s.w_size;\n  var p, n, m, more, str;\n\n  //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n  do {\n    more = s.window_size - s.lookahead - s.strstart;\n\n    // JS ints have 32 bit, block below not needed\n    /* Deal with !@#$% 64K limit: */\n    //if (sizeof(int) <= 2) {\n    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n    //        more = wsize;\n    //\n    //  } else if (more == (unsigned)(-1)) {\n    //        /* Very unlikely, but possible on 16 bit machine if\n    //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n    //         */\n    //        more--;\n    //    }\n    //}\n\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n\n      utils.arraySet(s.window, s.window, _w_size, _w_size, 0);\n      s.match_start -= _w_size;\n      s.strstart -= _w_size;\n      /* we now have strstart >= MAX_DIST */\n      s.block_start -= _w_size;\n\n      /* Slide the hash table (could be avoided with 32 bit values\n       at the expense of memory usage). We slide even when level == 0\n       to keep the hash table consistent if we switch back to level > 0\n       later. (Using level 0 permanently is not an optimal usage of\n       zlib, so we don't care about this pathological case.)\n       */\n\n      n = s.hash_size;\n      p = n;\n      do {\n        m = s.head[--p];\n        s.head[p] = (m >= _w_size ? m - _w_size : 0);\n      } while (--n);\n\n      n = _w_size;\n      p = n;\n      do {\n        m = s.prev[--p];\n        s.prev[p] = (m >= _w_size ? m - _w_size : 0);\n        /* If n is not on any hash chain, prev[n] is garbage but\n         * its value will never be used.\n         */\n      } while (--n);\n\n      more += _w_size;\n    }\n    if (s.strm.avail_in === 0) {\n      break;\n    }\n\n    /* If there was no sliding:\n     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n     *    more == window_size - lookahead - strstart\n     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n     * => more >= window_size - 2*WSIZE + 2\n     * In the BIG_MEM or MMAP case (not yet supported),\n     *   window_size == input_size + MIN_LOOKAHEAD  &&\n     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n     * Otherwise, window_size == 2*WSIZE so more >= 2.\n     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n     */\n    //Assert(more >= 2, \"more < 2\");\n    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n    s.lookahead += n;\n\n    /* Initialize the hash value now that we have some input: */\n    if (s.lookahead + s.insert >= MIN_MATCH) {\n      str = s.strstart - s.insert;\n      s.ins_h = s.window[str];\n\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + 1]) & s.hash_mask;\n//#if MIN_MATCH != 3\n//        Call update_hash() MIN_MATCH-3 more times\n//#endif\n      while (s.insert) {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n        s.insert--;\n        if (s.lookahead + s.insert < MIN_MATCH) {\n          break;\n        }\n      }\n    }\n    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n     * but this is not important since only literal bytes will be emitted.\n     */\n\n  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n\n  /* If the WIN_INIT bytes after the end of the current data have never been\n   * written, then zero those bytes in order to avoid memory check reports of\n   * the use of uninitialized (or uninitialised as Julian writes) bytes by\n   * the longest match routines.  Update the high water mark for the next\n   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n   */\n//  if (s.high_water < s.window_size) {\n//    var curr = s.strstart + s.lookahead;\n//    var init = 0;\n//\n//    if (s.high_water < curr) {\n//      /* Previous high water mark below current data -- zero WIN_INIT\n//       * bytes or up to end of window, whichever is less.\n//       */\n//      init = s.window_size - curr;\n//      if (init > WIN_INIT)\n//        init = WIN_INIT;\n//      zmemzero(s->window + curr, (unsigned)init);\n//      s->high_water = curr + init;\n//    }\n//    else if (s->high_water < (ulg)curr + WIN_INIT) {\n//      /* High water mark at or above current data, but below current data\n//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n//       * to end of window, whichever is less.\n//       */\n//      init = (ulg)curr + WIN_INIT - s->high_water;\n//      if (init > s->window_size - s->high_water)\n//        init = s->window_size - s->high_water;\n//      zmemzero(s->window + s->high_water, (unsigned)init);\n//      s->high_water += init;\n//    }\n//  }\n//\n//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n//    \"not enough room for search\");\n}\n\n/* ===========================================================================\n * Copy without compression as much as possible from the input stream, return\n * the current block state.\n * This function does not insert new strings in the dictionary since\n * uncompressible data is probably not useful. This function is used\n * only for the level=0 compression option.\n * NOTE: this function should be optimized to avoid extra copying from\n * window to pending_buf.\n */\nfunction deflate_stored(s, flush) {\n  /* Stored blocks are limited to 0xffff bytes, pending_buf is limited\n   * to pending_buf_size, and each stored block has a 5 byte header:\n   */\n  var max_block_size = 0xffff;\n\n  if (max_block_size > s.pending_buf_size - 5) {\n    max_block_size = s.pending_buf_size - 5;\n  }\n\n  /* Copy as much as possible from input to output: */\n  for (;;) {\n    /* Fill the window as much as possible: */\n    if (s.lookahead <= 1) {\n\n      //Assert(s->strstart < s->w_size+MAX_DIST(s) ||\n      //  s->block_start >= (long)s->w_size, \"slide too late\");\n//      if (!(s.strstart < s.w_size + (s.w_size - MIN_LOOKAHEAD) ||\n//        s.block_start >= s.w_size)) {\n//        throw  new Error(\"slide too late\");\n//      }\n\n      fill_window(s);\n      if (s.lookahead === 0 && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n\n      if (s.lookahead === 0) {\n        break;\n      }\n      /* flush the current block */\n    }\n    //Assert(s->block_start >= 0L, \"block gone\");\n//    if (s.block_start < 0) throw new Error(\"block gone\");\n\n    s.strstart += s.lookahead;\n    s.lookahead = 0;\n\n    /* Emit a stored block if pending_buf will be full: */\n    var max_start = s.block_start + max_block_size;\n\n    if (s.strstart === 0 || s.strstart >= max_start) {\n      /* strstart == 0 is possible when wraparound on 16-bit machine */\n      s.lookahead = s.strstart - max_start;\n      s.strstart = max_start;\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n\n    }\n    /* Flush if we may have to slide, otherwise block_start may become\n     * negative and the data will be gone:\n     */\n    if (s.strstart - s.block_start >= (s.w_size - MIN_LOOKAHEAD)) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n\n  s.insert = 0;\n\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n\n  if (s.strstart > s.block_start) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_NEED_MORE;\n}\n\n/* ===========================================================================\n * Compress as much as possible from the input stream, return the current\n * block state.\n * This function does not perform lazy evaluation of matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nfunction deflate_fast(s, flush) {\n  var hash_head;        /* head of the hash chain */\n  var bflush;           /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) {\n        break; /* flush the current block */\n      }\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     * At this point we have always match_length < MIN_MATCH\n     */\n    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n    }\n    if (s.match_length >= MIN_MATCH) {\n      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n      /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                     s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n\n      /* Insert new strings in the hash table only if the match length\n       * is not too large. This saves time but degrades compression.\n       */\n      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {\n        s.match_length--; /* string at strstart already in table */\n        do {\n          s.strstart++;\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n          /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n           * always MIN_MATCH bytes ahead.\n           */\n        } while (--s.match_length !== 0);\n        s.strstart++;\n      } else\n      {\n        s.strstart += s.match_length;\n        s.match_length = 0;\n        s.ins_h = s.window[s.strstart];\n        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + 1]) & s.hash_mask;\n\n//#if MIN_MATCH != 3\n//                Call UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n         * matter since it will be recomputed at next deflate call.\n         */\n      }\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = ((s.strstart < (MIN_MATCH - 1)) ? s.strstart : MIN_MATCH - 1);\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nfunction deflate_slow(s, flush) {\n  var hash_head;          /* head of hash chain */\n  var bflush;              /* set if current block must be flushed */\n\n  var max_insert;\n\n  /* Process the input block. */\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     */\n    s.prev_length = s.match_length;\n    s.prev_match = s.match_start;\n    s.match_length = MIN_MATCH - 1;\n\n    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&\n        s.strstart - hash_head <= (s.w_size - MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n\n      if (s.match_length <= 5 &&\n         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {\n\n        /* If prev_match is also MIN_MATCH, match_start is garbage\n         * but we will ignore the current match anyway.\n         */\n        s.match_length = MIN_MATCH - 1;\n      }\n    }\n    /* If there was a match at the previous step and the current\n     * match is not better, output the previous match:\n     */\n    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {\n      max_insert = s.strstart + s.lookahead - MIN_MATCH;\n      /* Do not insert strings in hash table beyond this. */\n\n      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                     s.prev_length - MIN_MATCH, bflush);***/\n      bflush = trees._tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH);\n      /* Insert in hash table all strings up to the end of the match.\n       * strstart-1 and strstart are already inserted. If there is not\n       * enough lookahead, the last two strings are not inserted in\n       * the hash table.\n       */\n      s.lookahead -= s.prev_length - 1;\n      s.prev_length -= 2;\n      do {\n        if (++s.strstart <= max_insert) {\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n        }\n      } while (--s.prev_length !== 0);\n      s.match_available = 0;\n      s.match_length = MIN_MATCH - 1;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n      }\n\n    } else if (s.match_available) {\n      /* If there was no match at the previous position, output a\n       * single literal. If there was a match but the current match\n       * is longer, truncate the previous match to a single literal.\n       */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n      if (bflush) {\n        /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n        flush_block_only(s, false);\n        /***/\n      }\n      s.strstart++;\n      s.lookahead--;\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n    } else {\n      /* There is no previous match to compare with, wait for\n       * the next step to decide.\n       */\n      s.match_available = 1;\n      s.strstart++;\n      s.lookahead--;\n    }\n  }\n  //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n  if (s.match_available) {\n    //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n    s.match_available = 0;\n  }\n  s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_BLOCK_DONE;\n}\n\n\n/* ===========================================================================\n * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n * deflate switches away from Z_RLE.)\n */\nfunction deflate_rle(s, flush) {\n  var bflush;            /* set if current block must be flushed */\n  var prev;              /* byte at distance one to match */\n  var scan, strend;      /* scan goes up to strend for length of run */\n\n  var _win = s.window;\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the longest run, plus one for the unrolled loop.\n     */\n    if (s.lookahead <= MAX_MATCH) {\n      fill_window(s);\n      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* See how many times the previous byte repeats */\n    s.match_length = 0;\n    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {\n      scan = s.strstart - 1;\n      prev = _win[scan];\n      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n        strend = s.strstart + MAX_MATCH;\n        do {\n          /*jshint noempty:false*/\n        } while (prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 scan < strend);\n        s.match_length = MAX_MATCH - (strend - scan);\n        if (s.match_length > s.lookahead) {\n          s.match_length = s.lookahead;\n        }\n      }\n      //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n    }\n\n    /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n    if (s.match_length >= MIN_MATCH) {\n      //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, 1, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n      s.strstart += s.match_length;\n      s.match_length = 0;\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n * (It will be regenerated if this run of deflate switches away from Huffman.)\n */\nfunction deflate_huff(s, flush) {\n  var bflush;             /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we have a literal to write. */\n    if (s.lookahead === 0) {\n      fill_window(s);\n      if (s.lookahead === 0) {\n        if (flush === Z_NO_FLUSH) {\n          return BS_NEED_MORE;\n        }\n        break;      /* flush the current block */\n      }\n    }\n\n    /* Output a literal byte */\n    s.match_length = 0;\n    //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n    s.lookahead--;\n    s.strstart++;\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\n  this.good_length = good_length;\n  this.max_lazy = max_lazy;\n  this.nice_length = nice_length;\n  this.max_chain = max_chain;\n  this.func = func;\n}\n\nvar configuration_table;\n\nconfiguration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */\n\n  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */\n];\n\n\n/* ===========================================================================\n * Initialize the \"longest match\" routines for a new zlib stream\n */\nfunction lm_init(s) {\n  s.window_size = 2 * s.w_size;\n\n  /*** CLEAR_HASH(s); ***/\n  zero(s.head); // Fill with NIL (= 0);\n\n  /* Set the default configuration parameters:\n   */\n  s.max_lazy_match = configuration_table[s.level].max_lazy;\n  s.good_match = configuration_table[s.level].good_length;\n  s.nice_match = configuration_table[s.level].nice_length;\n  s.max_chain_length = configuration_table[s.level].max_chain;\n\n  s.strstart = 0;\n  s.block_start = 0;\n  s.lookahead = 0;\n  s.insert = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  s.ins_h = 0;\n}\n\n\nfunction DeflateState() {\n  this.strm = null;            /* pointer back to this zlib stream */\n  this.status = 0;            /* as the name implies */\n  this.pending_buf = null;      /* output still pending */\n  this.pending_buf_size = 0;  /* size of pending_buf */\n  this.pending_out = 0;       /* next pending byte to output to the stream */\n  this.pending = 0;           /* nb of bytes in the pending buffer */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.gzhead = null;         /* gzip header information to write */\n  this.gzindex = 0;           /* where in extra, name, or comment */\n  this.method = Z_DEFLATED; /* can only be DEFLATED */\n  this.last_flush = -1;   /* value of flush param for previous deflate call */\n\n  this.w_size = 0;  /* LZ77 window size (32K by default) */\n  this.w_bits = 0;  /* log2(w_size)  (8..16) */\n  this.w_mask = 0;  /* w_size - 1 */\n\n  this.window = null;\n  /* Sliding window. Input bytes are read into the second half of the window,\n   * and move to the first half later to keep a dictionary of at least wSize\n   * bytes. With this organization, matches are limited to a distance of\n   * wSize-MAX_MATCH bytes, but this ensures that IO is always\n   * performed with a length multiple of the block size.\n   */\n\n  this.window_size = 0;\n  /* Actual size of window: 2*wSize, except when the user input buffer\n   * is directly used as sliding window.\n   */\n\n  this.prev = null;\n  /* Link to older string with same hash index. To limit the size of this\n   * array to 64K, this link is maintained only for the last 32K strings.\n   * An index in this array is thus a window index modulo 32K.\n   */\n\n  this.head = null;   /* Heads of the hash chains or NIL. */\n\n  this.ins_h = 0;       /* hash index of string to be inserted */\n  this.hash_size = 0;   /* number of elements in hash table */\n  this.hash_bits = 0;   /* log2(hash_size) */\n  this.hash_mask = 0;   /* hash_size-1 */\n\n  this.hash_shift = 0;\n  /* Number of bits by which ins_h must be shifted at each input\n   * step. It must be such that after MIN_MATCH steps, the oldest\n   * byte no longer takes part in the hash key, that is:\n   *   hash_shift * MIN_MATCH >= hash_bits\n   */\n\n  this.block_start = 0;\n  /* Window position at the beginning of the current output block. Gets\n   * negative when the window is moved backwards.\n   */\n\n  this.match_length = 0;      /* length of best match */\n  this.prev_match = 0;        /* previous match */\n  this.match_available = 0;   /* set if previous match exists */\n  this.strstart = 0;          /* start of string to insert */\n  this.match_start = 0;       /* start of matching string */\n  this.lookahead = 0;         /* number of valid bytes ahead in window */\n\n  this.prev_length = 0;\n  /* Length of the best match at previous step. Matches not greater than this\n   * are discarded. This is used in the lazy match evaluation.\n   */\n\n  this.max_chain_length = 0;\n  /* To speed up deflation, hash chains are never searched beyond this\n   * length.  A higher limit improves compression ratio but degrades the\n   * speed.\n   */\n\n  this.max_lazy_match = 0;\n  /* Attempt to find a better match only when the current match is strictly\n   * smaller than this value. This mechanism is used only for compression\n   * levels >= 4.\n   */\n  // That's alias to max_lazy_match, don't use directly\n  //this.max_insert_length = 0;\n  /* Insert new strings in the hash table only if the match length is not\n   * greater than this length. This saves time but degrades compression.\n   * max_insert_length is used only for compression levels <= 3.\n   */\n\n  this.level = 0;     /* compression level (1..9) */\n  this.strategy = 0;  /* favor or force Huffman coding*/\n\n  this.good_match = 0;\n  /* Use a faster search when the previous match is longer than this */\n\n  this.nice_match = 0; /* Stop searching when current match exceeds this */\n\n              /* used by trees.c: */\n\n  /* Didn't use ct_data typedef below to suppress compiler warning */\n\n  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n\n  // Use flat array of DOUBLE size, with interleaved fata,\n  // because JS does not support effective\n  this.dyn_ltree  = new utils.Buf16(HEAP_SIZE * 2);\n  this.dyn_dtree  = new utils.Buf16((2 * D_CODES + 1) * 2);\n  this.bl_tree    = new utils.Buf16((2 * BL_CODES + 1) * 2);\n  zero(this.dyn_ltree);\n  zero(this.dyn_dtree);\n  zero(this.bl_tree);\n\n  this.l_desc   = null;         /* desc. for literal tree */\n  this.d_desc   = null;         /* desc. for distance tree */\n  this.bl_desc  = null;         /* desc. for bit length tree */\n\n  //ush bl_count[MAX_BITS+1];\n  this.bl_count = new utils.Buf16(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n  this.heap = new utils.Buf16(2 * L_CODES + 1);  /* heap used to build the Huffman trees */\n  zero(this.heap);\n\n  this.heap_len = 0;               /* number of elements in the heap */\n  this.heap_max = 0;               /* element of largest frequency */\n  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n   * The same heap array is used to build all trees.\n   */\n\n  this.depth = new utils.Buf16(2 * L_CODES + 1); //uch depth[2*L_CODES+1];\n  zero(this.depth);\n  /* Depth of each subtree used as tie breaker for trees of equal frequency\n   */\n\n  this.l_buf = 0;          /* buffer index for literals or lengths */\n\n  this.lit_bufsize = 0;\n  /* Size of match buffer for literals/lengths.  There are 4 reasons for\n   * limiting lit_bufsize to 64K:\n   *   - frequencies can be kept in 16 bit counters\n   *   - if compression is not successful for the first block, all input\n   *     data is still in the window so we can still emit a stored block even\n   *     when input comes from standard input.  (This can also be done for\n   *     all blocks if lit_bufsize is not greater than 32K.)\n   *   - if compression is not successful for a file smaller than 64K, we can\n   *     even emit a stored file instead of a stored block (saving 5 bytes).\n   *     This is applicable only for zip (not gzip or zlib).\n   *   - creating new Huffman trees less frequently may not provide fast\n   *     adaptation to changes in the input data statistics. (Take for\n   *     example a binary file with poorly compressible code followed by\n   *     a highly compressible string table.) Smaller buffer sizes give\n   *     fast adaptation but have of course the overhead of transmitting\n   *     trees more frequently.\n   *   - I can't count above 4\n   */\n\n  this.last_lit = 0;      /* running index in l_buf */\n\n  this.d_buf = 0;\n  /* Buffer index for distances. To simplify the code, d_buf and l_buf have\n   * the same number of elements. To use different lengths, an extra flag\n   * array would be necessary.\n   */\n\n  this.opt_len = 0;       /* bit length of current block with optimal trees */\n  this.static_len = 0;    /* bit length of current block with static trees */\n  this.matches = 0;       /* number of string matches in current block */\n  this.insert = 0;        /* bytes at end of window left to insert */\n\n\n  this.bi_buf = 0;\n  /* Output buffer. bits are inserted starting at the bottom (least\n   * significant bits).\n   */\n  this.bi_valid = 0;\n  /* Number of valid bits in bi_buf.  All bits above the last valid bit\n   * are always zero.\n   */\n\n  // Used for window memory init. We safely ignore it for JS. That makes\n  // sense only for pointers and memory check tools.\n  //this.high_water = 0;\n  /* High water mark offset in window for initialized bytes -- bytes above\n   * this are set to zero in order to avoid memory check warnings when\n   * longest match routines access bytes past the input.  This is then\n   * updated to the new high water mark.\n   */\n}\n\n\nfunction deflateResetKeep(strm) {\n  var s;\n\n  if (!strm || !strm.state) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.total_in = strm.total_out = 0;\n  strm.data_type = Z_UNKNOWN;\n\n  s = strm.state;\n  s.pending = 0;\n  s.pending_out = 0;\n\n  if (s.wrap < 0) {\n    s.wrap = -s.wrap;\n    /* was made negative by deflate(..., Z_FINISH); */\n  }\n  s.status = (s.wrap ? INIT_STATE : BUSY_STATE);\n  strm.adler = (s.wrap === 2) ?\n    0  // crc32(0, Z_NULL, 0)\n  :\n    1; // adler32(0, Z_NULL, 0)\n  s.last_flush = Z_NO_FLUSH;\n  trees._tr_init(s);\n  return Z_OK;\n}\n\n\nfunction deflateReset(strm) {\n  var ret = deflateResetKeep(strm);\n  if (ret === Z_OK) {\n    lm_init(strm.state);\n  }\n  return ret;\n}\n\n\nfunction deflateSetHeader(strm, head) {\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  if (strm.state.wrap !== 2) { return Z_STREAM_ERROR; }\n  strm.state.gzhead = head;\n  return Z_OK;\n}\n\n\nfunction deflateInit2(strm, level, method, windowBits, memLevel, strategy) {\n  if (!strm) { // === Z_NULL\n    return Z_STREAM_ERROR;\n  }\n  var wrap = 1;\n\n  if (level === Z_DEFAULT_COMPRESSION) {\n    level = 6;\n  }\n\n  if (windowBits < 0) { /* suppress zlib wrapper */\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n\n  else if (windowBits > 15) {\n    wrap = 2;           /* write gzip wrapper instead */\n    windowBits -= 16;\n  }\n\n\n  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED ||\n    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||\n    strategy < 0 || strategy > Z_FIXED) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n\n  if (windowBits === 8) {\n    windowBits = 9;\n  }\n  /* until 256-byte window bug fixed */\n\n  var s = new DeflateState();\n\n  strm.state = s;\n  s.strm = strm;\n\n  s.wrap = wrap;\n  s.gzhead = null;\n  s.w_bits = windowBits;\n  s.w_size = 1 << s.w_bits;\n  s.w_mask = s.w_size - 1;\n\n  s.hash_bits = memLevel + 7;\n  s.hash_size = 1 << s.hash_bits;\n  s.hash_mask = s.hash_size - 1;\n  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n\n  s.window = new utils.Buf8(s.w_size * 2);\n  s.head = new utils.Buf16(s.hash_size);\n  s.prev = new utils.Buf16(s.w_size);\n\n  // Don't need mem init magic for JS.\n  //s.high_water = 0;  /* nothing written to s->window yet */\n\n  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */\n\n  s.pending_buf_size = s.lit_bufsize * 4;\n  s.pending_buf = new utils.Buf8(s.pending_buf_size);\n\n  s.d_buf = s.lit_bufsize >> 1;\n  s.l_buf = (1 + 2) * s.lit_bufsize;\n\n  s.level = level;\n  s.strategy = strategy;\n  s.method = method;\n\n  return deflateReset(strm);\n}\n\nfunction deflateInit(strm, level) {\n  return deflateInit2(strm, level, Z_DEFLATED, MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY);\n}\n\n\nfunction deflate(strm, flush) {\n  var old_flush, s;\n  var beg, val; // for gzip header write only\n\n  if (!strm || !strm.state ||\n    flush > Z_BLOCK || flush < 0) {\n    return strm ? err(strm, Z_STREAM_ERROR) : Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n\n  if (!strm.output ||\n      (!strm.input && strm.avail_in !== 0) ||\n      (s.status === FINISH_STATE && flush !== Z_FINISH)) {\n    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR : Z_STREAM_ERROR);\n  }\n\n  s.strm = strm; /* just in case */\n  old_flush = s.last_flush;\n  s.last_flush = flush;\n\n  /* Write the header */\n  if (s.status === INIT_STATE) {\n\n    if (s.wrap === 2) { // GZIP header\n      strm.adler = 0;  //crc32(0L, Z_NULL, 0);\n      put_byte(s, 31);\n      put_byte(s, 139);\n      put_byte(s, 8);\n      if (!s.gzhead) { // s->gzhead == Z_NULL\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, OS_CODE);\n        s.status = BUSY_STATE;\n      }\n      else {\n        put_byte(s, (s.gzhead.text ? 1 : 0) +\n                    (s.gzhead.hcrc ? 2 : 0) +\n                    (!s.gzhead.extra ? 0 : 4) +\n                    (!s.gzhead.name ? 0 : 8) +\n                    (!s.gzhead.comment ? 0 : 16)\n                );\n        put_byte(s, s.gzhead.time & 0xff);\n        put_byte(s, (s.gzhead.time >> 8) & 0xff);\n        put_byte(s, (s.gzhead.time >> 16) & 0xff);\n        put_byte(s, (s.gzhead.time >> 24) & 0xff);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, s.gzhead.os & 0xff);\n        if (s.gzhead.extra && s.gzhead.extra.length) {\n          put_byte(s, s.gzhead.extra.length & 0xff);\n          put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n        }\n        if (s.gzhead.hcrc) {\n          strm.adler = crc32(strm.adler, s.pending_buf, s.pending, 0);\n        }\n        s.gzindex = 0;\n        s.status = EXTRA_STATE;\n      }\n    }\n    else // DEFLATE header\n    {\n      var header = (Z_DEFLATED + ((s.w_bits - 8) << 4)) << 8;\n      var level_flags = -1;\n\n      if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n        level_flags = 0;\n      } else if (s.level < 6) {\n        level_flags = 1;\n      } else if (s.level === 6) {\n        level_flags = 2;\n      } else {\n        level_flags = 3;\n      }\n      header |= (level_flags << 6);\n      if (s.strstart !== 0) { header |= PRESET_DICT; }\n      header += 31 - (header % 31);\n\n      s.status = BUSY_STATE;\n      putShortMSB(s, header);\n\n      /* Save the adler32 of the preset dictionary: */\n      if (s.strstart !== 0) {\n        putShortMSB(s, strm.adler >>> 16);\n        putShortMSB(s, strm.adler & 0xffff);\n      }\n      strm.adler = 1; // adler32(0L, Z_NULL, 0);\n    }\n  }\n\n//#ifdef GZIP\n  if (s.status === EXTRA_STATE) {\n    if (s.gzhead.extra/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n\n      while (s.gzindex < (s.gzhead.extra.length & 0xffff)) {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            break;\n          }\n        }\n        put_byte(s, s.gzhead.extra[s.gzindex] & 0xff);\n        s.gzindex++;\n      }\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (s.gzindex === s.gzhead.extra.length) {\n        s.gzindex = 0;\n        s.status = NAME_STATE;\n      }\n    }\n    else {\n      s.status = NAME_STATE;\n    }\n  }\n  if (s.status === NAME_STATE) {\n    if (s.gzhead.name/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.name.length) {\n          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.gzindex = 0;\n        s.status = COMMENT_STATE;\n      }\n    }\n    else {\n      s.status = COMMENT_STATE;\n    }\n  }\n  if (s.status === COMMENT_STATE) {\n    if (s.gzhead.comment/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.comment.length) {\n          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.status = HCRC_STATE;\n      }\n    }\n    else {\n      s.status = HCRC_STATE;\n    }\n  }\n  if (s.status === HCRC_STATE) {\n    if (s.gzhead.hcrc) {\n      if (s.pending + 2 > s.pending_buf_size) {\n        flush_pending(strm);\n      }\n      if (s.pending + 2 <= s.pending_buf_size) {\n        put_byte(s, strm.adler & 0xff);\n        put_byte(s, (strm.adler >> 8) & 0xff);\n        strm.adler = 0; //crc32(0L, Z_NULL, 0);\n        s.status = BUSY_STATE;\n      }\n    }\n    else {\n      s.status = BUSY_STATE;\n    }\n  }\n//#endif\n\n  /* Flush as much pending output as possible */\n  if (s.pending !== 0) {\n    flush_pending(strm);\n    if (strm.avail_out === 0) {\n      /* Since avail_out is 0, deflate will be called again with\n       * more output space, but possibly with both pending and\n       * avail_in equal to zero. There won't be anything to do,\n       * but this is not an error situation so make sure we\n       * return OK instead of BUF_ERROR at next call of deflate:\n       */\n      s.last_flush = -1;\n      return Z_OK;\n    }\n\n    /* Make sure there is something to do and avoid duplicate consecutive\n     * flushes. For repeated and useless calls with Z_FINISH, we keep\n     * returning Z_STREAM_END instead of Z_BUF_ERROR.\n     */\n  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&\n    flush !== Z_FINISH) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* User must not provide more input after the first FINISH: */\n  if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* Start a new block or continue the current one.\n   */\n  if (strm.avail_in !== 0 || s.lookahead !== 0 ||\n    (flush !== Z_NO_FLUSH && s.status !== FINISH_STATE)) {\n    var bstate = (s.strategy === Z_HUFFMAN_ONLY) ? deflate_huff(s, flush) :\n      (s.strategy === Z_RLE ? deflate_rle(s, flush) :\n        configuration_table[s.level].func(s, flush));\n\n    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n      s.status = FINISH_STATE;\n    }\n    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n      if (strm.avail_out === 0) {\n        s.last_flush = -1;\n        /* avoid BUF_ERROR next call, see above */\n      }\n      return Z_OK;\n      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n       * of deflate should use the same flush parameter to make sure\n       * that the flush is complete. So we don't have to output an\n       * empty block here, this will be done at next call. This also\n       * ensures that for a very small output buffer, we emit at most\n       * one empty block.\n       */\n    }\n    if (bstate === BS_BLOCK_DONE) {\n      if (flush === Z_PARTIAL_FLUSH) {\n        trees._tr_align(s);\n      }\n      else if (flush !== Z_BLOCK) { /* FULL_FLUSH or SYNC_FLUSH */\n\n        trees._tr_stored_block(s, 0, 0, false);\n        /* For a full flush, this empty block will be recognized\n         * as a special marker by inflate_sync().\n         */\n        if (flush === Z_FULL_FLUSH) {\n          /*** CLEAR_HASH(s); ***/             /* forget history */\n          zero(s.head); // Fill with NIL (= 0);\n\n          if (s.lookahead === 0) {\n            s.strstart = 0;\n            s.block_start = 0;\n            s.insert = 0;\n          }\n        }\n      }\n      flush_pending(strm);\n      if (strm.avail_out === 0) {\n        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */\n        return Z_OK;\n      }\n    }\n  }\n  //Assert(strm->avail_out > 0, \"bug2\");\n  //if (strm.avail_out <= 0) { throw new Error(\"bug2\");}\n\n  if (flush !== Z_FINISH) { return Z_OK; }\n  if (s.wrap <= 0) { return Z_STREAM_END; }\n\n  /* Write the trailer */\n  if (s.wrap === 2) {\n    put_byte(s, strm.adler & 0xff);\n    put_byte(s, (strm.adler >> 8) & 0xff);\n    put_byte(s, (strm.adler >> 16) & 0xff);\n    put_byte(s, (strm.adler >> 24) & 0xff);\n    put_byte(s, strm.total_in & 0xff);\n    put_byte(s, (strm.total_in >> 8) & 0xff);\n    put_byte(s, (strm.total_in >> 16) & 0xff);\n    put_byte(s, (strm.total_in >> 24) & 0xff);\n  }\n  else\n  {\n    putShortMSB(s, strm.adler >>> 16);\n    putShortMSB(s, strm.adler & 0xffff);\n  }\n\n  flush_pending(strm);\n  /* If avail_out is zero, the application will call deflate again\n   * to flush the rest.\n   */\n  if (s.wrap > 0) { s.wrap = -s.wrap; }\n  /* write the trailer only once! */\n  return s.pending !== 0 ? Z_OK : Z_STREAM_END;\n}\n\nfunction deflateEnd(strm) {\n  var status;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  status = strm.state.status;\n  if (status !== INIT_STATE &&\n    status !== EXTRA_STATE &&\n    status !== NAME_STATE &&\n    status !== COMMENT_STATE &&\n    status !== HCRC_STATE &&\n    status !== BUSY_STATE &&\n    status !== FINISH_STATE\n  ) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.state = null;\n\n  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR) : Z_OK;\n}\n\n\n/* =========================================================================\n * Initializes the compression dictionary from the given byte\n * sequence without producing any compressed output.\n */\nfunction deflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var s;\n  var str, n;\n  var wrap;\n  var avail;\n  var next;\n  var input;\n  var tmpDict;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n  wrap = s.wrap;\n\n  if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n  if (wrap === 1) {\n    /* adler32(strm->adler, dictionary, dictLength); */\n    strm.adler = adler32(strm.adler, dictionary, dictLength, 0);\n  }\n\n  s.wrap = 0;   /* avoid computing Adler-32 in read_buf */\n\n  /* if dictionary would fill window, just replace the history */\n  if (dictLength >= s.w_size) {\n    if (wrap === 0) {            /* already empty otherwise */\n      /*** CLEAR_HASH(s); ***/\n      zero(s.head); // Fill with NIL (= 0);\n      s.strstart = 0;\n      s.block_start = 0;\n      s.insert = 0;\n    }\n    /* use the tail */\n    // dictionary = dictionary.slice(dictLength - s.w_size);\n    tmpDict = new utils.Buf8(s.w_size);\n    utils.arraySet(tmpDict, dictionary, dictLength - s.w_size, s.w_size, 0);\n    dictionary = tmpDict;\n    dictLength = s.w_size;\n  }\n  /* insert dictionary into window and hash */\n  avail = strm.avail_in;\n  next = strm.next_in;\n  input = strm.input;\n  strm.avail_in = dictLength;\n  strm.next_in = 0;\n  strm.input = dictionary;\n  fill_window(s);\n  while (s.lookahead >= MIN_MATCH) {\n    str = s.strstart;\n    n = s.lookahead - (MIN_MATCH - 1);\n    do {\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n      s.prev[str & s.w_mask] = s.head[s.ins_h];\n\n      s.head[s.ins_h] = str;\n      str++;\n    } while (--n);\n    s.strstart = str;\n    s.lookahead = MIN_MATCH - 1;\n    fill_window(s);\n  }\n  s.strstart += s.lookahead;\n  s.block_start = s.strstart;\n  s.insert = s.lookahead;\n  s.lookahead = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  strm.next_in = next;\n  strm.input = input;\n  strm.avail_in = avail;\n  s.wrap = wrap;\n  return Z_OK;\n}\n\n\nexports.deflateInit = deflateInit;\nexports.deflateInit2 = deflateInit2;\nexports.deflateReset = deflateReset;\nexports.deflateResetKeep = deflateResetKeep;\nexports.deflateSetHeader = deflateSetHeader;\nexports.deflate = deflate;\nexports.deflateEnd = deflateEnd;\nexports.deflateSetDictionary = deflateSetDictionary;\nexports.deflateInfo = 'pako deflate (from Nodeca project)';\n\n/* Not implemented\nexports.deflateBound = deflateBound;\nexports.deflateCopy = deflateCopy;\nexports.deflateParams = deflateParams;\nexports.deflatePending = deflatePending;\nexports.deflatePrime = deflatePrime;\nexports.deflateTune = deflateTune;\n*/\n\n},{\"../utils/common\":41,\"./adler32\":43,\"./crc32\":45,\"./messages\":51,\"./trees\":52}],47:[function(require,module,exports){\n'use strict';\n\n\nfunction GZheader() {\n  /* true if compressed data believed to be text */\n  this.text       = 0;\n  /* modification time */\n  this.time       = 0;\n  /* extra flags (not used when writing a gzip file) */\n  this.xflags     = 0;\n  /* operating system */\n  this.os         = 0;\n  /* pointer to extra field or Z_NULL if none */\n  this.extra      = null;\n  /* extra field length (valid if extra != Z_NULL) */\n  this.extra_len  = 0; // Actually, we don't need it in JS,\n                       // but leave for few code modifications\n\n  //\n  // Setup limits is not necessary because in js we should not preallocate memory\n  // for inflate use constant limit in 65536 bytes\n  //\n\n  /* space at extra (only when reading header) */\n  // this.extra_max  = 0;\n  /* pointer to zero-terminated file name or Z_NULL */\n  this.name       = '';\n  /* space at name (only when reading header) */\n  // this.name_max   = 0;\n  /* pointer to zero-terminated comment or Z_NULL */\n  this.comment    = '';\n  /* space at comment (only when reading header) */\n  // this.comm_max   = 0;\n  /* true if there was or will be a header crc */\n  this.hcrc       = 0;\n  /* true when done reading gzip header (not used when writing a gzip file) */\n  this.done       = false;\n}\n\nmodule.exports = GZheader;\n\n},{}],48:[function(require,module,exports){\n'use strict';\n\n// See state defs from inflate.js\nvar BAD = 30;       /* got a data error -- remain here until reset */\nvar TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\n\n/*\n   Decode literal, length, and distance codes and write out the resulting\n   literal and match bytes until either not enough input or output is\n   available, an end-of-block is encountered, or a data error is encountered.\n   When large enough input and output buffers are supplied to inflate(), for\n   example, a 16K input buffer and a 64K output buffer, more than 95% of the\n   inflate execution time is spent in this routine.\n\n   Entry assumptions:\n\n        state.mode === LEN\n        strm.avail_in >= 6\n        strm.avail_out >= 258\n        start >= strm.avail_out\n        state.bits < 8\n\n   On return, state.mode is one of:\n\n        LEN -- ran out of enough output space or enough available input\n        TYPE -- reached end of block code, inflate() to interpret next block\n        BAD -- error in block data\n\n   Notes:\n\n    - The maximum input bits used by a length/distance pair is 15 bits for the\n      length code, 5 bits for the length extra, 15 bits for the distance code,\n      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\n      Therefore if strm.avail_in >= 6, then there is enough input to avoid\n      checking for available input while decoding.\n\n    - The maximum bytes that a single length/distance pair can output is 258\n      bytes, which is the maximum length that can be coded.  inflate_fast()\n      requires strm.avail_out >= 258 for each loop to avoid checking for\n      output space.\n */\nmodule.exports = function inflate_fast(strm, start) {\n  var state;\n  var _in;                    /* local strm.input */\n  var last;                   /* have enough input while in < last */\n  var _out;                   /* local strm.output */\n  var beg;                    /* inflate()'s initial strm.output */\n  var end;                    /* while out < end, enough space available */\n//#ifdef INFLATE_STRICT\n  var dmax;                   /* maximum distance from zlib header */\n//#endif\n  var wsize;                  /* window size or zero if not using window */\n  var whave;                  /* valid bytes in the window */\n  var wnext;                  /* window write index */\n  // Use `s_window` instead `window`, avoid conflict with instrumentation tools\n  var s_window;               /* allocated sliding window, if wsize != 0 */\n  var hold;                   /* local strm.hold */\n  var bits;                   /* local strm.bits */\n  var lcode;                  /* local strm.lencode */\n  var dcode;                  /* local strm.distcode */\n  var lmask;                  /* mask for first level of length codes */\n  var dmask;                  /* mask for first level of distance codes */\n  var here;                   /* retrieved table entry */\n  var op;                     /* code bits, operation, extra bits, or */\n                              /*  window position, window bytes to copy */\n  var len;                    /* match length, unused bytes */\n  var dist;                   /* match distance */\n  var from;                   /* where to copy match from */\n  var from_source;\n\n\n  var input, output; // JS specific, because we have no pointers\n\n  /* copy state to local variables */\n  state = strm.state;\n  //here = state.here;\n  _in = strm.next_in;\n  input = strm.input;\n  last = _in + (strm.avail_in - 5);\n  _out = strm.next_out;\n  output = strm.output;\n  beg = _out - (start - strm.avail_out);\n  end = _out + (strm.avail_out - 257);\n//#ifdef INFLATE_STRICT\n  dmax = state.dmax;\n//#endif\n  wsize = state.wsize;\n  whave = state.whave;\n  wnext = state.wnext;\n  s_window = state.window;\n  hold = state.hold;\n  bits = state.bits;\n  lcode = state.lencode;\n  dcode = state.distcode;\n  lmask = (1 << state.lenbits) - 1;\n  dmask = (1 << state.distbits) - 1;\n\n\n  /* decode literals and length/distances until end-of-block or not enough\n     input data or output space */\n\n  top:\n  do {\n    if (bits < 15) {\n      hold += input[_in++] << bits;\n      bits += 8;\n      hold += input[_in++] << bits;\n      bits += 8;\n    }\n\n    here = lcode[hold & lmask];\n\n    dolen:\n    for (;;) { // Goto emulation\n      op = here >>> 24/*here.bits*/;\n      hold >>>= op;\n      bits -= op;\n      op = (here >>> 16) & 0xff/*here.op*/;\n      if (op === 0) {                          /* literal */\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n        //        \"inflate:         literal '%c'\\n\" :\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\n        output[_out++] = here & 0xffff/*here.val*/;\n      }\n      else if (op & 16) {                     /* length base */\n        len = here & 0xffff/*here.val*/;\n        op &= 15;                           /* number of extra bits */\n        if (op) {\n          if (bits < op) {\n            hold += input[_in++] << bits;\n            bits += 8;\n          }\n          len += hold & ((1 << op) - 1);\n          hold >>>= op;\n          bits -= op;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", len));\n        if (bits < 15) {\n          hold += input[_in++] << bits;\n          bits += 8;\n          hold += input[_in++] << bits;\n          bits += 8;\n        }\n        here = dcode[hold & dmask];\n\n        dodist:\n        for (;;) { // goto emulation\n          op = here >>> 24/*here.bits*/;\n          hold >>>= op;\n          bits -= op;\n          op = (here >>> 16) & 0xff/*here.op*/;\n\n          if (op & 16) {                      /* distance base */\n            dist = here & 0xffff/*here.val*/;\n            op &= 15;                       /* number of extra bits */\n            if (bits < op) {\n              hold += input[_in++] << bits;\n              bits += 8;\n              if (bits < op) {\n                hold += input[_in++] << bits;\n                bits += 8;\n              }\n            }\n            dist += hold & ((1 << op) - 1);\n//#ifdef INFLATE_STRICT\n            if (dist > dmax) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break top;\n            }\n//#endif\n            hold >>>= op;\n            bits -= op;\n            //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\n            op = _out - beg;                /* max distance in output */\n            if (dist > op) {                /* see if copy from window */\n              op = dist - op;               /* distance back in window */\n              if (op > whave) {\n                if (state.sane) {\n                  strm.msg = 'invalid distance too far back';\n                  state.mode = BAD;\n                  break top;\n                }\n\n// (!) This block is disabled in zlib defailts,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//                if (len <= op - whave) {\n//                  do {\n//                    output[_out++] = 0;\n//                  } while (--len);\n//                  continue top;\n//                }\n//                len -= op - whave;\n//                do {\n//                  output[_out++] = 0;\n//                } while (--op > whave);\n//                if (op === 0) {\n//                  from = _out - dist;\n//                  do {\n//                    output[_out++] = output[from++];\n//                  } while (--len);\n//                  continue top;\n//                }\n//#endif\n              }\n              from = 0; // window index\n              from_source = s_window;\n              if (wnext === 0) {           /* very common case */\n                from += wsize - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              else if (wnext < op) {      /* wrap around window */\n                from += wsize + wnext - op;\n                op -= wnext;\n                if (op < len) {         /* some from end of window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = 0;\n                  if (wnext < len) {  /* some from start of window */\n                    op = wnext;\n                    len -= op;\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n                    from = _out - dist;      /* rest from output */\n                    from_source = output;\n                  }\n                }\n              }\n              else {                      /* contiguous in window */\n                from += wnext - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              while (len > 2) {\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                len -= 3;\n              }\n              if (len) {\n                output[_out++] = from_source[from++];\n                if (len > 1) {\n                  output[_out++] = from_source[from++];\n                }\n              }\n            }\n            else {\n              from = _out - dist;          /* copy direct from output */\n              do {                        /* minimum length is three */\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                len -= 3;\n              } while (len > 2);\n              if (len) {\n                output[_out++] = output[from++];\n                if (len > 1) {\n                  output[_out++] = output[from++];\n                }\n              }\n            }\n          }\n          else if ((op & 64) === 0) {          /* 2nd level distance code */\n            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n            continue dodist;\n          }\n          else {\n            strm.msg = 'invalid distance code';\n            state.mode = BAD;\n            break top;\n          }\n\n          break; // need to emulate goto via \"continue\"\n        }\n      }\n      else if ((op & 64) === 0) {              /* 2nd level length code */\n        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n        continue dolen;\n      }\n      else if (op & 32) {                     /* end-of-block */\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\n        state.mode = TYPE;\n        break top;\n      }\n      else {\n        strm.msg = 'invalid literal/length code';\n        state.mode = BAD;\n        break top;\n      }\n\n      break; // need to emulate goto via \"continue\"\n    }\n  } while (_in < last && _out < end);\n\n  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\n  len = bits >> 3;\n  _in -= len;\n  bits -= len << 3;\n  hold &= (1 << bits) - 1;\n\n  /* update state and return */\n  strm.next_in = _in;\n  strm.next_out = _out;\n  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));\n  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));\n  state.hold = hold;\n  state.bits = bits;\n  return;\n};\n\n},{}],49:[function(require,module,exports){\n'use strict';\n\n\nvar utils         = require('../utils/common');\nvar adler32       = require('./adler32');\nvar crc32         = require('./crc32');\nvar inflate_fast  = require('./inffast');\nvar inflate_table = require('./inftrees');\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\n//var Z_NO_FLUSH      = 0;\n//var Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\n//var Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\nvar Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\nvar Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n\n/* STATES ====================================================================*/\n/* ===========================================================================*/\n\n\nvar    HEAD = 1;       /* i: waiting for magic header */\nvar    FLAGS = 2;      /* i: waiting for method and flags (gzip) */\nvar    TIME = 3;       /* i: waiting for modification time (gzip) */\nvar    OS = 4;         /* i: waiting for extra flags and operating system (gzip) */\nvar    EXLEN = 5;      /* i: waiting for extra length (gzip) */\nvar    EXTRA = 6;      /* i: waiting for extra bytes (gzip) */\nvar    NAME = 7;       /* i: waiting for end of file name (gzip) */\nvar    COMMENT = 8;    /* i: waiting for end of comment (gzip) */\nvar    HCRC = 9;       /* i: waiting for header crc (gzip) */\nvar    DICTID = 10;    /* i: waiting for dictionary check value */\nvar    DICT = 11;      /* waiting for inflateSetDictionary() call */\nvar        TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\nvar        TYPEDO = 13;    /* i: same, but skip check to exit inflate on new block */\nvar        STORED = 14;    /* i: waiting for stored size (length and complement) */\nvar        COPY_ = 15;     /* i/o: same as COPY below, but only first time in */\nvar        COPY = 16;      /* i/o: waiting for input or output to copy stored block */\nvar        TABLE = 17;     /* i: waiting for dynamic block table lengths */\nvar        LENLENS = 18;   /* i: waiting for code length code lengths */\nvar        CODELENS = 19;  /* i: waiting for length/lit and distance code lengths */\nvar            LEN_ = 20;      /* i: same as LEN below, but only first time in */\nvar            LEN = 21;       /* i: waiting for length/lit/eob code */\nvar            LENEXT = 22;    /* i: waiting for length extra bits */\nvar            DIST = 23;      /* i: waiting for distance code */\nvar            DISTEXT = 24;   /* i: waiting for distance extra bits */\nvar            MATCH = 25;     /* o: waiting for output space to copy string */\nvar            LIT = 26;       /* o: waiting for output space to write literal */\nvar    CHECK = 27;     /* i: waiting for 32-bit check value */\nvar    LENGTH = 28;    /* i: waiting for 32-bit length (gzip) */\nvar    DONE = 29;      /* finished check, done -- remain here until reset */\nvar    BAD = 30;       /* got a data error -- remain here until reset */\nvar    MEM = 31;       /* got an inflate() memory error -- remain here until reset */\nvar    SYNC = 32;      /* looking for synchronization bytes to restart inflate() */\n\n/* ===========================================================================*/\n\n\n\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_WBITS = MAX_WBITS;\n\n\nfunction zswap32(q) {\n  return  (((q >>> 24) & 0xff) +\n          ((q >>> 8) & 0xff00) +\n          ((q & 0xff00) << 8) +\n          ((q & 0xff) << 24));\n}\n\n\nfunction InflateState() {\n  this.mode = 0;             /* current inflate mode */\n  this.last = false;          /* true if processing last block */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.havedict = false;      /* true if dictionary provided */\n  this.flags = 0;             /* gzip header method and flags (0 if zlib) */\n  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */\n  this.check = 0;             /* protected copy of check value */\n  this.total = 0;             /* protected copy of output count */\n  // TODO: may be {}\n  this.head = null;           /* where to save gzip header information */\n\n  /* sliding window */\n  this.wbits = 0;             /* log base 2 of requested window size */\n  this.wsize = 0;             /* window size or zero if not using window */\n  this.whave = 0;             /* valid bytes in the window */\n  this.wnext = 0;             /* window write index */\n  this.window = null;         /* allocated sliding window, if needed */\n\n  /* bit accumulator */\n  this.hold = 0;              /* input bit accumulator */\n  this.bits = 0;              /* number of bits in \"in\" */\n\n  /* for string and stored block copying */\n  this.length = 0;            /* literal or length of data to copy */\n  this.offset = 0;            /* distance back to copy string from */\n\n  /* for table and code decoding */\n  this.extra = 0;             /* extra bits needed */\n\n  /* fixed and dynamic code tables */\n  this.lencode = null;          /* starting table for length/literal codes */\n  this.distcode = null;         /* starting table for distance codes */\n  this.lenbits = 0;           /* index bits for lencode */\n  this.distbits = 0;          /* index bits for distcode */\n\n  /* dynamic table building */\n  this.ncode = 0;             /* number of code length code lengths */\n  this.nlen = 0;              /* number of length code lengths */\n  this.ndist = 0;             /* number of distance code lengths */\n  this.have = 0;              /* number of code lengths in lens[] */\n  this.next = null;              /* next available space in codes[] */\n\n  this.lens = new utils.Buf16(320); /* temporary storage for code lengths */\n  this.work = new utils.Buf16(288); /* work area for code table building */\n\n  /*\n   because we don't have pointers in js, we use lencode and distcode directly\n   as buffers so we don't need codes\n  */\n  //this.codes = new utils.Buf32(ENOUGH);       /* space for code tables */\n  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */\n  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */\n  this.sane = 0;                   /* if false, allow invalid distance too far */\n  this.back = 0;                   /* bits back of last unprocessed length/lit */\n  this.was = 0;                    /* initial length of match */\n}\n\nfunction inflateResetKeep(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  strm.total_in = strm.total_out = state.total = 0;\n  strm.msg = ''; /*Z_NULL*/\n  if (state.wrap) {       /* to support ill-conceived Java test suite */\n    strm.adler = state.wrap & 1;\n  }\n  state.mode = HEAD;\n  state.last = 0;\n  state.havedict = 0;\n  state.dmax = 32768;\n  state.head = null/*Z_NULL*/;\n  state.hold = 0;\n  state.bits = 0;\n  //state.lencode = state.distcode = state.next = state.codes;\n  state.lencode = state.lendyn = new utils.Buf32(ENOUGH_LENS);\n  state.distcode = state.distdyn = new utils.Buf32(ENOUGH_DISTS);\n\n  state.sane = 1;\n  state.back = -1;\n  //Tracev((stderr, \"inflate: reset\\n\"));\n  return Z_OK;\n}\n\nfunction inflateReset(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  state.wsize = 0;\n  state.whave = 0;\n  state.wnext = 0;\n  return inflateResetKeep(strm);\n\n}\n\nfunction inflateReset2(strm, windowBits) {\n  var wrap;\n  var state;\n\n  /* get the state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  /* extract wrap request from windowBits parameter */\n  if (windowBits < 0) {\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n  else {\n    wrap = (windowBits >> 4) + 1;\n    if (windowBits < 48) {\n      windowBits &= 15;\n    }\n  }\n\n  /* set number of window bits, free window if different */\n  if (windowBits && (windowBits < 8 || windowBits > 15)) {\n    return Z_STREAM_ERROR;\n  }\n  if (state.window !== null && state.wbits !== windowBits) {\n    state.window = null;\n  }\n\n  /* update state and reset the rest of it */\n  state.wrap = wrap;\n  state.wbits = windowBits;\n  return inflateReset(strm);\n}\n\nfunction inflateInit2(strm, windowBits) {\n  var ret;\n  var state;\n\n  if (!strm) { return Z_STREAM_ERROR; }\n  //strm.msg = Z_NULL;                 /* in case we return an error */\n\n  state = new InflateState();\n\n  //if (state === Z_NULL) return Z_MEM_ERROR;\n  //Tracev((stderr, \"inflate: allocated\\n\"));\n  strm.state = state;\n  state.window = null/*Z_NULL*/;\n  ret = inflateReset2(strm, windowBits);\n  if (ret !== Z_OK) {\n    strm.state = null/*Z_NULL*/;\n  }\n  return ret;\n}\n\nfunction inflateInit(strm) {\n  return inflateInit2(strm, DEF_WBITS);\n}\n\n\n/*\n Return state with length and distance decoding tables and index sizes set to\n fixed code decoding.  Normally this returns fixed tables from inffixed.h.\n If BUILDFIXED is defined, then instead this routine builds the tables the\n first time it's called, and returns those tables the first time and\n thereafter.  This reduces the size of the code by about 2K bytes, in\n exchange for a little execution time.  However, BUILDFIXED should not be\n used for threaded applications, since the rewriting of the tables and virgin\n may not be thread-safe.\n */\nvar virgin = true;\n\nvar lenfix, distfix; // We have no pointers in JS, so keep tables separate\n\nfunction fixedtables(state) {\n  /* build fixed huffman tables if first call (may not be thread safe) */\n  if (virgin) {\n    var sym;\n\n    lenfix = new utils.Buf32(512);\n    distfix = new utils.Buf32(32);\n\n    /* literal/length table */\n    sym = 0;\n    while (sym < 144) { state.lens[sym++] = 8; }\n    while (sym < 256) { state.lens[sym++] = 9; }\n    while (sym < 280) { state.lens[sym++] = 7; }\n    while (sym < 288) { state.lens[sym++] = 8; }\n\n    inflate_table(LENS,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });\n\n    /* distance table */\n    sym = 0;\n    while (sym < 32) { state.lens[sym++] = 5; }\n\n    inflate_table(DISTS, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });\n\n    /* do this just once */\n    virgin = false;\n  }\n\n  state.lencode = lenfix;\n  state.lenbits = 9;\n  state.distcode = distfix;\n  state.distbits = 5;\n}\n\n\n/*\n Update the window with the last wsize (normally 32K) bytes written before\n returning.  If window does not exist yet, create it.  This is only called\n when a window is already in use, or when output has been written during this\n inflate call, but the end of the deflate stream has not been reached yet.\n It is also called to create a window for dictionary data when a dictionary\n is loaded.\n\n Providing output buffers larger than 32K to inflate() should provide a speed\n advantage, since only the last 32K of output is copied to the sliding window\n upon return from inflate(), and since all distances after the first 32K of\n output will fall in the output data, making match copies simpler and faster.\n The advantage may be dependent on the size of the processor's data caches.\n */\nfunction updatewindow(strm, src, end, copy) {\n  var dist;\n  var state = strm.state;\n\n  /* if it hasn't been done already, allocate space for the window */\n  if (state.window === null) {\n    state.wsize = 1 << state.wbits;\n    state.wnext = 0;\n    state.whave = 0;\n\n    state.window = new utils.Buf8(state.wsize);\n  }\n\n  /* copy state->wsize or less output bytes into the circular window */\n  if (copy >= state.wsize) {\n    utils.arraySet(state.window, src, end - state.wsize, state.wsize, 0);\n    state.wnext = 0;\n    state.whave = state.wsize;\n  }\n  else {\n    dist = state.wsize - state.wnext;\n    if (dist > copy) {\n      dist = copy;\n    }\n    //zmemcpy(state->window + state->wnext, end - copy, dist);\n    utils.arraySet(state.window, src, end - copy, dist, state.wnext);\n    copy -= dist;\n    if (copy) {\n      //zmemcpy(state->window, end - copy, copy);\n      utils.arraySet(state.window, src, end - copy, copy, 0);\n      state.wnext = copy;\n      state.whave = state.wsize;\n    }\n    else {\n      state.wnext += dist;\n      if (state.wnext === state.wsize) { state.wnext = 0; }\n      if (state.whave < state.wsize) { state.whave += dist; }\n    }\n  }\n  return 0;\n}\n\nfunction inflate(strm, flush) {\n  var state;\n  var input, output;          // input/output buffers\n  var next;                   /* next input INDEX */\n  var put;                    /* next output INDEX */\n  var have, left;             /* available input and output */\n  var hold;                   /* bit buffer */\n  var bits;                   /* bits in bit buffer */\n  var _in, _out;              /* save starting available input and output */\n  var copy;                   /* number of stored or match bytes to copy */\n  var from;                   /* where to copy match bytes from */\n  var from_source;\n  var here = 0;               /* current decoding table entry */\n  var here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\n  //var last;                   /* parent table entry */\n  var last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\n  var len;                    /* length to copy for repeats, bits to drop */\n  var ret;                    /* return code */\n  var hbuf = new utils.Buf8(4);    /* buffer for gzip header crc calculation */\n  var opts;\n\n  var n; // temporary var for NEED_BITS\n\n  var order = /* permutation of code lengths */\n    [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ];\n\n\n  if (!strm || !strm.state || !strm.output ||\n      (!strm.input && strm.avail_in !== 0)) {\n    return Z_STREAM_ERROR;\n  }\n\n  state = strm.state;\n  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */\n\n\n  //--- LOAD() ---\n  put = strm.next_out;\n  output = strm.output;\n  left = strm.avail_out;\n  next = strm.next_in;\n  input = strm.input;\n  have = strm.avail_in;\n  hold = state.hold;\n  bits = state.bits;\n  //---\n\n  _in = have;\n  _out = left;\n  ret = Z_OK;\n\n  inf_leave: // goto emulation\n  for (;;) {\n    switch (state.mode) {\n    case HEAD:\n      if (state.wrap === 0) {\n        state.mode = TYPEDO;\n        break;\n      }\n      //=== NEEDBITS(16);\n      while (bits < 16) {\n        if (have === 0) { break inf_leave; }\n        have--;\n        hold += input[next++] << bits;\n        bits += 8;\n      }\n      //===//\n      if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */\n        state.check = 0/*crc32(0L, Z_NULL, 0)*/;\n        //=== CRC2(state.check, hold);\n        hbuf[0] = hold & 0xff;\n        hbuf[1] = (hold >>> 8) & 0xff;\n        state.check = crc32(state.check, hbuf, 2, 0);\n        //===//\n\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = FLAGS;\n        break;\n      }\n      state.flags = 0;           /* expect zlib header */\n      if (state.head) {\n        state.head.done = false;\n      }\n      if (!(state.wrap & 1) ||   /* check if zlib header allowed */\n        (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {\n        strm.msg = 'incorrect header check';\n        state.mode = BAD;\n        break;\n      }\n      if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {\n        strm.msg = 'unknown compression method';\n        state.mode = BAD;\n        break;\n      }\n      //--- DROPBITS(4) ---//\n      hold >>>= 4;\n      bits -= 4;\n      //---//\n      len = (hold & 0x0f)/*BITS(4)*/ + 8;\n      if (state.wbits === 0) {\n        state.wbits = len;\n      }\n      else if (len > state.wbits) {\n        strm.msg = 'invalid window size';\n        state.mode = BAD;\n        break;\n      }\n      state.dmax = 1 << len;\n      //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\n      strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n      state.mode = hold & 0x200 ? DICTID : TYPE;\n      //=== INITBITS();\n      hold = 0;\n      bits = 0;\n      //===//\n      break;\n    case FLAGS:\n      //=== NEEDBITS(16); */\n      while (bits < 16) {\n        if (have === 0) { break inf_leave; }\n        have--;\n        hold += input[next++] << bits;\n        bits += 8;\n      }\n      //===//\n      state.flags = hold;\n      if ((state.flags & 0xff) !== Z_DEFLATED) {\n        strm.msg = 'unknown compression method';\n        state.mode = BAD;\n        break;\n      }\n      if (state.flags & 0xe000) {\n        strm.msg = 'unknown header flags set';\n        state.mode = BAD;\n        break;\n      }\n      if (state.head) {\n        state.head.text = ((hold >> 8) & 1);\n      }\n      if (state.flags & 0x0200) {\n        //=== CRC2(state.check, hold);\n        hbuf[0] = hold & 0xff;\n        hbuf[1] = (hold >>> 8) & 0xff;\n        state.check = crc32(state.check, hbuf, 2, 0);\n        //===//\n      }\n      //=== INITBITS();\n      hold = 0;\n      bits = 0;\n      //===//\n      state.mode = TIME;\n      /* falls through */\n    case TIME:\n      //=== NEEDBITS(32); */\n      while (bits < 32) {\n        if (have === 0) { break inf_leave; }\n        have--;\n        hold += input[next++] << bits;\n        bits += 8;\n      }\n      //===//\n      if (state.head) {\n        state.head.time = hold;\n      }\n      if (state.flags & 0x0200) {\n        //=== CRC4(state.check, hold)\n        hbuf[0] = hold & 0xff;\n        hbuf[1] = (hold >>> 8) & 0xff;\n        hbuf[2] = (hold >>> 16) & 0xff;\n        hbuf[3] = (hold >>> 24) & 0xff;\n        state.check = crc32(state.check, hbuf, 4, 0);\n        //===\n      }\n      //=== INITBITS();\n      hold = 0;\n      bits = 0;\n      //===//\n      state.mode = OS;\n      /* falls through */\n    case OS:\n      //=== NEEDBITS(16); */\n      while (bits < 16) {\n        if (have === 0) { break inf_leave; }\n        have--;\n        hold += input[next++] << bits;\n        bits += 8;\n      }\n      //===//\n      if (state.head) {\n        state.head.xflags = (hold & 0xff);\n        state.head.os = (hold >> 8);\n      }\n      if (state.flags & 0x0200) {\n        //=== CRC2(state.check, hold);\n        hbuf[0] = hold & 0xff;\n        hbuf[1] = (hold >>> 8) & 0xff;\n        state.check = crc32(state.check, hbuf, 2, 0);\n        //===//\n      }\n      //=== INITBITS();\n      hold = 0;\n      bits = 0;\n      //===//\n      state.mode = EXLEN;\n      /* falls through */\n    case EXLEN:\n      if (state.flags & 0x0400) {\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.length = hold;\n        if (state.head) {\n          state.head.extra_len = hold;\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n      }\n      else if (state.head) {\n        state.head.extra = null/*Z_NULL*/;\n      }\n      state.mode = EXTRA;\n      /* falls through */\n    case EXTRA:\n      if (state.flags & 0x0400) {\n        copy = state.length;\n        if (copy > have) { copy = have; }\n        if (copy) {\n          if (state.head) {\n            len = state.head.extra_len - state.length;\n            if (!state.head.extra) {\n              // Use untyped array for more conveniend processing later\n              state.head.extra = new Array(state.head.extra_len);\n            }\n            utils.arraySet(\n              state.head.extra,\n              input,\n              next,\n              // extra field is limited to 65536 bytes\n              // - no need for additional size check\n              copy,\n              /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\n              len\n            );\n            //zmemcpy(state.head.extra + len, next,\n            //        len + copy > state.head.extra_max ?\n            //        state.head.extra_max - len : copy);\n          }\n          if (state.flags & 0x0200) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          state.length -= copy;\n        }\n        if (state.length) { break inf_leave; }\n      }\n      state.length = 0;\n      state.mode = NAME;\n      /* falls through */\n    case NAME:\n      if (state.flags & 0x0800) {\n        if (have === 0) { break inf_leave; }\n        copy = 0;\n        do {\n          // TODO: 2 or 1 bytes?\n          len = input[next + copy++];\n          /* use constant limit because in js we should not preallocate memory */\n          if (state.head && len &&\n              (state.length < 65536 /*state.head.name_max*/)) {\n            state.head.name += String.fromCharCode(len);\n          }\n        } while (len && copy < have);\n\n        if (state.flags & 0x0200) {\n          state.check = crc32(state.check, input, copy, next);\n        }\n        have -= copy;\n        next += copy;\n        if (len) { break inf_leave; }\n      }\n      else if (state.head) {\n        state.head.name = null;\n      }\n      state.length = 0;\n      state.mode = COMMENT;\n      /* falls through */\n    case COMMENT:\n      if (state.flags & 0x1000) {\n        if (have === 0) { break inf_leave; }\n        copy = 0;\n        do {\n          len = input[next + copy++];\n          /* use constant limit because in js we should not preallocate memory */\n          if (state.head && len &&\n              (state.length < 65536 /*state.head.comm_max*/)) {\n            state.head.comment += String.fromCharCode(len);\n          }\n        } while (len && copy < have);\n        if (state.flags & 0x0200) {\n          state.check = crc32(state.check, input, copy, next);\n        }\n        have -= copy;\n        next += copy;\n        if (len) { break inf_leave; }\n      }\n      else if (state.head) {\n        state.head.comment = null;\n      }\n      state.mode = HCRC;\n      /* falls through */\n    case HCRC:\n      if (state.flags & 0x0200) {\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (hold !== (state.check & 0xffff)) {\n          strm.msg = 'header crc mismatch';\n          state.mode = BAD;\n          break;\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n      }\n      if (state.head) {\n        state.head.hcrc = ((state.flags >> 9) & 1);\n        state.head.done = true;\n      }\n      strm.adler = state.check = 0;\n      state.mode = TYPE;\n      break;\n    case DICTID:\n      //=== NEEDBITS(32); */\n      while (bits < 32) {\n        if (have === 0) { break inf_leave; }\n        have--;\n        hold += input[next++] << bits;\n        bits += 8;\n      }\n      //===//\n      strm.adler = state.check = zswap32(hold);\n      //=== INITBITS();\n      hold = 0;\n      bits = 0;\n      //===//\n      state.mode = DICT;\n      /* falls through */\n    case DICT:\n      if (state.havedict === 0) {\n        //--- RESTORE() ---\n        strm.next_out = put;\n        strm.avail_out = left;\n        strm.next_in = next;\n        strm.avail_in = have;\n        state.hold = hold;\n        state.bits = bits;\n        //---\n        return Z_NEED_DICT;\n      }\n      strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n      state.mode = TYPE;\n      /* falls through */\n    case TYPE:\n      if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }\n      /* falls through */\n    case TYPEDO:\n      if (state.last) {\n        //--- BYTEBITS() ---//\n        hold >>>= bits & 7;\n        bits -= bits & 7;\n        //---//\n        state.mode = CHECK;\n        break;\n      }\n      //=== NEEDBITS(3); */\n      while (bits < 3) {\n        if (have === 0) { break inf_leave; }\n        have--;\n        hold += input[next++] << bits;\n        bits += 8;\n      }\n      //===//\n      state.last = (hold & 0x01)/*BITS(1)*/;\n      //--- DROPBITS(1) ---//\n      hold >>>= 1;\n      bits -= 1;\n      //---//\n\n      switch ((hold & 0x03)/*BITS(2)*/) {\n      case 0:                             /* stored block */\n        //Tracev((stderr, \"inflate:     stored block%s\\n\",\n        //        state.last ? \" (last)\" : \"\"));\n        state.mode = STORED;\n        break;\n      case 1:                             /* fixed block */\n        fixedtables(state);\n        //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\n        //        state.last ? \" (last)\" : \"\"));\n        state.mode = LEN_;             /* decode codes */\n        if (flush === Z_TREES) {\n          //--- DROPBITS(2) ---//\n          hold >>>= 2;\n          bits -= 2;\n          //---//\n          break inf_leave;\n        }\n        break;\n      case 2:                             /* dynamic block */\n        //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\n        //        state.last ? \" (last)\" : \"\"));\n        state.mode = TABLE;\n        break;\n      case 3:\n        strm.msg = 'invalid block type';\n        state.mode = BAD;\n      }\n      //--- DROPBITS(2) ---//\n      hold >>>= 2;\n      bits -= 2;\n      //---//\n      break;\n    case STORED:\n      //--- BYTEBITS() ---// /* go to byte boundary */\n      hold >>>= bits & 7;\n      bits -= bits & 7;\n      //---//\n      //=== NEEDBITS(32); */\n      while (bits < 32) {\n        if (have === 0) { break inf_leave; }\n        have--;\n        hold += input[next++] << bits;\n        bits += 8;\n      }\n      //===//\n      if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {\n        strm.msg = 'invalid stored block lengths';\n        state.mode = BAD;\n        break;\n      }\n      state.length = hold & 0xffff;\n      //Tracev((stderr, \"inflate:       stored length %u\\n\",\n      //        state.length));\n      //=== INITBITS();\n      hold = 0;\n      bits = 0;\n      //===//\n      state.mode = COPY_;\n      if (flush === Z_TREES) { break inf_leave; }\n      /* falls through */\n    case COPY_:\n      state.mode = COPY;\n      /* falls through */\n    case COPY:\n      copy = state.length;\n      if (copy) {\n        if (copy > have) { copy = have; }\n        if (copy > left) { copy = left; }\n        if (copy === 0) { break inf_leave; }\n        //--- zmemcpy(put, next, copy); ---\n        utils.arraySet(output, input, next, copy, put);\n        //---//\n        have -= copy;\n        next += copy;\n        left -= copy;\n        put += copy;\n        state.length -= copy;\n        break;\n      }\n      //Tracev((stderr, \"inflate:       stored end\\n\"));\n      state.mode = TYPE;\n      break;\n    case TABLE:\n      //=== NEEDBITS(14); */\n      while (bits < 14) {\n        if (have === 0) { break inf_leave; }\n        have--;\n        hold += input[next++] << bits;\n        bits += 8;\n      }\n      //===//\n      state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;\n      //--- DROPBITS(5) ---//\n      hold >>>= 5;\n      bits -= 5;\n      //---//\n      state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;\n      //--- DROPBITS(5) ---//\n      hold >>>= 5;\n      bits -= 5;\n      //---//\n      state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;\n      //--- DROPBITS(4) ---//\n      hold >>>= 4;\n      bits -= 4;\n      //---//\n//#ifndef PKZIP_BUG_WORKAROUND\n      if (state.nlen > 286 || state.ndist > 30) {\n        strm.msg = 'too many length or distance symbols';\n        state.mode = BAD;\n        break;\n      }\n//#endif\n      //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\n      state.have = 0;\n      state.mode = LENLENS;\n      /* falls through */\n    case LENLENS:\n      while (state.have < state.ncode) {\n        //=== NEEDBITS(3);\n        while (bits < 3) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);\n        //--- DROPBITS(3) ---//\n        hold >>>= 3;\n        bits -= 3;\n        //---//\n      }\n      while (state.have < 19) {\n        state.lens[order[state.have++]] = 0;\n      }\n      // We have separate tables & no pointers. 2 commented lines below not needed.\n      //state.next = state.codes;\n      //state.lencode = state.next;\n      // Switch to use dynamic table\n      state.lencode = state.lendyn;\n      state.lenbits = 7;\n\n      opts = { bits: state.lenbits };\n      ret = inflate_table(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);\n      state.lenbits = opts.bits;\n\n      if (ret) {\n        strm.msg = 'invalid code lengths set';\n        state.mode = BAD;\n        break;\n      }\n      //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\n      state.have = 0;\n      state.mode = CODELENS;\n      /* falls through */\n    case CODELENS:\n      while (state.have < state.nlen + state.ndist) {\n        for (;;) {\n          here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if (here_val < 16) {\n          //--- DROPBITS(here.bits) ---//\n          hold >>>= here_bits;\n          bits -= here_bits;\n          //---//\n          state.lens[state.have++] = here_val;\n        }\n        else {\n          if (here_val === 16) {\n            //=== NEEDBITS(here.bits + 2);\n            n = here_bits + 2;\n            while (bits < n) {\n              if (have === 0) { break inf_leave; }\n              have--;\n              hold += input[next++] << bits;\n              bits += 8;\n            }\n            //===//\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            if (state.have === 0) {\n              strm.msg = 'invalid bit length repeat';\n              state.mode = BAD;\n              break;\n            }\n            len = state.lens[state.have - 1];\n            copy = 3 + (hold & 0x03);//BITS(2);\n            //--- DROPBITS(2) ---//\n            hold >>>= 2;\n            bits -= 2;\n            //---//\n          }\n          else if (here_val === 17) {\n            //=== NEEDBITS(here.bits + 3);\n            n = here_bits + 3;\n            while (bits < n) {\n              if (have === 0) { break inf_leave; }\n              have--;\n              hold += input[next++] << bits;\n              bits += 8;\n            }\n            //===//\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            len = 0;\n            copy = 3 + (hold & 0x07);//BITS(3);\n            //--- DROPBITS(3) ---//\n            hold >>>= 3;\n            bits -= 3;\n            //---//\n          }\n          else {\n            //=== NEEDBITS(here.bits + 7);\n            n = here_bits + 7;\n            while (bits < n) {\n              if (have === 0) { break inf_leave; }\n              have--;\n              hold += input[next++] << bits;\n              bits += 8;\n            }\n            //===//\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            len = 0;\n            copy = 11 + (hold & 0x7f);//BITS(7);\n            //--- DROPBITS(7) ---//\n            hold >>>= 7;\n            bits -= 7;\n            //---//\n          }\n          if (state.have + copy > state.nlen + state.ndist) {\n            strm.msg = 'invalid bit length repeat';\n            state.mode = BAD;\n            break;\n          }\n          while (copy--) {\n            state.lens[state.have++] = len;\n          }\n        }\n      }\n\n      /* handle error breaks in while */\n      if (state.mode === BAD) { break; }\n\n      /* check for end-of-block code (better have one) */\n      if (state.lens[256] === 0) {\n        strm.msg = 'invalid code -- missing end-of-block';\n        state.mode = BAD;\n        break;\n      }\n\n      /* build code tables -- note: do not change the lenbits or distbits\n         values here (9 and 6) without reading the comments in inftrees.h\n         concerning the ENOUGH constants, which depend on those values */\n      state.lenbits = 9;\n\n      opts = { bits: state.lenbits };\n      ret = inflate_table(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);\n      // We have separate tables & no pointers. 2 commented lines below not needed.\n      // state.next_index = opts.table_index;\n      state.lenbits = opts.bits;\n      // state.lencode = state.next;\n\n      if (ret) {\n        strm.msg = 'invalid literal/lengths set';\n        state.mode = BAD;\n        break;\n      }\n\n      state.distbits = 6;\n      //state.distcode.copy(state.codes);\n      // Switch to use dynamic table\n      state.distcode = state.distdyn;\n      opts = { bits: state.distbits };\n      ret = inflate_table(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);\n      // We have separate tables & no pointers. 2 commented lines below not needed.\n      // state.next_index = opts.table_index;\n      state.distbits = opts.bits;\n      // state.distcode = state.next;\n\n      if (ret) {\n        strm.msg = 'invalid distances set';\n        state.mode = BAD;\n        break;\n      }\n      //Tracev((stderr, 'inflate:       codes ok\\n'));\n      state.mode = LEN_;\n      if (flush === Z_TREES) { break inf_leave; }\n      /* falls through */\n    case LEN_:\n      state.mode = LEN;\n      /* falls through */\n    case LEN:\n      if (have >= 6 && left >= 258) {\n        //--- RESTORE() ---\n        strm.next_out = put;\n        strm.avail_out = left;\n        strm.next_in = next;\n        strm.avail_in = have;\n        state.hold = hold;\n        state.bits = bits;\n        //---\n        inflate_fast(strm, _out);\n        //--- LOAD() ---\n        put = strm.next_out;\n        output = strm.output;\n        left = strm.avail_out;\n        next = strm.next_in;\n        input = strm.input;\n        have = strm.avail_in;\n        hold = state.hold;\n        bits = state.bits;\n        //---\n\n        if (state.mode === TYPE) {\n          state.back = -1;\n        }\n        break;\n      }\n      state.back = 0;\n      for (;;) {\n        here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/\n        here_bits = here >>> 24;\n        here_op = (here >>> 16) & 0xff;\n        here_val = here & 0xffff;\n\n        if (here_bits <= bits) { break; }\n        //--- PULLBYTE() ---//\n        if (have === 0) { break inf_leave; }\n        have--;\n        hold += input[next++] << bits;\n        bits += 8;\n        //---//\n      }\n      if (here_op && (here_op & 0xf0) === 0) {\n        last_bits = here_bits;\n        last_op = here_op;\n        last_val = here_val;\n        for (;;) {\n          here = state.lencode[last_val +\n                  ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((last_bits + here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        //--- DROPBITS(last.bits) ---//\n        hold >>>= last_bits;\n        bits -= last_bits;\n        //---//\n        state.back += last_bits;\n      }\n      //--- DROPBITS(here.bits) ---//\n      hold >>>= here_bits;\n      bits -= here_bits;\n      //---//\n      state.back += here_bits;\n      state.length = here_val;\n      if (here_op === 0) {\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n        //        \"inflate:         literal '%c'\\n\" :\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\n        state.mode = LIT;\n        break;\n      }\n      if (here_op & 32) {\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\n        state.back = -1;\n        state.mode = TYPE;\n        break;\n      }\n      if (here_op & 64) {\n        strm.msg = 'invalid literal/length code';\n        state.mode = BAD;\n        break;\n      }\n      state.extra = here_op & 15;\n      state.mode = LENEXT;\n      /* falls through */\n    case LENEXT:\n      if (state.extra) {\n        //=== NEEDBITS(state.extra);\n        n = state.extra;\n        while (bits < n) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n        //--- DROPBITS(state.extra) ---//\n        hold >>>= state.extra;\n        bits -= state.extra;\n        //---//\n        state.back += state.extra;\n      }\n      //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\n      state.was = state.length;\n      state.mode = DIST;\n      /* falls through */\n    case DIST:\n      for (;;) {\n        here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/\n        here_bits = here >>> 24;\n        here_op = (here >>> 16) & 0xff;\n        here_val = here & 0xffff;\n\n        if ((here_bits) <= bits) { break; }\n        //--- PULLBYTE() ---//\n        if (have === 0) { break inf_leave; }\n        have--;\n        hold += input[next++] << bits;\n        bits += 8;\n        //---//\n      }\n      if ((here_op & 0xf0) === 0) {\n        last_bits = here_bits;\n        last_op = here_op;\n        last_val = here_val;\n        for (;;) {\n          here = state.distcode[last_val +\n                  ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((last_bits + here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        //--- DROPBITS(last.bits) ---//\n        hold >>>= last_bits;\n        bits -= last_bits;\n        //---//\n        state.back += last_bits;\n      }\n      //--- DROPBITS(here.bits) ---//\n      hold >>>= here_bits;\n      bits -= here_bits;\n      //---//\n      state.back += here_bits;\n      if (here_op & 64) {\n        strm.msg = 'invalid distance code';\n        state.mode = BAD;\n        break;\n      }\n      state.offset = here_val;\n      state.extra = (here_op) & 15;\n      state.mode = DISTEXT;\n      /* falls through */\n    case DISTEXT:\n      if (state.extra) {\n        //=== NEEDBITS(state.extra);\n        n = state.extra;\n        while (bits < n) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n        //--- DROPBITS(state.extra) ---//\n        hold >>>= state.extra;\n        bits -= state.extra;\n        //---//\n        state.back += state.extra;\n      }\n//#ifdef INFLATE_STRICT\n      if (state.offset > state.dmax) {\n        strm.msg = 'invalid distance too far back';\n        state.mode = BAD;\n        break;\n      }\n//#endif\n      //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\n      state.mode = MATCH;\n      /* falls through */\n    case MATCH:\n      if (left === 0) { break inf_leave; }\n      copy = _out - left;\n      if (state.offset > copy) {         /* copy from window */\n        copy = state.offset - copy;\n        if (copy > state.whave) {\n          if (state.sane) {\n            strm.msg = 'invalid distance too far back';\n            state.mode = BAD;\n            break;\n          }\n// (!) This block is disabled in zlib defailts,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//          Trace((stderr, \"inflate.c too far\\n\"));\n//          copy -= state.whave;\n//          if (copy > state.length) { copy = state.length; }\n//          if (copy > left) { copy = left; }\n//          left -= copy;\n//          state.length -= copy;\n//          do {\n//            output[put++] = 0;\n//          } while (--copy);\n//          if (state.length === 0) { state.mode = LEN; }\n//          break;\n//#endif\n        }\n        if (copy > state.wnext) {\n          copy -= state.wnext;\n          from = state.wsize - copy;\n        }\n        else {\n          from = state.wnext - copy;\n        }\n        if (copy > state.length) { copy = state.length; }\n        from_source = state.window;\n      }\n      else {                              /* copy from output */\n        from_source = output;\n        from = put - state.offset;\n        copy = state.length;\n      }\n      if (copy > left) { copy = left; }\n      left -= copy;\n      state.length -= copy;\n      do {\n        output[put++] = from_source[from++];\n      } while (--copy);\n      if (state.length === 0) { state.mode = LEN; }\n      break;\n    case LIT:\n      if (left === 0) { break inf_leave; }\n      output[put++] = state.length;\n      left--;\n      state.mode = LEN;\n      break;\n    case CHECK:\n      if (state.wrap) {\n        //=== NEEDBITS(32);\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          // Use '|' insdead of '+' to make sure that result is signed\n          hold |= input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        _out -= left;\n        strm.total_out += _out;\n        state.total += _out;\n        if (_out) {\n          strm.adler = state.check =\n              /*UPDATE(state.check, put - _out, _out);*/\n              (state.flags ? crc32(state.check, output, _out, put - _out) : adler32(state.check, output, _out, put - _out));\n\n        }\n        _out = left;\n        // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\n        if ((state.flags ? hold : zswap32(hold)) !== state.check) {\n          strm.msg = 'incorrect data check';\n          state.mode = BAD;\n          break;\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\n      }\n      state.mode = LENGTH;\n      /* falls through */\n    case LENGTH:\n      if (state.wrap && state.flags) {\n        //=== NEEDBITS(32);\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (hold !== (state.total & 0xffffffff)) {\n          strm.msg = 'incorrect length check';\n          state.mode = BAD;\n          break;\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\n      }\n      state.mode = DONE;\n      /* falls through */\n    case DONE:\n      ret = Z_STREAM_END;\n      break inf_leave;\n    case BAD:\n      ret = Z_DATA_ERROR;\n      break inf_leave;\n    case MEM:\n      return Z_MEM_ERROR;\n    case SYNC:\n      /* falls through */\n    default:\n      return Z_STREAM_ERROR;\n    }\n  }\n\n  // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\n\n  /*\n     Return from inflate(), updating the total counts and the check value.\n     If there was no progress during the inflate() call, return a buffer\n     error.  Call updatewindow() to create and/or update the window state.\n     Note: a memory error from inflate() is non-recoverable.\n   */\n\n  //--- RESTORE() ---\n  strm.next_out = put;\n  strm.avail_out = left;\n  strm.next_in = next;\n  strm.avail_in = have;\n  state.hold = hold;\n  state.bits = bits;\n  //---\n\n  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&\n                      (state.mode < CHECK || flush !== Z_FINISH))) {\n    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) {\n      state.mode = MEM;\n      return Z_MEM_ERROR;\n    }\n  }\n  _in -= strm.avail_in;\n  _out -= strm.avail_out;\n  strm.total_in += _in;\n  strm.total_out += _out;\n  state.total += _out;\n  if (state.wrap && _out) {\n    strm.adler = state.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/\n      (state.flags ? crc32(state.check, output, _out, strm.next_out - _out) : adler32(state.check, output, _out, strm.next_out - _out));\n  }\n  strm.data_type = state.bits + (state.last ? 64 : 0) +\n                    (state.mode === TYPE ? 128 : 0) +\n                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\n  if (((_in === 0 && _out === 0) || flush === Z_FINISH) && ret === Z_OK) {\n    ret = Z_BUF_ERROR;\n  }\n  return ret;\n}\n\nfunction inflateEnd(strm) {\n\n  if (!strm || !strm.state /*|| strm->zfree == (free_func)0*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  var state = strm.state;\n  if (state.window) {\n    state.window = null;\n  }\n  strm.state = null;\n  return Z_OK;\n}\n\nfunction inflateGetHeader(strm, head) {\n  var state;\n\n  /* check state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR; }\n\n  /* save header structure */\n  state.head = head;\n  head.done = false;\n  return Z_OK;\n}\n\nfunction inflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var state;\n  var dictid;\n  var ret;\n\n  /* check state */\n  if (!strm /* == Z_NULL */ || !strm.state /* == Z_NULL */) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  if (state.wrap !== 0 && state.mode !== DICT) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* check for correct dictionary identifier */\n  if (state.mode === DICT) {\n    dictid = 1; /* adler32(0, null, 0)*/\n    /* dictid = adler32(dictid, dictionary, dictLength); */\n    dictid = adler32(dictid, dictionary, dictLength, 0);\n    if (dictid !== state.check) {\n      return Z_DATA_ERROR;\n    }\n  }\n  /* copy dictionary to window using updatewindow(), which will amend the\n   existing dictionary if appropriate */\n  ret = updatewindow(strm, dictionary, dictLength, dictLength);\n  if (ret) {\n    state.mode = MEM;\n    return Z_MEM_ERROR;\n  }\n  state.havedict = 1;\n  // Tracev((stderr, \"inflate:   dictionary set\\n\"));\n  return Z_OK;\n}\n\nexports.inflateReset = inflateReset;\nexports.inflateReset2 = inflateReset2;\nexports.inflateResetKeep = inflateResetKeep;\nexports.inflateInit = inflateInit;\nexports.inflateInit2 = inflateInit2;\nexports.inflate = inflate;\nexports.inflateEnd = inflateEnd;\nexports.inflateGetHeader = inflateGetHeader;\nexports.inflateSetDictionary = inflateSetDictionary;\nexports.inflateInfo = 'pako inflate (from Nodeca project)';\n\n/* Not implemented\nexports.inflateCopy = inflateCopy;\nexports.inflateGetDictionary = inflateGetDictionary;\nexports.inflateMark = inflateMark;\nexports.inflatePrime = inflatePrime;\nexports.inflateSync = inflateSync;\nexports.inflateSyncPoint = inflateSyncPoint;\nexports.inflateUndermine = inflateUndermine;\n*/\n\n},{\"../utils/common\":41,\"./adler32\":43,\"./crc32\":45,\"./inffast\":48,\"./inftrees\":50}],50:[function(require,module,exports){\n'use strict';\n\n\nvar utils = require('../utils/common');\n\nvar MAXBITS = 15;\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\nvar lbase = [ /* Length codes 257..285 base */\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\n  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\n];\n\nvar lext = [ /* Length codes 257..285 extra */\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,\n  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78\n];\n\nvar dbase = [ /* Distance codes 0..29 base */\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\n  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n  8193, 12289, 16385, 24577, 0, 0\n];\n\nvar dext = [ /* Distance codes 0..29 extra */\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,\n  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,\n  28, 28, 29, 29, 64, 64\n];\n\nmodule.exports = function inflate_table(type, lens, lens_index, codes, table, table_index, work, opts)\n{\n  var bits = opts.bits;\n      //here = opts.here; /* table entry for duplication */\n\n  var len = 0;               /* a code's length in bits */\n  var sym = 0;               /* index of code symbols */\n  var min = 0, max = 0;          /* minimum and maximum code lengths */\n  var root = 0;              /* number of index bits for root table */\n  var curr = 0;              /* number of index bits for current table */\n  var drop = 0;              /* code bits to drop for sub-table */\n  var left = 0;                   /* number of prefix codes available */\n  var used = 0;              /* code entries in table used */\n  var huff = 0;              /* Huffman code */\n  var incr;              /* for incrementing code, index */\n  var fill;              /* index for replicating entries */\n  var low;               /* low bits for current root entry */\n  var mask;              /* mask for low root bits */\n  var next;             /* next available space in table */\n  var base = null;     /* base value table to use */\n  var base_index = 0;\n//  var shoextra;    /* extra bits table to use */\n  var end;                    /* use base and extra for symbol > end */\n  var count = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\n  var offs = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\n  var extra = null;\n  var extra_index = 0;\n\n  var here_bits, here_op, here_val;\n\n  /*\n   Process a set of code lengths to create a canonical Huffman code.  The\n   code lengths are lens[0..codes-1].  Each length corresponds to the\n   symbols 0..codes-1.  The Huffman code is generated by first sorting the\n   symbols by length from short to long, and retaining the symbol order\n   for codes with equal lengths.  Then the code starts with all zero bits\n   for the first code of the shortest length, and the codes are integer\n   increments for the same length, and zeros are appended as the length\n   increases.  For the deflate format, these bits are stored backwards\n   from their more natural integer increment ordering, and so when the\n   decoding tables are built in the large loop below, the integer codes\n   are incremented backwards.\n\n   This routine assumes, but does not check, that all of the entries in\n   lens[] are in the range 0..MAXBITS.  The caller must assure this.\n   1..MAXBITS is interpreted as that code length.  zero means that that\n   symbol does not occur in this code.\n\n   The codes are sorted by computing a count of codes for each length,\n   creating from that a table of starting indices for each length in the\n   sorted table, and then entering the symbols in order in the sorted\n   table.  The sorted table is work[], with that space being provided by\n   the caller.\n\n   The length counts are used for other purposes as well, i.e. finding\n   the minimum and maximum length codes, determining if there are any\n   codes at all, checking for a valid set of lengths, and looking ahead\n   at length counts to determine sub-table sizes when building the\n   decoding tables.\n   */\n\n  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\n  for (len = 0; len <= MAXBITS; len++) {\n    count[len] = 0;\n  }\n  for (sym = 0; sym < codes; sym++) {\n    count[lens[lens_index + sym]]++;\n  }\n\n  /* bound code lengths, force root to be within code lengths */\n  root = bits;\n  for (max = MAXBITS; max >= 1; max--) {\n    if (count[max] !== 0) { break; }\n  }\n  if (root > max) {\n    root = max;\n  }\n  if (max === 0) {                     /* no symbols to code at all */\n    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\n    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\n    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n\n    //table.op[opts.table_index] = 64;\n    //table.bits[opts.table_index] = 1;\n    //table.val[opts.table_index++] = 0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n    opts.bits = 1;\n    return 0;     /* no symbols, but wait for decoding to report error */\n  }\n  for (min = 1; min < max; min++) {\n    if (count[min] !== 0) { break; }\n  }\n  if (root < min) {\n    root = min;\n  }\n\n  /* check for an over-subscribed or incomplete set of lengths */\n  left = 1;\n  for (len = 1; len <= MAXBITS; len++) {\n    left <<= 1;\n    left -= count[len];\n    if (left < 0) {\n      return -1;\n    }        /* over-subscribed */\n  }\n  if (left > 0 && (type === CODES || max !== 1)) {\n    return -1;                      /* incomplete set */\n  }\n\n  /* generate offsets into symbol table for each length for sorting */\n  offs[1] = 0;\n  for (len = 1; len < MAXBITS; len++) {\n    offs[len + 1] = offs[len] + count[len];\n  }\n\n  /* sort symbols by length, by symbol order within each length */\n  for (sym = 0; sym < codes; sym++) {\n    if (lens[lens_index + sym] !== 0) {\n      work[offs[lens[lens_index + sym]]++] = sym;\n    }\n  }\n\n  /*\n   Create and fill in decoding tables.  In this loop, the table being\n   filled is at next and has curr index bits.  The code being used is huff\n   with length len.  That code is converted to an index by dropping drop\n   bits off of the bottom.  For codes where len is less than drop + curr,\n   those top drop + curr - len bits are incremented through all values to\n   fill the table with replicated entries.\n\n   root is the number of index bits for the root table.  When len exceeds\n   root, sub-tables are created pointed to by the root entry with an index\n   of the low root bits of huff.  This is saved in low to check for when a\n   new sub-table should be started.  drop is zero when the root table is\n   being filled, and drop is root when sub-tables are being filled.\n\n   When a new sub-table is needed, it is necessary to look ahead in the\n   code lengths to determine what size sub-table is needed.  The length\n   counts are used for this, and so count[] is decremented as codes are\n   entered in the tables.\n\n   used keeps track of how many table entries have been allocated from the\n   provided *table space.  It is checked for LENS and DIST tables against\n   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\n   the initial root table size constants.  See the comments in inftrees.h\n   for more information.\n\n   sym increments through all symbols, and the loop terminates when\n   all codes of length max, i.e. all codes, have been processed.  This\n   routine permits incomplete codes, so another loop after this one fills\n   in the rest of the decoding tables with invalid code markers.\n   */\n\n  /* set up for code type */\n  // poor man optimization - use if-else instead of switch,\n  // to avoid deopts in old v8\n  if (type === CODES) {\n    base = extra = work;    /* dummy value--not used */\n    end = 19;\n\n  } else if (type === LENS) {\n    base = lbase;\n    base_index -= 257;\n    extra = lext;\n    extra_index -= 257;\n    end = 256;\n\n  } else {                    /* DISTS */\n    base = dbase;\n    extra = dext;\n    end = -1;\n  }\n\n  /* initialize opts for loop */\n  huff = 0;                   /* starting code */\n  sym = 0;                    /* starting code symbol */\n  len = min;                  /* starting code length */\n  next = table_index;              /* current table to fill in */\n  curr = root;                /* current table index bits */\n  drop = 0;                   /* current bits to drop from code for index */\n  low = -1;                   /* trigger new sub-table when len > root */\n  used = 1 << root;          /* use root table entries */\n  mask = used - 1;            /* mask for comparing low */\n\n  /* check available table space */\n  if ((type === LENS && used > ENOUGH_LENS) ||\n    (type === DISTS && used > ENOUGH_DISTS)) {\n    return 1;\n  }\n\n  var i = 0;\n  /* process all codes and make table entries */\n  for (;;) {\n    i++;\n    /* create table entry */\n    here_bits = len - drop;\n    if (work[sym] < end) {\n      here_op = 0;\n      here_val = work[sym];\n    }\n    else if (work[sym] > end) {\n      here_op = extra[extra_index + work[sym]];\n      here_val = base[base_index + work[sym]];\n    }\n    else {\n      here_op = 32 + 64;         /* end of block */\n      here_val = 0;\n    }\n\n    /* replicate for those indices with low len bits equal to huff */\n    incr = 1 << (len - drop);\n    fill = 1 << curr;\n    min = fill;                 /* save offset to next table */\n    do {\n      fill -= incr;\n      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;\n    } while (fill !== 0);\n\n    /* backwards increment the len-bit code huff */\n    incr = 1 << (len - 1);\n    while (huff & incr) {\n      incr >>= 1;\n    }\n    if (incr !== 0) {\n      huff &= incr - 1;\n      huff += incr;\n    } else {\n      huff = 0;\n    }\n\n    /* go to next symbol, update count, len */\n    sym++;\n    if (--count[len] === 0) {\n      if (len === max) { break; }\n      len = lens[lens_index + work[sym]];\n    }\n\n    /* create new sub-table if needed */\n    if (len > root && (huff & mask) !== low) {\n      /* if first time, transition to sub-tables */\n      if (drop === 0) {\n        drop = root;\n      }\n\n      /* increment past last table */\n      next += min;            /* here min is 1 << curr */\n\n      /* determine length of next table */\n      curr = len - drop;\n      left = 1 << curr;\n      while (curr + drop < max) {\n        left -= count[curr + drop];\n        if (left <= 0) { break; }\n        curr++;\n        left <<= 1;\n      }\n\n      /* check for enough space */\n      used += 1 << curr;\n      if ((type === LENS && used > ENOUGH_LENS) ||\n        (type === DISTS && used > ENOUGH_DISTS)) {\n        return 1;\n      }\n\n      /* point entry in root table to sub-table */\n      low = huff & mask;\n      /*table.op[low] = curr;\n      table.bits[low] = root;\n      table.val[low] = next - opts.table_index;*/\n      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;\n    }\n  }\n\n  /* fill in remaining table entry if code is incomplete (guaranteed to have\n   at most one remaining entry, since if the code is incomplete, the\n   maximum code length that was allowed to get this far is one bit) */\n  if (huff !== 0) {\n    //table.op[next + huff] = 64;            /* invalid code marker */\n    //table.bits[next + huff] = len - drop;\n    //table.val[next + huff] = 0;\n    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;\n  }\n\n  /* set return parameters */\n  //opts.table_index += used;\n  opts.bits = root;\n  return 0;\n};\n\n},{\"../utils/common\":41}],51:[function(require,module,exports){\n'use strict';\n\nmodule.exports = {\n  2:      'need dictionary',     /* Z_NEED_DICT       2  */\n  1:      'stream end',          /* Z_STREAM_END      1  */\n  0:      '',                    /* Z_OK              0  */\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\n};\n\n},{}],52:[function(require,module,exports){\n'use strict';\n\n\nvar utils = require('../utils/common');\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n//var Z_FILTERED          = 1;\n//var Z_HUFFMAN_ONLY      = 2;\n//var Z_RLE               = 3;\nvar Z_FIXED               = 4;\n//var Z_DEFAULT_STRATEGY  = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\nvar Z_BINARY              = 0;\nvar Z_TEXT                = 1;\n//var Z_ASCII             = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n/*============================================================================*/\n\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n// From zutil.h\n\nvar STORED_BLOCK = 0;\nvar STATIC_TREES = 1;\nvar DYN_TREES    = 2;\n/* The three kinds of block type */\n\nvar MIN_MATCH    = 3;\nvar MAX_MATCH    = 258;\n/* The minimum and maximum match lengths */\n\n// From deflate.h\n/* ===========================================================================\n * Internal compression state.\n */\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\n\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\n\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\n\nvar D_CODES       = 30;\n/* number of distance codes */\n\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\n\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\n\nvar MAX_BITS      = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar Buf_size      = 16;\n/* size of bit buffer in bi_buf */\n\n\n/* ===========================================================================\n * Constants\n */\n\nvar MAX_BL_BITS = 7;\n/* Bit length codes must not exceed MAX_BL_BITS bits */\n\nvar END_BLOCK   = 256;\n/* end of block literal code */\n\nvar REP_3_6     = 16;\n/* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\nvar REPZ_3_10   = 17;\n/* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\nvar REPZ_11_138 = 18;\n/* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\n/* eslint-disable comma-spacing,array-bracket-spacing */\nvar extra_lbits =   /* extra bits for each length code */\n  [0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];\n\nvar extra_dbits =   /* extra bits for each distance code */\n  [0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];\n\nvar extra_blbits =  /* extra bits for each bit length code */\n  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];\n\nvar bl_order =\n  [16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];\n/* eslint-enable comma-spacing,array-bracket-spacing */\n\n/* The lengths of the bit length codes are sent in order of decreasing\n * probability, to avoid transmitting the lengths for unused bit length codes.\n */\n\n/* ===========================================================================\n * Local data. These are initialized only once.\n */\n\n// We pre-fill arrays with 0 to avoid uninitialized gaps\n\nvar DIST_CODE_LEN = 512; /* see definition of array dist_code below */\n\n// !!!! Use flat array insdead of structure, Freq = i*2, Len = i*2+1\nvar static_ltree  = new Array((L_CODES + 2) * 2);\nzero(static_ltree);\n/* The static literal tree. Since the bit lengths are imposed, there is no\n * need for the L_CODES extra codes used during heap construction. However\n * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n * below).\n */\n\nvar static_dtree  = new Array(D_CODES * 2);\nzero(static_dtree);\n/* The static distance tree. (Actually a trivial tree since all codes use\n * 5 bits.)\n */\n\nvar _dist_code    = new Array(DIST_CODE_LEN);\nzero(_dist_code);\n/* Distance codes. The first 256 values correspond to the distances\n * 3 .. 258, the last 256 values correspond to the top 8 bits of\n * the 15 bit distances.\n */\n\nvar _length_code  = new Array(MAX_MATCH - MIN_MATCH + 1);\nzero(_length_code);\n/* length code for each normalized match length (0 == MIN_MATCH) */\n\nvar base_length   = new Array(LENGTH_CODES);\nzero(base_length);\n/* First normalized length for each code (0 = MIN_MATCH) */\n\nvar base_dist     = new Array(D_CODES);\nzero(base_dist);\n/* First normalized distance for each code (0 = distance of 1) */\n\n\nfunction StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n\n  this.static_tree  = static_tree;  /* static tree or NULL */\n  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */\n  this.extra_base   = extra_base;   /* base index for extra_bits */\n  this.elems        = elems;        /* max number of elements in the tree */\n  this.max_length   = max_length;   /* max bit length for the codes */\n\n  // show if `static_tree` has data or dummy - needed for monomorphic objects\n  this.has_stree    = static_tree && static_tree.length;\n}\n\n\nvar static_l_desc;\nvar static_d_desc;\nvar static_bl_desc;\n\n\nfunction TreeDesc(dyn_tree, stat_desc) {\n  this.dyn_tree = dyn_tree;     /* the dynamic tree */\n  this.max_code = 0;            /* largest code with non zero frequency */\n  this.stat_desc = stat_desc;   /* the corresponding static tree */\n}\n\n\n\nfunction d_code(dist) {\n  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n}\n\n\n/* ===========================================================================\n * Output a short LSB first on the stream.\n * IN assertion: there is enough room in pendingBuf.\n */\nfunction put_short(s, w) {\n//    put_byte(s, (uch)((w) & 0xff));\n//    put_byte(s, (uch)((ush)(w) >> 8));\n  s.pending_buf[s.pending++] = (w) & 0xff;\n  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n}\n\n\n/* ===========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nfunction send_bits(s, value, length) {\n  if (s.bi_valid > (Buf_size - length)) {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    put_short(s, s.bi_buf);\n    s.bi_buf = value >> (Buf_size - s.bi_valid);\n    s.bi_valid += length - Buf_size;\n  } else {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    s.bi_valid += length;\n  }\n}\n\n\nfunction send_code(s, c, tree) {\n  send_bits(s, tree[c * 2]/*.Code*/, tree[c * 2 + 1]/*.Len*/);\n}\n\n\n/* ===========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nfunction bi_reverse(code, len) {\n  var res = 0;\n  do {\n    res |= code & 1;\n    code >>>= 1;\n    res <<= 1;\n  } while (--len > 0);\n  return res >>> 1;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer, keeping at most 7 bits in it.\n */\nfunction bi_flush(s) {\n  if (s.bi_valid === 16) {\n    put_short(s, s.bi_buf);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n\n  } else if (s.bi_valid >= 8) {\n    s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n    s.bi_buf >>= 8;\n    s.bi_valid -= 8;\n  }\n}\n\n\n/* ===========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nfunction gen_bitlen(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc;    /* the tree descriptor */\n{\n  var tree            = desc.dyn_tree;\n  var max_code        = desc.max_code;\n  var stree           = desc.stat_desc.static_tree;\n  var has_stree       = desc.stat_desc.has_stree;\n  var extra           = desc.stat_desc.extra_bits;\n  var base            = desc.stat_desc.extra_base;\n  var max_length      = desc.stat_desc.max_length;\n  var h;              /* heap index */\n  var n, m;           /* iterate over the tree elements */\n  var bits;           /* bit length */\n  var xbits;          /* extra bits */\n  var f;              /* frequency */\n  var overflow = 0;   /* number of elements with bit length too large */\n\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    s.bl_count[bits] = 0;\n  }\n\n  /* In a first pass, compute the optimal bit lengths (which may\n   * overflow in the case of the bit length tree).\n   */\n  tree[s.heap[s.heap_max] * 2 + 1]/*.Len*/ = 0; /* root of the heap */\n\n  for (h = s.heap_max + 1; h < HEAP_SIZE; h++) {\n    n = s.heap[h];\n    bits = tree[tree[n * 2 + 1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;\n    if (bits > max_length) {\n      bits = max_length;\n      overflow++;\n    }\n    tree[n * 2 + 1]/*.Len*/ = bits;\n    /* We overwrite tree[n].Dad which is no longer needed */\n\n    if (n > max_code) { continue; } /* not a leaf node */\n\n    s.bl_count[bits]++;\n    xbits = 0;\n    if (n >= base) {\n      xbits = extra[n - base];\n    }\n    f = tree[n * 2]/*.Freq*/;\n    s.opt_len += f * (bits + xbits);\n    if (has_stree) {\n      s.static_len += f * (stree[n * 2 + 1]/*.Len*/ + xbits);\n    }\n  }\n  if (overflow === 0) { return; }\n\n  // Trace((stderr,\"\\nbit length overflow\\n\"));\n  /* This happens for example on obj2 and pic of the Calgary corpus */\n\n  /* Find the first bit length which could increase: */\n  do {\n    bits = max_length - 1;\n    while (s.bl_count[bits] === 0) { bits--; }\n    s.bl_count[bits]--;      /* move one leaf down the tree */\n    s.bl_count[bits + 1] += 2; /* move one overflow item as its brother */\n    s.bl_count[max_length]--;\n    /* The brother of the overflow item also moves one step up,\n     * but this does not affect bl_count[max_length]\n     */\n    overflow -= 2;\n  } while (overflow > 0);\n\n  /* Now recompute all bit lengths, scanning in increasing frequency.\n   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n   * lengths instead of fixing only the wrong ones. This idea is taken\n   * from 'ar' written by Haruhiko Okumura.)\n   */\n  for (bits = max_length; bits !== 0; bits--) {\n    n = s.bl_count[bits];\n    while (n !== 0) {\n      m = s.heap[--h];\n      if (m > max_code) { continue; }\n      if (tree[m * 2 + 1]/*.Len*/ !== bits) {\n        // Trace((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n        s.opt_len += (bits - tree[m * 2 + 1]/*.Len*/) * tree[m * 2]/*.Freq*/;\n        tree[m * 2 + 1]/*.Len*/ = bits;\n      }\n      n--;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Generate the codes for a given tree and bit counts (which need not be\n * optimal).\n * IN assertion: the array bl_count contains the bit length statistics for\n * the given tree and the field len is set for all tree elements.\n * OUT assertion: the field code is set for all tree elements of non\n *     zero code length.\n */\nfunction gen_codes(tree, max_code, bl_count)\n//    ct_data *tree;             /* the tree to decorate */\n//    int max_code;              /* largest code with non zero frequency */\n//    ushf *bl_count;            /* number of codes at each bit length */\n{\n  var next_code = new Array(MAX_BITS + 1); /* next code value for each bit length */\n  var code = 0;              /* running code value */\n  var bits;                  /* bit index */\n  var n;                     /* code index */\n\n  /* The distribution counts are first used to generate the code values\n   * without bit reversal.\n   */\n  for (bits = 1; bits <= MAX_BITS; bits++) {\n    next_code[bits] = code = (code + bl_count[bits - 1]) << 1;\n  }\n  /* Check that the bit counts in bl_count are consistent. The last code\n   * must be all ones.\n   */\n  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n  //        \"inconsistent bit counts\");\n  //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n  for (n = 0;  n <= max_code; n++) {\n    var len = tree[n * 2 + 1]/*.Len*/;\n    if (len === 0) { continue; }\n    /* Now reverse the bits */\n    tree[n * 2]/*.Code*/ = bi_reverse(next_code[len]++, len);\n\n    //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n  }\n}\n\n\n/* ===========================================================================\n * Initialize the various 'constant' tables.\n */\nfunction tr_static_init() {\n  var n;        /* iterates over tree elements */\n  var bits;     /* bit counter */\n  var length;   /* length value */\n  var code;     /* code value */\n  var dist;     /* distance index */\n  var bl_count = new Array(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  // do check in _tr_init()\n  //if (static_init_done) return;\n\n  /* For some embedded targets, global variables are not initialized: */\n/*#ifdef NO_INIT_GLOBAL_POINTERS\n  static_l_desc.static_tree = static_ltree;\n  static_l_desc.extra_bits = extra_lbits;\n  static_d_desc.static_tree = static_dtree;\n  static_d_desc.extra_bits = extra_dbits;\n  static_bl_desc.extra_bits = extra_blbits;\n#endif*/\n\n  /* Initialize the mapping length (0..255) -> length code (0..28) */\n  length = 0;\n  for (code = 0; code < LENGTH_CODES - 1; code++) {\n    base_length[code] = length;\n    for (n = 0; n < (1 << extra_lbits[code]); n++) {\n      _length_code[length++] = code;\n    }\n  }\n  //Assert (length == 256, \"tr_static_init: length != 256\");\n  /* Note that the length 255 (match length 258) can be represented\n   * in two different ways: code 284 + 5 bits or code 285, so we\n   * overwrite length_code[255] to use the best encoding:\n   */\n  _length_code[length - 1] = code;\n\n  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n  dist = 0;\n  for (code = 0; code < 16; code++) {\n    base_dist[code] = dist;\n    for (n = 0; n < (1 << extra_dbits[code]); n++) {\n      _dist_code[dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: dist != 256\");\n  dist >>= 7; /* from now on, all distances are divided by 128 */\n  for (; code < D_CODES; code++) {\n    base_dist[code] = dist << 7;\n    for (n = 0; n < (1 << (extra_dbits[code] - 7)); n++) {\n      _dist_code[256 + dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n  /* Construct the codes of the static literal tree */\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    bl_count[bits] = 0;\n  }\n\n  n = 0;\n  while (n <= 143) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  while (n <= 255) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 9;\n    n++;\n    bl_count[9]++;\n  }\n  while (n <= 279) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 7;\n    n++;\n    bl_count[7]++;\n  }\n  while (n <= 287) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  /* Codes 286 and 287 do not exist, but we must include them in the\n   * tree construction to get a canonical Huffman tree (longest code\n   * all ones)\n   */\n  gen_codes(static_ltree, L_CODES + 1, bl_count);\n\n  /* The static distance tree is trivial: */\n  for (n = 0; n < D_CODES; n++) {\n    static_dtree[n * 2 + 1]/*.Len*/ = 5;\n    static_dtree[n * 2]/*.Code*/ = bi_reverse(n, 5);\n  }\n\n  // Now data ready and we can init static trees\n  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);\n  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES, MAX_BITS);\n  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES, MAX_BL_BITS);\n\n  //static_init_done = true;\n}\n\n\n/* ===========================================================================\n * Initialize a new block.\n */\nfunction init_block(s) {\n  var n; /* iterates over tree elements */\n\n  /* Initialize the trees. */\n  for (n = 0; n < L_CODES;  n++) { s.dyn_ltree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < D_CODES;  n++) { s.dyn_dtree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < BL_CODES; n++) { s.bl_tree[n * 2]/*.Freq*/ = 0; }\n\n  s.dyn_ltree[END_BLOCK * 2]/*.Freq*/ = 1;\n  s.opt_len = s.static_len = 0;\n  s.last_lit = s.matches = 0;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer and align the output on a byte boundary\n */\nfunction bi_windup(s)\n{\n  if (s.bi_valid > 8) {\n    put_short(s, s.bi_buf);\n  } else if (s.bi_valid > 0) {\n    //put_byte(s, (Byte)s->bi_buf);\n    s.pending_buf[s.pending++] = s.bi_buf;\n  }\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n}\n\n/* ===========================================================================\n * Copy a stored block, storing first the length and its\n * one's complement if requested.\n */\nfunction copy_block(s, buf, len, header)\n//DeflateState *s;\n//charf    *buf;    /* the input data */\n//unsigned len;     /* its length */\n//int      header;  /* true if block header must be written */\n{\n  bi_windup(s);        /* align on byte boundary */\n\n  if (header) {\n    put_short(s, len);\n    put_short(s, ~len);\n  }\n//  while (len--) {\n//    put_byte(s, *buf++);\n//  }\n  utils.arraySet(s.pending_buf, s.window, buf, len, s.pending);\n  s.pending += len;\n}\n\n/* ===========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nfunction smaller(tree, n, m, depth) {\n  var _n2 = n * 2;\n  var _m2 = m * 2;\n  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||\n         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));\n}\n\n/* ===========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nfunction pqdownheap(s, tree, k)\n//    deflate_state *s;\n//    ct_data *tree;  /* the tree to restore */\n//    int k;               /* node to move down */\n{\n  var v = s.heap[k];\n  var j = k << 1;  /* left son of k */\n  while (j <= s.heap_len) {\n    /* Set j to the smallest of the two sons: */\n    if (j < s.heap_len &&\n      smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n      j++;\n    }\n    /* Exit if v is smaller than both sons */\n    if (smaller(tree, v, s.heap[j], s.depth)) { break; }\n\n    /* Exchange v with the smallest son */\n    s.heap[k] = s.heap[j];\n    k = j;\n\n    /* And continue down the tree, setting j to the left son of k */\n    j <<= 1;\n  }\n  s.heap[k] = v;\n}\n\n\n// inlined manually\n// var SMALLEST = 1;\n\n/* ===========================================================================\n * Send the block data compressed using the given Huffman trees\n */\nfunction compress_block(s, ltree, dtree)\n//    deflate_state *s;\n//    const ct_data *ltree; /* literal tree */\n//    const ct_data *dtree; /* distance tree */\n{\n  var dist;           /* distance of matched string */\n  var lc;             /* match length or unmatched char (if dist == 0) */\n  var lx = 0;         /* running index in l_buf */\n  var code;           /* the code to send */\n  var extra;          /* number of extra bits to send */\n\n  if (s.last_lit !== 0) {\n    do {\n      dist = (s.pending_buf[s.d_buf + lx * 2] << 8) | (s.pending_buf[s.d_buf + lx * 2 + 1]);\n      lc = s.pending_buf[s.l_buf + lx];\n      lx++;\n\n      if (dist === 0) {\n        send_code(s, lc, ltree); /* send a literal byte */\n        //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n      } else {\n        /* Here, lc is the match length - MIN_MATCH */\n        code = _length_code[lc];\n        send_code(s, code + LITERALS + 1, ltree); /* send the length code */\n        extra = extra_lbits[code];\n        if (extra !== 0) {\n          lc -= base_length[code];\n          send_bits(s, lc, extra);       /* send the extra length bits */\n        }\n        dist--; /* dist is now the match distance - 1 */\n        code = d_code(dist);\n        //Assert (code < D_CODES, \"bad d_code\");\n\n        send_code(s, code, dtree);       /* send the distance code */\n        extra = extra_dbits[code];\n        if (extra !== 0) {\n          dist -= base_dist[code];\n          send_bits(s, dist, extra);   /* send the extra distance bits */\n        }\n      } /* literal or match pair ? */\n\n      /* Check that the overlay between pending_buf and d_buf+l_buf is ok: */\n      //Assert((uInt)(s->pending) < s->lit_bufsize + 2*lx,\n      //       \"pendingBuf overflow\");\n\n    } while (lx < s.last_lit);\n  }\n\n  send_code(s, END_BLOCK, ltree);\n}\n\n\n/* ===========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nfunction build_tree(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc; /* the tree descriptor */\n{\n  var tree     = desc.dyn_tree;\n  var stree    = desc.stat_desc.static_tree;\n  var has_stree = desc.stat_desc.has_stree;\n  var elems    = desc.stat_desc.elems;\n  var n, m;          /* iterate over heap elements */\n  var max_code = -1; /* largest code with non zero frequency */\n  var node;          /* new node being created */\n\n  /* Construct the initial heap, with least frequent element in\n   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n   * heap[0] is not used.\n   */\n  s.heap_len = 0;\n  s.heap_max = HEAP_SIZE;\n\n  for (n = 0; n < elems; n++) {\n    if (tree[n * 2]/*.Freq*/ !== 0) {\n      s.heap[++s.heap_len] = max_code = n;\n      s.depth[n] = 0;\n\n    } else {\n      tree[n * 2 + 1]/*.Len*/ = 0;\n    }\n  }\n\n  /* The pkzip format requires that at least one distance code exists,\n   * and that at least one bit should be sent even if there is only one\n   * possible code. So to avoid special checks later on we force at least\n   * two codes of non zero frequency.\n   */\n  while (s.heap_len < 2) {\n    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);\n    tree[node * 2]/*.Freq*/ = 1;\n    s.depth[node] = 0;\n    s.opt_len--;\n\n    if (has_stree) {\n      s.static_len -= stree[node * 2 + 1]/*.Len*/;\n    }\n    /* node is 0 or 1 so it does not have extra bits */\n  }\n  desc.max_code = max_code;\n\n  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n   * establish sub-heaps of increasing lengths:\n   */\n  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }\n\n  /* Construct the Huffman tree by repeatedly combining the least two\n   * frequent nodes.\n   */\n  node = elems;              /* next internal node of the tree */\n  do {\n    //pqremove(s, tree, n);  /* n = node of least frequency */\n    /*** pqremove ***/\n    n = s.heap[1/*SMALLEST*/];\n    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n    /***/\n\n    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */\n\n    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */\n    s.heap[--s.heap_max] = m;\n\n    /* Create a new node father of n and m */\n    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;\n    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n    tree[n * 2 + 1]/*.Dad*/ = tree[m * 2 + 1]/*.Dad*/ = node;\n\n    /* and insert the new node in the heap */\n    s.heap[1/*SMALLEST*/] = node++;\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n\n  } while (s.heap_len >= 2);\n\n  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];\n\n  /* At this point, the fields freq and dad are set. We can now\n   * generate the bit lengths.\n   */\n  gen_bitlen(s, desc);\n\n  /* The field len is now set, we can generate the bit codes */\n  gen_codes(tree, max_code, s.bl_count);\n}\n\n\n/* ===========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree.\n */\nfunction scan_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree;   /* the tree to be scanned */\n//    int max_code;    /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n  tree[(max_code + 1) * 2 + 1]/*.Len*/ = 0xffff; /* guard */\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      s.bl_tree[curlen * 2]/*.Freq*/ += count;\n\n    } else if (curlen !== 0) {\n\n      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }\n      s.bl_tree[REP_3_6 * 2]/*.Freq*/++;\n\n    } else if (count <= 10) {\n      s.bl_tree[REPZ_3_10 * 2]/*.Freq*/++;\n\n    } else {\n      s.bl_tree[REPZ_11_138 * 2]/*.Freq*/++;\n    }\n\n    count = 0;\n    prevlen = curlen;\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Send a literal or distance tree in compressed form, using the codes in\n * bl_tree.\n */\nfunction send_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree; /* the tree to be scanned */\n//    int max_code;       /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  /* tree[max_code+1].Len = -1; */  /* guard already set */\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);\n\n    } else if (curlen !== 0) {\n      if (curlen !== prevlen) {\n        send_code(s, curlen, s.bl_tree);\n        count--;\n      }\n      //Assert(count >= 3 && count <= 6, \" 3_6?\");\n      send_code(s, REP_3_6, s.bl_tree);\n      send_bits(s, count - 3, 2);\n\n    } else if (count <= 10) {\n      send_code(s, REPZ_3_10, s.bl_tree);\n      send_bits(s, count - 3, 3);\n\n    } else {\n      send_code(s, REPZ_11_138, s.bl_tree);\n      send_bits(s, count - 11, 7);\n    }\n\n    count = 0;\n    prevlen = curlen;\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nfunction build_bl_tree(s) {\n  var max_blindex;  /* index of last bit length code of non zero freq */\n\n  /* Determine the bit length frequencies for literal and distance trees */\n  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n\n  /* Build the bit length tree: */\n  build_tree(s, s.bl_desc);\n  /* opt_len now includes the length of the tree representations, except\n   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n   */\n\n  /* Determine the number of bit length codes to send. The pkzip format\n   * requires that at least 4 bit length codes be sent. (appnote.txt says\n   * 3 but the actual value used is 4.)\n   */\n  for (max_blindex = BL_CODES - 1; max_blindex >= 3; max_blindex--) {\n    if (s.bl_tree[bl_order[max_blindex] * 2 + 1]/*.Len*/ !== 0) {\n      break;\n    }\n  }\n  /* Update opt_len to include the bit length tree and counts */\n  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\n  //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n  //        s->opt_len, s->static_len));\n\n  return max_blindex;\n}\n\n\n/* ===========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nfunction send_all_trees(s, lcodes, dcodes, blcodes)\n//    deflate_state *s;\n//    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n{\n  var rank;                    /* index in bl_order */\n\n  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n  //        \"too many codes\");\n  //Tracev((stderr, \"\\nbl counts: \"));\n  send_bits(s, lcodes - 257, 5); /* not +255 as stated in appnote.txt */\n  send_bits(s, dcodes - 1,   5);\n  send_bits(s, blcodes - 4,  4); /* not -3 as stated in appnote.txt */\n  for (rank = 0; rank < blcodes; rank++) {\n    //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n    send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]/*.Len*/, 3);\n  }\n  //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_ltree, lcodes - 1); /* literal tree */\n  //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_dtree, dcodes - 1); /* distance tree */\n  //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n}\n\n\n/* ===========================================================================\n * Check if the data type is TEXT or BINARY, using the following algorithm:\n * - TEXT if the two conditions below are satisfied:\n *    a) There are no non-portable control characters belonging to the\n *       \"black list\" (0..6, 14..25, 28..31).\n *    b) There is at least one printable character belonging to the\n *       \"white list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n * - BINARY otherwise.\n * - The following partially-portable control characters form a\n *   \"gray list\" that is ignored in this detection algorithm:\n *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n * IN assertion: the fields Freq of dyn_ltree are set.\n */\nfunction detect_data_type(s) {\n  /* black_mask is the bit mask of black-listed bytes\n   * set bits 0..6, 14..25, and 28..31\n   * 0xf3ffc07f = binary 11110011111111111100000001111111\n   */\n  var black_mask = 0xf3ffc07f;\n  var n;\n\n  /* Check for non-textual (\"black-listed\") bytes. */\n  for (n = 0; n <= 31; n++, black_mask >>>= 1) {\n    if ((black_mask & 1) && (s.dyn_ltree[n * 2]/*.Freq*/ !== 0)) {\n      return Z_BINARY;\n    }\n  }\n\n  /* Check for textual (\"white-listed\") bytes. */\n  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||\n      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {\n    return Z_TEXT;\n  }\n  for (n = 32; n < LITERALS; n++) {\n    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {\n      return Z_TEXT;\n    }\n  }\n\n  /* There are no \"black-listed\" or \"white-listed\" bytes:\n   * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n   */\n  return Z_BINARY;\n}\n\n\nvar static_init_done = false;\n\n/* ===========================================================================\n * Initialize the tree data structures for a new zlib stream.\n */\nfunction _tr_init(s)\n{\n\n  if (!static_init_done) {\n    tr_static_init();\n    static_init_done = true;\n  }\n\n  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);\n  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);\n  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n\n  /* Initialize the first block of the first file: */\n  init_block(s);\n}\n\n\n/* ===========================================================================\n * Send a stored block\n */\nfunction _tr_stored_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);    /* send block type */\n  copy_block(s, buf, stored_len, true); /* with header */\n}\n\n\n/* ===========================================================================\n * Send one empty static block to give enough lookahead for inflate.\n * This takes 10 bits, of which 7 may remain in the bit buffer.\n */\nfunction _tr_align(s) {\n  send_bits(s, STATIC_TREES << 1, 3);\n  send_code(s, END_BLOCK, static_ltree);\n  bi_flush(s);\n}\n\n\n/* ===========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and output the encoded block to the zip file.\n */\nfunction _tr_flush_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block, or NULL if too old */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  var opt_lenb, static_lenb;  /* opt_len and static_len in bytes */\n  var max_blindex = 0;        /* index of last bit length code of non zero freq */\n\n  /* Build the Huffman trees unless a stored block is forced */\n  if (s.level > 0) {\n\n    /* Check if the file is binary or text */\n    if (s.strm.data_type === Z_UNKNOWN) {\n      s.strm.data_type = detect_data_type(s);\n    }\n\n    /* Construct the literal and distance trees */\n    build_tree(s, s.l_desc);\n    // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n\n    build_tree(s, s.d_desc);\n    // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = build_bl_tree(s);\n\n    /* Determine the best encoding. Compute the block lengths in bytes. */\n    opt_lenb = (s.opt_len + 3 + 7) >>> 3;\n    static_lenb = (s.static_len + 3 + 7) >>> 3;\n\n    // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n    //        s->last_lit));\n\n    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }\n\n  } else {\n    // Assert(buf != (char*)0, \"lost buf\");\n    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */\n  }\n\n  if ((stored_len + 4 <= opt_lenb) && (buf !== -1)) {\n    /* 4: two words for the lengths */\n\n    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n     * Otherwise we can't have processed more than WSIZE input bytes since\n     * the last block flush, because compression would have been\n     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n     * transform a block into a stored block.\n     */\n    _tr_stored_block(s, buf, stored_len, last);\n\n  } else if (s.strategy === Z_FIXED || static_lenb === opt_lenb) {\n\n    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n    compress_block(s, static_ltree, static_dtree);\n\n  } else {\n    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n    compress_block(s, s.dyn_ltree, s.dyn_dtree);\n  }\n  // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n  /* The above check is made mod 2^32, for files larger than 512 MB\n   * and uLong implemented on 32 bits.\n   */\n  init_block(s);\n\n  if (last) {\n    bi_windup(s);\n  }\n  // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n  //       s->compressed_len-7*last));\n}\n\n/* ===========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nfunction _tr_tally(s, dist, lc)\n//    deflate_state *s;\n//    unsigned dist;  /* distance of matched string */\n//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n{\n  //var out_length, in_length, dcode;\n\n  s.pending_buf[s.d_buf + s.last_lit * 2]     = (dist >>> 8) & 0xff;\n  s.pending_buf[s.d_buf + s.last_lit * 2 + 1] = dist & 0xff;\n\n  s.pending_buf[s.l_buf + s.last_lit] = lc & 0xff;\n  s.last_lit++;\n\n  if (dist === 0) {\n    /* lc is the unmatched char */\n    s.dyn_ltree[lc * 2]/*.Freq*/++;\n  } else {\n    s.matches++;\n    /* Here, lc is the match length - MIN_MATCH */\n    dist--;             /* dist = match distance - 1 */\n    //Assert((ush)dist < (ush)MAX_DIST(s) &&\n    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n    //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n    s.dyn_ltree[(_length_code[lc] + LITERALS + 1) * 2]/*.Freq*/++;\n    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;\n  }\n\n// (!) This block is disabled in zlib defailts,\n// don't enable it for binary compatibility\n\n//#ifdef TRUNCATE_BLOCK\n//  /* Try to guess if it is profitable to stop the current block here */\n//  if ((s.last_lit & 0x1fff) === 0 && s.level > 2) {\n//    /* Compute an upper bound for the compressed length */\n//    out_length = s.last_lit*8;\n//    in_length = s.strstart - s.block_start;\n//\n//    for (dcode = 0; dcode < D_CODES; dcode++) {\n//      out_length += s.dyn_dtree[dcode*2]/*.Freq*/ * (5 + extra_dbits[dcode]);\n//    }\n//    out_length >>>= 3;\n//    //Tracev((stderr,\"\\nlast_lit %u, in %ld, out ~%ld(%ld%%) \",\n//    //       s->last_lit, in_length, out_length,\n//    //       100L - out_length*100L/in_length));\n//    if (s.matches < (s.last_lit>>1)/*int /2*/ && out_length < (in_length>>1)/*int /2*/) {\n//      return true;\n//    }\n//  }\n//#endif\n\n  return (s.last_lit === s.lit_bufsize - 1);\n  /* We avoid equality with lit_bufsize because of wraparound at 64K\n   * on 16 bit machines and because stored blocks are restricted to\n   * 64K-1 bytes.\n   */\n}\n\nexports._tr_init  = _tr_init;\nexports._tr_stored_block = _tr_stored_block;\nexports._tr_flush_block  = _tr_flush_block;\nexports._tr_tally = _tr_tally;\nexports._tr_align = _tr_align;\n\n},{\"../utils/common\":41}],53:[function(require,module,exports){\n'use strict';\n\n\nfunction ZStream() {\n  /* next input byte */\n  this.input = null; // JS specific, because we have no pointers\n  this.next_in = 0;\n  /* number of bytes available at input */\n  this.avail_in = 0;\n  /* total number of input bytes read so far */\n  this.total_in = 0;\n  /* next output byte should be put there */\n  this.output = null; // JS specific, because we have no pointers\n  this.next_out = 0;\n  /* remaining free space at output */\n  this.avail_out = 0;\n  /* total number of bytes output so far */\n  this.total_out = 0;\n  /* last error message, NULL if no error */\n  this.msg = ''/*Z_NULL*/;\n  /* not visible by applications */\n  this.state = null;\n  /* best guess about the data type: binary or text */\n  this.data_type = 2/*Z_UNKNOWN*/;\n  /* adler32 value of the uncompressed data */\n  this.adler = 0;\n}\n\nmodule.exports = ZStream;\n\n},{}]},{},[10])(10)\n});"]}