!function(){"use strict";var localStorage,JN,KN,NN,ON,PN,QN,RN,SN,TN,HP,IP,SP,TP,UP,VP,WP,XP,YP,ZP,$P,_P,aQ,bQ,cQ,dQ,eQ,fQ,gQ,hQ,iQ,jQ,kQ,lQ,mQ,nQ,oQ,pQ,qQ,rQ,sQ,tQ,uQ,vQ,wQ,xQ,yQ,zQ,AQ,BQ,CQ,DQ,EQ,FQ,GQ,HQ,IQ,JQ,KQ,LQ,MQ,NQ,OQ,PQ,QQ,RQ,SQ,TQ,UQ,VQ,WQ,XQ,YQ,ZQ,$Q,_Q,aR,bR,cR,dR,eR,fR,gR,hR,iR,jR,kR,lR,mR,nR,oR,pR,qR,rR,sR,tR,uR,vR,wR,xR,yR,zR,AR,BR,CR,DR,ER,FR,GR,HR,IR,JR,KR,LR,MR,NR,OR,PR,QR,RR,SR,TR,UR,VR,WR,XR,YR,ZR,$R,_R,aS,bS,cS,dS,eS,fS,gS,hS,iS,jS,kS,lS,mS,nS,oS,pS,qS,rS,sS,tS,uS,vS,wS,xS,yS,zS,AS,BS,CS,DS,ES,FS,GS,HS,IS,JS,KS,LS,MS,NS,OS,PS,QS,RS,SS,TS,US,VS,WS,XS,YS,ZS,$S,_S,aT,bT,cT,dT,eT,fT,gT,hT,iT,jT,kT,lT,mT,nT,oT,pT,qT,rT,sT,tT,uT,vT,wT,xT,yT,zT,AT,BT,CT,DT,ET,FT,GT,HT,IT,JT,KT,LT,MT,NT,OT,PT,QT,RT,ST,TT,UT,VT,WT,XT,YT,ZT,$T,_T,aoa,boa,koa,loa,moa,noa,ooa,poa,qoa,roa,soa,toa,uoa,voa,woa,xoa,yoa,zoa,Aoa,Boa,Coa,Doa,Eoa,Foa,Goa,Hoa,Ioa,Joa,Koa,Loa,Moa,Noa,Ooa,Poa,Qoa,Roa,Soa,Toa,Uoa,Voa,Woa,Xoa,Yoa,Zoa,$oa,_oa,apa,bpa,cpa,dpa,epa,fpa,gpa,hpa,ipa,jpa,kpa,lpa,mpa,npa,opa,ppa,qpa,rpa,spa,tpa,upa,vpa,wpa,xpa,ypa,zpa,Apa,Bpa,Cpa,Dpa,Epa,Fpa,Gpa,Hpa,Ipa,Jpa,Kpa,Lpa,Mpa,Npa,Opa,Ppa,Qpa,Rpa,Spa,Tpa,Upa,Vpa,Wpa,Xpa,Ypa,Zpa,$pa,_pa,aqa,bqa,cqa,dqa,eqa,fqa,gqa,hqa,iqa,jqa,kqa,lqa,mqa,nqa,oqa,pqa,qqa,rqa,sqa,tqa,xDa,yDa,CDa,DDa,EDa,FDa,GDa,HDa,IDa,JDa,KDa,LDa,MDa,NDa,NEa,OEa,QEa,REa,UGa,VGa,YGa,ZGa,wIa,xIa,DIa,EIa,FIa,GIa,HIa,IIa,JIa,KIa,LIa,MIa,NIa,OIa,PIa,QIa,RIa,SIa,TIa,UIa,VIa,WIa,XIa,YIa,ZIa,$Ia,_Ia,aJa,bJa,cJa,dJa,eJa,fJa,gJa,hJa,iJa,jJa,kJa,lJa,mJa,nJa,oJa,pJa,qJa,rJa,sJa,tJa,uJa,vJa,wJa,xJa,yJa,zJa,AJa,BJa,CJa,DJa,EJa,cMa,dMa,iMa,jMa,kMa,lMa,mMa,nMa,oMa,dWa,eWa,jWa,kWa,lWa,mWa,nWa,oWa,pWa,J9a,K9a,O9a,P9a,Q9a,R9a,S9a,T9a,U9a,V9a,W9a,X9a,Y9a,Z9a,$9a,_9a,aab,bab,cab,dab,eab,fab,gab,hab,iab,jab,kab,lab,mab,nab,oab,pab,qab,rab,sab,tab,uab,vab,wab,xab,yab,zab,Aab,Bab,Cab,Dab,Eab,Fab,Gab,Hab,Iab,Jab,Kab,Lab,Mab,Nab,Oab,Pab,Qab,Rab,Sab,Tab,Uab,Vab,Wab,Xab,Yab,Zab,$ab,_ab,abb,bbb,cbb,dbb,ebb,fbb,gbb,hbb,ibb,jbb,kbb,lbb,mbb,nbb,obb,pbb,qbb,rbb,sbb,tbb,ubb,vbb,wbb,xbb,ybb,zbb,Abb,Bbb,Cbb,Dbb,Ebb,Fbb,ofb,pfb,wfb,xfb,yfb,zfb,Afb,cob,dob,gob,hob,iob,job,kob,lob,Tpb,Upb,Ypb,Zpb,Urb,Vrb,Zrb,$rb,KCb,LCb,OCb,PCb,QCb,RCb,SCb,TCb,qFb,rFb,vFb,wFb,AGb,BGb,JGb,KGb,LGb,MGb,NGb,OGb,PGb,QGb,RGb,SGb,TGb,UGb,VGb,WGb,XGb,YGb,ZGb,$Gb,_Gb,aHb,bHb,cHb,dHb,eHb,fHb,gHb,hHb,iHb,jHb,kHb,lHb,mHb,nHb,oHb,pHb,qHb,rHb,sHb,tHb,uHb,vHb,wHb,xHb,yHb,zHb,AHb,BHb;self.Squeak={},self.SqueakJS={};try{if(localStorage=self.localStorage,localStorage["squeak-foo:"]="bar","bar"!==localStorage["squeak-foo:"])throw Error();delete localStorage["squeak-foo:"]}catch(e){localStorage={}}function LN(e,t){return 31<t?0:e<<t}function MN(e,t){return 31<t?0:e>>>t}function UN(){return SN}function VN(e,t){var i,r,a;for((r=t-e)<0&&(r=0-r),i=63,a=1;a<=62;a++)63===i&&TN[a-1]>=r&&(i=a);return i}function WN(e){var t,i,r;for(i=0,t=e;;){if(!(0<(r=t-NN)))return i+=MN(PN,0-r),PN&=MN(255,8-(NN-=t)),i;i+=LN(PN,r),t-=NN,PN=QN[++ON-1],NN=8}}function XN(e,t){var i,r,a,s;for(r=t,a=e;;){if(!((s=(i=8-NN)-a)<0))return PN+=LN(r,s),NN+=a,self;PN+=MN(r,0-s),QN[++ON-1]=PN,r&=LN(1,(PN=NN=0)-s)-1,a-=i}}function YN(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m;if(e=RN.stackValue(1),t=RN.stackIntegerValue(0),d=RN.fetchIntegerofObject(0,e),h=RN.fetchIntegerofObject(1,e),u=RN.fetchIntegerofObject(2,e),c=RN.fetchIntegerofObject(3,e),l=RN.fetchIntegerofObject(4,e),f=RN.fetchIntegerofObject(5,e),PN=RN.fetchIntegerofObject(6,e),NN=RN.fetchIntegerofObject(7,e),ON=RN.fetchIntegerofObject(8,e),QN=RN.fetchBytesofObject(9,e),m=RN.fetchInt16ArrayofObject(10,e),b=RN.fetchIntegerofObject(12,e),o=RN.fetchIntegerofObject(13,e),TN=RN.fetchInt16ArrayofObject(14,e),p=RN.fetchInt16ArrayofObject(15,e),RN.failed())return null;for(a=1;a<=t;a++)if(1==(a&f))32767<(d=WN(16))&&(d-=65536),h=WN(6),m[++b-1]=d;else{for(r=WN(o),n=TN[h],s=0,i=l;0<i;)0<(r&i)&&(s+=n),n>>>=1,i>>>=1;s+=n,0<(r&u)?d-=s:d+=s,32767<d?d=32767:d<-32768&&(d=-32768),(h+=p[r&c])<0?h=0:88<h&&(h=88),m[++b-1]=d}if(RN.failed())return null;RN.storeIntegerofObjectwithValue(0,e,d),RN.storeIntegerofObjectwithValue(1,e,h),RN.storeIntegerofObjectwithValue(6,e,PN),RN.storeIntegerofObjectwithValue(7,e,NN),RN.storeIntegerofObjectwithValue(8,e,ON),RN.storeIntegerofObjectwithValue(12,e,b),RN.pop(1)}function ZN(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y,j,I,O;if(e=RN.stackValue(1),t=RN.stackIntegerValue(0),y=RN.fetchInt16ArrayofObject(0,e),k=RN.fetchInt16ArrayofObject(1,e),b=RN.fetchIntegerofObject(2,e),v=RN.fetchIntegerofObject(3,e),m=RN.fetchIntegerofObject(4,e),g=RN.fetchIntegerofObject(5,e),PN=RN.fetchIntegerofObject(6,e),NN=RN.fetchIntegerofObject(7,e),ON=RN.fetchIntegerofObject(8,e),QN=RN.fetchBytesofObject(9,e),O=RN.fetchInt16ArrayofObject(10,e),j=RN.fetchInt16ArrayofObject(11,e),I=RN.fetchIntegerofObject(12,e),d=RN.fetchIntegerofObject(13,e),TN=RN.fetchInt16ArrayofObject(14,e),S=RN.fetchInt16ArrayofObject(15,e),RN.failed())return null;for(c=y[0],f=y[1],n=k[0],o=k[1],s=1;s<=t;s++)if(1==(s&g))c=WN(16),n=WN(6),f=WN(16),o=WN(6),32767<c&&(c-=65536),32767<f&&(f-=65536),O[++I-1]=c,j[I-1]=f;else{for(r=WN(d),a=WN(d),h=TN[n],p=TN[o],u=l=0,i=m;0<i;)0<(r&i)&&(u+=h),0<(a&i)&&(l+=p),h>>>=1,p>>>=1,i>>>=1;u+=h,l+=p,0<(r&b)?c-=u:c+=u,0<(a&b)?f-=l:f+=l,32767<c?c=32767:c<-32768&&(c=-32768),32767<f?f=32767:f<-32768&&(f=-32768),(n+=S[r&v])<0?n=0:88<n&&(n=88),(o+=S[a&v])<0?o=0:88<o&&(o=88),O[++I-1]=c,j[I-1]=f}if(y[0]=c,y[1]=f,k[0]=n,k[1]=o,RN.failed())return null;RN.storeIntegerofObjectwithValue(6,e,PN),RN.storeIntegerofObjectwithValue(7,e,NN),RN.storeIntegerofObjectwithValue(8,e,ON),RN.storeIntegerofObjectwithValue(12,e,I),RN.pop(1)}function $N(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g;if(e=RN.stackValue(1),t=RN.stackIntegerValue(0),m=RN.fetchIntegerofObject(0,e),d=RN.fetchIntegerofObject(1,e),f=RN.fetchIntegerofObject(2,e),h=RN.fetchIntegerofObject(4,e),p=RN.fetchIntegerofObject(5,e),PN=RN.fetchIntegerofObject(6,e),NN=RN.fetchIntegerofObject(7,e),ON=RN.fetchIntegerofObject(8,e),QN=RN.fetchBytesofObject(9,e),g=RN.fetchInt16ArrayofObject(10,e),v=RN.fetchIntegerofObject(12,e),c=RN.fetchIntegerofObject(13,e),TN=RN.fetchInt16ArrayofObject(14,e),b=RN.fetchInt16ArrayofObject(15,e),RN.failed())return null;for(l=TN[0],s=1;s<=t;s++)if(1==(s&p))(n=m=g[++v-1])<0&&(n+=65536),XN(16,n),s<t&&(d=VN(m,g[v])),XN(6,d);else{for(u=0,(a=g[++v-1]-m)<0&&(u=f,a=0-a),o=r=0,i=h;0<i;)l<=a&&(r+=i,o+=l,a-=l),l>>>=1,i>>>=1;o+=l,0<u?m-=o:m+=o,32767<m?m=32767:m<-32768&&(m=-32768),(d+=b[r])<0?d=0:88<d&&(d=88),l=TN[d],XN(c,u|r)}if(0<NN&&(QN[++ON-1]=PN),RN.failed())return null;RN.storeIntegerofObjectwithValue(0,e,m),RN.storeIntegerofObjectwithValue(1,e,d),RN.storeIntegerofObjectwithValue(6,e,PN),RN.storeIntegerofObjectwithValue(7,e,NN),RN.storeIntegerofObjectwithValue(8,e,ON),RN.storeIntegerofObjectwithValue(12,e,v),RN.pop(1)}function _N(){var e;return e=RN.stackValue(1),RN.stackIntegerValue(0),PN=RN.fetchIntegerofObject(6,e),NN=RN.fetchIntegerofObject(7,e),ON=RN.fetchIntegerofObject(8,e),QN=RN.fetchIntegerofObject(9,e),TN=RN.fetchIntegerofObject(14,e),RN.failed()?null:(success(!1),RN.failed()?null:(RN.storeIntegerofObjectwithValue(6,e,PN),RN.storeIntegerofObjectwithValue(7,e,NN),RN.storeIntegerofObjectwithValue(8,e,ON),void RN.pop(1)))}function aO(e){return!1!=((RN=e).majorVersion()==JN)&&RN.minorVersion()>=KN}function JP(e){return"number"==typeof e?VT.classSmallInteger():e.sqClass}function KP(e){return e.pointers?e.pointers.length:e.words?e.words.length:e.bytes?e.bytes.length:0}function MP(e,t){return 0|Math.floor(e/t)}function OP(e,t){return 31<t?0:e<<t}function PP(e,t){return 31<t?0:e>>>t}function QP(e,t){return new Int32Array(e.buffer,e.byteOffset+4*t)}function RP(e,t){return new Float32Array(e.buffer,e.byteOffset+4*t)}function aU(){return _T[qS]}function bU(e){return _T[qS]=e}function cU(){return _T[rS]}function eU(e,t){var i;return t<(i=e+hU()-1&~(hU()-1))?t:i}function gU(e,t){return t-1&~(hU()-1)}function hU(){return _T[tS]}function jU(){return _T[uS]}function kU(e){return _T[uS]=e}function lU(){return _T[vS]}function mU(e){return _T[vS]=e}function oU(e,t){var i;return 0===e?t<0?0-t:t:0===t?e<0?0-e:e:(i=e*e+t*t)<32?[0,1,1,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,6][i]:Math.sqrt(i)+.5|0}function pU(e){BU(1)&&(UT[rX()]=e,sX(rX()+1))}function tU(){return _T[wS]}function uU(e){return _T[wS]=e}function vU(){return _T[xS]}function wU(e){return _T[xS]=e}function xU(e){return XY(e)}function zU(){return W_(6),X_()}function AU(e,t){var i,r,a,s;if(!EU(a=rQ+e))return 0;if(ZT=(r=ZT)+a,lZ(r,pR),hZ(r,0),jZ(r,a),i=SV(r),wX())for(s=0;s<=e-1;s++)i[s]=L_(t[s]);else for(s=0;s<=e-1;s++)i[s]=t[s];return aZ(r,nQ,e),r}function BU(e){var t,i,r,a;if(xU(e)){if(0!==vU())for(r=vU(),t=vU()+e,i=1,a=vU();i<=a;i++)KT[--t]=KT[--r];return KT=QP(KT,e),1}}function CU(e,t,i){var r,a,s,n;if(!EU(a=aS+t))return 0;if(ZT=(r=ZT)+a,lZ(r,i?wR:vR),hZ(r,0),jZ(r,a),n=vX(r),wX())for(s=0;s<=t-1;s++)n[s]=L_(e[s]);else for(s=0;s<=t-1;s++)n[s]=e[s];return aZ(r,$R,t),r}function EU(e){var t,i,r,a;if(BU(e)){if(0!==rX())for(r=rX(),t=rX()+e,i=1,a=rX();i<=a;i++)UT[--t]=UT[--r];return UT=QP(UT,e),1}}function GU(){return W_(3)}function JU(e){return 0==(_Y(e,nR)&LQ)}function KU(e,t,i){if(i<t){if(t<e)return t;if(e<i)return i}else{if(e<t)return t;if(i<e)return i}return e}function LU(e){return _Y(e,oQ)}function MU(e,t){return aZ(e,oQ,t)}function NU(e){return _Y(e,pQ)}function OU(e,t){return aZ(e,pQ,t)}function PU(e){return _Y(e,qQ)}function QU(e,t){return aZ(e,qQ,t)}function RU(e){return QP(YT,e+xQ)}function TU(e,t){return aZ(e,AQ,t)}function VU(e,t){return aZ(e,BQ,t)}function $U(e){return _Y(e,iQ)}function eV(e){return _Y(e,sQ)}function gV(e,t,i,r){var a,s,n,o,u,l,c,f;return s=_Y(e,hQ),n=_Y(e,jQ),32===s?0!==(f=0|t[n*r+i])&&0==(4278190080&f)&&(f|=4278190080):(f=t[n*r+PP(i,c=[0,5,4,0,3,0,0,0,2,0,0,0,0,0,0,0,1][s])],o=OP(1,s)-1,f=PP(f,c=32-s-(i&OP(1,c)-1)*s)&o,16===s?0!==f&&(a=(31&f)<<3,u=(f>>>5&31)<<3,l=(f>>>10&31)<<3,f=(a+=a>>>5)+((u+=u>>>5)<<8)+((l+=l>>>5)<<16)+(255<<24)):f=0===_Y(e,nQ)?0:SV(e)[f]),R_(f)}function hV(e){return _Y(e,lQ)}function jV(e){return Y_(X_()-e+4)}function kV(e,t){return Z_(X_()-e+4,t)}function lV(e){return Y_(X_()-e+5)}function mV(e,t){return Z_(X_()-e+5,t)}function nV(e){return Y_(X_()-e+0)}function oV(e,t){return Z_(X_()-e+0,t)}function pV(e){return Y_(X_()-e+1)}function qV(e,t){return Z_(X_()-e+1,t)}function rV(e){return Y_(X_()-e+2)}function sV(e,t){return Z_(X_()-e+2,t)}function tV(e){return Y_(X_()-e+3)}function uV(e,t){return Z_(X_()-e+3,t)}function vV(e,t,i){var r,a,s,n,o,u;for(s=KP(e),r=e.wordsAsInt32Array(),a=n=0;a<=s-1;a++){if(o=z$(a,r),!(0<=(u=A$(a,r))&&u<=t))return;n+=o}return n===i}function zV(e,t,i,r,a,s,n){var o,u,l,c;if((u=e,l=t,VT.isWords(u)&&((c=KP(u))===3*l||c===6*l))&&(function(e){var t,i,r;if(VT.isWords(e)){for(r=KP(e),t=e.wordsAsInt32Array(),i=0;i<=r-1;i++)if(!PX(t[i]))return;return 1}}(n)&&vV(i,o=KP(n),t)&&vV(r,o,t)&&vV(s,o,t)&&function(e,t){var i,r,a,s;for(r=KP(e),s=e.wordsAsInt32Array(),i=a=0;i<=r-1;i++)a+=z$(i,s);return a===t}(a,t)))return 1}function BV(e){return(kZ(e)&BR)===uR?function(e){var t;t=TX(e)?p0(e):0;if(cY(e)+t<QW())return 0;if(qW(e)-t>=KW()&&aY(e)-t>=KW())return 0;pU(e)}(e):(kZ(e)&BR)===oR?(i=TX(t=e)?e0(t):0,!(NU(t)+i<QW()||qW(t)-i>=KW()&&LU(t)-i>=KW())&&void pU(t)):void pU(e);var t,i}function DV(){return[1,.98078528040323,.923879532511287,.831469612302545,.7071067811865475,.555570233019602,.38268343236509,.1950903220161286,0,-.1950903220161283,-.3826834323650896,-.555570233019602,-.707106781186547,-.831469612302545,-.9238795325112865,-.98078528040323,-1,-.98078528040323,-.923879532511287,-.831469612302545,-.707106781186548,-.555570233019602,-.3826834323650903,-.1950903220161287,0,.1950903220161282,.38268343236509,.555570233019602,.707106781186547,.831469612302545,.9238795325112865,.98078528040323,1]}function EV(){return[0,.1950903220161282,.3826834323650897,.555570233019602,.707106781186547,.831469612302545,.923879532511287,.98078528040323,1,.98078528040323,.923879532511287,.831469612302545,.7071067811865475,.555570233019602,.38268343236509,.1950903220161286,0,-.1950903220161283,-.3826834323650896,-.555570233019602,-.707106781186547,-.831469612302545,-.9238795325112865,-.98078528040323,-1,-.98078528040323,-.923879532511287,-.831469612302545,-.707106781186548,-.555570233019602,-.3826834323650903,-.1950903220161287,0]}function FV(e,t){return e<0?0:t<=e?t-1:e}function GV(){var e,t;for((e=PP(K$(),lU()))<0&&(e=0),(t=PP(G$(),lU())+1)>I$()&&(t=I$());e<t;)$T[e]=0,++e;L$(I$()),H$(0)}function HV(){return _T[DS]}function IV(e){return _T[DS]=e}function JV(){return _T[ES]}function KV(e){return _T[ES]=e}function LV(){return _T[FS]}function MV(e){return _T[FS]=e}function NV(){return _T[GS]}function OV(e){return _T[GS]=e}function PV(){return _T[HS]}function QV(e){return _T[HS]=e}function RV(){return RP(_T,IS)}function SV(e){return QP(YT,e+mQ)}function TV(e,t){var i,r,a,s,n,o,u,l,c,f,h,p,d;return a=f=nV(e),s=h=pV(e),o=p=rV(e),u=d=tV(e),l=a+=(p-f)*t|0,c=s+=(d-h)*t|0,l+=((o+=((i=jV(e))-p)*t|0)-a)*t|0,s=KU(s,h,c+=((u+=((r=lV(e))-d)*t|0)-s)*t|0),u=KU(u,c,r),n=zU(),RT?0:(sV(e,a),uV(e,s),kV(e,l),mV(e,c),oV(n,l),qV(n,c),sV(n,o),uV(n,u),kV(n,i),mV(n,r),n)}function UV(e){var t,i,r,a,s,n,o,u,l,c,f,h,p;return s=zU(),RT?0:(r=c=nV(e),a=f=pV(e),n=h=rV(e),o=p=tV(e),u=n+=(t=jV(e))-h>>1,l=o+=(i=lV(e))-p>>1,u+=(r+=h-c>>1)-n>>1,l+=(a+=p-f>>1)-o>>1,sV(e,r),uV(e,a),kV(e,u),mV(e,l),oV(s,u),qV(s,l),sV(s,n),uV(s,o),kV(s,t),mV(s,i),s)}function VV(e,t){var i,r,a;i=RU(e)[yQ]>>8,(r=i0(e)[yQ]>>8)<i&&(a=i,i=r,r=a),rW(e,i),k0(e,t<r-i?r-i:t)}function ZV(){return _T[SS]}function $V(e){return _T[SS]=e}function _V(){return _T[TS]}function aW(e){return _T[TS]=e}function bW(){return _T[US]}function dW(){return _T[VS]}function fW(e){var t,i,r,a,s,n;(t=PP(K$(),lU()))<NV()&&(t=NV()),(i=PP(G$()+hU()-1,lU()))>JV()&&(i=JV()),(r=PP(e,lU()))<PV()||r>=LV()||i<NV()||t>=JV()||(a=t,s=i,n=r,(MT||HX())&&MT(a,s,n))}function gW(e){return lZ(e,kZ(e)|LQ)}function hW(e){return lZ(e,kZ(e)&~LQ)}function jW(e,t){return aZ(e,iR,t)}function kW(e){return _Y(e,kR)}function lW(e,t){return aZ(e,kR,t)}function nW(e,t){return aZ(e,jR,t)}function oW(){return RP(_T,WS)}function qW(e){return _Y(e,LR)}function rW(e,t){return aZ(e,LR,t)}function sW(e){return _Y(e,MR)}function tW(e,t){return aZ(e,MR,t)}function uW(e){return _Y(e,NR)}function vW(e,t){return aZ(e,NR,t)}function wW(e,t){var i,r,a;for(i=D_(),r=e,a=K_();a<t;){if(0!==(i=D_())&&fX(i,r,a))return 1;m$(a),r=a,a=K_()}return 0!==(i=D_())?fX(i,r,t):void 0}function xW(){return function(e,t,i,r){var a,s,n,o,u,l,c,f,h,p,d,b,m,v,g;if(1!==hU())return function(e,t,i,r){var a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y,j,I,O;if(!(n=wY(e)))return null;u=hV(e),o=$U(e),y=1===eV(e),f=t-WW(e),h=r-YW(e),d=DW(e),m=SW(e),p=f*d+h*FW(e),b=f*m+h*UW(e),a=hU(),g=eU(t,i),S=gU(0,i),s=lU(),l=aU(),c=cU(),j=t;for(;j<g;)y&&(p=q$(p,u<<16),b=q$(b,o<<16)),I=p>>16,O=b>>16,y||(I=FV(I,u),O=FV(O,o)),0<=I&&0<=O&&I<u&&O<o&&(v=PP((v=gV(e,n,I,O))&l,c),k=PP(j,s),$T[k]=$T[k]+v),p+=d,b+=m,++j;l=4042322160|PP(aU(),lU()),c=lU();for(;j<S;)y&&(p=q$(p,u<<16),b=q$(b,o<<16)),I=p>>16,O=b>>16,y||(I=FV(I,u),O=FV(O,o)),0<=I&&0<=O&&I<u&&O<o&&(v=PP((v=gV(e,n,I,O))&l,c),k=PP(j,s),$T[k]=$T[k]+v),p+=OP(d,c),b+=OP(m,c),j+=a;l=aU(),c=cU();for(;j<i;)y&&(p=q$(p,u<<16),b=q$(b,o<<16)),I=p>>16,O=b>>16,y||(I=FV(I,u),O=FV(O,o)),0<=I&&0<=O&&I<u&&O<o&&(v=PP((v=gV(e,n,I,O))&l,c),k=PP(j,s),$T[k]=$T[k]+v),p+=d,b+=m,++j}(e,t,i,r);if(!(a=wY(e)))return null;n=hV(e),s=$U(e),d=1===eV(e),o=t-WW(e),u=r-YW(e),c=DW(e),h=SW(e),l=o*c+u*FW(e),f=o*h+u*UW(e),b=t,m=i;for(;b<m;)d&&(l=q$(l,n<<16),f=q$(f,s<<16)),v=l>>16,g=f>>16,d||(v=FV(v,n),g=FV(g,s)),0<=v&&0<=g&&v<n&&g<s&&(p=gV(e,a,v,g),$T[b]=p),l+=c,f+=h,++b}(WX(),YX(),$X(),ZV())}function BW(e,t,i){var r,a;if(1!==hU())return function(e,t,i){var r,a,s,n,o,u,l,c;if(n=eU(t,i),u=gU(0,i),r=hU(),a=lU(),(c=t)<n)for(l=PP(e&aU(),cU());c<n;)o=PP(c,a),$T[o]=$T[o]+l,++c;if(c<u)for(s=4042322160|PP(aU(),lU()),l=PP(e&s,lU());c<u;)o=PP(c,a),$T[o]=$T[o]+l,c+=r;if(c<i)for(l=PP(e&aU(),cU());c<i;)o=PP(c,a),$T[o]=$T[o]+l,++c}(e,t,i);for(r=t,a=i;r+4<a;)$T[r]=e,$T[r+1]=e,$T[r+2]=e,$T[r+3]=e,r+=4;for(;r<a;)$T[r]=e,++r}function DW(e){return _Y(e,UR)}function FW(e){return _Y(e,VR)}function HW(){return function(e,t,i,r){var a,s,n,o,u,l,c,f;n=vX(e),u=tX(e),s=DW(e),a=(t-WW(e))*s+(r-YW(e))*FW(e),l=c=t,f=i;for(;((o=a>>16)<0||u<=o)&&l<f;)++l,a+=s;c<l&&(o<0&&(o=0),u<=o&&(o=u-1),BW(n[o],c,l));if(1===hU())for(;(o=a>>16)<u&&0<=o&&l<f;)$T[l]=n[o],++l,a+=s;else l=function(e,t,i,r,a,s){var n,o,u,l,c,f,h,p,d,b,m,v;n=hU(),o=lU(),b=tX(e),d=(c=i)>>16,f=eU(v=a,s),p=gU(0,s),u=aU(),l=cU();for(;v<f&&d<b&&0<=d;){for(m=PP((m=t[d])&u,l);v<f&&c>>16===d;)h=PP(v,o),$T[h]=$T[h]+m,++v,c+=r;d=c>>16}u=4042322160|PP(aU(),lU()),l=lU();for(;v<p&&d<b&&0<=d;){for(m=PP((m=t[d])&u,l);v<p&&c>>16===d;)h=PP(v,o),$T[h]=$T[h]+m,v+=n,c+=OP(r,l);d=c>>16}u=aU(),l=cU();for(;v<s&&d<b&&0<=d;){for(m=PP((m=t[d])&u,l);v<s&&c>>16===d;)h=PP(v,o),$T[h]=$T[h]+m,++v,c+=r;d=c>>16}return v}(e,n,a,s,l,i);l<f&&(o<0&&(o=0),u<=o&&(o=u-1),BW(n[o],l,f))}(WX(),YX(),$X(),ZV())}function KW(){return _T[XS]}function MW(){return _T[YS]}function OW(){return _T[ZS]}function QW(){return _T[$S]}function SW(e){return _Y(e,WR)}function UW(e){return _Y(e,XR)}function WW(e){return _Y(e,YR)}function YW(e){return _Y(e,ZR)}function aX(){return function(e,t,i,r){var a,s,n,o,u,l,c,f,h,p,d,b;h=vX(e),p=tX(e),s=t-WW(e),n=r-YW(e),u=DW(e),c=SW(e),o=s*u+n*FW(e),l=s*c+n*UW(e),d=t,b=i,f=(p-1)*(p-1);for(;M$(o>>16,l>>16)>=f&&d<b;)++d,o+=u,l+=c;t<d&&BW(h[p-1],t,d);(a=nZ())[0]=o,a[1]=l,d<WW(e)&&(d=(1===hU()?function(e,t,i,r,a,s,n){var o,u,l,c,f,h,p,d;for(h=t[f=oU((o=0|i[0])>>16,(u=0|i[1])>>16)],l=(f-1)*(f-1),p=s,(d=n)>WW(e)&&(d=WW(e));p<d;){for(;p<d&&M$(o>>16,u>>16)>=l;)$T[p]=h,++p,o+=r,u+=a;for(c=M$(o>>16,u>>16);c<l;)h=t[--f],l=(f-1)*(f-1)}return i[0]=o,i[1]=u,p}:function(e,t,i,r,a,s,n){var o,u,l,c,f,h,p,d,b,m,v,g,k,S,y;if(f=0|i[0],h=0|i[1],o=hU(),u=lU(),m=((g=oU(f>>16,h>>16))-1)*(g-1),S=s,n<(y=WW(e))&&(y=n),p=eU(s,y),b=gU(0,y),S<p)for(l=aU(),c=cU(),k=PP((k=t[g])&l,c);S<p;){for(;S<p&&M$(f>>16,h>>16)>=m;)d=PP(S,u),$T[d]=$T[d]+k,++S,f+=r,h+=a;for(v=M$(f>>16,h>>16);v<m;)k=PP((k=t[--g])&l,c),m=(g-1)*(g-1)}if(S<b)for(l=4042322160|PP(aU(),lU()),c=lU(),k=PP((k=t[g])&l,c);S<b;){for(;S<b&&M$(f>>16,h>>16)>=m;)d=PP(S,u),$T[d]=$T[d]+k,S+=o,f+=OP(r,c),h+=OP(a,c);for(v=M$(f>>16,h>>16);v<m;)k=PP((k=t[--g])&l,c),m=(g-1)*(g-1)}if(S<y)for(l=aU(),c=cU(),k=PP((k=t[g])&l,c);S<y;){for(;S<y&&M$(f>>16,h>>16)>=m;)d=PP(S,u),$T[d]=$T[d]+k,++S,f+=r,h+=a;for(v=M$(f>>16,h>>16);v<m;)k=PP((k=t[--g])&l,c),m=(g-1)*(g-1)}return i[0]=f,i[1]=h,S})(e,h,a,u,c,d,b));d<b&&(d=(1===hU()?function(e,t,i,r,a,s,n){var o,u,l,c,f,h,p,d,b,m;o=0|i[0],u=0|i[1],h=oU(o>>16,u>>16),d=t[h],p=tX(e),c=(p-1)*(p-1),f=(h+1)*(h+1),l=M$(o>>16,u>>16),b=s,m=n;for(;b<m&&l<c;){for(;b<m&&M$(o>>16,u>>16)<=f;)$T[b]=d,++b,o+=r,u+=a;for(l=M$(o>>16,u>>16);f<l;)d=t[++h],f=(h+1)*(h+1)}return i[0]=o,i[1]=u,b}:function(e,t,i,r,a,s,n){var o,u,l,c,f,h,p,d,b,m,v,g,k,S,y,j;if(f=0|i[0],h=0|i[1],o=hU(),u=lU(),k=oU(f>>16,h>>16),S=tX(e),v=(S-1)*(S-1),g=(k+1)*(k+1),b=M$(f>>16,h>>16),p=eU(j=s,n),m=gU(0,n),j<p&&b<v)for(l=aU(),c=cU(),y=PP((y=t[k])&l,c);j<p&&b<v;){for(;j<p&&M$(f>>16,h>>16)<=g;)d=PP(j,u),$T[d]=$T[d]+y,++j,f+=r,h+=a;for(b=M$(f>>16,h>>16);g<b;)y=PP((y=t[++k])&l,c),g=(k+1)*(k+1)}if(j<m&&b<v)for(l=4042322160|PP(aU(),lU()),c=lU(),y=PP((y=t[k])&l,c);j<m&&b<v;){for(;j<m&&M$(f>>16,h>>16)<=g;)d=PP(j,u),$T[d]=$T[d]+y,j+=o,f+=OP(r,c),h+=OP(a,c);for(b=M$(f>>16,h>>16);g<b;)y=PP((y=t[++k])&l,c),g=(k+1)*(k+1)}if(j<n&&b<v)for(l=aU(),c=cU(),y=PP((y=t[k])&l,c);j<n&&b<v;){for(;j<n&&M$(f>>16,h>>16)<=g;)d=PP(j,u),$T[d]=$T[d]+y,++j,f+=r,h+=a;for(b=M$(f>>16,h>>16);g<b;)y=PP((y=t[++k])&l,c),g=(k+1)*(k+1)}return i[0]=f,i[1]=h,j})(e,h,a,u,c,d,b));d<i&&BW(h[p-1],d,i)}(WX(),YX(),$X(),ZV())}function eX(e,t){var i;return 0!=(i=N$(e)-N$(t))?0<i:T$(e)>>>0<T$(t)>>>0}function fX(e,t,i){var r,a,s,n,o,u;if(0===e)return!1;if(a=t<E$()?E$():t,s=i>OP(I$(),lU())?OP(I$(),lU()):i,a<OW()&&(a=OW()),s>KW()&&(s=KW()),a<K$()&&L$(a),s>G$()&&H$(s),s>E$()&&F$(s),s<=a)return!1;if(OX(e))BW(e,a,s);else{if(u=e,_T[fT]=u,o=a,_T[gT]=o,n=s,_T[hT]=n,(r=(kZ(e)&tR)>>>8)<=1)return!0;switch(r){case 0:case 1:break;case 2:HW();break;case 3:aX();break;case 4:case 5:xW()}}return!1}function hX(){var e,t,i;for(i=ZV();pX()<rX();){if(sW(e=UT[pX()])>i)return!1;if(((t=kZ(e))&BR)===qR)return!0;if(!XY(1))return!1;switch(t){case 0:case 1:case 2:case 3:break;case 4:$$(UT[pX()],ZV());break;case 5:!function(e,t){var i,r,a,s,n,o,u,l;a=p0(e),r=mZ(a),n=qW(e),o=sW(e),$$(e,o),s=kW(e),u=kY(e),rW(e,n-r),lW(e,s+a),0<u?u0(e,mY(e)+a):(u0(e,a-mY(e)),rW(e,qW(e)+mY(e)));l=0-s-r,m0(e,0),o0(e,l),(r<=0&&l<0?hW:gW)(e);if(o!==t){for(i=o;i<=t-1;i++)l_(e);lW(e,kW(e)-(t-o))}}(UT[pX()],ZV());break;case 6:Y$(UT[pX()],ZV());break;case 7:!function(e,t){var i,r,a,s,n,o,u,l;for(s=e0(e),a=mZ(s),i=LU(e),o=sW(e),Y$(e,o),n=kW(e),r=0;r<=5;r++)i0(e)[r]=RU(e)[r];0===(u=RU(e)[vQ])&&RU(e)[tQ];u=0<=u?1:-1;(u<0?function(e,t,i,r){var a,s;RU(e)[yQ]=RU(e)[yQ]-256*i,a=i0(e)[yQ],i0(e)[yQ]=a+256*(t-i),s=i0(e)[zQ],i0(e)[zQ]=s+256*t,QU(e,r-i)}:function(e,t,i,r){var a,s;RU(e)[yQ]=RU(e)[yQ]+256*i,a=i0(e)[yQ],i0(e)[yQ]=a-256*(t-i),s=i0(e)[zQ],i0(e)[zQ]=s+256*t,QU(e,r-i+t)})(e,s,a,i);0===n&&(RU(e)[yQ]=256*PU(e));lW(e,n+s),l=0-n-a,b0(e,0),d0(e,l),(a<=0&&l<0?hW:gW)(e);if(VV(e,s),o!==t){for(r=o;r<=t-1;r++)j_(e,r);lW(e,kW(e)-(t-o))}}(UT[pX()],ZV())}JX(e),qX(pX()+1)}return!1}function iX(){var e,t,i;for(t=i=KW();tU()<vU();){if((t=i=qW(e=KT[tU()]))>=KW())return!1;if(m$(t),TX(e)&&B_(e),JU(e)&&(A_(e),RT))return!1;uU(tU()+1),tU()<vU()&&(i=qW(KT[tU()]))>=OW()&&wW(t,i)}return i<KW()&&wW(i,KW()),!1}function jX(){for(var e,t,i;tU()<vU();)if(0==(e=kW(t=KT[tU()])-1))p$();else{if(lW(t,e),((i=kZ(t))&BR)===qR)return!0;switch(i){case 0:case 1:case 2:case 3:break;case 4:h_(KT[tU()],ZV());break;case 5:l_(KT[tU()],ZV());break;case 6:f_(KT[tU()],ZV());break;case 7:j_(KT[tU()],ZV())}s$(),uU(tU()+1)}return!1}function kX(e,t){var i;for(i=0;i<S$()&&(T$(i)!==e||N$(i)!==t);)i+=3;return i>=S$()?-1:i}function lX(){return V$()===ER}function mX(){var e;e=3,__($_()+e)}function nX(){return XT}function oX(e,t){var i;return e===t||(0!==(i=sW(e)-sW(t))?i<0:(i=qW(e)-qW(t))<0)}function pX(){return _T[_S]}function qX(e){return _T[_S]=e}function rX(){return _T[aT]}function sX(e){return _T[aT]=e}function tX(e){return _Y(e,$R)}function vX(e){return QP(YT,e+_R)}function wX(){return 0!==_T[bT]}function yX(e){return _T[bT]=e}function zX(){return 0!==_T[cT]}function BX(e){return _T[cT]=e}function CX(e,t){var i,r,a,s,n;if(-1===(i=kX(e,t)))return!1;if(0===i)return mX(),!0;if(U$(i,T$(0)),O$(i,N$(0)),R$(i,Q$(0)),mX(),S$()<=3)return!0;for(n=0,i=3;i<S$();)eX(i,n)&&(n=i),i+=3;return n+3===S$()||(s=T$(n),U$(n,I_()),J_(s),r=N$(n),O$(n,E_()),F_(r),a=Q$(n),R$(n,G_()),H_(a)),!0}function DX(e,t){return _T[e]=_T[e]+t}function HX(){return WT=VT.ioLoadFunctionFrom("loadBitBltFrom",LT),MT=VT.ioLoadFunctionFrom("copyBitsFromtoat",LT),!!WT&&!!MT}function IX(){var e,t,i,r;x$(hU()),NV()<0&&OV(0),JV()>I$()&&KV(I$()),e=OP(NV(),lU()),_T[ZS]=e,t=OP(PV(),lU()),_T[$S]=t,i=OP(JV(),lU()),_T[XS]=i,r=OP(LV(),lU()),_T[YS]=r,sX(0),wU(0),UT=QP(YT,ZT),KT=QP(YT,ZT),function(){var e,t;for(t=0,e=ZT;t<e;)MX(t)&&(sW(t)>=MW()||BV(t)),t+=_Y(t,mR)}(),RT||(0!==rX()?(function e(t,i,r){var a;var s;var n;var o;var u;var l;var c;var f;var h;var p;var d;if((h=r+1-i)<=1)return 0;n=t[i];u=t[r];s=oX(n,u);s||(p=t[i],t[i]=t[r],t[r]=p,d=n,n=u,u=d);if(h<=2)return 0;l=i+r>>1;o=t[l];s=oX(n,o);s?(s=oX(o,u))||(p=t[r],t[r]=t[l],t[l]=p,o=u):(p=t[i],t[i]=t[l],t[l]=p,o=n);if(h<=3)return 0;c=i;f=r;a=!0;for(;a;){for(s=!0;s;)s=c<=--f&&(p=t[f],oX(o,p));for(s=!0;s;)s=++c<=f&&oX(p=t[c],o);(a=c<=f)&&(p=t[c],t[c]=t[f],t[f]=p)}e(t,i,f);e(t,c,r)}(UT,0,rX()-1),$V(sW(UT[0])),ZV()<QW()&&$V(QW()),L$(0),H$(OP(I$(),lU())-1),GV()):$V(MW()))}function JX(e){kW(e)<=0||function(e,t){var i;if(!xU(1))return;i=vU()-1;for(;!(i<t);)KT[i+1]=KT[i],--i;KT[t]=e,wU(vU()+1)}(e,function(e){var t,i;for(i=qW(e),t=0;t<vU()&&qW(KT[t])<i;)++t;for(;t<vU()&&qW(KT[t])===i&&oX(KT[t],e);)++t;return t}(e))}function MX(e){var t;return t=kZ(e),!(rR<t)&&0!=(kZ(e)&rR)}function NX(e){return OX(e)||0!=(kZ(e)&tR)}function OX(e){return 0!=(4278190080&e)}function PX(e){return 0===e||OX(e)||0<=(t=e)&&t<ZT&&NX(e);var t}function TX(e){return 0!=(kZ(e)&yR)}function WX(){return _T[fT]}function YX(){return _T[gT]}function $X(){return _T[hT]}function aY(e){return _Y(e,cS)}function cY(e){return _Y(e,dS)}function jY(e,t){return aZ(e,eS,t)}function kY(e){return _Y(e,nS)}function mY(e){return _Y(e,oS)}function pY(e,t,i,r){var a,s,n,o,u;if(a=zU(),RT)return 0;for(oV(a,e[0]),qV(a,e[1]),sV(a,t[0]),uV(a,t[1]),kV(a,i[0]),mV(a,i[1]),u=s=function(e,t){var i,r,a;i=r=a=function(e){var t,i,r,a,s,n,o;if(n=pV(e),o=tV(e),a=lV(e),0<=(i=o-n)*(r=a-o))return e;DX(AS,1),(s=i)<0&&(s=0-s);(t=r-i)<0&&(t=0-t);return TV(e,s/t)}(e),t&&(r=x_(e));a<r&&(a=r);e!==i&&t&&(r=x_(i));a<r&&(a=r);return a}(a,r),n=a;n<=s;n+=6)if(u<(o=v_(n))&&(u=o),RT)return 0;return MP(u,6)}function uY(e){return(WT||HX())&&WT(e)}function vY(e,t,i,r,a,s,n){var o,u,l,c,f,h,p,d,b,m;if(t.isNil)b=0,d=null;else{if(JP(t)!==VT.classBitmap())return VT.primitiveFail();b=KP(t),d=t.wordsAsInt32Array()}return"number"==typeof e||!VT.isPointers(e)||KP(e)<5||JP(o=VT.fetchPointerofObject(0,e))!==VT.classBitmap()?VT.primitiveFail():(u=KP(o),p=VT.fetchIntegerofObject(1,e),f=VT.fetchIntegerofObject(2,e),l=VT.fetchIntegerofObject(3,e),VT.failed()?null:!(0<=p&&0<=f)||32!==l&&8!==l&&16!==l&&1!==l&&2!==l&&4!==l||0!==b&&b!==OP(1,l)?VT.primitiveFail():(m=MP(32,l),u!==(h=MP(p+(m-1),m))*f?VT.primitiveFail():(c=AU(b,d),RT?null:(aZ(c,lQ,p),aZ(c,iQ,f),aZ(c,hQ,l),aZ(c,jQ,h),aZ(c,kQ,u),aZ(c,sQ,i),hZ(c,n),CY(c,r,a,s,p,f),c))))}function wY(e){var t,i,r;return(r=gZ(e))>KP(ST)?null:(i=VT.fetchPointerofObject(r,ST),KP(t=VT.fetchPointerofObject(0,i))!==_Y(e,kQ)?null:t.wordsAsInt32Array())}function yY(e,t,i,r,a,s,n){var o,u,l,c,f,h,p,d;if(r!==a||0!==s&&0!==n){if(o=6*e,d=i?(l=(t.int16Array||(t.int16Array=new Int16Array(t.buffer,t.byteOffset)))[0+o],h=(t.int16Array||(t.int16Array=new Int16Array(t.buffer,t.byteOffset)))[1+o],c=(t.int16Array||(t.int16Array=new Int16Array(t.buffer,t.byteOffset)))[2+o],p=(t.int16Array||(t.int16Array=new Int16Array(t.buffer,t.byteOffset)))[3+o],f=(t.int16Array||(t.int16Array=new Int16Array(t.buffer,t.byteOffset)))[4+o],(t.int16Array||(t.int16Array=new Int16Array(t.buffer,t.byteOffset)))[5+o]):(l=0|t[0+o],h=0|t[1+o],c=0|t[2+o],p=0|t[3+o],f=0|t[4+o],0|t[5+o]),l===c&&h===p||c===f&&p===d)return(l!==f||h!==d)&&(nZ()[0]=l,nZ()[1]=h,oZ()[0]=f,oZ()[1]=d,P_(2),QY(s,nZ(),oZ(),n,r,a));nZ()[0]=l,nZ()[1]=h,oZ()[0]=c,oZ()[1]=p,pZ()[0]=f,pZ()[1]=d,P_(3),u=pY(nZ(),oZ(),pZ(),0!==s&&0!==n),RT||PY(s,n,r,a,u)}}function AY(e){var t;return t=_T[eT],KP(e)<XP?null:(rW(t,VT.fetchIntegerofObject($P,e)),tW(t,VT.fetchIntegerofObject(_P,e)),vW(t,VT.fetchIntegerofObject(aQ,e)),lW(t,VT.fetchIntegerofObject(ZP,e)),t)}function CY(e,t,i,r,a,s){var n,o,u,l,c,f,h,p,d,b,m,v,g,k;i[0]=i[0]+t[0],i[1]=i[1]+t[1],r[0]=r[0]+t[0],r[1]=r[1]+t[1],M_(t),M_(i),M_(r),c=0<(u=(n=i[0]-t[0])*n+(o=i[1]-t[1])*o)?(l=n*a*65536/u|0,o*a*65536/u|0):l=0,p=0<(f=(d=r[0]-t[0])*d+(b=r[1]-t[1])*b)?(h=d*s*65536/f|0,b*s*65536/f|0):h=0,m=e,v=t[0],aZ(m,YR,v),g=e,k=t[1],aZ(g,ZR,k),aZ(e,UR,l),aZ(e,VR,c),aZ(e,WR,h),aZ(e,XR,p)}function DY(e){var t,i,r,a,s,n,o,u;if(VT.isArray(e)){for(ST=e,o=0;o<=KP(ST)-1;o++){if("number"==typeof(n=VT.fetchPointerofObject(o,ST)))return;if(!VT.isPointers(n))return;if(KP(n)<5)return;if(JP(t=VT.fetchPointerofObject(0,n))!==VT.classBitmap())return;if(i=KP(t),s=VT.fetchIntegerofObject(1,n),a=VT.fetchIntegerofObject(2,n),r=VT.fetchIntegerofObject(3,n),VT.failed())return;if(!(0<=s&&0<=a))return;if(u=MP(32,r),i!==MP(s+(u-1),u)*a)return}return 1}}function FY(e,t,i,r,a,s){var n,o,u,l,c,f,h;u=t[1]<=i[1]?(n=t,o=i,1):(n=i,o=t,-1),rW(e,n[0]),tW(e,n[1]-r),vW(e,_V()),jW(e,a),nW(e,s),l=e,c=o[0],aZ(l,cS,c),f=e,h=o[1]-r,aZ(f,dS,h),aZ(e,pS,u)}function HY(e,t,i,r,a){var s,n,o,u,l,c;s=DV()[2*e+0]*t+r|0,u=EV()[2*e+0]*i+a|0,nZ()[0]=s,nZ()[1]=u,o=DV()[2*e+2]*t+r|0,c=EV()[2*e+2]*i+a|0,pZ()[0]=o,pZ()[1]=c,n=2*(n=DV()[2*e+1]*t+r|0)-(s+o>>1),l=2*(l=EV()[2*e+1]*i+a|0)-(u+c>>1),oZ()[0]=n,oZ()[1]=l}function IY(e,t){var i;return JP(t)===VT.classPoint()&&("number"==typeof(i=VT.fetchPointerofObject(0,t))||i.isFloat)?(e[0]="number"==typeof i?i:0|VT.floatValueOf(i),"number"==typeof(i=VT.fetchPointerofObject(1,t))||i.isFloat?void(e[1]="number"==typeof i?i:0|VT.floatValueOf(i)):VT.primitiveFail()):VT.primitiveFail()}function LY(){var e,t,i,r;return 2!==VT.methodArgumentCount()?JT:0!==(t=j$(VT.stackValue(2)))?t:(i=VT.stackObjectValue(0),e=VT.stackObjectValue(1),VT.failed()?IT:0!==(t=NY(VT.fetchPointerofObject(VP,QT)))?t:uY(VT.fetchPointerofObject(TP,QT))?DY(VT.fetchPointerofObject(UP,QT))?KP(e)<XP?QQ:KP(i)<bQ?XQ:(r=V$())===JR||r===KR||r===IR?hR:0:YQ:OQ)}function NY(e){return JP(e)!==VT.classBitmap()?PQ:($T=e.words,t=KP(e)-1,_T[vT]=t,0);var t}function OY(e,t,i){return!e.isNil&&("number"==typeof e||KP(e)!==i?VT.primitiveFail():((VT.isWords(e)?function(e,t,i){var r,a;for(a=e.wordsAsFloat32Array(),r=0;r<=i-1;r++)t[r]=a[r]}:function(e,t,i){var r,a;for(r=0;r<=i-1;r++){if("number"!=typeof(a=VT.fetchPointerofObject(r,e))&&!a.isFloat)return VT.primitiveFail();t[r]="number"==typeof a?a:VT.floatValueOf(a)}})(e,t,i),!0))}function PY(e,t,i,r,a){var s,n,o,u,l,c,f,h,p,d,b;for(o=0===e||0===t?(u=!1,0):(u=!0,mZ(e)),n=6*a;0<n;){if(s=u?(b=void 0,EU(GQ)?(ZT=(b=ZT)+GQ,lZ(b,zR),hZ(b,0),jZ(b,GQ),b):0):(d=void 0,EU(gQ)?(ZT=(d=ZT)+gQ,lZ(d,oR),hZ(d,0),jZ(d,gQ),d):0),RT)return;l=s,f=i,h=r,p=o,lV(c=n)>=pV(c)?(rW(l,nV(c)),tW(l,pV(c)-p),TU(l,rV(c)),VU(l,tV(c)-p),MU(l,jV(c)),OU(l,lV(c)-p)):(rW(l,jV(c)),tW(l,lV(c)-p),TU(l,rV(c)),VU(l,tV(c)-p),MU(l,nV(c)),OU(l,pV(c)-p)),vW(l,_V()),jW(l,f),nW(l,h),u&&(aZ(s,FQ,t),k0(s,e),aZ(s,EQ,e)),n-=6}U_()}function QY(e,t,i,r,a,s){var n,o,u,l;if(o=0===e||0===r?(n=EU(bS)?(ZT=(l=ZT)+bS,lZ(l,uR),hZ(l,0),jZ(l,bS),l):0,0):(n=EU(lS)?(ZT=(u=ZT)+lS,lZ(u,AR),hZ(u,0),jZ(u,lS),u):0,mZ(e)),RT)return 0;FY(n,t,i,o,a,s),TX(n)&&(aZ(n,kS,r),u0(n,e),aZ(n,jS,e))}function SY(e){return"number"==typeof e?_Q:VT.isWords(e)?KP(e)<kT?cR:(v0(e),_T[iT]!==jT?$Q:S_()!==KP(e)?dR:bZ()!==dT?bR:(YT=QP(_T,bZ()),UT=QP(YT,dZ()),KT=QP(UT,rX()),dT+dZ()+rX()+vU()>S_()?eR:0)):aR}function VY(e){0===strcmp(e,LT)&&(MT=WT=0)}function XY(e){return!(dT+ZT+rX()+vU()+e>$_())||(m_(TR),!1)}function YY(){return 0!==_T[lT]}function $Y(e){return _T[lT]=e}function _Y(e,t){return YT[e+t]}function aZ(e,t,i){return YT[e+t]=i}function bZ(){return _T[mT]}function dZ(){return _T[nT]}function eZ(e){return _T[nT]=e}function gZ(e){return _Y(e,lR)}function hZ(e,t){return aZ(e,lR,t)}function jZ(e,t){return aZ(e,mR,t)}function kZ(e){return _Y(e,nR)&xR}function lZ(e,t){return aZ(e,nR,t)}function mZ(e){return e>>1}function nZ(){return QP(_T,oT)}function oZ(){return QP(_T,pT)}function pZ(){return QP(_T,qT)}function qZ(){return QP(_T,rT)}function rZ(){pX()>=rX()&&0===vU()&&W$(ER),ZV()>=MW()&&W$(ER)}function sZ(){var e;return 0!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=j$(VT.stackValue(0)))?VT.primitiveFailFor(e):(W$(ER),void q_())}function tZ(){var e,t,i;return PT&&(TT=VT.ioMicroMSecs()),1!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(i=k$(VT.stackValue(1),JR))?VT.primitiveFailFor(i):(t=VT.stackObjectValue(0),VT.failed()?VT.primitiveFailFor(IT):(e=AY(t))?XY(1)?(0<kW(e)&&JX(e),RT?VT.primitiveFailFor(TQ):(W$(CR),q_(),VT.pop(1),void(PT&&(DX(JS,1),DX(zT,VT.ioMicroMSecs()-TT))))):VT.primitiveFailFor(eR):VT.primitiveFailFor(QQ))}function uZ(){var e,t,i,r,a,s,n;return 5!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):(a=VT.positive32BitValueOf(VT.stackValue(0)),i=VT.positive32BitValueOf(VT.stackValue(1)),n=VT.stackObjectValue(2),e=VT.stackObjectValue(3),s=VT.stackObjectValue(4),VT.failed()?VT.primitiveFailFor(IT):0!==(t=k$(VT.stackValue(5),GR))?VT.primitiveFailFor(t):PX(i)&&PX(a)?(IY(nZ(),s),IY(oZ(),n),IY(pZ(),e),VT.failed()?VT.primitiveFailFor(IT):(P_(3),XY((r=pY(nZ(),oZ(),pZ(),!1))*gQ),RT||(i=L_(i),a=L_(a)),RT||PY(0,0,i,a,r),RT?(U_(),VT.primitiveFailFor(TQ)):VT.failed()?VT.primitiveFailFor(WQ):(q_(),void VT.pop(5)))):VT.primitiveFailFor(gR))}function vZ(){var e,t,i,r,a,s,n,o;if(5!==VT.methodArgumentCount())return VT.primitiveFailFor(JT);if(r=VT.positive32BitValueOf(VT.stackValue(0)),a=VT.stackIntegerValue(1),t=VT.positive32BitValueOf(VT.stackValue(2)),s=VT.stackIntegerValue(3),n=VT.stackObjectValue(4),VT.failed())return VT.primitiveFailFor(IT);if(0!==(e=k$(VT.stackValue(5),GR)))return VT.primitiveFailFor(e);if(i=KP(n),VT.isWords(n)){if(o=!1,i!==3*s&&i!==6*s)return VT.primitiveFailFor(IT)}else{if(!VT.isArray(n))return VT.primitiveFailFor(IT);if(i!==3*s)return VT.primitiveFailFor(IT);o=!0}return XY((0===a||0===r?bS:lS)*s)?PX(r)&&PX(t)?(r=L_(r),t=L_(t),RT?VT.primitiveFailFor(TQ):0!==r&&0!==a||0!==t?(0!==a&&(a=Q_(a))<1&&(a=1),o?function(e,t,i,r,a){var s,n,o,u,l,c,f,h,p;for(s=0;s<=t-1;s++){if(n=VT.fetchPointerofObject(3*s,e),IY(nZ(),n),n=VT.fetchPointerofObject(3*s+1,e),IY(oZ(),n),n=VT.fetchPointerofObject(3*s+2,e),IY(pZ(),n),VT.failed())return;if(P_(3),u=nZ()[0],f=nZ()[1],l=oZ()[0],h=oZ()[1],c=pZ()[0],p=pZ()[1],u===f&&l===h||l===c&&h===p)QY(r,nZ(),pZ(),a,i,0);else{if(o=pY(nZ(),oZ(),pZ(),0!==r&&0!==a),RT)return;PY(r,a,i,0,o)}if(RT)return}}(n,s,t,a,r):function(e,t,i,r,a,s){var n;for(n=1;n<=t;n++)if(yY(n-1,e,s,i,0,r,a),RT)return}(n.wordsAsInt32Array(),s,t,a,r,3*s===i),RT?VT.primitiveFailFor(TQ):VT.failed()?VT.primitiveFailFor(WQ):($Y(1),q_(),void VT.pop(5))):VT.pop(5)):VT.primitiveFailFor(gR):VT.primitiveFailFor(eR)}function wZ(){var e,t,i,r,a,s,n,o,u;return 7!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):(u=VT.stackIntegerValue(0))<=0?VT.primitiveFailFor(IT):(s=VT.stackObjectValue(1),t=VT.stackObjectValue(2),n=VT.stackObjectValue(3),o=VT.booleanValueOf(VT.stackValue(4)),e=VT.stackObjectValue(5),a=VT.stackObjectValue(6),VT.failed()?VT.primitiveFailFor(IT):0!==(i=k$(VT.stackValue(7),GR))?VT.primitiveFailFor(i):(IY(nZ(),n),IY(oZ(),t),IY(pZ(),s),VT.failed()?VT.primitiveFailFor(NQ):(r=vY(a,e,o?1:0,nZ(),oZ(),pZ(),u-1),RT?VT.primitiveFailFor(TQ):VT.failed()?VT.primitiveFailFor(WQ):(q_(),void VT.popthenPush(8,VT.positive32BitIntegerFor(r))))))}function xZ(){var e,t,i,r,a,s,n,o,u;return 7!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):(t=VT.stackObjectValue(0),r=VT.stackObjectValue(1),a=VT.stackObjectValue(2),u=VT.stackObjectValue(3),i=VT.stackObjectValue(4),s=VT.stackIntegerValue(5),n=VT.stackObjectValue(6),VT.failed()?VT.primitiveFailFor(IT):0!==(e=k$(VT.stackValue(7),GR))?VT.primitiveFailFor(e):zV(n,s,i,u,a,r,t)?XY(Math.max(gQ,bS)*s)?(o=KP(n)===3*s,function(e,t,i,r,a,s,n,o){var u,l,c,f,h,p,d,b,m,v,g,k,S;if(0!==t)for(c=m=k=p=-1,l=b=g=h=1,f=v=S=d=0,u=1;u<=t;u++){if(--l<=0&&(l=z$(++c,i),0!==(f=A$(c,i))&&(f=L_(f=n[f-1]),RT)))return;if(--b<=0&&(b=z$(++m,r),0!==(v=A$(m,r))&&(v=L_(v=n[v-1]))),--g<=0&&(g=z$(++k,a),0!==(S=A$(k,a))&&(S=Q_(S))),--h<=0&&(h=z$(++p,s),0!==(d=A$(p,s))&&(d=n[d-1])),yY(u-1,e,o,f,v,S,d),RT)return}}(n.wordsAsInt32Array(),s,i.wordsAsInt32Array(),u.wordsAsInt32Array(),a.wordsAsInt32Array(),r.wordsAsInt32Array(),t.wordsAsInt32Array(),o),RT?VT.primitiveFailFor(TQ):VT.failed()?VT.primitiveFailFor(WQ):($Y(1),q_(),void VT.pop(7))):VT.primitiveFailFor(eR):VT.primitiveFailFor(VQ))}function yZ(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p;return 5!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):(r=VT.booleanValueOf(VT.stackValue(0)),a=VT.stackValue(1),e=VT.stackValue(2),s=VT.stackValue(3),n=VT.stackValue(4),VT.failed()?VT.primitiveFailFor(IT):0!==(t=k$(VT.stackValue(5),GR))?VT.primitiveFailFor(t):(IY(nZ(),s),IY(oZ(),e),IY(pZ(),a),VT.failed()?VT.primitiveFailFor(NQ):(o=n,u=nZ(),l=oZ(),c=pZ(),f=r,i=JP(o)!==VT.classBitmap()?VT.primitiveFail():(p=KP(o),h=CU(o.wordsAsInt32Array(),p,f),RT?null:(CY(h,u,l,c,p,p),h)),RT?VT.primitiveFailFor(TQ):VT.failed()?VT.primitiveFailFor(WQ):(q_(),void VT.popthenPush(6,VT.positive32BitIntegerFor(i))))))}function zZ(){var e,t,i,r,a;return 4!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):(r=VT.positive32BitValueOf(VT.stackValue(0)),i=VT.positive32BitValueOf(VT.stackValue(1)),e=VT.stackObjectValue(2),a=VT.stackObjectValue(3),VT.failed()?VT.primitiveFailFor(IT):0!==(t=k$(VT.stackValue(4),GR))?VT.primitiveFailFor(t):PX(i)&&PX(r)?(IY(nZ(),a),IY(oZ(),e),VT.failed()?VT.primitiveFailFor(NQ):(P_(2),i=L_(i),r=L_(r),RT?VT.primitiveFailFor(TQ):(QY(0,nZ(),oZ(),0,i,r),RT?VT.primitiveFailFor(TQ):VT.failed()?VT.primitiveFailFor(WQ):(q_(),void VT.pop(4))))):VT.primitiveFailFor(gR))}function AZ(){var e,t,i,r,a,s;return 5!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):(e=VT.positive32BitValueOf(VT.stackValue(0)),t=VT.stackIntegerValue(1),a=VT.positive32BitValueOf(VT.stackValue(2)),i=VT.stackObjectValue(3),s=VT.stackObjectValue(4),VT.failed()?VT.primitiveFailFor(IT):0!==(r=k$(VT.stackValue(5),GR))?VT.primitiveFailFor(r):PX(e)&&PX(a)?(a=L_(a),e=L_(e),RT?VT.primitiveFailFor(TQ):0===a&&(0===e||t<=0)?VT.pop(5):XY(16*gQ)?(t=0<t&&0!==e?Q_(t):0,IY(nZ(),s),IY(oZ(),i),VT.failed()?VT.primitiveFailFor(NQ):(function(e,t,i,r){var a,s,n,o,u,l;for(l=oZ()[0]-nZ()[0]>>1,n=oZ()[1]-nZ()[1]>>1,a=oZ()[0]+nZ()[0]>>1,s=oZ()[1]+nZ()[1]>>1,o=0;o<=15;o++){if(HY(o,l,n,a,s),P_(3),u=pY(nZ(),oZ(),pZ(),0!==e&&0!==t),RT)return;if(PY(e,t,i,r,u),RT)return}}(t,e,0,a),RT?(U_(),VT.primitiveFailFor(TQ)):VT.failed()?VT.primitiveFailFor(WQ):($Y(1),q_(),void VT.pop(5)))):VT.primitiveFailFor(eR)):VT.primitiveFailFor(gR))}function BZ(){var e,t,i,r,a,s,n,o;if(5!==VT.methodArgumentCount())return VT.primitiveFailFor(JT);if(r=VT.positive32BitValueOf(VT.stackValue(0)),a=VT.stackIntegerValue(1),t=VT.positive32BitValueOf(VT.stackValue(2)),s=VT.stackIntegerValue(3),n=VT.stackObjectValue(4),VT.failed())return VT.primitiveFailFor(IT);if(0!==(e=k$(VT.stackValue(5),GR)))return VT.primitiveFailFor(e);if(i=KP(n),VT.isWords(n)){if(o=!1,i!==s&&2*s!==i)return VT.primitiveFailFor(IT)}else{if(!VT.isArray(n))return VT.primitiveFailFor(IT);if(i!==s)return VT.primitiveFailFor(IT);o=!0}return XY((0===a||0===r?bS:lS)*s)?PX(r)&&PX(t)?(r=L_(r),t=L_(t),RT?VT.primitiveFailFor(TQ):0!==r&&0!==a||0!==t?(0!==a&&(a=Q_(a)),o?function(e,t,i,r,a){var s,n,o,u,l;if(IY(nZ(),VT.fetchPointerofObject(0,e)),!VT.failed())for(n=nZ()[0],u=nZ()[1],s=1;s<=t-1;s++){if(IY(nZ(),VT.fetchPointerofObject(s,e)),VT.failed())return;if(o=nZ()[0],l=nZ()[1],nZ()[0]=n,nZ()[1]=u,oZ()[0]=o,oZ()[1]=l,P_(2),QY(r,nZ(),oZ(),a,i,0),RT)return;n=o,u=l}}(n,s,t,a,r):function(e,t,i,r,a,s){var n,o,u,l,c;for(l=s?(o=(e.int16Array||(e.int16Array=new Int16Array(e.buffer,e.byteOffset)))[0],(e.int16Array||(e.int16Array=new Int16Array(e.buffer,e.byteOffset)))[1]):(o=0|e[0],0|e[1]),n=1;n<=t-1;n++){if(c=s?(u=(e.int16Array||(e.int16Array=new Int16Array(e.buffer,e.byteOffset)))[2*n],(e.int16Array||(e.int16Array=new Int16Array(e.buffer,e.byteOffset)))[2*n+1]):(u=0|e[2*n],0|e[2*n+1]),nZ()[0]=o,nZ()[1]=l,oZ()[0]=u,oZ()[1]=c,P_(2),QY(r,nZ(),oZ(),a,i,0),RT)return;o=u,l=c}}(n.wordsAsInt32Array(),s,t,a,r,s===i),RT?VT.primitiveFailFor(TQ):VT.failed()?VT.primitiveFailFor(WQ):($Y(1),q_(),void VT.pop(5))):VT.pop(5)):VT.primitiveFailFor(gR):VT.primitiveFail()}function CZ(){var e,t,i,r,a,s,n,o,u,l;return 5!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):(e=VT.positive32BitValueOf(VT.stackValue(0)),t=VT.stackIntegerValue(1),a=VT.positive32BitValueOf(VT.stackValue(2)),i=VT.stackObjectValue(3),s=VT.stackObjectValue(4),VT.failed()?VT.primitiveFailFor(IT):0!==(r=k$(VT.stackValue(5),GR))?VT.primitiveFailFor(r):PX(e)&&PX(a)?(e=L_(e),a=L_(a),RT?VT.primitiveFailFor(TQ):0!==a||0!==e&&0!==t?XY(4*bS)?(t=0<t&&0!==e?Q_(t):0,IY(nZ(),s),IY(pZ(),i),VT.failed()?VT.primitiveFailFor(NQ):(oZ()[0]=pZ()[0],oZ()[1]=nZ()[1],qZ()[0]=nZ()[0],qZ()[1]=pZ()[1],P_(4),o=e,u=0,l=a,QY(n=t,nZ(),oZ(),o,u,l),QY(n,oZ(),pZ(),o,u,l),QY(n,pZ(),qZ(),o,u,l),QY(n,qZ(),nZ(),o,u,l),VT.failed()?VT.primitiveFailFor(WQ):($Y(1),q_(),void VT.pop(5)))):VT.primitiveFailFor(eR):VT.pop(5)):VT.primitiveFailFor(gR))}function DZ(){var e,t,i;return PT&&(TT=VT.ioMicroMSecs()),1!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(i=k$(VT.stackValue(1),IR))?VT.primitiveFailFor(i):(t=VT.stackObjectValue(0),VT.failed()?VT.primitiveFailFor(IT):(e=AY(t))?(0===kW(e)?p$():(s$(),uU(tU()+1)),W$(HR),q_(),VT.pop(1),void(PT&&(DX(KS,1),DX(AT,VT.ioMicroMSecs()-TT)))):VT.primitiveFailFor(QQ))}function EZ(){var e,t,i,r,a,s,n,o;if(2!==VT.methodArgumentCount())return VT.primitiveFailFor(JT);if(t=VT.stackValue(0),0!==(a=SY(e=VT.stackValue(1))))return VT.primitiveFailFor(a);if(JP(e)!==JP(t))return VT.primitiveFailFor(PQ);if((i=KP(t)-KP(e))<0)return VT.primitiveFailFor(ZQ);for(n=_T,r=t.wordsAsInt32Array(),s=0,o=$_()-1;s<=o;s++)r[s]=n[s];for(r[CS]=$_()+i,r[sT]=S_()+i,n=QP(n,$_()),r=QP(r,$_()+i),s=0,o=S_()-$_()-1;s<=o;s++)r[s]=n[s];if(0!==(a=SY(t)))return VT.primitiveFailFor(a);VT.pop(2)}function FZ(){var e;return PT&&(TT=VT.ioMicroMSecs()),0!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=k$(VT.stackValue(0),DR))||0!==(e=NY(VT.fetchPointerofObject(VP,QT)))?VT.primitiveFailFor(e):uY(VT.fetchPointerofObject(TP,QT))?((ZV()&jU())===jU()&&(fW(ZV()),rZ()),lX()||(uU(0),$V(ZV()+1),W$(HR)),q_(),void(PT&&(DX(LS,1),DX(BT,VT.ioMicroMSecs()-TT)))):VT.primitiveFailFor(OQ)}function GZ(){var e,t;t=PT,e=VT.stackObjectValue(0),e=VT.booleanValueOf(e),VT.failed()||(PT=e,VT.pop(2),VT.pushBool(t))}function HZ(){var e,t;return PT&&(TT=VT.ioMicroMSecs()),0!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=j$(VT.stackValue(0)))?VT.primitiveFailFor(e):(t=lX(),q_(),VT.pop(1),VT.pushBool(t),void(PT&&(DX(MS,1),DX(CT,VT.ioMicroMSecs()-TT))))}function IZ(){var e;return 0!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=j$(VT.stackValue(0)))?VT.primitiveFailFor(e):(VT.pop(1),void VT.pushInteger(hU()))}function JZ(){var e,t,i;return 1!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=j$(VT.stackValue(1)))?VT.primitiveFailFor(e):(t=VT.stackObjectValue(0),!VT.failed()&&VT.isWords(t)&&4<=KP(t)?((i=t.wordsAsInt32Array())[0]=i[0]+_T[AS],i[1]=i[1]+_T[yS],i[2]=i[2]+_T[BS],i[3]=i[3]+_T[zS],void VT.pop(1)):VT.primitiveFailFor(IT))}function KZ(){var e,t,i;return 1!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=j$(VT.stackValue(1)))?VT.primitiveFailFor(e):(i=VT.stackObjectValue(0),!VT.failed()&&VT.isPointers(i)&&2<=KP(i)?(VT.pushRemappableOop(i),t=VT.makePointwithxValueyValue(NV(),PV()),VT.storePointerofObjectwithValue(0,VT.topRemappableOop(),t),t=VT.makePointwithxValueyValue(JV(),LV()),i=VT.popRemappableOop(),VT.storePointerofObjectwithValue(1,i,t),void VT.popthenPush(2,i)):VT.primitiveFailFor(IT))}function LZ(){var e,t,i;return 1!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=j$(VT.stackValue(1)))?VT.primitiveFailFor(e):(t=VT.stackObjectValue(0),!VT.failed()&&VT.isWords(t)&&9<=KP(t)?((i=t.wordsAsInt32Array())[0]=i[0]+_T[NS],i[1]=i[1]+_T[MS],i[2]=i[2]+_T[RS],i[3]=i[3]+_T[JS],i[4]=i[4]+_T[QS],i[5]=i[5]+_T[OS],i[6]=i[6]+_T[LS],i[7]=i[7]+_T[PS],i[8]=i[8]+_T[KS],void VT.pop(1)):VT.primitiveFailFor(IT))}function MZ(){var e;return 0!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=j$(VT.stackValue(0)))?VT.primitiveFailFor(e):(VT.pop(1),void VT.pushInteger(_V()))}function NZ(){var e;return 0!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):"number"==typeof(QT=VT.stackValue(0))?VT.primitiveFailFor(RQ):VT.isPointers(QT)?KP(QT)<SP?VT.primitiveFailFor(UQ):0!==(e=SY(VT.fetchPointerofObject(WP,QT)))?VT.primitiveFailFor(e):(VT.pop(1),void VT.pushInteger(n_())):VT.primitiveFailFor(SQ)}function OZ(){var e,t;return 0!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=j$(VT.stackValue(0)))?VT.primitiveFailFor(e):(t=VT.makePointwithxValueyValue(bW(),dW()),void VT.popthenPush(1,t))}function PZ(){var e,t,i;return 1!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=j$(VT.stackValue(1)))?VT.primitiveFailFor(e):(t=VT.stackObjectValue(0),!VT.failed()&&VT.isWords(t)&&9<=KP(t)?((i=t.wordsAsInt32Array())[0]=i[0]+_T[DT],i[1]=i[1]+_T[CT],i[2]=i[2]+_T[HT],i[3]=i[3]+_T[zT],i[4]=i[4]+_T[GT],i[5]=i[5]+_T[ET],i[6]=i[6]+_T[BT],i[7]=i[7]+_T[FT],i[8]=i[8]+_T[AT],void VT.pop(1)):VT.primitiveFailFor(IT))}function QZ(){var e,t,i,r,a,s,n;return 1!==VT.methodArgumentCount()?VT.primitiveFail():(t=VT.stackObjectValue(0),VT.failed()?null:!VT.isWords(t)||(e=KP(t))<kT?VT.primitiveFail():(v0(t),YT=QP(_T,dT),i=jT,_T[iT]=i,r=e,_T[sT]=r,__(e),W$(GR),a=dT,_T[mT]=a,eZ(4),lZ(0,sR),jZ(0,4),hZ(0,0),qX(0),sX(0),uU(0),wU(0),o_(0),$Y(0),OV(0),KV(0),QV(0),MV(0),aW(0),_T[DT]=0,_T[CT]=0,_T[HT]=0,_T[zT]=0,_T[GT]=0,_T[ET]=0,_T[BT]=0,_T[FT]=0,_T[AT]=0,_T[NS]=0,_T[MS]=0,_T[RS]=0,_T[JS]=0,_T[QS]=0,_T[OS]=0,_T[LS]=0,_T[PS]=0,_T[KS]=0,_T[AS]=0,_T[yS]=0,_T[BS]=0,_T[zS]=0,(s=oW())[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=1,BX(s[5]=0),(n=RV())[0]=1,n[1]=0,n[2]=1,n[3]=0,n[4]=1,n[5]=0,n[6]=1,yX(n[7]=0),VT.pop(2),void VT.push(t)))}function RZ(){var e;return PT&&(TT=VT.ioMicroMSecs()),0!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=k$(VT.stackValue(0),GR))||0!==(e=NY(VT.fetchPointerofObject(VP,QT)))?VT.primitiveFailFor(e):(IX(),RT?VT.primitiveFailFor(TQ):(W$(CR),VT.failed()||q_(),void(PT&&(DX(NS,1),DX(DT,VT.ioMicroMSecs()-TT)))))}function SZ(){var e,t,i,r;return PT&&(TT=VT.ioMicroMSecs()),2!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(t=k$(VT.stackValue(2),KR))||0!==(t=NY(VT.fetchPointerofObject(VP,QT)))?VT.primitiveFailFor(t):(i=VT.stackObjectValue(0),e=VT.stackObjectValue(1),VT.failed()||JP(e)!==VT.classBitmap()?VT.primitiveFailFor(IT):KP(i)<bQ?VT.primitiveFailFor(XQ):(r=VT.fetchIntegerofObject(cQ,i),gZ(WX())!==r?VT.primitiveFailFor(gR):(r=VT.fetchIntegerofObject(eQ,i),YX()!==r?VT.primitiveFailFor(gR):(r=VT.fetchIntegerofObject(dQ,i),$X()!==r?VT.primitiveFailFor(gR):KP(e)<$X()-YX()?VT.primitiveFailFor(IT):VT.failed()?null:(function(e,t,i){var r,a,s,n,o,u,l,c;if(l=t,c=i,a=-1,1===hU())for(;l<c;)o=0|e[++a],$T[l]=o,++l;else for(s=aU(),n=cU(),r=lU();l<c;)u=PP(l,r),o=PP((o=0|e[++a])&s,n),$T[u]=$T[u]+o,++l;c>G$()&&H$(c),c>E$()&&F$(c)}(e.wordsAsInt32Array(),YX(),$X()),W$(FR),q_(),VT.pop(2),void(PT&&(DX(OS,1),DX(ET,VT.ioMicroMSecs()-TT))))))))}function TZ(){var e,t;return 0!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=j$(VT.stackValue(0)))?VT.primitiveFailFor(e):(t=YY(),q_(),VT.pop(1),void VT.pushBool(t))}function UZ(){var e,t;return 1!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=j$(VT.stackValue(1)))?VT.primitiveFailFor(e):(t=VT.booleanValueOf(VT.stackValue(0)),VT.failed()?VT.primitiveFailFor(IT):($Y(!0===t?1:0),q_(),void VT.pop(1)))}function VZ(){var e,t,i,r,a,s,n;return PT&&(TT=VT.ioMicroMSecs()),1!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(r=VT.stackValue(1),a=HR,s=ER,t=0===(n=j$(r))?V$()!==a&&V$()!==s?(o_(PR),hR):0:n)?VT.primitiveFailFor(t):(e=VT.stackObjectValue(0),VT.failed()?VT.primitiveFailFor(IT):(i=!1,V$()!==ER&&((i=jX())?(p_(KT[tU()],e),W$(IR)):W$(CR)),VT.failed()?null:(q_(),VT.pop(2),VT.pushBool(!i),void(PT&&(DX(PS,1),DX(FT,VT.ioMicroMSecs()-TT))))))}function WZ(){var e,t,i;return PT&&(TT=VT.ioMicroMSecs()),1!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=k$(VT.stackValue(1),FR))||0!==(e=NY(VT.fetchPointerofObject(VP,QT)))?VT.primitiveFailFor(e):DY(VT.fetchPointerofObject(UP,QT))?(0!==HV()&&(0==(ZV()&jU())&&GV(),IV(0)),t=VT.stackObjectValue(0),i=iX(),RT?VT.primitiveFailFor(TQ):(i&&r_(t),VT.failed()?VT.primitiveFailFor(gR):(i?W$(KR):(U_(),F$(0),W$(DR)),q_(),VT.pop(2),VT.pushBool(!i),void(PT&&(DX(QS,1),DX(GT,VT.ioMicroMSecs()-TT)))))):VT.primitiveFailFor(YQ)}function XZ(){var e,t,i;return PT&&(TT=VT.ioMicroMSecs()),1!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(t=k$(VT.stackValue(1),CR))?VT.primitiveFailFor(t):(e=VT.stackObjectValue(0),(i=hX())&&(p_(UT[pX()],e),qX(pX()+1)),VT.failed()?VT.primitiveFailFor(fR):(i?W$(JR):(W$(FR),IV(1),uU(0),U_()),q_(),VT.pop(2),VT.pushBool(!i),void(PT&&(DX(RS,1),DX(HT,VT.ioMicroMSecs()-TT)))))}function YZ(){var e,t,i,r,a,s,n,o;return 6!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(t=k$(VT.stackValue(6),GR))?VT.primitiveFailFor(t):(o=VT.positive32BitValueOf(VT.stackValue(0)),n=VT.positive32BitValueOf(VT.stackValue(1)),s=VT.stackIntegerValue(2),a=VT.stackIntegerValue(3),r=VT.stackIntegerValue(4),i=VT.stackIntegerValue(5),VT.failed()?VT.primitiveFailFor(IT):EU(JQ)?PX(n)&&PX(o)?(ZT=(e=ZT)+JQ,lZ(e,qR),jZ(e,JQ),hZ(e,i),rW(e,r),tW(e,a),vW(e,s),jW(e,L_(n)),nW(e,L_(o)),RT?VT.primitiveFailFor(TQ):void(VT.failed()||(q_(),VT.pop(6)))):VT.primitiveFailFor(gR):VT.primitiveFailFor(eR))}function ZZ(){var e,t,i;if(1!==VT.methodArgumentCount())return VT.primitiveFailFor(JT);if(0!==(e=k$(VT.stackValue(1),GR)))return VT.primitiveFailFor(e);if(i=VT.stackIntegerValue(0),VT.failed())return VT.primitiveFailFor(IT);for(t=0;0===t;){if(!EU(JQ))return VT.primitiveFailFor(eR);ZT=(t=ZT)+KQ,lZ(t,sR),jZ(t,KQ),hZ(t,i)}VT.failed()||(q_(),VT.pop(2),VT.pushInteger(t))}function $Z(){var e;return 0!==(e=LY())?VT.primitiveFailFor(e):(i$(),RT?s_():(function(){var e;for(;!lX();){if(PT&&(TT=VT.ioMicroMSecs()),e=hX(),PT&&(DX(RS,1),DX(HT,VT.ioMicroMSecs()-TT)),RT)return W$(CR);if(e)return W$(JR),m_(RR);if(uU(0),U_(),IV(1),PT&&(TT=VT.ioMicroMSecs()),0!==HV()&&0==(ZV()&jU())&&GV(),IV(0),e=iX(),PT&&(DX(QS,1),DX(GT,VT.ioMicroMSecs()-TT)),RT)return W$(FR);if(e)return W$(KR),m_(QR);if(U_(),F$(0),PT&&(TT=VT.ioMicroMSecs()),(ZV()&jU())===jU()&&(fW(ZV()),rZ()),PT&&(DX(LS,1),DX(BT,VT.ioMicroMSecs()-TT)),RT)return W$(DR);if(lX())return;if(uU(0),$V(ZV()+1),PT&&(TT=VT.ioMicroMSecs()),e=jX(),PT&&(DX(PS,1),DX(FT,VT.ioMicroMSecs()-TT)),RT)return W$(HR);if(e)return W$(IR),m_(OR)}}(),void s_()))}function _Z(){var e;if(0!==(e=LY()))return VT.primitiveFailFor(e);i$(),s_()}function a$(){var e,t;return 1!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=k$(VT.stackValue(1),GR))?VT.primitiveFailFor(e):(t=VT.stackIntegerValue(0),VT.failed()?VT.primitiveFailFor(IT):(x$(t),q_(),void VT.pop(1)))}function b$(){var e,t,i;if(t=VT.stackValue(0),!VT.isBytes(t))return VT.primitiveFail();if(256<=((i=t).bytes?i.bytes.length:i.words?4*i.words.length:0))return VT.primitiveFail();t.bytes,e=!1;var r=t.bytesAsString();if(r!==LT&&(LT=r,e=!0),e&&!HX())return VT.primitiveFail();VT.pop(1)}function c$(){var e,t;return 1!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=k$(VT.stackValue(1),GR))?VT.primitiveFailFor(e):(t=VT.stackObjectValue(0),!VT.failed()&&VT.isPointers(t)&&2<=KP(t)?(IY(nZ(),VT.fetchPointerofObject(0,t)),IY(oZ(),VT.fetchPointerofObject(1,t)),VT.failed()?VT.primitiveFailFor(IT):(OV(nZ()[0]),QV(nZ()[1]),KV(oZ()[0]),MV(oZ()[1]),q_(),void VT.pop(1))):VT.primitiveFailFor(IT))}function d$(){var e,t,i,r;return 1!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=k$(VT.stackValue(1),GR))?VT.primitiveFailFor(e):(t=VT.stackObjectValue(0),VT.failed()?VT.primitiveFailFor(IT):(i=t,r=RV(),yX(0),OY(i,r,8)&&(yX(1),r[1]=256*r[1],r[3]=256*r[3],r[5]=256*r[5],r[7]=256*r[7]),VT.failed()?VT.primitiveFailFor(WQ):(q_(),void VT.pop(1))))}function e$(){var e,t;return 1!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(t=k$(VT.stackValue(1),GR))?VT.primitiveFailFor(t):(e=VT.stackIntegerValue(0),VT.failed()?VT.primitiveFailFor(IT):(aW(e),q_(),void VT.pop(1)))}function f$(){var e,t,i,r,a;return 1!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=k$(VT.stackValue(1),GR))?VT.primitiveFailFor(e):(t=VT.stackObjectValue(0),VT.failed()?VT.primitiveFailFor(IT):(i=t,BX(0),r=OY(i,a=oW(),6),!VT.failed()&&r&&(BX(1),a[2]=a[2]+bW(),a[5]=a[5]+dW()),VT.failed()?VT.primitiveFailFor(IT):(q_(),void VT.pop(1))))}function g$(){var e,t,i,r;return 1!==VT.methodArgumentCount()?VT.primitiveFailFor(JT):0!==(e=k$(VT.stackValue(1),GR))?VT.primitiveFailFor(e):JP(t=VT.stackValue(0))!==VT.classPoint()?VT.primitiveFailFor(IT):(IY(nZ(),t),VT.failed()?VT.primitiveFailFor(IT):(i=nZ()[0],_T[US]=i,r=nZ()[1],_T[VS]=r,q_(),void VT.pop(1)))}function i$(){var e,t;if((t=V$())===GR){if(IX(),RT)return;t=CR}if(t===CR){if(PT&&(TT=VT.ioMicroMSecs()),e=hX(),PT&&(DX(RS,1),DX(HT,VT.ioMicroMSecs()-TT)),RT)return W$(CR);if(e)return W$(JR),m_(RR);uU(0),U_(),IV(1),t=FR}if(t===FR){if(PT&&(TT=VT.ioMicroMSecs()),0!==HV()&&0==(ZV()&jU())&&GV(),IV(0),e=iX(),PT&&(DX(QS,1),DX(GT,VT.ioMicroMSecs()-TT)),RT)return W$(FR);if(e)return W$(KR),m_(QR);t=DR,U_(),F$(0)}if(t===DR){if(PT&&(TT=VT.ioMicroMSecs()),(ZV()&jU())===jU()&&(fW(ZV()),rZ()),PT&&(DX(LS,1),DX(BT,VT.ioMicroMSecs()-TT)),RT)return W$(DR);if(lX())return;t=HR,uU(0),$V(ZV()+1)}if(t===HR){if(PT&&(TT=VT.ioMicroMSecs()),e=jX(),PT&&(DX(PS,1),DX(FT,VT.ioMicroMSecs()-TT)),RT)return W$(HR);if(e)return W$(IR),m_(OR);W$(CR)}}function j$(e){var t;return VT.failed()?MQ:"number"==typeof e?RQ:VT.isPointers(e)?KP(e)<SP?UQ:(QT=e,0!==(t=SY(VT.fetchPointerofObject(WP,e)))?t:(o_(0),ZT=dZ(),RT=!1,0)):SQ}function k$(e,t){var i;return 0!==(i=j$(e))?i:V$()===t?0:(o_(PR),hR)}function m$(e){if(0!==S$())for(;K_()<=e;)if(CX(D_(),C_()),0===S$())return}function p$(){var e;for(e=tU(),wU(vU()-1);e<vU();)KT[e]=KT[e+1],++e}function q$(e,t){var i;for(i=e;i<0;)i+=t;for(;t<=i;)i-=t;return i}function s$(){var e,t;0!==tU()&&(t=qW(e=KT[tU()]),qW(KT[tU()-1])<=t||function(e,t,i){var r;for(r=e;0<r&&qW(KT[r-1])>i;)KT[r]=KT[r-1],--r;KT[r]=t}(tU(),e,t))}function t$(){return NT=_Y(OT,FQ)}function u$(){return NT=_Y(OT,IQ)}function v$(){return NT=_Y(OT,kS)}function x$(e){var t,i,r,a;4<=e&&(t=4),2<=e&&e<4&&(t=2),e<2&&(t=1),i=t,_T[tS]=i,1===t&&(mU(0),bU(4294967295),kU(0)),2===t&&(mU(1),bU(4244438268),kU(1)),4===t&&(mU(2),bU(4042322160),kU(3)),r=2*lU(),_T[rS]=r,a=lU(),_T[sS]=a}function y$(e){return!1!=((VT=e).majorVersion()==HP)&&VT.minorVersion()>=IP}function z$(e,t){return(0|t[e])>>>16}function A$(e,t){return 65535&(0|t[e])}function B$(e,t,i){GU()&&(U$(0,e),O$(0,t),R$(0,i),3!==S$()&&eX(0,S$()-3)&&(U$(0,I_()),O$(0,E_()),R$(0,G_()),J_(e),F_(t),H_(i)))}function E$(){return _T[uT]}function F$(e){return _T[uT]=e}function G$(){return _T[tT]}function H$(e){return _T[tT]=e}function I$(){return _T[vT]}function K$(){return _T[wT]}function L$(e){return _T[wT]=e}function M$(e,t){return e*e+t*t}function N$(e){return Y_(e+1)}function O$(e,t){return Z_(e+1,t)}function Q$(e){return Y_(e+2)}function R$(e,t){return Z_(e+2,t)}function S$(){return X_()}function T$(e){return Y_(e)}function U$(e,t){return Z_(e,t)}function V$(){return _T[xT]}function W$(e){return _T[xT]=e}function Y$(e,t){var i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y,j;if(!TX(e)&&t>=NU(e))return lW(e,0);b=qW(e),m=sW(e),g=_Y(e,AQ),k=_Y(e,BQ),u=2*(g-b),l=b+LU(e)-2*g,c=2*(k-m),f=m+(r=NU(e))-2*k,(h=2*(i=r-m))<2&&(h=2),p=MP(16777216,h),n=u*(S=p),n+=(a=l*(d=((y=65535&S)*y>>>16)+y*(j=S>>>16&255)*2+(j*j<<16)>>>8)*2)>>1,o=c*p,o+=(s=f*d*2)>>1,lW(e,i),(v=RU(e))[yQ]=256*b,v[zQ]=256*m,v[vQ]=n,v[wQ]=o,v[tQ]=a,v[uQ]=s,(m=sW(e))!==t&&(f_(e,t),lW(e,i-(t-m)))}function $$(e,t){var i,r,a,s,n,o,u,l,c,f,h;if(!TX(e)&&t>=cY(e))return lW(e,0);if(i=aY(e)-qW(e),r=cY(e)-sW(e),a=0<=i?(l=1,u=i,0):(l=-1,u=0-i,1-r),s=0==r?(c=i,a=0):u<r?(c=0,u):(c=MP(u,r)*l,(f=u)-MP(f,h=r)*h|0),lW(e,r),aZ(e,nS,l),aZ(e,oS,c),jY(e,a),aZ(e,gS,s),aZ(e,fS,r),(o=sW(e))!==t){for(n=o;n<=t-1;n++)h_(e);lW(e,r-(t-o))}}function e_(e,t){var i,r,a,s,n;for(a=e[yQ],s=e[zQ],i=e[vQ],r=e[wQ],n=256*t;s<n&&0<=r;)a+=i+32768>>16,s+=r+32768>>16,i+=e[tQ],r+=e[uQ];return e[yQ]=a,e[zQ]=s,e[vQ]=i,e[wQ]=r,a>>8}function f_(e,t){rW(e,e_(RU(e),t))}function h_(e){var t,i;i=qW(e)+mY(e),0<(t=_Y(e,eS)+_Y(e,gS))&&(i+=kY(e),t-=_Y(e,fS)),jY(e,t),rW(e,i)}function j_(e,t){var i,r,a,s;i=mZ(r=e0(e)),a=_Y(e,CQ)+1,s=_Y(e,DQ)+1,b0(e,a),d0(e,s),i<=a&&hW(e),0<=s&&gW(e),s+i<0?e_(RU(e),t):RU(e)[yQ]=256*PU(e),e_(i0(e),t),VV(e,r)}function l_(e){var t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m;s=l0(e)+1,n=n0(e)+1,m0(e,s),o0(e,n),(i=mZ(r=p0(e)))<=s&&hW(e),0<=n&&gW(e),t=qW(e),h_(e),a=qW(e),(s<=r||0<=n+i)&&(u=t,l=a,b=l0(o=e),m=n0(o),h=mZ(c=p0(o)),p=t0(o),d=kY(o),f=l-u,b<c&&(d<0?p-=f:(p+=f,rW(o,u))),m+h===0&&(0<d?p-=mY(o):(p+=mY(o),rW(o,u))),0<m+h&&(d<0?(p+=f,rW(o,u)):p-=f),u0(o,p))}function m_(e){o_(e),RT=!0}function n_(){return _T[yT]}function o_(e){return _T[yT]=e}function p_(e,t){if(KP(t)<XP)return VT.primitiveFail();var i;VT.storeIntegerofObjectwithValue(YP,t,gZ(e)),VT.storeIntegerofObjectwithValue($P,t,qW(e)),VT.storeIntegerofObjectwithValue(_P,t,ZV()),VT.storeIntegerofObjectwithValue(aQ,t,uW(e)),VT.storeIntegerofObjectwithValue(ZP,t,kW(e)),i=e,_T[eT]=i}function q_(){eZ(ZT)}function r_(e){var t,i,r;if(t=WX(),i=YX(),r=$X(),KP(e)<bQ)return VT.primitiveFail();VT.storeIntegerofObjectwithValue(cQ,e,gZ(t)),VT.storeIntegerofObjectwithValue(eQ,e,i),VT.storeIntegerofObjectwithValue(dQ,e,r),VT.storeIntegerofObjectwithValue(fQ,e,ZV())}function s_(){if(VT.failed())return null;RT&&function(e,t){var i;(i=n_())===RR&&(p_(UT[pX()],e),qX(pX()+1));i===QR&&r_(t);i===OR&&p_(KT[tU()],e)}(VT.stackObjectValue(1),VT.stackObjectValue(0)),q_(),VT.pop(3),VT.pushInteger(n_())}function v_(e){var t,i,r,a,s,n,o,u,l;return l=pV(a=e),(r=(o=lV(a))===l?a:((n=o-l)<0&&(n=0-n),255<n?(DX(yS,1),UV(a)):(u=nV(a),(s=jV(a)-u)<0&&(s=0-s),32*n<s?(DX(BS,1),UV(a)):a)))!==e?(t=v_(e),RT?0:(i=v_(r),RT?0:i<=t?t:i)):e}function x_(e){var t,i,r,a,s,n;return s=nV(e),0<=(i=(n=rV(e))-s)*(r=jV(e)-n)?e:(DX(AS,1),(a=i)<0&&(a=0-a),(t=r-i)<0&&(t=0-t),TV(e,a/t))}function z_(e,t,i){0===S$()?GU()&&(J_(e),F_(t),H_(i)):CX(e,t)||B$(e,t,i)}function A_(e){var t,i;XY(6)&&(t=uW(e)<<1,0!==(i=_Y(e,iR))&&z_(i,t,999999999),0!==(i=_Y(e,jR))&&z_(i,t,999999999),m$(qW(e)))}function B_(e){var t,i,r,a,s,n;switch(n=kZ(e)>>>1,OT=e,n){case 0:case 1:break;case 2:NT=t0(OT);break;case 3:u$()}switch(a=NT,n){case 0:case 1:break;case 2:v$();break;case 3:t$()}0!==(i=NT)&&XY(3)&&(t=1+(uW(e)<<1),s=qW(e)+a,-1===(r=kX(i,t))?B$(i,t,s):Q$(r)<s&&R$(r,s),m$(qW(e)))}function C_(){return 0===S$()?-1:E_()}function D_(){return 0===S$()?0:I_()}function E_(){return N$(S$()-3)}function F_(e){return O$(S$()-3,e)}function G_(){return Q$(S$()-3)}function H_(e){return R$(S$()-3,e)}function I_(){return T$(S$()-3)}function J_(e){return U$(S$()-3,e)}function K_(){return 0===S$()?999999999:G_()}function L_(e){var t,i,r,a,s,n;return 0===e||OX(e)?(r=255&e,a=e>>>8&255,s=e>>>16&255,t=e>>>24&255,wX()&&(i=(t*(n=RV())[6]+n[7])/t,s=(s*n[0]+n[1])*i|0,a=(a*n[2]+n[3])*i|0,r=(r*n[4]+n[5])*i|0,t=t*i|0,s=Math.max(s,0),s=Math.min(s,255),a=Math.max(a,0),a=Math.min(a,255),r=Math.max(r,0),r=Math.min(r,255),t=Math.max(t,0),t=Math.min(t,255)),t<1?0:(t<255&&YY()&&m_(SR),r+(a<<8)+(s<<16)+(t<<24))):e}function M_(e){var t,i;zX()?(i=t=e,function(e,t,i){var r,a,s;r=oW(),a=(r[0]*e+r[1]*t+r[2])*hU()|0,s=(r[3]*e+r[4]*t+r[5])*hU()|0,i[0]=a,i[1]=s}(0|t[0],0|t[1],i)):(e[0]=(e[0]+bW())*hU(),e[1]=(e[1]+dW())*hU())}function P_(e){0<e&&M_(nZ()),1<e&&M_(oZ()),2<e&&M_(pZ()),3<e&&M_(qZ())}function Q_(e){var t,i,r,a;return 0===e?0:(nZ()[0]=0,nZ()[1]=0,oZ()[0]=256*e,oZ()[1]=0,pZ()[0]=0,pZ()[1]=256*e,P_(3),t=oZ()[0]-nZ()[0],i=oZ()[1]-nZ()[1],r=128+(0|Math.sqrt(t*t+i*i))>>8,t=pZ()[0]-nZ()[0],i=pZ()[1]-nZ()[1],(a=128+(0|Math.sqrt(t*t+i*i))>>8)<r&&(r=a),0===r?1:r)}function R_(e){var t,i,r,a,s;return wX()?(i=255&e,r=e>>>8&255,t=e>>>24&255,a=(a=e>>>16&255)*(s=RV())[0]+s[1]|0,r=r*s[2]+s[3]|0,i=i*s[4]+s[5]|0,t=t*s[6]+s[7]|0,a=Math.max(a,0),a=Math.min(a,255),r=Math.max(r,0),r=Math.min(r,255),i=Math.max(i,0),i=Math.min(i,255),t=Math.max(t,0),(t=Math.min(t,255))<16?0:i+(r<<8)+(a<<16)+(t<<24)):e}function S_(){return _T[sT]}function U_(){__(S_())}function W_(e){return!!XY(e)&&(__($_()-e),!0)}function X_(){return S_()-$_()}function Y_(e){return _T[$_()+e]}function Z_(e,t){return _T[$_()+e]=t}function $_(){return _T[CS]}function __(e){return _T[CS]=e}function b0(e,t){return aZ(e,CQ,t)}function d0(e,t){return aZ(e,DQ,t)}function e0(e){return _Y(e,EQ)}function i0(e){return QP(YT,e+HQ)}function k0(e,t){return aZ(e,IQ,t)}function l0(e){return _Y(e,hS)}function m0(e,t){return aZ(e,hS,t)}function n0(e){return _Y(e,iS)}function o0(e,t){return aZ(e,iS,t)}function p0(e){return _Y(e,jS)}function t0(e){return _Y(e,mS)}function u0(e,t){return aZ(e,mS,t)}function v0(e){_T=e.wordsAsInt32Array()}function coa(e){return"number"==typeof e?Jpa.classSmallInteger():e.sqClass}function doa(e){return e.pointers?e.pointers.length:e.words?e.words.length:e.bytes?e.bytes.length:0}function eoa(e){return e.bytes?e.bytes.length:e.words?4*e.words.length:0}function foa(e,t){return 0|Math.floor(e/t)}function hoa(e,t){return 31<t?0:e<<t}function ioa(e,t){return 31<t?0:e>>>t}function joa(e,t){return t<0?t<-31?0:e>>>0-t:31<t?0:e<<t}function uqa(e,t){var i,r;if(kpa<16){for(i=e^t,r=Opa[kpa];0!==i;)0!=(i&r)&&++Woa,i=ioa(i,kpa);return t}return Woa=16===kpa?(i=Jra(e,t,5,3),Woa=Woa+(31&i)+(i>>>5&31)+(i>>>10&31),i=Jra(e>>>16,t>>>16,5,3),Woa+(31&i)+(i>>>5&31)+(i>>>10&31)):(i=Jra(e,t,8,3),Woa+(255&i)+(i>>>8&255)+(i>>>16&255)),t}function vqa(e,t){var i,r,a,s;if((apa&(Goa|Eoa))!=(Goa|Eoa))return t;if(kpa<16){for(i=Opa[kpa]&cpa,s=t,a=1;a<=qpa;a++)vsa(r=s&i,usa(r)+1),s=ioa(s,kpa);return t}return 16===kpa?(vsa(r=fsa(65535&t,5,_oa),usa(r)+1),vsa(r=fsa(t>>>16,5,_oa),usa(r)+1)):vsa(r=fsa(t,8,_oa),usa(r)+1),t}function wqa(e,t){return e+t}function xqa(e,t){var i,r,a,s;return 0==(s=e>>>24)?t:255==s?e:(r=(r=(16711935&e)*s+(16711935&t)*(i=255-s)+16711935)+(r-65537>>>8&16711935)>>>8&16711935)|(a=(a=(16711935&(e>>>8|16711680))*s+(t>>>8&16711935)*i+16711935)+(a-65537>>>8&16711935)>>>8&16711935)<<8}function yqa(e,t){return zqa(e,t,!1)}function zqa(e,t,i){var r,a,s,n,o,u,l,c,f,h,p,d,b,m;if(kpa<16)return t;if(f=255-Xpa,o=t,1===qpa)i&&0===e||(o=(p=(p=(16711935&e)*Xpa+(16711935&t)*f+16711935)+(p-65537>>>8&16711935)>>>8&16711935)|(d=(d=(e>>>8&16711935)*Xpa+(t>>>8&16711935)*f+16711935)+(d-65537>>>8&16711935)>>>8&16711935)<<8);else for(r=Opa[kpa],m=ppa,b=t,n=e,s=1;s<=qpa;s++){if(l=n&r,!(0==(m&r)||i&&0==l)){for(h=b&r,a=0,c=1;c<=3;c++)a|=hoa(31&foa((31&ioa(l,u=5*(c-1)))*Xpa+(31&ioa(h,u))*f+254,255),u);o=o&~hoa(r,16*(s-1))|hoa(a,16*(s-1))}m=ioa(m,kpa),n=ioa(n,kpa),b=ioa(b,kpa)}return o}function Aqa(e,t){var i,r,a;return(a=(16711935&(a=((t>>>8&16711935)*(i=255-(e>>>24))>>>8&16711935)+(e>>>8&16711935)))<<8|255*(16777472&a))|(r=16711935&(r=((16711935&t)*i>>>8&16711935)+(16711935&e))|255*(16777472&r)>>>8)}function Bqa(e,t){return 0===e?t:zqa(e,t,!0)}function Fqa(e,t){return e&t}function Gqa(e,t){return e&~t}function Hqa(e,t){return~e&t}function Iqa(e,t){return~e&~t}function Jqa(e,t){return~t}function Kqa(e,t){return~e|t}function Lqa(e,t){return~e|~t}function Mqa(e,t){return~e}function Nqa(e,t){return~e^t}function Oqa(e,t){return e|t}function Pqa(e,t){return e|~t}function Qqa(e,t){return e^t}function Sqa(e,t){return 0}function Tqa(){Zoa<=tpa?(jqa=gqa,Apa=tpa,Uoa=tqa):(jqa=gqa+(Zoa-tpa),Uoa=tqa-(Zoa-tpa),Apa=Zoa),Zoa+Yoa<Apa+Uoa&&(Uoa-=Apa+Uoa-(Zoa+Yoa)),$oa<=upa?(kqa=hqa,Bpa=upa,Toa=Ipa):(kqa=hqa+$oa-upa,Toa=Ipa-($oa-upa),Bpa=$oa),$oa+Xoa<Bpa+Toa&&(Toa-=Bpa+Toa-($oa+Xoa)),Spa||(jqa<0&&(Apa-=jqa,Uoa+=jqa,jqa=0),fqa<jqa+Uoa&&(Uoa-=jqa+Uoa-fqa),kqa<0&&(Bpa-=kqa,Toa+=kqa,kqa=0),aqa<kqa+Toa&&(Toa-=kqa+Toa-aqa))}function Uqa(){return Tqa(),Uoa<=0||Toa<=0?(Qoa=Roa=Soa=Poa=0,null):Ara()?(function(){if(function(){var e,t;if(41===fpa)if(gpa=255,hpa=16777215,lqa=Cpa=null,2<=Jpa.methodArgumentCount()){if(gpa=Jpa.stackIntegerValue(Jpa.methodArgumentCount()-2),Jpa.failed())return Jpa.primitiveFail();if(hpa=Jpa.stackIntegerValue(Jpa.methodArgumentCount()-1),Jpa.failed())return Jpa.primitiveFail();4===Jpa.methodArgumentCount()&&(t=Jpa.stackObjectValue(1),Jpa.isBytes(t)&&(Cpa=t.bytes),e=Jpa.stackObjectValue(0),Jpa.isBytes(e)&&(lqa=e.bytes))}else{if(1!==Jpa.methodArgumentCount())return Jpa.primitiveFail();if(hpa=Jpa.stackIntegerValue(0),Jpa.failed())Jpa.primitiveFail()}}(),Jpa.failed())return Jpa.primitiveFail();if(function(){if(Spa)return!1;if(34!==fpa&&41!==fpa)return!1;if(32!==$pa)return!1;if(_pa===lpa)return!1;if(41===fpa)return 32===kpa?(function(){var e,t,i,r,a,s,n,o;a=Toa+1,s=kqa,o=Bpa;for(;0!=--a;){for(t=s*eqa+4*jqa,r=o*rpa+4*Apa,i=Uoa+1;0!=--i;)if(e=Ypa[t>>>2],0==(16777215&e)){for(t+=4,r+=4;0!=--i&&0==(16777215&(e=Ypa[t>>>2]));)t+=4,r+=4;++i}else n=ipa[r>>>2],n=_ra(e,n),ipa[r>>>2]=n,t+=4,r+=4;++s,++o}}(),Roa=(Qoa=Apa)+Uoa,Poa=(Soa=Bpa)+Toa,!0):16===kpa?(function(){var e,t,i,r,a,s,n,o,u,l,c,f,h;u=Toa+1,l=kqa,f=Bpa,i=16*(1&Apa),opa&&(i=16-i);Mpa=hoa(65535,16-i);for(;0!=--u;){for(a=l*eqa+4*jqa,n=f*rpa+4*(Apa>>1),e=4*(3&f),h=(3&jqa)-1,s=Uoa+1,i=65535===(o=Mpa)?16:0;0!=--s;)t=wpa[e+(h=h+1&3)],r=Ypa[a>>>2],0!=(16777215&r)&&(c=ipa[n>>>2],c=ioa(c&=~o,i),r=hoa(0===(r=dra(r=_ra(r,c=(31744&c)<<9|(992&c)<<6|(31&c)<<3|4278190080),t))?1:r,i),fra(n,r,o)),a+=4,opa?0===i&&(n+=4):0!==i&&(n+=4),i^=16,o=~o;++l,++f}}(),Roa=(Qoa=Apa)+Uoa,Poa=(Soa=Bpa)+Toa,!0):8===kpa&&(function(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p;a=_qa(),o=apa&~Foa,c=Toa+1,f=kqa,Mpa=8*(3&Apa),opa&&(Mpa=24-Mpa);Npa=koa^hoa(255,Mpa),n=0==(1&Apa)?0:522133279;0==(1&(p=Bpa))&&(n^=522133279);for(;0!=--c;){for(n^=522133279,i=f*eqa+4*jqa,s=p*rpa+4*(Apa>>2),r=Uoa+1,e=Mpa,l=Npa;0!=--r;)t=(Ypa[i>>>2]&~n)+n,31<(u=foa(((u=16777215&t)>>>16)+(u>>>8&255)+(255&u),3))&&(224<u&&(t=4294967295),h=ipa[s>>>2],h=ioa(h&=~l,e),h=a[h],t=hoa(t=Bra(t=_ra(t,h),o),e),fra(s,t,l)),i+=4,l=opa?0===e?(s+=4,e=24,16777215):(e-=8,l>>>8|4278190080):32===e?(s+=4,e=0,4294967040):(e+=8,l<<8|255),n^=522133279;++f,++p}}(),Roa=(Qoa=Apa)+Uoa,Poa=(Soa=Bpa)+Toa,!0);if(kpa<8)return!1;if(8===kpa&&0==(apa&Goa))return!1;32===kpa&&function(){var e,t,i,r,a,s,n,o,u;for(s=Toa+1,n=kqa,u=Bpa;0!=--s;){for(t=n*eqa+4*jqa,r=u*rpa+4*Apa,i=Uoa+1;0!=--i;)if(255==(a=(e=Ypa[t>>>2])>>>24)){for(ipa[r>>>2]=e,t+=4,r+=4;0!=--i&&(e=Ypa[t>>>2])>>>24==255;)ipa[r>>>2]=e,t+=4,r+=4;++i}else if(0==a){for(t+=4,r+=4;0!=--i&&(e=Ypa[t>>>2])>>>24==0;)t+=4,r+=4;++i}else o=Aqa(e,o=ipa[r>>>2]),ipa[r>>>2]=o,t+=4,r+=4;++n,++u}}();16===kpa&&function(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p;for(l=Toa+1,c=kqa,h=Bpa,i=16*(1&Apa),opa&&(i=16-i),Mpa=hoa(65535,16-i);0!=--l;){for(a=c*eqa+4*jqa,n=h*rpa+4*(Apa>>1),e=4*(3&h),p=(3&jqa)-1,s=Uoa+1,i=65535===(u=Mpa)?16:0;0!=--s;)t=wpa[e+(p=p+1&3)],255==(o=(r=Ypa[a>>>2])>>>24)?fra(n,r=hoa(0===(r=dra(r,t))?1:r,i),u):0!=o&&(f=ipa[n>>>2],fra(n,r=hoa(0===(r=dra(r=Aqa(r,f=(31744&(f=ioa(f&=~u,i)))<<9|(992&f)<<6|(31&f)<<3|4278190080),t))?1:r,i),u)),a+=4,opa?0===i&&(n+=4):0!==i&&(n+=4),i^=16,u=~u;++c,++h}}();8===kpa&&function(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p;for(a=_qa(),o=apa&~Foa,c=Toa+1,f=kqa,Mpa=8*(3&Apa),opa&&(Mpa=24-Mpa),Npa=koa^hoa(255,Mpa),n=0==(1&Apa)?0:522133279,0==(1&(p=Bpa))&&(n^=522133279);0!=--c;){for(n^=522133279,i=f*eqa+4*jqa,s=p*rpa+4*(Apa>>2),r=Uoa+1,e=Mpa,l=Npa;0!=--r;)31<(u=(t=(Ypa[i>>>2]&~n)+n)>>>24)&&(u<224&&(h=ipa[s>>>2],t=Aqa(t,h=a[h=ioa(h&=~l,e)])),fra(s,t=hoa(t=Bra(t,o),e),l)),i+=4,l=opa?0===e?(s+=4,e=24,16777215):(e-=8,l>>>8|4278190080):24===e?(s+=4,e=0,4294967040):(e+=8,l<<8|255),n^=522133279;++f,++p}}();return Roa=(Qoa=Apa)+Uoa,Poa=(Soa=Bpa)+Toa,!0}())return;if(30===fpa||31===fpa){if(1!==Jpa.methodArgumentCount())return Jpa.primitiveFail();if(Xpa=Jpa.stackIntegerValue(0),!(!Jpa.failed()&&0<=Xpa&&Xpa<=255))return Jpa.primitiveFail()}Woa=0,bra(),Spa?function(){var e,t,i,r,a,s;for(i=Tpa[fpa+1],s=1;s<=Toa;s++){if(t=Rpa?koa:lra(Bpa+s-1),ppa=Mpa,r=ipa[npa>>>2],e=i(t,r),r=ppa&e|r&~ppa,ipa[npa>>>2]=r,npa+=4,ppa=koa,3===fpa)for(r=t,a=2;a<=Qpa-1;a++)ipa[npa>>>2]=r,npa+=4;else for(a=2;a<=Qpa-1;a++)r=ipa[npa>>>2],e=i(t,r),ipa[npa>>>2]=e,npa+=4;1<Qpa&&(ppa=Npa,r=ipa[npa>>>2],e=i(t,r),r=ppa&e|r&~ppa,ipa[npa>>>2]=r,npa+=4),npa+=jpa}}():(function(){var e;_pa===lpa&&kqa<=Bpa&&(kqa<Bpa?(nqa=-1,kqa=kqa+Toa-1,Bpa=Bpa+Toa-1):Bpa===kqa&&jqa<Apa&&(Dpa=-1,jqa=jqa+Uoa-1,Apa=Apa+Uoa-1,1<Qpa&&(e=Mpa,Mpa=Npa,Npa=e)),npa=Bpa*rpa+4*foa(Apa,qpa),jpa=rpa*nqa-Qpa*Dpa*4)}(),$pa!==kpa||0!==apa||cqa!==opa?$qa():(function(){var e,t,i,r;t=jqa&(r=qpa-1),e=Apa&r,Upa=0<Dpa?(i=Math.min(Uoa,qpa-e),r<t+i):(i=Math.min(Uoa,1+e),t-i+1<0);Wpa=cqa?(t-e)*kpa:(e-t)*kpa;Upa&&(Wpa<0?Wpa+=32:Wpa-=32);bqa=kqa*eqa+4*foa(jqa,foa(32,$pa)),Zpa=eqa*nqa-Qpa*Dpa*4,Upa&&(Zpa-=4*Dpa)}(),function(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p;s=Tpa[fpa+1],n=4*Dpa,-32===Wpa?Wpa=a=i=0:i=Wpa<0?(a=Wpa+32,hoa(koa,0-Wpa)):0===Wpa?(a=0,koa):(a=Wpa-32,ioa(koa,Wpa));p=~i,Rpa?(r=koa,Gpa=0):r=lra(0);for(c=Bpa,f=1;f<=Toa;f++){if(1<Gpa&&(r=lra(c),c+=nqa),Upa?(l=Ypa[bqa>>>2],bqa+=n):l=0,ppa=Mpa,h=Ypa[bqa>>>2],bqa+=n,t=joa(l&p,a)|joa(h&i,Wpa),l=h,o=ipa[npa>>>2],e=s(t&r,o),o=ppa&e|o&~ppa,ipa[npa>>>2]=o,npa+=n,ppa=koa,3===fpa)if(0===Wpa&&r===koa)if(-1===Dpa)for(u=2;u<=Qpa-1;u++)h=Ypa[bqa>>>2],bqa+=n,ipa[npa>>>2]=h,npa+=n;else for(u=2;u<=Qpa-1;u++)ipa[npa>>>2]=l,npa+=n,l=Ypa[bqa>>>2],bqa+=n;else for(u=2;u<=Qpa-1;u++)h=Ypa[bqa>>>2],bqa+=n,t=joa(l&p,a)|joa(h&i,Wpa),l=h,ipa[npa>>>2]=t&r,npa+=n;else for(u=2;u<=Qpa-1;u++)h=Ypa[bqa>>>2],bqa+=n,t=joa(l&p,a)|joa(h&i,Wpa),l=h,e=s(t&r,ipa[npa>>>2]),ipa[npa>>>2]=e,npa+=n;1<Qpa&&(ppa=Npa,h=Ypa[bqa>>>2],bqa+=n,t=joa(l&p,a)|joa(h&i,Wpa),o=ipa[npa>>>2],e=s(t&r,o),o=ppa&e|o&~ppa,ipa[npa>>>2]=o,npa+=n),bqa+=Zpa,npa+=jpa}}())),22!==fpa&&32!==fpa||(Qoa=Roa=Soa=Poa=0);Roa=0<Dpa?(Qoa=Apa)+Uoa:(Qoa=Apa-Uoa+1,Apa+1);Poa=0<nqa?(Soa=Bpa)+Toa:(Soa=Bpa-Toa+1,Bpa+1)}(),void xsa()):Jpa.primitiveFail()}function Vqa(e,t,i){upa=i,tqa=t-(gqa=tpa=e),Uqa(),psa()}function $qa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k;for(l=Tpa[fpa+1],dqa=foa(32,$pa),r=Opa[$pa],d=Opa[kpa],e=apa&~Foa,bqa=kqa*eqa+4*foa(jqa,dqa),a=Uoa<(k=dqa-(jqa&dqa-1))?0:foa(Uoa-k,dqa)+1,Zpa=eqa-4*a,v=1+(Apa+Uoa-1&qpa-1),Uoa<(u=qpa-(Apa&qpa-1))&&(u=Uoa),m=(jqa&dqa-1)*$pa,c=(Apa&qpa-1)*kpa,t=$pa,b=kpa,i=0,cqa&&(m=32-$pa-m,t=0-t),opa&&(c=32-kpa-c,b=0-b,i=32-kpa),f=1;f<=Toa;f++){for(h=Rpa?koa:lra(Bpa+f-1),iqa=m,zpa=c,ppa=Mpa,g=u,n=Qpa;s=Lra(g,e,r,d,t,b),zpa=i,ppa===koa?(p=l(s&h,ipa[npa>>>2]),ipa[npa>>>2]=ppa&p):(p=l(s&h,(o=ipa[npa>>>2])&ppa),o=ppa&p|o&~ppa,ipa[npa>>>2]=o),npa+=4,g=2===n?(ppa=Npa,v):(ppa=koa,qpa),0!=--n;);bqa+=Zpa,npa+=jpa}}function _qa(){return[0,4278190081,4294967295,4286611584,4294901760,4278255360,4278190335,4278255615,4294967040,4294902015,4280295456,4282400832,4284506208,4288651167,4290756543,4292861919,4278716424,4279242768,4279769112,4280821800,4281348144,4281874488,4282927176,4283453520,4283979864,4285032552,4285558896,4286085240,4287072135,4287598479,4288124823,4289177511,4289703855,4290230199,4291282887,4291809231,4292335575,4293388263,4293914607,4294440951,4278190081,4278203136,4278216192,4278229248,4278242304,4278255360,4278190131,4278203187,4278216243,4278229299,4278242355,4278255411,4278190182,4278203238,4278216294,4278229350,4278242406,4278255462,4278190233,4278203289,4278216345,4278229401,4278242457,4278255513,4278190284,4278203340,4278216396,4278229452,4278242508,4278255564,4278190335,4278203391,4278216447,4278229503,4278242559,4278255615,4281532416,4281545472,4281558528,4281571584,4281584640,4281597696,4281532467,4281545523,4281558579,4281571635,4281584691,4281597747,4281532518,4281545574,4281558630,4281571686,4281584742,4281597798,4281532569,4281545625,4281558681,4281571737,4281584793,4281597849,4281532620,4281545676,4281558732,4281571788,4281584844,4281597900,4281532671,4281545727,4281558783,4281571839,4281584895,4281597951,4284874752,4284887808,4284900864,4284913920,4284926976,4284940032,4284874803,4284887859,4284900915,4284913971,4284927027,4284940083,4284874854,4284887910,4284900966,4284914022,4284927078,4284940134,4284874905,4284887961,4284901017,4284914073,4284927129,4284940185,4284874956,4284888012,4284901068,4284914124,4284927180,4284940236,4284875007,4284888063,4284901119,4284914175,4284927231,4284940287,4288217088,4288230144,4288243200,4288256256,4288269312,4288282368,4288217139,4288230195,4288243251,4288256307,4288269363,4288282419,4288217190,4288230246,4288243302,4288256358,4288269414,4288282470,4288217241,4288230297,4288243353,4288256409,4288269465,4288282521,4288217292,4288230348,4288243404,4288256460,4288269516,4288282572,4288217343,4288230399,4288243455,4288256511,4288269567,4288282623,4291559424,4291572480,4291585536,4291598592,4291611648,4291624704,4291559475,4291572531,4291585587,4291598643,4291611699,4291624755,4291559526,4291572582,4291585638,4291598694,4291611750,4291624806,4291559577,4291572633,4291585689,4291598745,4291611801,4291624857,4291559628,4291572684,4291585740,4291598796,4291611852,4291624908,4291559679,4291572735,4291585791,4291598847,4291611903,4291624959,4294901760,4294914816,4294927872,4294940928,4294953984,4294967040,4294901811,4294914867,4294927923,4294940979,4294954035,4294967091,4294901862,4294914918,4294927974,4294941030,4294954086,4294967142,4294901913,4294914969,4294928025,4294941081,4294954137,4294967193,4294901964,4294915020,4294928076,4294941132,4294954188,4294967244,4294902015,4294915071,4294928127,4294941183,4294954239,4294967295]}function ara(e,t,i){return e<t?foa(t-e+Hoa,i+1)+1:t===e?0:0-(foa(e-t+Hoa,i+1)+1)}function bra(){var e,t;Mpa=(opa?ioa:hoa)(koa,32-(e=qpa-(Apa&(t=qpa-1)))*kpa),Npa=(opa?hoa:ioa)(koa,32-(1+(Apa+Uoa-1&t))*kpa),Qpa=Uoa<e?(Mpa&=Npa,Npa=0,1):foa(Uoa-e+t,qpa)+1,Dpa=nqa=1,npa=Bpa*rpa+4*foa(Apa,qpa),jpa=rpa*nqa-Qpa*Dpa*4}function cra(e,t){return t}function dra(e,t){var i;return(vpa[(i=t<<8)+(e>>>16&255)]<<10)+(vpa[i+(e>>>8&255)]<<5)+vpa[i+(255&e)]}function fra(e,t,i){var r;r=ipa[e>>>2],r&=i,r|=t,ipa[e>>>2]=r}function hra(e,t){var i,r;return"number"==typeof(r=Jpa.fetchPointerofObject(e,t))?r:-2147483648<=(i=Jpa.floatValueOf(r))&&i<=2147483647?0|i:(Jpa.primitiveFail(),0)}function ira(e,t,i){var r,a;return"number"==typeof(a=Jpa.fetchPointerofObject(e,t))?a:a.isNil?i:-2147483648<=(r=Jpa.floatValueOf(a))&&r<=2147483647?0|r:(Jpa.primitiveFail(),0)}function jra(e,t){return 32!==kpa?t:0===t?0:0!=(4278190080&t)?t:t|4278190080&e}function kra(){return Ppa}function lra(e){return Epa[(t=e)-foa(t,i=Gpa)*i|0];var t,i}function mra(e){return!!e.isNil||(0===fpa||(5===fpa||(10===fpa||15===fpa)))}function pra(){return Tpa[1]=Sqa,Tpa[2]=Fqa,Tpa[3]=Gqa,Tpa[4]=rsa,Tpa[5]=Hqa,Tpa[6]=cra,Tpa[7]=Qqa,Tpa[8]=Oqa,Tpa[9]=Iqa,Tpa[10]=Nqa,Tpa[11]=Jqa,Tpa[12]=Pqa,Tpa[13]=Mqa,Tpa[14]=Kqa,Tpa[15]=Lqa,Tpa[16]=cra,Tpa[17]=cra,Tpa[18]=cra,Tpa[19]=wqa,Tpa[20]=ssa,Tpa[21]=Yra,Tpa[22]=lsa,Tpa[23]=uqa,Tpa[24]=vqa,Tpa[25]=xqa,Tpa[26]=Pra,Tpa[27]=Ora,Tpa[28]=hsa,Tpa[29]=isa,Tpa[30]=jsa,Tpa[31]=yqa,Tpa[32]=Bqa,Tpa[33]=csa,Tpa[34]=tsa,Tpa[35]=Aqa,Tpa[36]=Aqa,Tpa[37]=Aqa,Tpa[38]=ksa,Tpa[39]=Qra,Tpa[40]=Nra,Tpa[41]=jra,Tpa[42]=bsa,function(){var e,t,i,r,a,s,n,o,u;for(t=0;t<=255;t++)for(e=0;e<=15;e++)a=e,u=o=n=s=void 0,n=xpa[7&(s=255&(r=t))],o=ypa[s>>>3],u=a<n?o+1:o,n=xpa[7&(s=r>>>8&255)],o=ypa[s>>>3],u|=a<n?o+1<<5:o<<5,n=xpa[7&(s=r>>>16&255)],o=ypa[s>>>3],i=u|=a<n?o+1<<10:o<<10,vpa[(e<<8)+t]=i}(),!0}function rra(){var e;if(ipa=Jpa.fetchPointerofObject(Ioa,lpa),spa=Jpa.fetchIntegerofObject(Loa,lpa),mpa=Jpa.fetchIntegerofObject(Koa,lpa),!(0<=spa&&0<=mpa))return!1;if(kpa=Jpa.fetchIntegerofObject(Joa,lpa),opa=0<kpa,kpa<0&&(kpa=0-kpa),"number"==typeof ipa){if(!function(e){if(!Vpa&&!yra())return;return Vpa(e,function(e,t,i,r){spa=e,mpa=t,kpa=i,opa=r})}(ipa))return!1;qpa=foa(32,kpa),ipa=rpa=0}else{if(qpa=foa(32,kpa),rpa=4*foa(spa+(qpa-1),qpa),e=eoa(ipa),!Jpa.isWordsOrBytes(ipa)||e!==rpa*mpa)return!1;ipa=ipa.wordsOrBytes()}return!0}function sra(e){return tra(e,!1)}function tra(e,t){if(Voa=e,Kpa=t,fpa=Jpa.fetchIntegerofObject(woa,Voa),Jpa.failed()||fpa<0||Noa-2<fpa)return!1;if(16<=fpa&&fpa<=17)return!1;if(_pa=Jpa.fetchPointerofObject(xoa,Voa),Spa=mra(_pa),Fpa=Jpa.fetchPointerofObject(uoa,Voa),Rpa=mra(Fpa),lpa=Jpa.fetchPointerofObject(roa,e),!(Jpa.isPointers(lpa)&&4<=doa(lpa)))return!1;if(!rra())return!1;if(tpa=ira(soa,Voa,0),upa=ira(toa,Voa,0),tqa=ira(Boa,Voa,spa),Ipa=ira(voa,Voa,mpa),Jpa.failed())return!1;if(Spa)gqa=hqa=0;else{if(!(Jpa.isPointers(_pa)&&4<=doa(_pa)))return!1;if(!function(){var e;if(Ypa=Jpa.fetchPointerofObject(Ioa,_pa),fqa=hra(Loa,_pa),aqa=hra(Koa,_pa),!(0<=fqa&&0<=aqa))return!1;$pa=Jpa.fetchIntegerofObject(Joa,_pa),cqa=0<$pa,$pa<0&&($pa=0-$pa);if("number"==typeof Ypa){if(!function(e){if(!Vpa&&!yra())return;return Vpa(e,function(e,t,i,r){fqa=e,aqa=t,$pa=i,cqa=r})}(Ypa))return!1;dqa=foa(32,$pa),Ypa=eqa=0}else{if(dqa=foa(32,$pa),eqa=4*foa(fqa+(dqa-1),dqa),e=eoa(Ypa),!Jpa.isWordsOrBytes(Ypa)||e!==eqa*aqa)return!1;Ypa=Ypa.wordsOrBytes()}return!0}())return!1;if(!function(){var e,t,i,r;if(apa=cpa=_oa=0,bpa=dpa=epa=null,(t=Jpa.fetchPointerofObject(qoa,Voa)).isNil)return!0;if(apa=Goa,r=!1,Jpa.isWords(t))i=doa(t),bpa=t.words,r=!0;else{if(!(Jpa.isPointers(t)&&3<=doa(t)))return!1;if(epa=wra(Jpa.fetchPointerofObject(0,t)),dpa=wra(Jpa.fetchPointerofObject(1,t)),(e=Jpa.fetchPointerofObject(2,t)).isNil)i=0;else{if(!Jpa.isWords(e))return!1;i=doa(e),bpa=e.words}apa|=Foa}if(0!=(i&i-1))return!1;cpa=i-1,_oa=0,512===i&&(_oa=3);4096===i&&(_oa=4);32768===i&&(_oa=5);0===i?(bpa=null,cpa=0):apa|=Eoa;r&&nsa();!function(e,t){return!e||!t||0===e[Ooa]&&0===e[Moa]&&0===e[Coa]&&0===e[loa]&&16711680===t[Ooa]&&65280===t[Moa]&&255===t[Coa]&&4278190080===t[loa]}(epa,dpa)?apa|=Doa:epa=dpa=null;return!0}())return!1;0==(apa&Foa)&&nsa(),gqa=ira(yoa,Voa,0),hqa=ira(zoa,Voa,0)}return!!function(){var e;if(Rpa)return!(Epa=null);if(Jpa.isPointers(Fpa)&&4<=doa(Fpa))e=Jpa.fetchPointerofObject(Ioa,Fpa),Gpa=Jpa.fetchIntegerofObject(Koa,Fpa),Jpa.isWords(e)||(Rpa=!0);else{if(Jpa.isPointers(Fpa)||!Jpa.isWords(Fpa))return!1;Gpa=doa(e=Fpa)}return Epa=e.wordsOrBytes(),!0}()&&(Zoa=ira(ooa,Voa,0),$oa=ira(poa,Voa,0),Yoa=ira(noa,Voa,spa),Xoa=ira(moa,Voa,mpa),!Jpa.failed()&&(Zoa<0&&(Yoa+=Zoa,Zoa=0),$oa<0&&(Xoa+=$oa,$oa=0),spa<Zoa+Yoa&&(Yoa=spa-Zoa),mpa<$oa+Xoa&&(Xoa=mpa-$oa),!0))}function wra(e){return e.isNil?null:"number"!=typeof e&&Jpa.isWords(e)&&4===doa(e)?e.words:(Jpa.primitiveFail(),null)}function yra(){return Vpa=Jpa.ioLoadFunctionFrom("ioGetSurfaceFormat","SurfacePlugin"),Lpa=Jpa.ioLoadFunctionFrom("ioLockSurface","SurfacePlugin"),mqa=Jpa.ioLoadFunctionFrom("ioUnlockSurface","SurfacePlugin"),Vpa&&Lpa&&mqa}function Ara(){var e,t,i,r,a,s;if(Hpa=!1,0===ipa){if(!Lpa&&!yra())return;if(r=Lpa,e=Jpa.fetchIntegerofObject(Ioa,lpa),0===Ypa&&!Spa&&(t=Jpa.fetchIntegerofObject(Ioa,_pa))===e)return Ypa=Kpa?(s=Math.min(jqa,Apa),a=Math.max(jqa,Apa)+Uoa,r(t,function(e){eqa=e},s,i=Math.min(kqa,Bpa),a-s,Math.max(kqa,Bpa)+Toa-i)):r(t,function(e){eqa=e},0,0,fqa,aqa),rpa=eqa,Hpa=!0,0!==(ipa=Ypa);ipa=r(e,function(e){rpa=e},Apa,Bpa,Uoa,Toa),Hpa=!0}if(0===Ypa&&!Spa){if(t=Jpa.fetchIntegerofObject(Ioa,_pa),!Lpa&&!yra())return;r=Lpa,Ypa=Kpa?r(t,function(e){eqa=e},0,0,fqa,aqa):r(t,function(e){eqa=e},jqa,kqa,Uoa,Toa),Hpa=!0}return 0!==ipa&&(0!==Ypa||Spa)}function Bra(e,t){var i,r,a;return i=e,0!=(t&Goa)&&(0!=(t&Doa)&&(a=joa((r=e)&dpa[0],epa[0]),a|=joa(r&dpa[1],epa[1]),0===(i=(a|=joa(r&dpa[2],epa[2]))|joa(r&dpa[3],epa[3]))&&0!==e&&(i=1)),0!=(t&Eoa)&&(i=bpa[i&cpa])),i}function Cra(e){0===strcmp(e,"SurfacePlugin")&&(Vpa=Lpa=mqa=0)}function Dra(e,t,i,r){var a,s,n;for(n=Opa[i],a=0,s=1;s<=r;s++)(e&n)===n&&(a|=t&n),n=hoa(n,i);return a}function Era(e,t,i,r,a){var s,n,o;return(n=(e^(o=e&a))+(t^(s=t&a)))^o^s|ioa(o&s|(o|s)&n,i-1)*r}function Fra(e,t,i,r){var a,s,n;for(n=Opa[i],a=0,s=1;s<=r;s++)a|=Math.max(t&n,e&n),n=hoa(n,i);return a}function Gra(e,t,i,r){var a,s,n;for(n=Opa[i],a=0,s=1;s<=r;s++)a|=Math.min(t&n,e&n),n=hoa(n,i);return a}function Hra(e,t,i,r){var a,s,n;return s=ioa((1+(e&(n=Opa[i])))*(1+(t&n))-1&(a=hoa(n,i)),i),1===r?s:(s|=(1+(ioa(e,i)&n))*(1+(ioa(t,i)&n))-1&a,2===r?s:(s|=hoa((1+(ioa(e,2*i)&n))*(1+(ioa(t,2*i)&n))-1&a,i),3===r?s:s|=hoa((1+(ioa(e,3*i)&n))*(1+(ioa(t,3*i)&n))-1&a,2*i)))}function Jra(e,t,i,r){var a,s,n,o,u;for(u=Opa[i],s=0,o=1;o<=r;o++)s|=(n=e&u)<(a=t&u)?a-n:n-a,u=hoa(u,i);return s}function Lra(e,t,i,r,a,s){var n,o,u,l,c,f;if(u=Ypa[bqa>>>2],f=0,o=iqa,l=zpa,c=e,t===(Goa|Eoa))for(;n=ioa(u,o)&i,f|=hoa(bpa[n&cpa]&r,l),l+=s,0!=(4294967264&(o+=a))&&(cqa?o+=32:o-=32,u=Ypa[(bqa+=4)>>>2]),0!=--c;);else for(;f|=hoa(Bra(n=ioa(u,o)&i,t)&r,l),l+=s,0!=(4294967264&(o+=a))&&(cqa?o+=32:o-=32,u=Ypa[(bqa+=4)>>>2]),0!=--c;);return iqa=o,f}function Mra(e,t){var i,r,a;return e<0||t<0||(r=e>>>14)>=fqa||(a=t>>>14)>=aqa?0:(i=a*eqa+4*ioa(r,pqa),ioa(Ypa[i>>>2],iqa=qqa[r&oqa])&rqa)}function Nra(e,t){var i,r,a,s,n;if(32===kpa)return e===t?0:t;for(n=Opa[r=kpa],a=0,s=1;s<=qpa;s++)(e&n)===(i=t&n)&&(i=0),a|=i,n=hoa(n,r);return a}function Ora(e,t){return Dra(~e,t,kpa,qpa)}function Pra(e,t){return 0===e?t:e|Dra(~e,t,kpa,qpa)}function Qra(e,t){var i,r,a,s,n;if(1===qpa)return t;if(i=0,a=hoa(1,kpa)-1,s=hoa(a,(qpa-1)*kpa),i|=hoa(t&a,r=32-kpa)|ioa(t&s,r),qpa<=2)return i;for(n=2;n<=qpa>>1;n++)a=hoa(a,kpa),s=ioa(s,kpa),i|=hoa(t&a,r-=2*kpa)|ioa(t&s,r);return i}function Rra(){return sra(Jpa.stackValue(Jpa.methodArgumentCount()))?(Uqa(),Jpa.failed()?null:(psa(),Jpa.failed()?null:(Jpa.pop(Jpa.methodArgumentCount()),22===fpa||32===fpa?(Jpa.pop(1),Jpa.pushInteger(Woa)):void 0))):Jpa.primitiveFail()}function Sra(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p;if(6!==Jpa.methodArgumentCount())return Jpa.primitiveFail();if(c=Jpa.stackIntegerValue(0),a=Jpa.stackObjectValue(1),u=Jpa.stackObjectValue(2),coa(a)!==Jpa.classArray()||coa(u)!==Jpa.classArray())return Jpa.primitiveFail();if(256!==doa(u))return Jpa.primitiveFail();if(Jpa.failed())return null;if(s=doa(a)-2,i=Jpa.stackIntegerValue(3),f=Jpa.stackIntegerValue(4),p=Jpa.stackObjectValue(5),!Jpa.isBytes(p))return Jpa.primitiveFail();if(!(0<f&&0<i&&i<=eoa(p)))return Jpa.primitiveFail();if(!sra(r=Jpa.stackObjectValue(6)))return Jpa.primitiveFail();if(30===fpa||31===fpa)return Jpa.primitiveFail();for(n=0!==ipa&&0!==Ypa&&!1===Spa&&_pa!==lpa&&(0!==apa||cqa!==opa||$pa!==kpa),l=tpa,t=p.bytes,e=f;e<=i;e++){if(h=t[e-1],(o=Jpa.fetchIntegerofObject(h,u))<0||s<o)return Jpa.primitiveFail();if(gqa=Jpa.fetchIntegerofObject(o,a),tqa=Jpa.fetchIntegerofObject(o+1,a)-gqa,Jpa.failed())return null;if(Tqa(),0<Uoa&&0<Toa&&(n?(bra(),$qa(),Roa=(Qoa=Apa)+Uoa,Poa=(Soa=Bpa)+Toa):Uqa()),Jpa.failed())return null;tpa=tpa+tqa+c}Qoa=l,psa(),Jpa.storeIntegerofObjectwithValue(soa,r,tpa),Jpa.pop(6)}function Tra(){var e,t,i;if(t=Jpa.stackValue(2),i=Jpa.stackIntegerValue(1),e=Jpa.stackIntegerValue(0),!sra(t))return Jpa.primitiveFail();Jpa.failed()||(function(e,t){var i,r,a,s,n,o,u,l,c,f;if(a=0<e?1:0===e?0:-1,f=0<t?1:0===t?0:-1,o=r=9999,n=c=-9999,(s=Math.abs(t))<(u=Math.abs(e))){for(i=u>>1,l=1;l<=u;l++)if(tpa+=a,(i-=s)<0&&(upa+=f,i+=u),l<u){if(Uqa(),Jpa.failed())return;Qoa<Roa&&Soa<Poa&&(o=Math.min(o,Qoa),n=Math.max(n,Roa),r=Math.min(r,Soa),4e3<(n-o)*((c=Math.max(c,Poa))-r)&&(Qoa=o,Roa=n,Soa=r,Poa=c,psa(),o=r=9999,n=c=-9999))}}else for(i=s>>1,l=1;l<=s;l++)if(upa+=f,(i-=u)<0&&(tpa+=a,i+=s),l<s){if(Uqa(),Jpa.failed())return;Qoa<Roa&&Soa<Poa&&(o=Math.min(o,Qoa),n=Math.max(n,Roa),r=Math.min(r,Soa),4e3<(n-o)*((c=Math.max(c,Poa))-r)&&(Qoa=o,Roa=n,Soa=r,Poa=c,psa(),o=r=9999,n=c=-9999))}Qoa=o,Roa=n,Soa=r,Poa=c,Jpa.storeIntegerofObjectwithValue(soa,Voa,tpa),Jpa.storeIntegerofObjectwithValue(toa,Voa,upa)}(i,e),psa()),Jpa.failed()||Jpa.pop(2)}function Ura(){var e,t,i,r,a,s,n,o,u,l,c;return u=Jpa.stackIntegerValue(1),l=Jpa.stackIntegerValue(0),Jpa.stackValue(2),Jpa.failed()?null:u<0||l<0?(c=0,Jpa.failed()||Jpa.popthenPush(3,c),null):(t=Jpa.stackValue(Jpa.methodArgumentCount()),Jpa.isPointers(t)&&4<=doa(t)?(r=Jpa.fetchPointerofObject(Ioa,t),Jpa.isWordsOrBytes(r)?(tqa=Jpa.fetchIntegerofObject(Loa,t),Ipa=Jpa.fetchIntegerofObject(Koa,t),i=Jpa.fetchIntegerofObject(Joa,t),Jpa.failed()?null:tqa<=u||Ipa<=l?(c=0,Jpa.failed()||Jpa.popthenPush(3,c),null):i<0?(Jpa.primitiveFail(),null):(a=foa(32,i),n=foa(tqa+(a-1),a),eoa(r)!==n*Ipa*4?(Jpa.primitiveFail(),null):(s=Jpa.fetchLong32ofObject(l*n+foa(u,a),r),o=ioa(4294967295,32-i),e=ioa(s,32-(1+(u&a-1))*i)&o,c=Jpa.positive32BitIntegerFor(e),Jpa.failed()||Jpa.popthenPush(3,c),null))):(Jpa.primitiveFail(),null)):(Jpa.primitiveFail(),null))}function Vra(){var e;return e=Jpa.stackValue(Jpa.methodArgumentCount()),tra(e,!0)?(function(){var e;if(e=Spa,Spa=!0,Tqa(),(Spa=e)||Uoa<=0||Toa<=0)return Qoa=Roa=Soa=Poa=0;if(!Ara())return Jpa.primitiveFail();bra(),function(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y,j,I,O,_;if(u=Tpa[fpa+1],!(doa(Voa)>=Aoa+12))return Jpa.primitiveFail();(a=Ipa-1)<=0&&(a=1);S=hra(Aoa,Voa),i=hra(Aoa+3,Voa),(O=ara(S,i,a))<0&&(S=i-a*O);b=hra(Aoa+1,Voa),i=hra(Aoa+4,Voa),(y=ara(b,i,a))<0&&(b=i-a*y);v=hra(Aoa+9,Voa),i=hra(Aoa+6,Voa),(l=ara(v,i,a))<0&&(v=i-a*l);c=hra(Aoa+10,Voa),i=hra(Aoa+7,Voa),(s=ara(c,i,a))<0&&(c=i-a*s);if(Jpa.failed())return;if(2===Jpa.methodArgumentCount())if(_=Jpa.stackIntegerValue(1),(g=Jpa.stackValue(0)).isNil){if($pa<16)return Jpa.primitiveFail()}else{if(doa(g)<hoa(1,$pa))return Jpa.primitiveFail();g=g.wordsOrBytes()}else _=1,g=Jpa.nilObject();(a=tqa-1)<=0&&(a=1);j=1+(Apa+Uoa-1&qpa-1),Uoa<(o=qpa-(Apa&qpa-1))&&(o=Uoa);upa<$oa&&(S+=($oa-upa)*O,b+=($oa-upa)*y,v+=($oa-upa)*l,c+=($oa-upa)*s);(function(){var e,t;sqa=0,t=$pa;for(;1!==t;)++sqa,t>>>=1;for(rqa=Opa[$pa],oqa=hoa(1,pqa=5-sqa)-1,e=0;e<=oqa;e++)qqa[e]=cqa?32-hoa(e+1,sqa):hoa(e,sqa)})(),1<_&&0==(apa&Foa)&&(bpa?osa(8,_oa):16===kpa&&osa(8,5));e=apa&~Foa,t=opa?(m=0-kpa,32-kpa):(m=kpa,0);for(f=1;f<=Toa;f++){for(k=ara(S,v,a),jqa=0<=k?S:v-a*k,h=ara(b,c,a),kqa=0<=h?b:c-a*h,zpa=opa?32-(1+(Apa&qpa-1))*kpa:(Apa&qpa-1)*kpa,tpa<Zoa&&(jqa+=(Zoa-tpa)*k,kqa+=(Zoa-tpa)*h),p=Rpa?koa:lra(Bpa+f-1),ppa=Mpa,I=o,i=Qpa;r=1===_?Csa(I,k,h,O,y,m,e):Bsa(I,k,h,O,y,g,_,m),zpa=t,ppa===koa?(d=u(r&p,ipa[npa>>>2]),ipa[npa>>>2]=ppa&d):(n=ipa[npa>>>2],d=u(r&p,n&ppa),n=ppa&d|n&~ppa,ipa[npa>>>2]=n),npa+=4,I=2===i?(ppa=Npa,j):(ppa=koa,qpa),0!=--i;);S+=O,b+=y,v+=l,c+=s,npa+=jpa}}(),Roa=0<Dpa?(Qoa=Apa)+Uoa:(Qoa=Apa-Uoa+1,Apa+1);Poa=0<nqa?(Soa=Bpa)+Toa:(Soa=Bpa-Toa+1,Bpa+1);xsa()}(),Jpa.failed()?null:(psa(),Jpa.failed()?null:void Jpa.pop(Jpa.methodArgumentCount()))):Jpa.primitiveFail()}function Yra(e,t){var i,r;return kpa<16?(r=hoa(1,kpa)-1,i=hoa(foa(4294967295,r),kpa-1),Era(e,t,kpa,r,i)):16===kpa?Era(2147450879&e,2147450879&t,5,r=31,i=1108361744):Era(e,t,8,r=255,i=2155905152)}function _ra(e,t){var i,r,a,s,n,o,u,l,c,f,h,p,d,b;return 0===(d=e)?t:(p=255&d,a=255&(d>>>=8),u=255&(d>>>=8),o=255&(d>>>=8),255!=(c=255&gpa)&&(o=o*c>>>8,u=u*c>>>8,a=a*c>>>8,p=p*c>>>8),s=255&(l=t),b=255&(r=hpa),lqa&&(s=lqa[s],b=lqa[b]),255<(h=(s*(255-p)>>>8)+(b*p>>>8))&&(h=255),Cpa&&(h=Cpa[h]),s=255&(l>>>=8),b=255&(r>>>=8),lqa&&(s=lqa[s],b=lqa[b]),255<(i=(s*(255-a)>>>8)+(b*a>>>8))&&(i=255),Cpa&&(i=Cpa[i]),s=255&(l>>>=8),b=255&(r>>>=8),lqa&&(s=lqa[s],b=lqa[b]),255<(f=(s*(255-u)>>>8)+(b*u>>>8))&&(f=255),Cpa&&(f=Cpa[f]),r>>>=8,255<(n=((255&(l>>>=8))*(255-o)>>>8)+o)&&(n=255),(((n<<8)+f<<8)+i<<8)+h)}function bsa(e,t){return 0===e?t:function(e,t,i,r){var a,s,n,o,u,l;for(l=Opa[i],s=0,o=1;o<=r;o++)n=ioa(e&l,(o-1)*i),a=ioa(t&l,(o-1)*i),32!==i&&(a=16===i?(n=4278190080|dsa(n),4278190080|dsa(a)):(n=4278190080|fsa(n,i,32),4278190080|fsa(a,i,32))),u=_ra(n,a),32!==i&&(u=fsa(u,32,i)),s|=hoa(u,(o-1)*i),l=hoa(l,i);return s}(e,t,kpa,qpa)}function csa(e,t){var i,r,a,s,n,o,u,l,c,f;for(n=Opa[kpa],o=16===kpa?(r=5,31):(r=8,255),c=ppa,u=t,s=e,l=1;l<=qpa;l++)0<(c&n)&&(f=u&n,i=s&n,a=kpa<16?i==f?0:1:((a=Jra(i,f,r,3))&o)+(ioa(a,r)&o)+(ioa(ioa(a,r),r)&o),Woa+=a),c=ioa(c,kpa),s=ioa(s,kpa),u=ioa(u,kpa);return t}function dsa(e){return(31&e)<<3|(992&e)<<6|(31744&e)<<9}function fsa(e,t,i){var r,a,s,n;return 0<(r=i-t)?(n=hoa(1,t)-1,a=(s=hoa(e,r))&(n=hoa(n,r)),n=hoa(n,i),a+((s=hoa(s,r))&n)+(hoa(s,r)&hoa(n,i))):0===r?5===t?32767&e:8===t?16777215&e:e:0===e?e:(n=hoa(1,i)-1,a=(s=ioa(e,r=t-i))&n,n=hoa(n,i),0===(a=a+((s=ioa(s,r))&n)+(ioa(s,r)&hoa(n,i)))?1:a)}function hsa(e,t){return kpa<16?Fra(e,t,kpa,qpa):16===kpa?Fra(e,t,5,3)+(Fra(e>>>16,t>>>16,5,3)<<16):Fra(e,t,8,4)}function isa(e,t){return kpa<16?Gra(e,t,kpa,qpa):16===kpa?Gra(e,t,5,3)+(Gra(e>>>16,t>>>16,5,3)<<16):Gra(e,t,8,4)}function jsa(e,t){var i;return i=~e,kpa<16?Gra(i,t,kpa,qpa):16===kpa?Gra(i,t,5,3)+(Gra(i>>>16,t>>>16,5,3)<<16):Gra(i,t,8,4)}function ksa(e,t){return kpa<16?Hra(e,t,kpa,qpa):16===kpa?Hra(e,t,5,3)+(Hra(e>>>16,t>>>16,5,3)<<16):Hra(e,t,8,4)}function lsa(e,t){return kpa<16?Jra(e,t,kpa,qpa):16===kpa?Jra(e,t,5,3)+(Jra(e>>>16,t>>>16,5,3)<<16):Jra(e,t,8,4)}function msa(e){return!1!=((Jpa=e).majorVersion()==aoa)&&Jpa.minorVersion()>=boa}function nsa(){var e,t;if(e=t=0,!($pa<=8)){if(16===$pa&&(e=5),32===$pa&&(e=8),0===_oa){if(kpa<=8)return;16===kpa&&(t=5),32===kpa&&(t=8)}else t=_oa;osa(e,t)}}function osa(e,t){var i,r,a=[0,0,0,0],s=[0,0,0,0];0!=(i=t-e)&&(i<=0?(r=hoa(1,t)-1,s[Ooa]=hoa(r,2*e-i),s[Moa]=hoa(r,e-i),s[Coa]=hoa(r,0-i),s[loa]=0):(r=hoa(1,e)-1,s[Ooa]=hoa(r,2*e),s[Moa]=hoa(r,e),s[Coa]=r),a[Ooa]=3*i,a[Moa]=2*i,a[Coa]=i,a[loa]=0,epa=a,dpa=s,apa=apa|Goa|Doa)}function psa(){Jpa.showDisplayBitsLeftTopRightBottom(lpa,Qoa,Soa,Roa,Poa)}function rsa(e,t){return e}function ssa(e,t){return e-t}function tsa(e,t){var i,r,a,s,n,o;if((apa&(Goa|Eoa))!=(Goa|Eoa))return t;for(i=Opa[kpa],a=t,n=ppa,s=1;s<=qpa;s++)0!=(n&i)&&(o=a&i,vsa(r=kpa<16?o:fsa(o,16===kpa?5:8,_oa),usa(r)+1)),n=ioa(n,kpa),a=ioa(a,kpa);return t}function usa(e){return bpa[e&cpa]}function vsa(e,t){return bpa[e&cpa]=t}function xsa(){var e,t,i,r;if(Hpa){if(!mqa&&!yra())return;i=mqa,r=!1,"number"==typeof(e=Jpa.fetchPointerofObject(Ioa,lpa))&&(i(e=e,Qoa,Soa,Roa-Qoa,Poa-Soa),ipa=rpa=0,r=!0),Spa||"number"==typeof(t=Jpa.fetchPointerofObject(Ioa,_pa))&&(t=t,r&&t===e||i(t,0,0,0,0),Ypa=eqa=0),Hpa=!1}}function Bsa(e,t,i,r,a,s,n,o){var u,l,c,f,h,p,d,b,m,v,g,k,S,y,j,I,O,_,V;b=Opa[kpa],l=0,m=2===n?(c=t>>1,h=i>>1,d=r>>1,a>>1):(c=foa(t,n),h=foa(i,n),d=foa(r,n),foa(a,n)),p=e;do{j=jqa,g=kqa,I=O=y=k=0,_=0,f=n;do{for(V=j,S=g,u=n;v=Mra(V,S),25===fpa&&0===v||(++_,k+=255&(v=$pa<16?s[v]:16===$pa?dsa(v):v),y+=v>>>8&255,O+=v>>>16&255,I+=v>>>24),V+=c,S+=h,0!=--u;);j+=d,g+=m}while(0!=--f);l|=hoa((v=0===_||25===fpa&&_<n*n>>1?0:(4===_?(O>>>=2,y>>>=2,k>>>=2,I>>>=2):(O=foa(O,_),y=foa(y,_),k=foa(k,_),I=foa(I,_)),0===(v=(I<<24)+(O<<16)+(y<<8)+k)&&0<O+y+k+I&&(v=1),Bra(v,apa)))&b,zpa),zpa+=o,jqa+=t,kqa+=i}while(0!=--p);return l}function Csa(e,t,i,r,a,s,n){var o,u,l,c;if(l=Opa[kpa],c=0,u=e,n===(Goa|Eoa))for(;o=Mra(jqa,kqa),c|=hoa(bpa[o&cpa]&l,zpa),zpa+=s,jqa+=t,kqa+=i,0!=--u;);else for(;c|=hoa(Bra(o=Mra(jqa,kqa),n)&l,zpa),zpa+=s,jqa+=t,kqa+=i,0!=--u;);return c}function zDa(e){return e.pointers?e.pointers.length:e.words?e.words.length:e.bytes?e.bytes.length:0}function BDa(e,t){return 31<t?0:e<<t}function ODa(e){return FDa.success(FDa.isWords(e)),FDa.failed()?0:e.wordsAsFloat32Array()}function QDa(){return GDa}function RDa(e){var t,i;return FDa.success(6<=zDa(e)),!FDa.failed()&&(HDa=FDa.fetchIntegerofObject(0,e),CDa=FDa.fetchIntegerofObject(1,e),t=FDa.fetchPointerofObject(2,e),NDa=zDa(t),MDa=ODa(t),t=FDa.fetchPointerofObject(3,e),JDa=zDa(t),i=t,FDa.success(FDa.isWords(i)),IDa=i.words,t=FDa.fetchPointerofObject(4,e),LDa=zDa(t),KDa=ODa(t),t=FDa.fetchPointerofObject(5,e),EDa=zDa(t),DDa=ODa(t),FDa.success(BDa(1,HDa)===CDa&&1+(CDa>>2)===NDa&&CDa===LDa&&CDa===EDa&&LDa===EDa),!1===FDa.failed())}function SDa(){var e,t,i,r,a;for(r=0,i=JDa;r<i;){if(e=IDa[r]-1,t=IDa[r+1]-1,!(e<LDa&&t<LDa))return FDa.success(!1);a=KDa[e],KDa[e]=KDa[t],KDa[t]=a,a=DDa[e],DDa[e]=DDa[t],DDa[t]=a,r+=2}}function TDa(){if(!RDa(FDa.stackObjectValue(0)))return null;SDa(),FDa.failed()&&SDa()}function UDa(){if(!RDa(FDa.stackObjectValue(0)))return null;WDa()}function VDa(){var e;if(e=FDa.booleanValueOf(FDa.stackValue(0)),!RDa(FDa.stackObjectValue(1)))return null;!function(e){if(SDa(),FDa.failed())return SDa();(function(e){var t,i,r,a,s,n,o,u,l,c,f,h,p,d,b;for(i=CDa>>1,r=CDa>>2,h=1;h<=HDa;h++)for(c=BDa(1,h),f=c>>1,m=CDa,v=c,t=0|Math.floor(m/v),l=1;l<=f;l++)for(o=(b=(l-1)*t)<r?(d=MDa[NDa-b-1],MDa[b]):(d=0-MDa[b-r],MDa[i-b]),e||(o=0-o),a=l;a<=CDa;)s=a-1,p=KDa[u=a+f-1]*d-DDa[u]*o,n=KDa[u]*o+DDa[u]*d,KDa[u]=KDa[s]-p,DDa[u]=DDa[s]-n,KDa[s]=KDa[s]+p,DDa[s]=DDa[s]+n,a+=c;var m,v})(e),e||WDa()}(e),FDa.failed()||FDa.pop(1)}function WDa(){var e,t;if(!(CDa<=1))for(t=1/CDa,e=0;e<=CDa-1;e++)KDa[e]=KDa[e]*t,DDa[e]=DDa[e]*t}function XDa(e){return!1!=((FDa=e).majorVersion()==xDa)&&FDa.minorVersion()>=yDa}function PEa(e){return e.pointers?e.pointers.length:e.words?e.words.length:e.bytes?e.bytes.length:0}function SEa(){return REa}function TEa(){var e,t,i,r,a,s;if(e=QEa.stackObjectValue(0),a=QEa.stackObjectValue(1),QEa.failed())return null;if(QEa.success(QEa.isWords(e)),QEa.success(QEa.isWords(a)),QEa.failed())return null;if(r=PEa(e),QEa.success(r===PEa(a)),QEa.failed())return null;for(s=a.wordsAsFloat32Array(),t=e.wordsAsFloat32Array(),i=0;i<=r-1;i++)s[i]=s[i]+t[i];QEa.pop(1)}function UEa(){var e,t,i,r,a;if(a=QEa.stackFloatValue(0),i=QEa.stackObjectValue(1),QEa.failed())return null;if(QEa.success(QEa.isWords(i)),QEa.failed())return null;for(t=PEa(i),r=i.wordsAsFloat32Array(),e=0;e<=t-1;e++)r[e]=r[e]+a;QEa.pop(1)}function VEa(){var e,t,i;return t=QEa.stackIntegerValue(0),i=QEa.stackObjectValue(1),QEa.failed()?null:(QEa.success(QEa.isWords(i)),QEa.success(0<t&&t<=PEa(i)),QEa.failed()?null:(e=i.wordsAsFloat32Array()[t-1],QEa.pop(2),void QEa.pushFloat(e)))}function WEa(){var e,t,i,r;return e="number"==typeof(r=QEa.stackValue(0))?r:QEa.floatValueOf(r),t=QEa.stackIntegerValue(1),i=QEa.stackObjectValue(2),QEa.failed()?null:(QEa.success(QEa.isWords(i)),QEa.success(0<t&&t<=PEa(i)),QEa.failed()?null:(i.wordsAsFloat32Array()[t-1]=e,void(QEa.failed()||QEa.popthenPush(3,r))))}function XEa(){var e,t,i,r,a,s;if(e=QEa.stackObjectValue(0),a=QEa.stackObjectValue(1),QEa.failed())return null;if(QEa.success(QEa.isWords(e)),QEa.success(QEa.isWords(a)),QEa.failed())return null;if(r=PEa(e),QEa.success(r===PEa(a)),QEa.failed())return null;for(s=a.wordsAsFloat32Array(),t=e.wordsAsFloat32Array(),i=0;i<=r-1;i++)if(0===t[i])return QEa.primitiveFail();for(i=0;i<=r-1;i++)s[i]=s[i]/t[i];QEa.pop(1)}function YEa(){var e,t,i,r,a,s;if(s=QEa.stackFloatValue(0),r=QEa.stackObjectValue(1),QEa.failed())return null;if(0===s)return QEa.primitiveFail();if(QEa.success(QEa.isWords(r)),QEa.failed())return null;for(i=PEa(r),a=r.wordsAsFloat32Array(),t=1/s,e=0;e<=i-1;e++)a[e]=a[e]*t;QEa.pop(1)}function ZEa(){var e,t,i,r,a,s,n;if(e=QEa.stackObjectValue(0),a=QEa.stackObjectValue(1),QEa.failed())return null;if(QEa.success(QEa.isWords(e)),QEa.success(QEa.isWords(a)),QEa.failed())return null;if(r=PEa(e),QEa.success(r===PEa(a)),QEa.failed())return null;for(s=a.wordsAsFloat32Array(),t=e.wordsAsFloat32Array(),i=n=0;i<=r-1;i++)n+=s[i]*t[i];QEa.pop(2),QEa.pushFloat(n)}function $Ea(){var e,t,i,r,a,s;if(e=QEa.stackObjectValue(0),a=QEa.stackObjectValue(1),QEa.failed())return null;if(QEa.success(QEa.isWords(e)),QEa.success(QEa.isWords(a)),QEa.failed())return null;if(QEa.pop(2),(r=PEa(e))!==PEa(a))return QEa.pushBool(!1);for(s=a.wordsAsFloat32Array(),t=e.wordsAsFloat32Array(),i=0;i<=r-1;i++)if(s[i]!==t[i])return QEa.pushBool(!1);return QEa.pushBool(!0)}function _Ea(){var e,t,i,r,a;if(i=QEa.stackObjectValue(0),QEa.failed())return null;if(QEa.success(QEa.isWords(i)),QEa.failed())return null;for(t=PEa(i),r=i.wordsAsInt32Array(),e=a=0;e<=t-1;e++)a+=r[e];return QEa.pop(1),QEa.pushInteger(536870911&a)}function aFa(){var e,t,i,r,a;if(i=QEa.stackObjectValue(0),QEa.failed())return null;if(QEa.success(QEa.isWords(i)),QEa.failed())return null;for(t=PEa(i),QEa.success(!0),r=i.wordsAsFloat32Array(),e=a=0;e<=t-1;e++)a+=r[e]*r[e];a=Math.sqrt(a),QEa.popthenPush(1,QEa.floatObjectOf(a))}function bFa(){var e,t,i,r,a,s;if(e=QEa.stackObjectValue(0),a=QEa.stackObjectValue(1),QEa.failed())return null;if(QEa.success(QEa.isWords(e)),QEa.success(QEa.isWords(a)),QEa.failed())return null;if(r=PEa(e),QEa.success(r===PEa(a)),QEa.failed())return null;for(s=a.wordsAsFloat32Array(),t=e.wordsAsFloat32Array(),i=0;i<=r-1;i++)s[i]=s[i]*t[i];QEa.pop(1)}function cFa(){var e,t,i,r,a;if(a=QEa.stackFloatValue(0),i=QEa.stackObjectValue(1),QEa.failed())return null;if(QEa.success(QEa.isWords(i)),QEa.failed())return null;for(t=PEa(i),r=i.wordsAsFloat32Array(),e=0;e<=t-1;e++)r[e]=r[e]*a;QEa.pop(1)}function dFa(){var e,t,i,r,a;if(r=QEa.stackObjectValue(0),QEa.failed())return null;if(QEa.success(QEa.isWords(r)),QEa.failed())return null;for(i=PEa(r),QEa.success(!0),a=r.wordsAsFloat32Array(),e=t=0;e<=i-1;e++)t+=a[e]*a[e];if(QEa.success(0<t),QEa.failed())return null;for(t=Math.sqrt(t),e=0;e<=i-1;e++)a[e]=a[e]/t}function eFa(){var e,t,i,r,a,s;if(e=QEa.stackObjectValue(0),a=QEa.stackObjectValue(1),QEa.failed())return null;if(QEa.success(QEa.isWords(e)),QEa.success(QEa.isWords(a)),QEa.failed())return null;if(r=PEa(e),QEa.success(r===PEa(a)),QEa.failed())return null;for(s=a.wordsAsFloat32Array(),t=e.wordsAsFloat32Array(),i=0;i<=r-1;i++)s[i]=s[i]-t[i];QEa.pop(1)}function fFa(){var e,t,i,r,a;if(a=QEa.stackFloatValue(0),i=QEa.stackObjectValue(1),QEa.failed())return null;if(QEa.success(QEa.isWords(i)),QEa.failed())return null;for(t=PEa(i),r=i.wordsAsFloat32Array(),e=0;e<=t-1;e++)r[e]=r[e]-a;QEa.pop(1)}function gFa(){var e,t,i,r,a;if(i=QEa.stackObjectValue(0),QEa.failed())return null;if(QEa.success(QEa.isWords(i)),QEa.failed())return null;for(t=PEa(i),r=i.wordsAsFloat32Array(),e=a=0;e<=t-1;e++)a+=r[e];QEa.popthenPush(1,QEa.floatObjectOf(a))}function hFa(e){return!1!=((QEa=e).majorVersion()==NEa)&&QEa.minorVersion()>=OEa}function WGa(e){return e.pointers?e.pointers.length:e.words?e.words.length:e.bytes?e.bytes.length:0}function XGa(e,t){return new Int32Array(e.buffer,e.byteOffset+4*t)}function $Ga(e,t){var i,r,a,s;return i=e[0],a=e[1],(r=t[0]-i)*r+(s=t[1]-a)*s}function aHa(){return ZGa}function dHa(e){console.log(ZGa+": "+e)}function eHa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y,j,I,O,_,V,F,P,w,T,W,A,C,x,M,q,R,N,B,E,U,D,G,L,J,Z,z,H,Q;if(x=YGa.stackValue(11),M=YGa.stackValue(10),q=YGa.stackValue(9),R=YGa.stackValue(8),N=YGa.stackValue(7),B=YGa.stackValue(6),E=YGa.stackValue(5),U=YGa.stackValue(4),D=YGa.stackIntegerValue(3),G=YGa.stackValue(2),L=YGa.stackValue(1),J=YGa.stackValue(0),YGa.failed())return null;if(YGa.failed())return dHa("failed 1"),null;if(YGa.success(YGa.isWords(x)&&YGa.isWords(M)&&YGa.isWords(q)&&YGa.isWords(R)&&YGa.isWords(N)&&YGa.isWords(B)&&YGa.isWords(E)&&YGa.isWords(U)&&YGa.isWords(G)&&YGa.isWords(L)&&YGa.isWords(J)),YGa.failed())return dHa("failed 2"),null;if(YGa.success(YGa.isMemberOf(x,"PointArray")&&YGa.isMemberOf(M,"PointArray")),YGa.failed())return dHa("failed 3"),null;if(h=x.wordsAsInt32Array(),v=M.wordsAsInt32Array(),k=q.wordsAsInt32Array(),u=R.wordsAsInt32Array(),d=N.wordsAsInt32Array(),c=B.wordsAsInt32Array(),T=E.wordsAsInt32Array(),e=U.wordsAsInt32Array(),y=G.wordsAsInt32Array(),A=L.wordsAsInt32Array(),S=J.wordsAsInt32Array(),g=WGa(M)>>>1,V=WGa(q)>>>1,l=WGa(R)>>>1,t=WGa(B),f=WGa(G),YGa.success(f===WGa(L)&&f===WGa(J)&&l<f),YGa.failed())return dHa("failed 4"),null;if(YGa.success(WGa(N)>=V-1&&WGa(x)>>>1>=V&&l-1<=t&&l<=g&&WGa(E)>=V-1&&WGa(U)>=l-1),YGa.failed())return dHa("failed 5"),null;if(F=D>>>1,b=(i=1&D)?0:F*F>>>10,S[A[y[0]=0]=0]=2,O=0-b,!((p=l)-1<=g&&p-1<=t))return YGa.primitiveFail(),null;for(I=1;I<=p;I++)O=O+(c[r=I-1]+$Ga(XGa(v,r<<1),h)>>>7)+b,A[I]=O,y[I]=O*I,S[I]=I+1;for(O=A[0]-b,_=1;_<=V;_++){for(j=(a=_-1)<<1,w=y[0],O=O+(d[a]+$Ga(XGa(h,j),v)>>>7)+b,A[0]=O,y[0]=O*_,S[0]=_+1,p=l,I=1;I<=p;I++)s=(r=I-1)<<1,P=y[I],C=y[r],m=d[a]+$Ga(XGa(h,j),XGa(v,I<<1))>>>7,0===(O=A[I])?P+=m:(P=P+O+m*S[I],m+=O),o=c[r]+$Ga(XGa(v,s),XGa(h,_<<1))>>>7,0===(O=A[r])?C+=o:(C=C+O+o*S[r],o+=O),i?w=1<<29:w+=($Ga(XGa(u,s),XGa(k,j))+$Ga(XGa(v,s),XGa(h,j)))*(16+(z=e[r],H=T[a],Q=void 0,180<(Q=Math.abs(H-z))&&(Q=360-Q),Q*Q>>>6))>>>11,W=w<=P&&w<=C?(n=w,O=0,1):P<=C?(n=P,O=m+b,S[I]+1):(n=C,O=o+b,S[r]+1),w=y[I],y[I]=Math.min(n,1<<29),A[I]=Math.min(O,1<<29),S[I]=W;O=A[0]}return Z=n,YGa.failed()||YGa.popthenPush(13,Z),null}function fHa(){return YGa.failed()||YGa.popthenPush(1,2e3),null}function gHa(e){return!1!=((YGa=e).majorVersion()==UGa)&&YGa.minorVersion()>=VGa}function yIa(e){return e.pointers?e.pointers.length:e.words?e.words.length:e.bytes?e.bytes.length:0}function AIa(e,t){return 0|Math.floor(e/t)}function BIa(e,t){return 31<t?0:e<<t}function GJa(e,t){return"number"!=typeof t&&(!!sJa.isPointers(t)&&(!(yIa(t)<eJa)&&(e[FIa]=sJa.fetchIntegerofObject(FIa,t),e[GIa]=sJa.fetchIntegerofObject(GIa,t),e[$Ia]=sJa.fetchIntegerofObject($Ia,t),e[iJa]=sJa.fetchIntegerofObject(iJa,t),e[DIa]=sJa.fetchIntegerofObject(DIa,t),e[aJa]=sJa.fetchIntegerofObject(aJa,t),e[fJa]=sJa.fetchIntegerofObject(fJa,t),!sJa.failed())))}function HJa(e,t){var i,r,a,s;if("number"==typeof t)return!1;if(!sJa.isPointers(t))return!1;if(yIa(t)<eJa)return!1;if("number"==typeof(i=sJa.fetchPointerofObject(_Ia,t)))return!1;if(!sJa.isPointers(i))return!1;if(s=yIa(i),cJa<s)return!1;for(a=0;a<=s-1;a++){if("number"==typeof(r=sJa.fetchPointerofObject(a,i)))return!1;if(!sJa.isWords(r))return!1;if(yIa(r)!==IIa)return!1;e[a]=r.wordsAsInt32Array()}return!sJa.failed()}function NJa(e){var t,i;return xJa<e&&(function(){for(var e;xJa<=16;){if(!(zJa<AJa))return;if(e=yJa[zJa],++zJa,255===e){if(!(zJa<AJa&&0===yJa[zJa]))return--zJa;++zJa}wJa=wJa<<8|e,xJa+=8}}(),xJa<e)?-1:(t=wJa,wJa&=BIa(1,i=xJa-=e)-1,31<i?0:t>>>i)}function OJa(){return BJa}function QJa(e,t){var i,r,a,s,n;if(r=e[0]>>>24,bJa<r)return-1;for(s=2;;){if((i=NJa(r))<0)return-1;if(t<=(a=s+i-1))return-1;if(0==(1056964608&(n=e[a])))return n;if(s=65535&n,bJa<(r=n>>>24&255))return-1}return-1}function SJa(){var e,t,i,r,a,s,n,o;return i=t=mJa[FIa],r=mJa[GIa],n=mJa[$Ia],o=mJa[iJa],0!==n&&0!==o&&(i=AIa(i,n),r=AIa(r,o)),e=(r>>>3)*mJa[DIa]+(i>>>3),s=((7&r)<<3)+(7&i),a=lJa[e][s],++t<8*mJa[aJa]?mJa[FIa]=t:(mJa[FIa]=0,mJa[GIa]++),a}function TJa(){var e,t,i,r,a,s,n,o;return i=t=oJa[FIa],r=oJa[GIa],n=oJa[$Ia],o=oJa[iJa],0!==n&&0!==o&&(i=AIa(i,n),r=AIa(r,o)),e=(r>>>3)*oJa[DIa]+(i>>>3),s=((7&r)<<3)+(7&i),a=nJa[e][s],++t<8*oJa[aJa]?oJa[FIa]=t:(oJa[FIa]=0,oJa[GIa]++),a}function UJa(){var e,t,i,r,a,s,n,o;return i=t=EJa[FIa],r=EJa[GIa],n=EJa[$Ia],o=EJa[iJa],0!==n&&0!==o&&(i=AIa(i,n),r=AIa(r,o)),e=(r>>>3)*EJa[DIa]+(i>>>3),s=((7&r)<<3)+(7&i),a=DJa[e][s],++t<8*EJa[aJa]?EJa[FIa]=t:(EJa[FIa]=0,EJa[GIa]++),a}function VJa(){var e;return 4!==sJa.methodArgumentCount()?sJa.primitiveFail():(rJa=sJa.stackIntegerValue(0),e=sJa.stackObjectValue(1),sJa.failed()?null:sJa.isWords(e)&&3===yIa(e)?(CJa=e.wordsAsInt32Array(),e=sJa.stackObjectValue(2),sJa.failed()?null:sJa.isWords(e)?(uJa=yIa(e),tJa=e.wordsAsInt32Array(),e=sJa.stackObjectValue(3),sJa.failed()?null:aKa(e)?(function(){var e,t;for(EJa[FIa]=0,e=EJa[GIa]=0;e<=uJa-1;e++)t=UJa(),t+=CJa[ZIa],t=Math.min(t,dJa),CJa[ZIa]=t&rJa,t&=dJa-rJa,t=Math.max(t,1),tJa[e]=4278190080+(t<<16)+(t<<8)+t}(),void sJa.pop(4)):sJa.primitiveFail()):sJa.primitiveFail()):sJa.primitiveFail())}function WJa(){var e,t,i;return 4!==sJa.methodArgumentCount()?sJa.primitiveFail():(rJa=sJa.stackIntegerValue(0),e=sJa.stackObjectValue(1),sJa.failed()?null:sJa.isWords(e)&&3===yIa(e)?(CJa=e.wordsAsInt32Array(),e=sJa.stackObjectValue(2),sJa.failed()?null:sJa.isWords(e)?(uJa=yIa(e),tJa=e.wordsAsInt32Array(),e=sJa.stackObjectValue(3),sJa.failed()?null:sJa.isPointers(e)&&3===yIa(e)&&aKa(sJa.fetchPointerofObject(0,e))?(t=sJa.fetchPointerofObject(1,e),GJa(mJa,t)&&HJa(lJa,t)?(i=sJa.fetchPointerofObject(2,e),GJa(oJa,i)&&HJa(nJa,i)?(function(){var e,t,i,r,a,s,n;for(EJa[FIa]=0,EJa[GIa]=0,mJa[FIa]=0,mJa[GIa]=0,oJa[FIa]=0,a=oJa[GIa]=0;a<=uJa-1;a++)n=UJa(),t=SJa(),t-=hJa,i=TJa(),s=n+(RIa*(i-=hJa)>>16)+CJa[gJa],s=Math.min(s,dJa),s=Math.max(s,0),CJa[gJa]=s&rJa,s&=dJa-rJa,s=Math.max(s,1),r=n-(KIa*t>>16)-(NIa*i>>16)+CJa[ZIa],r=Math.min(r,dJa),r=Math.max(r,0),CJa[ZIa]=r&rJa,r&=dJa-rJa,r=Math.max(r,1),e=n+(TIa*t>>16)+CJa[EIa],e=Math.min(e,dJa),e=Math.max(e,0),CJa[EIa]=e&rJa,e&=dJa-rJa,e=Math.max(e,1),tJa[a]=4278190080+(s<<16)+(r<<8)+e}(),void sJa.pop(4)):sJa.primitiveFail()):sJa.primitiveFail()):sJa.primitiveFail()):sJa.primitiveFail()):sJa.primitiveFail())}function XJa(){var e,t,i,r;return 5!==sJa.methodArgumentCount()?sJa.primitiveFail():(i=sJa.stackObjectValue(0),sJa.failed()?null:function(e){var t,i,r;if(!(yIa(e)<5)&&sJa.isPointers(e)&&"number"!=typeof(t=sJa.fetchPointerofObject(0,e))&&sJa.isBytes(t)&&(yJa=t.bytes,i=(r=t).bytes?r.bytes.length:r.words?4*r.words.length:0,zJa=sJa.fetchIntegerofObject(1,e),AJa=sJa.fetchIntegerofObject(2,e),wJa=sJa.fetchIntegerofObject(3,e),xJa=sJa.fetchIntegerofObject(4,e),!sJa.failed()&&!(i<AJa||zJa<0||AJa<=zJa)))return 1}(i)?(t=sJa.stackObjectValue(1),sJa.failed()?null:sJa.isWords(t)?(kJa=yIa(t),jJa=t.wordsAsInt32Array(),t=sJa.stackObjectValue(2),sJa.failed()?null:sJa.isWords(t)?(qJa=yIa(t),pJa=t.wordsAsInt32Array(),i=sJa.stackObjectValue(3),sJa.failed()?null:GJa(EJa,i)?(t=sJa.stackObjectValue(4),sJa.failed()?null:!sJa.isWords(t)||yIa(t)!==IIa?sJa.primitiveFail():(e=t.wordsAsInt32Array(),sJa.failed()?null:(function(e,t){var i,r,a,s;if((i=QJa(pJa,qJa))<0)return sJa.primitiveFail();for(0!==i&&(i=ZJa(NJa(i),i)),i=t[fJa]=t[fJa]+i,e[0]=i,r=1;r<=IIa-1;r++)e[r]=0;for(a=1;a<IIa;){if((i=QJa(jJa,kJa))<0)return sJa.primitiveFail();if(s=i>>>4,0!==(i&=15)){if(a+=s,i=ZJa(NJa(i),i),a<0||IIa<=a)return sJa.primitiveFail();e[vJa[a]]=i}else{if(15!=s)return;a+=s}++a}}(e,EJa),sJa.failed()?null:(r=sJa.stackValue(0),sJa.storeIntegerofObjectwithValue(1,r,zJa),sJa.storeIntegerofObjectwithValue(3,r,wJa),sJa.storeIntegerofObjectwithValue(4,r,xJa),sJa.storeIntegerofObjectwithValue(fJa,sJa.stackValue(3),EJa[fJa]),void sJa.pop(5))))):sJa.primitiveFail()):sJa.primitiveFail()):sJa.primitiveFail()):sJa.primitiveFail())}function YJa(){var e,t;return 2!==sJa.methodArgumentCount()?sJa.primitiveFail():(e=sJa.stackObjectValue(0),sJa.failed()?null:sJa.isWords(e)&&yIa(e)===IIa?(t=e.wordsAsInt32Array(),e=sJa.stackObjectValue(1),sJa.failed()?null:sJa.isWords(e)&&yIa(e)===IIa?(function(e,t){var i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y=new Array(64);for(a=0;a<=HIa-1;a++){for(i=-1,n=1;n<=HIa-1;n++)-1===i&&0!==e[n*HIa+a]&&(i=n);if(-1===i)for(r=e[a]*t[0]<<2,s=0;s<=HIa-1;s++)y[s*HIa+a]=r;else p=(m=((v=e[2*HIa+a]*t[2*HIa+a])+(g=e[6*HIa+a]*t[6*HIa+a]))*MIa)+g*(0-UIa),d=m+v*OIa,l=(o=(v=e[a]*t[a])+(g=e[4*HIa+a]*t[4*HIa+a])<<13)+d,h=o-d,c=(u=v-g<<13)+p,f=u-p,o=e[7*HIa+a]*t[7*HIa+a],u=e[5*HIa+a]*t[5*HIa+a],p=e[3*HIa+a]*t[3*HIa+a],m=o+(d=e[HIa+a]*t[HIa+a]),v=u+p,S=((g=o+p)+(k=u+d))*QIa,g*=0-VIa,k*=0-LIa,o=(o*=JIa)+(m*=0-PIa)+(g+=S),u=(u*=WIa)+(v*=0-XIa)+(k+=S),p=(p*=YIa)+v+g,d=(d*=SIa)+m+k,y[a]=l+d>>11,y[7*HIa+a]=l-d>>11,y[+HIa+a]=c+p>>11,y[6*HIa+a]=c-p>>11,y[2*HIa+a]=f+u>>11,y[5*HIa+a]=f-u>>11,y[3*HIa+a]=h+o>>11,y[4*HIa+a]=h-o>>11}for(a=0;a<=IIa-HIa;a+=HIa)p=(m=((v=y[a+2])+(g=y[a+6]))*MIa)+g*(0-UIa),d=m+v*OIa,l=(o=y[a]+y[a+4]<<13)+d,h=o-d,c=(u=y[a]-y[a+4]<<13)+p,f=u-p,o=y[a+7],u=y[a+5],p=y[a+3],m=o+(d=y[a+1]),v=u+p,S=((g=o+p)+(k=u+d))*QIa,g*=0-VIa,k*=0-LIa,o=(o*=JIa)+(m*=0-PIa)+(g+=S),u=(u*=WIa)+(v*=0-XIa)+(k+=S),p=(p*=YIa)+v+g,b=(l+(d=(d*=SIa)+m+k)>>18)+hJa,b=Math.min(b,dJa),b=Math.max(b,0),e[a]=b,b=(l-d>>18)+hJa,b=Math.min(b,dJa),b=Math.max(b,0),e[a+7]=b,b=(c+p>>18)+hJa,b=Math.min(b,dJa),b=Math.max(b,0),e[a+1]=b,b=(c-p>>18)+hJa,b=Math.min(b,dJa),b=Math.max(b,0),e[a+6]=b,b=(f+u>>18)+hJa,b=Math.min(b,dJa),b=Math.max(b,0),e[a+2]=b,b=(f-u>>18)+hJa,b=Math.min(b,dJa),b=Math.max(b,0),e[a+5]=b,b=(h+o>>18)+hJa,b=Math.min(b,dJa),b=Math.max(b,0),e[a+3]=b,b=(h-o>>18)+hJa,b=Math.min(b,dJa),b=Math.max(b,0),e[a+4]=b}(e.wordsAsInt32Array(),t),void sJa.pop(2)):sJa.primitiveFail()):sJa.primitiveFail())}function ZJa(e,t){return e<BIa(1,t-1)?e-BIa(1,t)+1:e}function $Ja(e){return!1!=((sJa=e).majorVersion()==wIa)&&sJa.minorVersion()>=xIa}function aKa(e){return GJa(EJa,e)&&HJa(DJa,e)}function eMa(e){return e.pointers?e.pointers.length:e.words?e.words.length:e.bytes?e.bytes.length:0}function fMa(e,t){return 0|Math.floor(e/t)}function gMa(e,t){return e-fMa(e,t)*t|0}function pMa(e,t){var i,r;return 0===e?0<=t?90:270:(i=t/e,r=Math.atan(i),0<=e?0<=t?r/.0174532925199433:360+r/.0174532925199433:180+r/.0174532925199433)}function qMa(e){var t,i;return i=(t=90-e)/360|0,t<0&&--i,.0174532925199433*(t-360*i)}function rMa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b;if(l=iMa.stackValue(0),t=iMa.stackValue(1),b=iMa.stackValue(2),h=iMa.stackValue(3),r=iMa.stackIntegerValue(4),s=iMa.stackIntegerValue(5),a=iMa.stackValue(6),iMa.failed())return null;if(!iMa.isWords(a))return iMa.primitiveFail(),null;if(!iMa.isWords(h))return iMa.primitiveFail(),null;if(!iMa.isWords(b))return iMa.primitiveFail(),null;if(!iMa.isWords(t))return iMa.primitiveFail(),null;if(!iMa.isBytes(l))return iMa.primitiveFail(),null;if(r*s!==eMa(a))return iMa.primitiveFail(),null;if(o=eMa(h),eMa(b)!==o)return iMa.primitiveFail(),null;if(eMa(t)!==o)return iMa.primitiveFail(),null;if(eMa(l)!==o)return iMa.primitiveFail(),null;for(f=h.wordsAsFloat32Array(),d=b.wordsAsFloat32Array(),e=t.words,u=l.bytes,i=a.words,n=0;n<=o-1;n++)c=0|f[n],p=0|d[n],0!==u[n]&&0<=c&&0<=p&&c<s&&p<r&&(i[p*s+c]=e[n]);if(iMa.failed())return null;iMa.pop(7)}function sMa(){var e,t,i,r,a,s,n;if(s=iMa.stackValue(0),i=iMa.stackValue(1),iMa.failed())return null;if(!iMa.isWords(i))return iMa.primitiveFail(),null;if(!iMa.isWords(s))return iMa.primitiveFail(),null;if(n=eMa(i),eMa(s)!==n)return iMa.primitiveFail(),null;for(t=i.wordsAsFloat32Array(),a=s.wordsAsFloat32Array(),r=0;r<=n-1;r++)e=t[r],0<(e=90-(e/=.0174532925199433))||(e+=360),a[r]=e;if(iMa.failed())return null;iMa.pop(2)}function tMa(){return kMa}function uMa(){var e,t,i;return t=iMa.stackValue(0),i=iMa.stackIntegerValue(1),iMa.failed()?null:!iMa.isWords(t)||eMa(t)<i?(iMa.primitiveFail(),null):(e=QMa(e=t.wordsAsFloat32Array()[i-1]),iMa.failed()?null:(iMa.pop(3),void iMa.pushFloat(e)))}function vMa(){jMa=17,nMa=fMa(mMa=2147483647,lMa=16807),oMa=gMa(mMa,lMa)}function wMa(e){var t,i,r,a;return r=e<0?0-e:e,t=fMa(jMa,nMa),i=gMa(jMa,nMa),a=(65535&(jMa=lMa*i-oMa*t))*(r+1)>>>16,e<0?0-a:a}function xMa(){var e;if(e=iMa.stackIntegerValue(0),iMa.failed())return null;jMa=65536&e,iMa.pop(1)}function yMa(){var e,t,i,r,a,s,n,o,u,l,c,f;if(l=iMa.stackIntegerValue(0),u=iMa.stackIntegerValue(1),o=iMa.stackValue(2),r=iMa.stackValue(3),iMa.failed())return null;if((a=eMa(r))!==eMa(o))return iMa.primitiveFail(),null;if(l<-32)return iMa.primitiveFail(),null;if(8<l)return iMa.primitiveFail(),null;for(t=r.words,n=o.words,s=0;s<=a-1;s++)i=t[s],c=i,255<(e=(f=l)<0?f<-31?0:c>>>0-f:31<f?0:c<<f)&&(e=255),e<0&&(e=0),n[s]=e<<24&4278190080|u;iMa.pop(4)}function zMa(){var e,t,i,r,a,s,n,o,u,l,c,f;if(c=iMa.stackValue(0),f=iMa.stackIntegerValue(1),o=iMa.stackValue(2),r=iMa.stackValue(3),iMa.failed())return null;if(u=c.words[0],iMa.failed())return null;if(l=Math.log(u),(a=eMa(r))!==eMa(o))return iMa.primitiveFail(),null;for(t=r.words,n=o.words,s=0;s<=a-1;s++)255<(e=0===(i=t[s])?0:255/l*Math.log(i)|0)&&(e=255),n[s]=e<<24&4278190080|f;iMa.pop(4)}function AMa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p;if(e=iMa.stackIntegerValue(0),u=iMa.stackIntegerValue(1),p=iMa.stackValue(2),f=iMa.stackValue(3),o=iMa.stackValue(4),a=iMa.stackValue(5),!iMa.isWords(p))return iMa.primitiveFail(),null;if(!iMa.isWords(f))return iMa.primitiveFail(),null;if(!iMa.isWords(o))return iMa.primitiveFail(),null;if(!iMa.isWords(a))return iMa.primitiveFail(),null;if(s=eMa(o),eMa(f)!==s)return iMa.primitiveFail(),null;if(eMa(p)!==s)return iMa.primitiveFail(),null;if(eMa(a)!==e*u)return iMa.primitiveFail(),null;for(c=f.wordsAsFloat32Array(),h=p.wordsAsFloat32Array(),n=o.words,i=a.words,t=0;t<=e*u-1;t++)i[t]=0;for(t=0;t<=s-1;t++)l=c[t],0<=(r=u*h[t]+l)&&r<e*u&&(i[r]=n[t]);if(iMa.failed())return null;iMa.pop(6)}function BMa(){var e,t,i,r,a,s,n,o,u;return i=iMa.stackIntegerValue(0),a=iMa.stackIntegerValue(1),u=iMa.stackFloatValue(2),n=iMa.stackFloatValue(3),t=iMa.stackValue(4),iMa.failed()?null:!iMa.isWords(t)||eMa(t)!==i*a?(iMa.primitiveFail(),null):(s=0|n,o=0|u,e=t.words,r=0<=s&&s<a&&0<=o&&o<i?e[o*a+s]:0,iMa.failed()?null:(iMa.pop(6),void iMa.pushInteger(r)))}function CMa(){var e,t,i,r,a,s,n,o,u,l;return i=iMa.stackIntegerValue(0),s=iMa.stackIntegerValue(1),a=iMa.stackIntegerValue(2),l=iMa.stackFloatValue(3),o=iMa.stackFloatValue(4),t=iMa.stackValue(5),iMa.failed()?null:!iMa.isWords(t)||eMa(t)!==i*s?(iMa.primitiveFail(),null):(n=0|o,u=0|l,1073741823<(r=a)&&(r=1073741823),r<0&&(r=0),e=t.words,0<=n&&n<s&&0<=u&&u<i&&(e[u*s+n]=r),iMa.failed()?null:void iMa.pop(6))}function DMa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d;if(n=iMa.stackValue(0),t=iMa.stackIntegerValue(1),a=iMa.stackIntegerValue(2),r=iMa.stackValue(3),d=iMa.stackValue(4),f=iMa.stackValue(5),iMa.failed())return null;if(!iMa.isWords(n))return iMa.primitiveFail(),null;if(!iMa.isWords(f))return iMa.primitiveFail(),null;if(!iMa.isWords(d))return iMa.primitiveFail(),null;if(!iMa.isWords(r))return iMa.primitiveFail(),null;if(t*a!==eMa(r))return iMa.primitiveFail(),null;if(u=eMa(f),eMa(d)!==u)return iMa.primitiveFail(),null;if(eMa(n)!==u)return iMa.primitiveFail(),null;for(c=f.wordsAsFloat32Array(),p=d.wordsAsFloat32Array(),s=n.words,e=r.words,o=0;o<=u-1;o++)l=0|c[o],h=0|p[o],0<=l&&0<=h&&l<a&&h<t&&(i=h*a+l,s[o]=e[i]);if(iMa.failed())return null;iMa.pop(6)}function EMa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g;return e=iMa.stackIntegerValue(0),p=iMa.stackIntegerValue(1),f=iMa.stackIntegerValue(2),u=iMa.stackIntegerValue(3),t=iMa.stackFloatValue(4),i=iMa.stackFloatValue(5),d=iMa.stackFloatValue(6),s=iMa.stackValue(7),g=iMa.stackValue(8),m=iMa.stackValue(9),o=iMa.stackIntegerValue(10),iMa.failed()?null:iMa.isWords(m)&&iMa.isWords(g)&&iMa.isWords(s)?(h=eMa(m),eMa(g)!==h||eMa(s)!==h?(iMa.primitiveFail(),null):(b=m.wordsAsFloat32Array(),v=g.wordsAsFloat32Array(),a=s.wordsAsFloat32Array(),r=d,l=b[n=o-1]+r*Math.cos(a[n]),c=v[n]-r*Math.sin(a[n]),WMa(n,b,a,l,i,u,f),XMa(n,v,a,c,t,p,e),iMa.failed()?null:void iMa.pop(11))):(iMa.primitiveFail(),null)}function FMa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v;if(c=iMa.stackValue(0),t=iMa.stackIntegerValue(1),a=iMa.stackIntegerValue(2),r=iMa.stackValue(3),v=iMa.stackValue(4),d=iMa.stackValue(5),iMa.failed())return null;if(!iMa.isWords(d))return iMa.primitiveFail(),null;if(!iMa.isWords(v))return iMa.primitiveFail(),null;if(!iMa.isWords(r))return iMa.primitiveFail(),null;if(t*a!==eMa(r))return iMa.primitiveFail(),null;if(u=eMa(d),eMa(v)!==u)return iMa.primitiveFail(),null;if((o="number"==typeof c)&&(n=c),!o){if(!iMa.isMemberOf(c,"WordArray"))return iMa.primitiveFail(),null;if(eMa(c)!==u)return iMa.primitiveFail(),null}for(p=d.wordsAsFloat32Array(),m=v.wordsAsFloat32Array(),o||(f=c.words),e=r.words,o&&(l=n),s=0;s<=u-1;s++)h=0|p[s],b=0|m[s],0<=h&&0<=b&&h<a&&b<t&&(i=b*a+h,o||(l=f[s]),e[i]=l);if(iMa.failed())return null;iMa.pop(6)}function GMa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S;if(e=iMa.stackIntegerValue(0),p=iMa.stackIntegerValue(1),f=iMa.stackIntegerValue(2),u=iMa.stackIntegerValue(3),t=iMa.stackFloatValue(4),i=iMa.stackFloatValue(5),m=iMa.stackValue(6),s=iMa.stackValue(7),S=iMa.stackValue(8),g=iMa.stackValue(9),iMa.failed())return null;if(!iMa.isWords(g))return iMa.primitiveFail(),null;if(!iMa.isWords(S))return iMa.primitiveFail(),null;if(!iMa.isWords(s))return iMa.primitiveFail(),null;if(m.isFloat)o=!1;else{if(!iMa.isWords(m))return iMa.primitiveFail(),null;o=!0}if(h=eMa(g),eMa(S)!==h)return iMa.primitiveFail(),null;if(eMa(s)!==h)return iMa.primitiveFail(),null;if(o&&eMa(m)!==h)return iMa.primitiveFail(),null;for(v=g.wordsAsFloat32Array(),k=S.wordsAsFloat32Array(),a=s.wordsAsFloat32Array(),o?b=m.wordsAsFloat32Array():d=iMa.floatValueOf(m),n=0;n<=h-1;n++)r=o?b[n]:d,l=v[n]+r*Math.cos(a[n]),c=k[n]-r*Math.sin(a[n]),WMa(n,v,a,l,i,u,f),XMa(n,k,a,c,t,p,e);if(iMa.failed())return null;iMa.pop(10)}function HMa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y;if(c=iMa.stackIntegerValue(0),a=iMa.stackIntegerValue(1),k=iMa.stackIntegerValue(2),t=iMa.stackValue(3),p=iMa.stackFloatValue(4),b=iMa.stackFloatValue(5),d=iMa.stackFloatValue(6),iMa.failed())return null;if(!iMa.isWords(t))return iMa.primitiveFail(),null;if(eMa(t)!==a*k)return iMa.primitiveFail(),null;for(e=t.words,v=d,g=b,v=Math.max(v,0),g=Math.max(g,0),v=Math.min(v,k-1),g=Math.min(g,a-1),f=Math.max(v-c,0),i=Math.min(v+c,k-1),h=Math.max(g-c,0),r=Math.min(g+c,a-1),s=e[g*k+v],n=-1,y=h;y<=r;y++)for(l=y*k,S=f;S<=i;S++)s<(m=e[l+S])&&(n=S,o=y,s=m);if(u=-1===n?QMa(p):pMa(n-v,o-g)+90|0,iMa.failed())return null;iMa.pop(8),iMa.pushFloat(u)}function IMa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(l=iMa.stackObjectValue(0),e=iMa.stackObjectValue(1),u=iMa.stackObjectValue(2),iMa.failed())return null;if(iMa.success(iMa.isWords(e)),iMa.success(iMa.isWords(u)),iMa.success(iMa.isWords(l)),iMa.failed())return null;if(o=eMa(e),iMa.success(o===eMa(u)),iMa.success(o===eMa(l)),iMa.failed())return null;if(s=iMa.isMemberOf(e,"WordArray"),n=iMa.isMemberOf(u,"WordArray"),s&&n){if(!iMa.isMemberOf(l,"WordArray"))return iMa.primitiveFail(),null}else if(!iMa.isMemberOf(l,"KedamaFloatArray"))return iMa.primitiveFail(),null;if(n)if(s)for(f=u.words,c=e.words,h=l.words,a=0;a<=o-1;a++)h[a]=f[a]+c[a];else for(f=u.words,t=e.wordsAsFloat32Array(),r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=f[a]+t[a];else if(s)for(i=u.wordsAsFloat32Array(),c=e.words,r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=i[a]+c[a];else for(i=u.wordsAsFloat32Array(),t=e.wordsAsFloat32Array(),r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=i[a]+t[a];iMa.pop(4),iMa.push(l)}function JMa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(c=iMa.stackObjectValue(0),e=iMa.stackValue(1),l=iMa.stackObjectValue(2),iMa.failed())return null;if(iMa.success(iMa.isWords(l)),iMa.success(iMa.isWords(c)),iMa.failed())return null;if(u=eMa(l),iMa.success(u===eMa(c)),iMa.failed())return null;if(n="number"==typeof e,o=iMa.isMemberOf(l,"WordArray"),n&&o){if(!iMa.isMemberOf(c,"WordArray"))return iMa.primitiveFail(),null}else if(!iMa.isMemberOf(c,"KedamaFloatArray"))return iMa.primitiveFail(),null;if(o)if(n)for(f=l.words,s=e,h=c.words,a=0;a<=u-1;a++)h[a]=f[a]+s;else for(f=l.words,t=iMa.floatValueOf(e),r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=f[a]+t;else if(n)for(i=l.wordsAsFloat32Array(),s=e,r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=i[a]+s;else for(i=l.wordsAsFloat32Array(),t=iMa.floatValueOf(e),r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=i[a]+t;iMa.pop(4),iMa.push(c)}function KMa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(l=iMa.stackObjectValue(0),e=iMa.stackObjectValue(1),u=iMa.stackObjectValue(2),iMa.failed())return null;if(iMa.success(iMa.isWords(e)),iMa.success(iMa.isWords(u)),iMa.success(iMa.isWords(l)),iMa.failed())return null;if(o=eMa(e),iMa.success(o===eMa(u)),iMa.success(o===eMa(l)),iMa.failed())return null;if(s=iMa.isMemberOf(e,"WordArray"),n=iMa.isMemberOf(u,"WordArray"),s&&n){if(!iMa.isMemberOf(l,"WordArray"))return iMa.primitiveFail(),null}else if(!iMa.isMemberOf(l,"KedamaFloatArray"))return iMa.primitiveFail(),null;if(n)if(s)for(f=u.words,c=e.words,h=l.words,a=0;a<=o-1;a++)h[a]=f[a]/c[a];else for(f=u.words,t=e.wordsAsFloat32Array(),r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=f[a]/t[a];else if(s)for(i=u.wordsAsFloat32Array(),c=e.words,r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=i[a]/c[a];else for(i=u.wordsAsFloat32Array(),t=e.wordsAsFloat32Array(),r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=i[a]/t[a];iMa.pop(4),iMa.push(l)}function LMa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(c=iMa.stackObjectValue(0),e=iMa.stackValue(1),l=iMa.stackObjectValue(2),iMa.failed())return null;if(iMa.success(iMa.isWords(l)),iMa.success(iMa.isWords(c)),iMa.failed())return null;if(u=eMa(l),iMa.success(u===eMa(c)),iMa.failed())return null;if(n="number"==typeof e,o=iMa.isMemberOf(l,"WordArray"),n&&o){if(!iMa.isMemberOf(c,"WordArray"))return iMa.primitiveFail(),null}else if(!iMa.isMemberOf(c,"KedamaFloatArray"))return iMa.primitiveFail(),null;if(o)if(n)for(f=l.words,s=e,h=c.words,a=0;a<=u-1;a++)h[a]=fMa(f[a],s);else for(f=l.words,t=iMa.floatValueOf(e),r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=f[a]/t;else if(n)for(i=l.wordsAsFloat32Array(),s=e,r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=i[a]/s;else for(i=l.wordsAsFloat32Array(),t=iMa.floatValueOf(e),r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=i[a]/t;iMa.pop(4),iMa.push(c)}function MMa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(l=iMa.stackObjectValue(0),e=iMa.stackObjectValue(1),u=iMa.stackObjectValue(2),iMa.failed())return null;if(iMa.success(iMa.isWords(e)),iMa.success(iMa.isWords(u)),iMa.success(iMa.isWords(l)),iMa.failed())return null;if(o=eMa(e),iMa.success(o===eMa(u)),iMa.success(o===eMa(l)),iMa.failed())return null;if(s=iMa.isMemberOf(e,"WordArray"),n=iMa.isMemberOf(u,"WordArray"),s&&n){if(!iMa.isMemberOf(l,"WordArray"))return iMa.primitiveFail(),null}else if(!iMa.isMemberOf(l,"KedamaFloatArray"))return iMa.primitiveFail(),null;if(n)if(s)for(f=u.words,c=e.words,h=l.words,a=0;a<=o-1;a++)h[a]=f[a]*c[a];else for(f=u.words,t=e.wordsAsFloat32Array(),r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=f[a]*t[a];else if(s)for(i=u.wordsAsFloat32Array(),c=e.words,r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=i[a]*c[a];else for(i=u.wordsAsFloat32Array(),t=e.wordsAsFloat32Array(),r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=i[a]*t[a];iMa.pop(4),iMa.push(l)}function NMa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(c=iMa.stackObjectValue(0),e=iMa.stackValue(1),l=iMa.stackObjectValue(2),iMa.failed())return null;if(iMa.success(iMa.isWords(l)),iMa.success(iMa.isWords(c)),iMa.failed())return null;if(u=eMa(l),iMa.success(u===eMa(c)),iMa.failed())return null;if(n="number"==typeof e,o=iMa.isMemberOf(l,"WordArray"),n&&o){if(!iMa.isMemberOf(c,"WordArray"))return iMa.primitiveFail(),null}else if(!iMa.isMemberOf(c,"KedamaFloatArray"))return iMa.primitiveFail(),null;if(o)if(n)for(f=l.words,s=e,h=c.words,a=0;a<=u-1;a++)h[a]=f[a]*s;else for(f=l.words,t=iMa.floatValueOf(e),r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=f[a]*t;else if(n)for(i=l.wordsAsFloat32Array(),s=e,r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=i[a]*s;else for(i=l.wordsAsFloat32Array(),t=iMa.floatValueOf(e),r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=i[a]*t;iMa.pop(4),iMa.push(c)}function OMa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(l=iMa.stackObjectValue(0),e=iMa.stackObjectValue(1),u=iMa.stackObjectValue(2),iMa.failed())return null;if(iMa.success(iMa.isWords(e)),iMa.success(iMa.isWords(u)),iMa.success(iMa.isWords(l)),iMa.failed())return null;if(o=eMa(e),iMa.success(o===eMa(u)),iMa.success(o===eMa(l)),iMa.failed())return null;if(s=iMa.isMemberOf(e,"WordArray"),n=iMa.isMemberOf(u,"WordArray"),s&&n){if(!iMa.isMemberOf(l,"WordArray"))return iMa.primitiveFail(),null}else if(!iMa.isMemberOf(l,"KedamaFloatArray"))return iMa.primitiveFail(),null;if(n)if(s)for(f=u.words,c=e.words,h=l.words,a=0;a<=o-1;a++)h[a]=f[a]-c[a];else for(f=u.words,t=e.wordsAsFloat32Array(),r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=f[a]-t[a];else if(s)for(i=u.wordsAsFloat32Array(),c=e.words,r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=i[a]-c[a];else for(i=u.wordsAsFloat32Array(),t=e.wordsAsFloat32Array(),r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=i[a]-t[a];iMa.pop(4),iMa.push(l)}function PMa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(c=iMa.stackObjectValue(0),e=iMa.stackValue(1),l=iMa.stackObjectValue(2),iMa.failed())return null;if(iMa.success(iMa.isWords(l)),iMa.success(iMa.isWords(c)),iMa.failed())return null;if(u=eMa(l),iMa.success(u===eMa(c)),iMa.failed())return null;if(n="number"==typeof e,o=iMa.isMemberOf(l,"WordArray"),n&&o){if(!iMa.isMemberOf(c,"WordArray"))return iMa.primitiveFail(),null}else if(!iMa.isMemberOf(c,"KedamaFloatArray"))return iMa.primitiveFail(),null;if(o)if(n)for(f=l.words,s=e,h=c.words,a=0;a<=u-1;a++)h[a]=f[a]-s;else for(f=l.words,t=iMa.floatValueOf(e),r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=f[a]-t;else if(n)for(i=l.wordsAsFloat32Array(),s=e,r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=i[a]-s;else for(i=l.wordsAsFloat32Array(),t=iMa.floatValueOf(e),r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=i[a]-t;iMa.pop(4),iMa.push(c)}function QMa(e){var t;return 0<(t=90-e/.0174532925199433)||(t+=360),t}function RMa(){var e,t,i,r,a,s,n;if(e=iMa.stackFloatValue(0),i=iMa.stackValue(1),n=iMa.stackIntegerValue(2),r=iMa.stackIntegerValue(3),s=iMa.stackIntegerValue(4),iMa.failed())return null;if(!iMa.isWords(i))return iMa.primitiveFail(),null;if(!(n<=eMa(i)&&1<=r&&r<=n))return iMa.primitiveFail(),null;if(t=i.wordsAsFloat32Array(),iMa.failed())return null;for(a=r;a<=n;a++)t[a-1]=wMa(s)*e;iMa.pop(5)}function SMa(){var e,t,i,r,a,s,n;if(e=iMa.stackFloatValue(0),a=iMa.stackValue(1),n=iMa.stackIntegerValue(2),t=iMa.stackIntegerValue(3),s=iMa.stackIntegerValue(4),iMa.failed())return null;if(!iMa.isWords(a))return iMa.primitiveFail(),null;if(!(n<=eMa(a)&&1<=t&&t<=n))return iMa.primitiveFail(),null;if(r=a.words,iMa.failed())return null;for(i=t;i<=n;i++)r[i-1]=wMa(s)*e|0;iMa.pop(5)}function TMa(){var e,t;return e=iMa.stackIntegerValue(0),iMa.failed()?null:(t=wMa(e),iMa.failed()?null:(iMa.pop(2),void iMa.pushInteger(t)))}function UMa(){var e,t,i,r,a;return t=iMa.stackFloatValue(0),e=iMa.stackFloatValue(1),a=iMa.stackFloatValue(2),r=iMa.stackFloatValue(3),iMa.failed()?null:(i=pMa(r-e,a-t),360<(i+=90)&&(i-=360),iMa.failed()?null:(iMa.pop(5),void iMa.pushFloat(i)))}function VMa(){var e,t,i,r,a,s,n;return t=iMa.stackFloatValue(0),e=iMa.stackFloatValue(1),a=iMa.stackFloatValue(2),r=iMa.stackFloatValue(3),iMa.failed()?null:(s=e-r,n=t-a,i=Math.sqrt(s*s+n*n),iMa.failed()?null:(iMa.pop(5),void iMa.pushFloat(i)))}function WMa(e,t,i,r,a,s,n){var o,u;(u=r)<0&&(1===s&&(u+=a),2===s&&(u=0),3===s&&(u=0-u,o=i[e],i[e]=o<3.141592653589793?3.141592653589793-o:9.42477796076938-o)),a<=u&&(1===n&&(u-=a),2===n&&(u=a-1e-6),3===n&&(u=a-1e-6-(u-a),o=i[e],i[e]=o<3.141592653589793?3.141592653589793-o:9.42477796076938-o)),t[e]=u}function XMa(e,t,i,r,a,s,n){var o;(o=r)<0&&(1===s&&(o+=a),2===s&&(o=0),3===s&&(o=0-o,i[e]=6.283185307179586-i[e])),a<=o&&(1===n&&(o-=a),2===n&&(o=a-1e-6),3===n&&(o=a-1e-6-(o-a),i[e]=6.283185307179586-i[e])),t[e]=o}function YMa(){var e,t,i,r,a,s,n,o;if(n=iMa.stackValue(0),i=iMa.stackValue(1),iMa.failed())return null;if(!iMa.isWords(i))return iMa.primitiveFail(),null;if(o=eMa(i),n.isFloat)a=!1;else{if(!iMa.isWords(n))return iMa.primitiveFail(),null;if(eMa(n)!==o)return iMa.primitiveFail(),null;a=!0}for(t=i.wordsAsFloat32Array(),a?s=n.wordsAsFloat32Array():e=qMa(e=iMa.floatValueOf(n)),r=0;r<=o-1;r++)a&&(e=qMa(e=s[r])),t[r]=e;if(iMa.failed())return null;iMa.pop(2)}function ZMa(e){return!1!=((iMa=e).majorVersion()==cMa)&&iMa.minorVersion()>=dMa}function $Ma(){var e,t,i;return e=iMa.stackFloatValue(0),t=iMa.stackValue(1),i=iMa.stackIntegerValue(2),iMa.failed()?null:!iMa.isWords(t)||eMa(t)<i?(iMa.primitiveFail(),null):(t.wordsAsFloat32Array()[i-1]=qMa(e),iMa.failed()?null:void iMa.pop(3))}function _Ma(){return!0}function aNa(){var e,t,i,r,a,s,n,o;return r=iMa.stackIntegerValue(0),i=iMa.stackIntegerValue(1),e=iMa.stackFloatValue(2),s=iMa.stackFloatValue(3),t=iMa.stackValue(4),n=iMa.stackIntegerValue(5),o=iMa.stackValue(6),iMa.failed()?null:iMa.isWords(o)&&iMa.isWords(t)?(a=eMa(o),eMa(t)!==a?(iMa.primitiveFail(),null):(WMa(n-1,o.wordsAsFloat32Array(),t.wordsAsFloat32Array(),s,e,i,r),iMa.failed()?null:void iMa.pop(7))):(iMa.primitiveFail(),null)}function bNa(){var e,t,i,r,a,s,n,o;return e=iMa.stackIntegerValue(0),a=iMa.stackIntegerValue(1),t=iMa.stackFloatValue(2),s=iMa.stackFloatValue(3),i=iMa.stackValue(4),n=iMa.stackIntegerValue(5),o=iMa.stackValue(6),iMa.failed()?null:iMa.isWords(o)&&iMa.isWords(i)?(r=eMa(o),eMa(i)!==r?(iMa.primitiveFail(),null):(XMa(n-1,o.wordsAsFloat32Array(),i.wordsAsFloat32Array(),s,t,a,e),iMa.failed()?null:void iMa.pop(7))):(iMa.primitiveFail(),null)}function cNa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(n=iMa.stackIntegerValue(0),s=iMa.stackIntegerValue(1),e=iMa.stackFloatValue(2),c=iMa.stackValue(3),i=iMa.stackValue(4),h=iMa.stackValue(5),iMa.failed())return null;if(!iMa.isWords(h))return iMa.primitiveFail(),null;if(!iMa.isWords(i))return iMa.primitiveFail(),null;if(c.isFloat)a=!1;else{if(!iMa.isWords(c))return iMa.primitiveFail(),null;a=!0}if(o=eMa(h),eMa(i)!==o)return iMa.primitiveFail(),null;if(a&&eMa(c)!==o)return iMa.primitiveFail(),null;for(f=h.wordsAsFloat32Array(),t=i.wordsAsFloat32Array(),a?l=c.wordsAsFloat32Array():u=iMa.floatValueOf(c),r=0;r<=o-1;r++)WMa(r,f,t,a?l[r]:u,e,s,n);if(iMa.failed())return null;iMa.pop(6)}function dNa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(e=iMa.stackIntegerValue(0),o=iMa.stackIntegerValue(1),t=iMa.stackFloatValue(2),c=iMa.stackValue(3),r=iMa.stackValue(4),h=iMa.stackValue(5),iMa.failed())return null;if(!iMa.isWords(h))return iMa.primitiveFail(),null;if(!iMa.isWords(r))return iMa.primitiveFail(),null;if(c.isFloat)s=!1;else{if(!iMa.isWords(c))return iMa.primitiveFail(),null;s=!0}if(n=eMa(h),eMa(r)!==n)return iMa.primitiveFail(),null;if(s&&eMa(c)!==n)return iMa.primitiveFail(),null;for(f=h.wordsAsFloat32Array(),i=r.wordsAsFloat32Array(),s?l=c.wordsAsFloat32Array():u=iMa.floatValueOf(c),a=0;a<=n-1;a++)XMa(a,f,i,s?l[a]:u,t,o,e);if(iMa.failed())return null;iMa.pop(6)}function eNa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b;if(c=iMa.stackValue(0),b=iMa.stackValue(1),p=iMa.stackValue(2),s=iMa.stackValue(3),r=iMa.stackValue(4),iMa.failed())return null;if(!iMa.isWords(c))return iMa.primitiveFail(),null;if(!iMa.isWords(p))return iMa.primitiveFail(),null;if(!iMa.isWords(b))return iMa.primitiveFail(),null;if((f=eMa(c))<0)return iMa.primitiveFail(),null;if(eMa(p)!==f)return iMa.primitiveFail(),null;if(eMa(b)!==f)return iMa.primitiveFail(),null;if(r.isFloat){if(!s.isFloat)return iMa.primitiveFail(),null;t=!1}else{if(s.isFloat)return iMa.primitiveFail(),null;t=!0}if(t){if(eMa(r)!==f)return iMa.primitiveFail(),null;if(eMa(s)!==f)return iMa.primitiveFail(),null}for(l=c.wordsAsFloat32Array(),h=p.wordsAsFloat32Array(),d=b.wordsAsFloat32Array(),t&&(i=r.wordsAsFloat32Array(),a=s.wordsAsFloat32Array()),t||(n=iMa.floatValueOf(r),o=iMa.floatValueOf(s)),e=0;e<=f-1;e++)t&&(n=i[e],o=a[e]),u=pMa(n-h[e],o-d[e]),360<(u+=90)&&(u-=360),l[e]=u;if(iMa.failed())return null;iMa.pop(6),iMa.push(c)}function fNa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m;if(l=iMa.stackValue(0),m=iMa.stackValue(1),p=iMa.stackValue(2),s=iMa.stackValue(3),r=iMa.stackValue(4),iMa.failed())return null;if(!iMa.isWords(l))return iMa.primitiveFail(),null;if(!iMa.isWords(p))return iMa.primitiveFail(),null;if(!iMa.isWords(m))return iMa.primitiveFail(),null;if((c=eMa(l))<0)return iMa.primitiveFail(),null;if(eMa(p)!==c)return iMa.primitiveFail(),null;if(eMa(m)!==c)return iMa.primitiveFail(),null;if(r.isFloat){if(!s.isFloat)return iMa.primitiveFail(),null;t=!1}else{if(s.isFloat)return iMa.primitiveFail(),null;t=!0}if(t){if(eMa(r)!==c)return iMa.primitiveFail(),null;if(eMa(s)!==c)return iMa.primitiveFail(),null}for(u=l.wordsAsFloat32Array(),h=p.wordsAsFloat32Array(),b=m.wordsAsFloat32Array(),t&&(i=r.wordsAsFloat32Array(),a=s.wordsAsFloat32Array()),t||(n=iMa.floatValueOf(r),o=iMa.floatValueOf(s)),e=0;e<=c-1;e++)t&&(n=i[e],o=a[e]),f=n-h[e],d=o-b[e],u[e]=Math.sqrt(f*f+d*d);if(iMa.failed())return null;iMa.pop(6),iMa.push(l)}function gNa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v;if(v=iMa.stackIntegerValue(0),b=iMa.stackIntegerValue(1),n=iMa.stackIntegerValue(2),u=iMa.stackIntegerValue(3),i=iMa.stackValue(4),l=iMa.stackValue(5),iMa.failed())return null;if(h=eMa(l),a=eMa(i),u*n!==h)return iMa.primitiveFail(),null;if(h*b*v!==a)return iMa.primitiveFail(),null;for(o=l.words,t=i.words,d=r=f=c=0;d<=n-1;d++){for(m=0;m<=v-1;m++){for(p=0;p<=u-1;p++)for(e=o[c],++c,s=0;s<=b-1;s++)t[r]=e,++r;c=f}c=f+=u}iMa.pop(6)}function fWa(e){return e.pointers?e.pointers.length:e.words?e.words.length:e.bytes?e.bytes.length:0}function gWa(e,t){return 0|Math.floor(e/t)}function hWa(e,t){return e-gWa(e,t)*t|0}function qWa(e,t){var i,r;return 0===e?0<=t?90:270:(i=t/e,r=Math.atan(i),0<=e?0<=t?r/.0174532925199433:360+r/.0174532925199433:180+r/.0174532925199433)}function rWa(e){var t,i;return i=(t=90-e)/360|0,t<0&&--i,.0174532925199433*(t-360*i)}function sWa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b;if(l=jWa.stackValue(0),t=jWa.stackValue(1),b=jWa.stackValue(2),h=jWa.stackValue(3),r=jWa.stackIntegerValue(4),s=jWa.stackIntegerValue(5),a=jWa.stackValue(6),jWa.failed())return null;if(!jWa.isWords(a))return jWa.primitiveFail(),null;if(!jWa.isWords(h))return jWa.primitiveFail(),null;if(!jWa.isWords(b))return jWa.primitiveFail(),null;if(!jWa.isWords(t))return jWa.primitiveFail(),null;if(!jWa.isBytes(l))return jWa.primitiveFail(),null;if(r*s!==fWa(a))return jWa.primitiveFail(),null;if(o=fWa(h),fWa(b)!==o)return jWa.primitiveFail(),null;if(fWa(t)!==o)return jWa.primitiveFail(),null;if(fWa(l)!==o)return jWa.primitiveFail(),null;for(f=h.wordsAsFloat32Array(),d=b.wordsAsFloat32Array(),e=t.words,u=l.bytes,i=a.words,n=0;n<=o-1;n++)c=0|f[n],p=0|d[n],0!==u[n]&&0<=c&&0<=p&&c<s&&p<r&&(i[p*s+c]=e[n]);if(jWa.failed())return null;jWa.pop(7)}function tWa(){var e,t,i,r,a,s,n;if(s=jWa.stackValue(0),i=jWa.stackValue(1),jWa.failed())return null;if(!jWa.isWords(i))return jWa.primitiveFail(),null;if(!jWa.isWords(s))return jWa.primitiveFail(),null;if(n=fWa(i),fWa(s)!==n)return jWa.primitiveFail(),null;for(t=i.wordsAsFloat32Array(),a=s.wordsAsFloat32Array(),r=0;r<=n-1;r++)e=t[r],0<(e=90-(e/=.0174532925199433))||(e+=360),a[r]=e;if(jWa.failed())return null;jWa.pop(2)}function uWa(){return lWa}function vWa(){var e,t,i;return t=jWa.stackValue(0),i=jWa.stackIntegerValue(1),jWa.failed()?null:!jWa.isWords(t)||fWa(t)<i?(jWa.primitiveFail(),null):(e=mXa(e=t.wordsAsFloat32Array()[i-1]),jWa.failed()?null:(jWa.pop(3),void jWa.pushFloat(e)))}function wWa(){kWa=17,oWa=gWa(nWa=2147483647,mWa=16807),pWa=hWa(nWa,mWa)}function xWa(e){var t,i,r,a;return r=e<0?0-e:e,t=gWa(kWa,oWa),i=hWa(kWa,oWa),a=(65535&(kWa=mWa*i-pWa*t))*(r+1)>>>16,e<0?0-a:a}function yWa(){var e;if(e=jWa.stackIntegerValue(0),jWa.failed())return null;kWa=65536&e,jWa.pop(1)}function zWa(){var e,t,i,r,a,s,n,o,u,l,c,f;if(l=jWa.stackIntegerValue(0),u=jWa.stackIntegerValue(1),o=jWa.stackValue(2),r=jWa.stackValue(3),jWa.failed())return null;if((a=fWa(r))!==fWa(o))return jWa.primitiveFail(),null;if(l<-32)return jWa.primitiveFail(),null;if(8<l)return jWa.primitiveFail(),null;for(t=r.words,n=o.words,s=0;s<=a-1;s++)i=t[s],c=i,255<(e=(f=l)<0?f<-31?0:c>>>0-f:31<f?0:c<<f)&&(e=255),e<0&&(e=0),n[s]=e<<24&4278190080|u;jWa.pop(4)}function AWa(){var e,t,i,r,a,s,n,o,u,l,c,f;if(c=jWa.stackValue(0),f=jWa.stackIntegerValue(1),o=jWa.stackValue(2),r=jWa.stackValue(3),jWa.failed())return null;if(u=c.words[0],jWa.failed())return null;if(l=Math.log(u),(a=fWa(r))!==fWa(o))return jWa.primitiveFail(),null;for(t=r.words,n=o.words,s=0;s<=a-1;s++)255<(e=0===(i=t[s])?0:255/l*Math.log(i)|0)&&(e=255),n[s]=e<<24&4278190080|f;jWa.pop(4)}function BWa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p;if(e=jWa.stackIntegerValue(0),u=jWa.stackIntegerValue(1),p=jWa.stackValue(2),f=jWa.stackValue(3),o=jWa.stackValue(4),a=jWa.stackValue(5),!jWa.isWords(p))return jWa.primitiveFail(),null;if(!jWa.isWords(f))return jWa.primitiveFail(),null;if(!jWa.isWords(o))return jWa.primitiveFail(),null;if(!jWa.isWords(a))return jWa.primitiveFail(),null;if(s=fWa(o),fWa(f)!==s)return jWa.primitiveFail(),null;if(fWa(p)!==s)return jWa.primitiveFail(),null;if(fWa(a)!==e*u)return jWa.primitiveFail(),null;for(c=f.wordsAsFloat32Array(),h=p.wordsAsFloat32Array(),n=o.words,i=a.words,t=0;t<=e*u-1;t++)i[t]=0;for(t=0;t<=s-1;t++)l=c[t],0<=(r=u*h[t]+l)&&r<e*u&&(i[r]=n[t]);if(jWa.failed())return null;jWa.pop(6)}function CWa(){var e,t,i,r,a,s,n,o,u;return i=jWa.stackIntegerValue(0),a=jWa.stackIntegerValue(1),u=jWa.stackFloatValue(2),n=jWa.stackFloatValue(3),t=jWa.stackValue(4),jWa.failed()?null:!jWa.isWords(t)||fWa(t)!==i*a?(jWa.primitiveFail(),null):(s=0|n,o=0|u,e=t.words,r=0<=s&&s<a&&0<=o&&o<i?e[o*a+s]:0,jWa.failed()?null:(jWa.pop(6),void jWa.pushInteger(r)))}function DWa(){var e,t,i,r,a,s,n,o,u,l;return i=jWa.stackIntegerValue(0),s=jWa.stackIntegerValue(1),a=jWa.stackIntegerValue(2),l=jWa.stackFloatValue(3),o=jWa.stackFloatValue(4),t=jWa.stackValue(5),jWa.failed()?null:!jWa.isWords(t)||fWa(t)!==i*s?(jWa.primitiveFail(),null):(n=0|o,u=0|l,1073741823<(r=a)&&(r=1073741823),r<0&&(r=0),e=t.words,0<=n&&n<s&&0<=u&&u<i&&(e[u*s+n]=r),jWa.failed()?null:void jWa.pop(6))}function EWa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d;if(n=jWa.stackValue(0),t=jWa.stackIntegerValue(1),a=jWa.stackIntegerValue(2),r=jWa.stackValue(3),d=jWa.stackValue(4),f=jWa.stackValue(5),jWa.failed())return null;if(!jWa.isWords(n))return jWa.primitiveFail(),null;if(!jWa.isWords(f))return jWa.primitiveFail(),null;if(!jWa.isWords(d))return jWa.primitiveFail(),null;if(!jWa.isWords(r))return jWa.primitiveFail(),null;if(t*a!==fWa(r))return jWa.primitiveFail(),null;if(u=fWa(f),fWa(d)!==u)return jWa.primitiveFail(),null;if(fWa(n)!==u)return jWa.primitiveFail(),null;for(c=f.wordsAsFloat32Array(),p=d.wordsAsFloat32Array(),s=n.words,e=r.words,o=0;o<=u-1;o++)l=0|c[o],h=0|p[o],0<=l&&0<=h&&l<a&&h<t&&(i=h*a+l,s[o]=e[i]);if(jWa.failed())return null;jWa.pop(6)}function FWa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g;return e=jWa.stackIntegerValue(0),p=jWa.stackIntegerValue(1),f=jWa.stackIntegerValue(2),u=jWa.stackIntegerValue(3),t=jWa.stackFloatValue(4),i=jWa.stackFloatValue(5),d=jWa.stackFloatValue(6),s=jWa.stackValue(7),g=jWa.stackValue(8),m=jWa.stackValue(9),o=jWa.stackIntegerValue(10),jWa.failed()?null:jWa.isWords(m)&&jWa.isWords(g)&&jWa.isWords(s)?(h=fWa(m),fWa(g)!==h||fWa(s)!==h?(jWa.primitiveFail(),null):(b=m.wordsAsFloat32Array(),v=g.wordsAsFloat32Array(),a=s.wordsAsFloat32Array(),r=d,l=b[n=o-1]+r*Math.cos(a[n]),c=v[n]-r*Math.sin(a[n]),sXa(n,b,a,l,i,u,f),tXa(n,v,a,c,t,p,e),jWa.failed()?null:void jWa.pop(11))):(jWa.primitiveFail(),null)}function GWa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y;if(d=jWa.stackValue(0),t=jWa.stackIntegerValue(1),a=jWa.stackIntegerValue(2),r=jWa.stackValue(3),y=jWa.stackValue(4),g=jWa.stackValue(5),f=jWa.stackValue(6),jWa.failed())return null;if(!jWa.isBytes(f))return jWa.primitiveFail(),null;if(!jWa.isWords(g))return jWa.primitiveFail(),null;if(!jWa.isWords(y))return jWa.primitiveFail(),null;if(!jWa.isWords(r))return jWa.primitiveFail(),null;if(t*a!==fWa(r))return jWa.primitiveFail(),null;if(h=fWa(g),fWa(f)!==h)return jWa.primitiveFail(),null;if(fWa(y)!==h)return jWa.primitiveFail(),null;if(c=f.bytes,v=g.wordsAsFloat32Array(),S=y.wordsAsFloat32Array(),u="number"==typeof d)p=d;else{if(fWa(d)!==h)return jWa.primitiveFail(),null;(l=jWa.isMemberOf(d,"WordArray"))?b=d.words:s=d.wordsAsFloat32Array()}for(e=r.words,o=0;o<=h-1;o++)1===c[o]&&(m=0|v[o],k=0|S[o],0<=m&&0<=k&&m<a&&k<t&&(i=k*a+m,u?e[i]=p:l?e[i]=b[o]:(n=s[o],e[i]=n)));if(jWa.failed())return null;jWa.pop(7)}function HWa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y,j;if(e=jWa.stackIntegerValue(0),b=jWa.stackIntegerValue(1),p=jWa.stackIntegerValue(2),u=jWa.stackIntegerValue(3),t=jWa.stackFloatValue(4),i=jWa.stackFloatValue(5),g=jWa.stackValue(6),s=jWa.stackValue(7),j=jWa.stackValue(8),S=jWa.stackValue(9),h=jWa.stackValue(10),jWa.failed())return null;if(!jWa.isBytes(h))return jWa.primitiveFail(),null;if(!jWa.isWords(S))return jWa.primitiveFail(),null;if(!jWa.isWords(j))return jWa.primitiveFail(),null;if(!jWa.isWords(s))return jWa.primitiveFail(),null;if(g.isFloat)o=!1;else{if(!jWa.isWords(g))return jWa.primitiveFail(),null;o=!0}if(d=fWa(S),fWa(j)!==d)return jWa.primitiveFail(),null;if(fWa(s)!==d)return jWa.primitiveFail(),null;if(fWa(h)!==d)return jWa.primitiveFail(),null;if(o&&fWa(g)!==d)return jWa.primitiveFail(),null;for(f=h.bytes,k=S.wordsAsFloat32Array(),y=j.wordsAsFloat32Array(),a=s.wordsAsFloat32Array(),o?v=g.wordsAsFloat32Array():m=jWa.floatValueOf(g),n=0;n<=d-1;n++)1===f[n]&&(r=o?v[n]:m,l=k[n]+r*Math.cos(a[n]),c=y[n]-r*Math.sin(a[n]),sXa(n,k,a,l,i,u,p),tXa(n,y,a,c,t,b,e));if(jWa.failed())return null;jWa.pop(11)}function IWa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y;if(c=jWa.stackIntegerValue(0),a=jWa.stackIntegerValue(1),k=jWa.stackIntegerValue(2),t=jWa.stackValue(3),p=jWa.stackFloatValue(4),b=jWa.stackFloatValue(5),d=jWa.stackFloatValue(6),jWa.failed())return null;if(!jWa.isWords(t))return jWa.primitiveFail(),null;if(fWa(t)!==a*k)return jWa.primitiveFail(),null;for(e=t.words,v=d,g=b,v=Math.max(v,0),g=Math.max(g,0),v=Math.min(v,k-1),g=Math.min(g,a-1),f=Math.max(v-c,0),i=Math.min(v+c,k-1),h=Math.max(g-c,0),r=Math.min(g+c,a-1),s=e[g*k+v],n=-1,y=h;y<=r;y++)for(l=y*k,S=f;S<=i;S++)s<(m=e[l+S])&&(n=S,o=y,s=m);if(u=-1===n?mXa(p):qWa(n-v,o-g)+90|0,jWa.failed())return null;jWa.pop(8),jWa.pushFloat(u)}function JWa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(l=jWa.stackObjectValue(0),e=jWa.stackObjectValue(1),u=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(e)),jWa.success(jWa.isWords(u)),jWa.success(jWa.isWords(l)),jWa.failed())return null;if(o=fWa(e),jWa.success(o===fWa(u)),jWa.success(o===fWa(l)),jWa.failed())return null;if(s=jWa.isMemberOf(e,"WordArray"),n=jWa.isMemberOf(u,"WordArray"),s&&n){if(!jWa.isMemberOf(l,"WordArray"))return jWa.primitiveFail(),null}else if(!jWa.isMemberOf(l,"KedamaFloatArray"))return jWa.primitiveFail(),null;if(n)if(s)for(f=u.words,c=e.words,h=l.words,a=0;a<=o-1;a++)h[a]=f[a]+c[a];else for(f=u.words,t=e.wordsAsFloat32Array(),r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=f[a]+t[a];else if(s)for(i=u.wordsAsFloat32Array(),c=e.words,r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=i[a]+c[a];else for(i=u.wordsAsFloat32Array(),t=e.wordsAsFloat32Array(),r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=i[a]+t[a];jWa.pop(4),jWa.push(l)}function KWa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(c=jWa.stackObjectValue(0),e=jWa.stackValue(1),l=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(l)),jWa.success(jWa.isWords(c)),jWa.failed())return null;if(u=fWa(l),jWa.success(u===fWa(c)),jWa.failed())return null;if(n="number"==typeof e,o=jWa.isMemberOf(l,"WordArray"),n&&o){if(!jWa.isMemberOf(c,"WordArray"))return jWa.primitiveFail(),null}else if(!jWa.isMemberOf(c,"KedamaFloatArray"))return jWa.primitiveFail(),null;if(o)if(n)for(f=l.words,s=e,h=c.words,a=0;a<=u-1;a++)h[a]=f[a]+s;else for(f=l.words,t=jWa.floatValueOf(e),r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=f[a]+t;else if(n)for(i=l.wordsAsFloat32Array(),s=e,r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=i[a]+s;else for(i=l.wordsAsFloat32Array(),t=jWa.floatValueOf(e),r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=i[a]+t;jWa.pop(4),jWa.push(c)}function LWa(){var e,t,i,r,a,s,n,o;if(s=jWa.stackObjectValue(0),o=jWa.stackValue(1),jWa.failed())return null;if(jWa.success(jWa.isBytes(o)),jWa.success(jWa.isBytes(s)),jWa.failed())return null;if(i=fWa(o),r=fWa(s),jWa.failed())return null;for(r<(t=i)&&(t=r),a=s.bytes,n=o.bytes,e=0;e<=t-1;e++)n[e]=n[e]+a[e]===2;jWa.pop(1)}function MWa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(l=jWa.stackObjectValue(0),e=jWa.stackObjectValue(1),u=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(e)),jWa.success(jWa.isWords(u)),jWa.success(jWa.isWords(l)),jWa.failed())return null;if(o=fWa(e),jWa.success(o===fWa(u)),jWa.success(o===fWa(l)),jWa.failed())return null;if(s=jWa.isMemberOf(e,"WordArray"),n=jWa.isMemberOf(u,"WordArray"),s&&n){if(!jWa.isMemberOf(l,"WordArray"))return jWa.primitiveFail(),null}else if(!jWa.isMemberOf(l,"KedamaFloatArray"))return jWa.primitiveFail(),null;if(n)if(s)for(f=u.words,c=e.words,h=l.words,a=0;a<=o-1;a++)h[a]=f[a]/c[a];else for(f=u.words,t=e.wordsAsFloat32Array(),r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=f[a]/t[a];else if(s)for(i=u.wordsAsFloat32Array(),c=e.words,r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=i[a]/c[a];else for(i=u.wordsAsFloat32Array(),t=e.wordsAsFloat32Array(),r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=i[a]/t[a];jWa.pop(4),jWa.push(l)}function NWa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(c=jWa.stackObjectValue(0),e=jWa.stackValue(1),l=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(l)),jWa.success(jWa.isWords(c)),jWa.failed())return null;if(u=fWa(l),jWa.success(u===fWa(c)),jWa.failed())return null;if(n="number"==typeof e,o=jWa.isMemberOf(l,"WordArray"),n&&o){if(!jWa.isMemberOf(c,"WordArray"))return jWa.primitiveFail(),null}else if(!jWa.isMemberOf(c,"KedamaFloatArray"))return jWa.primitiveFail(),null;if(o)if(n)for(f=l.words,s=e,h=c.words,a=0;a<=u-1;a++)h[a]=gWa(f[a],s);else for(f=l.words,t=jWa.floatValueOf(e),r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=f[a]/t;else if(n)for(i=l.wordsAsFloat32Array(),s=e,r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=i[a]/s;else for(i=l.wordsAsFloat32Array(),t=jWa.floatValueOf(e),r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=i[a]/t;jWa.pop(4),jWa.push(c)}function OWa(){var e,t,i,r,a,s,n,o,u,l,c;if(u=jWa.stackObjectValue(0),e=jWa.stackObjectValue(1),o=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(e)),jWa.success(jWa.isWords(o)),jWa.success(jWa.isBytes(u)),jWa.failed())return null;if(n=fWa(e),jWa.success(n===fWa(o)),jWa.success(n===fWa(u)),jWa.failed())return null;if(s=jWa.isMemberOf(e,"WordArray"),jWa.isMemberOf(o,"WordArray"))if(s)for(c=o.words,l=e.words,t=u.bytes,a=0;a<=n-1;a++)t[a]=c[a]===l[a];else for(c=o.words,i=e.wordsAsFloat32Array(),t=u.bytes,a=0;a<=n-1;a++)t[a]=c[a]===i[a];else if(s)for(r=o.wordsAsFloat32Array(),l=e.words,t=u.bytes,a=0;a<=n-1;a++)t[a]=r[a]===l[a];else for(r=o.wordsAsFloat32Array(),i=e.wordsAsFloat32Array(),t=u.bytes,a=0;a<=n-1;a++)t[a]=r[a]===i[a];jWa.pop(4),jWa.push(u)}function PWa(){var e,t,i,r,a,s,n,o,u,l,c;if(l=jWa.stackObjectValue(0),e=jWa.stackValue(1),u=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(u)),jWa.success(jWa.isBytes(l)),jWa.failed())return null;if(o=fWa(u),jWa.success(o===fWa(l)),jWa.failed())return null;if(n="number"==typeof e,jWa.isMemberOf(u,"WordArray"))if(n)for(c=u.words,s=e,t=l.bytes,a=0;a<=o-1;a++)t[a]=c[a]===s;else for(c=u.words,i=jWa.floatValueOf(e),t=l.bytes,a=0;a<=o-1;a++)t[a]=c[a]===i;else if(n)for(r=u.wordsAsFloat32Array(),s=e,t=l.bytes,a=0;a<=o-1;a++)t[a]=r[a]===s;else for(r=u.wordsAsFloat32Array(),i=jWa.floatValueOf(e),t=l.bytes,a=0;a<=o-1;a++)t[a]=r[a]===i;jWa.pop(4),jWa.push(l)}function QWa(){var e,t,i,r,a,s,n,o,u,l,c;if(u=jWa.stackObjectValue(0),e=jWa.stackObjectValue(1),o=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(e)),jWa.success(jWa.isWords(o)),jWa.success(jWa.isBytes(u)),jWa.failed())return null;if(n=fWa(e),jWa.success(n===fWa(o)),jWa.success(n===fWa(u)),jWa.failed())return null;if(s=jWa.isMemberOf(e,"WordArray"),jWa.isMemberOf(o,"WordArray"))if(s)for(c=o.words,l=e.words,t=u.bytes,a=0;a<=n-1;a++)t[a]=c[a]>=l[a];else for(c=o.words,i=e.wordsAsFloat32Array(),t=u.bytes,a=0;a<=n-1;a++)t[a]=c[a]>=i[a];else if(s)for(r=o.wordsAsFloat32Array(),l=e.words,t=u.bytes,a=0;a<=n-1;a++)t[a]=r[a]>=l[a];else for(r=o.wordsAsFloat32Array(),i=e.wordsAsFloat32Array(),t=u.bytes,a=0;a<=n-1;a++)t[a]=r[a]>=i[a];jWa.pop(4),jWa.push(u)}function RWa(){var e,t,i,r,a,s,n,o,u,l,c;if(l=jWa.stackObjectValue(0),e=jWa.stackValue(1),u=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(u)),jWa.success(jWa.isBytes(l)),jWa.failed())return null;if(o=fWa(u),jWa.success(o===fWa(l)),jWa.failed())return null;if(n="number"==typeof e,jWa.isMemberOf(u,"WordArray"))if(n)for(c=u.words,s=e,t=l.bytes,a=0;a<=o-1;a++)t[a]=c[a]>=s;else for(c=u.words,i=jWa.floatValueOf(e),t=l.bytes,a=0;a<=o-1;a++)t[a]=c[a]>=i;else if(n)for(r=u.wordsAsFloat32Array(),s=e,t=l.bytes,a=0;a<=o-1;a++)t[a]=r[a]>=s;else for(r=u.wordsAsFloat32Array(),i=jWa.floatValueOf(e),t=l.bytes,a=0;a<=o-1;a++)t[a]=r[a]>=i;jWa.pop(4),jWa.push(l)}function SWa(){var e,t,i,r,a,s,n,o,u,l,c;if(u=jWa.stackObjectValue(0),e=jWa.stackObjectValue(1),o=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(e)),jWa.success(jWa.isWords(o)),jWa.success(jWa.isBytes(u)),jWa.failed())return null;if(n=fWa(e),jWa.success(n===fWa(o)),jWa.success(n===fWa(u)),jWa.failed())return null;if(s=jWa.isMemberOf(e,"WordArray"),jWa.isMemberOf(o,"WordArray"))if(s)for(c=o.words,l=e.words,t=u.bytes,a=0;a<=n-1;a++)t[a]=c[a]>l[a];else for(c=o.words,i=e.wordsAsFloat32Array(),t=u.bytes,a=0;a<=n-1;a++)t[a]=c[a]>i[a];else if(s)for(r=o.wordsAsFloat32Array(),l=e.words,t=u.bytes,a=0;a<=n-1;a++)t[a]=r[a]>l[a];else for(r=o.wordsAsFloat32Array(),i=e.wordsAsFloat32Array(),t=u.bytes,a=0;a<=n-1;a++)t[a]=r[a]>i[a];jWa.pop(4),jWa.push(u)}function TWa(){var e,t,i,r,a,s,n,o,u,l,c;if(l=jWa.stackObjectValue(0),e=jWa.stackValue(1),u=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(u)),jWa.success(jWa.isBytes(l)),jWa.failed())return null;if(o=fWa(u),jWa.success(o===fWa(l)),jWa.failed())return null;if(n="number"==typeof e,jWa.isMemberOf(u,"WordArray"))if(n)for(c=u.words,s=e,t=l.bytes,a=0;a<=o-1;a++)t[a]=c[a]>s;else for(c=u.words,i=jWa.floatValueOf(e),t=l.bytes,a=0;a<=o-1;a++)t[a]=c[a]>i;else if(n)for(r=u.wordsAsFloat32Array(),s=e,t=l.bytes,a=0;a<=o-1;a++)t[a]=r[a]>s;else for(r=u.wordsAsFloat32Array(),i=jWa.floatValueOf(e),t=l.bytes,a=0;a<=o-1;a++)t[a]=r[a]>i;jWa.pop(4),jWa.push(l)}function UWa(){var e,t,i,r,a,s,n,o,u,l,c;if(u=jWa.stackObjectValue(0),e=jWa.stackObjectValue(1),o=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(e)),jWa.success(jWa.isWords(o)),jWa.success(jWa.isBytes(u)),jWa.failed())return null;if(n=fWa(e),jWa.success(n===fWa(o)),jWa.success(n===fWa(u)),jWa.failed())return null;if(s=jWa.isMemberOf(e,"WordArray"),jWa.isMemberOf(o,"WordArray"))if(s)for(c=o.words,l=e.words,t=u.bytes,a=0;a<=n-1;a++)t[a]=c[a]<=l[a];else for(c=o.words,i=e.wordsAsFloat32Array(),t=u.bytes,a=0;a<=n-1;a++)t[a]=c[a]<=i[a];else if(s)for(r=o.wordsAsFloat32Array(),l=e.words,t=u.bytes,a=0;a<=n-1;a++)t[a]=r[a]<=l[a];else for(r=o.wordsAsFloat32Array(),i=e.wordsAsFloat32Array(),t=u.bytes,a=0;a<=n-1;a++)t[a]=r[a]<=i[a];jWa.pop(4),jWa.push(u)}function VWa(){var e,t,i,r,a,s,n,o,u,l,c;if(l=jWa.stackObjectValue(0),e=jWa.stackValue(1),u=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(u)),jWa.success(jWa.isBytes(l)),jWa.failed())return null;if(o=fWa(u),jWa.success(o===fWa(l)),jWa.failed())return null;if(n="number"==typeof e,jWa.isMemberOf(u,"WordArray"))if(n)for(c=u.words,s=e,t=l.bytes,a=0;a<=o-1;a++)t[a]=c[a]<=s;else for(c=u.words,i=jWa.floatValueOf(e),t=l.bytes,a=0;a<=o-1;a++)t[a]=c[a]<=i;else if(n)for(r=u.wordsAsFloat32Array(),s=e,t=l.bytes,a=0;a<=o-1;a++)t[a]=r[a]<=s;else for(r=u.wordsAsFloat32Array(),i=jWa.floatValueOf(e),t=l.bytes,a=0;a<=o-1;a++)t[a]=r[a]<=i;jWa.pop(4),jWa.push(l)}function WWa(){var e,t,i,r,a,s,n,o,u,l,c;if(u=jWa.stackObjectValue(0),e=jWa.stackObjectValue(1),o=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(e)),jWa.success(jWa.isWords(o)),jWa.success(jWa.isBytes(u)),jWa.failed())return null;if(n=fWa(e),jWa.success(n===fWa(o)),jWa.success(n===fWa(u)),jWa.failed())return null;if(s=jWa.isMemberOf(e,"WordArray"),jWa.isMemberOf(o,"WordArray"))if(s)for(c=o.words,l=e.words,t=u.bytes,a=0;a<=n-1;a++)t[a]=c[a]<l[a];else for(c=o.words,i=e.wordsAsFloat32Array(),t=u.bytes,a=0;a<=n-1;a++)t[a]=c[a]<i[a];else if(s)for(r=o.wordsAsFloat32Array(),l=e.words,t=u.bytes,a=0;a<=n-1;a++)t[a]=r[a]<l[a];else for(r=o.wordsAsFloat32Array(),i=e.wordsAsFloat32Array(),t=u.bytes,a=0;a<=n-1;a++)t[a]=r[a]<i[a];jWa.pop(4),jWa.push(u)}function XWa(){var e,t,i,r,a,s,n,o,u,l,c;if(l=jWa.stackObjectValue(0),e=jWa.stackValue(1),u=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(u)),jWa.success(jWa.isBytes(l)),jWa.failed())return null;if(o=fWa(u),jWa.success(o===fWa(l)),jWa.failed())return null;if(n="number"==typeof e,jWa.isMemberOf(u,"WordArray"))if(n)for(c=u.words,s=e,t=l.bytes,a=0;a<=o-1;a++)t[a]=c[a]<s;else for(c=u.words,i=jWa.floatValueOf(e),t=l.bytes,a=0;a<=o-1;a++)t[a]=c[a]<i;else if(n)for(r=u.wordsAsFloat32Array(),s=e,t=l.bytes,a=0;a<=o-1;a++)t[a]=r[a]<s;else for(r=u.wordsAsFloat32Array(),i=jWa.floatValueOf(e),t=l.bytes,a=0;a<=o-1;a++)t[a]=r[a]<i;jWa.pop(4),jWa.push(l)}function YWa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(l=jWa.stackObjectValue(0),e=jWa.stackObjectValue(1),u=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(e)),jWa.success(jWa.isWords(u)),jWa.success(jWa.isWords(l)),jWa.failed())return null;if(o=fWa(e),jWa.success(o===fWa(u)),jWa.success(o===fWa(l)),jWa.failed())return null;if(s=jWa.isMemberOf(e,"WordArray"),n=jWa.isMemberOf(u,"WordArray"),s&&n){if(!jWa.isMemberOf(l,"WordArray"))return jWa.primitiveFail(),null}else if(!jWa.isMemberOf(l,"KedamaFloatArray"))return jWa.primitiveFail(),null;if(n)if(s)for(f=u.words,c=e.words,h=l.words,a=0;a<=o-1;a++)h[a]=f[a]*c[a];else for(f=u.words,t=e.wordsAsFloat32Array(),r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=f[a]*t[a];else if(s)for(i=u.wordsAsFloat32Array(),c=e.words,r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=i[a]*c[a];else for(i=u.wordsAsFloat32Array(),t=e.wordsAsFloat32Array(),r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=i[a]*t[a];jWa.pop(4),jWa.push(l)}function ZWa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(c=jWa.stackObjectValue(0),e=jWa.stackValue(1),l=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(l)),jWa.success(jWa.isWords(c)),jWa.failed())return null;if(u=fWa(l),jWa.success(u===fWa(c)),jWa.failed())return null;if(n="number"==typeof e,o=jWa.isMemberOf(l,"WordArray"),n&&o){if(!jWa.isMemberOf(c,"WordArray"))return jWa.primitiveFail(),null}else if(!jWa.isMemberOf(c,"KedamaFloatArray"))return jWa.primitiveFail(),null;if(o)if(n)for(f=l.words,s=e,h=c.words,a=0;a<=u-1;a++)h[a]=f[a]*s;else for(f=l.words,t=jWa.floatValueOf(e),r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=f[a]*t;else if(n)for(i=l.wordsAsFloat32Array(),s=e,r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=i[a]*s;else for(i=l.wordsAsFloat32Array(),t=jWa.floatValueOf(e),r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=i[a]*t;jWa.pop(4),jWa.push(c)}function $Wa(){var e,t,i,r,a,s,n,o,u,l,c;if(u=jWa.stackObjectValue(0),e=jWa.stackObjectValue(1),o=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(e)),jWa.success(jWa.isWords(o)),jWa.success(jWa.isBytes(u)),jWa.failed())return null;if(n=fWa(e),jWa.success(n===fWa(o)),jWa.success(n===fWa(u)),jWa.failed())return null;if(s=jWa.isMemberOf(e,"WordArray"),jWa.isMemberOf(o,"WordArray"))if(s)for(c=o.words,l=e.words,t=u.bytes,a=0;a<=n-1;a++)t[a]=c[a]!==l[a];else for(c=o.words,i=e.wordsAsFloat32Array(),t=u.bytes,a=0;a<=n-1;a++)t[a]=c[a]!==i[a];else if(s)for(r=o.wordsAsFloat32Array(),l=e.words,t=u.bytes,a=0;a<=n-1;a++)t[a]=r[a]!==l[a];else for(r=o.wordsAsFloat32Array(),i=e.wordsAsFloat32Array(),t=u.bytes,a=0;a<=n-1;a++)t[a]=r[a]!==i[a];jWa.pop(4),jWa.push(u)}function _Wa(){var e,t,i,r,a,s,n,o,u,l,c;if(l=jWa.stackObjectValue(0),e=jWa.stackValue(1),u=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(u)),jWa.success(jWa.isBytes(l)),jWa.failed())return null;if(o=fWa(u),jWa.success(o===fWa(l)),jWa.failed())return null;if(n="number"==typeof e,jWa.isMemberOf(u,"WordArray"))if(n)for(c=u.words,s=e,t=l.bytes,a=0;a<=o-1;a++)t[a]=c[a]!==s;else for(c=u.words,i=jWa.floatValueOf(e),t=l.bytes,a=0;a<=o-1;a++)t[a]=c[a]!==i;else if(n)for(r=u.wordsAsFloat32Array(),s=e,t=l.bytes,a=0;a<=o-1;a++)t[a]=r[a]!==s;else for(r=u.wordsAsFloat32Array(),i=jWa.floatValueOf(e),t=l.bytes,a=0;a<=o-1;a++)t[a]=r[a]!==i;jWa.pop(4),jWa.push(l)}function aXa(){var e,t,i,r;if(r=jWa.stackValue(0),jWa.failed())return null;if(jWa.success(jWa.isBytes(r)),jWa.failed())return null;if(t=fWa(r),jWa.failed())return null;for(i=r.bytes,e=0;e<=t-1;e++)0===i[e]?i[e]=1:i[e]=0}function bXa(){var e,t,i,r,a,s,n,o;if(s=jWa.stackObjectValue(0),o=jWa.stackValue(1),jWa.failed())return null;if(jWa.success(jWa.isBytes(o)),jWa.success(jWa.isBytes(s)),jWa.failed())return null;if(i=fWa(o),r=fWa(s),jWa.failed())return null;for(r<(t=i)&&(t=r),a=s.bytes,n=o.bytes,e=0;e<=t-1;e++)n[e]=0<n[e]+a[e];jWa.pop(1)}function cXa(){var e,t,i,r,a,s,n,o;if(s=jWa.stackValue(0),r=jWa.stackObjectValue(1),jWa.failed())return null;if(a=jWa.isIntegerValue(s)?s:jWa.booleanValueOf(s),o=jWa.fetchPointerofObject(1,r),i=jWa.fetchPointerofObject(0,r),jWa.failed())return null;if(!jWa.isBytes(i))return jWa.primitiveFail(),null;if(!jWa.isBytes(o))return jWa.primitiveFail(),null;for(n=o.bytes,t=i.bytes,e=0;e<=fWa(o)-1;e++)1===t[e]&&(n[e]=a);jWa.pop(1)}function dXa(){var e,t,i,r,a,s,n;if(a=jWa.stackIntegerValue(0),r=jWa.stackObjectValue(1),jWa.failed())return null;if(a|=4278190080,n=jWa.fetchPointerofObject(1,r),i=jWa.fetchPointerofObject(0,r),jWa.failed())return null;if(!jWa.isBytes(i))return jWa.primitiveFail(),null;if(!jWa.isWords(n))return jWa.primitiveFail(),null;for(s=n.words,t=i.bytes,e=0;e<=fWa(n)-1;e++)1===t[e]&&(s[e]=a);jWa.pop(1)}function eXa(){var e,t,i,r,a,s,n;if(a=jWa.stackFloatValue(0),r=jWa.stackObjectValue(1),jWa.failed())return null;if(n=jWa.fetchPointerofObject(1,r),i=jWa.fetchPointerofObject(0,r),jWa.failed())return null;if(!jWa.isBytes(i))return jWa.primitiveFail(),null;if(!jWa.isWords(n))return jWa.primitiveFail(),null;for(s=n.wordsAsFloat32Array(),t=i.bytes,e=0;e<=fWa(n)-1;e++)1===t[e]&&(s[e]=a);jWa.pop(1)}function fXa(){var e,t,i,r,a,s,n;if(a=jWa.stackValue(0),r=jWa.stackObjectValue(1),jWa.failed())return null;if(n=jWa.fetchPointerofObject(1,r),i=jWa.fetchPointerofObject(0,r),jWa.failed())return null;if(!jWa.isBytes(i))return jWa.primitiveFail(),null;if(!jWa.isPointers(n))return jWa.primitiveFail(),null;for(s=n.wordsAsInt32Array(),t=i.bytes,e=0;e<=fWa(n)-1;e++)1===t[e]&&(s[e]=a);jWa.pop(1)}function gXa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p;if(n=jWa.stackIntegerValue(0),s=jWa.stackObjectValue(1),c=jWa.stackIntegerValue(2),l=jWa.stackIntegerValue(3),a=jWa.stackObjectValue(4),jWa.failed())return null;if(h=jWa.fetchPointerofObject(1,a),i=jWa.fetchPointerofObject(0,a),jWa.failed())return null;if(!jWa.isBytes(i))return jWa.primitiveFail(),null;if(!jWa.isBytes(h)||!jWa.isBytes(s))return jWa.primitiveFail(),null;if(f=h.bytes,t=i.bytes,o=s.bytes,p=fWa(h),r=fWa(i),u=fWa(s),c<l)return jWa.primitiveFail(),null;if(l<1)return jWa.primitiveFail(),null;if(p<l)return jWa.primitiveFail(),null;if(r<l)return jWa.primitiveFail(),null;if(p<c)return jWa.primitiveFail(),null;if(r<c)return jWa.primitiveFail(),null;if(n<1)return jWa.primitiveFail(),null;if(u<n)return jWa.primitiveFail(),null;if(u-n+1<c-l+1)return jWa.primitiveFail(),null;for(e=l-1;e<=c-1;e++)1===t[e]&&(f[e]=o[n+e-l]);jWa.pop(4)}function hXa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g;if(c=jWa.stackIntegerValue(0),l=jWa.stackObjectValue(1),d=jWa.stackIntegerValue(2),p=jWa.stackIntegerValue(3),u=jWa.stackObjectValue(4),jWa.failed())return null;if(v=jWa.fetchPointerofObject(1,u),s=jWa.fetchPointerofObject(0,u),jWa.failed())return null;if(!jWa.isBytes(s))return jWa.primitiveFail(),null;if(!(jWa.isWords(v)&&jWa.isWords(l)||jWa.isPointers(v)&&jWa.isPointers(l)))return jWa.primitiveFail(),null;if(a=s.bytes,g=fWa(v),n=fWa(s),h=fWa(l),d<p)return jWa.primitiveFail(),null;if(p<1)return jWa.primitiveFail(),null;if(g<p)return jWa.primitiveFail(),null;if(n<p)return jWa.primitiveFail(),null;if(g<d)return jWa.primitiveFail(),null;if(n<d)return jWa.primitiveFail(),null;if(c<1)return jWa.primitiveFail(),null;if(h<c)return jWa.primitiveFail(),null;if(h-c+1<d-p+1)return jWa.primitiveFail(),null;if(b=jWa.isMemberOf(v,"KedamaFloatArray"),o=jWa.isMemberOf(l,"KedamaFloatArray"),b&&o)for(t=v.wordsAsFloat32Array(),e=l.wordsAsFloat32Array(),r=p-1;r<=d-1;r++)1===a[r]&&(t[r]=e[c+r-p]);if(b&&!o)for(t=v.wordsAsFloat32Array(),f=l.words,r=p-1;r<=d-1;r++)1===a[r]&&(t[r]=f[c+r-p]);if(!b&&o)for(m=v.words,e=l.wordsAsFloat32Array(),r=p-1;r<=d-1;r++)1===a[r]&&(i=e[c+r-p]>>>0,m[r]=i);if(!b&&!o)for(m=v.words,f=l.words,r=p-1;r<=d-1;r++)1===a[r]&&(m[r]=f[c+r-p]);jWa.pop(4)}function iXa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g;if(h=jWa.stackObjectValue(0),e=jWa.stackObjectValue(1),f=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(e)),jWa.success(jWa.isWords(f)),jWa.success(jWa.isWords(h)),jWa.failed())return null;if(c=fWa(e),jWa.success(c===fWa(f)),jWa.success(c===fWa(h)),jWa.failed())return null;if(u=jWa.isMemberOf(e,"WordArray"),l=jWa.isMemberOf(f,"WordArray"),u&&l){if(!jWa.isMemberOf(h,"WordArray"))return jWa.primitiveFail(),null}else if(!jWa.isMemberOf(h,"KedamaFloatArray"))return jWa.primitiveFail(),null;if(l)if(u)for(v=f.words,m=e.words,g=h.words,o=0;o<=c-1;o++)b=hWa(d=v[o],p=m[o]),g[o]=b;else for(v=f.words,a=e.wordsAsFloat32Array(),n=h.wordsAsFloat32Array(),o=0;o<=c-1;o++)r=(d=v[o])/(t=a[o]),r=Math.floor(r),n[o]=d-r*t;else if(u)for(s=f.wordsAsFloat32Array(),m=e.words,n=h.wordsAsFloat32Array(),o=0;o<=c-1;o++)r=(i=s[o])/(p=m[o]),r=Math.floor(r),n[o]=i-r*p;else for(s=f.wordsAsFloat32Array(),a=e.wordsAsFloat32Array(),n=h.wordsAsFloat32Array(),o=0;o<=c-1;o++)r=(i=s[o])/(t=a[o]),r=Math.floor(r),n[o]=i-r*t;jWa.pop(4),jWa.push(h)}function jXa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b;if(h=jWa.stackObjectValue(0),e=jWa.stackValue(1),f=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(f)),jWa.success(jWa.isWords(h)),jWa.failed())return null;if(c=fWa(f),jWa.success(c===fWa(h)),jWa.failed())return null;if(u="number"==typeof e,l=jWa.isMemberOf(f,"WordArray"),u&&l){if(!jWa.isMemberOf(h,"WordArray"))return jWa.primitiveFail(),null}else if(!jWa.isMemberOf(h,"KedamaFloatArray"))return jWa.primitiveFail(),null;if(l)if(u)for(d=f.words,o=e,b=h.words,n=0;n<=c-1;n++)b[n]=hWa(d[n],o);else for(d=f.words,t=jWa.floatValueOf(e),s=h.wordsAsFloat32Array(),n=0;n<=c-1;n++)r=(p=d[n])/t,r=Math.floor(r),s[n]=p-r*t;else if(u)for(a=f.wordsAsFloat32Array(),o=e,s=h.wordsAsFloat32Array(),n=0;n<=c-1;n++)r=(i=a[n])/o,r=Math.floor(r),s[n]=i-r*o;else for(a=f.wordsAsFloat32Array(),t=jWa.floatValueOf(e),s=h.wordsAsFloat32Array(),n=0;n<=c-1;n++)r=(i=a[n])/t,r=Math.floor(r),s[n]=i-r*t;jWa.pop(4),jWa.push(h)}function kXa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(l=jWa.stackObjectValue(0),e=jWa.stackObjectValue(1),u=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(e)),jWa.success(jWa.isWords(u)),jWa.success(jWa.isWords(l)),jWa.failed())return null;if(o=fWa(e),jWa.success(o===fWa(u)),jWa.success(o===fWa(l)),jWa.failed())return null;if(s=jWa.isMemberOf(e,"WordArray"),n=jWa.isMemberOf(u,"WordArray"),s&&n){if(!jWa.isMemberOf(l,"WordArray"))return jWa.primitiveFail(),null}else if(!jWa.isMemberOf(l,"KedamaFloatArray"))return jWa.primitiveFail(),null;if(n)if(s)for(f=u.words,c=e.words,h=l.words,a=0;a<=o-1;a++)h[a]=f[a]-c[a];else for(f=u.words,t=e.wordsAsFloat32Array(),r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=f[a]-t[a];else if(s)for(i=u.wordsAsFloat32Array(),c=e.words,r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=i[a]-c[a];else for(i=u.wordsAsFloat32Array(),t=e.wordsAsFloat32Array(),r=l.wordsAsFloat32Array(),a=0;a<=o-1;a++)r[a]=i[a]-t[a];jWa.pop(4),jWa.push(l)}function lXa(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(c=jWa.stackObjectValue(0),e=jWa.stackValue(1),l=jWa.stackObjectValue(2),jWa.failed())return null;if(jWa.success(jWa.isWords(l)),jWa.success(jWa.isWords(c)),jWa.failed())return null;if(u=fWa(l),jWa.success(u===fWa(c)),jWa.failed())return null;if(n="number"==typeof e,o=jWa.isMemberOf(l,"WordArray"),n&&o){if(!jWa.isMemberOf(c,"WordArray"))return jWa.primitiveFail(),null}else if(!jWa.isMemberOf(c,"KedamaFloatArray"))return jWa.primitiveFail(),null;if(o)if(n)for(f=l.words,s=e,h=c.words,a=0;a<=u-1;a++)h[a]=f[a]-s;else for(f=l.words,t=jWa.floatValueOf(e),r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=f[a]-t;else if(n)for(i=l.wordsAsFloat32Array(),s=e,r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=i[a]-s;else for(i=l.wordsAsFloat32Array(),t=jWa.floatValueOf(e),r=c.wordsAsFloat32Array(),a=0;a<=u-1;a++)r[a]=i[a]-t;jWa.pop(4),jWa.push(c)}function mXa(e){var t;return 0<(t=90-e/.0174532925199433)||(t+=360),t}function nXa(){var e,t,i,r,a,s,n;if(e=jWa.stackFloatValue(0),i=jWa.stackValue(1),n=jWa.stackIntegerValue(2),r=jWa.stackIntegerValue(3),s=jWa.stackIntegerValue(4),jWa.failed())return null;if(!jWa.isWords(i))return jWa.primitiveFail(),null;if(!(n<=fWa(i)&&1<=r&&r<=n))return jWa.primitiveFail(),null;if(t=i.wordsAsFloat32Array(),jWa.failed())return null;for(a=r;a<=n;a++)t[a-1]=xWa(s)*e;jWa.pop(5)}function oXa(){var e,t,i,r,a,s,n;if(e=jWa.stackFloatValue(0),a=jWa.stackValue(1),n=jWa.stackIntegerValue(2),t=jWa.stackIntegerValue(3),s=jWa.stackIntegerValue(4),jWa.failed())return null;if(!jWa.isWords(a))return jWa.primitiveFail(),null;if(!(n<=fWa(a)&&1<=t&&t<=n))return jWa.primitiveFail(),null;if(r=a.words,jWa.failed())return null;for(i=t;i<=n;i++)r[i-1]=xWa(s)*e|0;jWa.pop(5)}function pXa(){var e,t;return e=jWa.stackIntegerValue(0),jWa.failed()?null:(t=xWa(e),jWa.failed()?null:(jWa.pop(2),void jWa.pushInteger(t)))}function qXa(){var e,t,i,r,a;return t=jWa.stackFloatValue(0),e=jWa.stackFloatValue(1),a=jWa.stackFloatValue(2),r=jWa.stackFloatValue(3),jWa.failed()?null:(i=qWa(r-e,a-t),360<(i+=90)&&(i-=360),jWa.failed()?null:(jWa.pop(5),void jWa.pushFloat(i)))}function rXa(){var e,t,i,r,a,s,n;return t=jWa.stackFloatValue(0),e=jWa.stackFloatValue(1),a=jWa.stackFloatValue(2),r=jWa.stackFloatValue(3),jWa.failed()?null:(s=e-r,n=t-a,i=Math.sqrt(s*s+n*n),jWa.failed()?null:(jWa.pop(5),void jWa.pushFloat(i)))}function sXa(e,t,i,r,a,s,n){var o,u;(u=r)<0&&(1===s&&(u+=a),2===s&&(u=0),3===s&&(u=0-u,o=i[e],i[e]=o<3.141592653589793?3.141592653589793-o:9.42477796076938-o)),a<=u&&(1===n&&(u-=a),2===n&&(u=a-1e-6),3===n&&(u=a-1e-6-(u-a),o=i[e],i[e]=o<3.141592653589793?3.141592653589793-o:9.42477796076938-o)),t[e]=u}function tXa(e,t,i,r,a,s,n){var o;(o=r)<0&&(1===s&&(o+=a),2===s&&(o=0),3===s&&(o=0-o,i[e]=6.283185307179586-i[e])),a<=o&&(1===n&&(o-=a),2===n&&(o=a-1e-6),3===n&&(o=a-1e-6-(o-a),i[e]=6.283185307179586-i[e])),t[e]=o}function uXa(){var e,t,i,r,a,s,n,o,u,l;if(u=jWa.stackValue(0),i=jWa.stackValue(1),n=jWa.stackValue(2),jWa.failed())return null;if(!jWa.isBytes(n))return jWa.primitiveFail(),null;if(!jWa.isWords(i))return jWa.primitiveFail(),null;if(l=fWa(i),u.isFloat)a=!1;else{if(!jWa.isWords(u))return jWa.primitiveFail(),null;if(fWa(u)!==l)return jWa.primitiveFail(),null;a=!0}for(s=n.bytes,t=i.wordsAsFloat32Array(),a?o=u.wordsAsFloat32Array():e=rWa(e=jWa.floatValueOf(u)),r=0;r<=l-1;r++)1===s[r]&&(a&&(e=rWa(e=o[r])),t[r]=e);if(jWa.failed())return null;jWa.pop(3)}function vXa(e){return!1!=((jWa=e).majorVersion()==dWa)&&jWa.minorVersion()>=eWa}function wXa(){var e,t,i;return e=jWa.stackFloatValue(0),t=jWa.stackValue(1),i=jWa.stackIntegerValue(2),jWa.failed()?null:!jWa.isWords(t)||fWa(t)<i?(jWa.primitiveFail(),null):(t.wordsAsFloat32Array()[i-1]=rWa(e),jWa.failed()?null:void jWa.pop(3))}function xXa(){return!0}function yXa(){var e,t,i,r,a,s,n,o;return r=jWa.stackIntegerValue(0),i=jWa.stackIntegerValue(1),e=jWa.stackFloatValue(2),s=jWa.stackFloatValue(3),t=jWa.stackValue(4),n=jWa.stackIntegerValue(5),o=jWa.stackValue(6),jWa.failed()?null:jWa.isWords(o)&&jWa.isWords(t)?(a=fWa(o),fWa(t)!==a?(jWa.primitiveFail(),null):(sXa(n-1,o.wordsAsFloat32Array(),t.wordsAsFloat32Array(),s,e,i,r),jWa.failed()?null:void jWa.pop(7))):(jWa.primitiveFail(),null)}function zXa(){var e,t,i,r,a,s,n,o;return e=jWa.stackIntegerValue(0),a=jWa.stackIntegerValue(1),t=jWa.stackFloatValue(2),s=jWa.stackFloatValue(3),i=jWa.stackValue(4),n=jWa.stackIntegerValue(5),o=jWa.stackValue(6),jWa.failed()?null:jWa.isWords(o)&&jWa.isWords(i)?(r=fWa(o),fWa(i)!==r?(jWa.primitiveFail(),null):(tXa(n-1,o.wordsAsFloat32Array(),i.wordsAsFloat32Array(),s,t,a,e),jWa.failed()?null:void jWa.pop(7))):(jWa.primitiveFail(),null)}function AXa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m;if(l=jWa.stackIntegerValue(0),n=jWa.stackIntegerValue(1),e=jWa.stackFloatValue(2),p=jWa.stackValue(3),i=jWa.stackValue(4),m=jWa.stackValue(5),u=jWa.stackValue(6),jWa.failed())return null;if(!jWa.isBytes(u))return jWa.primitiveFail(),null;if(!jWa.isWords(m))return jWa.primitiveFail(),null;if(!jWa.isWords(i))return jWa.primitiveFail(),null;if(p.isFloat)a=!1;else{if(!jWa.isWords(p))return jWa.primitiveFail(),null;a=!0,s=jWa.isMemberOf(p,"WordArray")}if(c=fWa(m),fWa(u)!==c)return jWa.primitiveFail(),null;if(fWa(i)!==c)return jWa.primitiveFail(),null;if(a&&fWa(p)!==c)return jWa.primitiveFail(),null;for(o=u.bytes,b=m.wordsAsFloat32Array(),t=i.wordsAsFloat32Array(),a?s?d=p.words:h=p.wordsAsFloat32Array():f=jWa.floatValueOf(p),r=0;r<=c-1;r++)1===o[r]&&sXa(r,b,t,a?s?d[r]:h[r]:f,e,n,l);if(jWa.failed())return null;jWa.pop(7)}function BXa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m;if(e=jWa.stackIntegerValue(0),c=jWa.stackIntegerValue(1),t=jWa.stackFloatValue(2),p=jWa.stackValue(3),r=jWa.stackValue(4),m=jWa.stackValue(5),u=jWa.stackValue(6),jWa.failed())return null;if(!jWa.isBytes(u))return jWa.primitiveFail(),null;if(!jWa.isWords(m))return jWa.primitiveFail(),null;if(!jWa.isWords(r))return jWa.primitiveFail(),null;if(p.isFloat)s=!1;else{if(!jWa.isWords(p))return jWa.primitiveFail(),null;s=!0,n=jWa.isMemberOf(p,"WordArray")}if(l=fWa(m),fWa(u)!==l)return jWa.primitiveFail(),null;if(fWa(r)!==l)return jWa.primitiveFail(),null;if(s&&fWa(p)!==l)return jWa.primitiveFail(),null;for(o=u.bytes,b=m.wordsAsFloat32Array(),i=r.wordsAsFloat32Array(),s?n?d=p.words:h=p.wordsAsFloat32Array():f=jWa.floatValueOf(p),a=0;a<=l-1;a++)1===o[a]&&tXa(a,b,i,s?n?d[a]:h[a]:f,t,c,e);if(jWa.failed())return null;jWa.pop(7)}function CXa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b;if(c=jWa.stackValue(0),b=jWa.stackValue(1),p=jWa.stackValue(2),s=jWa.stackValue(3),r=jWa.stackValue(4),jWa.failed())return null;if(!jWa.isWords(c))return jWa.primitiveFail(),null;if(!jWa.isWords(p))return jWa.primitiveFail(),null;if(!jWa.isWords(b))return jWa.primitiveFail(),null;if((f=fWa(c))<0)return jWa.primitiveFail(),null;if(fWa(p)!==f)return jWa.primitiveFail(),null;if(fWa(b)!==f)return jWa.primitiveFail(),null;if(r.isFloat){if(!s.isFloat)return jWa.primitiveFail(),null;t=!1}else{if(s.isFloat)return jWa.primitiveFail(),null;t=!0}if(t){if(fWa(r)!==f)return jWa.primitiveFail(),null;if(fWa(s)!==f)return jWa.primitiveFail(),null}for(l=c.wordsAsFloat32Array(),h=p.wordsAsFloat32Array(),d=b.wordsAsFloat32Array(),t&&(i=r.wordsAsFloat32Array(),a=s.wordsAsFloat32Array()),t||(n=jWa.floatValueOf(r),o=jWa.floatValueOf(s)),e=0;e<=f-1;e++)t&&(n=i[e],o=a[e]),u=qWa(n-h[e],o-d[e]),360<(u+=90)&&(u-=360),l[e]=u;if(jWa.failed())return null;jWa.pop(6),jWa.push(c)}function DXa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m;if(l=jWa.stackValue(0),m=jWa.stackValue(1),p=jWa.stackValue(2),s=jWa.stackValue(3),r=jWa.stackValue(4),jWa.failed())return null;if(!jWa.isWords(l))return jWa.primitiveFail(),null;if(!jWa.isWords(p))return jWa.primitiveFail(),null;if(!jWa.isWords(m))return jWa.primitiveFail(),null;if((c=fWa(l))<0)return jWa.primitiveFail(),null;if(fWa(p)!==c)return jWa.primitiveFail(),null;if(fWa(m)!==c)return jWa.primitiveFail(),null;if(r.isFloat){if(!s.isFloat)return jWa.primitiveFail(),null;t=!1}else{if(s.isFloat)return jWa.primitiveFail(),null;t=!0}if(t){if(fWa(r)!==c)return jWa.primitiveFail(),null;if(fWa(s)!==c)return jWa.primitiveFail(),null}for(u=l.wordsAsFloat32Array(),h=p.wordsAsFloat32Array(),b=m.wordsAsFloat32Array(),t&&(i=r.wordsAsFloat32Array(),a=s.wordsAsFloat32Array()),t||(n=jWa.floatValueOf(r),o=jWa.floatValueOf(s)),e=0;e<=c-1;e++)t&&(n=i[e],o=a[e]),f=n-h[e],d=o-b[e],u[e]=Math.sqrt(f*f+d*d);if(jWa.failed())return null;jWa.pop(6),jWa.push(l)}function EXa(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v;if(v=jWa.stackIntegerValue(0),b=jWa.stackIntegerValue(1),n=jWa.stackIntegerValue(2),u=jWa.stackIntegerValue(3),i=jWa.stackValue(4),l=jWa.stackValue(5),jWa.failed())return null;if(h=fWa(l),a=fWa(i),u*n!==h)return jWa.primitiveFail(),null;if(h*b*v!==a)return jWa.primitiveFail(),null;for(o=l.words,t=i.words,d=r=f=c=0;d<=n-1;d++){for(m=0;m<=v-1;m++){for(p=0;p<=u-1;p++)for(e=o[c],++c,s=0;s<=b-1;s++)t[r]=e,++r;c=f}c=f+=u}jWa.pop(6)}function L9a(e){return e.pointers?e.pointers.length:e.words?e.words.length:e.bytes?e.bytes.length:0}function N9a(e,t){return e-(i=e,r=t,(0|Math.floor(i/r))*t)|0;var i,r}function Lbb(e,t,i){var r,a,s,n,o;a=(0-Fab)/Abb*i,n=0-(o=Math.exp(a))*o,a=2*Fab/Abb*t,s=(0-(s=o*Math.cos(a)*2))*(r=1/(r=1-s-n)),n=(0-n)*r,dcb(e,r),fcb(e,s),hcb(e,n)}function Mbb(e,t){var i,r;return i=ccb(e)*t+ecb(e)*(r=icb(e))+gcb(e)*kcb(e),lcb(e,r),jcb(e,t),i}function Obb(e){return pbb.success(pbb.isWords(e)),pbb.failed()?0:e.wordsAsFloat32Array()}function Qbb(){return qbb}function Rbb(){var e;return 0===Cbb?0:(Ebb=ubb<tbb?(e=ibb*Ebb+jbb*Fbb,Fbb=Ebb,e):e=kbb*Ebb-lbb,Cbb<=ubb&&((ubb=0)<nbb[qab]?(function(){wbb=nbb[qab],function(){var e,t,i,r,a;a=ybb/Abb,e=Math.sin(2*Fab*12.7*a),t=Math.sin(2*Fab*7.1*a),i=Math.sin(2*Fab*4.7*a),r=2*nbb[xab]*nbb[qab]/100*(e+t+i),wbb+=r}(),wbb+=(Ubb()-32767)*nbb[Eab]/32768*nbb[qab],0===N9a(vbb,2)?wbb+=nbb[oab]*nbb[qab]*(1-nbb[abb]):wbb-=nbb[oab]*nbb[qab]*(1-nbb[abb]),wbb<0&&(wbb=0);sbb=Cbb=Abb/wbb|0,0<nbb[hbb]&&(sbb>>=1);tbb=Cbb*nbb[abb]|0,function(e,t,i){var r,a,s,n,o,u,l,c,f,h,p,d,b,m;h=(d=Cbb*e|0)/Cbb,f=i,a=(l=t)<=0?1:1-(u=(1-h)/l)/(Math.exp(u)-1);o=Fab*(f+1),r=Math.cos(o),p=Math.sin(o),m=function(e,t,i,r){var a,s,n,o,u,l,c;if(0<(o=$bb(0,e,t,i,r)))for(u=0,a=o,s=$bb(l=1,e,t,i,r);0<s;)u=l,a=s,s=$bb(l*=2,e,t,i,r);else for(l=0,a=$bb(u=-1,e,t,i,r),s=o;a<0;)l=u,s=a,a=$bb(u*=2,e,t,i,r);for(;pab<l-u;)0<(n=$bb(c=(l+u)/2,e,t,i,r))?(u=c,a=n):(l=c,s=n);return(l+u)/2}(o,r,p,l/h*o*a),b=o/d,c=Math.exp(m*b),ibb=2*Math.cos(b)*c,jbb=0-c*c,Fbb=0,Ebb=c*Math.sin(b),s=Math.exp(-1/(l*Cbb)),n=Math.pow(s,Cbb-d),lbb=(1-(kbb=s))*n/(1-n),function(){var e,t,i,r;for(t=0,i=Ebb,r=Fbb,e=1;e<=tbb;e++)t=ibb*i+jbb*r,r=i,i=t;0!==t&&(Ebb=Ebb/t*1e4)}()}(nbb[abb],nbb[Xab],nbb[Yab]),0<(Ebb+=(Ubb()-32767)*nbb[fbb]/32768*Ebb)&&(Ebb=0),0!==N9a(vbb,2)&&0<(Ebb*=1-nbb[oab])&&(Ebb=0)}(),vbb=N9a(vbb+1,65535)):sbb=Cbb=1),++ubb,e)}function Sbb(e){return 32.767*Math.pow(2,(e-87)/6)}function Ubb(){return Bbb=1309*Bbb+13849&65535}function Zbb(){var e,t,i,r,a,s,n,o;return e=Obb(pbb.stackValue(2)),s=i=pbb.stackValue(1),pbb.success(pbb.isWords(s)),t=pbb.failed()?0:s.wordsAsInt16Array(),a=pbb.stackIntegerValue(0),pbb.failed()?null:(r=pbb.stackObjectValue(3),n=r,pbb.success(22===L9a(n)),pbb.failed()||(o=pbb.fetchPointerofObject(0,n),xbb=Obb(o),wbb=pbb.fetchFloatofObject(2,n),Cbb=pbb.fetchIntegerofObject(3,n),ubb=pbb.fetchIntegerofObject(4,n),tbb=pbb.fetchIntegerofObject(5,n),sbb=pbb.fetchIntegerofObject(6,n),ibb=pbb.fetchFloatofObject(7,n),jbb=pbb.fetchFloatofObject(8,n),Ebb=pbb.fetchFloatofObject(9,n),Fbb=pbb.fetchFloatofObject(10,n),kbb=pbb.fetchFloatofObject(11,n),lbb=pbb.fetchFloatofObject(12,n),obb=pbb.fetchFloatofObject(13,n),Dbb=pbb.fetchFloatofObject(14,n),rbb=pbb.fetchFloatofObject(15,n),vbb=pbb.fetchIntegerofObject(16,n),ybb=pbb.fetchIntegerofObject(17,n),Bbb=pbb.fetchIntegerofObject(18,n),mbb=pbb.fetchIntegerofObject(19,n),zbb=pbb.fetchIntegerofObject(20,n),Abb=pbb.fetchIntegerofObject(21,n),!1!==pbb.failed())?null:(pbb.success(2*L9a(i)>=zbb),pbb.failed()?null:(function(e,t,i){var r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y;(function(e){var t,i,r,a,s,n,o,u,l,c,f;c=.6*Sbb((nbb=e)[X9a]),f=.6*Sbb(nbb[Z9a]),t=.4*Sbb(nbb[O9a]),r=.15*Sbb(nbb[Q9a]),s=.06*Sbb(nbb[S9a]),o=.04*Sbb(nbb[U9a]),i=.15*Sbb(nbb[P9a]),a=.06*Sbb(nbb[R9a]),n=.04*Sbb(nbb[T9a]),u=.022*Sbb(nbb[V9a]),l=.03*Sbb(nbb[W9a]),8<=mbb&&(16e3<=Abb?_bb(Wab,7500,600):mbb=6);7<=mbb&&(16e3<=Abb?_bb(Vab,6500,500):mbb=6);6<=mbb&&_bb(Tab,nbb[wab],nbb[hab]);5<=mbb&&_bb(Rab,nbb[vab],nbb[fab]);_bb(Oab,nbb[uab],nbb[dab]),_bb(Lab,nbb[tab],nbb[bab]),_bb(Iab,nbb[sab],nbb[_9a]),_bb(Gab,nbb[rab],nbb[$9a]),_bb(Zab,nbb[yab],nbb[jab]),_bb(cbb,nbb[Bab],nbb[lab]),Lbb(_ab,nbb[zab],nbb[kab]),Lbb(ebb,nbb[Cab],nbb[mab]),acb($ab,nbb[yab],nbb[jab],c),acb(dbb,nbb[Bab],nbb[lab],f),acb(Hab,nbb[rab],nbb[$9a],t),acb(Kab,nbb[sab],nbb[_9a],r),acb(Nab,nbb[tab],nbb[bab],s),acb(Qab,nbb[uab],nbb[dab],o),acb(Jab,nbb[sab],nbb[aab],i),acb(Mab,nbb[tab],nbb[cab],a),acb(Pab,nbb[uab],nbb[eab],n),acb(Sab,nbb[vab],nbb[gab],u),acb(Uab,nbb[wab],nbb[iab],l)})(e),0<wbb?(y=Sbb(nbb[hbb]-7),b=Sbb(nbb[hbb]),k=.1*Sbb(nbb[gbb])):y=b=k=0;o=.25*Sbb(nbb[Aab]),a=.05*Sbb(nbb[Y9a]),n=.05*Sbb(nbb[nab]),(l=nbb[Dab]-3)<=0&&(l=57);r=Sbb(l),acb(bbb,0,Abb,r),h=rbb,g=zbb+(f=i)-1;for(;f<=g;)h=(Ubb()-32768)/4,rbb=h+=.75*rbb,sbb<ubb&&(h*=.5),u=o*h,S=Rbb(),Dbb=S,ubb<tbb&&(S+=k*(Ubb()-32768)/4),c=y*S,d=b*S,d+=s=a*h,O=c+=s,_=void 0,p=0<mbb?(_=Mbb(_ab,O),_=bcb(Zab,_),_=Mbb(ebb,_),_=bcb(cbb,_),8<=mbb&&(_=bcb(Wab,_)),7<=mbb&&(_=bcb(Vab,_)),6<=mbb&&(_=bcb(Tab,_)),5<=mbb&&(_=bcb(Rab,_)),4<=mbb&&(_=bcb(Oab,_)),3<=mbb&&(_=bcb(Lab,_)),2<=mbb&&(_=bcb(Iab,_)),1<=mbb&&(_=bcb(Gab,_)),_):0,p+=bcb(Hab,I=m=d)+bcb(Kab,I)+bcb(Nab,I)+bcb(Qab,I)+bcb($ab,I)+bcb(dbb,I),m=u+d-obb,obb=d,p=bcb(Jab,j=m)-bcb(Mab,j)+bcb(Pab,j)-bcb(Sab,j)+bcb(Uab,j)-p,p=bcb(bbb,p=n*m-p),(v=p*r|0)<-32768&&(v=-32768),32767<v&&(v=32767),t[f-1]=v,++f,++ybb;var j;var I;var O,_}(e,t,a),function(e){var t,i,r,a,s,n,o,u,l,c,f;if(pbb.pushRemappableOop(e),pbb.pushRemappableOop(pbb.floatObjectOf(wbb)),pbb.pushRemappableOop(pbb.floatObjectOf(ibb)),pbb.pushRemappableOop(pbb.floatObjectOf(jbb)),pbb.pushRemappableOop(pbb.floatObjectOf(Ebb)),pbb.pushRemappableOop(pbb.floatObjectOf(Fbb)),pbb.pushRemappableOop(pbb.floatObjectOf(kbb)),pbb.pushRemappableOop(pbb.floatObjectOf(lbb)),pbb.pushRemappableOop(pbb.floatObjectOf(obb)),pbb.pushRemappableOop(pbb.floatObjectOf(Dbb)),o=pbb.floatObjectOf(rbb),l=pbb.popRemappableOop(),s=pbb.popRemappableOop(),a=pbb.popRemappableOop(),r=pbb.popRemappableOop(),f=pbb.popRemappableOop(),c=pbb.popRemappableOop(),i=pbb.popRemappableOop(),t=pbb.popRemappableOop(),u=pbb.popRemappableOop(),n=pbb.popRemappableOop(),pbb.failed())return;return pbb.storePointerofObjectwithValue(2,n,u),pbb.storeIntegerofObjectwithValue(3,n,Cbb),pbb.storeIntegerofObjectwithValue(4,n,ubb),pbb.storeIntegerofObjectwithValue(5,n,tbb),pbb.storeIntegerofObjectwithValue(6,n,sbb),pbb.storePointerofObjectwithValue(7,n,t),pbb.storePointerofObjectwithValue(8,n,i),pbb.storePointerofObjectwithValue(9,n,c),pbb.storePointerofObjectwithValue(10,n,f),pbb.storePointerofObjectwithValue(11,n,r),pbb.storePointerofObjectwithValue(12,n,a),pbb.storePointerofObjectwithValue(13,n,s),pbb.storePointerofObjectwithValue(14,n,l),pbb.storePointerofObjectwithValue(15,n,o),pbb.storeIntegerofObjectwithValue(16,n,vbb),pbb.storeIntegerofObjectwithValue(17,n,ybb),pbb.storeIntegerofObjectwithValue(18,n,Bbb),!1===pbb.failed()}(r)?void pbb.pop(3):null)))}function $bb(e,t,i,r,a){return Math.exp(e*t)*((a*(e*e+1)+e)*r-i)+1}function _bb(e,t,i){var r,a,s,n;r=(0-Fab)/Abb*i,s=0-(n=Math.exp(r))*n,r=2*Fab/Abb*t,dcb(e,1-(a=n*Math.cos(r)*2)-s),fcb(e,a),hcb(e,s)}function acb(e,t,i,r){_bb(e,t,i),dcb(e,ccb(e)*r)}function bcb(e,t){var i,r;return i=ccb(e)*t+ecb(e)*(r=icb(e))+gcb(e)*kcb(e),lcb(e,r),jcb(e,i),i}function ccb(e){return xbb[5*e-5]}function dcb(e,t){xbb[5*e-5]=t}function ecb(e){return xbb[5*e-4]}function fcb(e,t){xbb[5*e-4]=t}function gcb(e){return xbb[5*e-3]}function hcb(e,t){xbb[5*e-3]=t}function icb(e){return xbb[5*e-2]}function jcb(e,t){xbb[5*e-2]=t}function kcb(e){return xbb[5*e-1]}function lcb(e,t){xbb[5*e-1]=t}function pcb(e){return!1!=((pbb=e).majorVersion()==J9a)&&pbb.minorVersion()>=K9a}function qfb(e){return"number"==typeof e?xfb.classSmallInteger():e.sqClass}function rfb(e){return e.bytes?e.bytes.length:e.words?4*e.words.length:0}function sfb(e,t){return 0|Math.floor(e/t)}function tfb(e,t){return e-sfb(e,t)*t|0}function ufb(e,t){return 31<t?0:e<<t}function vfb(e,t){return 31<t?0:e>>>t}function Bfb(e,t,i){var r,a,s,n,o,u,l,c,f;if(t<1||i<1)return xfb.primitiveFail();if(a=e,!((u=Math.min(i,Jfb((f=a).bytes,rfb(f))))<t)){if(o=1+(t-1>>3),r=1+(u-1>>3),n=tfb(t-1,8),s=7-tfb(u-1,8),o==r)return l=ufb(255,n)&vfb(255,s),0!=(cgb(a,o)&l);if(0!==vfb(cgb(a,o),n))return 1;for(c=1+o;c<=r-1;c++)if(0!==cgb(a,c))return 1;return 0!=(255&ufb(cgb(a,r),s))}}function Cfb(e,t){var i,r,a;return a=xfb.instantiateClassindexableSize(qfb(e),t),r=(i=rfb(e))<t?i:t,Hfb(e.bytes,a.bytes,r),a}function Dfb(e,t){var i,r,a;return"number"==typeof e?(i=(r=e)<0?xfb.classLargeNegativeInteger():xfb.classLargePositiveInteger(),function(e,t){var i,r,a;for(i=t.bytes,r=1,a=Kfb(e);r<=a;r++)i[r-1]=Ofb(e,r)}(r,a=xfb.instantiateClassindexableSize(i,t))):a=Cfb(e,t),a}function Gfb(e,t,i){var r,a,s;for(s=i-1;0<=s;){if((a=t[s])!==(r=e[s]))return a<r?1:-1;--s}return 0}function Hfb(e,t,i){var r,a;for(r=i-1,a=0;a<=r;a++)t[a]=e[a]}function Jfb(e,t){var i,r;for(r=t;0===(i=e[r-1]);)if(0==--r)return 0;return Tfb(i)+8*(r-1)}function Kfb(e){return e<256&&-256<e?1:e<65536&&-65536<e?2:e<16777216&&-16777216<e?3:4}function Ofb(e,t){return t<1&&xfb.primitiveFail(),4<t?0:e<0?255&vfb(0-e,8*(t-1)):255&vfb(e,8*(t-1))}function Qfb(i,r,a,s,n){return function(){for(var e=a-r+1,t=0;t<e;t++)i[t+r]=s[t+n];return 0}()}function Tfb(e){var t,i;return i=0,(t=e)<65536||(t>>>=16,i+=16),t<256||(t>>>=8,i+=8),t<16||(t>>>=4,i+=4),t<4||(t>>>=2,i+=2),t<2||(t>>>=1,++i),i+t}function Ufb(e){var t,i,r,a,s,n;for(s=(n=e)<0?xfb.classLargeNegativeInteger():xfb.classLargePositiveInteger(),t=Kfb(n),r=(i=xfb.instantiateClassindexableSize(s,t)).bytes,a=1;a<=t;a++)r[a-1]=Ofb(n,a);return i}function Vfb(e,t){var i,r,a,s;return r=rfb(e),0===(s=Jfb(e.bytes,r))?0:(i=s+t+7>>3,a=xfb.instantiateClassindexableSize(qfb(e),i),function(e,t,i,r,a){var s,n,o,u,l,c,f;for(s=e>>3,l=tfb(e,8),f=s-1,u=0;u<=f;u++)r[u]=0;if(0===l)return Qfb(r,s,a-1,t,0);for(c=8-l,f=i-1,u=n=0;u<=f;u++)o=t[u],r[u+s]=255&(n|ufb(o,l)),n=vfb(o,c);0!==n&&(r[a-1]=n)}(t,e.bytes,r,a.bytes,i),a)}function Wfb(e,t,i){var r,a,s,n,o;return a=(o=Jfb(e.bytes,i))+7>>3,(n=o-t)<=0?xfb.instantiateClassindexableSize(qfb(e),0):(s=7+n>>3,r=xfb.instantiateClassindexableSize(qfb(e),s),function(e,t,i,r,a){var s,n,o,u,l,c,f,h;if(n=e>>3,0===(l=tfb(e,8)))return Qfb(r,0,a-1,t,n);for(c=8-l,o=vfb(t[n],l),f=i-1,s=h=1+n;s<=f;s++)u=t[s],r[s-h]=255&(o|ufb(u,c)),o=vfb(u,l);0!==o&&(r[a-1]=o)}(t,e.bytes,a,r.bytes,s),r)}function Xfb(e,t){var i,r,a,s,n,o,u,l,c,f;return l=rfb(e),c=rfb(t),n=qfb(e),u=l<=c?(s=e,r=l,f=t,c):(s=t,r=c,f=e,l),i=xfb.instantiateClassindexableSize(n,u),0<(a=function(e,t,i,r,a){var s,n,o;for(n=t-1,s=o=0;s<=n;s++)o=(o>>>8)+e[s]+i[s],a[s]=255&o;for(n=r-1,s=t;s<=n;s++)o=(o>>>8)+i[s],a[s]=255&o;return o>>>8}(s.bytes,r,f.bytes,u,i.bytes))&&(o=xfb.instantiateClassindexableSize(n,u+1),Hfb(i.bytes,o.bytes,u),(i=o).bytes[u]=a),i}function Yfb(e,t,i){var r,a,s,n,o,u,l,c,f;if("number"==typeof e){if(e<0)return xfb.primitiveFail();s=Ufb(e)}else{if(qfb(e)===xfb.classLargeNegativeInteger())return xfb.primitiveFail();s=e}if("number"==typeof t){if(t<0)return xfb.primitiveFail();n=Ufb(t)}else{if(qfb(t)===xfb.classLargeNegativeInteger())return xfb.primitiveFail();n=t}return u=(l=rfb(s))<(c=rfb(n))?(r=l,a=s,o=c,n):(r=c,a=n,o=l,s),f=xfb.instantiateClassindexableSize(xfb.classLargePositiveInteger(),o),function(e,t,i,r,a,s){var n,o;if(o=i-1,e!==wfb)if(e!==zfb){if(e!==Afb)return xfb.primitiveFail();for(n=0;n<=o;n++)s[n]=t[n]^r[n];for(o=a-1,n=i;n<=o;n++)s[n]=r[n]}else{for(n=0;n<=o;n++)s[n]=t[n]|r[n];for(o=a-1,n=i;n<=o;n++)s[n]=r[n]}else{for(n=0;n<=o;n++)s[n]=t[n]&r[n];for(o=a-1,n=i;n<=o;n++)s[n]=0}}(i,a.bytes,r,u.bytes,o,f.bytes),xfb.failed()?0:jgb(f)}function Zfb(e,t){var i,r;return r=rfb(e),(i=rfb(t))!==r?r<i?-1:1:Gfb(e.bytes,t.bytes,r)}function $fb(e,t,i){var r,a,s,n,o,u,l,c,f;return f=rfb(e),c=rfb(t),r=i?xfb.classLargeNegativeInteger():xfb.classLargePositiveInteger(),(l=f-c+1)<=0?(a=xfb.instantiateClassindexableSize(xfb.classArray(),2),xfb.stObjectatput(a,1,0),xfb.stObjectatput(a,2,e)):(n=Dfb(n=Vfb(t,u=8-Tfb(Kgb(t,c))),_fb(n)+1),_fb(s=Vfb(e,u))===f&&(s=Dfb(s,f+1)),o=xfb.instantiateClassindexableSize(r,l),function(e,t,i,r,a,s){var n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y,j;for(k=s,y=e[(g=t-1)-1],l=1==g?0:e[g-2],b=1;b<=k;b++){if(i[(m=r+1-b)-1]===y)o=255;else for(j=tfb(S=((S=i[m-1])<<8)+i[m-2],y),f=(p=(o=sfb(S,y))*l)>>>8,c=255&p,h=m<3?0:i[m-3];(j<f||j===f&&h<c)&&(--o,c<l?(--f,c=c+256-l):c-=l,y<=f);)f-=y;for(d=m-g,u=0,v=1;v<=t;v++)f=e[v-1]*(o>>>8),c=e[v-1]*(255&o),n=i[d-1]-u-(255&c),i[d-1]=255&n,u=f+(c>>>8)-(n>>=8),++d;if(0<u)for(--o,d=m-g,u=0,v=1;v<=t;v++)u=(u>>>8)+i[d-1]+e[v-1],i[d-1]=255&u,++d;a[s-b]=o}}(n.bytes,_fb(n),s.bytes,_fb(s),o.bytes,_fb(o)),s=Wfb(s,u,_fb(n)-1),a=xfb.instantiateClassindexableSize(xfb.classArray(),2),xfb.stObjectatput(a,1,o),xfb.stObjectatput(a,2,s)),a}function _fb(e){return("number"==typeof e?Kfb:rfb)(e)}function agb(e,t,i,r){var a,s,n,o;return n=rfb(e),o=rfb(t),n<=(s=rfb(i))&&o<=s&&0<=r&&r<=255?(a=xfb.instantiateClassindexableSize(xfb.classLargePositiveInteger(),s),function(e,t,i,r,a,s,n,o){var u,l,c,f,h,p,d,b;for(p=t-1,h=r-1,f=s-1,l=c=0;l<=p;l++){for(b=o[0]+e[l]*i[0],b+=(d=b*n&255)*a[0],u=1;u<=h;u++)b=(b>>>8)+o[u]+e[l]*i[u]+d*a[u],o[u-1]=255&b;for(u=r;u<=f;u++)b=(b>>>8)+o[u]+d*a[u],o[u-1]=255&b;b=(b>>>8)+c,o[f]=255&b,c=b>>>8}for(l=t;l<=f;l++){for(b=o[0],b+=(d=b*n&255)*a[0],u=1;u<=f;u++)b=(b>>>8)+o[u]+d*a[u],o[u-1]=255&b;b=(b>>>8)+c,o[f]=255&b,c=b>>>8}if(0!==c||1!==Gfb(a,o,s))for(l=b=0;l<=f;l++)b=b+o[l]-a[l],o[l]=255&b,b>>=8}(e.bytes,n,t.bytes,o,i.bytes,s,r,a.bytes),jgb(a)):xfb.primitiveFail()}function bgb(e,t,i){var r,a,s,n,o,u,l,c;return o=(c=rfb(e))<=(l=rfb(t))?(n=e,s=c,r=t,l):(n=t,s=l,r=e,c),a=i?xfb.classLargeNegativeInteger():xfb.classLargePositiveInteger(),u=xfb.instantiateClassindexableSize(a,o+s),function(e,t,i,r,a){var s,n,o,u,l,c,f,h;if(!(1===t&&0===e[0]||1===r&&0===i[0]))for(h=t-1,c=r-1,l=0;l<=h;l++)if(0!==(o=e[l])){for(f=l,n=u=0;n<=c;n++)u=(s=(s=i[n])*o+u+a[f])>>>8,a[f]=255&s,++f;a[f]=u}}(n.bytes,s,r.bytes,o,u.bytes),hgb(u)}function cgb(e,t){return t>rfb(e)?0:Kgb(e,t)}function dgb(e,t){var i,r,a,s,n,o,u,l,c,f;if(u=qfb(e)===xfb.classLargeNegativeInteger(),(l=rfb(e))===(c=rfb(t))){for(;1<l&&cgb(e,l)===cgb(t,l);)--l;c=l}return f=l<c||l===c&&cgb(e,l)<cgb(t,l)?(r=t,o=c,s=e,i=l,!1==u):(r=e,o=l,s=t,i=c,u),n=o,a=xfb.instantiateClassindexableSize(f?xfb.classLargeNegativeInteger():xfb.classLargePositiveInteger(),n),function(e,t,i,r,a){var s,n;for(s=n=0;s<=t-1;s++)n=n+i[s]-e[s],a[s]=255&n,n>>=8;for(s=t;s<=r-1;s++)n+=i[s],a[s]=255&n,n>>=8}(s.bytes,i,r.bytes,o,a.bytes),(f?igb:jgb)(a)}function egb(){return yfb}function ggb(e){var t,i;if("number"==typeof e)return 1;if(0!==(i=_fb(e))&&0!==Kgb(e,i)){if(4<i)return 1;if(!(i<4)){if(qfb(e)===xfb.classLargePositiveInteger())return Kgb(e,4)>Ofb(1073741823,4);if(!(Kgb(e,4)<Ofb(-1073741824,4)))for(t=1;t<=4;t++)if(Kgb(e,t)!==Ofb(-1073741824,t))return 1}}}function hgb(e){return(qfb(e)===xfb.classLargePositiveInteger()?jgb:igb)(e)}function igb(e){var t,i,r,a,s;for(i=a=_fb(e);0!==i&&0===Kgb(e,i);)--i;if(0===i)return 0;if(i<=4){if(r=-1073741824,i<4||cgb(e,4)<Ofb(r,4)){for(s=0,t=i;1<=t;t+=-1)s=256*s-Kgb(e,t);return s}for(t=1;t<=4;t++)if(cgb(e,t)!==Ofb(r,t))return i<a?Cfb(e,i):e;return r}return i<a?Cfb(e,i):e}function jgb(e){var t,i,r,a;for(i=a=_fb(e);0!==i&&0===Kgb(e,i);)--i;if(0===i)return 0;if(i<=4&&cgb(e,4)<=Ofb(1073741823,4)){for(r=0,t=i;1<=t;t+=-1)r=256*r+Kgb(e,t);return r}return i<a?Cfb(e,i):e}function kgb(){var e,t,i,r;return t=xfb.stackIntegerValue(1),i=xfb.stackIntegerValue(0),xfb.success(xfb.isKindOfInteger(xfb.stackValue(2))),e=xfb.stackValue(2),xfb.failed()?null:(r=Bfb("number"==typeof e?Ufb(e):e,t,i)?xfb.trueObject():xfb.falseObject(),xfb.failed()||xfb.popthenPush(3,r),null)}function lgb(){var e,t;return xfb.success(xfb.isKindOfInteger(xfb.stackValue(0))),e=xfb.stackValue(0),xfb.failed()?null:"number"==typeof e?(t=Ufb(e),xfb.failed()||xfb.popthenPush(2,t),null):(xfb.failed()||xfb.popthenPush(2,e),null)}function mgb(){var e;return e=xfb.trueObject(),xfb.failed()||xfb.popthenPush(1,e),null}function ngb(){var e,t,i,r;return xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),t=xfb.stackValue(1),i=xfb.stackIntegerValue(0),xfb.failed()||(e="number"==typeof t?Ufb(t):t,r=0<=i?Vfb(e,i):hgb(Wfb(e,0-i,rfb(e))),xfb.failed()||xfb.popthenPush(3,r)),null}function ogb(){var e,t,i;return xfb.success(xfb.isKindOfInteger(xfb.stackValue(0))),t=xfb.stackValue(0),xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),e=xfb.stackValue(1),xfb.failed()?null:(i=Xfb("number"==typeof e?Ufb(e):e,"number"==typeof t?Ufb(t):t),xfb.failed()||xfb.popthenPush(2,i),null)}function pgb(){var e,t,i;return xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),e=xfb.stackValue(1),xfb.success(xfb.isKindOfInteger(xfb.stackValue(0))),t=xfb.stackValue(0),xfb.failed()?null:(i=Xfb("number"==typeof e?Ufb(e):e,"number"==typeof t?Ufb(t):t),xfb.failed()||xfb.popthenPush(3,i),null)}function qgb(){var e,t,i;return xfb.success(xfb.isKindOfInteger(xfb.stackValue(0))),t=xfb.stackValue(0),xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),e=xfb.stackValue(1),xfb.failed()?null:(i=Yfb(e,t,wfb),xfb.failed()||xfb.popthenPush(2,i),null)}function rgb(){var e,t,i,r;return xfb.success(xfb.isKindOfInteger(xfb.stackValue(2))),e=xfb.stackValue(2),xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),t=xfb.stackValue(1),i=xfb.stackIntegerValue(0),xfb.failed()?null:(r=Yfb(e,t,i),xfb.failed()||xfb.popthenPush(4,r),null)}function sgb(){var e,t,i;return xfb.success(xfb.isKindOfInteger(xfb.stackValue(0))),t=xfb.stackValue(0),xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),e=xfb.stackValue(1),xfb.failed()?null:(i=Yfb(e,t,zfb),xfb.failed()||xfb.popthenPush(2,i),null)}function tgb(){var e,t,i,r;return i=xfb.stackIntegerValue(0),xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),t=xfb.stackValue(1),xfb.failed()||(e="number"==typeof t?Ufb(t):t,r=0<=i?Vfb(e,i):hgb(Wfb(e,0-i,rfb(e))),xfb.failed()||xfb.popthenPush(2,r)),null}function ugb(){var e,t,i,r;return i=xfb.stackIntegerValue(0),xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),t=xfb.stackValue(1),xfb.failed()||(e="number"==typeof t?Ufb(t):t,r=0<=i?Vfb(e,i):hgb(Wfb(e,0-i,rfb(e))),xfb.failed()||xfb.popthenPush(2,r)),null}function vgb(){var e,t,i;return xfb.success(xfb.isKindOfInteger(xfb.stackValue(0))),t=xfb.stackValue(0),xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),e=xfb.stackValue(1),xfb.failed()?null:(i=Yfb(e,t,Afb),xfb.failed()||xfb.popthenPush(2,i),null)}function wgb(){var e,t,i,r,a;return xfb.success(xfb.isKindOfInteger(xfb.stackValue(0))),r=xfb.stackValue(0),xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),t=xfb.stackValue(1),xfb.failed()?null:"number"==typeof t?"number"==typeof r?(e=t)>(i=r)?(a=1,xfb.failed()||xfb.popthenPush(2,a),null):(a=e<i?-1:0,xfb.failed()||xfb.popthenPush(2,a),null):(a=-1,xfb.failed()||xfb.popthenPush(2,a),null):(a="number"==typeof r?1:Zfb(t,r),xfb.failed()||xfb.popthenPush(2,a),null)}function xgb(){var e,t,i,r,a;return xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),i=xfb.stackValue(1),xfb.success(xfb.isKindOfInteger(xfb.stackValue(0))),r=xfb.stackValue(0),xfb.failed()?null:"number"==typeof i?"number"==typeof r?(e=i)>(t=r)?(a=1,xfb.failed()||xfb.popthenPush(3,a),null):(a=e<t?-1:0,xfb.failed()||xfb.popthenPush(3,a),null):(a=-1,xfb.failed()||xfb.popthenPush(3,a),null):(a="number"==typeof r?1:Zfb(i,r),xfb.failed()||xfb.popthenPush(3,a),null)}function ygb(){var e,t,i,r,a,s;if(xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),r=xfb.stackValue(1),a=xfb.booleanValueOf(xfb.stackValue(0)),xfb.success(xfb.isKindOfInteger(xfb.stackValue(2))),t=xfb.stackValue(2),xfb.failed())return null;if(!ggb(t))return xfb.primitiveFail(),null;if(!ggb(r))return xfb.primitiveFail(),null;if(e="number"==typeof t?Ufb(t):t,"number"==typeof r){if(0===r)return xfb.primitiveFail(),null;i=Ufb(r)}else i=r;return s=$fb(e,i,a),xfb.failed()||xfb.popthenPush(3,s),null}function zgb(){var e,t,i,r,a,s;if(xfb.success(xfb.isKindOfInteger(xfb.stackValue(2))),i=xfb.stackValue(2),xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),r=xfb.stackValue(1),a=xfb.booleanValueOf(xfb.stackValue(0)),xfb.failed())return null;if(e="number"==typeof i?Ufb(i):i,"number"==typeof r){if(0===r)return xfb.primitiveFail(),null;t=Ufb(r)}else t=r;return s=$fb(e,t,a),xfb.failed()||xfb.popthenPush(4,s),null}function Agb(){var e,t,i,r;return xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),t=xfb.stackValue(1),i=xfb.booleanValueOf(xfb.stackValue(0)),xfb.success(xfb.isKindOfInteger(xfb.stackValue(2))),e=xfb.stackValue(2),xfb.failed()?null:(r=bgb("number"==typeof e?Ufb(e):e,"number"==typeof t?Ufb(t):t,i),xfb.failed()||xfb.popthenPush(3,r),null)}function Bgb(){var e,t,i,r;return xfb.success(xfb.isKindOfInteger(xfb.stackValue(2))),e=xfb.stackValue(2),xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),t=xfb.stackValue(1),i=xfb.booleanValueOf(xfb.stackValue(0)),xfb.failed()?null:(r=bgb("number"==typeof e?Ufb(e):e,"number"==typeof t?Ufb(t):t,i),xfb.failed()||xfb.popthenPush(4,r),null)}function Cgb(){var e,t,i;return xfb.success(xfb.isKindOfInteger(xfb.stackValue(0))),t=xfb.stackValue(0),xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),e=xfb.stackValue(1),xfb.failed()?null:(i=dgb("number"==typeof e?Ufb(e):e,"number"==typeof t?Ufb(t):t),xfb.failed()||xfb.popthenPush(2,i),null)}function Dgb(){var e,t,i;return xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),e=xfb.stackValue(1),xfb.success(xfb.isKindOfInteger(xfb.stackValue(0))),t=xfb.stackValue(0),xfb.failed()?null:(i=dgb("number"==typeof e?Ufb(e):e,"number"==typeof t?Ufb(t):t),xfb.failed()||xfb.popthenPush(3,i),null)}function Egb(){var e,t,i,r;for(t=egb().length,e=(r=xfb.instantiateClassindexableSize(xfb.classString(),t)).bytes,i=0;i<=t-1;i++)e[i]=egb()[i];return xfb.failed()||xfb.popthenPush(1,r),null}function Fgb(){var e,t,i,r,a;return xfb.success(xfb.isKindOfInteger(xfb.stackValue(2))),t=xfb.stackValue(2),xfb.success(xfb.isKindOfInteger(xfb.stackValue(1))),i=xfb.stackValue(1),r=xfb.stackIntegerValue(0),xfb.success(xfb.isKindOfInteger(xfb.stackValue(3))),e=xfb.stackValue(3),xfb.failed()?null:(a=agb("number"==typeof e?Ufb(e):e,"number"==typeof t?Ufb(t):t,"number"==typeof i?Ufb(i):i,r),xfb.failed()||xfb.popthenPush(4,a),null)}function Ggb(){var e,t;return xfb.success(xfb.isKindOfInteger(xfb.stackValue(0))),e=xfb.stackValue(0),xfb.failed()?null:"number"==typeof e?(xfb.failed()||xfb.popthenPush(2,e),null):(t=hgb(e),xfb.failed()||xfb.popthenPush(2,t),null)}function Hgb(){var e,t;return xfb.success(xfb.stackValue(0).sqClass===xfb.classLargeNegativeInteger()),e=xfb.stackValue(0),xfb.failed()?null:(t=igb(e),xfb.failed()||xfb.popthenPush(1,t),null)}function Igb(){var e,t;return xfb.success(xfb.stackValue(0).sqClass===xfb.classLargePositiveInteger()),e=xfb.stackValue(0),xfb.failed()?null:(t=jgb(e),xfb.failed()||xfb.popthenPush(1,t),null)}function Jgb(e){return!1!=((xfb=e).majorVersion()==ofb)&&xfb.minorVersion()>=pfb}function Kgb(e,t){return e.bytes[t-1]}function eob(e){return"number"==typeof e?gob.classSmallInteger():e.sqClass}function fob(e){return e.pointers?e.pointers.length:e.words?e.words.length:e.bytes?e.bytes.length:0}function mob(){return lob}function nob(e){return gob.failed()?null:gob.isWords(e)&&6===fob(e)?e.wordsAsFloat32Array():(gob.primitiveFail(),null)}function oob(e){var t,i;if(!gob.failed()){if(eob(e)!==gob.classPoint())return gob.primitiveFail();if(!(t="number"==typeof(i=gob.fetchPointerofObject(0,e)))&&!i.isFloat)return gob.primitiveFail();if(hob=t?i:gob.floatValueOf(i),!(t="number"==typeof(i=gob.fetchPointerofObject(1,e)))&&!i.isFloat)return gob.primitiveFail();iob=t?i:gob.floatValueOf(i)}}function qob(e){var t,i,r,a,s;if(a=hob-e[2],s=iob-e[5],0===(t=e[0]*e[4]-e[1]*e[3]))return gob.primitiveFail();t=1/t,i=a*e[4]-e[1]*s,r=e[0]*s-a*e[3],job=i*t,kob=r*t}function rob(e){job=hob*e[0]+iob*e[1]+e[2],kob=hob*e[3]+iob*e[4]+e[5]}function sob(e){return-1073741824<=e&&job<=1073741823}function tob(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(i=nob(r=gob.stackObjectValue(0)),t=nob(gob.stackObjectValue(1)),e=nob(gob.stackObjectValue(2)),gob.failed())return null;s=t,n=i,o=(a=e)[0]*s[0]+a[1]*s[3],u=a[0]*s[1]+a[1]*s[4],l=a[0]*s[2]+a[1]*s[5]+a[2],c=a[3]*s[0]+a[4]*s[3],f=a[3]*s[1]+a[4]*s[4],h=a[3]*s[2]+a[4]*s[5]+a[5],n[0]=o,n[1]=u,n[2]=l,n[3]=c,n[4]=f,n[5]=h,gob.popthenPush(3,r)}function uob(){var e;if(oob(gob.stackObjectValue(0)),e=nob(gob.stackObjectValue(1)),gob.failed())return null;qob(e),gob.failed()||Aob(2)}function vob(){var e,t,i,r,a,s,n,o,u,l,c;return i=gob.stackObjectValue(0),c=gob.stackObjectValue(1),r=nob(gob.stackObjectValue(2)),gob.failed()?null:eob(c)!==eob(i)||!gob.isPointers(c)||2!==fob(c)?gob.primitiveFail():(oob(gob.fetchPointerofObject(0,c)),gob.failed()?null:(u=hob,l=iob,qob(r),n=a=job,o=s=kob,oob(gob.fetchPointerofObject(1,c)),gob.failed()?null:(e=hob,t=iob,qob(r),n=Math.min(n,job),a=Math.max(a,job),o=Math.min(o,kob),s=Math.max(s,kob),hob=e,iob=l,qob(r),n=Math.min(n,job),a=Math.max(a,job),o=Math.min(o,kob),s=Math.max(s,kob),hob=u,iob=t,qob(r),n=Math.min(n,job),a=Math.max(a,job),o=Math.min(o,kob),s=Math.max(s,kob),gob.failed()||(i=Bob(i,n,o,a,s)),void(gob.failed()||gob.popthenPush(3,i)))))}function wob(){var e;if(e=nob(gob.stackObjectValue(0)),gob.failed())return null;gob.pop(1),gob.pushBool(1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&1===e[4]&&0===e[5])}function xob(){var e;if(e=nob(gob.stackObjectValue(0)),gob.failed())return null;gob.pop(1),gob.pushBool(1===e[0]&&0===e[1]&&0===e[3]&&1===e[4])}function yob(){var e;if(oob(gob.stackObjectValue(0)),e=nob(gob.stackObjectValue(1)),gob.failed())return null;rob(e),Aob(2)}function zob(){var e,t,i,r,a,s,n,o,u,l,c;return i=gob.stackObjectValue(0),c=gob.stackObjectValue(1),r=nob(gob.stackObjectValue(2)),gob.failed()?null:eob(c)!==eob(i)||!gob.isPointers(c)||2!==fob(c)?gob.primitiveFail():(oob(gob.fetchPointerofObject(0,c)),gob.failed()?null:(u=hob,l=iob,rob(r),n=a=job,o=s=kob,oob(gob.fetchPointerofObject(1,c)),gob.failed()?null:(e=hob,t=iob,rob(r),n=Math.min(n,job),a=Math.max(a,job),o=Math.min(o,kob),s=Math.max(s,kob),hob=e,iob=l,rob(r),n=Math.min(n,job),a=Math.max(a,job),o=Math.min(o,kob),s=Math.max(s,kob),hob=u,iob=t,rob(r),n=Math.min(n,job),a=Math.max(a,job),i=Bob(i,n,o=Math.min(o,kob),a,s=Math.max(s,kob)),void(gob.failed()||gob.popthenPush(3,i)))))}function Aob(e){return kob+=.5,sob(job+=.5)&&sob(kob)?void gob.popthenPush(e,gob.makePointwithxValueyValue(0|job,0|kob)):gob.primitiveFail()}function Bob(e,t,i,r,a){var s,n,o,u,l,c,f;return sob(u=t+.5)&&sob(n=r+.5)&&sob(l=i+.5)&&sob(o=a+.5)?(gob.pushRemappableOop(e),c=gob.makePointwithxValueyValue(0|u,0|l),gob.pushRemappableOop(c),s=gob.makePointwithxValueyValue(0|n,0|o),c=gob.popRemappableOop(),f=gob.popRemappableOop(),gob.storePointerofObjectwithValue(0,f,c),gob.storePointerofObjectwithValue(1,f,s),f):gob.primitiveFail()}function Cob(e){return!1!=((gob=e).majorVersion()==cob)&&gob.minorVersion()>=dob}function Wpb(e,t){return e-(i=e,r=t,(0|Math.floor(i/r))*t)|0;var i,r}function $pb(e,t,i){var r,a,s;for(r=0;r<=3;r++)t[i+r-1]=255&(a=e,31<(s=8*(3-r))?0:a>>>s);return i+4}function _pb(e,t,i){return e<=223?(t[i-1]=e,i+1):e<=7935?(t[i-1]=224+(e>>8),t[i]=Wpb(e,256),i+2):(t[i-1]=255,$pb(e,t,i+1))}function aqb(){return Zpb}function bqb(){var e,t,i,r,a,s,n,o;if(Ypb.stackValue(3),e=Ypb.stackBytes(2),t=Ypb.stackBytes(1),i=Ypb.stackBytes(0),Ypb.failed())return null;for(n=e.length,o=t.length,s=1;s<=Math.min(n,o);s++)if((r=i[e[s-1]])!==(a=i[t[s-1]]))return r<a?Ypb.failed()||Ypb.popthenPush(4,1):Ypb.failed()||Ypb.popthenPush(4,3),null;return n===o?Ypb.failed()||Ypb.popthenPush(4,2):n<o?Ypb.failed()||Ypb.popthenPush(4,1):Ypb.failed()||Ypb.popthenPush(4,3),null}function cqb(){var e,t,i,r,a,s,n,o,u,l;if(Ypb.stackValue(2),e=Ypb.stackInt32Array(1),t=Ypb.stackBytes(0),Ypb.failed())return null;for(r=_pb(u=e.length,t,1),s=1;s<=u;){for(i=((l=e[s-1])>>>8&255)==(n=255&l)&&(l>>>16&255)==n&&(l>>>24&255)==n,a=s;a<u&&l===e[a];)++a;if(s<a)i?(t[(r=_pb(4*(a-s+1)+1,t,r))-1]=n,++r):r=$pb(l,t,r=_pb(4*(a-s+1)+2,t,r)),s=a+1;else if(i)t[(r=_pb(5,t,r))-1]=n,++r,++s;else{for(;a<u&&e[a-1]!==e[a];)++a;for(a===u&&++a,r=_pb(4*(a-s)+3,t,r),o=s;o<=a-1;o++)r=$pb(e[o-1],t,r);s=a}}return Ypb.failed()||Ypb.popthenPush(3,r-1),null}function dqb(){var e,t,i,r,a;if(Ypb.stackValue(2),e=Ypb.stackBytes(1),t=Ypb.stackUint16Array(0),Ypb.failed())return null;for(r=e.length,i=1;i<=r;i++)a=e[i-1],t[i-1]=127<a?a-256<<8:a<<8;if(Ypb.failed())return null;Ypb.pop(2)}function eqb(){var e,t,i,r,a,s,n,o,u,l,c,f,h;if(Ypb.stackValue(3),e=Ypb.stackInt32Array(2),t=Ypb.stackBytes(1),i=Ypb.stackIntegerValue(0),Ypb.failed())return null;for(o=i,n=t.length,l=1,h=e.length+1;o<=n;){if(r=t[o-1],++o,!(r<=223))if(r<=254)r=256*(r-224)+t[o-1],++o;else for(r=0,u=1;u<=4;u++)r=(r<<8)+t[o-1],++o;if(h<l+(f=r>>>2))return Ypb.primitiveFail(),null;if(1==(a=3&r))for(s=t[o-1],++o,s|=s<<8,s|=s<<16,u=1;u<=f;u++)e[l-1]=s,++l;if(2==a){for(s=0,u=1;u<=4;u++)s=s<<8|t[o-1],++o;for(u=1;u<=f;u++)e[l-1]=s,++l}if(3==a)for(c=1;c<=f;c++){for(s=0,u=1;u<=4;u++)s=s<<8|t[o-1],++o;e[l-1]=s,++l}}if(Ypb.failed())return null;Ypb.pop(3)}function fqb(){var e,t,i,r,a;if(Ypb.stackValue(3),e=Ypb.stackBytes(2),t=Ypb.stackBytes(1),i=Ypb.stackIntegerValue(0),Ypb.failed())return null;if(256!==t.length)return Ypb.failed()||Ypb.popthenPush(4,0),null;for(r=i,a=e.length;r<=a&&0===t[e[r-1]];)++r;return a<r?Ypb.failed()||Ypb.popthenPush(4,0):Ypb.failed()||Ypb.popthenPush(4,r),null}function gqb(){var e,t,i,r,a,s;if(Ypb.stackValue(4),e=Ypb.stackBytes(3),t=Ypb.stackBytes(2),i=Ypb.stackIntegerValue(1),r=Ypb.stackBytes(0),Ypb.failed())return null;if(0===e.length)return Ypb.failed()||Ypb.popthenPush(5,0),null;for(s=i;s<=t.length-e.length+1;s++)for(a=1;r[t[s+a-1-1]]===r[e[a-1]];){if(a===e.length)return Ypb.failed()||Ypb.popthenPush(5,s),null;++a}return Ypb.failed()||Ypb.popthenPush(5,0),null}function hqb(){var e,t,i,r,a;if(Ypb.stackValue(3),e=Ypb.stackIntegerValue(2),t=Ypb.stackBytes(1),i=Ypb.stackIntegerValue(0),Ypb.failed())return null;for(a=t.length,r=i;r<=a;r++)if(t[r-1]===e)return Ypb.failed()||Ypb.popthenPush(4,r),null;return Ypb.failed()||Ypb.popthenPush(4,0),null}function iqb(){var e,t,i,r,a,s;if(Ypb.stackValue(2),e=Ypb.stackBytes(1),t=Ypb.stackIntegerValue(0),Ypb.failed())return null;for(i=e.length,r=268435455&t,s=1;s<=i;s++)r=9741*(a=16383&(r+=e[s-1]))+16384*(9741*(r>>>14)+101*a&16383)&268435455;return Ypb.failed()||Ypb.popthenPush(3,r),null}function jqb(){var e,t,i,r,a;if(Ypb.stackValue(4),e=Ypb.stackBytes(3),t=Ypb.stackIntegerValue(2),i=Ypb.stackIntegerValue(1),r=Ypb.stackBytes(0),Ypb.failed())return null;for(a=t;a<=i;a++)e[a-1]=r[e[a-1]];if(Ypb.failed())return null;Ypb.pop(4)}function kqb(e){return!1!=((Ypb=e).majorVersion()==Tpb)&&Ypb.minorVersion()>=Upb}function Wrb(e){return e.pointers?e.pointers.length:e.words?e.words.length:e.bytes?e.bytes.length:0}function Xrb(e,t){return 0|Math.floor(e/t)}function Yrb(e,t){return e-Xrb(e,t)*t|0}function _rb(e,t,i,r,a){var s,n,o,u,l,c,f;n=Xrb(i,60),u=(1e3-r)*a,l=(1e3-Xrb(r*(s=Yrb(i,60)),60))*a,c=(1e3-Xrb(r*(60-s),60))*a,f=Xrb(1e3*a,3922),u=Xrb(u,3922),l=Xrb(l,3922),c=Xrb(c,3922),0===n&&(o=(f<<16)+(c<<8)+u),1===n&&(o=(l<<16)+(f<<8)+u),2===n&&(o=(u<<16)+(f<<8)+c),3===n&&(o=(u<<16)+(l<<8)+f),4===n&&(o=(c<<16)+(u<<8)+f),5===n&&(o=(f<<16)+(u<<8)+l),0===o&&(o=1),e[t]=o}function asb(e){return Zrb.success(Zrb.isWordsOrBytes(e)),Zrb.failed()?0:e.wordsAsFloat64Array()}function bsb(e){return Zrb.success(Zrb.isWords(e)),Zrb.failed()?0:e.words}function csb(){return $rb}function dsb(e,t,i,r,a){var s,n;return 0==(n=a-r)?0:(s=e===a?Xrb(60*(t-i),n):t===a?120+Xrb(60*(i-e),n):240+Xrb(60*(e-t),n))<0?s+360:s}function esb(e,t,i){var r,a;return 0===e?t:0===t?e:(0===(a=((r=1024-i)*(e>>>16&255)+i*(t>>>16&255)>>10<<16)+(r*(e>>>8&255)+i*(t>>>8&255)>>10<<8)+(r*(255&e)+i*(255&t)>>10))&&(a=1),a)}function fsb(e,t,i,r,a){var s,n,o,u,l,c,f;return(u=t>>>10)<-1||r<=u||(c=i>>>10)<-1||a<=c?0:(l=1023&t,-1===u&&(l=u=0),u===r-1&&(l=0),f=1023&i,-1===c&&(f=c=0),c===a-1&&(f=0),o=16777215&e[n=c*r+u],0<l&&(o=esb(o,16777215&e[n+1],l)),0===f?o:(s=16777215&e[n=(c+1)*r+u],0<l&&(s=esb(s,16777215&e[n+1],l)),esb(o,s,f)))}function gsb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m;if(n=Zrb.stackValue(2),l=Zrb.stackValue(1),d=Zrb.stackIntegerValue(0),s=bsb(n),u=bsb(l),p=Wrb(n),Zrb.success(Wrb(l)===p),Zrb.failed())return null;for(a=Xrb(p,d),m=1;m<=a-2;m++)for(b=1;b<=d-2;b++){for(o=h=r=e=0,i=-1;i<=1;i++)for(t=-1;t<=1;t++)0!=(f=16777215&s[(m+i)*d+(b+t)])&&(h+=f>>>16&255,r+=f>>>8&255,e+=255&f,++o);c=0===o?0:(Xrb(h,o)<<16)+(Xrb(r,o)<<8)+Xrb(e,o),u[m*d+b]=c}return Zrb.pop(3),0}function hsb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b;if(n=Zrb.stackValue(2),c=Zrb.stackValue(1),d=Zrb.stackIntegerValue(0),s=bsb(n),b=Wrb(n),l=bsb(c),Zrb.success(Wrb(c)===b),Zrb.failed())return null;for(a=0;a<=b-1;a++)0!=(f=16777215&s[a])&&((o=u=h=f>>>16&255)<(i=f>>>8&255)&&(o=i),o<(e=255&f)&&(o=e),i<u&&(u=i),e<u&&(u=e),r=dsb(h,i,e,u,o),p=0===o?0:Xrb(1e3*(o-u),o),t=Xrb(1e3*o,255),1e3<(t+=10*d)&&(t=1e3),t<0&&(t=0),_rb(l,a,r,p,t));return Zrb.pop(3),0}function isb(){var e,t,i,r,a,s,n,o,u,l,c,f=0,h=0;if(u=Zrb.stackValue(2),i=Zrb.stackValue(1),r=Zrb.stackIntegerValue(0),Zrb.success(Zrb.isWords(u)),Zrb.success(Zrb.isWords(i)),e=Xrb(2*Wrb(u),r),l=2*Wrb(i),Zrb.success(e<=l),Zrb.failed())return null;for(o=u.wordsAsInt16Array(),t=i.wordsAsInt16Array(),a=1;a<=e;a++){for(n=0,s=1;s<=r;s++)(c=o[f++])<0&&(c=0-c),n<c&&(n=c);t[h++]=n}return Zrb.pop(3),0}function jsb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d;if(n=Zrb.stackValue(7),o=Zrb.stackIntegerValue(6),s=Zrb.stackIntegerValue(5),c=Zrb.stackValue(4),f=Zrb.stackIntegerValue(3),l=Zrb.stackIntegerValue(2),t=Zrb.stackIntegerValue(1),i=Zrb.stackIntegerValue(0),a=bsb(n),u=bsb(c),Zrb.success(t+2*o<f),Zrb.success(i+2*s<l),Zrb.failed())return null;for(d=0;d<=s-1;d++)for(e=(i+2*d)*f+t,p=0;p<=o-1;p++)h=a[p+d*o],u[r=e+2*p]=h,u[r+1]=h,u[r+f]=h,u[r+f+1]=h;return Zrb.pop(8),0}function ksb(){var e,t,i,r,a,s,n,o=0,u=0;if(s=Zrb.stackValue(2),t=Zrb.stackValue(1),r=Zrb.booleanValueOf(Zrb.stackValue(0)),Zrb.success(Zrb.isWords(s)),Zrb.success(Zrb.isWords(t)),n=Wrb(s),Zrb.success(Wrb(t)>=n>>1),Zrb.failed())return null;for(a=s.wordsAsInt16Array(),e=t.wordsAsInt16Array(),r&&o++,i=1;i<=n;i++)e[u++]=a[o],o+=2;return Zrb.pop(3),0}function lsb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k;if(o=Zrb.stackValue(3),l=Zrb.stackValue(2),v=Zrb.stackIntegerValue(1),f=Zrb.stackIntegerValue(0),n=bsb(o),u=bsb(l),m=Wrb(o),Zrb.success(Wrb(l)===m),Zrb.failed())return null;for(s=Xrb(m,v),t=v>>1,i=(s=Xrb(m,v))>>1,p=f/100,g=0;g<=v-1;g++)for(k=0;k<=s-1;k++)r=(g-t)/t,a=(k-i)/i,b=(h=Math.pow(Math.sqrt(r*r+a*a),p))<=1?(e=Math.atan2(a,r),d=1024*(t+h*Math.cos(e)*t)|0,1024*(i+h*Math.sin(e)*i)|0):(d=1024*g,1024*k),c=fsb(n,d,b,v,s),u[k*v+g]=c;return Zrb.pop(4),0}function msb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k;if(o=bsb(Zrb.stackValue(11)),l=Zrb.stackIntegerValue(10),u=Zrb.stackIntegerValue(9),c=bsb(Zrb.stackValue(8)),h=Zrb.stackIntegerValue(7),f=Zrb.stackIntegerValue(6),m=Zrb.stackIntegerValue(5),v=Zrb.stackIntegerValue(4),a=Zrb.stackIntegerValue(3),s=Zrb.stackIntegerValue(2),r=Zrb.stackIntegerValue(1),t=Zrb.stackIntegerValue(0),Zrb.success(0<=m&&0<=v),Zrb.success(m+2*r<=l),Zrb.success(v+2*t<=u),Zrb.success(0<=a&&0<=s),Zrb.success(a+r<=h),Zrb.success(s+t<=f),Zrb.failed())return null;for(k=0;k<=t-1;k++)for(b=l*(v+2*k)+m,i=h*(s+k)+a,g=0;g<=r-1;g++)d=16711680&(p=o[b]),n=65280&p,e=255&p,d+=16711680&(p=o[b+1]),n+=65280&p,e+=255&p,d+=16711680&(p=o[b+l]),n+=65280&p,e+=255&p,d+=16711680&(p=o[b+l+1]),n+=65280&p,e+=255&p,c[i]=d>>>2&16711680|n>>>2&65280|e>>>2,b+=2,++i;return Zrb.pop(12),0}function nsb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S;if(o=bsb(Zrb.stackValue(11)),l=Zrb.stackIntegerValue(10),u=Zrb.stackIntegerValue(9),c=bsb(Zrb.stackValue(8)),h=Zrb.stackIntegerValue(7),f=Zrb.stackIntegerValue(6),v=Zrb.stackIntegerValue(5),g=Zrb.stackIntegerValue(4),a=Zrb.stackIntegerValue(3),s=Zrb.stackIntegerValue(2),r=Zrb.stackIntegerValue(1),t=Zrb.stackIntegerValue(0),Zrb.success(0<=v&&0<=g),Zrb.success(v+2*r<=l),Zrb.success(g+2*t<=u),Zrb.success(0<=a&&0<=s),Zrb.success(a+r<=h),Zrb.success(s+t<=f),Zrb.failed())return null;for(S=0;S<=t-1;S++)for(m=l*(g+2*S)+v,i=h*(s+S)+a,k=0;k<=r-1;k++)b=(16711680&(p=o[m]))+(16711680&(d=o[m+l+1]))>>>1&16711680,n=(65280&p)+(65280&d)>>>1&65280,e=(255&p)+(255&d)>>>1,c[i]=n|e|b,m+=2,++i;return Zrb.pop(12),0}function osb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d;if(s=Zrb.stackValue(2),l=Zrb.stackValue(1),p=Zrb.stackIntegerValue(0),a=bsb(s),d=Wrb(s),u=bsb(l),Zrb.success(Wrb(l)===d),Zrb.failed())return null;for(r=0;r<=d-1;r++)0!=(c=16777215&a[r])&&((n=o=f=c>>>16&255)<(i=c>>>8&255)&&(n=i),n<(e=255&c)&&(n=e),i<o&&(o=i),e<o&&(o=e),t=Xrb(1e3*n,255),h=0===n?0:Xrb(1e3*(n-o),n),t<110&&(t=110,h=1e3),h<90&&(h=90),_rb(u,r,Yrb((110===t||90===h?0:dsb(f,i,e,o,n))+p+36e7,360),h,t));return Zrb.pop(3),0}function psb(){var e,t,i,r,a,s,n;return t=Zrb.stackValue(3),a=Zrb.stackIntegerValue(2),s=Zrb.stackIntegerValue(1),n=Zrb.stackIntegerValue(0),e=bsb(t),r=Wrb(t),Zrb.failed()?null:(i=fsb(e,s,n,a,Xrb(r,a)),Zrb.pop(5),Zrb.pushInteger(i),0)}function qsb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d;if(s=Zrb.stackValue(2),l=Zrb.stackValue(1),p=Zrb.stackIntegerValue(0),a=bsb(s),d=Wrb(s),u=bsb(l),Zrb.success(Wrb(l)===d),Zrb.failed())return null;for(r=0;r<=d-1;r++)(c=16777215&a[r])<2||((n=o=f=c>>>16&255)<(i=c>>>8&255)&&(n=i),n<(e=255&c)&&(n=e),i<o&&(o=i),e<o&&(o=e),t=Xrb(1e3*n,255),0<(h=0===n?0:Xrb(1e3*(n-o),n))&&(1e3<(h+=10*p)&&(h=1e3),h<0&&(h=0),_rb(u,r,dsb(f,i,e,o,n),h,t)));return Zrb.pop(3),0}function rsb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y,j,I,O;if(i=Zrb.stackValue(5),r=Zrb.stackIntegerValue(4),t=Zrb.stackIntegerValue(3),u=Zrb.stackValue(2),c=Zrb.stackIntegerValue(1),o=Zrb.stackIntegerValue(0),Zrb.success(Wrb(i)===r*t),Zrb.success(Wrb(u)===c*o),e=bsb(i),n=bsb(u),Zrb.failed())return null;for(a=s=0,I=Xrb(1024*r,c),O=Xrb(1024*t,o),h=0;h<=o-1;h++){for(f=a=0;f<=c-1;f++)k=(1024-(1023&a))*(1024-(1023&s)),S=(1023&a)*(1024-(1023&s)),y=(1024-(1023&a))*(1023&s),j=(1023&a)*(1023&s),p=e[v=(s>>>10)*r+(a>>>10)],d=a>>>10<r-1?e[v+1]:p,s>>>10<t-1&&(v+=r),b=e[v],m=a>>>10<r-1?e[v+1]:b,(g=0)===p&&(p=d,g+=k),0===d&&(d=p,g+=S),0===b&&(b=m,g+=y),0===m&&(m=b,g+=j),0===p&&(p=b,d=m),0===b&&(b=p,m=d),l=0,g<5e5&&(l=((v=k*(p>>>16&255)+S*(d>>>16&255)+y*(b>>>16&255)+j*(m>>>16&255))>>>20&255)<<16,l|=((v=k*(p>>>8&255)+S*(d>>>8&255)+y*(b>>>8&255)+j*(m>>>8&255))>>>20&255)<<8,0===(l|=(v=k*(255&p)+S*(255&d)+y*(255&b)+j*(255&m))>>>20&255)&&(l=1)),n[h*c+f]=l,a+=I;s+=O}return Zrb.pop(6),0}function ssb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y,j,I,O,_,V,F,P,w,T,W,A,C;if(g=Zrb.stackValue(5),j=Zrb.stackValue(4),W=Zrb.stackIntegerValue(3),v=bsb(g),y=bsb(j),i=Wrb(g),V=Zrb.stackIntegerValue(2),e=Zrb.stackValue(1),r=Zrb.stackValue(0),t=asb(e),a=asb(r),Zrb.success(Wrb(j)===i),Zrb.failed())return null;for(b=Xrb(i,W),s=Yrb(Math.random(),V)-1,F=0;F<=s/2-1;F++)for(A=Yrb(Math.random(),W),C=Yrb(Math.random(),b),O=Yrb(Math.random(),8),p=-4;p<=4;p++)for(d=-4;d<=4;d++)(o=p*p+d*d)<25&&0<o&&(c=C+d|0,0<(u=A+p|0)&&0<c&&c<b&&u<W&&(t[c*W+u]=O*(1-o/25)));for(h=1;h<=W-2;h++)for(n=1;n<=b-2;n++)t[w=n*W+h]=(a[w+1]+a[w-1]+a[w+W]+a[w-W]+a[w-1-W]/2+a[w-1+W]/2+a[w+1-W]/2+a[w+1+W]/2)/4-t[w],t[w]=.9*t[w];for(_=0;_<=W*b;_++)P=a[_],a[_]=t[_],t[_]=P;for(k=0;k<=b-1;k++)for(m=0;m<=W-1;m++)I=1<m&&m<W-1&&1<k&&k<b-1?((l=64*(t[T=k*W+m]-t[T-1]+(t[T+1]-t[T])))<2&&(l=-2),2<l&&(l=2),(f=(t[T]-t[T-W]+(t[T+W]-t[T]))/64)<2&&(f=-2),2<f&&(f=2),(S=(k+f)*W+(m+l)|0)<W*b&&0<=S?v[S]:v[m+k*W]):v[m+k*W],y[m+k*W]=I;return Zrb.pop(6),0}function tsb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y,j,I,O;if(f=Zrb.stackValue(3),p=Zrb.stackValue(2),j=Zrb.stackIntegerValue(1),s=Zrb.stackIntegerValue(0),c=bsb(f),h=bsb(p),S=Wrb(f),Zrb.success(Wrb(p)===S),Zrb.failed())return null;for(g=(t=j>>1)<(i=(l=Xrb(S,j))>>1)?(v=i/(b=t),1):(v=1,(b=i)<t?t/i:1),y=-3.141592653589793*s/180,m=b*b,I=0;I<=j-1;I++)for(O=0;O<=l-1;O++)(a=(n=v*(I-t))*n+(o=g*(O-i))*o)<m&&(e=(u=1-Math.sqrt(a)/b)*u*y,k=Math.sin(e),d=fsb(c,1024*(((r=Math.cos(e))*n-k*o)/v+t)|0,1024*((k*n+r*o)/g+i)|0,j,l),h[j*O+I]=d);return Zrb.pop(4),0}function usb(e){return!1!=((Zrb=e).majorVersion()==Urb)&&Zrb.minorVersion()>=Vrb}function SocketPlugin(){return{getModuleName:function(){return"SocketPlugin (http-only)"},interpreterProxy:null,primHandler:null,handleCounter:0,needProxy:new Set,status:0,lookupCache:{localhost:{address:[127,0,0,1],validUntil:Number.MAX_SAFE_INTEGER}},lastLookup:null,lookupSemaIdx:0,TCP_Socket_Type:0,Resolver_Uninitialized:0,Resolver_Ready:1,Resolver_Busy:2,Resolver_Error:3,Socket_InvalidSocket:-1,Socket_Unconnected:0,Socket_WaitingForConnection:1,Socket_Connected:2,Socket_OtherEndClosed:3,Socket_ThisEndClosed:4,setInterpreter:function(e){return this.interpreterProxy=e,this.primHandler=this.interpreterProxy.vm.primHandler,!0},_signalSemaphore:function(e){e<=0||this.primHandler.signalSemaphoreWithIndex(e)},_signalLookupSemaphore:function(){this._signalSemaphore(this.lookupSemaIdx)},_getAddressFromLookupCache:function(e,t){if(e){if(e.match(/^\d+\.\d+\.\d+\.\d+$/)){var i=e.split(".").map(function(e){return+e});if(i.every(function(e){return e<=255}))return new Uint8Array(i)}var r=this.lookupCache[e];if(r&&(t||r.validUntil>=Date.now()))return new Uint8Array(r.address)}return null},_addAddressFromResponseToLookupCache:function(e){if(e&&0===e.Status&&e.Question&&e.Answer){var t=function(e,t){e[t]&&e[t].replace&&(e[t]=e[t].replace(/\.$/,""))},i=e.Question[0];t(i,"name"),e.Answer.forEach(function(e){t(e,"name"),t(e,"data")});var r=i.name,a=null,s=86400;e.Answer.some(function(e){if(e.name===r){if(e.TTL&&(s=Math.min(s,e.TTL)),1===e.type)return a=e.data.split(".").map(function(e){return+e}),!0;5===e.type&&(r=e.data)}return!1})&&(this.lookupCache[i.name]={address:a,validUntil:Date.now()+1e3*s})}},_compareAddresses:function(e,i){return e.every(function(e,t){return i[t]===e})},_reverseLookupNameForAddress:function(t){var i=this,r=null;return Object.keys(this.lookupCache).some(function(e){return!!i._compareAddresses(t,i.lookupCache[e].address)&&(r=e,!0)}),r||t.join(".")},_newSocketHandle:function(e,t,i,r){var c=this;return{hostAddress:null,host:null,port:null,connSemaIndex:t,readSemaIndex:i,writeSemaIndex:r,webSocket:null,sendBuffer:null,sendTimeout:null,response:null,responseReadUntil:0,responseReceived:!1,status:c.Socket_Unconnected,_signalConnSemaphore:function(){c._signalSemaphore(this.connSemaIndex)},_signalReadSemaphore:function(){c._signalSemaphore(this.readSemaIndex)},_signalWriteSemaphore:function(){c._signalSemaphore(this.writeSemaIndex)},_otherEndClosed:function(){this.status=c.Socket_OtherEndClosed,this.webSocket=null,this._signalConnSemaphore()},_hostAndPort:function(){return this.host+":"+this.port},_requestNeedsProxy:function(){return c.needProxy.has(this._hostAndPort())},_getURL:function(e,t){var i="";(t||this._requestNeedsProxy())&&(i+="object"==typeof SqueakJS&&SqueakJS.options.proxy||"https://crossorigin.me/");return 443!==this.port?i+="http://"+this._hostAndPort()+e:i+="https://"+this.host+e,i},_performRequest:function(){if(this.webSocket)this._performWebSocketSend();else{var e=new TextDecoder("utf-8").decode(this.sendBuffer),t=this.sendBuffer.findIndex(function(e,t,i){return"\r"===i[t]&&"\r"===i[t+2]&&"\n"===i[t+1]&&"\n"===i[t+3]});this.sendBuffer=0<=t?this.sendBuffer.subarray(t+4):null;var i=e.split("\r\n\r\n")[0].split("\n"),r=i[0].split(" "),a=r[0];if("GET"!==a&&"PUT"!==a&&"POST"!==a)return this._otherEndClosed(),-1;for(var s=r[1],n=!1,o=!1,u=null,l=1;l<i.length;l++){var c=i[l];if(c.match(/Content-Length:/i)){var f=parseInt(c.substr(16)),h=this.sendBuffer.byteLength;u=this.sendBuffer.subarray(h-f,h)}else c.match(/Connection: Upgrade/i)?n=!0:c.match(/Upgrade: WebSocket/i)&&(o=!0)}"GET"===a&&n&&o?this._performWebSocketRequest(s,a,u,i):self.fetch?this._performFetchAPIRequest(s,a,u,i):this._performXMLHTTPRequest(s,a,u,i)}},_performFetchAPIRequest:function(i,r,a,s){for(var n=this,e={},t=1;t<s.length;t++){var o=s[t].split(":");2===o.length&&(e[o[0]]=o[1].trim())}"object"==typeof SqueakJS&&SqueakJS.options.ajax&&(e["X-Requested-With"]="XMLHttpRequest");var u={method:r,headers:e,body:a,mode:"cors"};fetch(this._getURL(i),u).then(n._handleFetchAPIResponse.bind(n)).catch(function(e){var t=n._getURL(i,!0);console.warn("Retrying with CORS proxy: "+t),fetch(t,u).then(function(e){console.log("Success: "+t),n._handleFetchAPIResponse(e),c.needProxy.add(n._hostAndPort())}).catch(function(e){console.warn("Fetch API failed, retrying with XMLHttpRequest"),n._performXMLHTTPRequest(i,r,a,s)})})},_handleFetchAPIResponse:function(e){if(null===this.response){var r=["HTTP/1.0 ",e.status," ",e.statusText,"\r\n"];e.headers.forEach(function(e,t,i){r=r.concat([t,": ",e,"\r\n"])}),r.push("\r\n"),this.response=[new TextEncoder("utf-8").encode(r.join(""))]}this._readIncremental(e.body.getReader())},_readIncremental:function(t){var i=this;return t.read().then(function(e){if(!e.done)return i.response.push(e.value),i._signalReadSemaphore(),i._readIncremental(t);i.responseReceived=!0})},_performXMLHTTPRequest:function(r,a,s,e){for(var t,n=this,i=1;i<e.length;i++){var o=e[i];if(o.match(/Content-Type:/i)){t=encodeURIComponent(o.substr(14));break}}var u=new XMLHttpRequest;u.open(a,this._getURL(r)),void 0!==t&&u.setRequestHeader("Content-type",t),"object"==typeof SqueakJS&&SqueakJS.options.ajax&&u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.responseType="arraybuffer",u.onload=function(e){n._handleXMLHTTPResponse(this)},u.onerror=function(e){var t=n._getURL(r,!0);console.warn("Retrying with CORS proxy: "+t);var i=new XMLHttpRequest;i.open(a,t),i.responseType=u.responseType,"object"==typeof SqueakJS&&SqueakJS.options.ajaxx&&i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.onload=function(e){console.log("Success: "+t),n._handleXMLHTTPResponse(this),c.needProxy.add(n._hostAndPort())},i.onerror=function(){n._otherEndClosed(),console.error("Failed to download:\n"+t)},i.send(s)},u.send(s)},_handleXMLHTTPResponse:function(e){this.responseReceived=!0;var t=e.response;if(t){var i=new TextEncoder("utf-8").encode("HTTP/1.0 "+e.status+" "+e.statusText+"\r\n"+e.getAllResponseHeaders()+"\r\n"),r=new Uint8Array(i.byteLength+t.byteLength);r.set(i,0),r.set(new Uint8Array(t),i.byteLength),this.response=[r],this._signalReadSemaphore()}else this._otherEndClosed()},_performWebSocketRequest:function(e,t,i,r){for(var a,s,n=this._getURL(e),o=1;o<r.length;o++){var u=r[o].split(":");if("Sec-WebSocket-Protocol"===u[0]){if(a=u[1].trim(),s)break}else if("Sec-WebSocket-Key"===u[0]&&(s=u[1].trim(),a))break}this.webSocket=new WebSocket(n.replace(/^http/,"ws"),a);var l=this;this.webSocket.onopen=function(){l.status!==c.Socket_Connected&&(l.status=c.Socket_Connected,l._signalConnSemaphore(),l._signalWriteSemaphore());var e=new Uint8Array(sha1.array(s+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11")),t=Squeak.bytesAsString(e);l._performWebSocketReceive("HTTP/1.1 101 Switching Protocols\r\nUpgrade: websocket\r\nConnection: Upgrade\r\nSec-WebSocket-Accept: "+btoa(t)+"\r\n\r\n",!0)},this.webSocket.onmessage=function(e){l._performWebSocketReceive(e.data)},this.webSocket.onerror=function(e){l._otherEndClosed(),console.error("Error in WebSocket:",e)},this.webSocket.onclose=function(){l._otherEndClosed()}},_performWebSocketReceive:function(e,t){var i=!e.substr;if(i||(e=new TextEncoder("utf-8").encode(e)),!t){var r,a=2+e.length+4;r=e.byteLength<126?e.length:e.byteLength<65535?(a+=2,126):(a+=8,127);var s,n=new Uint8Array(a);n[0]=i?130:129,n[1]=128|r,s=126===r?(n[2]=e.length>>>8,n[3]=255&e.length,4):127===r?(n[2]=e.length>>>56,n[3]=e.length>>>48&255,n[4]=e.length>>>40&255,n[5]=e.length>>>32&255,n[6]=e.length>>>24&255,n[7]=e.length>>>16&255,n[8]=e.length>>>8&255,n[9]=255&e.length,10):2;var o=new Uint8Array(4);n.set(o,s),s+=4;var u=e;n.set(u,s),e=n}this.response&&this.response.length?this.response.push(e):this.response=[e],this.responseReceived=!0,this._signalReadSemaphore()},_performWebSocketSend:function(){var e,t=15&this.sendBuffer[0];if(0==t)return console.error("No support for WebSocket frame continuation yet!"),!0;if(1==t)e=!1;else{if(2!=t)return 8==t?(this.webSocket.close(),void(this.webSocket=null)):9==t||10==t?void 0:void console.error("Unsupported WebSocket frame opcode "+t);e=!0}var i,r,a=this.sendBuffer[1],s=a>>>7,n=127&a;i=126===n?(n=this.sendBuffer[2]<<8|this.sendBuffer[3],4):127===n?(n=this.sendBuffer[2]<<56|this.sendBuffer[3]<<48|this.sendBuffer[4]<<40|this.sendBuffer[5]<<32|this.sendBuffer[6]<<24|this.sendBuffer[7]<<16|this.sendBuffer[8]<<8|this.sendBuffer[9],10):2,s&&(r=this.sendBuffer.subarray(i,i+4),i+=4);var o,u=this.sendBuffer.subarray(i,i+n);i+=n,s&&(u=u.map(function(e,t){return e^r[3&t]})),o=e?u:Squeak.bytesAsString(u),this.sendBuffer=this.sendBuffer.subarray(i),this.webSocket.send(o),0<this.sendBuffer.byteLength&&this._performWebSocketSend()},connect:function(e,t){this.hostAddress=e,this.host=c._reverseLookupNameForAddress(e),this.port=t,this.status=c.Socket_Connected,this._signalConnSemaphore(),this._signalWriteSemaphore()},close:function(){this.status!=c.Socket_Connected&&this.status!=c.Socket_OtherEndClosed&&this.status!=c.Socket_WaitingForConnection||(this.webSocket&&(this.webSocket.close(),this.webSocket=null),this.status=c.Socket_Unconnected,this._signalConnSemaphore())},destroy:function(){this.status=c.Socket_InvalidSocket},dataAvailable:function(){if(this.status==c.Socket_InvalidSocket)return!1;if(this.status==c.Socket_Connected){if(this.webSocket)return this.response&&0<this.response.length;if(this.response&&0<this.response.length)return this._signalReadSemaphore(),!0;this.responseSentCompletly&&(this.status=c.Socket_OtherEndClosed,this._signalConnSemaphore())}return!1},recv:function(e){if(null===this.response)return[];var t=this.response[0];if(t.length>e){var i=t.subarray(e);i?this.response[0]=i:this.response.shift(),t=t.subarray(0,e)}else this.response.shift();return this.responseReceived&&0===this.response.length&&!this.webSocket&&(this.responseSentCompletly=!0),t},send:function(e,t,i){null!==this.sendTimeout&&self.clearTimeout(this.sendTimeout),this.lastSend=Date.now();var r=e.bytes.subarray(t,i);if(null===this.sendBuffer)this.sendBuffer=r.slice();else{var a=this.sendBuffer.byteLength+r.byteLength,s=new Uint8Array(a);s.set(this.sendBuffer,0),s.set(r,this.sendBuffer.byteLength),this.sendBuffer=s}return this.sendTimeout=self.setTimeout(this._performRequest.bind(this),50),r.byteLength}}},primitiveHasSocketAccess:function(e){return this.interpreterProxy.popthenPush(e+1,this.interpreterProxy.trueObject()),!0},primitiveInitializeNetwork:function(e){return 1===e&&(this.lookupSemaIdx=this.interpreterProxy.stackIntegerValue(0),this.status=this.Resolver_Ready,this.interpreterProxy.pop(e),!0)},primitiveResolverNameLookupResult:function(e){if(0!==e)return!1;if(!this.lastLookup||!this.lastLookup.substr)return this.interpreterProxy.popthenPush(e+1,this.interpreterProxy.nilObject()),!0;var t=this._getAddressFromLookupCache(this.lastLookup,!0);return this.interpreterProxy.popthenPush(e+1,t?this.primHandler.makeStByteArray(t):this.interpreterProxy.nilObject()),!0},primitiveResolverStartNameLookup:function(e){if(1!==e)return!1;var t=this.lastLookup=this.interpreterProxy.stackValue(0).bytesAsString();if(this._getAddressFromLookupCache(t,!1))this.status=this.Resolver_Ready,this._signalLookupSemaphore();else{var i="https://9.9.9.9:5053/dns-query?name="+encodeURIComponent(this.lastLookup)+"&type=A",r=!1;if(self.fetch){var a=this;self.fetch(i,{method:"GET",mode:"cors",credentials:"omit",cache:"no-store",referrer:"no-referrer",referrerPolicy:"no-referrer"}).then(function(e){return e.json()}).then(function(e){a._addAddressFromResponseToLookupCache(e)}).catch(function(e){console.error("Name lookup failed",e)}).then(function(){t===a.lastLookup&&(a.status=a.Resolver_Ready,a._signalLookupSemaphore())}),r=!0}else{a=this;var s=function(){t===a.lastLookup&&(a.status=a.Resolver_Ready,a._signalLookupSemaphore())},n=new XMLHttpRequest;n.open("GET",i,!0),n.timeout=2e3,n.responseType="json",n.onload=function(e){a._addAddressFromResponseToLookupCache(this.response),s()},n.onerror=function(){console.error("Name lookup failed",n.statusText),s()},n.send(),r=!0}r&&(this.status=this.Resolver_Busy,this._signalLookupSemaphore())}return this.interpreterProxy.popthenPush(e+1,this.interpreterProxy.nilObject()),!0},primitiveResolverAddressLookupResult:function(e){if(0!==e)return!1;if(!this.lastLookup||!this.lastLookup.every)return this.interpreterProxy.popthenPush(e+1,this.interpreterProxy.nilObject()),!0;var t=this._reverseLookupNameForAddress(this.lastLookup),i=this.primHandler.makeStString(t);return this.interpreterProxy.popthenPush(e+1,i),!0},primitiveResolverStartAddressLookup:function(e){return 1===e&&(this.lastLookup=this.interpreterProxy.stackBytes(0),this.interpreterProxy.popthenPush(e+1,this.interpreterProxy.nilObject()),this.status=this.Resolver_Ready,this._signalLookupSemaphore(),!0)},primitiveResolverStatus:function(e){return 0===e&&(this.interpreterProxy.popthenPush(e+1,this.status),!0)},primitiveResolverAbortLookup:function(e){return 0===e&&(this.lastLookup=null,this.status=this.Resolver_Ready,this._signalLookupSemaphore(),this.interpreterProxy.popthenPush(e+1,this.interpreterProxy.nilObject()),!0)},primitiveSocketRemoteAddress:function(e){if(1!==e)return!1;var t=this.interpreterProxy.stackObjectValue(0).handle;return void 0!==t&&(this.interpreterProxy.popthenPush(e+1,t.hostAddress?this.primHandler.makeStByteArray(t.hostAddress):this.interpreterProxy.nilObject()),!0)},primitiveSocketRemotePort:function(e){if(1!==e)return!1;var t=this.interpreterProxy.stackObjectValue(0).handle;return void 0!==t&&(this.interpreterProxy.popthenPush(e+1,t.port),!0)},primitiveSocketConnectionStatus:function(e){if(1!==e)return!1;var t=this.interpreterProxy.stackObjectValue(0).handle;if(void 0===t)return!1;var i=t.status;return void 0===i&&(i=this.Socket_InvalidSocket),this.interpreterProxy.popthenPush(e+1,i),!0},primitiveSocketConnectToPort:function(e){if(3!==e)return!1;var t=this.interpreterProxy.stackObjectValue(2).handle;if(void 0===t)return!1;var i=this.interpreterProxy.stackBytes(1),r=this.interpreterProxy.stackIntegerValue(0);return t.connect(i,r),this.interpreterProxy.popthenPush(e+1,this.interpreterProxy.nilObject()),!0},primitiveSocketCloseConnection:function(e){if(1!==e)return!1;var t=this.interpreterProxy.stackObjectValue(0).handle;return void 0!==t&&(t.close(),this.interpreterProxy.popthenPush(e+1,this.interpreterProxy.nilObject()),!0)},primitiveSocketCreate3Semaphores:function(e){if(7!==e)return!1;var t=this.interpreterProxy.stackIntegerValue(0),i=this.interpreterProxy.stackIntegerValue(1),r=this.interpreterProxy.stackIntegerValue(2),a=this.interpreterProxy.stackIntegerValue(3);if(this.interpreterProxy.stackIntegerValue(5)!==this.TCP_Socket_Type)return!1;var s="{SqueakJS Socket #"+ ++this.handleCounter+"}",n=this.primHandler.makeStString(s);return n.handle=this._newSocketHandle(a,r,i,t),this.interpreterProxy.popthenPush(e+1,n),!0},primitiveSocketDestroy:function(e){if(1!==e)return!1;var t=this.interpreterProxy.stackObjectValue(0).handle;return void 0!==t&&(t.destroy(),this.interpreterProxy.popthenPush(e+1,t.status),!0)},primitiveSocketReceiveDataAvailable:function(e){if(1!==e)return!1;var t=this.interpreterProxy.stackObjectValue(0).handle;if(void 0===t)return!1;var i=this.interpreterProxy.falseObject();return t.dataAvailable()&&(i=this.interpreterProxy.trueObject()),this.interpreterProxy.popthenPush(e+1,i),!0},primitiveSocketReceiveDataBufCount:function(e){if(4!==e)return!1;var t=this.interpreterProxy.stackObjectValue(3).handle;if(void 0===t)return!1;var i=this.interpreterProxy.stackObjectValue(2),r=this.interpreterProxy.stackIntegerValue(1)-1,a=this.interpreterProxy.stackIntegerValue(0);if(r+a>i.bytes.length)return!1;var s=t.recv(a);return i.bytes.set(s,r),this.interpreterProxy.popthenPush(e+1,s.length),!0},primitiveSocketSendDataBufCount:function(e){if(4!==e)return!1;var t=this.interpreterProxy.stackObjectValue(3).handle;if(void 0===t)return!1;var i=this.interpreterProxy.stackObjectValue(2),r=this.interpreterProxy.stackIntegerValue(1)-1;if(r<0)return!1;var a=r+this.interpreterProxy.stackIntegerValue(0);if(a>i.length)return!1;var s=t.send(i,r,a);return this.interpreterProxy.popthenPush(e+1,s),!0},primitiveSocketSendDone:function(e){return 1===e&&(this.interpreterProxy.popthenPush(e+1,this.interpreterProxy.trueObject()),!0)},primitiveSocketListenWithOrWithoutBacklog:function(e){return!(e<2)&&(this.interpreterProxy.popthenPush(e+1,this.interpreterProxy.nilObject()),!0)}}}function registerSocketPlugin(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("SocketPlugin",SocketPlugin()):self.setTimeout(registerSocketPlugin,100)}function SpeechPlugin(){return{getModuleName:function(){return"SpeechPlugin"},interpreterProxy:null,primHandler:null,voiceInput:null,semaphoreIndex:null,shouldListen:!1,recognition:null,synth:self.speechSynthesis,setInterpreter:function(e){return this.interpreterProxy=e,this.primHandler=this.interpreterProxy.vm.primHandler,!0},primitiveSpeak:function(e){var t,i;if(1===e)t=this.interpreterProxy.stackValue(0).bytesAsString();else{if(2!==e)return!1;t=this.interpreterProxy.stackValue(1).bytesAsString();var r=this.interpreterProxy.stackValue(0).bytesAsString();i=this.synth.getVoices().filter(function(e){return e.name===r})}var a=new SpeechSynthesisUtterance(t);return i&&0<i.length&&(a.voice=i[0]),this.synth.speak(a),this.interpreterProxy.pop(e),!0},primitiveRegisterSemaphore:function(e){return 1===e&&(this.semaphoreIndex=this.interpreterProxy.stackIntegerValue(0),!0)},primitiveUnregisterSemaphore:function(e){return 0===e&&!(this.semaphoreIndex=null)},primitiveGetLastRecognitionResult:function(e){if(0!==e)return!1;if(null===this.semaphoreIndex)return!1;if(null===this.voiceInput)return!1;var t=this.primHandler.makeStArray(this.voiceInput);return this.voiceInput=[],this.interpreterProxy.popthenPush(1,t),!0},primitiveStartListening:function(e){return 0===e&&(this.recognition=new webkitSpeechRecognition,this.recognition.lang="en-US",this.recognition.interimResults=!0,this.recognition.onresult=this._onRecognitionResult.bind(this),this.recognition.onerror=function(e){console.log(e)},this.recognition.onend=function(e){this.shouldListen&&this.recognition.start()}.bind(this),this.shouldListen=!0,this.recognition.start(),!0)},_onRecognitionResult:function(e){this.voiceInput=[];for(var t=e.resultIndex;t<e.results.length;t++){for(var i=e.results[t],r=[i.isFinal,[]],a=0;a<i.length;a++){var s=i[a].transcript;r[1].push([s,i[a].confidence])}0<r[1].length&&this.voiceInput.push(r)}null!==this.semaphoreIndex&&0<this.voiceInput.length&&this.primHandler.signalSemaphoreWithIndex(this.semaphoreIndex)},primitiveStopListening:function(e){return 0===e&&(this.voiceInput=[],this.recognition.stop(),!(this.shouldListen=!1))}}}function registerSpeechPlugin(){"object"==typeof Squeak&&Squeak.registerExternalModule?"webkitSpeechRecognition"in self?Squeak.registerExternalModule("SpeechPlugin",SpeechPlugin()):console.warn("SpeechPlugin: Web Speech API is not supported by this browser."):self.setTimeout(registerSpeechPlugin,100)}function SqueakSSL(){return{getModuleName:function(){return"SqueakSSL (fake)"},interpreterProxy:null,primHandler:null,handleCounter:0,SQSSL_OK:0,SQSSL_NEED_MORE_DATA:-1,SQSSL_INVALID_STATE:-2,SQSSL_BUFFER_TOO_SMALL:-3,SQSSL_INPUT_TOO_LARGE:-4,SQSSL_GENERIC_ERROR:-5,SQSSL_OUT_OF_MEMORY:-6,SQSSL_PROP_VERSION:0,SQSSL_PROP_LOGLEVEL:1,SQSSL_PROP_SSLSTATE:2,SQSSL_PROP_CERTSTATE:3,SQSSL_PROP_PEERNAME:0,SQSSL_PROP_CERTNAME:1,SQSSL_PROP_SERVERNAME:2,setInterpreter:function(e){return this.interpreterProxy=e,this.primHandler=this.interpreterProxy.vm.primHandler,!0},primitiveCreate:function(e){var t="{SqueakJS SSL #"+ ++this.handleCounter+"}",i=this.primHandler.makeStString(t);return i.handle=!0,this.interpreterProxy.popthenPush(e,i),!0},primitiveConnect:function(e){return 5===e&&(this.interpreterProxy.popthenPush(e,0),!0)},primitiveDestroy:function(e){return 1===e&&(this.interpreterProxy.popthenPush(1,1),!0)},primitiveGetIntProperty:function(e){return 2===e&&(void 0!==this.interpreterProxy.stackObjectValue(1).handle&&(t=this.interpreterProxy.stackIntegerValue(0)===this.SQSSL_PROP_CERTSTATE?this.SQSSL_OK:0,this.interpreterProxy.popthenPush(e,t),!0));var t},primitiveGetStringProperty:function(e){return 2===e&&(void 0!==this.interpreterProxy.stackObjectValue(1).handle&&(t=this.interpreterProxy.stackIntegerValue(0)===this.SQSSL_PROP_PEERNAME?this.primHandler.makeStString("*"):this.interpreterProxy.nilObject(),this.interpreterProxy.popthenPush(e,t),!0));var t},primitiveEncrypt:function(e){if(5!==e)return!1;if(void 0===this.interpreterProxy.stackObjectValue(4).handle)return!1;var t=this.interpreterProxy.stackObjectValue(3),i=(this.interpreterProxy.stackIntegerValue(2),this.interpreterProxy.stackIntegerValue(1));return this.interpreterProxy.stackObjectValue(0).bytes=t.bytes,this.interpreterProxy.popthenPush(e,i),!0},primitiveDecrypt:function(e){if(5!==e)return!1;if(void 0===this.interpreterProxy.stackObjectValue(4).handle)return!1;var t=this.interpreterProxy.stackObjectValue(3),i=(this.interpreterProxy.stackIntegerValue(2),this.interpreterProxy.stackIntegerValue(1));return this.interpreterProxy.stackObjectValue(0).bytes=t.bytes,this.interpreterProxy.popthenPush(e,i),!0}}}function registerSqueakSSL(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("SqueakSSL",SqueakSSL()):self.setTimeout(registerSqueakSSL,100)}function NCb(e,t){return e-(i=e,r=t,(0|Math.floor(i/r))*t)|0;var i,r}function UCb(){return TCb}function VCb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g;if(e=SCb.stackValue(3),t=SCb.stackInt16Array(2),i=SCb.stackIntegerValue(1),r=SCb.stackIntegerValue(0),v=SCb.fetchInt32ArrayofObject(7,e),g=SCb.fetchInt32ArrayofObject(8,e),m=SCb.fetchIntegerofObject(9,e),p=SCb.fetchIntegerofObject(10,e),h=SCb.fetchIntegerofObject(11,e),d=SCb.fetchInt16ArrayofObject(12,e),b=SCb.fetchInt16ArrayofObject(13,e),SCb.failed())return null;for(l=i;l<=i+r-1;l++){for(a=s=0,f=1;f<=m;f++)(n=h-v[f-1])<1&&(n+=p),a+=(c=g[f-1])*d[n-1],s+=c*b[n-1];32767<(u=t[(o=2*l-1)-1]+(a>>15))&&(u=32767),u<-32767&&(u=-32767),t[o-1]=u,d[h-1]=u,32767<(u=t[++o-1]+(s>>15))&&(u=32767),u<-32767&&(u=-32767),t[o-1]=u,b[h-1]=u,h=NCb(h,p)+1}if(SCb.failed())return null;SCb.storeIntegerofObjectwithValue(11,e,h),SCb.pop(3)}function WCb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y,j,I;if(e=SCb.stackValue(5),t=SCb.stackIntegerValue(4),i=SCb.stackInt16Array(3),r=SCb.stackIntegerValue(2),a=SCb.stackIntegerValue(1),s=SCb.stackIntegerValue(0),k=SCb.fetchIntegerofObject(3,e),S=SCb.fetchIntegerofObject(4,e),y=SCb.fetchIntegerofObject(5,e),p=SCb.fetchIntegerofObject(7,e),I=SCb.fetchInt16ArrayofObject(8,e),j=SCb.fetchIntegerofObject(9,e),b=SCb.fetchIntegerofObject(10,e),m=SCb.fetchIntegerofObject(11,e),d=SCb.fetchIntegerofObject(14,e),v=SCb.fetchIntegerofObject(15,e),g=SCb.fetchIntegerofObject(16,e),SCb.failed())return null;for(n=0!==d&&0!==g,u=r+t-1,h=r;h<=u;h++)f=k*I[b>>15]>>15,n?(l=d*I[v>>15],(v=NCb(v+g,j))<0&&(v+=j),(b=NCb(b+m+l,j))<0&&(b+=j)):b=NCb(b+m,j),0<a&&(32767<(c=i[(o=2*h-1)-1]+(f*a>>15))&&(c=32767),c<-32767&&(c=-32767),i[o-1]=c),0<s&&(32767<(c=i[(o=2*h)-1]+(f*s>>15))&&(c=32767),c<-32767&&(c=-32767),i[o-1]=c),0!==S&&(k+=S,(0<S&&y<=k||S<0&&k<=y)&&(k=y,S=0));if(p-=t,SCb.failed())return null;SCb.storeIntegerofObjectwithValue(3,e,k),SCb.storeIntegerofObjectwithValue(4,e,S),SCb.storeIntegerofObjectwithValue(7,e,p),SCb.storeIntegerofObjectwithValue(10,e,b),SCb.storeIntegerofObjectwithValue(15,e,v),SCb.pop(5)}function XCb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y,j,I,O,_,V,F,P,w;if(e=SCb.stackValue(5),t=SCb.stackIntegerValue(4),i=SCb.stackInt16Array(3),r=SCb.stackIntegerValue(2),a=SCb.stackIntegerValue(1),s=SCb.stackIntegerValue(0),F=SCb.fetchIntegerofObject(3,e),P=SCb.fetchIntegerofObject(4,e),w=SCb.fetchIntegerofObject(5,e),g=SCb.fetchIntegerofObject(7,e),j=SCb.fetchIntegerofObject(8,e),S=SCb.fetchInt16ArrayofObject(10,e),I=SCb.fetchInt16ArrayofObject(11,e),k=SCb.fetchIntegerofObject(16,e),y=SCb.fetchIntegerofObject(17,e),V=SCb.fetchIntegerofObject(18,e),O=SCb.fetchIntegerofObject(19,e),_=SCb.fetchIntegerofObject(20,e),SCb.failed())return null;for(l=S!==I,n=a*F>>15,o=s*F>>15,u=2*r-1,c=r+t-1,v=r;v<=c;v++){if(y<(m=(O+=_)>>9)&&j<g&&(m=(O-=V)>>9),(p=m+1)>k){if(k<m)return g=0,SCb.failed()||(SCb.storeIntegerofObjectwithValue(3,e,F),SCb.storeIntegerofObjectwithValue(4,e,P),SCb.storeIntegerofObjectwithValue(7,e,g),SCb.storeIntegerofObjectwithValue(19,e,O),SCb.popthenPush(6,null)),null;p=0===V?m:1+(O-V>>9)}h=O&OCb,d=f=S[m-1]*(PCb-h)+S[p-1]*h>>9,l&&(d=I[m-1]*(PCb-h)+I[p-1]*h>>9),0<a&&(32767<(b=i[u-1]+(n*f>>15))&&(b=32767),b<-32767&&(b=-32767),i[u-1]=b),++u,0<s&&(32767<(b=i[u-1]+(o*d>>15))&&(b=32767),b<-32767&&(b=-32767),i[u-1]=b),++u,0!==P&&(F+=P,(0<P&&w<=F||P<0&&F<=w)&&(F=w,P=0),n=a*F>>15,o=s*F>>15)}if(g-=t,SCb.failed())return null;SCb.storeIntegerofObjectwithValue(3,e,F),SCb.storeIntegerofObjectwithValue(4,e,P),SCb.storeIntegerofObjectwithValue(7,e,g),SCb.storeIntegerofObjectwithValue(19,e,O),SCb.pop(5)}function YCb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y;if(e=SCb.stackValue(5),t=SCb.stackIntegerValue(4),i=SCb.stackInt16Array(3),r=SCb.stackIntegerValue(2),a=SCb.stackIntegerValue(1),s=SCb.stackIntegerValue(0),k=SCb.fetchIntegerofObject(3,e),S=SCb.fetchIntegerofObject(4,e),y=SCb.fetchIntegerofObject(5,e),d=SCb.fetchIntegerofObject(7,e),b=SCb.fetchInt16ArrayofObject(8,e),m=SCb.fetchIntegerofObject(9,e),v=SCb.fetchIntegerofObject(10,e),g=SCb.fetchIntegerofObject(11,e),SCb.failed())return null;for(u=r+t-1,h=f=m,p=r;p<=u;p++)g<=(f=h+v)&&(f=QCb+(f-g)),n=b[(h>>15)-1]+b[(f>>15)-1]>>1,c=(b[(h>>15)-1]=n)*k>>15,h=f,0<a&&(32767<(l=i[(o=2*p-1)-1]+(c*a>>15))&&(l=32767),l<-32767&&(l=-32767),i[o-1]=l),0<s&&(32767<(l=i[(o=2*p)-1]+(c*s>>15))&&(l=32767),l<-32767&&(l=-32767),i[o-1]=l),0!==S&&(k+=S,(0<S&&y<=k||S<0&&k<=y)&&(k=y,S=0));if(m=f,d-=t,SCb.failed())return null;SCb.storeIntegerofObjectwithValue(3,e,k),SCb.storeIntegerofObjectwithValue(4,e,S),SCb.storeIntegerofObjectwithValue(7,e,d),SCb.storeIntegerofObjectwithValue(9,e,m),SCb.pop(5)}function ZCb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y;if(e=SCb.stackValue(5),t=SCb.stackIntegerValue(4),i=SCb.stackInt16Array(3),r=SCb.stackIntegerValue(2),a=SCb.stackIntegerValue(1),s=SCb.stackIntegerValue(0),k=SCb.fetchIntegerofObject(3,e),S=SCb.fetchIntegerofObject(4,e),y=SCb.fetchIntegerofObject(5,e),p=SCb.fetchIntegerofObject(7,e),b=SCb.fetchInt16ArrayofObject(8,e),m=SCb.fetchIntegerofObject(10,e),g=SCb.fetchIntegerofObject(11,e),d=SCb.fetchIntegerofObject(12,e),v=SCb.fetchIntegerofObject(13,e),SCb.failed())return null;for(o=r+t-1,u=r,h=d+(g>>>16);h<=m&&u<=o;)f=b[h-1]*k>>15,0<a&&(32767<(c=i[(n=2*u-1)-1]+(f*a>>15))&&(c=32767),c<-32767&&(c=-32767),i[n-1]=c),0<s&&(32767<(c=i[(n=2*u)-1]+(f*s>>15))&&(c=32767),c<-32767&&(c=-32767),i[n-1]=c),0!==S&&(k+=S,(0<S&&y<=k||S<0&&k<=y)&&(k=y,S=0)),RCb<=(g+=v)&&(d+=l=g>>>16,g-=l<<16),h=d+(g>>>16),++u;if(p-=t,SCb.failed())return null;SCb.storeIntegerofObjectwithValue(3,e,k),SCb.storeIntegerofObjectwithValue(4,e,S),SCb.storeIntegerofObjectwithValue(7,e,p),SCb.storeIntegerofObjectwithValue(11,e,g),SCb.storeIntegerofObjectwithValue(12,e,d),SCb.pop(5)}function $Cb(e){return!1!=((SCb=e).majorVersion()==KCb)&&SCb.minorVersion()>=LCb}function sFb(e){return e.pointers?e.pointers.length:e.words?e.words.length:e.bytes?e.bytes.length:0}function tFb(e,t){return 0|Math.floor(e/t)}function xFb(e){return vFb.success(vFb.isWords(e)),vFb.failed()?0:e.words}function yFb(){return wFb}function zFb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v;if(l=vFb.stackValue(4),r=vFb.stackValue(3),p=vFb.stackIntegerValue(2),n=vFb.stackIntegerValue(1),t=vFb.stackIntegerValue(0),u=xFb(l),i=xFb(r),vFb.success(sFb(l)===sFb(r)),vFb.success(sFb(l)===p*n),vFb.failed())return null;for(e=(2*t+1)*(2*t+1),m=0;m<=n-1;m++)for((f=m-t)<0&&(f=0),n<=(s=m+t)&&(s=n-1),d=0;d<=p-1;d++){for((c=d-t)<0&&(c=0),p<=(a=d+t)&&(a=p-1),h=0,v=f;v<=s;v++)for(o=v*p,b=c;b<=a;b++)h+=u[o+b];i[m*p+d]=tFb(h,e)}vFb.pop(5)}function AFb(){var e,t,i,r,a;if(i=vFb.stackValue(1),r=vFb.stackIntegerValue(0),t=xFb(i),a=sFb(i),vFb.failed())return null;for(e=0;e<=a-1;e++)t[e]=t[e]*r>>>10;vFb.pop(2)}function BFb(){var e,t,i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k;if(d=vFb.stackValue(6),i=vFb.stackValue(5),b=vFb.stackIntegerValue(4),r=vFb.stackIntegerValue(3),n=vFb.stackIntegerValue(2),u=vFb.stackIntegerValue(1),f=vFb.stackIntegerValue(0),h=xFb(d),e=xFb(i),vFb.success(sFb(i)===b*r),vFb.success(sFb(i)===sFb(d)*n*n),vFb.failed())return null;for((l=0)<(4&u)&&(l+=65536),0<(2&u)&&(l+=256),0<(1&u)&&++l,p=-1,v=0;v<=tFb(r,n)-1;v++)for(m=0;m<=tFb(b,n)-1;m++)for(g=h[++p],255<(a=(k=f)<0?k<-31?0:g>>>0-k:31<k?0:g<<k)&&(a=255),o=a<=0?1:a*l,c=s=(v*b+m)*n;c<=s+(n-1)*b;c+=b)for(t=c;t<=c+n-1;t++)e[t]=o;vFb.pop(7)}function CFb(e){return!1!=((vFb=e).majorVersion()==qFb)&&vFb.minorVersion()>=rFb}function CGb(e){return"number"==typeof e?UGb.classSmallInteger():e.sqClass}function DGb(e){return e.pointers?e.pointers.length:e.words?e.words.length:e.bytes?e.bytes.length:0}function EGb(e){return e.bytes?e.bytes.length:e.words?4*e.words.length:0}function GGb(e,t){return e-(i=e,r=t,(0|Math.floor(i/r))*t)|0;var i,r}function HGb(e,t){return 31<t?0:e<<t}function CHb(e,t,i){var r;if(bHb[e+i]!==bHb[t+i])return 0;if(bHb[e+i-1]!==bHb[t+i-1])return 0;if(bHb[e]!==bHb[t])return 0;if(bHb[e+1]!==bHb[t+1])return 1;for(r=2;r<OGb&&bHb[e+r]===bHb[t+r];)++r;return r}function FHb(e){var t;for(t=CGb(e);!t.isNil&&7<=t.classInstSize();)t=t.superclass();return!t.isNil&&(XGb=t.classInstSize(),1)}function GHb(e){return tHb[qHb]=e,iHb[qHb]=0,rHb[e]++,++qHb===sHb||0==(4095&qHb)&&WHb()}function HHb(e,t){var i,r;return tHb[qHb]=e-PGb,iHb[qHb]=t,r=vHb[e-PGb],rHb[r]++,i=t<257?gHb[t-1]:gHb[256+(t-1>>>7)],hHb[i]++,++uHb,++qHb===sHb||0==(4095&qHb)&&WHb()}function IHb(e,t,i,r,a){var s,n,o,u,l,c,f;if(f=t<<16|i,OGb<=t)return f;if(!(0<(o=e-(c=lHb[YHb(e+PGb-1)]))&&o<LGb))return f;for(n=r,l=LGb<e?e-LGb:0,s=t;;){if(u=CHb(e,c,s),wHb<e+u&&(u=wHb-e),u===PGb&&LGb>>2<e-c&&(u=PGb-1),s<u){if(f=u<<16|c,OGb<=(s=u))return f;if(a<s)return f}if(!(0<--n))return f;if((c=mHb[c&QGb])<=l)return f}}function JHb(){return VGb}function KHb(e){var t;nHb=YHb(e+PGb-1),t=lHb[nHb],lHb[nHb]=e,mHb[e&QGb]=t}function NHb(e,t){if(!(0<=t&&HGb(1,e)>t))return UGb.primitiveFail();for($Gb|=HGb(t,_Gb),_Gb+=e;8<=_Gb&&wHb<cHb;)bHb[wHb]=255&$Gb,++wHb,$Gb>>>=8,_Gb-=8}function OHb(){var e,t,i,r,a;return 3!==UGb.methodArgumentCount()?UGb.primitiveFail():(t=UGb.stackIntegerValue(0),e=UGb.stackIntegerValue(1),i=UGb.stackIntegerValue(2),r=UGb.stackObjectValue(3),UGb.failed()?null:function(e){var t;if(UGb.isPointers(e)&&15<=DGb(e)&&(t=UGb.fetchPointerofObject(0,e),UGb.isBytes(t))){if(0===XGb){if(!FHb(e))return;if(DGb(e)<XGb+5)return void(XGb=0)}if(bHb=t.bytes,cHb=EGb(t),wHb=UGb.fetchIntegerofObject(1,e),xHb=UGb.fetchIntegerofObject(2,e),t=UGb.fetchPointerofObject(XGb+0,e),UGb.isWords(t)&&DGb(t)===KGb&&(lHb=t.words,t=UGb.fetchPointerofObject(XGb+1,e),UGb.isWords(t)&&DGb(t)===RGb&&(mHb=t.words,nHb=UGb.fetchIntegerofObject(XGb+2,e),aHb=UGb.fetchIntegerofObject(XGb+3,e),t=UGb.fetchPointerofObject(XGb+5,e),UGb.isBytes(t)&&(sHb=DGb(t),tHb=t.bytes,t=UGb.fetchPointerofObject(XGb+6,e),UGb.isWords(t)&&DGb(t)>=sHb&&(iHb=t.words,t=UGb.fetchPointerofObject(XGb+7,e),UGb.isWords(t)&&DGb(t)===NGb&&(rHb=t.words,t=UGb.fetchPointerofObject(XGb+8,e),UGb.isWords(t)&&DGb(t)===MGb))))))return hHb=t.words,qHb=UGb.fetchIntegerofObject(XGb+9,e),uHb=UGb.fetchIntegerofObject(XGb+10,e),!UGb.failed()}}(r)?(a=function(e,t,i){var r,a,s,n,o,u,l,c,f;if(e<aHb)return!1;if(sHb<=qHb)return!0;for(a=!1,s=aHb;s<=e;){if(a||(l=IHb(s,PGb-1,s,t,i),KHb(s),o=65535&l,n=l>>>16),f=65535&(l=IHb(s+1,n,o,t,i)),(c=l>>>16)<=n&&PGb<=n){for(r=HHb(n,s-o),u=1;u<=n-1;u++)KHb(++s);a=!1,++s}else r=GHb(bHb[s]),++s<=e&&!r&&(KHb(s),a=!0,o=f,n=c);if(r)return aHb=s,!0}return aHb=s,!1}(i,e,t),UGb.failed()||(UGb.storeIntegerofObjectwithValue(XGb+2,r,nHb),UGb.storeIntegerofObjectwithValue(XGb+3,r,aHb),UGb.storeIntegerofObjectwithValue(XGb+9,r,qHb),UGb.storeIntegerofObjectwithValue(XGb+10,r,uHb)),void(UGb.failed()||(UGb.pop(4),UGb.pushBool(a)))):UGb.primitiveFail())}function PHb(){var e,t,i,r,a,s;if(2!==UGb.methodArgumentCount())return UGb.primitiveFail();if(e=UGb.stackIntegerValue(0),r=UGb.stackObjectValue(1),UGb.failed())return null;if(!UGb.isWords(r))return UGb.primitiveFail();for(s=DGb(r),a=r.wordsAsInt32Array(),i=0;i<=s-1;i++)t=a[i],a[i]=e<=t?t-e:0;UGb.pop(2)}function QHb(){var e,t;if(2!==UGb.methodArgumentCount())return UGb.primitiveFail();if(e=UGb.stackValue(0),!UGb.isWords(e))return UGb.primitiveFail();if(eHb=e.words,fHb=DGb(e),e=UGb.stackValue(1),!UGb.isWords(e))return UGb.primitiveFail();if(oHb=e.words,pHb=DGb(e),t=UGb.stackValue(2),!UGb.isPointers(t))return UGb.primitiveFail();if(0===WGb){if(!function(e){var t;for(t=CGb(e);!t.isNil&&13<=t.classInstSize();)t=t.superclass();return!t.isNil&&(WGb=t.classInstSize(),1)}(t))return UGb.primitiveFail();if(DGb(t)<WGb+8)return WGb=0,UGb.primitiveFail()}return DGb(t)<WGb+8?UGb.primitiveFail():(xHb=UGb.fetchIntegerofObject(2,t),BHb=UGb.fetchIntegerofObject(WGb+0,t),$Gb=UGb.fetchIntegerofObject(WGb+1,t),_Gb=UGb.fetchIntegerofObject(WGb+2,t),AHb=UGb.fetchIntegerofObject(WGb+4,t),zHb=UGb.fetchIntegerofObject(WGb+5,t),UGb.failed()?null:(--xHb,--AHb,--zHb,e=UGb.fetchPointerofObject(0,t),UGb.isBytes(e)?(bHb=e.bytes,cHb=EGb(e),e=UGb.fetchPointerofObject(WGb+3,t),UGb.isBytes(e)?(yHb=e.bytes,function(){var e,t,i,r,a,s,n,o,u,l,c;s=cHb-1;for(;xHb<s&&AHb<=zHb;)if(o=$Gb,n=_Gb,u=AHb,(c=ZHb(oHb,pHb))<256)bHb[++xHb]=c;else{if(256===c)return BHb&=TGb;if(a=65535&c,0<(i=(c>>>16)-1)&&(a+=_Hb(i)),c=ZHb(eHb,fHb),e=65535&c,0<(i=c>>>16)&&(e+=_Hb(i)),s<=xHb+a)return $Gb=o,_Gb=n,AHb=u;for(l=(t=xHb)-e,r=1;r<=a;r++)bHb[t+r]=bHb[l+r];xHb+=a}}(),void(UGb.failed()||(UGb.storeIntegerofObjectwithValue(2,t,xHb+1),UGb.storeIntegerofObjectwithValue(WGb+0,t,BHb),UGb.storeIntegerofObjectwithValue(WGb+1,t,$Gb),UGb.storeIntegerofObjectwithValue(WGb+2,t,_Gb),UGb.storeIntegerofObjectwithValue(WGb+4,t,AHb+1),UGb.pop(2)))):UGb.primitiveFail()):UGb.primitiveFail()))}function RHb(){var e,t,i,r,a,s,n,o;if(4!==UGb.methodArgumentCount())return UGb.primitiveFail();if(i=UGb.stackObjectValue(0),o=UGb.stackIntegerValue(1),n=UGb.stackIntegerValue(2),e=UGb.positive32BitValueOf(UGb.stackValue(3)),UGb.failed())return 0;if(!(UGb.isBytes(i)&&n<=o&&0<n))return UGb.primitiveFail();if(!(o<=EGb(i)))return UGb.primitiveFail();for(t=i.bytes,--o,a=65535&e,s=e>>>16&65535,r=--n;r<=o;r++)a=GGb(a+t[r],65521),s=GGb(s+a,65521);e=(s<<16)+a,UGb.popthenPush(5,UGb.positive32BitIntegerFor(e))}function SHb(){var e,t,i,r,a,s;if(4!==UGb.methodArgumentCount())return UGb.primitiveFail();if(t=UGb.stackObjectValue(0),s=UGb.stackIntegerValue(1),a=UGb.stackIntegerValue(2),i=UGb.positive32BitValueOf(UGb.stackValue(3)),UGb.failed())return 0;if(!(UGb.isBytes(t)&&a<=s&&0<a))return UGb.primitiveFail();if(!(s<=EGb(t)))return UGb.primitiveFail();for(e=t.bytes,--s,r=--a;r<=s;r++)i=dHb[255&(i^e[r])]^i>>>8;UGb.popthenPush(5,UGb.positive32BitIntegerFor(i))}function THb(){var e,t,i,r,a,s;return 4!==UGb.methodArgumentCount()?UGb.primitiveFail():(t=UGb.stackObjectValue(0),r=UGb.stackObjectValue(1),e=UGb.stackObjectValue(2),i=UGb.stackObjectValue(3),a=UGb.stackObjectValue(4),UGb.failed()?null:function(e){var t;if(0===XGb){if(!FHb(e))return;if(DGb(e)<XGb+3)return void(XGb=0)}return UGb.isPointers(e)&&DGb(e)>=XGb+3&&(t=UGb.fetchPointerofObject(0,e),UGb.isBytes(t)?(bHb=t.bytes,cHb=EGb(t),wHb=UGb.fetchIntegerofObject(1,e),xHb=UGb.fetchIntegerofObject(2,e),$Gb=UGb.fetchIntegerofObject(XGb+1,e),_Gb=UGb.fetchIntegerofObject(XGb+2,e),!UGb.failed()):UGb.primitiveFail())}(a)&&UGb.isPointers(t)&&2<=DGb(t)&&UGb.isPointers(r)&&2<=DGb(r)&&UGb.isPointers(i)&&3<=DGb(i)&&UGb.isPointers(e)&&3<=DGb(e)?(s=function(e,t,i,r){var a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k;if(g=UGb.fetchPointerofObject(0,e),b=UGb.fetchIntegerofObject(1,e),d=UGb.fetchIntegerofObject(2,e),!(b<=d&&UGb.isBytes(g)&&d<=EGb(g)))return UGb.primitiveFail();if(h=g.bytes,g=UGb.fetchPointerofObject(0,t),!(UGb.isWords(g)&&d<=DGb(g)&&UGb.fetchIntegerofObject(1,t)===b&&UGb.fetchIntegerofObject(2,t)===d))return UGb.primitiveFail();if(n=g.words,g=UGb.fetchPointerofObject(0,i),!UGb.isWords(g))return UGb.primitiveFail();if(p=DGb(g),m=g.words,g=UGb.fetchPointerofObject(1,i),!UGb.isWords(g)||p!==DGb(g))return UGb.primitiveFail();if(v=g.words,g=UGb.fetchPointerofObject(0,r),!UGb.isWords(g))return UGb.primitiveFail();if(u=DGb(g),o=g.words,g=UGb.fetchPointerofObject(1,r),!UGb.isWords(g)||u!==DGb(g))return UGb.primitiveFail();l=g.words,NHb(0,0),k=0;for(;b<d&&wHb+4<cHb;)if(f=h[b],s=n[b],++b,0===s){if(++k,!(f<p))return UGb.primitiveFail();NHb(m[f],v[f])}else{if(k=k+f+PGb,!(f<256))return UGb.primitiveFail();if(!((a=vHb[f])<p))return UGb.primitiveFail();if(NHb(m[a],v[a]),0!==(c=kHb[a-257])&&(f-=ZGb[a-257],NHb(c,f)),!(--s<32768))return UGb.primitiveFail();if(!((a=s<256?gHb[s]:gHb[256+(s>>>7)])<u))return UGb.primitiveFail();NHb(o[a],l[a]),0!==(c=jHb[a])&&(s-=YGb[a],NHb(c,s))}if(UGb.failed())return null;return UGb.storeIntegerofObjectwithValue(1,e,b),UGb.storeIntegerofObjectwithValue(1,t,b),k}(i,e,r,t),UGb.failed()||(UGb.storeIntegerofObjectwithValue(1,a,wHb),UGb.storeIntegerofObjectwithValue(WGb+1,a,$Gb),UGb.storeIntegerofObjectwithValue(WGb+2,a,_Gb)),void(UGb.failed()||(UGb.pop(5),UGb.pushInteger(s)))):UGb.primitiveFail())}function VHb(e){return!1!=((UGb=e).majorVersion()==AGb)&&UGb.minorVersion()>=BGb}function WHb(){var e;return qHb===sHb||0==(4095&qHb)&&(!(10*uHb<=qHb)&&(!((e=qHb-uHb)<=uHb)&&4*e<=uHb))}function YHb(e){return t=bHb[e],(nHb<<5^t)&JGb;var t}function ZHb(e,t){var i,r,a,s;if(i=e[0]>>>24,SGb<i)return UGb.primitiveFail(),0;for(a=2;;){if(t<=(r=a+_Hb(i)-1))return UGb.primitiveFail(),0;if(0==(1056964608&(s=e[r])))return s;if(a=65535&s,SGb<(i=s>>>24&255))return UGb.primitiveFail(),0}return 0}function _Hb(e){for(var t,i,r,a;_Gb<e;)i=yHb[++AHb],$Gb+=HGb(i,_Gb),_Gb+=8;return t=$Gb&HGb(1,e)-1,r=$Gb,$Gb=31<(a=e)?0:r>>>a,_Gb-=e,t}self.Squeak.Settings=localStorage,Object.extend||(Object.extend=function(e){for(var t=1;t<arguments.length;t++)if("object"==typeof arguments[t])for(var i in arguments[t])e[i]=arguments[t][i]}),Function.prototype.subclass||(Function.prototype.subclass=function(e){function t(){return this.initialize&&this.initialize.apply(this,arguments),this}function i(){}i.prototype=this.prototype,t.prototype=new i;for(var r=1;r<arguments.length;r++)Object.extend(t.prototype,arguments[r]);var a=e.split("."),s=a.pop();return(0<a.length?a.reduce(function(e,t){return e[t]},self):self)[s]=t}),Object.extend(Squeak,"version",{vmVersion:"SqueakJS 0.9.9",vmDate:"2020-06-20",vmBuild:"unknown",vmPath:"unknown",vmFile:"vm.js",platformName:"SqueakJS",platformSubtype:"unknown",osVersion:"unknown",windowSystem:"unknown"},"object header",{HeaderTypeMask:3,HeaderTypeSizeAndClass:0,HeaderTypeClass:1,HeaderTypeFree:2,HeaderTypeShort:3},"special objects",{splOb_NilObject:0,splOb_FalseObject:1,splOb_TrueObject:2,splOb_SchedulerAssociation:3,splOb_ClassBitmap:4,splOb_ClassInteger:5,splOb_ClassString:6,splOb_ClassArray:7,splOb_SmalltalkDictionary:8,splOb_ClassFloat:9,splOb_ClassMethodContext:10,splOb_ClassBlockContext:11,splOb_ClassPoint:12,splOb_ClassLargePositiveInteger:13,splOb_TheDisplay:14,splOb_ClassMessage:15,splOb_ClassCompiledMethod:16,splOb_TheLowSpaceSemaphore:17,splOb_ClassSemaphore:18,splOb_ClassCharacter:19,splOb_SelectorDoesNotUnderstand:20,splOb_SelectorCannotReturn:21,splOb_TheInputSemaphore:22,splOb_SpecialSelectors:23,splOb_CharacterTable:24,splOb_SelectorMustBeBoolean:25,splOb_ClassByteArray:26,splOb_ClassProcess:27,splOb_CompactClasses:28,splOb_TheTimerSemaphore:29,splOb_TheInterruptSemaphore:30,splOb_FloatProto:31,splOb_SelectorCannotInterpret:34,splOb_MethodContextProto:35,splOb_ClassBlockClosure:36,splOb_BlockContextProto:37,splOb_ExternalObjectsArray:38,splOb_ClassPseudoContext:39,splOb_ClassTranslatedMethod:40,splOb_TheFinalizationSemaphore:41,splOb_ClassLargeNegativeInteger:42,splOb_ClassExternalAddress:43,splOb_ClassExternalStructure:44,splOb_ClassExternalData:45,splOb_ClassExternalFunction:46,splOb_ClassExternalLibrary:47,splOb_SelectorAboutToReturn:48,splOb_SelectorRunWithIn:49,splOb_SelectorAttemptToAssign:50,splOb_PrimErrTableIndex:51,splOb_ClassAlien:52,splOb_InvokeCallbackSelector:53,splOb_ClassUnsafeAlien:54,splOb_ClassWeakFinalizer:55},"known classes",{Class_superclass:0,Class_mdict:1,Class_format:2,Class_instVars:null,Class_name:6,Context_sender:0,Context_instructionPointer:1,Context_stackPointer:2,Context_method:3,Context_closure:4,Context_receiver:5,Context_tempFrameStart:6,Context_smallFrameSize:16,Context_largeFrameSize:56,BlockContext_caller:0,BlockContext_argumentCount:3,BlockContext_initialIP:4,BlockContext_home:5,Closure_outerContext:0,Closure_startpc:1,Closure_numArgs:2,Closure_firstCopiedValue:3,Stream_array:0,Stream_position:1,Stream_limit:2,ProcSched_processLists:0,ProcSched_activeProcess:1,Link_nextLink:0,LinkedList_firstLink:0,LinkedList_lastLink:1,Semaphore_excessSignals:2,Mutex_owner:2,Proc_suspendedContext:1,Proc_priority:2,Proc_myList:3,Assn_key:0,Assn_value:1,MethodDict_array:1,MethodDict_selectorStart:2,Message_selector:0,Message_arguments:1,Message_lookupClass:2,Point_x:0,Point_y:1,LargeInteger_bytes:0,LargeInteger_neg:1,WeakFinalizationList_first:0,WeakFinalizerItem_list:0,WeakFinalizerItem_next:1},"constants",{MinSmallInt:-1073741824,MaxSmallInt:1073741823,NonSmallInt:-1342177280,MillisecondClockMask:536870911},"error codes",{PrimNoErr:0,PrimErrGenericFailure:1,PrimErrBadReceiver:2,PrimErrBadArgument:3,PrimErrBadIndex:4,PrimErrBadNumArgs:5,PrimErrInappropriate:6,PrimErrUnsupported:7,PrimErrNoModification:8,PrimErrNoMemory:9,PrimErrNoCMemory:10,PrimErrNotFound:11,PrimErrBadMethod:12,PrimErrNamedInternal:13,PrimErrObjectMayMove:14,PrimErrLimitExceeded:15,PrimErrObjectIsPinned:16,PrimErrWritePastObject:17},"modules",{externalModules:Squeak.externalModules||{},registerExternalModule:function(e,t){this.externalModules[e]=t}},"time",{Epoch:Date.UTC(1901,0,1)+6e4*(new Date).getTimezoneOffset(),EpochUTC:Date.UTC(1901,0,1),totalSeconds:function(){return Math.floor((Date.now()-Squeak.Epoch)/1e3)}},"utils",{bytesAsString:function(e){for(var t=[],i=0;i<e.length;)t.push(String.fromCharCode.apply(null,e.subarray(i,i+=16348)));return t.join("")}}),Object.subclass("Squeak.Object","initialization",{initInstanceOf:function(e,t,i,r){this.sqClass=e,this.hash=i;var a=e.pointers[Squeak.Class_format],s=(a>>1&63)+(a>>10&192)-1;this._format=a>>7&15,this._format<8?6!=this._format?0<s+t&&(this.pointers=this.fillArray(s+t,r)):0<t&&(e.isFloatClass?(this.isFloat=!0,this.float=0):this.words=new Uint32Array(t)):0<t&&(this.bytes=new Uint8Array(t))},initAsClone:function(e,t){this.sqClass=e.sqClass,this.hash=t,this._format=e._format,e.isFloat?(this.isFloat=e.isFloat,this.float=e.float):(e.pointers&&(this.pointers=e.pointers.slice(0)),e.words&&(this.words=new Uint32Array(e.words)),e.bytes&&(this.bytes=new Uint8Array(e.bytes)))},initFromImage:function(e,t,i,r){this.oop=e,this.sqClass=t,this._format=i,this.hash=r},classNameFromImage:function(e,t){var i=e[t[this.oop][Squeak.Class_name]];if(i&&8<=i._format&&i._format<12){var r=t[i.oop],a=i.decodeBytes(r.length,r,0,3&i._format);return Squeak.bytesAsString(a)}return"Class"},renameFromImage:function(e,t,i){var r=this.sqClass<32?e[i[this.sqClass-1]]:e[this.sqClass];if(!r)return this;var a=r.instProto||r.classInstProto(r.classNameFromImage(e,t));if(!a)return this;var s=new a;return s.oop=this.oop,s.sqClass=this.sqClass,s._format=this._format,s.hash=this.hash,s},installFromImage:function(e,t,i,r,a,s){var n=this.sqClass;this.sqClass=0<n&&n<32?e[i[n-1]]:e[n];var o=t[this.oop],u=o.length;if(this._format<5){if(0<u){var l=o;this.pointers=this.decodePointers(u,l,e)}}else if(12<=this._format){var c=this.decodeWords(1,o,a)[0]>>10&255;l=this.decodeWords(1+c,o,a);this.pointers=this.decodePointers(1+c,l,e),this.bytes=this.decodeBytes(u-(1+c),o,1+c,3&this._format)}else if(8<=this._format)0<u&&(this.bytes=this.decodeBytes(u,o,0,3&this._format));else if(this.sqClass==r){if(this.isFloat=!0,this.float=this.decodeFloat(o,a,s),1.3797216632888e-310==this.float&&!Squeak.noFloatDecodeWorkaround&&(this.constructor.prototype.decodeFloat=this.decodeFloatDeoptimized,this.float=this.decodeFloat(o,a,s),1.3797216632888e-310==this.float))throw Error("Cannot deoptimize decodeFloat")}else 0<u&&(this.words=this.decodeWords(u,o,a));this.mark=!1},decodePointers:function(e,t,i){for(var r=new Array(e),a=0;a<e;a++){var s=t[a];r[a]=1==(1&s)?s>>1:i[s]||42424242}return r},decodeWords:function(e,t,i){for(var r=new DataView(t.buffer,t.byteOffset),a=new Uint32Array(e),s=0;s<e;s++)a[s]=r.getUint32(4*s,i);return a},decodeBytes:function(e,t,i,r){var a=4*e-r,s=new Uint8Array(t.buffer,t.byteOffset+4*i,a),n=new Uint8Array(a);return n.set(s),n},decodeFloat:function(e,t,i){var r=new DataView(e.buffer,e.byteOffset);if(!t)return r.getFloat64(0,!1);if(i)return r.getFloat64(0,!0);var a=new ArrayBuffer(8),s=new DataView(a);return s.setUint32(0,r.getUint32(4)),s.setUint32(4,r.getUint32(0)),s.getFloat64(0,!0)},decodeFloatDeoptimized:function(e,t,i){var r=new DataView(e.buffer,e.byteOffset);if(!t)return r.getFloat64(0,!1);if(i)return r.getFloat64(0,!0);var a=new ArrayBuffer(8),s=new DataView(a);return s.setUint32(0,r.getUint32(4)),s.setUint32(4,r.getUint32(0)),s.getFloat64(0,!0)},fillArray:function(e,t){for(var i=[],r=0;r<e;r++)i[r]=t;return i}},"testing",{isWords:function(){return 6===this._format},isBytes:function(){var e=this._format;return 8<=e&&e<=11},isWordsOrBytes:function(){var e=this._format;return 6==e||8<=e&&e<=11},isPointers:function(){return this._format<=4},isWeak:function(){return 4===this._format},isMethod:function(){return 12<=this._format},sameFormats:function(e,t){return e<8?e===t:(12&e)==(12&t)},sameFormatAs:function(e){return this.sameFormats(this._format,e._format)}},"printing",{toString:function(){return this.sqInstName()},bytesAsString:function(){return this.bytes?Squeak.bytesAsString(this.bytes):""},bytesAsNumberString:function(e){if(!this.bytes)return"";for(var t="0123456789ABCDEF",i=[],r=0,a=this.bytes.length-1;0<=a;a--)i.push(t[this.bytes[a]>>4]),i.push(t[15&this.bytes[a]]),r=256*r+this.bytes[a];var s=e?"-":"",n=9007199254740991<r?"":"";return s+"16r"+i.join("")+" ("+n+s+r+"L)"},assnKeyAsString:function(){return this.pointers[Squeak.Assn_key].bytesAsString()},slotNameAt:function(e){var t=this.instSize();return e<=t?this.sqClass.allInstVarNames()[e-1]||"ivar"+(e-1):(e-t).toString()},sqInstName:function(){if(this.isNil)return"nil";if(this.isTrue)return"true";if(this.isFalse)return"false";if(this.isFloat){var e=this.float.toString();return/\./.test(e)||(e+=".0"),e}var t=this.sqClass.className();if(/ /.test(t))return"the "+t;switch(t){case"String":case"ByteString":return"'"+this.bytesAsString()+"'";case"Symbol":case"ByteSymbol":return"#"+this.bytesAsString();case"Point":return this.pointers.join("@");case"Rectangle":return this.pointers.join(" corner: ");case"Association":case"ReadOnlyVariableBinding":return this.pointers.join("->");case"LargePositiveInteger":return this.bytesAsNumberString(!1);case"LargeNegativeInteger":return this.bytesAsNumberString(!0);case"Character":var i=this.pointers?this.pointers[0]:this.hash;return"$"+String.fromCharCode(i)+" ("+i.toString()+")"}return/^[aeiou]/i.test(t)?"an"+t:"a"+t}},"accessing",{pointersSize:function(){return this.pointers?this.pointers.length:0},bytesSize:function(){return this.bytes?this.bytes.length:0},wordsSize:function(){return this.isFloat?2:this.words?this.words.length:0},instSize:function(){var e=this._format;return 4<e||2===e?0:e<2?this.pointersSize():this.sqClass.classInstSize()},indexableSize:function(e){var t=this._format;return t<2?-1:3===t&&e.vm.isContext(this)&&!e.allowAccessBeyondSP?this.pointers[Squeak.Context_stackPointer]:t<6?this.pointersSize()-this.instSize():t<8?this.wordsSize():t<12?this.bytesSize():this.bytesSize()+4*this.pointersSize()},floatData:function(){var e=new ArrayBuffer(8),t=new DataView(e);return t.setFloat64(0,this.float,!1),t},wordsAsFloat32Array:function(){return this.float32Array||this.words&&(this.float32Array=new Float32Array(this.words.buffer))},wordsAsFloat64Array:function(){return this.float64Array||this.words&&(this.float64Array=new Float64Array(this.words.buffer))},wordsAsInt32Array:function(){return this.int32Array||this.words&&(this.int32Array=new Int32Array(this.words.buffer))},wordsAsInt16Array:function(){return this.int16Array||this.words&&(this.int16Array=new Int16Array(this.words.buffer))},wordsAsUint16Array:function(){return this.uint16Array||this.words&&(this.uint16Array=new Uint16Array(this.words.buffer))},wordsAsUint8Array:function(){return this.uint8Array||this.words&&(this.uint8Array=new Uint8Array(this.words.buffer))},wordsOrBytes:function(){return this.words?this.words:this.uint32Array?this.uint32Array:this.bytes?this.uint32Array=new Uint32Array(this.bytes.buffer,0,this.bytes.length>>>2):null},setAddr:function(e){var t=this.snapshotSize();return this.oop=e+4*t.header,e+4*(t.header+t.body)},snapshotSize:function(){var e=this.isFloat?2:this.words?this.words.length:this.pointers?this.pointers.length:0;return this.bytes&&(e+=this.bytes.length+3>>>2),{header:63<++e?2:this.sqClass.isCompact?0:1,body:e}},addr:function(){return this.oop-4*this.snapshotSize().header},totalBytes:function(){var e=this.snapshotSize();return 4*(e.header+e.body)},writeTo:function(e,t,i){this.bytes&&(this._format|=3&-this.bytes.length);var r=t,a=this.snapshotSize(),s=(15&this._format)<<8|(4095&this.hash)<<17;switch(a.header){case 2:e.setUint32(t,a.body<<2|Squeak.HeaderTypeSizeAndClass),t+=4,e.setUint32(t,this.sqClass.oop|Squeak.HeaderTypeSizeAndClass),t+=4,e.setUint32(t,s|Squeak.HeaderTypeSizeAndClass),t+=4;break;case 1:e.setUint32(t,this.sqClass.oop|Squeak.HeaderTypeClass),t+=4,e.setUint32(t,s|a.body<<2|Squeak.HeaderTypeClass),t+=4;break;case 0:var n=i.compactClasses.indexOf(this.sqClass)+1;e.setUint32(t,s|n<<12|a.body<<2|Squeak.HeaderTypeShort),t+=4}if(this.isFloat)e.setFloat64(t,this.float),t+=8;else if(this.words)for(var o=0;o<this.words.length;o++)e.setUint32(t,this.words[o]),t+=4;else if(this.pointers)for(o=0;o<this.pointers.length;o++)e.setUint32(t,i.objectToOop(this.pointers[o])),t+=4;if(this.bytes){for(o=0;o<this.bytes.length;o++)e.setUint8(t++,this.bytes[o]);t+=3&-this.bytes.length}if(t!==r+this.totalBytes())throw Error("written size does not match");return t}},"as class",{classInstFormat:function(){return this.pointers[Squeak.Class_format]>>7&15},classInstSize:function(){var e=this.pointers[Squeak.Class_format];return(e>>10&192)+(e>>1&63)-1},instVarNames:function(){for(var e=3;e<=4;e++){var t=this.pointers[e].pointers;if(t&&t.length&&t[0].bytes)return t.map(function(e){return e.bytesAsString()})}return[]},allInstVarNames:function(){var e=this.superclass();return e.isNil?this.instVarNames():e.allInstVarNames().concat(this.instVarNames())},superclass:function(){return this.pointers[0]},className:function(){if(!this.pointers)return"_NOTACLASS_";for(var e=6;e<=7;e++){if((r=this.pointers[e])&&r.bytes)return r.bytesAsString()}for(var t=5;t<=6;t++){var i=this.pointers[t];if(i&&i.pointers)for(e=6;e<=7;e++){var r;if((r=i.pointers[e])&&r.bytes)return r.bytesAsString()+" class"}}return"_SOMECLASS_"},defaultInst:function(){return Squeak.Object},classInstProto:function(e){if(this.instProto)return this.instProto;var t=this.defaultInst();try{var i=(e=e||this.className()).replace(/[^A-Za-z0-9]/g,"_");i="UndefinedObject"===i?"nil":"True"===i?"true_":"False"===i?"false_":(/^[AEIOU]/.test(i)?"an":"a")+i,(t=new Function("return function "+i+"() {};")()).prototype=this.defaultInst().prototype}catch(e){}return Object.defineProperty(this,"instProto",{value:t}),t}},"as method",{methodNumLits:function(){return this.pointers[0]>>9&255},methodNumArgs:function(){return this.pointers[0]>>24&15},methodPrimitiveIndex:function(){var e=805306879&this.pointers[0];return 511<e?(511&e)+(e>>19):e},methodClassForSuper:function(){return this.pointers[this.methodNumLits()].pointers[Squeak.Assn_value]},methodNeedsLargeFrame:function(){return 0<(131072&this.pointers[0])},methodAddPointers:function(e){this.pointers=e},methodTempCount:function(){return this.pointers[0]>>18&63},methodGetLiteral:function(e){return this.pointers[1+e]},methodGetSelector:function(e){return this.pointers[1+e]}},"as context",{contextHome:function(){return this.contextIsBlock()?this.pointers[Squeak.BlockContext_home]:this},contextIsBlock:function(){return"number"==typeof this.pointers[Squeak.BlockContext_argumentCount]},contextMethod:function(){return this.contextHome().pointers[Squeak.Context_method]},contextSender:function(){return this.pointers[Squeak.Context_sender]},contextSizeWithStack:function(e){if(e&&e.activeContext===this)return e.sp+1;var t=this.pointers[Squeak.Context_stackPointer];return Squeak.Context_tempFrameStart+("number"==typeof t?t:0)}}),Squeak.Object.subclass("Squeak.ObjectSpur","initialization",{initInstanceOf:function(e,t,i,r){this.sqClass=e,this.hash=i;var a=e.pointers[Squeak.Class_format],s=65535&a,n=a>>16&31;(this._format=n)<12?n<10?0<s+t&&(this.pointers=this.fillArray(s+t,r)):0<t&&(e.isFloatClass?(this.isFloat=!0,this.float=0):this.words=new Uint32Array(t)):0<t&&(this.bytes=new Uint8Array(t))},installFromImage:function(e,t,i,r,a,s){var n=this.sqClass;if(n<32)throw Error("Invalid class ID: "+n);if(this.sqClass=i[n],!this.sqClass)throw Error("Class ID not in class table: "+n);var o=t[this.oop],u=o.length;switch(this._format){case 0:case 1:case 2:case 3:case 4:case 5:if(0<u){var l=o;this.pointers=this.decodePointers(u,l,e,s)}break;case 10:if(this.sqClass===r){if(this.isFloat=!0,this.float=this.decodeFloat(o,a,!0),1.3797216632888e-310==this.float&&!Squeak.noFloatDecodeWorkaround&&(this.constructor.prototype.decodeFloat=this.decodeFloatDeoptimized,this.float=this.decodeFloat(o,a,!0),1.3797216632888e-310==this.float))throw Error("Cannot deoptimize decodeFloat")}else 0<u&&(this.words=this.decodeWords(u,o,a));break;case 12:case 13:throw Error("16 bit arrays not supported yet");case 16:case 17:case 18:case 19:0<u&&(this.bytes=this.decodeBytes(u,o,0,3&this._format));break;case 24:case 25:case 26:case 27:var c=this.decodeWords(1,o,a)[0];if(2147483648&c)throw Error("Alternate bytecode set not supported");var f=c>>1&32767;l=this.decodeWords(1+f,o,a);this.pointers=this.decodePointers(1+f,l,e,s),this.bytes=this.decodeBytes(u-(1+f),o,1+f,3&this._format);break;default:throw Error("Unknown object format: "+this._format)}this.mark=!1},decodePointers:function(e,t,i,r){for(var a=new Array(e),s=0;s<e;s++){var n=t[s];a[s]=1==(1&n)?n>>1:2==(3&n)?r(n>>>2):i[n]||42424242}return a},initInstanceOfChar:function(e,t){this.oop=t<<2|2,this.sqClass=e,this.hash=t,this._format=7,this.mark=!0},classNameFromImage:function(e,t){var i=e[t[this.oop][Squeak.Class_name]];if(i&&16<=i._format&&i._format<24){var r=t[i.oop],a=i.decodeBytes(r.length,r,0,7&i._format);return Squeak.bytesAsString(a)}return"Class"},renameFromImage:function(e,t,i){var r=i[this.sqClass];if(!r)return this;var a=r.instProto||r.classInstProto(r.classNameFromImage(e,t));if(!a)return this;var s=new a;return s.oop=this.oop,s.sqClass=this.sqClass,s._format=this._format,s.hash=this.hash,s}},"accessing",{instSize:function(){return this._format<2?this.pointersSize():this.sqClass.classInstSize()},indexableSize:function(e){var t=this._format;return t<2?-1:3===t&&e.vm.isContext(this)?this.pointers[Squeak.Context_stackPointer]:t<6?this.pointersSize()-this.instSize():t<12?this.wordsSize():t<16?this.shortsSize():t<24?this.bytesSize():4*this.pointersSize()+this.bytesSize()},snapshotSize:function(){var e=this.isFloat?2:this.words?this.words.length:this.pointers?this.pointers.length:0;this.bytes&&(e+=this.bytes.length+3>>>2);var t=255<=e?2:0;return e+=1&e,(e+=2)<4&&(e=4),{header:t,body:e}},writeTo:function(e,t,i,r){var a=this.isFloat?2:this.words?this.words.length:this.pointers?this.pointers.length:0;this.bytes&&(a+=this.bytes.length+3>>>2,this._format|=3&-this.bytes.length);var s=t,n=this._format<<24|4194303&this.sqClass.hash,o=a<<24|4194303&this.hash;if(255<=a&&(e.setUint32(t,a,i),t+=4,o=255<<24|4194303&this.hash,e.setUint32(t,o,i),t+=4),e.setUint32(t,n,i),t+=4,e.setUint32(t,o,i),t+=4,this.isFloat)e.setFloat64(t,this.float,i),t+=8;else if(this.words)for(var u=0;u<this.words.length;u++)e.setUint32(t,this.words[u],i),t+=4;else if(this.pointers)for(u=0;u<this.pointers.length;u++)e.setUint32(t,r(this.pointers[u]),i),t+=4;if(this.bytes){for(u=0;u<this.bytes.length;u++)e.setUint8(t++,this.bytes[u]);t+=3&-this.bytes.length}if((t+=0===a?8:4*(1&a))!==s+this.totalBytes())throw Error("written size does not match");return t}},"testing",{isBytes:function(){var e=this._format;return 16<=e&&e<=23},isPointers:function(){return this._format<=6},isWords:function(){return 10===this._format},isWordsOrBytes:function(){var e=this._format;return 10===e||16<=e&&e<=23},isWeak:function(){return 4===this._format},isMethod:function(){return 24<=this._format},sameFormats:function(e,t){return e<16?e===t:(248&e)==(248&t)}},"as class",{defaultInst:function(){return Squeak.ObjectSpur},classInstFormat:function(){return this.pointers[Squeak.Class_format]>>16&31},classInstSize:function(){return 65535&this.pointers[Squeak.Class_format]},classByteSizeOfInstance:function(e){var t=this.classInstFormat(),i=this.classInstSize();return i+=t<9?e:16<=t?(e+3)/4|0:12<=t?(e+1)/2|0:10<=t?e:2*e,i+=1&i,(i+=255<=i?4:2)<4&&(i=4),4*i}},"as method",{methodNumLits:function(){return 32767&this.pointers[0]},methodPrimitiveIndex:function(){return 0==(65536&this.pointers[0])?0:this.bytes[1]+256*this.bytes[2]}}),Object.subclass("Squeak.Image","about",{about:function(){}},"initializing",{initialize:function(e){this.totalMemory=1e8,this.name=e,this.gcCount=0,this.gcMilliseconds=0,this.pgcCount=0,this.pgcMilliseconds=0,this.gcTenured=0,this.allocationCount=0,this.oldSpaceCount=0,this.youngSpaceCount=0,this.newSpaceCount=0,this.hasNewInstances={}},readFromBuffer:function(a,t,i){console.log("squeak: reading "+this.name+" ("+a.byteLength+" bytes)"),this.startupTime=Date.now();for(var r=new DataView(a),s=!1,n=0,o=function(){var e=r.getUint32(n,s);return n+=4,e},e=function(e,t){if(t){for(var i=[];i.length<e;)i.push(o());return i}var r=new Uint32Array(a,n,e);return n+=4*e,r},u=[6501,6502,6504,6505,6521,68e3,68002,68003,68021],l=0,c=0;s=!s,n=c,l=o(),!(0<=u.indexOf(l));)if(s||(c+=512),512<c)throw Error("bad image version");this.version=l;var f=0<=[6505,6521,68003,68021].indexOf(l);if(this.hasClosures=0<=[6504,6505,6521,68002,68003,68021].indexOf(l),this.isSpur=0<=[6521,68021].indexOf(l),68e3<=l)throw Error("64 bit images not supported yet");var h=o(),p=o(),d=o(),b=o();this.lastHash=o(),this.savedHeaderWords=[];for(var m=0;m<6;m++)this.savedHeaderWords.push(o());var v,g=o(),k={},S={},y=c+h;if(n=y,this.isSpur){this.oldSpaceBytes=g-16;for(var j=n+g,I=0,O=null,_=null,V=0,F={};n<j;){for(;n<j-16;){var P=n,w=o(),T=o(),W=T>>>24;255===W&&(W=w,w=o(),T=o());D=I+n-8-y;var A=4194303&w;G=4194303&T,L=e(W,(E=w>>>24&31)<10&&0<A);if(n+=4*(W<2?2-W:1&W),32<=A)(U=new Squeak.ObjectSpur).initFromImage(D,A,E,G),v&&(v.nextObject=U),this.oldSpaceCount++,v=U,k[d+D]=U,S[D]=L,F[D]=V;else V+=n-P,O?_=_||L:O=L,A&&(k[d+D]=L)}if(n!==j-16)throw Error("invalid segment");var C=o(),x=o(),M=o();o();if(0!==M){var q=4278190080&x?4*(16777215&C):0;j+=M,I+=q,V+=16+q,this.oldSpaceBytes+=q+M}}this.oldSpaceBytes-=V,this.firstOldObject=k[d],this.lastOldObject=U}else{for(;n<y+p;){var R=0,N=0,B=o();switch(B&Squeak.HeaderTypeMask){case Squeak.HeaderTypeSizeAndClass:R=B>>>2,N=o(),B=o();break;case Squeak.HeaderTypeClass:N=B-Squeak.HeaderTypeClass,R=(B=o())>>>2&63;break;case Squeak.HeaderTypeShort:R=B>>>2&63,N=B>>>12&31;break;case Squeak.HeaderTypeFree:throw Error("Unexpected free block")}var E,U,D=n-4-y,G=B>>>17&4095,L=e(--R,(E=B>>>8&15)<5);(U=new Squeak.Object).initFromImage(D,N,E,G),N<32&&(U.hash|=268435456),v&&(v.nextObject=U),this.oldSpaceCount++,v=U,k[d+D]=U,S[D]=L}this.firstOldObject=k[d+4],this.lastOldObject=U,this.oldSpaceBytes=p}var J=k[b],Z=this.isSpur?this.spurClassTable(k,S,_,J):S[k[S[J.oop][Squeak.splOb_CompactClasses]].oop],z=null;for(U=this.firstOldObject,v=null;U;)v=z,z=U.renameFromImage(k,S,Z),v?v.nextObject=z:this.firstOldObject=z,k[d+U.oop]=z,U=U.nextObject;this.lastOldObject=z;var H=k[b],Q=S[k[S[H.oop][Squeak.splOb_CompactClasses]].oop],X=k[S[H.oop][Squeak.splOb_ClassFloat]];if(this.isSpur){var Y=k[S[H.oop][Squeak.splOb_ClassCharacter]];this.initCharacterTable(Y),Q=this.spurClassTable(k,S,_,H),f=this.getCharacter.bind(this),this.initSpurOverrides()}var K=this.firstOldObject,$=0,ee=function(){if(K){for(var e=$+(this.oldSpaceCount/20|0);K&&$<e;)K.installFromImage(k,S,Q,X,s,f),K=K.nextObject,$++;return i&&i($/this.oldSpaceCount),!0}return this.specialObjectsArray=H,this.decorateKnownObjects(),this.isSpur?this.fixSkippedOops(F):(this.fixCompiledMethods(),this.fixCompactOops()),!1}.bind(this);if(i)self.setTimeout(function e(){ee()?self.setTimeout(e,0):t&&t()},0);else{for(;ee(););t&&t()}},decorateKnownObjects:function(){var e=this.specialObjectsArray.pointers;if(e[Squeak.splOb_NilObject].isNil=!0,e[Squeak.splOb_TrueObject].isTrue=!0,e[Squeak.splOb_FalseObject].isFalse=!0,e[Squeak.splOb_ClassFloat].isFloatClass=!0,!this.isSpur){this.compactClasses=this.specialObjectsArray.pointers[Squeak.splOb_CompactClasses].pointers;for(var t=0;t<this.compactClasses.length;t++)this.compactClasses[t].isNil||(this.compactClasses[t].isCompact=!0)}Number.prototype.sqInstName||Object.defineProperty(Number.prototype,"sqInstName",{enumerable:!1,value:function(){return this.toString()}})},fixCompactOops:function(){if(!this.isSpur){for(var e=this.firstOldObject,t=0;e;){var i=268435455<e.hash;if(i!=!!e.sqClass.isCompact){var r=0===e.snapshotSize().header;i!=r&&(t+=r?-4:4)}e.hash&=268435455,e.oop+=t,e=e.nextObject}this.oldSpaceBytes+=t}},fixCompiledMethods:function(){if(!(6502<=this.version))for(var e=this.firstOldObject,t=this.specialObjectsArray.pointers[Squeak.splOb_ClassCompiledMethod];e;)e.isMethod()&&(e.sqClass=t),e=e.nextObject},fixSkippedOops:function(e){for(var t=this.firstOldObject;t;)t.oop-=e[t.oop],t=t.nextObject;if((t=this.lastOldObject).addr()+t.totalBytes()!==this.oldSpaceBytes)throw Error("image size doesn't match object sizes")}},"garbage collection - full",{fullGC:function(e){this.vm.addMessage("fullGC: "+e);var t=Date.now(),i=this.markReachableObjects();return this.removeUnmarkedOldObjects(),this.appendToOldObjects(i),this.finalizeWeakReferences(),this.allocationCount+=this.newSpaceCount,this.newSpaceCount=0,this.youngSpaceCount=0,this.hasNewInstances={},this.gcCount++,this.gcMilliseconds+=Date.now()-t,console.log("Full GC ("+e+"): "+(Date.now()-t)+" ms"),0<i.length?i[0]:null},gcRoots:function(){return this.vm.storeContextRegisters(),[this.specialObjectsArray,this.vm.activeContext]},markReachableObjects:function(){var e=this.gcRoots(),t=[];for(this.weakObjects=[];0<e.length;){var i=e.pop();if(!i.mark){i.oop<0&&t.push(i),i.mark=!0,i.sqClass.mark||e.push(i.sqClass);var r=i.pointers;if(r){var a=r.length;if(i.isWeak()&&(a=i.sqClass.classInstSize(),this.weakObjects.push(i)),this.vm.isContext(i))for(var s=a=i.contextSizeWithStack();s<r.length;s++)r[s]=this.vm.nilObj;for(s=0;s<a;s++)"object"!=typeof r[s]||r[s].mark||e.push(r[s])}}}return this.isSpur?t:t.sort(function(e,t){return t.oop-e.oop})},removeUnmarkedOldObjects:function(){var e=0,t=0,i=this.firstOldObject;for(i.mark=!1;;){var r=i.nextObject;if(!r)return this.lastOldObject=i,this.oldSpaceBytes-=t,void(this.oldSpaceCount-=e);if(r.dirty&&(r.dirty=!1),r.mark)(i=r).mark=!1,i.oop-=t;else{var a=r;i.nextObject=a.nextObject,a.oop=-++this.newSpaceCount,t+=a.totalBytes(),e++}}},appendToOldObjects:function(e){for(var t=this.lastOldObject,i=0;i<e.length;i++){var r=e[i];r.mark=!1,this.oldSpaceBytes=r.setAddr(this.oldSpaceBytes),t.nextObject=r,t=r}t.nextObject=null,this.lastOldObject=t,this.oldSpaceCount+=e.length,this.gcTenured+=e.length},tenureIfYoung:function(e){e.oop<0&&this.appendToOldObjects([e])},finalizeWeakReferences:function(){var e=this.weakObjects;this.weakObjects=null;for(var t=0;t<e.length;t++){for(var i=e[t],r=i.pointers,a=i.sqClass.classInstSize(),s=!1,n=a;n<r.length;n++)r[n].oop<0&&(r[n]=this.vm.nilObj,s=!0);if(s&&(this.vm.pendingFinalizationSignals++,2<=a)){var o=i.pointers[Squeak.WeakFinalizerItem_list];if(o.sqClass==this.vm.specialObjects[Squeak.splOb_ClassWeakFinalizer]){var u=o.pointers[Squeak.WeakFinalizationList_first];i.pointers[Squeak.WeakFinalizerItem_next]=u,o.pointers[Squeak.WeakFinalizationList_first]=i}}}0<this.vm.pendingFinalizationSignals&&this.vm.forceInterruptCheck()}},"garbage collection - partial",{partialGC:function(e){this.vm.addMessage("partialGC: "+e);var t=Date.now(),i=this.findYoungObjects();return this.appendToYoungSpace(i),this.finalizeWeakReferences(),this.cleanupYoungSpace(i),this.allocationCount+=this.newSpaceCount-i.length,this.youngSpaceCount=i.length,this.newSpaceCount=this.youngSpaceCount,this.pgcCount++,this.pgcMilliseconds+=Date.now()-t,console.log("Partial GC ("+e+"): "+(Date.now()-t)+" ms"),i[0]},youngRoots:function(){for(var e=this.gcRoots().filter(function(e){return e.oop<0}),t=this.firstOldObject;t;){if(t.dirty){for(var i=t.pointers,r=!1,a=0;a<i.length;a++){var s=i[a];"object"==typeof s&&s.oop<0&&(e.push(s),r=!0)}t.dirty=r}t=t.nextObject}return e},findYoungObjects:function(){var e=this.youngRoots(),t=[];for(this.weakObjects=[];0<e.length;){var i=e.pop();if(!i.mark){t.push(i),i.mark=!0,i.sqClass.oop<0&&e.push(i.sqClass);var r=i.pointers;if(r){var a=r.length;if(i.isWeak()&&(a=i.sqClass.classInstSize(),this.weakObjects.push(i)),this.vm.isContext(i))for(var s=a=i.contextSizeWithStack();s<r.length;s++)r[s]=this.vm.nilObj;for(s=0;s<a;s++){var n=r[s];"object"==typeof n&&n.oop<0&&e.push(r[s])}}}}return this.isSpur?t:t.sort(function(e,t){return t.oop-e.oop})},appendToYoungSpace:function(e){for(var t=this.lastOldObject.oop+1,i=0;i<e.length;i++){var r=e[i];this.hasNewInstances[r.oop]&&(delete this.hasNewInstances[r.oop],this.hasNewInstances[t]=!0),r.oop=t,r.nextObject=e[i+1],t++}},cleanupYoungSpace:function(e){for(var t=e[0],i=-1;t;)this.hasNewInstances[t.oop]&&(delete this.hasNewInstances[t.oop],this.hasNewInstances[i]=!0),t.oop=i,t.mark=!1,t=t.nextObject,i--}},"creating",{registerObject:function(e){return e.oop=-++this.newSpaceCount,this.lastHash=13849+27181*this.lastHash&4294967295,4095&this.lastHash},registerObjectSpur:function(e){return e.oop=-++this.newSpaceCount,0},instantiateClass:function(e,t,i){var r=new(e.classInstProto()),a=this.registerObject(r);return r.initInstanceOf(e,t,a,i),this.hasNewInstances[e.oop]=!0,r},clone:function(e){var t=new(e.sqClass.classInstProto()),i=this.registerObject(t);return t.initAsClone(e,i),this.hasNewInstances[t.sqClass.oop]=!0,t}},"operations",{bulkBecome:function(e,t,i,r){if(!e)return!t;var a=e.length;if(a!==t.length)return!1;var s=null;0<this.newSpaceCount?s=this.partialGC("become"):this.vm.storeContextRegisters();for(var n={},o=0;o<a;o++){if(!(l=e[o]).sqClass)return!1;if(n[l.oop])return!1;n[l.oop]=t[o]}if(i)for(o=0;o<a;o++){if(!(l=t[o]).sqClass)return!1;if(n[l.oop])return!1;n[l.oop]=e[o]}if(r)for(o=0;o<a;o++){if(!t[o].sqClass)return!1;var u=e[o].hash;e[o].hash=t[o].hash,t[o].hash=u}this.lastOldObject.nextObject=s;for(var l=this.firstOldObject;l;){var c=n[l.sqClass.oop];c&&(l.sqClass=c).oop<0&&(l.dirty=!0);var f=l.pointers;if(f)for(var h=0;h<f.length;h++)(c=n[f[h].oop])&&(f[h]=c).oop<0&&(l.dirty=!0);l=l.nextObject}return this.lastOldObject.nextObject=null,this.vm.flushMethodCacheAfterBecome(n),!0},objectAfter:function(e){return e.nextObject||this.nextObjectWithGC("nextObject",e)},someInstanceOf:function(e){for(var t=this.firstOldObject;t;){if(t.sqClass===e)return t;t=t.nextObject||this.nextObjectWithGCFor(t,e)}return null},nextInstanceAfter:function(e){for(var t=e.sqClass;;){if(!(e=e.nextObject||this.nextObjectWithGCFor(e,t)))return null;if(e.sqClass===t)return e}},nextObjectWithGC:function(e,t){var i=0<t.oop?0:this.youngSpaceCount;return this.newSpaceCount<=i?null:(t.oop<0&&this.fullGC(e),this.partialGC(e))},nextObjectWithGCFor:function(e,t){return this.hasNewInstances[t.oop]?this.nextObjectWithGC("instance of "+t.className(),e):null},allInstancesOf:function(e){for(var t=this.firstOldObject,i=[];t;)t.sqClass===e&&i.push(t),t=t.nextObject||this.nextObjectWithGCFor(t,e);return i},writeToBuffer:function(){function e(e){t.setUint32(i,e),i+=4}var t=new DataView(new ArrayBuffer(64+this.oldSpaceBytes)),i=0;for(e(this.formatVersion()),e(64),e(this.oldSpaceBytes),e(this.firstOldObject.addr()),e(this.objectToOop(this.specialObjectsArray)),e(this.lastHash),e(52429400);i<64;)e(0);for(var r=this.firstOldObject,a=0;r;)i=r.writeTo(t,i,this),r=r.nextObject,a++;if(i!==t.byteLength)throw Error("wrong image size");if(a!==this.oldSpaceCount)throw Error("wrong object count");return t.buffer},objectToOop:function(e){if("number"==typeof e)return e<<1|1;if(e.oop<0)throw Error("temporary oop");return e.oop},bytesLeft:function(){return this.totalMemory-this.oldSpaceBytes},formatVersion:function(){return this.isSpur?6521:this.hasClosures?6504:6502},segmentVersion:function(){var e=this.specialObjectsArray.pointers[Squeak.splOb_SelectorDoesNotUnderstand],t=new Uint32Array(e.bytes.buffer,0,1);return this.formatVersion()|4278190080&t[0]},loadImageSegment:function(e,t){function a(){var e=s.getUint32(n,r);return n+=4,e}function i(e,t){if(t<5){for(var i=[];i.length<e;)i.push(a());return i}var r=new Uint32Array(s.buffer,n,e);return n+=4*e,r}var s=new DataView(e.words.buffer),r=!1,n=0,o=a();if(!0&o&&(r=!0,!(n=0)&(o=a())))return console.error("image segment format not supported"),null;this.tenureIfYoung(e);for(var u=e,l=u.nextObject,c=e.oop,f={},h={};n<s.byteLength;){var p=0,d=0,b=a();switch(b&Squeak.HeaderTypeMask){case Squeak.HeaderTypeSizeAndClass:p=b>>>2,d=a(),b=a();break;case Squeak.HeaderTypeClass:d=b-Squeak.HeaderTypeClass,p=(b=a())>>>2&63;break;case Squeak.HeaderTypeShort:p=b>>>2&63,d=b>>>12&31;break;case Squeak.HeaderTypeFree:throw Error("Unexpected free block")}var m=n,v=b>>>8&15,g=b>>>17&4095,k=i(--p,v),S=new Squeak.Object;S.initFromImage(m+c,d,v,g),u.nextObject=S,this.oldSpaceCount++,u=S,f[m]=S,h[m+c]=k}S.nextObject=l;for(var y=0;y<t.pointers.length;y++)f[2147483652+4*y]=t.pointers[y];var j=this.specialObjectsArray.pointers[Squeak.splOb_CompactClasses].pointers,I=0,O=j.map(function(e){return f[--I]=e,I});e.words=new Uint32Array([e.words[0]]);for(var _=e.nextObject,V=this.specialObjectsArray.pointers[Squeak.splOb_ClassFloat],F=_;F.installFromImage(f,h,O,V,r,!1),(F=F.nextObject)!==l;);return _}},"spur support",{initSpurOverrides:function(){this.registerObject=this.registerObjectSpur,this.writeToBuffer=this.writeToBufferSpur},spurClassTable:function(e,t,i,r){for(var a={},s=this.firstOldObject,n=0;n<4096;n++){var o=e[i[n]];if(o.oop&&(o=t[o.oop]),1024===o.length)for(var u=0;u<1024;u++){var l=e[o[u]];if(!l)throw Error("Invalid class table entry (oop "+o[u]+")");if(l!==s)a[f=1024*n+u]=l}}for(var c in Squeak)if(/^splOb_Class/.test(c)){var f,h=e[t[r.oop][Squeak[c]]];if(h!==s)0<(f=h.hash)&&f<1024&&(a[f]=h)}return a[3]=a[1],this.classTable=a,this.classTableIndex=1024,a},enterIntoClassTable:function(e){for(var t=this.classTableIndex,i=this.classTable;t<=4194303;){if(!i[t])return(i[t]=e).hash=t,this.classTableIndex=t;t++}return console.error("class table full?"),null},initCharacterTable:function(e){e.classInstProto("Character"),this.characterClass=e,this.characterTable={}},getCharacter:function(e){var t=this.characterTable[e];return t||((t=new this.characterClass.instProto).initInstanceOfChar(this.characterClass,e),this.characterTable[e]=t),t},ensureClassesInTable:function(){for(var e=this.firstOldObject,t=1024;e;){var i=e.sqClass;if(0===i.hash&&this.enterIntoClassTable(i),i.hash>t&&(t=i.hash),this.classTable[i.hash]!==i)throw Error("Class not in class table");e=e.nextObject}return 1+(t>>10)},classTableBytes:function(e){return 4*(4108+1028*e)},writeFreeLists:function(e,t,i,r){return e.setUint32(t,167772178,i),t+=4,e.setUint32(t,536870912,i),t+=4,t+=128},writeClassTable:function(e,t,i,r,a){e.setUint32(t,4104,i),t+=4,e.setUint32(t,4278190080,i),t+=4,e.setUint32(t,33554448,i),t+=4,e.setUint32(t,4278190080,i),t+=4;for(var s=0;s<a;s++)e.setUint32(t,16624+4112*s,i),t+=4;t+=4*(4104-a);var n=0;for(s=0;s<a;s++){e.setUint32(t,1024,i),t+=4,e.setUint32(t,4278190080,i),t+=4,e.setUint32(t,33554448,i),t+=4,e.setUint32(t,4278190080,i),t+=4;for(var o=0;o<1024;o++){var u=this.classTable[n];if(u&&u.pointers){if(!u.hash)throw Error("class without id");u.hash!==n&&32<=n&&(console.warn("freeing class index "+n+" "+u.className()),u=null)}u&&e.setUint32(t,r(u),i),t+=4,n++}}return t},writeToBufferSpur:function(){var e=this.ensureClassesInTable(),t=136+this.classTableBytes(e),i=new DataView(new ArrayBuffer(64+t+this.oldSpaceBytes+16)),r=!0,a=Date.now(),s=0;function n(e){i.setUint32(s,e,r),s+=4}function o(e){if("number"==typeof e)return e<<1|1;if(7===e._format){if(e.hash!==e.oop>>2||2!=(3&e.oop))throw Error("Bad immediate char");return e.oop}if(e.oop<0)throw Error("temporary oop");return e.oop<48?e.oop:e.oop+t}for(n(this.formatVersion()),n(64),n(t+this.oldSpaceBytes+16),n(this.firstOldObject.addr()),n(o(this.specialObjectsArray)),n(this.lastHash),this.savedHeaderWords.forEach(n),n(t+this.oldSpaceBytes+16);s<64;)n(0);var u=this.firstOldObject,l=0;for(s=u.writeTo(i,s,r,o),u=u.nextObject,l++,s=u.writeTo(i,s,r,o),u=u.nextObject,l++,s=u.writeTo(i,s,r,o),u=u.nextObject,l++,s=this.writeFreeLists(i,s,r,o),s=this.writeClassTable(i,s,r,o,e);u;)s=u.writeTo(i,s,r,o),u=u.nextObject,l++;if(n(1241513987),n(8388608),n(0),n(0),s!==i.byteLength)throw Error("wrong image size");if(l!==this.oldSpaceCount)throw Error("wrong object count");var c=Date.now()-a;return console.log("Wrote "+l+" objects in "+c+" ms, image size "+s+" bytes"),i.buffer}}),Object.subclass("Squeak.Interpreter","initialization",{initialize:function(e,t){console.log("squeak: initializing interpreter "+Squeak.vmVersion),this.Squeak=Squeak,this.image=e,(this.image.vm=this).primHandler=new Squeak.Primitives(this,t),this.loadImageState(),this.hackImage(),this.initVMState(),this.loadInitialContext(),this.initCompiler(),console.log("squeak: ready")},loadImageState:function(){this.specialObjects=this.image.specialObjectsArray.pointers,this.specialSelectors=this.specialObjects[Squeak.splOb_SpecialSelectors].pointers,this.nilObj=this.specialObjects[Squeak.splOb_NilObject],this.falseObj=this.specialObjects[Squeak.splOb_FalseObject],this.trueObj=this.specialObjects[Squeak.splOb_TrueObject],this.hasClosures=this.image.hasClosures,this.globals=this.findGlobals(),this.hasClosures||this.findMethod("UnixFileDirectory class>>pathNameDelimiter")||(this.primHandler.emulateMac=!0),6501==this.image.version&&(this.primHandler.reverseDisplay=!0)},initVMState:function(){this.byteCodeCount=0,this.sendCount=0,this.interruptCheckCounter=0,this.interruptCheckCounterFeedBackReset=1e3,this.interruptChecksEveryNms=3,this.nextPollTick=0,this.nextWakeupTick=0,this.lastTick=0,this.interruptKeycode=2094,this.interruptPending=!1,this.pendingFinalizationSignals=0,this.freeContexts=this.nilObj,this.freeLargeContexts=this.nilObj,this.reclaimableContextCount=0,this.nRecycledContexts=0,this.nAllocatedContexts=0,this.methodCacheSize=1024,this.methodCacheMask=this.methodCacheSize-1,this.methodCacheRandomish=0,this.methodCache=[];for(var e=0;e<this.methodCacheSize;e++)this.methodCache[e]={lkupClass:null,selector:null,method:null,primIndex:0,argCount:0,mClass:null};this.breakOutOfInterpreter=!1,this.breakOutTick=0,this.breakOnMethod=null,this.breakOnNewMethod=!1,this.breakOnContextChanged=!1,this.breakOnContextReturned=null,this.messages={},this.startupTime=Date.now()},loadInitialContext:function(){var e=this.specialObjects[Squeak.splOb_SchedulerAssociation].pointers[Squeak.Assn_value].pointers[Squeak.ProcSched_activeProcess];this.activeContext=e.pointers[Squeak.Proc_suspendedContext],this.activeContext.dirty=!0,this.fetchContextRegisters(this.activeContext),this.reclaimableContextCount=0},findGlobals:function(){var e=this.specialObjects[Squeak.splOb_SmalltalkDictionary],t=e.sqClass.className();if("Association"===t&&(t=(e=e.pointers[1]).sqClass.className()),"SystemDictionary"===t)return e.pointers[1].pointers;if("SmalltalkImage"===t){var i=e.pointers[0],r=i.sqClass.className();if("SystemDictionary"===r)return i.pointers[1].pointers;if("Environment"===r)return i.pointers[2].pointers[1].pointers}return console.warn("cannot find global dict"),[]},initCompiler:function(){if(!Squeak.Compiler)return console.warn("Squeak.Compiler not loaded, using interpreter only");try{if(42!==new Function("return 42")())return console.warn("function constructor not working, disabling JIT")}catch(e){return console.warn("disabling JIT: "+e)}var e=this.image.oldSpaceCount/(this.startupTime-this.image.startupTime);if(e<10)return console.warn("Slow machine detected (loaded "+(1e3*e|0)+" objects/sec), using interpreter only");try{console.log("squeak: initializing JIT compiler"),this.compiler=new Squeak.Compiler(this)}catch(e){console.warn("Compiler "+e)}},hackImage:function(){[].forEach(function(e){var t=this.findMethod(e.method);t&&(t.pointers[0]|=e.primitive,console.warn("Hacking "+e.method))},this),this.findMethod("PharoClassInstaller>>initialize")&&(Squeak.platformName="unix")}},"interpreting",{interpretOne:function(e){if(!this.method.compiled){var t,i,r=this.Squeak;if(this.byteCodeCount++,(t=this.nextByte())<128)switch(t){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return void this.push(this.receiver.pointers[15&t]);case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:return void this.push(this.homeContext.pointers[r.Context_tempFrameStart+(15&t)]);case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 58:case 59:case 60:case 61:case 62:case 63:return void this.push(this.method.methodGetLiteral(31&t));case 64:case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:return void this.push(this.method.methodGetLiteral(31&t).pointers[r.Assn_value]);case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:return this.receiver.dirty=!0,void(this.receiver.pointers[7&t]=this.pop());case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:return void(this.homeContext.pointers[r.Context_tempFrameStart+(7&t)]=this.pop());case 112:return void this.push(this.receiver);case 113:return void this.push(this.trueObj);case 114:return void this.push(this.falseObj);case 115:return void this.push(this.nilObj);case 116:return void this.push(-1);case 117:return void this.push(0);case 118:return void this.push(1);case 119:return void this.push(2);case 120:return void this.doReturn(this.receiver);case 121:return void this.doReturn(this.trueObj);case 122:return void this.doReturn(this.falseObj);case 123:return void this.doReturn(this.nilObj);case 124:return void this.doReturn(this.pop());case 125:return void this.doReturn(this.pop(),this.activeContext.pointers[r.BlockContext_caller]);case 126:case 127:return void this.nono()}else switch(t){case 128:return void this.extendedPush(this.nextByte());case 129:return void this.extendedStore(this.nextByte());case 130:return void this.extendedStorePop(this.nextByte());case 131:return i=this.nextByte(),void this.send(this.method.methodGetSelector(31&i),i>>5,!1);case 132:return void this.doubleExtendedDoAnything(this.nextByte());case 133:return i=this.nextByte(),void this.send(this.method.methodGetSelector(31&i),i>>5,!0);case 134:return i=this.nextByte(),void this.send(this.method.methodGetSelector(63&i),i>>6,!1);case 135:return void this.pop();case 136:return void this.push(this.top());case 137:return void this.push(this.exportThisContext());case 138:return void this.pushNewArray(this.nextByte());case 139:return void this.callPrimBytecode();case 140:return i=this.nextByte(),void this.push(this.homeContext.pointers[r.Context_tempFrameStart+this.nextByte()].pointers[i]);case 141:return i=this.nextByte(),void(this.homeContext.pointers[r.Context_tempFrameStart+this.nextByte()].pointers[i]=this.top());case 142:return i=this.nextByte(),void(this.homeContext.pointers[r.Context_tempFrameStart+this.nextByte()].pointers[i]=this.pop());case 143:return void this.pushClosureCopy();case 144:case 145:case 146:case 147:case 148:case 149:case 150:case 151:return void(this.pc+=1+(7&t));case 152:case 153:case 154:case 155:case 156:case 157:case 158:case 159:return void this.jumpIfFalse(1+(7&t));case 160:case 161:case 162:case 163:case 164:case 165:case 166:case 167:return i=this.nextByte(),this.pc+=256*((7&t)-4)+i,void((7&t)<4&&this.interruptCheckCounter--<=0&&this.checkForInterrupts());case 168:case 169:case 170:case 171:return void this.jumpIfTrue(256*(3&t)+this.nextByte());case 172:case 173:case 174:case 175:return void this.jumpIfFalse(256*(3&t)+this.nextByte());case 176:return this.success=!0,this.resultIsFloat=!1,void(this.pop2AndPushNumResult(this.stackIntOrFloat(1)+this.stackIntOrFloat(0))||this.sendSpecial(15&t));case 177:return this.success=!0,this.resultIsFloat=!1,void(this.pop2AndPushNumResult(this.stackIntOrFloat(1)-this.stackIntOrFloat(0))||this.sendSpecial(15&t));case 178:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)<this.stackIntOrFloat(0))||this.sendSpecial(15&t));case 179:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)>this.stackIntOrFloat(0))||this.sendSpecial(15&t));case 180:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)<=this.stackIntOrFloat(0))||this.sendSpecial(15&t));case 181:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)>=this.stackIntOrFloat(0))||this.sendSpecial(15&t));case 182:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)===this.stackIntOrFloat(0))||this.sendSpecial(15&t));case 183:return this.success=!0,void(this.pop2AndPushBoolResult(this.stackIntOrFloat(1)!==this.stackIntOrFloat(0))||this.sendSpecial(15&t));case 184:return this.success=!0,this.resultIsFloat=!1,void(this.pop2AndPushNumResult(this.stackIntOrFloat(1)*this.stackIntOrFloat(0))||this.sendSpecial(15&t));case 185:return this.success=!0,void(this.pop2AndPushIntResult(this.quickDivide(this.stackInteger(1),this.stackInteger(0)))||this.sendSpecial(15&t));case 186:return this.success=!0,void(this.pop2AndPushIntResult(this.mod(this.stackInteger(1),this.stackInteger(0)))||this.sendSpecial(15&t));case 187:return this.success=!0,void(this.primHandler.primitiveMakePoint(1,!0)||this.sendSpecial(15&t));case 188:return this.success=!0,void(this.pop2AndPushIntResult(this.safeShift(this.stackInteger(1),this.stackInteger(0)))||this.sendSpecial(15&t));case 189:return this.success=!0,void(this.pop2AndPushIntResult(this.div(this.stackInteger(1),this.stackInteger(0)))||this.sendSpecial(15&t));case 190:return this.success=!0,void(this.pop2AndPushIntResult(this.stackInteger(1)&this.stackInteger(0))||this.sendSpecial(15&t));case 191:return this.success=!0,void(this.pop2AndPushIntResult(this.stackInteger(1)|this.stackInteger(0))||this.sendSpecial(15&t));case 192:case 193:case 194:case 195:case 196:case 197:case 198:case 199:case 200:case 201:case 202:case 203:case 204:case 205:case 206:case 207:return void(this.primHandler.quickSendOther(this.receiver,15&t)||this.sendSpecial(16+(15&t)));case 208:case 209:case 210:case 211:case 212:case 213:case 214:case 215:case 216:case 217:case 218:case 219:case 220:case 221:case 222:case 223:return void this.send(this.method.methodGetSelector(15&t),0,!1);case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:return void this.send(this.method.methodGetSelector(15&t),1,!1);case 240:case 241:case 242:case 243:case 244:case 245:case 246:case 247:case 248:case 249:case 250:case 251:case 252:case 253:case 254:case 255:return void this.send(this.method.methodGetSelector(15&t),2,!1)}throw Error("not a bytecode: "+t)}if(e){if(!this.compiler.enableSingleStepping(this.method))return this.method.compiled=null,this.interpretOne(e);this.breakNow()}this.method.compiled(this)},interpret:function(e,t){if(this.frozen)return"frozen";for(this.isIdle=!1,this.breakOutOfInterpreter=!1,this.breakOutTick=this.primHandler.millisecondClockValue()+(e||500);!1===this.breakOutOfInterpreter;)this.method.compiled?this.method.compiled(this):this.interpretOne();if("function"==typeof this.breakOutOfInterpreter)return this.breakOutOfInterpreter(t);var i="break"==this.breakOutOfInterpreter?"break":this.isIdle?this.nextWakeupTick?Math.max(1,this.nextWakeupTick-this.primHandler.millisecondClockValue()):"sleep":0;return t&&t(i),i},goIdle:function(){var e=0!==this.nextWakeupTick;this.forceInterruptCheck(),this.checkForInterrupts();var t=0!==this.nextWakeupTick;this.isIdle=t||!e,this.breakOut()},freeze:function(e){var t;this.frozen=!0,this.breakOutOfInterpreter=function(e){if(!e)throw Error("need function to restart interpreter");return t=e,"frozen"}.bind(this);var i=function(){if(this.frozen=!1,!t)throw Error("no continue function");t(0)}.bind(this);return e&&self.setTimeout(function(){e(i)},0),i},breakOut:function(){this.breakOutOfInterpreter=this.breakOutOfInterpreter||!0},nextByte:function(){return this.method.bytes[this.pc++]},nono:function(){throw Error("Oh No!")},forceInterruptCheck:function(){this.interruptCheckCounter=-1e3},checkForInterrupts:function(){var e=this.primHandler.millisecondClockValue();e<this.lastTick&&(this.nextPollTick=e+(this.nextPollTick-this.lastTick),this.breakOutTick=e+(this.breakOutTick-this.lastTick),0!==this.nextWakeupTick&&(this.nextWakeupTick=e+(this.nextWakeupTick-this.lastTick))),-100<this.interruptCheckCounter&&(e-this.lastTick<this.interruptChecksEveryNms?this.interruptCheckCounterFeedBackReset+=10:this.interruptCheckCounterFeedBackReset<=1e3?this.interruptCheckCounterFeedBackReset=1e3:this.interruptCheckCounterFeedBackReset-=12),this.interruptCheckCounter=this.interruptCheckCounterFeedBackReset,this.lastTick=e,this.interruptPending&&(this.interruptPending=!1,(t=this.specialObjects[Squeak.splOb_TheInterruptSemaphore]).isNil||this.primHandler.synchronousSignal(t));0!==this.nextWakeupTick&&e>=this.nextWakeupTick&&(this.nextWakeupTick=0,(t=this.specialObjects[Squeak.splOb_TheTimerSemaphore]).isNil||this.primHandler.synchronousSignal(t));if(0<this.pendingFinalizationSignals){var t=this.specialObjects[Squeak.splOb_TheFinalizationSemaphore];this.pendingFinalizationSignals=0,t.isNil||this.primHandler.synchronousSignal(t)}0<this.primHandler.semaphoresToSignal.length&&this.primHandler.signalExternalSemaphores(),!this.method.compiled&&this.compiler&&this.compiler.compile(this.method),e>=this.breakOutTick&&this.breakOut()},extendedPush:function(e){var t=63&e;switch(e>>6){case 0:this.push(this.receiver.pointers[t]);break;case 1:this.push(this.homeContext.pointers[Squeak.Context_tempFrameStart+t]);break;case 2:this.push(this.method.methodGetLiteral(t));break;case 3:this.push(this.method.methodGetLiteral(t).pointers[Squeak.Assn_value])}},extendedStore:function(e){var t=63&e;switch(e>>6){case 0:this.receiver.dirty=!0,this.receiver.pointers[t]=this.top();break;case 1:this.homeContext.pointers[Squeak.Context_tempFrameStart+t]=this.top();break;case 2:this.nono();break;case 3:var i=this.method.methodGetLiteral(t);i.dirty=!0,i.pointers[Squeak.Assn_value]=this.top()}},extendedStorePop:function(e){var t=63&e;switch(e>>6){case 0:this.receiver.dirty=!0,this.receiver.pointers[t]=this.pop();break;case 1:this.homeContext.pointers[Squeak.Context_tempFrameStart+t]=this.pop();break;case 2:this.nono();break;case 3:var i=this.method.methodGetLiteral(t);i.dirty=!0,i.pointers[Squeak.Assn_value]=this.pop()}},doubleExtendedDoAnything:function(e){var t=this.nextByte();switch(e>>5){case 0:this.send(this.method.methodGetSelector(t),31&e,!1);break;case 1:this.send(this.method.methodGetSelector(t),31&e,!0);break;case 2:this.push(this.receiver.pointers[t]);break;case 3:this.push(this.method.methodGetLiteral(t));break;case 4:this.push(this.method.methodGetLiteral(t).pointers[Squeak.Assn_value]);break;case 5:this.receiver.dirty=!0,this.receiver.pointers[t]=this.top();break;case 6:this.receiver.dirty=!0,this.receiver.pointers[t]=this.pop();break;case 7:var i=this.method.methodGetLiteral(t);i.dirty=!0,i.pointers[Squeak.Assn_value]=this.top()}},jumpIfTrue:function(e){var t=this.pop();t.isTrue?this.pc+=e:t.isFalse||(this.push(t),this.send(this.specialObjects[Squeak.splOb_SelectorMustBeBoolean],0,!1))},jumpIfFalse:function(e){var t=this.pop();t.isFalse?this.pc+=e:t.isTrue||(this.push(t),this.send(this.specialObjects[Squeak.splOb_SelectorMustBeBoolean],0,!1))},sendSpecial:function(e){this.send(this.specialSelectors[2*e],this.specialSelectors[2*e+1],!1)},callPrimBytecode:function(){this.pc+=2,this.primFailCode&&(129===this.method.bytes[this.pc]&&this.stackTopPut(this.getErrorObjectFromPrimFailCode()),this.primFailCode=0)},getErrorObjectFromPrimFailCode:function(){var e=this.specialObjects[Squeak.splOb_PrimErrTableIndex];if(e&&e.pointers){var t=e.pointers[this.primFailCode-1];if(t)return t}return this.primFailCode}},"closures",{pushNewArray:function(e){var t=127<e,i=127&e,r=this.instantiateClass(this.specialObjects[Squeak.splOb_ClassArray],i);if(t){for(var a=0;a<i;a++)r.pointers[a]=this.stackValue(i-a-1);this.popN(i)}this.push(r)},pushClosureCopy:function(){var e=this.nextByte(),t=15&e,i=e>>4,r=256*this.nextByte()+this.nextByte(),a=this.encodeSqueakPC(this.pc,this.method),s=this.newClosure(t,a,i);if(s.pointers[Squeak.Closure_outerContext]=this.activeContext,(this.reclaimableContextCount=0)<i){for(var n=0;n<i;n++)s.pointers[Squeak.Closure_firstCopiedValue+n]=this.stackValue(i-n-1);this.popN(i)}this.pc+=r,this.push(s)},newClosure:function(e,t,i){var r=this.instantiateClass(this.specialObjects[Squeak.splOb_ClassBlockClosure],i);return r.pointers[Squeak.Closure_startpc]=t,r.pointers[Squeak.Closure_numArgs]=e,r}},"sending",{send:function(e,t,i){var r=this.stackValue(t),a=this.getClass(r);i&&(a=(a=this.method.methodClassForSuper()).pointers[Squeak.Class_superclass]);var s=this.findSelectorInClass(e,t,a);s.primIndex&&(this.verifyAtSelector=e,this.verifyAtClass=a),this.executeNewMethod(r,s.method,s.argCount,s.primIndex,s.mClass,e)},sendAsPrimitiveFailure:function(e,t,i){this.executeNewMethod(e,t,i,0)},findSelectorInClass:function(e,t,i){var r=this.findMethodCacheEntry(e,i);if(r.method)return r;for(var a,s=i;!s.isNil;){if((a=s.pointers[Squeak.Class_mdict]).isNil){var n=this.specialObjects[Squeak.splOb_SelectorCannotInterpret],o=this.createActualMessage(e,t,i);return this.popNandPush(t,o),this.findSelectorInClass(n,1,s.superclass())}var u=this.lookupSelectorInDict(a,e);if(!u.isNil)return this.currentSelector=e,this.currentLookupClass=i,r.method=u,r.primIndex=u.isMethod()?u.methodPrimitiveIndex():248,r.argCount=t,r.mClass=s,r;s=s.superclass()}var l=this.specialObjects[Squeak.splOb_SelectorDoesNotUnderstand];if(e===l)throw Error("Recursive not understood error encountered");var c=this.createActualMessage(e,t,i);return this.popNandPush(t,c),this.findSelectorInClass(l,1,i)},lookupSelectorInDict:function(e,t){for(var i=e.pointersSize(),r=(i-Squeak.MethodDict_selectorStart-1&t.hash)+Squeak.MethodDict_selectorStart,a=!1;;){var s=e.pointers[r];if(s===t)return e.pointers[Squeak.MethodDict_array].pointers[r-Squeak.MethodDict_selectorStart];if(s.isNil)return this.nilObj;if(++r===i){if(a)return this.nilObj;r=Squeak.MethodDict_selectorStart,a=!0}}},executeNewMethod:function(e,t,i,r,a,s){if(this.sendCount++,t===this.breakOnMethod&&this.breakNow("executing method "+this.printMethod(t,a,s)),this.logSends&&console.log(this.sendCount+" "+this.printMethod(t,a,s)),this.breakOnContextChanged&&(this.breakOnContextChanged=!1,this.breakNow()),!(0<r&&this.tryPrimitive(r,i,t))){var n=this.allocateOrRecycleContext(t.methodNeedsLargeFrame()),o=t.methodTempCount(),u=Squeak.Context_tempFrameStart+o-1;if(n.pointers[Squeak.Context_method]=t,n.pointers[Squeak.BlockContext_initialIP]=this.nilObj,n.pointers[Squeak.Context_sender]=this.activeContext,this.arrayCopy(this.activeContext.pointers,this.sp-i,n.pointers,Squeak.Context_tempFrameStart-1,i+1),this.arrayFill(n.pointers,Squeak.Context_tempFrameStart+i,Squeak.Context_tempFrameStart+o,this.nilObj),this.popN(i+1),this.reclaimableContextCount++,this.storeContextRegisters(),this.activeContext=n,this.activeContext.dirty=!0,this.homeContext=n,this.method=t,this.pc=0,this.sp=u,this.receiver=n.pointers[Squeak.Context_receiver],this.receiver!==e)throw Error("receivers don't match");!t.compiled&&this.compiler&&this.compiler.compile(t,a,s),this.interruptCheckCounter--<=0&&this.checkForInterrupts()}},doReturn:function(e,t){if(!t){var i=this.homeContext;if(this.hasClosures)for(var r;!(r=i.pointers[Squeak.Context_closure]).isNil;)i=r.pointers[Squeak.Closure_outerContext];t=i.pointers[Squeak.Context_sender]}if(t.isNil||t.pointers[Squeak.Context_instructionPointer].isNil)return this.cannotReturn(e);for(var a,s=this.activeContext.pointers[Squeak.Context_sender];s!==t;){if(s.isNil)return this.cannotReturn(e);if(this.isUnwindMarked(s))return this.aboutToReturnThrough(e,s);s=s.pointers[Squeak.Context_sender]}for(s=this.activeContext;s!==t;)this.breakOnContextReturned===s&&(this.breakOnContextReturned=null,this.breakNow()),a=s.pointers[Squeak.Context_sender],s.pointers[Squeak.Context_sender]=this.nilObj,s.pointers[Squeak.Context_instructionPointer]=this.nilObj,0<this.reclaimableContextCount&&(this.reclaimableContextCount--,this.recycleIfPossible(s)),s=a;this.activeContext=s,this.activeContext.dirty=!0,this.fetchContextRegisters(this.activeContext),this.push(e),this.breakOnContextChanged&&(this.breakOnContextChanged=!1,this.breakNow())},aboutToReturnThrough:function(e,t){this.push(this.exportThisContext()),this.push(e),this.push(t);var i=this.specialObjects[Squeak.splOb_SelectorAboutToReturn];this.send(i,2)},cannotReturn:function(e){this.push(this.exportThisContext()),this.push(e);var t=this.specialObjects[Squeak.splOb_SelectorCannotReturn];this.send(t,1)},tryPrimitive:function(e,t,i){if(255<e&&e<520){if(264<=e)return this.popNandPush(1,this.top().pointers[e-264]),!0;switch(e){case 256:return!0;case 257:return this.popNandPush(1,this.trueObj),!0;case 258:return this.popNandPush(1,this.falseObj),!0;case 259:return this.popNandPush(1,this.nilObj),!0}return this.popNandPush(1,e-261),!0}return this.primHandler.doPrimitive(e,t,i)},createActualMessage:function(e,t,i){var r=this.instantiateClass(this.specialObjects[Squeak.splOb_ClassMessage],0),a=this.instantiateClass(this.specialObjects[Squeak.splOb_ClassArray],t);return this.arrayCopy(this.activeContext.pointers,this.sp-t+1,a.pointers,0,t),r.pointers[Squeak.Message_selector]=e,r.pointers[Squeak.Message_arguments]=a,r.pointers.length>Squeak.Message_lookupClass&&(r.pointers[Squeak.Message_lookupClass]=i),r},primitivePerform:function(e){var t=this.stackValue(e-1),i=this.stackValue(e),r=e-1,a=this.sp-r,s=this.activeContext.pointers;this.arrayCopy(s,1+a,s,a,r),this.sp--;var n=this.findSelectorInClass(t,r,this.getClass(i));return this.executeNewMethod(i,n.method,n.argCount,n.primIndex,n.mClass,t),!0},primitivePerformWithArgs:function(e,t){var i=t?3:2,r=this.stackValue(i),a=this.stackValue(i-1),s=this.stackValue(i-2);if(s.sqClass!==this.specialObjects[Squeak.splOb_ClassArray])return!1;var n=t?this.top():this.getClass(r);if(t)for(var o=this.getClass(r);o!==n;)if((o=o.pointers[Squeak.Class_superclass]).isNil)return!1;var u=s.pointersSize(),l=this.sp-(i-1),c=this.activeContext.pointers;this.arrayCopy(s.pointers,0,c,l,u),this.sp+=u-e;var f=this.findSelectorInClass(a,u,n);return this.executeNewMethod(r,f.method,f.argCount,f.primIndex,f.mClass,a),!0},primitiveInvokeObjectAsMethod:function(e,t){for(var i=this.instantiateClass(this.specialObjects[Squeak.splOb_ClassArray],e),r=0;r<e;r++)i.pointers[e-r-1]=this.pop();var a=this.pop(),s=this.currentSelector,n=this.specialObjects[Squeak.splOb_SelectorRunWithIn];return this.push(t),this.push(s),this.push(i),this.push(a),this.send(n,3,!1),!0},findMethodCacheEntry:function(e,t){var i;this.methodCacheRandomish=this.methodCacheRandomish+1&3;for(var r=(e.hash^t.hash)&this.methodCacheMask,a=r,s=0;s<4;s++){if((i=this.methodCache[a]).selector===e&&i.lkupClass===t)return i;s===this.methodCacheRandomish&&(r=a),a=a+e.hash&this.methodCacheMask}return(i=this.methodCache[r]).lkupClass=t,i.selector=e,i.method=null,i},flushMethodCache:function(){for(var e=0;e<this.methodCacheSize;e++)this.methodCache[e].selector=null,this.methodCache[e].method=null;return!0},flushMethodCacheForSelector:function(e){for(var t=0;t<this.methodCacheSize;t++)this.methodCache[t].selector===e&&(this.methodCache[t].selector=null,this.methodCache[t].method=null);return!0},flushMethodCacheForMethod:function(e){for(var t=0;t<this.methodCacheSize;t++)this.methodCache[t].method===e&&(this.methodCache[t].selector=null,this.methodCache[t].method=null);return!0},flushMethodCacheAfterBecome:function(e){this.flushMethodCache()}},"contexts",{isUnwindMarked:function(e){return!!this.isMethodContext(e)&&198==e.pointers[Squeak.Context_method].methodPrimitiveIndex()},newActiveContext:function(e){this.storeContextRegisters(),this.activeContext=e,this.activeContext.dirty=!0,this.fetchContextRegisters(e)},exportThisContext:function(){return this.storeContextRegisters(),this.reclaimableContextCount=0,this.activeContext},fetchContextRegisters:function(e){var t=e.pointers[Squeak.Context_method];this.isSmallInt(t)?(this.homeContext=e.pointers[Squeak.BlockContext_home],t=this.homeContext.pointers[Squeak.Context_method]):this.homeContext=e,this.receiver=this.homeContext.pointers[Squeak.Context_receiver],this.method=t,this.pc=this.decodeSqueakPC(e.pointers[Squeak.Context_instructionPointer],t),this.sp=this.decodeSqueakSP(e.pointers[Squeak.Context_stackPointer])},storeContextRegisters:function(){this.activeContext.pointers[Squeak.Context_instructionPointer]=this.encodeSqueakPC(this.pc,this.method),this.activeContext.pointers[Squeak.Context_stackPointer]=this.encodeSqueakSP(this.sp)},encodeSqueakPC:function(e,t){return e+4*t.pointers.length+1},decodeSqueakPC:function(e,t){return e-4*t.pointers.length-1},encodeSqueakSP:function(e){return e-(Squeak.Context_tempFrameStart-1)},decodeSqueakSP:function(e){return e+(Squeak.Context_tempFrameStart-1)},recycleIfPossible:function(e){if(this.isMethodContext(e))if(e.pointersSize()===Squeak.Context_tempFrameStart+Squeak.Context_smallFrameSize)e.pointers[0]=this.freeContexts,this.freeContexts=e;else{if(e.pointersSize()!==Squeak.Context_tempFrameStart+Squeak.Context_largeFrameSize)return;e.pointers[0]=this.freeLargeContexts,this.freeLargeContexts=e}},allocateOrRecycleContext:function(e){var t;return e?this.freeLargeContexts.isNil?(this.nAllocatedContexts++,this.instantiateClass(this.specialObjects[Squeak.splOb_ClassMethodContext],Squeak.Context_largeFrameSize)):(t=this.freeLargeContexts,this.freeLargeContexts=t.pointers[0],this.nRecycledContexts++,t):this.freeContexts.isNil?(this.nAllocatedContexts++,this.instantiateClass(this.specialObjects[Squeak.splOb_ClassMethodContext],Squeak.Context_smallFrameSize)):(t=this.freeContexts,this.freeContexts=t.pointers[0],this.nRecycledContexts++,t)}},"stack access",{pop:function(){return this.activeContext.pointers[this.sp--]},popN:function(e){this.sp-=e},push:function(e){this.activeContext.pointers[++this.sp]=e},popNandPush:function(e,t){this.activeContext.pointers[this.sp-=e-1]=t},top:function(){return this.activeContext.pointers[this.sp]},stackTopPut:function(e){this.activeContext.pointers[this.sp]=e},stackValue:function(e){return this.activeContext.pointers[this.sp-e]},stackInteger:function(e){return this.checkSmallInt(this.stackValue(e))},stackIntOrFloat:function(e){var t=this.stackValue(e);if("number"==typeof t)return t;if(t.isFloat)return this.resultIsFloat=!0,t.float;var i=t.bytes;if(i&&4==i.length){for(var r=0,a=3;0<=a;a--)r=256*r+i[a];if(t.sqClass===this.specialObjects[Squeak.splOb_ClassLargePositiveInteger])return r;if(t.sqClass===this.specialObjects[Squeak.splOb_ClassLargeNegativeInteger])return-r}return this.success=!1,0},pop2AndPushIntResult:function(e){return!(!this.success||!this.canBeSmallInt(e))&&(this.popNandPush(2,e),!0)},pop2AndPushNumResult:function(e){if(this.success){if(this.resultIsFloat)return this.popNandPush(2,this.primHandler.makeFloat(e)),!0;if(e>=Squeak.MinSmallInt&&e<=Squeak.MaxSmallInt)return this.popNandPush(2,e),!0;if(-4294967295<=e&&e<=4294967295){var t=e<0,i=t?-e:e,r=t?Squeak.splOb_ClassLargeNegativeInteger:Squeak.splOb_ClassLargePositiveInteger,a=this.instantiateClass(this.specialObjects[r],4),s=a.bytes;return s[0]=255&i,s[1]=i>>8&255,s[2]=i>>16&255,s[3]=i>>24&255,this.popNandPush(2,a),!0}}return!1},pop2AndPushBoolResult:function(e){return!!this.success&&(this.popNandPush(2,e?this.trueObj:this.falseObj),!0)}},"numbers",{getClass:function(e){return this.isSmallInt(e)?this.specialObjects[Squeak.splOb_ClassInteger]:e.sqClass},canBeSmallInt:function(e){return e>=Squeak.MinSmallInt&&e<=Squeak.MaxSmallInt},isSmallInt:function(e){return"number"==typeof e},checkSmallInt:function(e){return"number"==typeof e?e:(this.success=!1,1)},quickDivide:function(e,t){if(0===t)return Squeak.NonSmallInt;var i=e/t|0;return i*t===e?i:Squeak.NonSmallInt},div:function(e,t){return 0===t?Squeak.NonSmallInt:Math.floor(e/t)},mod:function(e,t){return 0===t?Squeak.NonSmallInt:e-Math.floor(e/t)*t},safeShift:function(e,t){if(t<0)return t<-31?e<0?-1:0:e>>-t;if(31<t)return 0==e?0:Squeak.NonSmallInt;var i=e<<t;return i>>t===e?i:Squeak.NonSmallInt}},"utils",{isContext:function(e){return e.sqClass===this.specialObjects[Squeak.splOb_ClassMethodContext]||e.sqClass===this.specialObjects[Squeak.splOb_ClassBlockContext]},isMethodContext:function(e){return e.sqClass===this.specialObjects[Squeak.splOb_ClassMethodContext]},instantiateClass:function(e,t){return this.image.instantiateClass(e,t,this.nilObj)},arrayFill:function(e,t,i,r){for(var a=t;a<i;a++)e[a]=r},arrayCopy:function(e,t,i,r,a){if(e===i&&t<r)for(var s=a-1;0<=s;s--)i[r+s]=e[t+s];else for(s=0;s<a;s++)i[r+s]=e[t+s]}},"debugging",{addMessage:function(e){return this.messages[e]?++this.messages[e]:this.messages[e]=1},warnOnce:function(e){1==this.addMessage(e)&&console.warn(e)},printMethod:function(r,e,t){return t?e.className()+">>"+t.bytesAsString():(r=r||this.activeContext.contextMethod(),this.allMethodsDo(function(e,t,i){if(t===r)return a=e.className()+">>"+i.bytesAsString()}),a||(e?"("+e.pointers[Squeak.Context_receiver]+")>>?":"?>>?"));var a},allInstancesOf:function(e,t){"string"==typeof e&&(e=this.globalNamed(e));for(var i=[],r=this.image.someInstanceOf(e);r;)t?t(r):i.push(r),r=this.image.nextInstanceAfter(r);return i},globalNamed:function(i){return this.allGlobalsDo(function(e,t){if(e.bytesAsString()===i)return t})},allGlobalsDo:function(e){for(var t=this.globals,i=0;i<t.length;i++){var r=t[i];if(!r.isNil){var a=e(r.pointers[0],r.pointers[1]);if(a)return a}}},allMethodsDo:function(f){this.allGlobalsDo(function(e,t){if(t.pointers&&9<=t.pointers.length)for(var i=[t,t.sqClass],r=0;r<i.length;r++){var a=i[r],s=a.pointers[1];if(s.pointers&&s.pointers[1]){var n=s.pointers[1].pointers;if(n){var o=s.pointers;if(n.length+2===o.length)for(var u=0;u<n.length;u++){var l=n[u],c=o[2+u];if(l.isMethod&&l.isMethod())if(c.bytesSize&&c.bytesSize())if(f.call(null,a,l,c))return!0}}}}})},printStack:function(e,t){"number"==typeof e&&(t=e,e=null),e=e||this.activeContext,t=t||100;for(var i=[],r=Math.max(t,1e6);!e.isNil&&0<r--;)i.push(e),e=e.pointers[Squeak.Context_sender];i.length>t+200&&(e.isNil||i.push("..."),i=i.slice(0,t).concat(["..."]).concat(i.slice(-200)));for(var a=[],s=i.length;0<s--;){if((e=i[s]).pointers){var n="",o=e.pointers[Squeak.Context_method];"number"==typeof o?(o=e.pointers[Squeak.BlockContext_home].pointers[Squeak.Context_method],n="[] in "):e.pointers[Squeak.Context_closure].isNil||(n="[] in "),a.push(n+this.printMethod(o,e)+"\n")}else a.push("...\n")}return a.join("")},findMethod:function(e){var r,a=e.split(">>")[0],s=e.split(">>")[1];return this.allMethodsDo(function(e,t,i){if(s.length==i.bytesSize()&&s==i.bytesAsString()&&a==e.className())return r=t}),r},breakNow:function(e){e&&console.log("Break: "+e),this.breakOutOfInterpreter="break"},breakOn:function(e){return this.breakOnMethod=e&&this.findMethod(e)},breakOnReturnFromThisContext:function(){this.breakOnContextChanged=!1,this.breakOnContextReturned=this.activeContext},breakOnSendOrReturn:function(){this.breakOnContextChanged=!0,this.breakOnContextReturned=null},printActiveContext:function(i){function e(e){var t=e.sqInstName?e.sqInstName():e.toString();return(t=JSON.stringify(t).slice(1,-1)).length>i-3&&(t=t.slice(0,i-3)+"..."),t}i=i||72;for(var t=this.activeContext,r="number"==typeof t.pointers[Squeak.BlockContext_argumentCount],a=t.pointers[Squeak.Context_closure],s=!r&&!a.isNil,n=r?t.pointers[Squeak.BlockContext_home]:t,o=s?a.pointers[Squeak.Closure_numArgs]:n.pointers[Squeak.Context_method].methodTempCount(),u=this.decodeSqueakSP(0),l=n.contextSizeWithStack(this)-1,c=u+1,f=c+o-1,h="",p=u;p<=l;p++){var d="";p==u?d="=rcvr":p<=f&&(d="=tmp"+(p-c)),h+="\nctx["+p+"]"+d+": "+e(n.pointers[p])}if(r){h+="\n";var b=t.pointers[3],m=this.decodeSqueakSP(1),v=m+b;for(p=m;p<=this.sp;p++){d="";p<=v&&(d="=arg"+(p-m)),h+="\nblk["+p+"]"+d+": "+e(t.pointers[p])}}return h},printAllProcesses:function(){for(var e=this.specialObjects[Squeak.splOb_SchedulerAssociation].pointers[Squeak.Assn_value],t=e.pointers[Squeak.ProcSched_activeProcess],i="Active: "+this.printProcess(t,!0),r=e.pointers[Squeak.ProcSched_processLists].pointers,a=r.length-1;0<=a;a--)for(var s=r[a].pointers[Squeak.LinkedList_firstLink];!s.isNil;)i+="\nRunnable: "+this.printProcess(s),s=s.pointers[Squeak.Link_nextLink];for(var n=this.specialObjects[Squeak.splOb_ClassSemaphore],o=this.image.someInstanceOf(n);o;){for(s=o.pointers[Squeak.LinkedList_firstLink];!s.isNil;)i+="\nWaiting: "+this.printProcess(s),s=s.pointers[Squeak.Link_nextLink];o=this.image.nextInstanceAfter(o)}return i},printProcess:function(e,t){var i=e.pointers[Squeak.Proc_suspendedContext],r=e.pointers[Squeak.Proc_priority],a=this.printStack(t?null:i);return e.toString()+" at priority "+r+"\n"+a},printByteCodes:function(e,t,i,r){return e=e||this.method,new Squeak.InstructionPrinter(e,this).printInstructions(t,i,r)},willSendOrReturn:function(){var e=this.method.bytes[this.pc];if(120<=e&&e<=125)return!0;if(e<131||200==e)return!1;if(176<=e)return!0;if(e<=134){var t;if(132===e){if(1<this.method.bytes[this.pc+1]>>5)return!1;t=this.method.bytes[this.pc+2]}else t=this.method.bytes[this.pc+1]&(134===e?63:31);if("blockCopy:"!==this.method.methodGetLiteral(t).bytesAsString())return!0}return!1},nextSendSelector:function(){var e,t=this.method.bytes[this.pc];if(t<131||200==t)return null;if(208<=t)e=this.method.methodGetLiteral(15&t);else if(176<=t)e=this.specialSelectors[2*(t-176)];else if(t<=134){var i;if(132===t){if(1<this.method.bytes[this.pc+1]>>5)return null;i=this.method.bytes[this.pc+2]}else i=this.method.bytes[this.pc+1]&(134===t?63:31);e=this.method.methodGetLiteral(i)}if(e){var r=e.bytesAsString();if("blockCopy:"!==r)return r}}}),Object.subclass("Squeak.InterpreterProxy","initialization",{VM_PROXY_MAJOR:1,VM_PROXY_MINOR:11,initialize:function(t){this.vm=t,this.remappableOops=[],Object.defineProperty(this,"successFlag",{get:function(){return t.primHandler.success},set:function(e){t.primHandler.success=e}})},majorVersion:function(){return this.VM_PROXY_MAJOR},minorVersion:function(){return this.VM_PROXY_MINOR}},"success",{failed:function(){return!this.successFlag},primitiveFail:function(){this.successFlag=!1},primitiveFailFor:function(e){this.successFlag=!1},success:function(e){e||(this.successFlag=!1)}},"stack access",{pop:function(e){this.vm.popN(e)},popthenPush:function(e,t){this.vm.popNandPush(e,t)},push:function(e){this.vm.push(e)},pushBool:function(e){this.vm.push(e?this.vm.trueObj:this.vm.falseObj)},pushInteger:function(e){this.vm.push(e)},pushFloat:function(e){this.vm.push(this.floatObjectOf(e))},stackValue:function(e){return this.vm.stackValue(e)},stackIntegerValue:function(e){var t=this.vm.stackValue(e);return"number"==typeof t?t:(this.successFlag=!1,0)},stackFloatValue:function(e){this.vm.success=!0;var t=this.vm.stackIntOrFloat(e);return this.vm.success?t:(this.successFlag=!1,0)},stackObjectValue:function(e){var t=this.vm.stackValue(e);return"number"!=typeof t?t:(this.successFlag=!1,this.vm.nilObj)},stackBytes:function(e){var t=this.vm.stackValue(e);return t.bytes?t.bytes:("number"!=typeof t&&t.isBytes()||(this.successFlag=!1),[])},stackWords:function(e){var t=this.vm.stackValue(e);return t.words?t.words:("number"!=typeof t&&t.isWords()||(this.successFlag=!1),[])},stackInt32Array:function(e){var t=this.vm.stackValue(e);return t.words?t.wordsAsInt32Array():("number"!=typeof t&&t.isWords()||(this.successFlag=!1),[])},stackInt16Array:function(e){var t=this.vm.stackValue(e);return t.words?t.wordsAsInt16Array():("number"!=typeof t&&t.isWords()||(this.successFlag=!1),[])},stackUint16Array:function(e){var t=this.vm.stackValue(e);return t.words?t.wordsAsUint16Array():("number"!=typeof t&&t.isWords()||(this.successFlag=!1),[])}},"object access",{isBytes:function(e){return"number"!=typeof e&&e.isBytes()},isWords:function(e){return"number"!=typeof e&&e.isWords()},isWordsOrBytes:function(e){return"number"!=typeof e&&e.isWordsOrBytes()},isPointers:function(e){return"number"!=typeof e&&e.isPointers()},isIntegerValue:function(e){return"number"==typeof e&&-1073741824<=e&&e<=1073741823},isArray:function(e){return e.sqClass===this.vm.specialObjects[Squeak.splOb_ClassArray]},isMemberOf:function(e,t){var i=e.sqClass.pointers[Squeak.Class_name].bytes;if(t.length!==i.length)return!1;for(var r=0;r<t.length;r++)if(t.charCodeAt(r)!==i[r])return!1;return!0},booleanValueOf:function(e){return!!e.isTrue||!e.isFalse&&(this.successFlag=!1)},positive32BitValueOf:function(e){return this.vm.primHandler.positive32BitValueOf(e)},positive32BitIntegerFor:function(e){return this.vm.primHandler.pos32BitIntFor(e)},floatValueOf:function(e){return e.isFloat?e.float:(this.successFlag=!1,0)},floatObjectOf:function(e){return this.vm.primHandler.makeFloat(e)},fetchPointerofObject:function(e,t){return t.pointers[e]},fetchBytesofObject:function(e,t){var i=t.pointers[e];return i.bytes?i.bytes:i.words?i.wordsAsUint8Array():("number"!=typeof i&&i.isWordsOrBytes()||(this.successFlag=!1),[])},fetchWordsofObject:function(e,t){var i=t.pointers[e];return i.words?i.words:("number"!=typeof i&&i.isWords()||(this.successFlag=!1),[])},fetchInt32ArrayofObject:function(e,t){var i=t.pointers[e];return i.words?i.wordsAsInt32Array():("number"!=typeof i&&i.isWords()||(this.successFlag=!1),[])},fetchInt16ArrayofObject:function(e,t){var i=t.pointers[e];return i.words?i.wordsAsInt16Array():("number"!=typeof i&&i.isWords()||(this.successFlag=!1),[])},fetchUint16ArrayofObject:function(e,t){var i=t.pointers[e];return i.words?i.wordsAsUint16Array():("number"!=typeof i&&i.isWords()||(this.successFlag=!1),[])},fetchIntegerofObject:function(e,t){var i=t.pointers[e];return"number"==typeof i?i:(this.successFlag=!1,0)},fetchLong32ofObject:function(e,t){return t.words[e]},fetchFloatofObject:function(e,t){return this.floatValueOf(t.pointers[e])},storeIntegerofObjectwithValue:function(e,t,i){"number"==typeof i?t.pointers[e]=i:this.successFlag=!1},storePointerofObjectwithValue:function(e,t,i){t.pointers[e]=i},stObjectatput:function(e,t,i){if(e.sqClass!==this.classArray())throw Error("Array expected");if(t<1||t>=e.pointers.length)return this.successFlag=!1;e.pointers[t]=i}},"constant access",{isKindOfInteger:function(e){return"number"==typeof e||e.sqClass==this.classLargeNegativeInteger()||e.sqClass==this.classLargePositiveInteger()},classArray:function(){return this.vm.specialObjects[Squeak.splOb_ClassArray]},classBitmap:function(){return this.vm.specialObjects[Squeak.splOb_ClassBitmap]},classSmallInteger:function(){return this.vm.specialObjects[Squeak.splOb_ClassInteger]},classLargePositiveInteger:function(){return this.vm.specialObjects[Squeak.splOb_ClassLargePositiveInteger]},classLargeNegativeInteger:function(){return this.vm.specialObjects[Squeak.splOb_ClassLargeNegativeInteger]},classPoint:function(){return this.vm.specialObjects[Squeak.splOb_ClassPoint]},classString:function(){return this.vm.specialObjects[Squeak.splOb_ClassString]},nilObject:function(){return this.vm.nilObj},falseObject:function(){return this.vm.falseObj},trueObject:function(){return this.vm.trueObj}},"vm functions",{instantiateClassindexableSize:function(e,t){return this.vm.instantiateClass(e,t)},methodArgumentCount:function(){return this.argCount},makePointwithxValueyValue:function(e,t){return this.vm.primHandler.makePointWithXandY(e,t)},pushRemappableOop:function(e){this.remappableOops.push(e)},popRemappableOop:function(){return this.remappableOops.pop()},showDisplayBitsLeftTopRightBottom:function(e,t,i,r,a){if(t<r&&i<a){var s={left:t,top:i,right:r,bottom:a};this.vm.primHandler.displayDirty(e,s)}},ioLoadFunctionFrom:function(e,t){return this.vm.primHandler.loadFunctionFrom(e,t)}}),Object.subclass("Squeak.InstructionStream","initialization",{initialize:function(e,t){this.vm=t,this.method=e,this.pc=0,this.specialConstants=[t.trueObj,t.falseObj,t.nilObj,-1,0,1,2]}},"decoding",{interpretNextInstructionFor:function(e){var t=this.method,i=t.bytes[this.pc++],r=i/16|0,a=i%16;if(0==r)return e.pushReceiverVariable(a);if(1==r)return e.pushTemporaryVariable(a);if(2==r)return e.pushConstant(t.methodGetLiteral(a));if(3==r)return e.pushConstant(t.methodGetLiteral(16+a));if(4==r)return e.pushLiteralVariable(t.methodGetLiteral(a));if(5==r)return e.pushLiteralVariable(t.methodGetLiteral(16+a));if(6==r)return a<8?e.popIntoReceiverVariable(a):e.popIntoTemporaryVariable(a-8);if(7==r){if(0==a)return e.pushReceiver();if(a<8)return e.pushConstant(this.specialConstants[a-1]);if(8==a)return e.methodReturnReceiver();if(a<12)return e.methodReturnConstant(this.specialConstants[a-9]);if(12==a)return e.methodReturnTop();if(13==a)return e.blockReturnTop();if(13<a)throw Error("unusedBytecode")}return 8==r?this.interpretExtension(a,t,e):9==r?a<8?e.jump(1+a):e.jumpIf(!1,a-8+1):10==r?(i=this.method.bytes[this.pc++],a<8?e.jump(256*(a-4)+i):e.jumpIf(a<12,256*(3&a)+i)):11==r?e.send(this.vm.specialSelectors[2*a],this.vm.specialSelectors[2*a+1],!1):12==r?e.send(this.vm.specialSelectors[2*(16+a)],this.vm.specialSelectors[2*(16+a)+1],!1):12<r?e.send(t.methodGetLiteral(a),r-13,!1):void 0},interpretExtension:function(e,t,i){if(e<=6){var r=this.method.bytes[this.pc++];if(e<=2){var a=r/64|0,s=r%64;if(0===e){if(0===a)return i.pushReceiverVariable(s);if(1===a)return i.pushTemporaryVariable(s);if(2===a)return i.pushConstant(this.method.methodGetLiteral(s));if(3===a)return i.pushLiteralVariable(this.method.methodGetLiteral(s))}if(1===e){if(0===a)return i.storeIntoReceiverVariable(s);if(1===a)return i.storeIntoTemporaryVariable(s);if(2===a)throw Error("illegalStore");if(3===a)return i.storeIntoLiteralVariable(this.method.methodGetLiteral(s))}if(2===e){if(0===a)return i.popIntoReceiverVariable(s);if(1===a)return i.popIntoTemporaryVariable(s);if(2===a)throw Error("illegalStore");if(3===a)return i.popIntoLiteralVariable(this.method.methodGetLiteral(s))}}if(3===e)return i.send(this.method.methodGetLiteral(r%32),r/32|0,!1);if(4===e){var n=this.method.bytes[this.pc++];if(0===(a=r/32|0))return i.send(this.method.methodGetLiteral(n),r%32,!1);if(1===a)return i.send(this.method.methodGetLiteral(n),r%32,!0);if(2===a)return i.pushReceiverVariable(n);if(3===a)return i.pushConstant(this.method.methodGetLiteral(n));if(4===a)return i.pushLiteralVariable(this.method.methodGetLiteral(n));if(5===a)return i.storeIntoReceiverVariable(n);if(6===a)return i.popIntoReceiverVariable(n);if(7===a)return i.storeIntoLiteralVariable(this.method.methodGetLiteral(n))}if(5===e)return i.send(this.method.methodGetLiteral(31&r),r>>5,!0);if(6===e)return i.send(this.method.methodGetLiteral(63&r),r>>6,!1)}if(7===e)return i.doPop();if(8===e)return i.doDup();if(9===e)return i.pushActiveContext();r=this.method.bytes[this.pc++];if(10===e)return r<128?i.pushNewArray(r):i.popIntoNewArray(r-128);n=this.method.bytes[this.pc++];if(11===e)return i.callPrimitive(r+256*n);if(12===e)return i.pushRemoteTemp(r,n);if(13===e)return i.storeIntoRemoteTemp(r,n);if(14===e)return i.popIntoRemoteTemp(r,n);var o=this.method.bytes[this.pc++];return i.pushClosureCopy(r>>4,15&r,256*n+o)}}),Object.subclass("Squeak.InstructionPrinter","initialization",{initialize:function(e,t){this.method=e,this.vm=t}},"printing",{printInstructions:function(e,t,i){for(this.indent=e,this.highlight=t,this.highlightPC=i,this.innerIndents={},this.result="",this.scanner=new Squeak.InstructionStream(this.method,this.vm),this.oldPC=this.scanner.pc,this.endPC=0,this.done=!1;!this.done;)this.scanner.interpretNextInstructionFor(this);return this.result},print:function(e){this.oldPC===this.highlightPC?this.highlight&&(this.result+=this.highlight):this.indent&&(this.result+=this.indent),this.result+=this.oldPC;for(var t=0;t<this.innerIndents[this.oldPC];t++)this.result+="   ";this.result+=" <";for(t=this.oldPC;t<this.scanner.pc;t++)t>this.oldPC&&(this.result+=" "),this.result+=(this.method.bytes[t]+256).toString(16).substr(-2).toUpperCase();this.result+="> "+e+"\n",this.oldPC=this.scanner.pc}},"decoding",{blockReturnTop:function(){this.print("blockReturn")},doDup:function(){this.print("dup")},doPop:function(){this.print("pop")},jump:function(e){this.print("jumpTo: "+(this.scanner.pc+e)),this.scanner.pc+e>this.endPC&&(this.endPC=this.scanner.pc+e)},jumpIf:function(e,t){this.print((e?"jumpIfTrue: ":"jumpIfFalse: ")+(this.scanner.pc+t)),this.scanner.pc+t>this.endPC&&(this.endPC=this.scanner.pc+t)},methodReturnReceiver:function(){this.print("return: receiver"),this.done=this.scanner.pc>this.endPC},methodReturnTop:function(){this.print("return: topOfStack"),this.done=this.scanner.pc>this.endPC},methodReturnConstant:function(e){this.print("returnConst: "+e.toString()),this.done=this.scanner.pc>this.endPC},popIntoLiteralVariable:function(e){this.print("popIntoBinding: "+e.assnKeyAsString())},popIntoReceiverVariable:function(e){this.print("popIntoInstVar: "+e)},popIntoTemporaryVariable:function(e){this.print("popIntoTemp: "+e)},pushActiveContext:function(){this.print("push: thisContext")},pushConstant:function(e){var t=e.sqInstName?e.sqInstName():e.toString();this.print("pushConst: "+t)},pushLiteralVariable:function(e){this.print("pushBinding: "+e.assnKeyAsString())},pushReceiver:function(){this.print("push: self")},pushReceiverVariable:function(e){this.print("pushInstVar: "+e)},pushTemporaryVariable:function(e){this.print("pushTemp: "+e)},send:function(e,t,i){this.print((i?"superSend: #":"send: #")+(e.bytesAsString?e.bytesAsString():e))},storeIntoLiteralVariable:function(e){this.print("storeIntoBinding: "+e.assnKeyAsString())},storeIntoReceiverVariable:function(e){this.print("storeIntoInstVar: "+e)},storeIntoTemporaryVariable:function(e){this.print("storeIntoTemp: "+e)},pushNewArray:function(e){this.print("push: (Array new: "+e+")")},popIntoNewArray:function(e){this.print("pop: "+e+" into: (Array new: "+e+")")},pushRemoteTemp:function(e,t){this.print("push: "+e+" ofTemp: "+t)},storeIntoRemoteTemp:function(e,t){this.print("storeInto: "+e+" ofTemp: "+t)},popIntoRemoteTemp:function(e,t){this.print("popInto: "+e+" ofTemp: "+t)},pushClosureCopy:function(e,t,i){var r=this.scanner.pc,a=r+i;this.print("closure("+r+"-"+(a-1)+"): "+e+" copied, "+t+" args");for(var s=r;s<a;s++)this.innerIndents[s]=(this.innerIndents[s]||0)+1;a>this.endPC&&(this.endPC=a)},callPrimitive:function(e){this.print("primitive: "+e)}}),Object.subclass("Squeak.Primitives","initialization",{initialize:function(e,t){this.vm=e,this.oldPrims=!this.vm.image.hasClosures,this.allowAccessBeyondSP=this.oldPrims,this.deferDisplayUpdates=!1,this.semaphoresToSignal=[],this.initDisplay(t),this.initAtCache(),this.initModules(),this.initPlugins(),e.image.isSpur&&(this.charFromInt=this.charFromIntSpur,this.charToInt=this.charToIntSpur,this.identityHash=this.identityHashSpur)},initDisplay:function(e){this.display=e},initModules:function(){this.loadedModules={},this.builtinModules={},this.patchModules={},this.interpreterProxy=new Squeak.InterpreterProxy(this.vm)},initPlugins:function(){}},"dispatch",{quickSendOther:function(e,t){switch(this.success=!0,t){case 0:return this.popNandPushIfOK(2,this.objectAt(!0,!0,!1));case 1:return this.popNandPushIfOK(3,this.objectAtPut(!0,!0,!1));case 2:return this.popNandPushIfOK(1,this.objectSize(!0));case 6:return this.pop2andPushBoolIfOK(this.vm.stackValue(1)===this.vm.stackValue(0));case 7:return this.popNandPushIfOK(1,this.vm.getClass(this.vm.top()));case 8:return this.popNandPushIfOK(2,this.doBlockCopy());case 9:return this.primitiveBlockValue(0);case 10:return this.primitiveBlockValue(1)}return!1},doPrimitive:function(e,t,i){if(this.success=!0,e<128)switch(e){case 1:return this.popNandPushIntIfOK(2,this.stackInteger(1)+this.stackInteger(0));case 2:return this.popNandPushIntIfOK(2,this.stackInteger(1)-this.stackInteger(0));case 3:return this.pop2andPushBoolIfOK(this.stackInteger(1)<this.stackInteger(0));case 4:return this.pop2andPushBoolIfOK(this.stackInteger(1)>this.stackInteger(0));case 5:return this.pop2andPushBoolIfOK(this.stackInteger(1)<=this.stackInteger(0));case 6:return this.pop2andPushBoolIfOK(this.stackInteger(1)>=this.stackInteger(0));case 7:return this.pop2andPushBoolIfOK(this.stackInteger(1)===this.stackInteger(0));case 8:return this.pop2andPushBoolIfOK(this.stackInteger(1)!==this.stackInteger(0));case 9:return this.popNandPushIntIfOK(2,this.stackInteger(1)*this.stackInteger(0));case 10:return this.popNandPushIntIfOK(2,this.vm.quickDivide(this.stackInteger(1),this.stackInteger(0)));case 11:return this.popNandPushIntIfOK(2,this.vm.mod(this.stackInteger(1),this.stackInteger(0)));case 12:return this.popNandPushIntIfOK(2,this.vm.div(this.stackInteger(1),this.stackInteger(0)));case 13:return this.popNandPushIntIfOK(2,this.stackInteger(1)/this.stackInteger(0)|0);case 14:return this.popNandPushIfOK(2,this.doBitAnd());case 15:return this.popNandPushIfOK(2,this.doBitOr());case 16:return this.popNandPushIfOK(2,this.doBitXor());case 17:return this.popNandPushIfOK(2,this.doBitShift());case 18:return this.primitiveMakePoint(t,!1);case 19:return!1;case 20:return this.vm.warnOnce("missing primitive: 20 (primitiveRemLargeIntegers)"),!1;case 21:return this.vm.warnOnce("missing primitive: 21 (primitiveAddLargeIntegers)"),!1;case 22:return this.vm.warnOnce("missing primitive: 22 (primitiveSubtractLargeIntegers)"),!1;case 23:return this.primitiveLessThanLargeIntegers();case 24:return this.primitiveGreaterThanLargeIntegers();case 25:return this.primitiveLessOrEqualLargeIntegers();case 26:return this.primitiveGreaterOrEqualLargeIntegers();case 27:return this.primitiveEqualLargeIntegers();case 28:return this.primitiveNotEqualLargeIntegers();case 29:return this.vm.warnOnce("missing primitive: 29 (primitiveMultiplyLargeIntegers)"),!1;case 30:return this.vm.warnOnce("missing primitive: 30 (primitiveDivideLargeIntegers)"),!1;case 31:return this.vm.warnOnce("missing primitive: 31 (primitiveModLargeIntegers)"),!1;case 32:return this.vm.warnOnce("missing primitive: 32 (primitiveDivLargeIntegers)"),!1;case 33:return this.vm.warnOnce("missing primitive: 33 (primitiveQuoLargeIntegers)"),!1;case 34:return this.vm.warnOnce("missing primitive: 34 (primitiveBitAndLargeIntegers)"),!1;case 35:return this.vm.warnOnce("missing primitive: 35 (primitiveBitOrLargeIntegers)"),!1;case 36:return this.vm.warnOnce("missing primitive: 36 (primitiveBitXorLargeIntegers)"),!1;case 37:return this.vm.warnOnce("missing primitive: 37 (primitiveBitShiftLargeIntegers)"),!1;case 38:return this.popNandPushIfOK(t+1,this.objectAt(!1,!1,!1));case 39:return this.popNandPushIfOK(t+1,this.objectAtPut(!1,!1,!1));case 40:return this.popNandPushFloatIfOK(t+1,this.stackInteger(0));case 41:return this.popNandPushFloatIfOK(t+1,this.stackFloat(1)+this.stackFloat(0));case 42:return this.popNandPushFloatIfOK(t+1,this.stackFloat(1)-this.stackFloat(0));case 43:return this.pop2andPushBoolIfOK(this.stackFloat(1)<this.stackFloat(0));case 44:return this.pop2andPushBoolIfOK(this.stackFloat(1)>this.stackFloat(0));case 45:return this.pop2andPushBoolIfOK(this.stackFloat(1)<=this.stackFloat(0));case 46:return this.pop2andPushBoolIfOK(this.stackFloat(1)>=this.stackFloat(0));case 47:return this.pop2andPushBoolIfOK(this.stackFloat(1)===this.stackFloat(0));case 48:return this.pop2andPushBoolIfOK(this.stackFloat(1)!==this.stackFloat(0));case 49:return this.popNandPushFloatIfOK(t+1,this.stackFloat(1)*this.stackFloat(0));case 50:return this.popNandPushFloatIfOK(t+1,this.safeFDiv(this.stackFloat(1),this.stackFloat(0)));case 51:return this.popNandPushIfOK(t+1,this.floatAsSmallInt(this.stackFloat(0)));case 52:return this.vm.warnOnce("missing primitive: 52 (Float.fractionPart (modf))"),!1;case 53:return this.popNandPushIntIfOK(t+1,this.frexp_exponent(this.stackFloat(0))-1);case 54:return this.popNandPushFloatIfOK(2,this.ldexp(this.stackFloat(1),this.stackFloat(0)));case 55:return this.popNandPushFloatIfOK(t+1,Math.sqrt(this.stackFloat(0)));case 56:return this.popNandPushFloatIfOK(t+1,Math.sin(this.stackFloat(0)));case 57:return this.popNandPushFloatIfOK(t+1,Math.atan(this.stackFloat(0)));case 58:return this.popNandPushFloatIfOK(t+1,Math.log(this.stackFloat(0)));case 59:return this.popNandPushFloatIfOK(t+1,Math.exp(this.stackFloat(0)));case 60:return this.popNandPushIfOK(t+1,this.objectAt(!1,!1,!1));case 61:return this.popNandPushIfOK(t+1,this.objectAtPut(!1,!1,!1));case 62:return this.popNandPushIfOK(t+1,this.objectSize(!1));case 63:return this.popNandPushIfOK(t+1,this.objectAt(!1,!0,!1));case 64:return this.popNandPushIfOK(t+1,this.objectAtPut(!1,!0,!1));case 65:return this.vm.warnOnce("missing primitive: 65 (primitiveNext)"),!1;case 66:return this.vm.warnOnce("missing primitive: 66 (primitiveNextPut)"),!1;case 67:return this.vm.warnOnce("missing primitive: 67 (primitiveAtEnd)"),!1;case 68:return this.popNandPushIfOK(t+1,this.objectAt(!1,!1,!0));case 69:return this.popNandPushIfOK(t+1,this.objectAtPut(!1,!1,!0));case 70:return this.popNandPushIfOK(t+1,this.instantiateClass(this.stackNonInteger(0),0));case 71:return this.popNandPushIfOK(t+1,this.instantiateClass(this.stackNonInteger(1),this.stackPos32BitInt(0)));case 72:return this.primitiveArrayBecome(t,!1);case 73:return this.popNandPushIfOK(t+1,this.objectAt(!1,!1,!0));case 74:return this.popNandPushIfOK(t+1,this.objectAtPut(!1,!1,!0));case 75:return this.popNandPushIfOK(t+1,this.identityHash(this.stackNonInteger(0)));case 76:return this.primitiveStoreStackp(t);case 77:return this.popNandPushIfOK(t+1,this.someInstanceOf(this.stackNonInteger(0)));case 78:return this.popNandPushIfOK(t+1,this.nextInstanceAfter(this.stackNonInteger(0)));case 79:return this.primitiveNewMethod(t);case 80:return this.popNandPushIfOK(2,this.doBlockCopy());case 81:return this.primitiveBlockValue(t);case 82:return this.primitiveBlockValueWithArgs(t);case 83:return this.vm.primitivePerform(t);case 84:return this.vm.primitivePerformWithArgs(t,!1);case 85:return this.primitiveSignal();case 86:return this.primitiveWait();case 87:return this.primitiveResume();case 88:return this.primitiveSuspend();case 89:return this.vm.flushMethodCache();case 90:return this.primitiveMousePoint(t);case 91:return this.primitiveTestDisplayDepth(t);case 92:return this.vm.warnOnce("missing primitive: 92 (primitiveSetDisplayMode)"),!1;case 93:return this.primitiveInputSemaphore(t);case 94:return this.primitiveGetNextEvent(t);case 95:return this.primitiveInputWord(t);case 96:return this.namedPrimitive("BitBltPlugin","primitiveCopyBits",t);case 97:return this.primitiveSnapshot(t);case 98:return this.vm.warnOnce("missing primitive 98 (primitiveStoreImageSegment)"),!1;case 99:return this.primitiveLoadImageSegment(t);case 100:return this.vm.primitivePerformWithArgs(t,!0);case 101:return this.primitiveBeCursor(t);case 102:return this.primitiveBeDisplay(t);case 103:return this.primitiveScanCharacters(t);case 104:return this.vm.warnOnce("missing primitive: 104 (primitiveDrawLoop)"),!1;case 105:return this.popNandPushIfOK(t+1,this.doStringReplace());case 106:return this.primitiveScreenSize(t);case 107:return this.primitiveMouseButtons(t);case 108:return this.primitiveKeyboardNext(t);case 109:return this.primitiveKeyboardPeek(t);case 110:return this.pop2andPushBoolIfOK(this.vm.stackValue(1)===this.vm.stackValue(0));case 111:return this.popNandPushIfOK(t+1,this.vm.getClass(this.vm.top()));case 112:return this.popNandPushIfOK(t+1,this.vm.image.bytesLeft());case 113:return this.primitiveQuit(t);case 114:return this.primitiveExitToDebugger(t);case 115:return this.primitiveChangeClass(t);case 116:return this.vm.flushMethodCacheForMethod(this.vm.top());case 117:return this.doNamedPrimitive(t,i);case 118:return this.primitiveDoPrimitiveWithArgs(t);case 119:return this.vm.flushMethodCacheForSelector(this.vm.top());case 120:return this.vm.warnOnce("missing primitive:121 (primitiveCalloutToFFI)"),!1;case 121:return this.primitiveImageName(t);case 122:return this.primitiveReverseDisplay(t);case 123:return this.vm.warnOnce("missing primitive: 123 (primitiveValueUninterruptably)"),!1;case 124:return this.popNandPushIfOK(2,this.registerSemaphore(Squeak.splOb_TheLowSpaceSemaphore));case 125:return this.popNandPushIfOK(2,this.setLowSpaceThreshold());case 126:return this.primitiveDeferDisplayUpdates(t);case 127:return this.primitiveShowDisplayRect(t)}else if(e<256)switch(e){case 128:return this.primitiveArrayBecome(t,!0);case 129:return this.popNandPushIfOK(1,this.vm.image.specialObjectsArray);case 130:return this.primitiveFullGC(t);case 131:return this.primitivePartialGC(t);case 132:return this.pop2andPushBoolIfOK(this.pointsTo(this.stackNonInteger(1),this.vm.top()));case 133:return!0;case 134:return this.popNandPushIfOK(2,this.registerSemaphore(Squeak.splOb_TheInterruptSemaphore));case 135:return this.popNandPushIfOK(1,this.millisecondClockValue());case 136:return this.primitiveSignalAtMilliseconds(t);case 137:return this.popNandPushIfOK(1,this.secondClock());case 138:return this.popNandPushIfOK(t+1,this.someObject());case 139:return this.popNandPushIfOK(t+1,this.nextObject(this.vm.top()));case 140:return this.primitiveBeep(t);case 141:return this.primitiveClipboardText(t);case 142:return this.popNandPushIfOK(t+1,this.makeStString(this.filenameToSqueak(Squeak.vmPath)));case 143:case 144:return this.primitiveShortAtAndPut(t);case 145:return this.primitiveConstantFill(t);case 146:return this.namedPrimitive("JoystickTabletPlugin","primitiveReadJoystick",t);case 147:return this.namedPrimitive("BitBltPlugin","primitiveWarpBits",t);case 148:return this.popNandPushIfOK(t+1,this.vm.image.clone(this.vm.top()));case 149:return this.primitiveGetAttribute(t);case 150:if(this.oldPrims)return this.primitiveFileAtEnd(t);case 151:if(this.oldPrims)return this.primitiveFileClose(t);case 152:if(this.oldPrims)return this.primitiveFileGetPosition(t);case 153:if(this.oldPrims)return this.primitiveFileOpen(t);case 154:if(this.oldPrims)return this.primitiveFileRead(t);case 155:if(this.oldPrims)return this.primitiveFileSetPosition(t);case 156:if(this.oldPrims)return this.primitiveFileDelete(t);case 157:if(this.oldPrims)return this.primitiveFileSize(t);case 158:if(this.oldPrims)return this.primitiveFileWrite(t);break;case 159:return this.oldPrims?this.primitiveFileRename(t):(this.vm.warnOnce("missing primitive: 159 (primitiveHashMultiply)"),!1);case 160:return this.oldPrims?this.primitiveDirectoryCreate(t):this.primitiveAdoptInstance(t);case 161:return this.oldPrims?this.primitiveDirectoryDelimitor(t):(this.vm.warnOnce("missing primitive: 161 (primitiveSetIdentityHash)"),!1);case 162:if(this.oldPrims)return this.primitiveDirectoryLookup(t);break;case 163:if(this.oldPrims)return this.primitiveDirectoryDelete(t);break;case 165:case 166:return this.primitiveIntegerAtAndPut(t);case 167:return!1;case 168:return this.primitiveCopyObject(t);case 169:return this.oldPrims?this.primitiveDirectorySetMacTypeAndCreator(t):this.pop2andPushBoolIfOK(this.vm.stackValue(1)!==this.vm.stackValue(0));case 170:return this.oldPrims?this.namedPrimitive("SoundPlugin","primitiveSoundStart",t):this.primitiveAsCharacter(t);case 171:return this.oldPrims?this.namedPrimitive("SoundPlugin","primitiveSoundStartWithSemaphore",t):this.popNandPushIfOK(t+1,this.stackNonInteger(0).hash);case 172:return this.oldPrims?this.namedPrimitive("SoundPlugin","primitiveSoundStop",t):(this.vm.warnOnce("missing primitive: 172 (primitiveFetchMourner)"),this.popNandPushIfOK(t,this.vm.nilObj));case 173:return this.oldPrims?this.namedPrimitive("SoundPlugin","primitiveSoundAvailableSpace",t):this.popNandPushIfOK(t+1,this.objectAt(!1,!1,!0));case 174:return this.oldPrims?this.namedPrimitive("SoundPlugin","primitiveSoundPlaySamples",t):this.popNandPushIfOK(t+1,this.objectAtPut(!1,!1,!0));case 175:return this.oldPrims?this.namedPrimitive("SoundPlugin","primitiveSoundPlaySilence",t):this.popNandPushIfOK(t+1,this.behaviorHash(this.stackNonInteger(0)));case 176:if(this.oldPrims)return this.namedPrimitive("SoundGenerationPlugin","primWaveTableSoundmixSampleCountintostartingAtpan",t);break;case 177:return this.oldPrims?this.namedPrimitive("SoundGenerationPlugin","primFMSoundmixSampleCountintostartingAtpan",t):this.popNandPushIfOK(t+1,this.allInstancesOf(this.stackNonInteger(0)));case 178:return this.oldPrims?this.namedPrimitive("SoundGenerationPlugin","primPluckedSoundmixSampleCountintostartingAtpan",t):!1;case 179:if(this.oldPrims)return this.namedPrimitive("SoundGenerationPlugin","primSampledSoundmixSampleCountintostartingAtpan",t);break;case 180:return this.oldPrims?this.namedPrimitive("SoundGenerationPlugin","primitiveMixFMSound",t):!1;case 181:return this.oldPrims?this.namedPrimitive("SoundGenerationPlugin","primitiveMixPluckedSound",t):this.primitiveSizeInBytesOfInstance(t);case 182:return this.oldPrims?this.namedPrimitive("SoundGenerationPlugin","oldprimSampledSoundmixSampleCountintostartingAtleftVolrightVol",t):this.primitiveSizeInBytes(t);case 183:if(this.oldPrims)return this.namedPrimitive("SoundGenerationPlugin","primitiveApplyReverb",t);break;case 184:if(this.oldPrims)return this.namedPrimitive("SoundGenerationPlugin","primitiveMixLoopedSampledSound",t);break;case 185:return this.oldPrims?this.namedPrimitive("SoundGenerationPlugin","primitiveMixSampledSound",t):this.primitiveExitCriticalSection(t);case 186:if(this.oldPrims)break;return this.primitiveEnterCriticalSection(t);case 187:if(this.oldPrims)break;return this.primitiveTestAndSetOwnershipOfCriticalSection(t);case 188:if(this.oldPrims)break;return this.primitiveExecuteMethodArgsArray(t);case 189:return this.oldPrims?this.namedPrimitive("SoundPlugin","primitiveSoundInsertSamples",t):this.primitiveExecuteMethod(t);case 190:if(this.oldPrims)return this.namedPrimitive("SoundPlugin","primitiveSoundStartRecording",t);case 191:if(this.oldPrims)return this.namedPrimitive("SoundPlugin","primitiveSoundStopRecording",t);case 192:if(this.oldPrims)return this.namedPrimitive("SoundPlugin","primitiveSoundGetRecordingSampleRate",t);case 193:if(this.oldPrims)return this.namedPrimitive("SoundPlugin","primitiveSoundRecordSamples",t);case 194:if(this.oldPrims)return this.namedPrimitive("SoundPlugin","primitiveSoundSetRecordLevel",t);break;case 195:case 196:case 197:case 198:case 199:return!1;case 200:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveInitializeNetwork",t):this.primitiveClosureCopyWithCopiedValues(t);case 201:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveResolverStartNameLookup",t):this.primitiveClosureValue(t);case 202:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveResolverNameLookupResult",t):this.primitiveClosureValue(t);case 203:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveResolverStartAddressLookup",t):this.primitiveClosureValue(t);case 204:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveResolverAddressLookupResult",t):this.primitiveClosureValue(t);case 205:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveResolverAbortLookup",t):this.primitiveClosureValue(t);case 206:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveResolverLocalAddress",t):this.primitiveClosureValueWithArgs(t);case 207:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveResolverStatus",t);case 208:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveResolverError",t);case 209:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketCreate",t);break;case 210:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveSocketDestroy",t):this.popNandPushIfOK(2,this.objectAt(!1,!1,!1));case 211:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveSocketConnectionStatus",t):this.popNandPushIfOK(3,this.objectAtPut(!1,!1,!1));case 212:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveSocketError",t):this.popNandPushIfOK(1,this.objectSize(!1));case 213:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketLocalAddress",t);case 214:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketLocalPort",t);case 215:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketRemoteAddress",t);case 216:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketRemotePort",t);case 217:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketConnectToPort",t);case 218:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketListenOnPort",t);case 219:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketCloseConnection",t);case 220:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketAbortConnection",t);break;case 221:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveSocketReceiveDataBufCount",t):this.primitiveClosureValueNoContextSwitch(t);case 222:return this.oldPrims?this.namedPrimitive("SocketPlugin","primitiveSocketReceiveDataAvailable",t):this.primitiveClosureValueNoContextSwitch(t);case 223:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketSendDataBufCount",t);case 224:if(this.oldPrims)return this.namedPrimitive("SocketPlugin","primitiveSocketSendDone",t);break;case 230:return this.primitiveRelinquishProcessorForMicroseconds(t);case 231:return this.primitiveForceDisplayUpdate(t);case 232:return this.vm.warnOnce("missing primitive: 232 (primitiveFormPrint)"),!1;case 233:return this.primitiveSetFullScreen(t);case 234:if(this.oldPrims)return this.namedPrimitive("MiscPrimitivePlugin","primitiveDecompressFromByteArray",t);case 235:if(this.oldPrims)return this.namedPrimitive("MiscPrimitivePlugin","primitiveCompareString",t);case 236:if(this.oldPrims)return this.namedPrimitive("MiscPrimitivePlugin","primitiveConvert8BitSigned",t);case 237:if(this.oldPrims)return this.namedPrimitive("MiscPrimitivePlugin","primitiveCompressToByteArray",t);case 238:if(this.oldPrims)return this.namedPrimitive("SerialPlugin","primitiveSerialPortOpen",t);case 239:if(this.oldPrims)return this.namedPrimitive("SerialPlugin","primitiveSerialPortClose",t);break;case 240:return this.oldPrims?this.namedPrimitive("SerialPlugin","primitiveSerialPortWrite",t):this.popNandPushIfOK(1,this.microsecondClockUTC());case 241:return this.oldPrims?this.namedPrimitive("SerialPlugin","primitiveSerialPortRead",t):this.popNandPushIfOK(1,this.microsecondClockLocal());case 242:if(this.oldPrims)break;return this.primitiveSignalAtUTCMicroseconds(t);case 243:if(this.oldPrims)return this.namedPrimitive("MiscPrimitivePlugin","primitiveTranslateStringWithTable",t);case 244:if(this.oldPrims)return this.namedPrimitive("MiscPrimitivePlugin","primitiveFindFirstInString",t);case 245:if(this.oldPrims)return this.namedPrimitive("MiscPrimitivePlugin","primitiveIndexOfAsciiInString",t);case 246:if(this.oldPrims)return this.namedPrimitive("MiscPrimitivePlugin","primitiveFindSubstring",t);break;case 248:return this.vm.primitiveInvokeObjectAsMethod(t,i);case 249:return this.primitiveArrayBecome(t,!1);case 254:return this.primitiveVMParameter(t)}else switch(e){case 521:return this.namedPrimitive("MIDIPlugin","primitiveMIDIClosePort",t);case 522:return this.namedPrimitive("MIDIPlugin","primitiveMIDIGetClock",t);case 523:return this.namedPrimitive("MIDIPlugin","primitiveMIDIGetPortCount",t);case 524:return this.namedPrimitive("MIDIPlugin","primitiveMIDIGetPortDirectionality",t);case 525:return this.namedPrimitive("MIDIPlugin","primitiveMIDIGetPortName",t);case 526:return this.namedPrimitive("MIDIPlugin","primitiveMIDIOpenPort",t);case 527:return this.namedPrimitive("MIDIPlugin","primitiveMIDIParameterGetOrSet",t);case 528:return this.namedPrimitive("MIDIPlugin","primitiveMIDIRead",t);case 529:return this.namedPrimitive("MIDIPlugin","primitiveMIDIWrite",t);case 550:return this.namedPrimitive("ADPCMCodecPlugin","primitiveDecodeMono",t);case 551:return this.namedPrimitive("ADPCMCodecPlugin","primitiveDecodeStereo",t);case 552:return this.namedPrimitive("ADPCMCodecPlugin","primitiveEncodeMono",t);case 553:return this.namedPrimitive("ADPCMCodecPlugin","primitiveEncodeStereo",t);case 571:return this.primitiveUnloadModule(t);case 572:return this.primitiveListBuiltinModule(t);case 573:return this.primitiveListLoadedModule(t)}return console.error("primitive "+e+" not implemented yet"),!1},namedPrimitive:function(e,t,i){var r=""===e?this:this.loadedModules[e];void 0===r&&(r=this.loadModule(e),this.loadedModules[e]=r);var a=!1;if(r){this.interpreterProxy.argCount=i;var s=r[t];"function"==typeof s?a=r[t](i):"string"==typeof s?a=this[s](i):this.vm.warnOnce("missing primitive: "+e+"."+t)}else this.vm.warnOnce("missing module: "+e+" ("+t+")");return!0===a||!1===a?a:this.success},doNamedPrimitive:function(e,t){if(t.pointersSize()<2)return!1;var i=t.pointers[1];if(4!==i.pointersSize())return!1;this.primMethod=t;var r=i.pointers[0].bytesAsString(),a=i.pointers[1].bytesAsString();return this.namedPrimitive(r,a,e)},fakePrimitive:function(e,t,i){return this.vm.warnOnce("faking primitive: "+e),void 0===t?this.vm.popN(i):this.vm.popNandPush(i+1,this.makeStObject(t)),!0}},"modules",{loadModule:function(e){var t=Squeak.externalModules[e]||this.builtinModules[e]||this.loadModuleDynamically(e);if(!t)return null;if(this.patchModules[e]&&this.patchModule(t,e),t.setInterpreter&&!t.setInterpreter(this.interpreterProxy))return console.log("Wrong interpreter proxy version: "+e),null;var i=t.initialiseModule;return"function"==typeof i?t.initialiseModule():"string"==typeof i&&this[i](),this.interpreterProxy.failed()?(console.log("Module initialization failed: "+e),null):(console.log("Loaded module: "+e),t)},loadModuleDynamically:function(e){},patchModule:function(e,t){var i=this.patchModules[t];for(var r in i)e[r]=i[r]},unloadModule:function(e){var t=this.loadedModules[e];if(!e||!t||t===this)return null;delete this.loadedModules[e];var i=t.unloadModule;return"function"==typeof i?t.unloadModule(this):"string"==typeof i&&this[i](this),console.log("Unloaded module: "+e),t},loadFunctionFrom:function(e,t){var i=""===t?this:this.loadedModules[t];if(void 0===i&&(i=this.loadModule(t),this.loadedModules[t]=i),!i)return null;var r=i[e];return"function"==typeof r?r.bind(i):"string"==typeof r?this[r].bind(this):(this.vm.warnOnce("missing primitive: "+t+"."+e),null)},primitiveUnloadModule:function(e){var t=this.stackNonInteger(0).bytesAsString();return!!t&&(this.unloadModule(t),this.popNIfOK(e))},primitiveListBuiltinModule:function(e){var t=this.stackInteger(0)-1;if(!this.success)return!1;var i=Object.keys(this.builtinModules);return this.popNandPushIfOK(e+1,this.makeStObject(i[t]))},primitiveListLoadedModule:function(e){var t=this.stackInteger(0)-1;if(!this.success)return!1;var i=[];for(var r in this.loadedModules){var a=this.loadedModules[r];if(a){var s=a.getModuleName?a.getModuleName():r;i.push(s)}}return this.popNandPushIfOK(e+1,this.makeStObject(i[t]))}},"stack access",{popNIfOK:function(e){return!!this.success&&(this.vm.popN(e),!0)},pop2andPushBoolIfOK:function(e){return this.vm.success=this.success,this.vm.pop2AndPushBoolResult(e)},popNandPushIfOK:function(e,t){return!(!this.success||null==t)&&(this.vm.popNandPush(e,t),!0)},popNandPushIntIfOK:function(e,t){return!(!this.success||!this.vm.canBeSmallInt(t))&&this.popNandPushIfOK(e,t)},popNandPushFloatIfOK:function(e,t){return!!this.success&&this.popNandPushIfOK(e,this.makeFloat(t))},stackNonInteger:function(e){return this.checkNonInteger(this.vm.stackValue(e))},stackInteger:function(e){return this.checkSmallInt(this.vm.stackValue(e))},stackPos32BitInt:function(e){return this.positive32BitValueOf(this.vm.stackValue(e))},pos32BitIntFor:function(e){if(0<=e&&e<=Squeak.MaxSmallInt)return e;for(var t=this.vm.specialObjects[Squeak.splOb_ClassLargePositiveInteger],i=this.vm.instantiateClass(t,4),r=i.bytes,a=0;a<4;a++)r[a]=e>>>8*a&255;return i},pos53BitIntFor:function(e){if(e<=4294967295)return this.pos32BitIntFor(e);if(9007199254740991<e)return console.warn("Out of range: pos53BitIntFor("+e+")"),this.success=!1,0;for(var t=e<=0xffffffffff?5:e<=0xffffffffffff?6:7,i=this.vm.specialObjects[Squeak.splOb_ClassLargePositiveInteger],r=this.vm.instantiateClass(i,t),a=r.bytes,s=0;s<t;s++)a[s]=255&e,e/=256;return r},stackSigned32BitInt:function(e){var t=this.vm.stackValue(e);if("number"==typeof t)return t;if(4!==t.bytesSize())return this.success=!1,0;for(var i=t.bytes,r=0,a=0,s=1;a<4;a++,s*=256)r+=i[a]*s;return this.isA(t,Squeak.splOb_ClassLargePositiveInteger)&&r<=2147483647?r:this.isA(t,Squeak.splOb_ClassLargeNegativeInteger)&&-2147483648<=-r?-r:(this.success=!1,0)},signed32BitIntegerFor:function(e){if(e>=Squeak.MinSmallInt&&e<=Squeak.MaxSmallInt)return e;for(var t=e<0,i=t?-e:e,r=t?Squeak.splOb_ClassLargeNegativeInteger:Squeak.splOb_ClassLargePositiveInteger,a=this.vm.instantiateClass(this.vm.specialObjects[r],4),s=a.bytes,n=0;n<4;n++)s[n]=i>>>8*n&255;return a},stackFloat:function(e){return this.checkFloat(this.vm.stackValue(e))},stackBoolean:function(e){return this.checkBoolean(this.vm.stackValue(e))},stackSigned53BitInt:function(e){var t=this.vm.stackValue(e);if("number"==typeof t)return t;var i=t.bytesSize();if(i<=7){for(var r=t.bytes,a=0,s=0,n=1;s<i;s++,n*=256)a+=r[s]*n;if(a<=9007199254740991){if(this.isA(t,Squeak.splOb_ClassLargePositiveInteger))return a;if(this.isA(t,Squeak.splOb_ClassLargeNegativeInteger))return-a}}return this.success=!1,0}},"numbers",{doBitAnd:function(){var e=this.stackPos32BitInt(1),t=this.stackPos32BitInt(0);return this.success?this.pos32BitIntFor(e&t):0},doBitOr:function(){var e=this.stackPos32BitInt(1),t=this.stackPos32BitInt(0);return this.success?this.pos32BitIntFor(e|t):0},doBitXor:function(){var e=this.stackPos32BitInt(1),t=this.stackPos32BitInt(0);return this.success?this.pos32BitIntFor(e^t):0},doBitShift:function(){var e=this.stackPos32BitInt(1),t=this.stackInteger(0);return this.success?0<this.vm.safeShift(e,t)?this.pos32BitIntFor(this.vm.safeShift(e,t)):(this.success=!1,0):0},safeFDiv:function(e,t){return 0===t?(this.success=!1,1):e/t},floatAsSmallInt:function(e){var t=0<=e?Math.floor(e):Math.ceil(e);return this.ensureSmallInt(t)},frexp_exponent:function(e){if(0==e)return 0;var t=new DataView(new ArrayBuffer(8));t.setFloat64(0,e);var i=t.getUint32(0)>>>20&2047;return 0===i&&(t.setFloat64(0,e*Math.pow(2,64)),i=(t.getUint32(0)>>>20&2047)-64),i-1022},ldexp:function(e,t){for(var i=Math.min(3,Math.ceil(Math.abs(t)/1023)),r=e,a=0;a<i;a++)r*=Math.pow(2,Math.floor((t+a)/i));return r},primitiveLessThanLargeIntegers:function(){return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1)<this.stackSigned53BitInt(0))},primitiveGreaterThanLargeIntegers:function(){return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1)>this.stackSigned53BitInt(0))},primitiveLessOrEqualLargeIntegers:function(){return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1)<=this.stackSigned53BitInt(0))},primitiveGreaterOrEqualLargeIntegers:function(){return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1)>=this.stackSigned53BitInt(0))},primitiveEqualLargeIntegers:function(){return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1)===this.stackSigned53BitInt(0))},primitiveNotEqualLargeIntegers:function(){return this.pop2andPushBoolIfOK(this.stackSigned53BitInt(1)!==this.stackSigned53BitInt(0))}},"utils",{floatOrInt:function(e){return e.isFloat?e.float:"number"==typeof e?e:0},positive32BitValueOf:function(e){if("number"==typeof e)return 0<=e?e:(this.success=!1,0);if(!this.isA(e,Squeak.splOb_ClassLargePositiveInteger)||4!==e.bytesSize())return this.success=!1,0;for(var t=e.bytes,i=0,r=0,a=1;r<4;r++,a*=256)i+=t[r]*a;return i},checkFloat:function(e){return e.isFloat?e.float:"number"==typeof e?e:(this.success=!1,0)},checkSmallInt:function(e){return"number"==typeof e?e:(this.success=!1,0)},checkNonInteger:function(e){return"number"!=typeof e?e:(this.success=!1,this.vm.nilObj)},checkBoolean:function(e){return!!e.isTrue||!e.isFalse&&(this.success=!1)},indexableSize:function(e){return"number"==typeof e?-1:e.indexableSize(this)},isA:function(e,t){return e.sqClass===this.vm.specialObjects[t]},isKindOf:function(e,t){for(var i=e.sqClass,r=this.vm.specialObjects[t];!i.isNil;){if(i===r)return!0;i=i.pointers[Squeak.Class_superclass]}return!1},isAssociation:function(e){return"number"!=typeof e&&2==e.pointersSize()},ensureSmallInt:function(e){return e===(0|e)&&this.vm.canBeSmallInt(e)?e:(this.success=!1,0)},charFromInt:function(e){var t=this.vm.specialObjects[Squeak.splOb_CharacterTable].pointers[e];if(t)return t;var i=this.vm.specialObjects[Squeak.splOb_ClassCharacter];return(t=this.vm.instantiateClass(i,0)).pointers[0]=e,t},charFromIntSpur:function(e){return this.vm.image.getCharacter(e)},charToInt:function(e){return e.pointers[0]},charToIntSpur:function(e){return e.hash},makeFloat:function(e){var t=this.vm.specialObjects[Squeak.splOb_ClassFloat],i=this.vm.instantiateClass(t,2);return i.float=e,i},makeLargeIfNeeded:function(e){return this.vm.canBeSmallInt(e)?e:this.makeLargeInt(e)},makeLargeInt:function(e){if(e<0)throw Error("negative large ints not implemented yet");if(4294967295<e)throw Error("large large ints not implemented yet");return this.pos32BitIntFor(e)},makePointWithXandY:function(e,t){var i=this.vm.specialObjects[Squeak.splOb_ClassPoint],r=this.vm.instantiateClass(i,0);return r.pointers[Squeak.Point_x]=e,r.pointers[Squeak.Point_y]=t,r},makeStArray:function(e,t){for(var i=this.vm.instantiateClass(this.vm.specialObjects[Squeak.splOb_ClassArray],e.length),r=0;r<e.length;r++)i.pointers[r]=this.makeStObject(e[r],t);return i},makeStByteArray:function(e){for(var t=this.vm.instantiateClass(this.vm.specialObjects[Squeak.splOb_ClassByteArray],e.length),i=0;i<e.length;i++)t.bytes[i]=255&e[i];return t},makeStString:function(e){for(var t=this.vm.instantiateClass(this.vm.specialObjects[Squeak.splOb_ClassString],e.length),i=0;i<e.length;++i)t.bytes[i]=255&e.charCodeAt(i);return t},makeStObject:function(e,t){if(null==e)return this.vm.nilObj;if(!0===e)return this.vm.trueObj;if(!1===e)return this.vm.falseObj;if(e.sqClass)return e;if("number"==typeof e)return e===(0|e)?this.makeLargeIfNeeded(e):this.makeFloat(e);if(t){var i=this.vm.instantiateClass(t,0);return i.jsObject=e,i}if("string"==typeof e||"Uint8Array"===e.constructor.name)return this.makeStString(e);if("Array"===e.constructor.name)return this.makeStArray(e);throw Error("cannot make smalltalk object")},pointsTo:function(e,t){return!!e.pointers&&0<=e.pointers.indexOf(t)},asUint8Array:function(e){if("Uint8Array"===e.constructor.name)return e;if("ArrayBuffer"===e.constructor.name)return new Uint8Array(e);if("string"!=typeof e)throw Error("unknown buffer type");for(var t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t},filenameToSqueak:function(e){var t="/SqueakJS"+("/"!==e[0]?"/":"")+e;return this.emulateMac&&(t=("Macintosh HD"+t).replace(/\//g,"").replace(/:/g,"/").replace(//g,":")),t},filenameFromSqueak:function(e){var t=this.emulateMac?e.replace(/^[^:]*:/,":").replace(/\//g,"").replace(/:/g,"/").replace(//g,":"):e;return t=t.replace(/^\/*SqueakJS\/?/,"/")}},"indexing",{objectAt:function(e,t,i){var r,a=this.stackNonInteger(1),s=this.stackPos32BitInt(0);if(!this.success)return a;if(e){if((r=this.atCache[a.hash&this.atCacheMask]).array!==a)return this.success=!1,a}else{if(a.isFloat){var n=a.floatData();return 1==s?this.pos32BitIntFor(n.getUint32(0,!1)):2==s?this.pos32BitIntFor(n.getUint32(4,!1)):(this.success=!1,a)}r=this.makeAtCacheInfo(this.atCache,this.vm.specialSelectors[32],a,t,i)}if(s<1||s>r.size)return this.success=!1,a;if(i)return a.pointers[s-1];if(a.isPointers())return a.pointers[s-1+r.ivarOffset];if(a.isWords())return r.convertChars?this.charFromInt(1073741823&a.words[s-1]):this.pos32BitIntFor(a.words[s-1]);if(a.isBytes())return r.convertChars?this.charFromInt(255&a.bytes[s-1]):255&a.bytes[s-1];var o=4*a.pointersSize();return s-1-o<0?(this.success=!1,a):255&a.bytes[s-1-o]},objectAtPut:function(e,t,i){var r,a=this.stackNonInteger(2),s=this.stackPos32BitInt(1);if(!this.success)return a;if(e){if((r=this.atPutCache[a.hash&this.atCacheMask]).array!==a)return this.success=!1,a}else{if(a.isFloat){var n=this.stackPos32BitInt(0);if(!this.success||1!=s&&2!=s)this.success=!1;else{var o=a.floatData();o.setUint32(1==s?0:4,n,!1),a.float=o.getFloat64(0)}return this.vm.stackValue(0)}r=this.makeAtCacheInfo(this.atPutCache,this.vm.specialSelectors[34],a,t,i)}if(s<1||s>r.size)return this.success=!1,a;var u,l=this.vm.stackValue(0);if(i)return a.dirty=!0,a.pointers[s-1]=l;if(a.isPointers())return a.dirty=!0,a.pointers[s-1+r.ivarOffset]=l;if(a.isWords()){if(t){if(l.sqClass!==this.vm.specialObjects[Squeak.splOb_ClassCharacter])return this.success=!1,l;if("number"!=typeof(u=this.charToInt(l)))return this.success=!1,l}else u=this.stackPos32BitInt(0);return this.success&&(a.words[s-1]=u),l}if(t){if(l.sqClass!==this.vm.specialObjects[Squeak.splOb_ClassCharacter])return this.success=!1,l;if("number"!=typeof(u=this.charToInt(l)))return this.success=!1,l}else{if("number"!=typeof l)return this.success=!1,l;u=l}if(u<0||255<u)return this.success=!1,l;if(a.isBytes())return a.bytes[s-1]=u;var c=4*a.pointersSize();return s-1-c<0?(this.success=!1,a):(a.bytes[s-1-c]=u,l)},objectSize:function(e){var t=this.vm.stackValue(0),i=-1;return e?t.sqClass===this.vm.specialObjects[Squeak.splOb_ClassArray]?i=t.pointersSize():t.sqClass===this.vm.specialObjects[Squeak.splOb_ClassString]&&(i=t.bytesSize()):i=this.indexableSize(t),-1===i?(this.success=!1,-1):this.pos32BitIntFor(i)},initAtCache:function(){this.atCacheSize=32,this.atCacheMask=this.atCacheSize-1,this.atCache=[],this.atPutCache=[],this.nonCachedInfo={};for(var e=0;e<this.atCacheSize;e++)this.atCache.push({}),this.atPutCache.push({})},makeAtCacheInfo:function(e,t,i,r,a){var s;return(s=this.vm.verifyAtSelector===t&&this.vm.verifyAtClass===i.sqClass&&!this.vm.isContext(i)?e[i.hash&this.atCacheMask]:this.nonCachedInfo).array=i,s.convertChars=r,a?(s.size=i.instSize()+Math.max(0,i.indexableSize(this)),s.ivarOffset=0):(s.size=i.indexableSize(this),s.ivarOffset=i.isPointers()?i.instSize():0),s}},"basic",{instantiateClass:function(e,t){return 4*t>this.vm.image.bytesLeft()?(console.warn("squeak: out of memory"),this.success=!1,this.vm.primFailCode=Squeak.PrimErrNoMemory,null):this.vm.instantiateClass(e,t)},someObject:function(){return this.vm.image.firstOldObject},nextObject:function(e){return this.vm.image.objectAfter(e)||0},someInstanceOf:function(e){var t=this.vm.image.someInstanceOf(e);return t||(this.success=!1,0)},nextInstanceAfter:function(e){var t=this.vm.image.nextInstanceAfter(e);return t||(this.success=!1,0)},allInstancesOf:function(e){var t=this.vm.image.allInstancesOf(e),i=this.vm.instantiateClass(this.vm.specialObjects[Squeak.splOb_ClassArray],t.length);return i.pointers=t,i},identityHash:function(e){return e.hash},identityHashSpur:function(e){var t=e.hash;return 0<t?t:e.hash=this.newObjectHash()},behaviorHash:function(e){var t=e.hash;return 0<t?t:this.vm.image.enterIntoClassTable(e)},newObjectHash:function(e){return Math.floor(4194302*Math.random())+1},primitiveSizeInBytesOfInstance:function(e){if(1<e)return!1;var t=this.stackNonInteger(e),i=e?this.stackInteger(0):0,r=t.classByteSizeOfInstance(i);return this.popNandPushIfOK(e+1,this.makeLargeIfNeeded(r))},primitiveSizeInBytes:function(e){var t=this.stackNonInteger(0).totalBytes();return this.popNandPushIfOK(e+1,this.makeLargeIfNeeded(t))},primitiveAsCharacter:function(e){var t=this.stackInteger(0);if(t<0||1073741823<t)return!1;var i=this.charFromInt(t);return!!i&&this.popNandPushIfOK(e+1,i)},primitiveFullGC:function(e){this.vm.image.fullGC("primitive");var t=this.vm.image.bytesLeft();return this.popNandPushIfOK(1,this.makeLargeIfNeeded(t))},primitivePartialGC:function(e){this.vm.image.partialGC("primitive");var t=this.vm.image.bytesLeft();return this.popNandPushIfOK(1,this.makeLargeIfNeeded(t))},primitiveMakePoint:function(e,t){var i=this.vm.stackValue(1),r=this.vm.stackValue(0);return!(t&&(this.checkFloat(i),this.checkFloat(r),!this.success))&&(this.vm.popNandPush(1+e,this.makePointWithXandY(i,r)),!0)},primitiveStoreStackp:function(e){var t=this.stackNonInteger(1),i=this.stackInteger(0);if(!this.success||i<0||this.vm.decodeSqueakSP(i)>=t.pointers.length)return!1;for(var r=t.pointers[Squeak.Context_stackPointer];r<i;)t.pointers[this.vm.decodeSqueakSP(++r)]=this.vm.nilObj;return t.pointers[Squeak.Context_stackPointer]=i,this.vm.popN(e),!0},primitiveChangeClass:function(e){if(2<e)return!1;var t=this.stackNonInteger(1),i=this.stackNonInteger(0);if(!this.success)return!1;if(t.sqClass.isCompact!==i.sqClass.isCompact)return!1;if(t.isPointers()){if(!i.isPointers())return!1;if(t.sqClass.classInstSize()!==i.sqClass.classInstSize())return!1}else{if(i.isPointers())return!1;var r=t.isBytes(),a=i.isBytes();if(r&&!a){if(t.bytes){if(3&t.bytes.length)return!1;t.words=new Uint32Array(t.bytes.buffer),delete t.bytes}}else!r&&a&&t.words&&(t.bytes=new Uint8Array(t.words.buffer),delete t.words)}return t._format=i._format,t.sqClass=i.sqClass,this.popNIfOK(e)},primitiveAdoptInstance:function(e){if(2<e)return!1;var t=this.stackNonInteger(1),i=this.stackNonInteger(0);return!!this.success&&(t.classInstFormat()===i.sqClass.classInstFormat()&&t.isCompact===i.sqClass.isCompact&&t.classInstSize()===i.sqClass.classInstSize()&&(i.sqClass=t,this.popNIfOK(e)))},primitiveDoPrimitiveWithArgs:function(e){var t=this.stackNonInteger(0),i=this.stackInteger(1);if(!this.success)return!1;var r=t.pointersSize(),a=this.vm.activeContext.pointersSize();if(this.vm.sp+r>=a)return!1;this.vm.popN(2);for(var s=0;s<r;s++)this.vm.push(t.pointers[s]);return!!this.vm.tryPrimitive(i,r)||(this.vm.popN(r),this.vm.push(i),this.vm.push(t),!1)},primitiveShortAtAndPut:function(e){var t,i=this.stackNonInteger(e),r=this.stackInteger(e-1)-1,a=i.wordsAsInt16Array();if(!this.success||!a||r<0||r>=a.length)return!1;if(e<2)t=a[r];else{if((t=this.stackInteger(0))<-32768||32767<t)return!1;a[r]=t}return this.popNandPushIfOK(e+1,t),!0},primitiveIntegerAtAndPut:function(e){var t,i=this.stackNonInteger(e),r=this.stackInteger(e-1)-1,a=i.wordsAsInt32Array();if(!this.success||!a||r<0||r>=a.length)return!1;if(e<2)t=this.signed32BitIntegerFor(a[r]);else{if(t=this.stackSigned32BitInt(0),!this.success)return!1;a[r]=t}return this.popNandPushIfOK(e+1,t),!0},primitiveConstantFill:function(e){var t=this.stackNonInteger(1),i=this.stackPos32BitInt(0);if(!this.success||!t.isWordsOrBytes())return!1;var r=t.words||t.bytes;if(r){if(r===t.bytes&&255<i)return!1;for(var a=0;a<r.length;a++)r[a]=i}return this.vm.popN(e),!0},primitiveNewMethod:function(e){var t=this.stackInteger(0),i=this.stackInteger(1);if(!this.success)return 0;var r=this.vm.instantiateClass(this.vm.stackValue(2),i);r.pointers=[t];for(var a=r.methodNumLits(),s=0;s<a;s++)r.pointers.push(this.vm.nilObj);return this.vm.popNandPush(1+e,r),this.vm.breakOnNewMethod&&(this.vm.breakOnMethod=r),!0},primitiveExecuteMethodArgsArray:function(e){var t=this.stackNonInteger(0),i=this.stackNonInteger(1),r=this.vm.stackValue(2);if(!this.success||!t.isMethod()||4<e)return!1;var a=t.methodNumArgs();if(a!==i.pointersSize())return!1;this.vm.popNandPush(e+1,r);for(var s=0;s<a;s++)this.vm.push(i.pointers[s]);return this.vm.executeNewMethod(r,t,a,t.methodPrimitiveIndex(),null,null),!0},primitiveArrayBecome:function(e,t){var i=this.stackNonInteger(e),r=this.stackNonInteger(e-1),a=!(1<e)||this.stackBoolean(e-2);return!!this.success&&(this.success=this.vm.image.bulkBecome(i.pointers,r.pointers,t,a),this.popNIfOK(e))},doStringReplace:function(){var e=this.stackNonInteger(4),t=this.stackInteger(3)-1,i=this.stackInteger(2)-t,r=this.stackNonInteger(1),a=this.stackInteger(0)-1;if(!this.success)return e;if(!r.sameFormatAs(e))return this.success=!1,e;if(r.isPointers()){var s=r.pointersSize();if((a+=r.instSize())<0||s<a+i)return this.success=!1,e;if(s=e.pointersSize(),(t+=e.instSize())<0||s<t+i)return this.success=!1,e;for(var n=0;n<i;n++)e.pointers[t+n]=r.pointers[a+n];return e}if(r.isWords()){s=r.wordsSize();if(a<0||s<a+i)return this.success=!1,e;if(s=e.wordsSize(),t<0||s<t+i)return this.success=!1,e;if(r.isFloat&&e.isFloat)e.float=r.float;else if(r.isFloat)e.wordsAsFloat64Array()[t]=r.float;else if(e.isFloat)e.float=r.wordsAsFloat64Array()[a];else for(n=0;n<i;n++)e.words[t+n]=r.words[a+n];return e}s=r.bytesSize();if(a<0||s<a+i)return this.success=!1,e;if(s=e.bytesSize(),t<0||s<t+i)return this.success=!1,e;for(n=0;n<i;n++)e.bytes[t+n]=r.bytes[a+n];return e},primitiveCopyObject:function(e){var t=this.stackNonInteger(1),i=this.stackNonInteger(0),r=t.pointersSize();if(!this.success||t.isWordsOrBytes()||t.sqClass!==i.sqClass||r!==i.pointersSize())return!1;for(var a=0;a<r;a++)t.pointers[a]=i.pointers[a];return t.dirty=i.dirty,this.vm.pop(e),!0},primitiveLoadImageSegment:function(e){var t=this.stackNonInteger(1),i=this.stackNonInteger(0);if(!t.words||!i.pointers)return!1;var r=this.vm.image.loadImageSegment(t,i);return!!r&&this.popNandPushIfOK(e+1,r)}},"blocks/closures",{doBlockCopy:function(){var e=this.vm.stackValue(1),t=this.stackInteger(0),i=e;if(this.vm.isContext(i)||(this.success=!1),!this.success)return e;"number"==typeof i.pointers[Squeak.Context_method]&&(i=i.pointers[Squeak.BlockContext_home]);var r=i.pointersSize()-i.instSize(),a=this.vm.instantiateClass(this.vm.specialObjects[Squeak.splOb_ClassBlockContext],r),s=this.vm.encodeSqueakPC(this.vm.pc+2,this.vm.method);return a.pointers[Squeak.BlockContext_initialIP]=s,a.pointers[Squeak.Context_instructionPointer]=s,a.pointers[Squeak.Context_stackPointer]=0,a.pointers[Squeak.BlockContext_argumentCount]=t,a.pointers[Squeak.BlockContext_home]=i,a.pointers[Squeak.Context_sender]=this.vm.nilObj,a},primitiveBlockValue:function(e){var t=this.vm.stackValue(e);if(!this.isA(t,Squeak.splOb_ClassBlockContext))return!1;var i=t,r=i.pointers[Squeak.BlockContext_argumentCount];if("number"!=typeof r)return!1;if(r!=e)return!1;if(!i.pointers[Squeak.BlockContext_caller].isNil)return!1;this.vm.arrayCopy(this.vm.activeContext.pointers,this.vm.sp-e+1,i.pointers,Squeak.Context_tempFrameStart,e);var a=i.pointers[Squeak.BlockContext_initialIP];return i.pointers[Squeak.Context_instructionPointer]=a,i.pointers[Squeak.Context_stackPointer]=e,i.pointers[Squeak.BlockContext_caller]=this.vm.activeContext,this.vm.popN(e+1),this.vm.newActiveContext(i),!0},primitiveBlockValueWithArgs:function(e){var t=this.vm.stackValue(1),i=this.vm.stackValue(0);if(!this.isA(t,Squeak.splOb_ClassBlockContext))return!1;if(!this.isA(i,Squeak.splOb_ClassArray))return!1;var r=t.pointers[Squeak.BlockContext_argumentCount];if("number"!=typeof r)return!1;if(r!=i.pointersSize())return!1;if(!t.pointers[Squeak.BlockContext_caller].isNil)return!1;this.vm.arrayCopy(i.pointers,0,t.pointers,Squeak.Context_tempFrameStart,r);var a=t.pointers[Squeak.BlockContext_initialIP];return t.pointers[Squeak.Context_instructionPointer]=a,t.pointers[Squeak.Context_stackPointer]=r,t.pointers[Squeak.BlockContext_caller]=this.vm.activeContext,this.vm.popN(e+1),this.vm.newActiveContext(t),!0},primitiveClosureCopyWithCopiedValues:function(e){return this.vm.breakNow("primitiveClosureCopyWithCopiedValues"),!1},primitiveClosureValue:function(e){var t=this.vm.stackValue(e);return e===t.pointers[Squeak.Closure_numArgs]&&this.activateNewClosureMethod(t,e)},primitiveClosureValueWithArgs:function(e){var t=this.vm.top(),i=t.pointersSize(),r=this.vm.stackValue(e);if(i!==r.pointers[Squeak.Closure_numArgs])return!1;this.vm.pop();for(var a=0;a<i;a++)this.vm.push(t.pointers[a]);return this.activateNewClosureMethod(r,i)},primitiveClosureValueNoContextSwitch:function(e){return this.primitiveClosureValue(e)},activateNewClosureMethod:function(e,t){var i=e.pointers[Squeak.Closure_outerContext],r=i.pointers[Squeak.Context_method],a=this.vm.allocateOrRecycleContext(r.methodNeedsLargeFrame()),s=e.pointers.length-Squeak.Closure_firstCopiedValue;a.pointers[Squeak.Context_sender]=this.vm.activeContext,a.pointers[Squeak.Context_instructionPointer]=e.pointers[Squeak.Closure_startpc],a.pointers[Squeak.Context_stackPointer]=t+s,a.pointers[Squeak.Context_method]=i.pointers[Squeak.Context_method],a.pointers[Squeak.Context_closure]=e,a.pointers[Squeak.Context_receiver]=i.pointers[Squeak.Context_receiver];for(var n=Squeak.Context_tempFrameStart,o=0;o<t;o++)a.pointers[n++]=this.vm.stackValue(t-o-1);for(o=0;o<s;o++)a.pointers[n++]=e.pointers[Squeak.Closure_firstCopiedValue+o];return this.vm.popN(t+1),this.vm.newActiveContext(a),!0}},"scheduling",{primitiveResume:function(){return this.resume(this.vm.top()),!0},primitiveSuspend:function(){var e=this.vm.top();if(e===this.activeProcess())this.vm.popNandPush(1,this.vm.nilObj),this.transferTo(this.wakeHighestPriority());else{var t=e.pointers[Squeak.Proc_myList];if(t.isNil)return!1;if(this.removeProcessFromList(e,t),!this.success)return!1;e.pointers[Squeak.Proc_myList]=this.vm.nilObj,this.vm.popNandPush(1,t)}return!0},getScheduler:function(){return this.vm.specialObjects[Squeak.splOb_SchedulerAssociation].pointers[Squeak.Assn_value]},activeProcess:function(){return this.getScheduler().pointers[Squeak.ProcSched_activeProcess]},resume:function(e){var t=this.activeProcess();t.pointers[Squeak.Proc_priority]<e.pointers[Squeak.Proc_priority]?(this.putToSleep(t),this.transferTo(e)):this.putToSleep(e)},putToSleep:function(e){var t=e.pointers[Squeak.Proc_priority],i=this.getScheduler().pointers[Squeak.ProcSched_processLists].pointers[t-1];this.linkProcessToList(e,i)},transferTo:function(e){var t=this.getScheduler(),i=t.pointers[Squeak.ProcSched_activeProcess];t.pointers[Squeak.ProcSched_activeProcess]=e,t.dirty=!0,i.pointers[Squeak.Proc_suspendedContext]=this.vm.activeContext,i.dirty=!0,this.vm.newActiveContext(e.pointers[Squeak.Proc_suspendedContext]),e.pointers[Squeak.Proc_suspendedContext]=this.vm.nilObj,this.vm.reclaimableContextCount=0,this.vm.breakOnContextChanged&&(this.vm.breakOnContextChanged=!1,this.vm.breakNow())},wakeHighestPriority:function(){var e,t=this.getScheduler().pointers[Squeak.ProcSched_processLists],i=t.pointersSize()-1;do{if(i<0)throw Error("scheduler could not find a runnable process");e=t.pointers[i--]}while(this.isEmptyList(e));return this.removeFirstLinkOfList(e)},linkProcessToList:function(e,t){if(this.isEmptyList(t))t.pointers[Squeak.LinkedList_firstLink]=e;else{var i=t.pointers[Squeak.LinkedList_lastLink];i.pointers[Squeak.Link_nextLink]=e,i.dirty=!0}t.pointers[Squeak.LinkedList_lastLink]=e,t.dirty=!0,e.pointers[Squeak.Proc_myList]=t,e.dirty=!0},isEmptyList:function(e){return e.pointers[Squeak.LinkedList_firstLink].isNil},removeFirstLinkOfList:function(e){var t=e.pointers[Squeak.LinkedList_firstLink];if(t===e.pointers[Squeak.LinkedList_lastLink])e.pointers[Squeak.LinkedList_firstLink]=this.vm.nilObj,e.pointers[Squeak.LinkedList_lastLink]=this.vm.nilObj;else{var i=t.pointers[Squeak.Link_nextLink];e.pointers[Squeak.LinkedList_firstLink]=i,e.dirty=!0}return t.pointers[Squeak.Link_nextLink]=this.vm.nilObj,t},removeProcessFromList:function(e,t){var i=t.pointers[Squeak.LinkedList_firstLink],r=t.pointers[Squeak.LinkedList_lastLink];if(e===i){var a=e.pointers[Squeak.Link_nextLink];t.pointers[Squeak.LinkedList_firstLink]=a,e===r&&(t.pointers[Squeak.LinkedList_lastLink]=this.vm.nilObj)}else{for(var s=i;;){if(s.isNil)return this.success=!1;if((a=s.pointers[Squeak.Link_nextLink])===e)break;s=a}a=e.pointers[Squeak.Link_nextLink],s.pointers[Squeak.Link_nextLink]=a,e===r&&(t.pointers[Squeak.LinkedList_lastLink]=s)}e.pointers[Squeak.Link_nextLink]=this.vm.nilObj},registerSemaphore:function(e){var t=this.vm.top();return this.isA(t,Squeak.splOb_ClassSemaphore)?this.vm.specialObjects[e]=t:this.vm.specialObjects[e]=this.vm.nilObj,this.vm.stackValue(1)},primitiveWait:function(){var e=this.vm.top();if(!this.isA(e,Squeak.splOb_ClassSemaphore))return!1;var t=e.pointers[Squeak.Semaphore_excessSignals];return 0<t?e.pointers[Squeak.Semaphore_excessSignals]=t-1:(this.linkProcessToList(this.activeProcess(),e),this.transferTo(this.wakeHighestPriority())),!0},primitiveSignal:function(){var e=this.vm.top();return!!this.isA(e,Squeak.splOb_ClassSemaphore)&&(this.synchronousSignal(e),!0)},synchronousSignal:function(e){this.isEmptyList(e)?e.pointers[Squeak.Semaphore_excessSignals]++:this.resume(this.removeFirstLinkOfList(e))},signalAtMilliseconds:function(e,t){this.isA(e,Squeak.splOb_ClassSemaphore)?(this.vm.specialObjects[Squeak.splOb_TheTimerSemaphore]=e,this.vm.nextWakeupTick=t):(this.vm.specialObjects[Squeak.splOb_TheTimerSemaphore]=this.vm.nilObj,this.vm.nextWakeupTick=0)},primitiveSignalAtMilliseconds:function(e){var t=this.stackInteger(0),i=this.stackNonInteger(1);return!!this.success&&(this.signalAtMilliseconds(i,t),this.vm.popN(e),!0)},primitiveSignalAtUTCMicroseconds:function(e){var t=this.stackSigned53BitInt(0),i=this.stackNonInteger(1);if(!this.success)return!1;var r=t/1e3+Squeak.EpochUTC-this.vm.startupTime&Squeak.MillisecondClockMask;return this.signalAtMilliseconds(i,r),this.vm.popN(e),!0},signalSemaphoreWithIndex:function(e){this.semaphoresToSignal.push(e)},signalExternalSemaphores:function(){for(var e=this.vm.specialObjects[Squeak.splOb_ExternalObjectsArray].pointers,t=this.vm.specialObjects[Squeak.splOb_ClassSemaphore];this.semaphoresToSignal.length;){var i=e[this.semaphoresToSignal.shift()-1];i.sqClass==t&&this.synchronousSignal(i)}},primitiveEnterCriticalSection:function(e){if(1<e)return!1;var t=this.vm.stackValue(e),i=e?this.vm.top():this.activeProcess(),r=t.pointers[Squeak.Mutex_owner];return r.isNil?(t.pointers[Squeak.Mutex_owner]=i,t.dirty=!0,this.popNandPushIfOK(e+1,this.vm.falseObj)):r===i?this.popNandPushIfOK(e+1,this.vm.trueObj):(this.popNandPushIfOK(e+1,this.vm.falseObj),this.linkProcessToList(i,t),this.transferTo(this.wakeHighestPriority())),!0},primitiveExitCriticalSection:function(e){var t=this.vm.top();if(this.isEmptyList(t))t.pointers[Squeak.Mutex_owner]=this.vm.nilObj;else{var i=this.removeFirstLinkOfList(t);t.pointers[Squeak.Mutex_owner]=i,t.dirty=!0,this.resume(i)}return!0},primitiveTestAndSetOwnershipOfCriticalSection:function(e){if(1<e)return!1;var t=this.vm.stackValue(e),i=e?this.vm.top():this.activeProcess(),r=t.pointers[Squeak.Mutex_owner];return r.isNil?(t.pointers[Squeak.Mutex_owner]=i,t.dirty=!0,this.popNandPushIfOK(e+1,this.vm.falseObj)):r===i?this.popNandPushIfOK(e+1,this.vm.trueObj):this.popNandPushIfOK(e+1,this.vm.nilObj),!0}},"vm functions",{primitiveGetAttribute:function(e){var t=this.stackInteger(0);if(!this.success)return!1;var i=this.display.argv,r=this.display.vmOptions,a=null;switch(t){case 0:a=i&&i[0]||this.filenameToSqueak(Squeak.vmPath+Squeak.vmFile);break;case 1:a=i&&i[1]||this.display.documentName;break;case 2:a=i&&i[2]||this.display.documentName;break;case 1001:a=Squeak.platformName;break;case 1002:a=Squeak.osVersion;break;case 1003:a=Squeak.platformSubtype;break;case 1004:a=Squeak.vmVersion;break;case 1005:a=Squeak.windowSystem;break;case 1006:a=Squeak.vmBuild;break;case 1007:a=Squeak.vmVersion;break;case 1009:a=Squeak.vmVersion+" Date: "+Squeak.vmDate;break;default:if(0<=t&&i&&i.length>t)a=i[t];else{if(!(t<0&&r&&r.length>-t-1))return!1;a=r[-t-1]}}return this.vm.popNandPush(e+1,this.makeStObject(a)),!0},setLowSpaceThreshold:function(){var e=this.stackInteger(0);return this.success&&(this.vm.lowSpaceThreshold=e),this.vm.stackValue(1)},primitiveVMParameter:function(e){var t=this.vm.image.isSpur?71:44;switch(e){case 0:for(var i=this.vm.instantiateClass(this.vm.specialObjects[Squeak.splOb_ClassArray],t),r=0;r<t;r++)i.pointers[r]=this.makeStObject(this.vmParameterAt(r+1));return this.popNandPushIfOK(1,i);case 1:var a=this.stackInteger(0);return a<1||t<a?!1:this.popNandPushIfOK(2,this.makeStObject(this.vmParameterAt(a)));case 2:return this.popNandPushIfOK(3,0)}return!1},vmParameterAt:function(e){switch(e){case 1:case 2:return this.vm.image.oldSpaceBytes;case 3:return this.vm.image.totalMemory;case 4:return this.vm.image.allocationCount+this.vm.image.newSpaceCount;case 7:return this.vm.image.gcCount;case 8:return this.vm.image.gcMilliseconds;case 9:return this.vm.image.pgcCount;case 10:return this.vm.image.pgcMilliseconds;case 11:return this.vm.image.gcTenured;case 15:case 16:case 17:case 22:return 0;case 23:return this.vm.image.extraVMMemory;case 40:return 4;case 41:return this.vm.image.formatVersion();case 44:case 46:case 48:return 0;case 54:return this.vm.image.bytesLeft();case 65:return 0}return null},primitiveImageName:function(e){return 0==e?this.popNandPushIfOK(1,this.makeStString(this.filenameToSqueak(this.vm.image.name))):(this.vm.image.name=this.filenameFromSqueak(this.vm.top().bytesAsString()),Squeak.Settings.squeakImageName=this.vm.image.name,!0)},primitiveSnapshot:function(e){this.vm.popNandPush(1,this.vm.trueObj),this.vm.storeContextRegisters(),this.activeProcess().pointers[Squeak.Proc_suspendedContext]=this.vm.activeContext,this.vm.image.fullGC("snapshot");var t=this.vm.image.writeToBuffer();return Squeak.flushAllFiles&&(Squeak.flushAllFiles(),Squeak.filePut(this.vm.image.name,t)),this.vm.popNandPush(1,this.vm.falseObj),!0},primitiveQuit:function(e){return Squeak.flushAllFiles&&Squeak.flushAllFiles(),this.display.quitFlag=!0,this.vm.breakNow("quit"),!0},primitiveExitToDebugger:function(e){return this.vm.breakNow("debugger primitive"),!0},primitiveSetGCBiasToGrow:function(e){return this.fakePrimitive(".primitiveSetGCBiasToGrow",0,e)},primitiveSetGCBiasToGrowGCLimit:function(e){return this.fakePrimitive(".primitiveSetGCBiasToGrowGCLimit",0,e)}},"time",{primitiveRelinquishProcessorForMicroseconds:function(e){return this.vm.pop(e),this.vm.goIdle(),!0},millisecondClockValue:function(){return Date.now()-this.vm.startupTime&Squeak.MillisecondClockMask},millisecondClockValueSet:function(e){this.vm.startupTime=Date.now()-e},secondClock:function(){return this.pos32BitIntFor(Squeak.totalSeconds())},microsecondClock:function(e){var t=Date.now()-e.epoch;if("object"!=typeof performance)return this.pos53BitIntFor(1e3*t);var i=1e3*performance.now()%1e3|0,r=e.millis,a=e.micros;return t<r&&(t=r),t===r&&i<a&&t++,e.millis=t,e.micros=i,this.pos53BitIntFor(1e3*t+i)},microsecondClockUTC:function(){return this.microsecondClockUTCState||(this.microsecondClockUTCState={epoch:Squeak.EpochUTC,millis:0,micros:0}),this.microsecondClock(this.microsecondClockUTCState)},microsecondClockLocal:function(){return this.microsecondClockLocalState||(this.microsecondClockLocalState={epoch:Squeak.Epoch,millis:0,micros:0}),this.microsecondClock(this.microsecondClockLocalState)},primitiveUtcWithOffset:function(e){var t=new Date,i=this.pos53BitIntFor(1e3*t.getTime()),r=-60*t.getTimezoneOffset();if(0<e){var a=this.vm.stackValue(0);return a.pointers[0]=i,a.pointers[1]=r,this.popNandPushIfOK(e+1,a),!0}var s=[i,r];return this.popNandPushIfOK(e+1,this.makeStArray(s)),!0}}),Object.subclass("Squeak.Compiler","initialization",{initialize:function(e){this.vm=e,this.comments=!!Squeak.Compiler.comments,this.specialSelectors=["+","-","<",">","<=",">=","=","~=","*","/","\\","@","bitShift:","//","bitAnd:","bitOr:","at:","at:put:","size","next","nextPut:","atEnd","==","class","blockCopy:","value","value:","do:","new","new:","x","y"]}},"accessing",{compile:function(e,t,i){if(void 0===e.compiled)e.compiled=!1;else{this.singleStep=!1,this.debug=this.comments;var r=t&&t.className(),a=i&&i.bytesAsString();e.compiled=this.generate(e,r,a)}},enableSingleStepping:function(r,a,s){if(!r.compiled||!r.compiled.canSingleStep){this.singleStep=!0,this.debug=!0,a||this.vm.allMethodsDo(function(e,t,i){if(t===r)return a=e,s=i,!0});var e=a&&a.className(),t=s&&s.bytesAsString(),i=a&&a.allInstVarNames();r.compiled=this.generate(r,e,t,i),r.compiled.canSingleStep=!0}return!0},functionNameFor:function(e,t){if(void 0===e||"?"===e)return"Squeak_DOIT";if(!/[^a-zA-Z0-9:_]/.test(t))return(e+"_"+t).replace(/[: ]/g,"_");var i=t.replace(/./g,function(e){return{"|":"OR","~":"NOT","<":"LT","=":"EQ",">":"GT","&":"AND","@":"AT","*":"TIMES","+":"PLUS","\\":"MOD","-":"MINUS",",":"COMMA","/":"DIV","?":"IF"}[e]||"OPERATOR"});return e.replace(/[ ]/,"_")+"__"+i+"__"}},"generating",{generate:function(e,t,i,r){for(this.method=e,this.pc=0,this.endPC=0,this.prevPC=0,this.source=[],this.sourceLabels={},this.needsLabel={},this.sourcePos={},this.needsVar={},this.needsBreak=!1,t&&i&&this.source.push("// ",t,">>",i,"\n"),this.instVarNames=r,this.allVars=["context","stack","rcvr","inst[","temp[","lit["],this.sourcePos.context=this.source.length,this.source.push("var context = vm.activeContext;\n"),this.sourcePos.stack=this.source.length,this.source.push("var stack = context.pointers;\n"),this.sourcePos.rcvr=this.source.length,this.source.push("var rcvr = vm.receiver;\n"),this.sourcePos["inst["]=this.source.length,this.source.push("var inst = rcvr.pointers;\n"),this.sourcePos["temp["]=this.source.length,this.source.push("var temp = vm.homeContext.pointers;\n"),this.sourcePos["lit["]=this.source.length,this.source.push("var lit = vm.method.pointers;\n"),this.sourcePos["loop-start"]=this.source.length,this.source.push("while (true) switch (vm.pc) {\ncase 0:\n"),this.done=!1;!this.done;){var a=e.bytes[this.pc++],s=0;switch(248&a){case 0:case 8:this.generatePush("inst[",15&a,"]");break;case 16:case 24:this.generatePush("temp[",6+(15&a),"]");break;case 32:case 40:case 48:case 56:this.generatePush("lit[",1+(31&a),"]");break;case 64:case 72:case 80:case 88:this.generatePush("lit[",1+(31&a),"].pointers[1]");break;case 96:this.generatePopInto("inst[",7&a,"]");break;case 104:this.generatePopInto("temp[",6+(7&a),"]");break;case 112:switch(a){case 112:this.generatePush("rcvr");break;case 113:this.generatePush("vm.trueObj");break;case 114:this.generatePush("vm.falseObj");break;case 115:this.generatePush("vm.nilObj");break;case 116:this.generatePush("-1");break;case 117:this.generatePush("0");break;case 118:this.generatePush("1");break;case 119:this.generatePush("2")}break;case 120:switch(a){case 120:this.generateReturn("rcvr");break;case 121:this.generateReturn("vm.trueObj");break;case 122:this.generateReturn("vm.falseObj");break;case 123:this.generateReturn("vm.nilObj");break;case 124:this.generateReturn("stack[vm.sp]");break;case 125:this.generateBlockReturn();break;default:throw Error("unusedBytecode")}break;case 128:case 136:this.generateExtended(a);break;case 144:this.generateJump(1+(7&a));break;case 152:this.generateJumpIf(!1,1+(7&a));break;case 160:s=e.bytes[this.pc++],this.generateJump(256*((7&a)-4)+s);break;case 168:s=e.bytes[this.pc++],this.generateJumpIf(a<172,256*(3&a)+s);break;case 176:case 184:this.generateNumericOp(a);break;case 192:case 200:this.generateQuickPrim(a);break;case 208:case 216:this.generateSend("lit[",1+(15&a),"]",0,!1);break;case 224:case 232:this.generateSend("lit[",1+(15&a),"]",1,!1);break;case 240:case 248:this.generateSend("lit[",1+(15&a),"]",2,!1)}}var n=this.functionNameFor(t,i);return this.singleStep?(this.debug&&this.source.push("// all valid PCs have a label;\n"),this.source.push("default: throw Error('invalid PC');\n}")):(this.sourcePos["loop-end"]=this.source.length,this.source.push("default: vm.interpretOne(true); return;\n}"),this.deleteUnneededLabels()),this.deleteUnneededVariables(),new Function("'use strict';\nreturn function "+n+"(vm) {\n"+this.source.join("")+"}")()},generateExtended:function(e){var t,i;switch(e){case 128:switch((t=this.method.bytes[this.pc++])>>6){case 0:return void this.generatePush("inst[",63&t,"]");case 1:return void this.generatePush("temp[",6+(63&t),"]");case 2:return void this.generatePush("lit[",1+(63&t),"]");case 3:return void this.generatePush("lit[",1+(63&t),"].pointers[1]")}case 129:switch((t=this.method.bytes[this.pc++])>>6){case 0:return void this.generateStoreInto("inst[",63&t,"]");case 1:return void this.generateStoreInto("temp[",6+(63&t),"]");case 2:throw Error("illegal store into literal");case 3:return void this.generateStoreInto("lit[",1+(63&t),"].pointers[1]")}return;case 130:switch((t=this.method.bytes[this.pc++])>>6){case 0:return void this.generatePopInto("inst[",63&t,"]");case 1:return void this.generatePopInto("temp[",6+(63&t),"]");case 2:throw Error("illegal pop into literal");case 3:return void this.generatePopInto("lit[",1+(63&t),"].pointers[1]")}case 131:return t=this.method.bytes[this.pc++],void this.generateSend("lit[",1+(31&t),"]",t>>5,!1);case 132:switch(t=this.method.bytes[this.pc++],i=this.method.bytes[this.pc++],t>>5){case 0:return void this.generateSend("lit[",1+i,"]",31&t,!1);case 1:return void this.generateSend("lit[",1+i,"]",31&t,!0);case 2:return void this.generatePush("inst[",i,"]");case 3:return void this.generatePush("lit[",1+i,"]");case 4:return void this.generatePush("lit[",1+i,"].pointers[1]");case 5:return void this.generateStoreInto("inst[",i,"]");case 6:return void this.generatePopInto("inst[",i,"]");case 7:return void this.generateStoreInto("lit[",1+i,"].pointers[1]")}case 133:return t=this.method.bytes[this.pc++],void this.generateSend("lit[",1+(31&t),"]",t>>5,!0);case 134:return t=this.method.bytes[this.pc++],void this.generateSend("lit[",1+(63&t),"]",t>>6,!1);case 135:return void this.generateInstruction("pop","vm.sp--");case 136:return this.needsVar.stack=!0,void this.generateInstruction("dup","var dup = stack[vm.sp]; stack[++vm.sp] = dup");case 137:return this.needsVar.stack=!0,void this.generateInstruction("push thisContext","stack[++vm.sp] = vm.exportThisContext()");case 138:var r=127<(t=this.method.bytes[this.pc++]),a=127&t;return void this.generateClosureTemps(a,r);case 139:return t=this.method.bytes[this.pc++],i=this.method.bytes[this.pc++],void this.generateCallPrimitive(t+256*i);case 140:return t=this.method.bytes[this.pc++],i=this.method.bytes[this.pc++],void this.generatePush("temp[",6+i,"].pointers[",t,"]");case 141:return t=this.method.bytes[this.pc++],i=this.method.bytes[this.pc++],void this.generateStoreInto("temp[",6+i,"].pointers[",t,"]");case 142:return t=this.method.bytes[this.pc++],i=this.method.bytes[this.pc++],void this.generatePopInto("temp[",6+i,"].pointers[",t,"]");case 143:var s=15&(t=this.method.bytes[this.pc++]),n=t>>4,o=(i=this.method.bytes[this.pc++])<<8|this.method.bytes[this.pc++];return void this.generateClosureCopy(s,n,o)}},generatePush:function(e,t,i,r,a){this.debug&&this.generateDebugCode("push",e,t,i,r,a),this.generateLabel(),this.needsVar[e]=!0,this.needsVar.stack=!0,this.source.push("stack[++vm.sp] = ",e),void 0!==t&&(this.source.push(t,i),void 0!==r&&this.source.push(r,a)),this.source.push(";\n")},generateStoreInto:function(e,t,i,r,a){this.debug&&this.generateDebugCode("store into",e,t,i,r,a),this.generateLabel(),this.needsVar[e]=!0,this.needsVar.stack=!0,this.source.push(e),void 0!==t&&(this.source.push(t,i),void 0!==r&&this.source.push(r,a)),this.source.push(" = stack[vm.sp];\n"),this.generateDirty(e,t)},generatePopInto:function(e,t,i,r,a){this.debug&&this.generateDebugCode("pop into",e,t,i,r,a),this.generateLabel(),this.needsVar[e]=!0,this.needsVar.stack=!0,this.source.push(e),void 0!==t&&(this.source.push(t,i),void 0!==r&&this.source.push(r,a)),this.source.push(" = stack[vm.sp--];\n"),this.generateDirty(e,t)},generateReturn:function(e){this.debug&&this.generateDebugCode("return",e),this.generateLabel(),this.needsVar[e]=!0,this.source.push("vm.pc = ",this.pc,"; vm.doReturn(",e,"); return;\n"),this.needsBreak=!1,this.done=this.pc>this.endPC},generateBlockReturn:function(){this.debug&&this.generateDebugCode("block return"),this.generateLabel(),this.needsVar.stack=!0,this.source.push("vm.pc = ",this.pc,"; vm.doReturn(stack[vm.sp--], context.pointers[0]); return;\n"),this.needsBreak=!1},generateJump:function(e){var t=this.pc+e;this.debug&&this.generateDebugCode("jump to "+t),this.generateLabel(),this.needsVar.context=!0,this.source.push("vm.pc = ",t,"; "),e<0&&this.source.push("\nif (vm.interruptCheckCounter-- <= 0) {\n","   vm.checkForInterrupts();\n","   if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return;\n","}\n"),this.singleStep&&this.source.push("\nif (vm.breakOutOfInterpreter) return;\n"),this.source.push("continue;\n"),this.needsBreak=!1,this.needsLabel[t]=!0,t>this.endPC&&(this.endPC=t)},generateJumpIf:function(e,t){var i=this.pc+t;this.debug&&this.generateDebugCode("jump if "+e+" to "+i),this.generateLabel(),this.needsVar.stack=!0,this.source.push("var cond = stack[vm.sp--]; if (cond === vm.",e,"Obj) {vm.pc = ",i,"; "),this.singleStep&&this.source.push("if (vm.breakOutOfInterpreter) return; else "),this.source.push("continue}\n","else if (cond !== vm.",!e,"Obj) {vm.sp++; vm.pc = ",this.pc,"; vm.send(vm.specialObjects[25], 0, false); return}\n"),this.needsLabel[this.pc]=!0,this.needsLabel[i]=!0,i>this.endPC&&(this.endPC=i)},generateQuickPrim:function(e){switch(this.debug&&this.generateDebugCode("quick prim "+this.specialSelectors[16+(15&e)]),this.generateLabel(),e){case 194:return this.needsVar.stack=!0,this.source.push("if (stack[vm.sp].sqClass === vm.specialObjects[7]) stack[vm.sp] = stack[vm.sp].pointersSize();\n","else if (stack[vm.sp].sqClass === vm.specialObjects[6]) stack[vm.sp] = stack[vm.sp].bytesSize();\n","else { vm.pc = ",this.pc,"; vm.sendSpecial(18); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return; }\n"),void(this.needsLabel[this.pc]=!0);case 198:return this.needsVar.stack=!0,void this.source.push("var cond = stack[vm.sp-1] === stack[vm.sp];\nstack[--vm.sp] = cond ? vm.trueObj : vm.falseObj;\n");case 199:return this.needsVar.stack=!0,void this.source.push("stack[vm.sp] = typeof stack[vm.sp] === 'number' ? vm.specialObjects[5] : stack[vm.sp].sqClass;\n");case 200:return this.needsVar.rcvr=!0,this.source.push("vm.pc = ",this.pc,"; if (!vm.primHandler.quickSendOther(rcvr, ",15&e,")) ","{vm.sendSpecial(",16+(15&e),"); return}\n"),this.needsLabel[this.pc]=!0,void(this.needsLabel[this.pc+2]=!0);case 201:case 202:case 203:return this.needsVar.rcvr=!0,this.source.push("vm.pc = ",this.pc,"; if (!vm.primHandler.quickSendOther(rcvr, ",15&e,")) vm.sendSpecial(",16+(15&e),"); return;\n"),void(this.needsLabel[this.pc]=!0)}this.needsVar.rcvr=!0,this.needsVar.context=!0,this.source.push("vm.pc = ",this.pc,"; if (!vm.primHandler.quickSendOther(rcvr, ",15&e,"))"," vm.sendSpecial(",16+(15&e),");\n","if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return;\n"),this.needsBreak=!1,this.needsLabel[this.pc]=!0},generateNumericOp:function(e){switch(this.debug&&this.generateDebugCode("numeric op "+this.specialSelectors[15&e]),this.generateLabel(),this.needsLabel[this.pc]=!0,e){case 176:return this.needsVar.stack=!0,void this.source.push("var a = stack[vm.sp - 1], b = stack[vm.sp];\n","if (typeof a === 'number' && typeof b === 'number') {\n","   stack[--vm.sp] = vm.primHandler.signed32BitIntegerFor(a + b);\n","} else { vm.pc = ",this.pc,"; vm.sendSpecial(0); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return}\n");case 177:return this.needsVar.stack=!0,void this.source.push("var a = stack[vm.sp - 1], b = stack[vm.sp];\n","if (typeof a === 'number' && typeof b === 'number') {\n","   stack[--vm.sp] = vm.primHandler.signed32BitIntegerFor(a - b);\n","} else { vm.pc = ",this.pc,"; vm.sendSpecial(1); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return}\n");case 178:return this.needsVar.stack=!0,void this.source.push("var a = stack[vm.sp - 1], b = stack[vm.sp];\n","if (typeof a === 'number' && typeof b === 'number') {\n","   stack[--vm.sp] = a < b ? vm.trueObj : vm.falseObj;\n","} else { vm.pc = ",this.pc,"; vm.sendSpecial(2); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return}\n");case 179:return this.needsVar.stack=!0,void this.source.push("var a = stack[vm.sp - 1], b = stack[vm.sp];\n","if (typeof a === 'number' && typeof b === 'number') {\n","   stack[--vm.sp] = a > b ? vm.trueObj : vm.falseObj;\n","} else { vm.pc = ",this.pc,"; vm.sendSpecial(3); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return}\n");case 180:return this.needsVar.stack=!0,void this.source.push("var a = stack[vm.sp - 1], b = stack[vm.sp];\n","if (typeof a === 'number' && typeof b === 'number') {\n","   stack[--vm.sp] = a <= b ? vm.trueObj : vm.falseObj;\n","} else { vm.pc = ",this.pc,"; vm.sendSpecial(4); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return}\n");case 181:return this.needsVar.stack=!0,void this.source.push("var a = stack[vm.sp - 1], b = stack[vm.sp];\n","if (typeof a === 'number' && typeof b === 'number') {\n","   stack[--vm.sp] = a >= b ? vm.trueObj : vm.falseObj;\n","} else { vm.pc = ",this.pc,"; vm.sendSpecial(5); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return}\n");case 182:return this.needsVar.stack=!0,void this.source.push("var a = stack[vm.sp - 1], b = stack[vm.sp];\n","if (typeof a === 'number' && typeof b === 'number') {\n","   stack[--vm.sp] = a === b ? vm.trueObj : vm.falseObj;\n","} else if (a === b && a.float === a.float) {\n","   stack[--vm.sp] = vm.trueObj;\n","} else { vm.pc = ",this.pc,"; vm.sendSpecial(6); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return}\n");case 183:return this.needsVar.stack=!0,void this.source.push("var a = stack[vm.sp - 1], b = stack[vm.sp];\n","if (typeof a === 'number' && typeof b === 'number') {\n","   stack[--vm.sp] = a !== b ? vm.trueObj : vm.falseObj;\n","} else if (a === b && a.float === a.float) {\n","   stack[--vm.sp] = vm.falseObj;\n","} else { vm.pc = ",this.pc,"; vm.sendSpecial(7); if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return}\n");case 184:return void this.source.push("vm.success = true; vm.resultIsFloat = false; if(!vm.pop2AndPushNumResult(vm.stackIntOrFloat(1) * vm.stackIntOrFloat(0))) { vm.pc = ",this.pc,"; vm.sendSpecial(8); return}\n");case 185:return void this.source.push("vm.success = true; if(!vm.pop2AndPushIntResult(vm.quickDivide(vm.stackInteger(1),vm.stackInteger(0)))) { vm.pc = ",this.pc,"; vm.sendSpecial(9); return}\n");case 186:return void this.source.push("vm.success = true; if(!vm.pop2AndPushIntResult(vm.mod(vm.stackInteger(1),vm.stackInteger(0)))) { vm.pc = ",this.pc,"; vm.sendSpecial(10); return}\n");case 187:return void this.source.push("vm.success = true; if(!vm.primHandler.primitiveMakePoint(1, true)) { vm.pc = ",this.pc,"; vm.sendSpecial(11); return}\n");case 188:return void this.source.push("vm.success = true; if(!vm.pop2AndPushIntResult(vm.safeShift(vm.stackInteger(1),vm.stackInteger(0)))) { vm.pc = ",this.pc,"; vm.sendSpecial(12); return}\n");case 189:return void this.source.push("vm.success = true; if(!vm.pop2AndPushIntResult(vm.div(vm.stackInteger(1),vm.stackInteger(0)))) { vm.pc = ",this.pc,"; vm.sendSpecial(13); return}\n");case 190:return void this.source.push("vm.success = true; if(!vm.pop2AndPushIntResult(vm.stackInteger(1) & vm.stackInteger(0))) { vm.pc = ",this.pc,"; vm.sendSpecial(14); return}\n");case 191:return void this.source.push("vm.success = true; if(!vm.pop2AndPushIntResult(vm.stackInteger(1) | vm.stackInteger(0))) { vm.pc = ",this.pc,"; vm.sendSpecial(15); return}\n")}},generateSend:function(e,t,i,r,a){this.debug&&this.generateDebugCode("send "+("lit["===e?this.method.pointers[t].bytesAsString():"...")),this.generateLabel(),this.needsVar[e]=!0,this.needsVar.context=!0,this.source.push("vm.pc = ",this.pc,"; vm.send(",e,t,i,", ",r,", ",a,"); ","if (context !== vm.activeContext || vm.breakOutOfInterpreter !== false) return;\n"),this.needsBreak=!1,this.needsLabel[this.pc]=!0},generateClosureTemps:function(e,t){if(this.debug&&this.generateDebugCode("closure temps"),this.generateLabel(),this.needsVar.stack=!0,this.source.push("var array = vm.instantiateClass(vm.specialObjects[7], ",e,");\n"),t){for(var i=0;i<e;i++)this.source.push("array.pointers[",i,"] = stack[vm.sp - ",e-i-1,"];\n");this.source.push("stack[vm.sp -= ",e-1,"] = array;\n")}else this.source.push("stack[++vm.sp] = array;\n")},generateClosureCopy:function(e,t,i){var r=this.pc,a=r+i;if(this.debug&&this.generateDebugCode("push closure("+r+"-"+(a-1)+"): "+t+" copied, "+e+" args"),this.generateLabel(),this.needsVar.stack=!0,this.source.push("var closure = vm.instantiateClass(vm.specialObjects[36], ",t,");\n","closure.pointers[0] = context; vm.reclaimableContextCount = 0;\n","closure.pointers[1] = ",r+4*this.method.pointers.length+1,";\n","closure.pointers[2] = ",e,";\n"),0<t){for(var s=0;s<t;s++)this.source.push("closure.pointers[",s+3,"] = stack[vm.sp - ",t-s-1,"];\n");this.source.push("stack[vm.sp -= ",t-1,"] = closure;\n")}else this.source.push("stack[++vm.sp] = closure;\n");this.source.push("vm.pc = ",a,";\n"),this.singleStep&&this.source.push("if (vm.breakOutOfInterpreter) return;\n"),this.source.push("continue;\n"),this.needsBreak=!1,this.needsLabel[r]=!0,this.needsLabel[a]=!0,a>this.endPC&&(this.endPC=a)},generateCallPrimitive:function(e){this.debug&&this.generateDebugCode("call primitive "+e),this.generateLabel(),129===this.method.bytes[this.pc]&&(this.needsVar.stack=!0,this.source.push("if (vm.primFailCode) {stack[vm.sp] = vm.getErrorObjectFromPrimFailCode(); vm.primFailCode = 0;}\n"))},generateDirty:function(e,t){switch(e){case"inst[":this.source.push("rcvr.dirty = true;\n");break;case"lit[":this.source.push(e,t,"].dirty = true;\n");break;case"temp[":break;default:throw Error("unexpected target "+e)}},generateLabel:function(){this.prevPC&&(this.sourceLabels[this.prevPC]=this.source.length,this.source.push("case ",this.prevPC,":\n")),this.prevPC=this.pc},generateDebugCode:function(e,t,i,r,a,s){this.needsBreak&&(this.source.push("if (vm.breakOutOfInterpreter) {vm.pc = ",this.prevPC,"; return}\n"),this.needsLabel[this.prevPC]=!0);for(var n=[],o=this.prevPC;o<this.pc;o++)n.push((this.method.bytes[o]+256).toString(16).slice(-2).toUpperCase());if(this.source.push("// ",this.prevPC," <",n.join(" "),"> ",e),t)switch(this.source.push(" "),t){case"vm.nilObj":this.source.push("nil");break;case"vm.trueObj":this.source.push("true");break;case"vm.falseObj":this.source.push("false");break;case"rcvr":this.source.push("self");break;case"stack[vm.sp]":this.source.push("top of stack");break;case"inst[":this.instVarNames?this.source.push(this.instVarNames[i]):this.source.push("inst var ",i);break;case"temp[":this.source.push("tmp",i-6),"]"!==r&&this.source.push("[",a,"]");break;case"lit[":var u=this.method.pointers[i];"]"===r?this.source.push(u):this.source.push(u.pointers[0].bytesAsString());break;default:this.source.push(t)}this.source.push("\n"),this.needsBreak=this.singleStep},generateInstruction:function(e,t){this.debug&&this.generateDebugCode(e),this.generateLabel(),this.source.push(t,";\n")},deleteUnneededLabels:function(){var e=!1;for(var t in this.sourceLabels)if(this.needsLabel[t])e=!0;else for(var i=0;i<3;i++)this.source[this.sourceLabels[t]+i]="";e||(this.source[this.sourcePos["loop-start"]]="",this.source[this.sourcePos["loop-end"]]="")},deleteUnneededVariables:function(){this.needsVar.stack&&(this.needsVar.context=!0),this.needsVar["inst["]&&(this.needsVar.rcvr=!0);for(var e=0;e<this.allVars.length;e++){var t=this.allVars[e];this.needsVar[t]||(this.source[this.sourcePos[t]]="")}}}),Object.extend(Squeak,"audio",{startAudioOut:function(){if(!this.audioOutContext){var e=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext;this.audioOutContext=e&&new e}return this.audioOutContext},startAudioIn:function(i,e){return this.audioInContext?(this.audioInSource.disconnect(),i(this.audioInContext,this.audioInSource)):(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia?void navigator.getUserMedia({audio:!0,toString:function(){return"audio"}},function(e){var t=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext;this.audioInContext=t&&new t,this.audioInSource=this.audioInContext.createMediaStreamSource(e),i(this.audioInContext,this.audioInSource)},function(){e("cannot access microphone")}):e("test: audio input not supported"))},stopAudio:function(){this.audioInSource&&this.audioInSource.disconnect()}}),Object.extend(Squeak,"known classes",{BitBlt_dest:0,BitBlt_source:1,BitBlt_halftone:2,BitBlt_combinationRule:3,BitBlt_destX:4,BitBlt_destY:5,BitBlt_width:6,BitBlt_height:7,BitBlt_sourceX:8,BitBlt_sourceY:9,BitBlt_clipX:10,BitBlt_clipY:11,BitBlt_clipW:12,BitBlt_clipH:13,BitBlt_colorMap:14,BitBlt_warpBase:15,Form_bits:0,Form_width:1,Form_height:2,Form_depth:3,Form_offset:4}),Object.extend(Squeak.Primitives.prototype,"display",{displayDirty:function(){}}),Object.extend(Squeak.Primitives.prototype,"display",{initDisplay:function(e){this.display=e,this.display.vm=this.vm,this.indexedColors=[4294967295,4278190081,4294967295,4286611584,4294901760,4278255360,4278190335,4278255615,4294967040,4294902015,4280295456,4282400832,4284506208,4288651167,4290756543,4292861919,4278716424,4279242768,4279769112,4280821800,4281348144,4281874488,4282927176,4283453520,4283979864,4285032552,4285558896,4286085240,4287072135,4287598479,4288124823,4289177511,4289703855,4290230199,4291282887,4291809231,4292335575,4293388263,4293914607,4294440951,4278190081,4278203136,4278216192,4278229248,4278242304,4278255360,4278190131,4278203187,4278216243,4278229299,4278242355,4278255411,4278190182,4278203238,4278216294,4278229350,4278242406,4278255462,4278190233,4278203289,4278216345,4278229401,4278242457,4278255513,4278190284,4278203340,4278216396,4278229452,4278242508,4278255564,4278190335,4278203391,4278216447,4278229503,4278242559,4278255615,4281532416,4281545472,4281558528,4281571584,4281584640,4281597696,4281532467,4281545523,4281558579,4281571635,4281584691,4281597747,4281532518,4281545574,4281558630,4281571686,4281584742,4281597798,4281532569,4281545625,4281558681,4281571737,4281584793,4281597849,4281532620,4281545676,4281558732,4281571788,4281584844,4281597900,4281532671,4281545727,4281558783,4281571839,4281584895,4281597951,4284874752,4284887808,4284900864,4284913920,4284926976,4284940032,4284874803,4284887859,4284900915,4284913971,4284927027,4284940083,4284874854,4284887910,4284900966,4284914022,4284927078,4284940134,4284874905,4284887961,4284901017,4284914073,4284927129,4284940185,4284874956,4284888012,4284901068,4284914124,4284927180,4284940236,4284875007,4284888063,4284901119,4284914175,4284927231,4284940287,4288217088,4288230144,4288243200,4288256256,4288269312,4288282368,4288217139,4288230195,4288243251,4288256307,4288269363,4288282419,4288217190,4288230246,4288243302,4288256358,4288269414,4288282470,4288217241,4288230297,4288243353,4288256409,4288269465,4288282521,4288217292,4288230348,4288243404,4288256460,4288269516,4288282572,4288217343,4288230399,4288243455,4288256511,4288269567,4288282623,4291559424,4291572480,4291585536,4291598592,4291611648,4291624704,4291559475,4291572531,4291585587,4291598643,4291611699,4291624755,4291559526,4291572582,4291585638,4291598694,4291611750,4291624806,4291559577,4291572633,4291585689,4291598745,4291611801,4291624857,4291559628,4291572684,4291585740,4291598796,4291611852,4291624908,4291559679,4291572735,4291585791,4291598847,4291611903,4291624959,4294901760,4294914816,4294927872,4294940928,4294953984,4294967040,4294901811,4294914867,4294927923,4294940979,4294954035,4294967091,4294901862,4294914918,4294927974,4294941030,4294954086,4294967142,4294901913,4294914969,4294928025,4294941081,4294954137,4294967193,4294901964,4294915020,4294928076,4294941132,4294954188,4294967244,4294902015,4294915071,4294928127,4294941183,4294954239,4294967295]},primitiveBeCursor:function(e){if(this.display.cursorCanvas){var t=this.loadForm(this.stackNonInteger(e),!0),i=1===e?this.loadForm(this.stackNonInteger(0)):null;if(!this.success||!t)return!1;var r=this.display.cursorCanvas,a=r.getContext("2d"),s={left:0,top:0,right:t.width,bottom:t.height};r.width=t.width,r.height=t.height,1===t.depth?i?(t=this.cursorMergeMask(t,i),this.showForm(a,t,s,[0,4278190335,4294967295,4278190080])):this.showForm(a,t,s,[0,4278190080]):this.showForm(a,t,s,!0);var n=this.display.context.canvas,o=n.offsetWidth/n.width;r.style.width=(r.width*o|0)+"px",r.style.height=(r.height*o|0)+"px",this.display.cursorOffsetX=t.offsetX*o|0,this.display.cursorOffsetY=t.offsetY*o|0}return this.vm.popN(e),!0},cursorMergeMask:function(e,t){for(var i=new Uint32Array(16),r=0;r<16;r++){for(var a=e.bits[r],s=t.bits[r],n=2147483648,o=0,u=0;u<16;u++)o=o|(s&n)>>u|(a&n)>>u+1,n>>>=1;i[r]=o}return{obj:e.obj,bits:i,depth:2,width:16,height:16,offsetX:e.offsetX,offsetY:e.offsetY,msb:!0,pixPerWord:16,pitch:1}},primitiveBeDisplay:function(e){var t=this.vm.stackValue(0);return this.vm.specialObjects[Squeak.splOb_TheDisplay]=t,this.vm.popN(e),!0},primitiveReverseDisplay:function(e){if(this.reverseDisplay=!this.reverseDisplay,this.redrawDisplay(),this.display.cursorCanvas){for(var t=this.display.cursorCanvas,i=t.getContext("2d"),r=i.getImageData(0,0,t.width,t.height),a=new Uint32Array(r.data.buffer),s=0;s<a.length;s++)a[s]=16777215^a[s];i.putImageData(r,0,0)}return!0},primitiveShowDisplayRect:function(e){var t={left:this.stackInteger(3),top:this.stackInteger(1),right:this.stackInteger(2),bottom:this.stackInteger(0)};return!!this.success&&(this.redrawDisplay(t),this.vm.popN(e),!0)},redrawDisplay:function(e){var t=this.theDisplay(),i={left:0,top:0,right:t.width,bottom:t.height};e&&(e.left>i.left&&(i.left=e.left),e.right<i.right&&(i.right=e.right),e.top>i.top&&(i.top=e.top),e.bottom<i.bottom&&(i.bottom=e.bottom)),i.left<i.right&&i.top<i.bottom&&this.displayUpdate(t,i)},showForm:function(e,t,i,r){if(i){var a=i.left,s=i.top,n=i.right-a,o=i.bottom-s,u=e.createImageData(n,o),l=u.data;l.buffer||(l=new Uint8Array(n*o*4));var c=new Uint32Array(l.buffer);switch(t.depth){case 1:case 2:case 4:case 8:var f=r||this.swappedColors;if(!f){f=[];for(var h=0;h<256;h++){var p=(4278255360&(O=this.indexedColors[h]))+((16711680&O)>>16)+((255&O)<<16);f[h]=p}this.swappedColors=f}this.reverseDisplay&&(f=r?r.map(function(e){return 16777215^e}):(this.reversedColors||(this.reversedColors=f.map(function(e){return 16777215^e})),this.reversedColors));for(var d=(1<<t.depth)-1,b=32-(a%t.pixPerWord+1)*t.depth,m=0;m<o;m++){for(var v=t.pitch*s+(a/t.pixPerWord|0),g=b,k=t.bits[v],S=u.width*m,y=0;y<n;y++)c[S++]=f[k>>>g&d],(g-=t.depth)<0&&(g=32-t.depth,k=t.bits[++v]);s++}break;case 16:for(b=a%2?0:16,m=0;m<o;m++){for(v=t.pitch*s+(a/2|0),g=b,k=t.bits[v],S=u.width*m,y=0;y<n;y++){var j=k>>>g;c[S++]=((31744&j)>>7)+((992&j)<<6)+((31&j)<<19)+4278190080,(g-=16)<0&&(g=16,k=t.bits[++v])}s++}break;case 32:var I=r?0:4278190080;for(m=0;m<o;m++){for(v=t.pitch*s+a,S=u.width*m,y=0;y<n;y++){var O;p=4278255360&(O=t.bits[v++])|(16711680&O)>>16|(255&O)<<16|I;c[S++]=p}s++}break;default:throw Error("depth not implemented")}u.data!==l&&u.data.set(l),e.putImageData(u,i.left,i.top)}},primitiveDeferDisplayUpdates:function(e){var t=this.stackBoolean(0);return!!this.success&&(this.deferDisplayUpdates=t,this.vm.popN(e),!0)},primitiveForceDisplayUpdate:function(e){return this.vm.breakOut(),this.vm.popN(e),!0},primitiveScanCharacters:function(e){if(6!==e)return!1;var t=this.stackInteger(0),i=this.stackNonInteger(1),r=this.stackInteger(2),a=this.stackNonInteger(3),s=this.stackInteger(4),n=this.stackInteger(5);if(!this.success)return!1;if(i.pointersSize()<258||!a.isBytes())return!1;if(!(0<n&&0<s&&s<=a.bytesSize()))return!1;var o=this.stackNonInteger(6);if(!this.success||o.pointersSize()<4)return!1;var u=this.checkSmallInt(o.pointers[0]),l=this.checkSmallInt(o.pointers[1]),c=this.checkNonInteger(o.pointers[2]),f=this.checkNonInteger(o.pointers[3]);if(!this.success||256!==f.pointersSize())return!1;var h=c.pointersSize()-2;for(l=n;l<=s;){var p=a.bytes[l-1],d=i.pointers[p];if(!d.isNil)return this.ensureSmallInt(u),!!this.success&&(o.pointers[0]=u,o.pointers[1]=l,this.popNandPushIfOK(7,d));var b=this.checkSmallInt(f.pointers[p]);if(!this.success||b<0||h<b)return!1;var m=this.checkSmallInt(c.pointers[b]),v=this.checkSmallInt(c.pointers[b+1]);if(!this.success)return!1;var g=u+v-m;if(r<g)return this.ensureSmallInt(u),!!this.success&&(o.pointers[0]=u,o.pointers[1]=l,d=i.pointers[257],this.popNandPushIfOK(7,d));u=g+t,l+=1}return this.ensureSmallInt(u),!!this.success&&(o.pointers[0]=u,o.pointers[1]=s,d=i.pointers[256],this.popNandPushIfOK(7,d))},primitiveScreenSize:function(e){var t=this.display,i=t.width||t.context.canvas.width,r=t.height||t.context.canvas.height;return this.popNandPushIfOK(e+1,this.makePointWithXandY(i,r))},primitiveSetFullScreen:function(e){var t=this.stackBoolean(0);if(!this.success)return!1;if(this.display.fullscreen!=t)if(this.display.fullscreenRequest){var i=this.vm.freeze();this.display.fullscreenRequest(t,function(){i()})}else this.display.fullscreen=t,this.vm.breakOut();return this.vm.popN(e),!0},primitiveTestDisplayDepth:function(e){return this.pop2andPushBoolIfOK(0<=[1,2,4,8,16,32].indexOf(this.stackInteger(0)))},loadForm:function(e,t){if(e.isNil)return null;var i={obj:e,bits:e.pointers[Squeak.Form_bits].wordsOrBytes(),depth:e.pointers[Squeak.Form_depth],width:e.pointers[Squeak.Form_width],height:e.pointers[Squeak.Form_height]};if(t){var r=e.pointers[Squeak.Form_offset];i.offsetX=r.pointers?r.pointers[Squeak.Point_x]:0,i.offsetY=r.pointers?r.pointers[Squeak.Point_y]:0}return 0===i.width||0===i.height?i:0<i.width&&0<i.height?(i.msb=0<i.depth,i.msb||(i.depth=-i.depth),0<i.depth?(i.pixPerWord=32/i.depth,i.pitch=(i.width+(i.pixPerWord-1))/i.pixPerWord|0,i.bits.length!==i.pitch*i.height?null:i):null):null},theDisplay:function(){return this.loadForm(this.vm.specialObjects[Squeak.splOb_TheDisplay])},displayDirty:function(e,t){this.deferDisplayUpdates||e!=this.vm.specialObjects[Squeak.splOb_TheDisplay]||this.displayUpdate(this.theDisplay(),t)},displayUpdate:function(e,t){this.showForm(this.display.context,e,t),this.display.lastTick=this.vm.lastTick,this.display.idle=0},primitiveBeep:function(e){var t=Squeak.startAudioOut();if(t){var i=t.createOscillator();i.connect(t.destination),i.type="square",i.frequency.value=880,i.start(),i.stop(t.currentTime+.05)}else this.vm.warnOnce("could not initialize audio");return this.popNIfOK(e)}}),Object.extend(Squeak,"files",{fsck:function(i,r,a,s){if(r=r||"",s=s||{dirs:0,files:0,bytes:0,deleted:0},!a&&(a={},Object.keys(Squeak.Settings).forEach(function(e){var t=e.match(/squeak-file(\.lz)?:(.*)$/);t&&(a[t[2]]=!0)}),"undefined"!=typeof indexedDB))return this.dbTransaction("readonly","fsck cursor",function(e){var t=e.openCursor();t.onsuccess=function(e){var t=e.target.result;t?(a[t.key]=!0,t.continue()):Squeak.fsck(i,r,a,s)},t.onerror=function(e){console.error("fsck failed")}});var e=Squeak.dirList(r);for(var t in e){var n=r+"/"+t;if(e[t][3])"squeak:"+n in Squeak.Settings?(Squeak.fsck(null,n,a,s),s.dirs++):(console.log("Deleting stale directory "+n),Squeak.dirDelete(n),s.deleted++);else a[n]?(a[n]=!1,s.files++,s.bytes+=e[t][4]):(console.log("Deleting stale file entry "+n),Squeak.fileDelete(n,!0),s.deleted++)}if(""===r){console.log("squeak fsck: "+s.dirs+" directories, "+s.files+" files, "+(s.bytes/1e6).toFixed(1)+" MBytes");var o=[];for(var n in a)a[n]&&o.push(n);if(0<o.length){for(var u=0;u<o.length;u++)console.log("Deleting orphaned file "+o[u]),delete Squeak.Settings["squeak-file:"+o[u]],delete Squeak.Settings["squeak-file.lz:"+o[u]],s.deleted++;"undefined"!=typeof indexedDB&&this.dbTransaction("readwrite","fsck delete",function(e){for(var t=0;t<o.length;t++)e.delete(o[t])})}i&&i(s)}},dbTransaction:function(i,r,a,s){function t(){a(Squeak.dbFake()),s&&s()}if("undefined"==typeof indexedDB)return t();function n(){var e=SqueakDB.transaction("files",i),t=e.objectStore("files");e.oncomplete=function(e){s&&s()},e.onerror=function(e){console.error(e.target.error.name+": "+r)},e.onabort=function(e){console.error(e.target.error.name+": aborting "+r),a(Squeak.dbFake()),s&&s()},a(t)}if(window.SqueakDB)return n();var e;try{e=indexedDB.open("squeak")}catch(e){}if(!e)return t();e.onsuccess=function(e){console.log("Opened files database."),window.SqueakDB=this.result,SqueakDB.onversionchange=function(e){delete window.SqueakDB,this.close()},SqueakDB.onerror=function(e){console.error("Error accessing database: "+e.target.error.name)},n()},e.onupgradeneeded=function(e){console.log("Creating files database"),e.target.result.createObjectStore("files")},e.onerror=function(e){console.error(e.target.error.name+": cannot open files database"),console.warn("Falling back to local storage"),t()},e.onblocked=function(e){console.log("Database upgrade needed, but was blocked."),console.warn("Falling back to local storage"),t()}},dbFake:function(){return"undefined"==typeof SqueakDBFake&&("undefined"==typeof indexedDB&&console.warn("IndexedDB not supported by this browser, using localStorage"),window.SqueakDBFake={bigFiles:{},bigFileThreshold:1e5,get:function(e){var t=SqueakDBFake.bigFiles[e];if(!t){var i=Squeak.Settings["squeak-file:"+e];if(!i){var r=Squeak.Settings["squeak-file.lz:"+e];r&&("object"==typeof LZString?i=LZString.decompressFromUTF16(r):console.error("LZString not loaded: cannot decompress "+e))}if(i){for(var a=new Uint8Array(i.length),s=0;s<a.length;s++)a[s]=255&i.charCodeAt(s);t=a.buffer}}var n={result:t};return setTimeout(function(){n.onsuccess&&n.onsuccess({target:n})},0),n},put:function(e,t){if(e.byteLength>SqueakDBFake.bigFileThreshold)SqueakDBFake.bigFiles[t]||console.log("File "+t+" ("+e.byteLength+" bytes) too large, storing in memory only"),SqueakDBFake.bigFiles[t]=e;else{var i=Squeak.bytesAsString(new Uint8Array(e));if("object"==typeof LZString){var r=LZString.compressToUTF16(i);Squeak.Settings["squeak-file.lz:"+t]=r,delete Squeak.Settings["squeak-file:"+t]}else Squeak.Settings["squeak-file:"+t]=i}var a={};return setTimeout(function(){a.onsuccess&&a.onsuccess()},0),a},delete:function(e){delete Squeak.Settings["squeak-file:"+e],delete Squeak.Settings["squeak-file.lz:"+e],delete SqueakDBFake.bigFiles[e];var t={};return setTimeout(function(){t.onsuccess&&t.onsuccess()},0),t},openCursor:function(){var e={};return setTimeout(function(){e.onsuccess&&e.onsuccess({target:e})},0),e}}),SqueakDBFake},fileGet:function(e,i,r){r=r||function(e){console.log(e)};var a=this.splitFilePath(e);return a.basename?window.SqueakDBFake&&SqueakDBFake.bigFiles[a.fullname]?i(SqueakDBFake.bigFiles[a.fullname]):void this.dbTransaction("readonly","get "+e,function(e){var t=e.get(a.fullname);t.onerror=function(e){r(e.target.error.name)},t.onsuccess=function(e){if(void 0!==this.result)return i(this.result);Squeak.fetchTemplateFile(a.fullname,function(e){i(e)},function(){if("undefined"==typeof indexedDB)return r("file not found: "+a.fullname);var e=Squeak.dbFake().get(a.fullname);e.onerror=function(e){r("file not found: "+a.fullname)},e.onsuccess=function(e){i(this.result)}})}}):r("Invalid path: "+e)},filePut:function(e,t,i){var r=this.splitFilePath(e);if(!r.basename)return null;var a=this.dirList(r.dirname);if(!a)return null;var s=a[r.basename],n=this.totalSeconds();if(s){if(s[3])return null}else s=[r.basename,n,0,!1,0],a[r.basename]=s;return s[2]=n,s[4]=t.byteLength||t.length||0,Squeak.Settings["squeak:"+r.dirname]=JSON.stringify(a),this.dbTransaction("readwrite","put "+e,function(e){e.put(t,r.fullname)},function(){i&&i()}),s},fileDelete:function(e,t){var i=this.splitFilePath(e);if(!i.basename)return!1;var r=this.dirList(i.dirname);if(!r)return!1;var a=r[i.basename];return!(!a||a[3])&&(delete r[i.basename],Squeak.Settings["squeak:"+i.dirname]=JSON.stringify(r),t||this.dbTransaction("readwrite","delete "+e,function(e){e.delete(i.fullname)}),!0)},fileRename:function(e,t){var i=this.splitFilePath(e);if(!i.basename)return!1;var r=this.splitFilePath(t);if(!r.basename)return!1;var a=this.dirList(i.dirname);if(!a)return!1;var s=a[i.basename];if(!s||s[3])return!1;var n=i.dirname==r.dirname,o=n?a:this.dirList(r.dirname);return!!o&&(!o[r.basename]&&(delete a[i.basename],s[0]=r.basename,o[r.basename]=s,Squeak.Settings["squeak:"+r.dirname]=JSON.stringify(o),n||(Squeak.Settings["squeak:"+i.dirname]=JSON.stringify(a)),this.fileGet(i.fullname,function(t){this.dbTransaction("readwrite","rename "+i.fullname+" to "+r.fullname,function(e){e.delete(i.fullname),e.put(t,r.fullname)})}.bind(this),function(e){console.log("File rename failed: "+e)}.bind(this)),!0))},fileExists:function(e){var t=this.splitFilePath(e);if(!t.basename)return!1;var i=this.dirList(t.dirname);if(!i)return!1;var r=i[t.basename];return!(!r||r[3])},dirCreate:function(e,t){var i=this.splitFilePath(e);if(!i.basename)return!1;t&&!Squeak.Settings["squeak:"+i.dirname]&&Squeak.dirCreate(i.dirname,!0);var r=this.dirList(i.dirname);if(!r)return!1;if(r[i.basename])return!1;var a=this.totalSeconds(),s=[i.basename,a,a,!0,0];return r[i.basename]=s,Squeak.Settings["squeak:"+i.fullname]=JSON.stringify({}),Squeak.Settings["squeak:"+i.dirname]=JSON.stringify(r),!0},dirDelete:function(e){var t=this.splitFilePath(e);if(!t.basename)return!1;var i=this.dirList(t.dirname);if(!i)return!1;if(!i[t.basename])return!1;var r=this.dirList(t.fullname);if(!r)return!1;for(var a in r)return!1;return delete i[t.basename],Squeak.Settings["squeak:"+t.dirname]=JSON.stringify(i),delete Squeak.Settings["squeak:"+t.fullname],!0},dirList:function(e,t){var i=this.splitFilePath(e),r=Squeak.Settings["squeak:"+i.fullname],a=t&&Squeak.Settings["squeak-template:"+i.fullname];function s(e,t){for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];e[r[0]]=r}}if(r||a){var n={};return a&&s(n,JSON.parse(a).entries),r&&s(n,JSON.parse(r)),n}return"/"==i.fullname?{}:null},splitFilePath:function(e){"/"!==e[0]&&(e="/"+e);var t=(e=e.replace(/\/\//g,"/")).match(/(.*)\/(.*)/);return{fullname:e,dirname:t[1]?t[1]:"/",basename:t[2]?t[2]:null}},splitUrl:function(e,t){var i=e.match(/(.*\/)?(.*)/),r=i[1]||"",a=i[2]||"";return r.match(/^[a-z]+:\/\//)||(t&&!t.match(/\/$/)&&(t+="/"),e=(r=(t||"")+r)+a),{full:e,uptoslash:r,filename:a}},flushFile:function(e){if(e.modified){var t=e.contents.buffer;t.byteLength!==e.size&&(t=new ArrayBuffer(e.size),new Uint8Array(t).set(e.contents.subarray(0,e.size))),Squeak.filePut(e.name,t),e.modified=!1}},flushAllFiles:function(){if("undefined"!=typeof SqueakFiles)for(var e in SqueakFiles)this.flushFile(SqueakFiles[e])},closeAllFiles:function(){Squeak.flushAllFiles(),delete window.SqueakFiles},fetchTemplateDir:function(s,n){function o(e,t){var i=JSON.parse(Squeak.Settings["squeak-template:"+e]);for(var r in i.entries){var a=i.entries[r];a[3]&&Squeak.fetchTemplateDir(e+"/"+a[0],t+"/"+a[0])}}if(s=Squeak.splitFilePath(s).fullname,Squeak.Settings["squeak-template:"+s])o(s,n);else{var t=n+"/sqindex.json",u=new XMLHttpRequest;u.open("GET",t,!0),u.onload=function(e){if(200==u.status){console.log("adding template "+s),function e(t){var i=Squeak.splitFilePath(t);if("/"!==i.dirname&&e(i.dirname),!(t=JSON.parse(Squeak.Settings["squeak-template:"+i.dirname]||'{"entries": {}}')).entries[i.basename]){var r=Squeak.totalSeconds();t.entries[i.basename]=[i.basename,r,r,!0,0],Squeak.Settings["squeak-template:"+i.dirname]=JSON.stringify(t)}}(s);var t=JSON.parse(u.response),i={url:n,entries:{}};for(var r in t){var a=t[r];i.entries[a[0]]=a}Squeak.Settings["squeak-template:"+s]=JSON.stringify(i),o(s,n)}else u.onerror(u.statusText)},u.onerror=function(e){console.log("cannot load template index "+t)},u.send()}},fetchTemplateFile:function(t,i,r){t=Squeak.splitFilePath(t);var e=Squeak.Settings["squeak-template:"+t.dirname];if(!e)return r();var a=JSON.parse(e).url;if(!a)return r();a+="/"+t.basename;var s=new XMLHttpRequest;s.open("get",a,!0),s.responseType="arraybuffer",s.timeout=3e4,s.onreadystatechange=function(){if(this.readyState==this.DONE)if(200==this.status){var e=this.response;console.log("Got "+e.byteLength+" bytes from "+a),Squeak.dirCreate(t.dirname,!0),Squeak.filePut(t.fullname,e),i(e)}else console.error("Download failed ("+this.status+") "+a),r()},console.log("Fetching "+a),s.send()}}),Object.extend(Squeak,"events",{Mouse_Blue:1,Mouse_Yellow:2,Mouse_Red:4,Keyboard_Shift:8,Keyboard_Ctrl:16,Keyboard_Alt:32,Keyboard_Cmd:64,Mouse_All:7,Keyboard_All:120,EventTypeNone:0,EventTypeMouse:1,EventTypeKeyboard:2,EventTypeDragDropFiles:3,EventKeyChar:0,EventKeyDown:1,EventKeyUp:2,EventDragEnter:1,EventDragMove:2,EventDragLeave:3,EventDragDrop:4}),Object.extend(Squeak.Primitives.prototype,"input",{primitiveClipboardText:function(e){if(0===e){if("string"!=typeof this.display.clipboardString)return!1;this.vm.popNandPush(1,this.makeStString(this.display.clipboardString))}else if(1===e){var t=this.vm.top();t.bytes&&(this.display.clipboardString=t.bytesAsString(),this.display.clipboardStringChanged=!0),this.vm.pop()}return!0},primitiveKeyboardNext:function(e){return this.popNandPushIfOK(e+1,this.ensureSmallInt(this.display.keys.shift()))},primitiveKeyboardPeek:function(e){var t=this.display.keys.length;return this.popNandPushIfOK(e+1,t?this.ensureSmallInt(this.display.keys[0]||0):this.vm.nilObj)},primitiveMouseButtons:function(e){return this.popNandPushIfOK(e+1,this.ensureSmallInt(this.display.buttons)),this.vm.breakOut(),20<this.display.idle++&&this.vm.goIdle(),!0},primitiveMousePoint:function(e){var t=this.ensureSmallInt(this.display.mouseX),i=this.ensureSmallInt(this.display.mouseY);return this.popNandPushIfOK(e+1,this.makePointWithXandY(t,i))},primitiveInputSemaphore:function(e){var t=this.stackInteger(0);return!!this.success&&(this.inputEventSemaIndex=t,this.display.signalInputEvent=function(){this.signalSemaphoreWithIndex(this.inputEventSemaIndex)}.bind(this),this.display.signalInputEvent(),!0)},primitiveInputWord:function(e){return this.popNandPushIfOK(1,0)},primitiveGetNextEvent:function(e){this.display.idle++;var t=this.stackNonInteger(0);return!!this.display.getNextEvent&&(this.display.getNextEvent(t.pointers,this.vm.startupTime),!0)}}),Object.extend(Squeak.Primitives.prototype,"initialization",{initPlugins:function(){Object.extend(this.builtinModules,{JavaScriptPlugin:this.findPluginFunctions("js_"),FilePlugin:this.findPluginFunctions("","primitive(Disable)?(File|Directory)"),DropPlugin:this.findPluginFunctions("","primitiveDropRequest"),SoundPlugin:this.findPluginFunctions("snd_"),JPEGReadWriter2Plugin:this.findPluginFunctions("jpeg2_"),SqueakFFIPrims:this.findPluginFunctions("ffi_","",!0),SecurityPlugin:{primitiveDisableImageWrite:this.fakePrimitive.bind(this,"SecurityPlugin.primitiveDisableImageWrite",0)},LocalePlugin:{primitiveTimezoneOffset:this.fakePrimitive.bind(this,"LocalePlugin.primitiveTimezoneOffset",0)}}),Object.extend(this.patchModules,{ScratchPlugin:this.findPluginFunctions("scratch_")})},findPluginFunctions:function(e,t,i){t=t||"(initialise|shutdown|prim)";var r={},a=new RegExp("^"+e+t,"i");for(var s in this)if(a.test(s)&&"function"==typeof this[s]){var n=s;e&&(n=s[e.length].toLowerCase()+s.slice(e.length+1)),r[n]=i?s:this[s].bind(this)}return r}}),Object.extend(Squeak,"known classes",{ExtLibFunc_handle:0,ExtLibFunc_flags:1,ExtLibFunc_argTypes:2,ExtLibFunc_name:3,ExtLibFunc_module:4,ExtLibFunc_errorCodeName:5}),Object.extend(Squeak.Primitives.prototype,"FFI",{ffi_primitiveCalloutWithArgs:function(e){var t=this.stackNonInteger(1),i=this.stackNonInteger(0);if(!this.isKindOf(t,Squeak.splOb_ClassExternalFunction))return!1;var r=t.pointers[Squeak.ExtLibFunc_module].bytesAsString(),a=t.pointers[Squeak.ExtLibFunc_name].bytesAsString(),s=i.pointers.join(", ");return this.vm.warnOnce("FFI: ignoring "+r+": "+a+"("+s+")"),!1}}),Object.extend(Squeak.Primitives.prototype,"JavaScriptPlugin",{js_primitiveDoUnderstand:function(e){var t=this.stackNonInteger(1),i=this.js_objectOrGlobal(t),r=this.stackNonInteger(0).pointers,a=r[0].bytesAsString(),s=r[1].pointers||[],n=!("jsObject"in t),o=null;try{var u=a.match(/([^:]*)/)[0];if(n||"new"!==u){if(!(u in i))return this.js_setError("Property not found: "+u);var l=i[u];if("function"==typeof l&&(!n||0<s.length))o=l.apply(i,this.js_fromStArray(s));else if(0==s.length)o=l;else{if(1!=s.length)return this.js_setError("Property "+u+" is not a function");i[u]=this.js_fromStObject(s[0])}}else if(0===s.length)o=new i;else{var c=[null].concat(this.js_fromStArray(s));o=new(Function.prototype.bind.apply(i,c))}}catch(e){return this.js_setError(e.message)}var f=this.makeStObject(o,t.sqClass);return this.popNandPushIfOK(e+1,f)},js_primitiveAsString:function(e){var t=this.js_objectOrGlobal(this.stackNonInteger(0));return this.popNandPushIfOK(e+1,this.makeStString(String(t)))},js_primitiveTypeof:function(e){var t=this.js_objectOrGlobal(this.stackNonInteger(0));return this.popNandPushIfOK(e+1,this.makeStString(typeof t))},js_primitiveAt:function(e){var t,i=this.stackNonInteger(1),r=this.vm.stackValue(0);try{var a=this.js_objectOrGlobal(i)[this.js_fromStObject(r)];t=this.makeStObject(a,i.sqClass)}catch(e){return this.js_setError(e.message)}return this.popNandPushIfOK(e+1,t)},js_primitiveAtPut:function(e){var t=this.stackNonInteger(2),i=this.vm.stackValue(1),r=this.vm.stackValue(0);try{var a=this.js_objectOrGlobal(t),s=this.js_fromStObject(i),n=this.js_fromStObject(r);a[s]=n}catch(e){return this.js_setError(e.message)}return this.popNandPushIfOK(e+1,r)},js_primitiveSqueakAsJSObject:function(e){var t=this.stackNonInteger(1),i=this.vm.stackValue(0);return this.success&&(t.jsObject=i),this.popNIfOK(e)},js_primitiveInitCallbacks:function(e){return this.js_callbackSema=this.stackInteger(0),this.js_activeCallback=null,this.popNIfOK(e)},js_primitiveGetActiveCallbackBlock:function(e){var t=this.js_activeCallback;return t?this.popNandPushIfOK(e+1,t.block):this.js_setError("No active callback")},js_primitiveGetActiveCallbackArgs:function(e){var t=this.stackNonInteger(e),i=this.js_activeCallback;if(!i)return this.js_setError("No active callback");try{var r=this.makeStArray(i.args,t);return this.popNandPushIfOK(e+1,r)}catch(e){return this.js_setError(e.message)}},js_primitiveReturnFromCallback:function(e){return 1===e&&(this.js_activeCallback?(this.js_activeCallback.result=this.vm.pop(),this.vm.breakOut(),!0):this.js_setError("No active callback"))},js_primitiveGetError:function(e){var t=this.makeStObject(this.js_error);return this.js_error=null,this.popNandPushIfOK(e+1,t)},js_setError:function(e){return this.js_error=String(e),!1},js_fromStObject:function(e){if("number"==typeof e)return e;if(e.jsObject)return e.jsObject;if(e.isFloat)return e.float;if(e.isNil)return null;if(e.isTrue)return!0;if(e.isFalse)return!1;if(e.bytes||e.sqClass===this.vm.specialObjects[Squeak.splOb_ClassString])return e.bytesAsString();if(e.sqClass===this.vm.specialObjects[Squeak.splOb_ClassArray])return this.js_fromStArray(e.pointers||[],!0);if(e.sqClass===this.vm.specialObjects[Squeak.splOb_ClassBlockContext]||e.sqClass===this.vm.specialObjects[Squeak.splOb_ClassBlockClosure])return this.js_fromStBlock(e);throw Error("asJSArgument needed for "+e)},js_fromStArray:function(e,t){if(0<e.length&&t&&this.isAssociation(e[0]))return this.js_fromStDict(e);for(var i=[],r=0;r<e.length;r++)i.push(this.js_fromStObject(e[r]));return i},js_fromStDict:function(e){for(var t={},i=0;i<e.length;i++){var r=e[i].pointers;if(!r||2!==r.length)throw Error(r+" is not an Association");var a=this.js_fromStObject(r[0]),s=this.js_fromStObject(r[1]);t[a]=s}return t},js_fromStBlock:function(r){if(!this.js_callbackSema)throw Error("CallbackSemaphore not set");this.vm.reclaimableContextCount=0;var t=r.pointers[Squeak.BlockContext_argumentCount];"number"!=typeof t&&(t=r.pointers[Squeak.Closure_numArgs]);var a=this;return function(){for(var i=[],e=0;e<t;e++)i.push(arguments[e]);return new Promise(function(e,t){self.setTimeout(function(){a.js_executeCallbackAsync(r,i,e,t)},0)})}},js_executeCallbackAsync:function(e,t,i,r){var a=this;this.js_activeCallback||this.vm.frozen?self.setTimeout(function(){a.js_executeCallbackAsync(e,t,i,r)},0):this.js_executeCallback(e,t,i,r)},js_executeCallback:function(e,t,i,r){if(this.js_activeCallback)return console.error("Callback: already active");this.js_activeCallback={block:e,args:t,result:null},this.signalSemaphoreWithIndex(this.js_callbackSema),this.vm.forceInterruptCheck();for(var a=Date.now()+500;Date.now()<a&&!this.js_activeCallback.result;)this.vm.interpret();var s=this.js_activeCallback.result;if(this.js_activeCallback=null,s)try{i(this.js_fromStObject(s))}catch(e){i(s.toString())}else r(Error("SqueakJS timeout"))},js_objectOrGlobal:function(e){return"jsObject"in e?e.jsObject:self}}),Object.extend(Squeak.Primitives.prototype,"Obsolete",{primitiveFloatArrayAt:function(e){return this.namedPrimitive("FloatArrayPlugin","primitiveAt",e)},primitiveFloatArrayMulFloatArray:function(e){return this.namedPrimitive("FloatArrayPlugin","primitiveMulFloatArray",e)},primitiveFloatArrayAddScalar:function(e){return this.namedPrimitive("FloatArrayPlugin","primitiveAddScalar",e)},primitiveFloatArrayDivFloatArray:function(e){return this.namedPrimitive("FloatArrayPlugin","primitiveDivFloatArray",e)},primitiveFloatArrayDivScalar:function(e){return this.namedPrimitive("FloatArrayPlugin","primitiveDivScalar",e)},primitiveFloatArrayHash:function(e){return this.namedPrimitive("FloatArrayPlugin","primitiveHash",e)},primitiveFloatArrayAtPut:function(e){return this.namedPrimitive("FloatArrayPlugin","primitiveAtPut",e)},primitiveFloatArrayMulScalar:function(e){return this.namedPrimitive("FloatArrayPlugin","primitiveMulScalar",e)},primitiveFloatArrayAddFloatArray:function(e){return this.namedPrimitive("FloatArrayPlugin","primitiveAddFloatArray",e)},primitiveFloatArraySubScalar:function(e){return this.namedPrimitive("FloatArrayPlugin","primitiveSubScalar",e)},primitiveFloatArraySubFloatArray:function(e){return this.namedPrimitive("FloatArrayPlugin","primitiveSubFloatArray",e)},primitiveFloatArrayEqual:function(e){return this.namedPrimitive("FloatArrayPlugin","primitiveEqual",e)},primitiveFloatArrayDotProduct:function(e){return this.namedPrimitive("FloatArrayPlugin","primitiveDotProduct",e)},m23PrimitiveInvertRectInto:function(e){return this.namedPrimitive("Matrix2x3Plugin","primitiveInvertRectInto",e)},m23PrimitiveTransformPoint:function(e){return this.namedPrimitive("Matrix2x3Plugin","primitiveTransformPoint",e)},m23PrimitiveIsPureTranslation:function(e){return this.namedPrimitive("Matrix2x3Plugin","primitiveIsPureTranslation",e)},m23PrimitiveComposeMatrix:function(e){return this.namedPrimitive("Matrix2x3Plugin","primitiveComposeMatrix",e)},m23PrimitiveTransformRectInto:function(e){return this.namedPrimitive("Matrix2x3Plugin","primitiveTransformRectInto",e)},m23PrimitiveIsIdentity:function(e){return this.namedPrimitive("Matrix2x3Plugin","primitiveIsIdentity",e)},m23PrimitiveInvertPoint:function(e){return this.namedPrimitive("Matrix2x3Plugin","primitiveInvertPoint",e)},primitiveDeflateBlock:function(e){return this.namedPrimitive("ZipPlugin","primitiveDeflateBlock",e)},primitiveDeflateUpdateHashTable:function(e){return this.namedPrimitive("ZipPlugin","primitiveDeflateUpdateHashTable",e)},primitiveUpdateGZipCrc32:function(e){return this.namedPrimitive("ZipPlugin","primitiveUpdateGZipCrc32",e)},primitiveInflateDecompressBlock:function(e){return this.namedPrimitive("ZipPlugin","primitiveInflateDecompressBlock",e)},primitiveZipSendBlock:function(e){return this.namedPrimitive("ZipPlugin","primitiveZipSendBlock",e)},primitiveFFTTransformData:function(e){return this.namedPrimitive("FFTPlugin","primitiveFFTTransformData",e)},primitiveFFTScaleData:function(e){return this.namedPrimitive("FFTPlugin","primitiveFFTScaleData",e)},primitiveFFTPermuteData:function(e){return this.namedPrimitive("FFTPlugin","primitiveFFTPermuteData",e)},gePrimitiveMergeFillFrom:function(e){return this.namedPrimitive("B2DPlugin","primitiveMergeFillFrom",e)},gePrimitiveCopyBuffer:function(e){return this.namedPrimitive("B2DPlugin","primitiveCopyBuffer",e)},gePrimitiveAddRect:function(e){return this.namedPrimitive("B2DPlugin","primitiveAddRect",e)},gePrimitiveAddGradientFill:function(e){return this.namedPrimitive("B2DPlugin","primitiveAddGradientFill",e)},gePrimitiveSetClipRect:function(e){return this.namedPrimitive("B2DPlugin","primitiveSetClipRect",e)},gePrimitiveSetBitBltPlugin:function(e){return this.namedPrimitive("B2DPlugin","primitiveSetBitBltPlugin",e)},gePrimitiveRegisterExternalEdge:function(e){return this.namedPrimitive("B2DPlugin","primitiveRegisterExternalEdge",e)},gePrimitiveGetClipRect:function(e){return this.namedPrimitive("B2DPlugin","primitiveGetClipRect",e)},gePrimitiveAddBezier:function(e){return this.namedPrimitive("B2DPlugin","primitiveAddBezier",e)},gePrimitiveInitializeProcessing:function(e){return this.namedPrimitive("B2DPlugin","primitiveInitializeProcessing",e)},gePrimitiveRenderImage:function(e){return this.namedPrimitive("B2DPlugin","primitiveRenderImage",e)},gePrimitiveGetOffset:function(e){return this.namedPrimitive("B2DPlugin","primitiveGetOffset",e)},gePrimitiveSetDepth:function(e){return this.namedPrimitive("B2DPlugin","primitiveSetDepth",e)},gePrimitiveAddBezierShape:function(e){return this.namedPrimitive("B2DPlugin","primitiveAddBezierShape",e)},gePrimitiveSetEdgeTransform:function(e){return this.namedPrimitive("B2DPlugin","primitiveSetEdgeTransform",e)},gePrimitiveGetTimes:function(e){return this.namedPrimitive("B2DPlugin","primitiveGetTimes",e)},gePrimitiveNextActiveEdgeEntry:function(e){return this.namedPrimitive("B2DPlugin","primitiveNextActiveEdgeEntry",e)},gePrimitiveAddBitmapFill:function(e){return this.namedPrimitive("B2DPlugin","primitiveAddBitmapFill",e)},gePrimitiveGetDepth:function(e){return this.namedPrimitive("B2DPlugin","primitiveGetDepth",e)},gePrimitiveAbortProcessing:function(e){return this.namedPrimitive("B2DPlugin","primitiveAbortProcessing",e)},gePrimitiveNextGlobalEdgeEntry:function(e){return this.namedPrimitive("B2DPlugin","primitiveNextGlobalEdgeEntry",e)},gePrimitiveGetFailureReason:function(e){return this.namedPrimitive("B2DPlugin","primitiveGetFailureReason",e)},gePrimitiveDisplaySpanBuffer:function(e){return this.namedPrimitive("B2DPlugin","primitiveDisplaySpanBuffer",e)},gePrimitiveGetCounts:function(e){return this.namedPrimitive("B2DPlugin","primitiveGetCounts",e)},gePrimitiveChangedActiveEdgeEntry:function(e){return this.namedPrimitive("B2DPlugin","primitiveChangedActiveEdgeEntry",e)},gePrimitiveRenderScanline:function(e){return this.namedPrimitive("B2DPlugin","primitiveRenderScanline",e)},gePrimitiveGetBezierStats:function(e){return this.namedPrimitive("B2DPlugin","primitiveGetBezierStats",e)},gePrimitiveFinishedProcessing:function(e){return this.namedPrimitive("B2DPlugin","primitiveFinishedProcessing",e)},gePrimitiveNeedsFlush:function(e){return this.namedPrimitive("B2DPlugin","primitiveNeedsFlush",e)},gePrimitiveAddLine:function(e){return this.namedPrimitive("B2DPlugin","primitiveAddLine",e)},gePrimitiveSetOffset:function(e){return this.namedPrimitive("B2DPlugin","primitiveSetOffset",e)},gePrimitiveNextFillEntry:function(e){return this.namedPrimitive("B2DPlugin","primitiveNextFillEntry",e)},gePrimitiveInitializeBuffer:function(e){return this.namedPrimitive("B2DPlugin","primitiveInitializeBuffer",e)},gePrimitiveDoProfileStats:function(e){return this.namedPrimitive("B2DPlugin","primitiveDoProfileStats",e)},gePrimitiveAddActiveEdgeEntry:function(e){return this.namedPrimitive("B2DPlugin","primitiveAddActiveEdgeEntry",e)},gePrimitiveSetAALevel:function(e){return this.namedPrimitive("B2DPlugin","primitiveSetAALevel",e)},gePrimitiveNeedsFlushPut:function(e){return this.namedPrimitive("B2DPlugin","primitiveNeedsFlushPut",e)},gePrimitiveAddCompressedShape:function(e){return this.namedPrimitive("B2DPlugin","primitiveAddCompressedShape",e)},gePrimitiveSetColorTransform:function(e){return this.namedPrimitive("B2DPlugin","primitiveSetColorTransform",e)},gePrimitiveAddOval:function(e){return this.namedPrimitive("B2DPlugin","primitiveAddOval",e)},gePrimitiveRegisterExternalFill:function(e){return this.namedPrimitive("B2DPlugin","primitiveRegisterExternalFill",e)},gePrimitiveAddPolygon:function(e){return this.namedPrimitive("B2DPlugin","primitiveAddPolygon",e)},gePrimitiveGetAALevel:function(e){return this.namedPrimitive("B2DPlugin","primitiveGetAALevel",e)}}),Object.extend(Squeak.Primitives.prototype,"DropPlugin",{primitiveDropRequestFileHandle:function(e){var t=this.stackInteger(0),i=this.display.droppedFiles||[];if(t<1||i.length<t)return!1;var r=i[t-1],a=this.fileOpen(r,!1);if(!a)return!1;var s=this.makeFileHandle(r,a,!1);return this.popNandPushIfOK(e+1,s),!0},primitiveDropRequestFileName:function(e){var t=this.stackInteger(0),i=this.display.droppedFiles||[];if(t<1||i.length<t)return!1;var r=this.makeStString(this.filenameToSqueak(i[t-1]));return this.popNandPushIfOK(e+1,r)}}),Object.extend(Squeak.Primitives.prototype,"FilePlugin",{primitiveDirectoryCreate:function(e){var t=this.stackNonInteger(0);if(!this.success)return!1;var i=this.filenameFromSqueak(t.bytesAsString());if(this.success=Squeak.dirCreate(i),!this.success){var r=Squeak.splitFilePath(i);console.log("Directory not created: "+r.fullname)}return this.popNIfOK(e)},primitiveDirectoryDelete:function(e){var t=this.stackNonInteger(0);if(!this.success)return!1;var i=this.filenameFromSqueak(t.bytesAsString());return this.success=Squeak.dirDelete(i),this.popNIfOK(e)},primitiveDirectoryDelimitor:function(e){var t=this.emulateMac?":":"/";return this.popNandPushIfOK(1,this.charFromInt(t.charCodeAt(0)))},primitiveDirectoryEntry:function(e){var t=this.stackNonInteger(1),i=this.stackNonInteger(0);if(!this.success)return!1;i.bytesAsString();var r=this.filenameFromSqueak(i.bytesAsString()),a=(t.bytesAsString(),this.filenameFromSqueak(t.bytesAsString())),s=Squeak.dirList(a,!0);if(!s){var n=Squeak.splitFilePath(a);return console.log("Directory not found: "+n.fullname),!1}var o=s[r];return this.popNandPushIfOK(e+1,this.makeStObject(o)),!0},primitiveDirectoryLookup:function(e){var t=this.stackInteger(0),i=this.stackNonInteger(1);if(!this.success)return!1;var r=i.bytesAsString(),a=this.filenameFromSqueak(r),s=Squeak.dirList(a,!0);if(!s){var n=Squeak.splitFilePath(a);return console.log("Directory not found: "+n.fullname),!1}var o=s[Object.keys(s).sort()[t-1]];return"/"===r&&(1===t?((o=o||[0,0,0,0,0])[0]="SqueakJS",o[3]=!0):o=null),this.popNandPushIfOK(e+1,this.makeStObject(o)),!0},primitiveDirectorySetMacTypeAndCreator:function(e){return this.popNIfOK(e)},primitiveFileAtEnd:function(e){var t=this.stackNonInteger(0);return!(!this.success||!t.file)&&(this.popNandPushIfOK(e+1,this.makeStObject(t.filePos>=t.file.size)),!0)},primitiveFileClose:function(e){var t=this.stackNonInteger(0);return!(!this.success||!t.file)&&("string"==typeof t.file?this.fileConsoleFlush(t.file):(this.fileClose(t.file),this.vm.breakOut(),t.file=null),this.popNIfOK(e))},primitiveFileDelete:function(e){var t=this.stackNonInteger(0);if(!this.success)return!1;var i=this.filenameFromSqueak(t.bytesAsString());return this.success=Squeak.fileDelete(i),this.popNIfOK(e)},primitiveFileFlush:function(e){var t=this.stackNonInteger(0);return!(!this.success||!t.file)&&("string"==typeof t.file?this.fileConsoleFlush(t.file):(Squeak.flushFile(t.file),this.vm.breakOut()),this.popNIfOK(e))},primitiveFileGetPosition:function(e){var t=this.stackNonInteger(0);return!(!this.success||!t.file)&&(this.popNandPushIfOK(e+1,this.makeLargeIfNeeded(t.filePos)),!0)},makeFileHandle:function(e,t,i){var r=this.makeStString("squeakjs:"+e);return r.file=t,r.fileWrite=i,r.filePos=0,r},primitiveFileOpen:function(e){var t=this.stackBoolean(0),i=this.stackNonInteger(1);if(!this.success)return!1;var r=this.filenameFromSqueak(i.bytesAsString()),a=this.fileOpen(r,t);if(!a)return!1;var s=this.makeFileHandle(a.name,a,t);return this.popNandPushIfOK(e+1,s),!0},primitiveFileRead:function(a){var s=this.stackInteger(0),n=this.stackInteger(1)-1,o=this.stackNonInteger(2),u=this.stackNonInteger(3);if(!this.success||!o.isWordsOrBytes()||!u.file)return!1;if(!s)return this.popNandPushIfOK(a+1,0);var e=o.isWords()?o.wordsSize():o.bytesSize();return!(n<0||e<n+s)&&("string"==typeof u.file?(this.popNandPushIfOK(a+1,0),!0):this.fileContentsDo(u.file,function(e){if(!e.contents)return this.popNandPushIfOK(a+1,0);var t,i;if(o.isWords()){t=new Uint32Array(e.contents.buffer),i=o.words,s=Math.min(s,e.size-u.filePos>>>2);for(var r=0;r<s;r++)i[n+r]=t[u.filePos+r];u.filePos+=s<<2}else{t=e.contents,i=o.bytes,s=Math.min(s,e.size-u.filePos);for(r=0;r<s;r++)i[n+r]=t[u.filePos++]}this.popNandPushIfOK(a+1,s)}.bind(this)))},primitiveFileRename:function(e){var t=this.stackNonInteger(1),i=this.stackNonInteger(0);if(!this.success)return!1;var r=this.filenameFromSqueak(t.bytesAsString()),a=this.filenameFromSqueak(i.bytesAsString());return this.success=Squeak.fileRename(r,a),this.vm.breakOut(),this.popNIfOK(e)},primitiveFileSetPosition:function(e){var t=this.stackPos32BitInt(0),i=this.stackNonInteger(1);return!(!this.success||!i.file)&&(i.filePos=t,this.popNIfOK(e))},primitiveFileSize:function(e){var t=this.stackNonInteger(0);return!(!this.success||!t.file)&&(this.popNandPushIfOK(e+1,this.makeLargeIfNeeded(t.file.size)),!0)},primitiveFileStdioHandles:function(e){var t=[null,this.makeFileHandle("console.log","log",!0),this.makeFileHandle("console.error","error",!0)];return this.popNandPushIfOK(e+1,this.makeStArray(t)),!0},primitiveFileTruncate:function(e){var t=this.stackPos32BitInt(0),i=this.stackNonInteger(1);return!!(this.success&&i.file&&i.fileWrite)&&(i.file.size>t&&(i.file.size=t,i.file.modified=!0,i.filePos>i.file.size&&(i.filePos=i.file.size)),this.popNIfOK(e))},primitiveDisableFileAccess:function(e){return this.fakePrimitive("FilePlugin.primitiveDisableFileAccess",0,e)},primitiveFileWrite:function(s){var n=this.stackInteger(0),o=this.stackInteger(1)-1,e=this.stackNonInteger(2),u=this.stackNonInteger(3);if(!this.success||!u.file||!u.fileWrite)return!1;if(!n)return this.popNandPushIfOK(s+1,0);var l=e.bytes||e.wordsAsUint8Array();return!!l&&(!(o<0||o+n>l.length)&&("string"==typeof u.file?(this.fileConsoleWrite(u.file,l,o,n),this.popNandPushIfOK(s+1,n),!0):this.fileContentsDo(u.file,function(e){var t=l,i=e.contents||[];if(u.filePos+n>i.length){var r=0===i.length?u.filePos+n:Math.max(u.filePos+n,i.length+1e4);e.contents=new Uint8Array(r),e.contents.set(i),i=e.contents}for(var a=0;a<n;a++)i[u.filePos++]=t[o+a];u.filePos>e.size&&(e.size=u.filePos),e.modified=!0,this.popNandPushIfOK(s+1,n)}.bind(this))))},fileOpen:function(e,t){"undefined"==typeof SqueakFiles&&(window.SqueakFiles={});var i=Squeak.splitFilePath(e);if(!i.basename)return null;var r=Squeak.dirList(i.dirname,!0);if(!r)return null;var a=r[i.basename],s=null;if(a){if(n=SqueakFiles[i.fullname])return++n.refCount,n}else{if(!t)return console.log("File not found: "+i.fullname),null;if(s=new Uint8Array,!(a=Squeak.filePut(i.fullname,s.buffer)))return console.log("Cannot create file: "+i.fullname),null}var n={name:i.fullname,size:a[4],contents:s,modified:!1,refCount:1};return SqueakFiles[n.name]=n},fileClose:function(e){Squeak.flushFile(e),0==--e.refCount&&delete SqueakFiles[e.name]},fileContentsDo:function(i,r){if(i.contents)r(i);else{if(!1===i.contents)return!1;this.vm.freeze(function(t){Squeak.fileGet(i.name,function(e){if(null==e)return error(i.name);i.contents=this.asUint8Array(e),t(),r(i)}.bind(this),function(e){console.log("File get failed: "+e),i.contents=!1,t(),r(i)}.bind(this))}.bind(this))}return!0},fileConsoleBuffer:{log:"",error:""},fileConsoleWrite:function(e,t,i,r){var a=t.subarray(i,i+r),s=this.fileConsoleBuffer[e]+Squeak.bytesAsString(a),n=s.match("([^]*)\n(.*)");n&&(console[e](n[1]),s=n[2]),this.fileConsoleBuffer[e]=s},fileConsoleFlush:function(e){var t=this.fileConsoleBuffer[e];t&&(console[e](t),this.fileConsoleBuffer[e]="")}}),Object.extend(Squeak.Primitives.prototype,"JPEGReadWriter2Plugin",{jpeg2_primJPEGPluginIsPresent:function(e){return this.popNandPushIfOK(e+1,this.vm.trueObj)},jpeg2_primImageHeight:function(e){var t=this.stackNonInteger(0).wordsOrBytes();if(!t)return!1;var i=t[1];return this.popNandPushIfOK(e+1,i)},jpeg2_primImageWidth:function(e){var t=this.stackNonInteger(0).wordsOrBytes();if(!t)return!1;var i=t[0];return this.popNandPushIfOK(e+1,i)},jpeg2_primJPEGCompressStructSize:function(e){return this.popNandPushIfOK(e+1,0)},jpeg2_primJPEGDecompressStructSize:function(e){return this.popNandPushIfOK(e+1,8)},jpeg2_primJPEGErrorMgr2StructSize:function(e){return this.popNandPushIfOK(e+1,0)},jpeg2_primJPEGReadHeaderfromByteArrayerrorMgr:function(e){var t=this.stackNonInteger(2).wordsOrBytes(),i=this.stackNonInteger(1).bytes;if(!t||!i)return!1;var r=this.vm.freeze();return this.jpeg2_readImageFromBytes(i,function(e){this.jpeg2state={src:i,img:e},t[0]=e.width,t[1]=e.height,r()}.bind(this),function(){t[0]=0,t[1]=0,r()}.bind(this)),this.popNIfOK(e)},jpeg2_primJPEGReadImagefromByteArrayonFormdoDitheringerrorMgr:function(e){var t=this.stackNonInteger(3).bytes,i=this.stackNonInteger(2).pointers,r=this.stackBoolean(1);if(!this.success||!t||!i)return!1;var a=this.jpeg2state;if(!a||a.src!==t)return console.error("jpeg read did not match header info"),!1;var s=i[Squeak.Form_depth],n=this.jpeg2_getPixelsFromImage(a.img),o=i[Squeak.Form_bits].words;if(32===s)this.jpeg2_copyPixelsToForm32(n,o);else{if(16!==s)return!1;r?this.jpeg2_ditherPixelsToForm16(n,o):this.jpeg2_copyPixelsToForm16(n,o)}return this.popNIfOK(e)},jpeg2_primJPEGWriteImageonByteArrayformqualityprogressiveJPEGerrorMgr:function(e){return this.vm.warnOnce("JPEGReadWritePlugin2: writing not implemented yet"),!1},jpeg2_readImageFromBytes:function(e,t,i){var r=new Blob([e],{type:"image/jpeg"}),a=new Image;a.onload=function(){t(a)},a.onerror=function(){console.warn("could not render JPEG"),i()},a.src=(window.URL||window.webkitURL).createObjectURL(r)},jpeg2_getPixelsFromImage:function(e){var t=document.createElement("canvas"),i=t.getContext("2d");return t.width=e.width,t.height=e.height,i.drawImage(e,0,0),i.getImageData(0,0,e.width,e.height)},jpeg2_copyPixelsToForm32:function(e,t){for(var i=e.data,r=0;r<t.length;r++){var a=i[4*r+0],s=i[4*r+1],n=i[4*r+2];t[r]=4278190080|a<<16|s<<8|n}},jpeg2_copyPixelsToForm16:function(e,t){for(var i=e.width,r=e.height,a=e.data,s=0;s<r;s++)for(var n=0;n<i;n+=2){var o=s*r+n,u=a[4*o+0]>>3<<10|a[4*o+1]>>3<<5|a[4*o+2]>>3;0===u&&(u=1),0==(65535&(u=u<<16|a[4*o+4]>>3<<10|a[4*o+5]>>3<<5|a[4*o+6]>>3))&&(u|=1),t[o>>1]=u}},jpeg2_ditherPixelsToForm16:function(e,t){for(var i=e.width>>1,r=e.height,a=e.data,s=[2,0,14,12,1,3,13,15],n=[10,8,6,4,9,11,5,7],o=0;o<r;o++)for(var u=0;u<i;u++){var l,c,f=o*r+2*u<<2,h=a[f],p=a[1+f],d=a[2+f],b=a[4+f],m=a[5+f],v=a[6+f],g=(3&o)<<1|1&u,k=s[g],S=n[g];c=(l=496*h>>8)>>4,h=k<(15&l)?c+1:c,c=(l=496*p>>8)>>4,p=k<(15&l)?c+1:c,c=(l=496*d>>8)>>4,d=k<(15&l)?c+1:c,c=(l=496*b>>8)>>4,b=S<(15&l)?c+1:c,c=(l=496*m>>8)>>4,m=S<(15&l)?c+1:c,c=(l=496*v>>8)>>4;var y=h<<10|p<<5|d;0===y&&(y=1),0==(65535&(y=y<<16|b<<10|m<<5|(v=S<(15&l)?c+1:c)))&&(y|=1),t[f>>3]=y}}}),Object.extend(Squeak.Primitives.prototype,"ScratchPluginAdditions",{scratch_primitiveOpenURL:function(e){var t=this.stackNonInteger(0).bytesAsString();if(""==t)return!1;if(/^\/SqueakJS\//.test(t)){t=t.slice(10);var i=Squeak.splitFilePath(t),r=Squeak.Settings["squeak-template:"+i.dirname];r&&(t=JSON.parse(r).url+"/"+i.basename)}return window.open(t,"_blank"),this.popNIfOK(e)},scratch_primitiveGetFolderPath:function(e){var t,i=this.stackInteger(0);if(!this.success)return!1;switch(i){case 1:t="/"}return!!t&&(this.vm.popNandPush(e+1,this.makeStString(this.filenameToSqueak(t))),!0)}}),Object.extend(Squeak.Primitives.prototype,"SoundPlugin",{snd_primitiveSoundStart:function(e){return this.snd_primitiveSoundStartWithSemaphore(e)},snd_primitiveSoundStartWithSemaphore:function(e){var t=this.stackInteger(e-1),i=this.stackInteger(e-2),r=this.stackBoolean(e-3),a=3<e?this.stackInteger(e-4):0;return!!this.success&&(this.audioContext=Squeak.startAudioOut(),this.audioContext?(this.audioSema=a,this.audioNextTimeSlot=0,this.audioBuffersReady=[],this.audioBuffersUnused=[this.audioContext.createBuffer(r?2:1,t,i),this.audioContext.createBuffer(r?2:1,t,i)],console.log("sound: started"),this.popNIfOK(e)):(this.vm.warnOnce("could not initialize audio"),!1))},snd_playNextBuffer:function(){if(this.audioContext&&0!==this.audioBuffersReady.length){var e=this.audioContext.createBufferSource();e.buffer=this.audioBuffersReady.shift(),e.connect(this.audioContext.destination),this.audioNextTimeSlot<this.audioContext.currentTime&&(0<this.audioNextTimeSlot&&console.log("sound "+this.audioContext.currentTime.toFixed(3)+": buffer underrun by "+(this.audioContext.currentTime-this.audioNextTimeSlot).toFixed(3)+" s"),this.audioNextTimeSlot=this.audioContext.currentTime),e.start(this.audioNextTimeSlot),this.audioNextTimeSlot+=e.buffer.duration,window.setTimeout(function(){this.audioContext&&this.vm.forceInterruptCheck&&(this.audioBuffersUnused.push(e.buffer),this.audioSema&&this.signalSemaphoreWithIndex(this.audioSema),this.vm.forceInterruptCheck())}.bind(this),1e3*(this.audioNextTimeSlot-this.audioContext.currentTime)),this.snd_playNextBuffer()}},snd_primitiveSoundAvailableSpace:function(e){if(!this.audioContext)return console.log("sound: no audio context"),!1;var t=0;if(0<this.audioBuffersUnused.length){var i=this.audioBuffersUnused[0];t=i.length*i.numberOfChannels*2}return this.popNandPushIfOK(e+1,t)},snd_primitiveSoundPlaySamples:function(e){if(!this.audioContext||0===this.audioBuffersUnused.length)return console.log("sound: play but no free buffers"),!1;var t=this.stackInteger(2),i=this.stackNonInteger(1).wordsAsInt16Array(),r=this.stackInteger(0)-1;if(!this.success||!i)return!1;for(var a=this.audioBuffersUnused.shift(),s=a.numberOfChannels,n=0;n<s;n++)for(var o=a.getChannelData(n),u=r+n,l=0;l<t;l++)o[l]=i[u]/32768,u+=s;return this.audioBuffersReady.push(a),this.snd_playNextBuffer(),this.popNIfOK(e)},snd_primitiveSoundPlaySilence:function(e){if(!this.audioContext||0===this.audioBuffersUnused.length)return console.log("sound: play but no free buffers"),!1;for(var t=this.audioBuffersUnused.shift(),i=t.numberOfChannels,r=t.length,a=0;a<i;a++)for(var s=t.getChannelData(a),n=0;n<r;n++)s[n]=0;return this.audioBuffersReady.push(t),this.snd_playNextBuffer(),this.popNandPushIfOK(e+1,r)},snd_primitiveSoundStop:function(e){return this.audioContext&&(this.audioContext=null,this.audioBuffersReady=null,this.audioBuffersUnused=null,this.audioNextTimeSlot=0,this.audioSema=0,console.log("sound: stopped")),this.popNIfOK(e)},snd_primitiveSoundStartRecording:function(r){if(3!==r)return!1;var t=this.stackNonInteger(3),a=this.stackInteger(2),s=this.stackBoolean(1),n=this.stackInteger(0);if(!this.success)return!1;var i=this.primMethod,o=this.vm.freeze(),u=this;return Squeak.startAudioIn(function(e,t){for(console.log("sound: recording started"),u.audioInContext=e,u.audioInSource=t,u.audioInSema=n,u.audioInBuffers=[],u.audioInBufferIndex=0,u.audioInOverSample=1;a*u.audioInOverSample<u.audioInContext.sampleRate;)u.audioInOverSample*=2;for(var i=1024*u.audioInOverSample;i/u.audioInContext.sampleRate<.1;)i*=2;u.audioInProcessor=e.createScriptProcessor(i,s?2:1,s?2:1),u.audioInProcessor.onaudioprocess=function(e){u.snd_recordNextBuffer(e.inputBuffer)},u.audioInSource.connect(u.audioInProcessor),u.audioInProcessor.connect(e.destination),u.vm.popN(r),window.setTimeout(o,0)},function(e){console.warn(e),u.vm.sendAsPrimitiveFailure(t,i,r),window.setTimeout(o,0)}),!0},snd_recordNextBuffer:function(e){this.audioInContext&&(5<this.audioInBuffers.length&&this.audioInBuffers.shift(),this.audioInBuffers.push(e),this.audioInSema&&this.signalSemaphoreWithIndex(this.audioInSema),this.vm.forceInterruptCheck())},snd_primitiveSoundGetRecordingSampleRate:function(e){if(!this.audioInContext)return!1;var t=this.audioInContext.sampleRate/this.audioInOverSample|0;return console.log("sound: actual recording rate "+t+"x"+this.audioInOverSample),this.popNandPushIfOK(e+1,t)},snd_primitiveSoundRecordSamples:function(e){var t=this.stackNonInteger(1).wordsAsInt16Array(),i=this.stackInteger(0)-1;if(!this.success)return!1;for(var r=0;i<t.length&&0!==this.audioInBuffers.length;){for(var a=this.audioInBuffers[0],s=a.numberOfChannels,n=s,o=this.audioInOverSample,u=(t.length-i)/n,l=(a.length-this.audioInBufferIndex)/o,c=Math.min(l,u),f=0;f<s;f++)for(var h=a.getChannelData(f),p=this.audioInBufferIndex,d=i+f,b=0;b<c;b++)t[d]=32768*h[p]&65535,d+=n,p+=o;r+=c*s,i+=c*s,p<a.length?this.audioInBufferIndex=p:(this.audioInBufferIndex=0,this.audioInBuffers.shift())}return this.popNandPushIfOK(e+1,r)},snd_primitiveSoundStopRecording:function(e){return this.audioInContext&&(this.audioInSource.disconnect(),this.audioInProcessor.disconnect(),this.audioInContext=null,this.audioInSema=0,this.audioInBuffers=null,this.audioInSource=null,this.audioInProcessor=null,console.log("sound recording stopped")),!0},snd_primitiveSoundSetRecordLevel:function(e){return!0}}),JN=1,KN=11,NN=0,ON=0,PN=0,QN=null,RN=null,SN="ADPCMCodecPlugin 3 November 2014 (e)",TN=null,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("ADPCMCodecPlugin",{primitiveDecodeStereo:ZN,primitiveEncodeStereo:_N,setInterpreter:aO,primitiveEncodeMono:$N,primitiveDecodeMono:YN,getModuleName:UN}):self.setTimeout(e,100)}(),HP=1,IP=11,SP=12,TP=2,UP=3,VP=1,WP=0,XP=6,YP=0,ZP=4,$P=1,_P=2,aQ=3,bQ=6,cQ=0,dQ=2,eQ=1,fQ=3,gQ=16,hQ=12,iQ=11,jQ=14,kQ=13,lQ=10,mQ=18,nQ=15,oQ=14,pQ=15,qQ=21,rQ=18,sQ=16,tQ=4,uQ=5,vQ=2,wQ=3,xQ=10,yQ=0,zQ=1,AQ=12,BQ=13,CQ=18,DQ=19,EQ=20,FQ=16,GQ=28,HQ=22,IQ=17,JQ=10,KQ=4,LQ=65536,MQ=100,NQ=121,OQ=122,PQ=114,QQ=112,RQ=101,SQ=102,TQ=104,UQ=103,VQ=120,WQ=119,XQ=113,YQ=123,ZQ=115,$Q=108,_Q=105,aR=106,bR=110,cR=107,dR=109,eR=111,fR=118,gR=117,hR=116,iR=8,jR=9,kR=7,lR=2,mR=1,nR=0,oR=6,pR=1024,qR=2,rR=255,sR=256,tR=65280,uR=4,vR=512,wR=768,xR=65535,yR=1,zR=7,AR=5,BR=254,CR=1,DR=5,ER=8,FR=3,GR=0,HR=6,IR=7,JR=2,KR=4,LR=4,MR=5,NR=6,OR=6,PR=2,QR=5,RR=4,SR=3,TR=1,UR=6,VR=7,WR=8,XR=9,YR=4,ZR=5,$R=10,_R=12,aS=12,bS=16,cS=14,dS=15,eS=13,fS=15,gS=14,hS=18,iS=19,jS=20,kS=16,lS=21,mS=17,nS=10,oS=12,pS=11,qS=51,rS=50,sS=53,tS=48,uS=52,vS=49,wS=13,xS=14,yS=109,zS=111,AS=108,BS=110,CS=10,DS=69,ES=43,FS=45,GS=42,HS=44,IS=24,JS=97,KS=107,LS=103,MS=93,NS=91,OS=101,PS=105,QS=99,RS=95,SS=88,TS=113,US=46,VS=47,WS=18,XS=37,YS=39,ZS=36,$S=38,_S=11,aT=12,bT=17,cT=16,dT=128,eT=65,fT=66,gT=67,hT=68,iT=0,jT=1097753705,kT=256,lT=63,mT=8,nT=9,oT=80,pT=82,qT=84,rT=86,sT=1,tT=34,uT=35,vT=33,wT=32,xT=2,yT=64,zT=96,AT=106,BT=102,CT=92,DT=90,ET=100,FT=104,GT=98,HT=94,IT=3,JT=5,KT=null,LT="BitBltPlugin",MT=null,NT=0,OT=0,PT=0,QT=0,RT=0,ST=0,TT=0,UT=null,VT=null,WT=null,XT="B2DPlugin 14 November 2014 (e)",YT=null,ZT=0,$T=null,_T=null,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("B2DPlugin",{primitiveMergeFillFrom:SZ,primitiveCopyBuffer:EZ,primitiveAddRect:CZ,primitiveAddGradientFill:yZ,primitiveSetClipRect:c$,initialiseModule:HX,primitiveSetBitBltPlugin:b$,primitiveRegisterExternalEdge:YZ,primitiveGetClipRect:KZ,primitiveAddBezier:uZ,primitiveInitializeProcessing:RZ,primitiveRenderImage:$Z,primitiveGetOffset:OZ,primitiveSetDepth:e$,primitiveAddBezierShape:vZ,primitiveSetEdgeTransform:f$,getModuleName:nX,primitiveGetTimes:PZ,primitiveNextActiveEdgeEntry:VZ,primitiveAddBitmapFill:wZ,primitiveGetDepth:MZ,primitiveAbortProcessing:sZ,primitiveNextGlobalEdgeEntry:XZ,primitiveGetFailureReason:NZ,primitiveDisplaySpanBuffer:FZ,moduleUnloaded:VY,primitiveGetCounts:LZ,primitiveChangedActiveEdgeEntry:DZ,primitiveRenderScanline:_Z,primitiveGetBezierStats:JZ,primitiveFinishedProcessing:HZ,setInterpreter:y$,primitiveNeedsFlush:TZ,primitiveAddLine:zZ,primitiveSetOffset:g$,primitiveNextFillEntry:WZ,primitiveInitializeBuffer:QZ,primitiveDoProfileStats:GZ,primitiveAddActiveEdgeEntry:tZ,primitiveSetAALevel:a$,primitiveNeedsFlushPut:UZ,primitiveAddCompressedShape:xZ,primitiveSetColorTransform:d$,primitiveAddOval:AZ,primitiveRegisterExternalFill:ZZ,primitiveAddPolygon:BZ,primitiveGetAALevel:IZ}):self.setTimeout(e,100)}(),aoa=1,boa=11,koa=4294967295,loa=3,moa=13,noa=12,ooa=10,poa=11,qoa=14,roa=0,soa=4,toa=5,uoa=2,voa=7,woa=3,xoa=1,yoa=8,zoa=9,Aoa=15,Boa=6,Coa=2,Doa=2,Eoa=4,Foa=8,Goa=1,Hoa=16384,Ioa=0,Joa=3,Koa=2,Loa=1,Moa=1,Noa=43,Ooa=0,Poa=0,Qoa=0,Roa=0,Soa=0,Toa=0,Uoa=0,Voa=0,Woa=0,Xoa=0,Yoa=0,Zoa=0,$oa=0,_oa=0,apa=0,bpa=null,cpa=0,dpa=null,epa=null,fpa=0,gpa=0,hpa=0,ipa=0,jpa=0,kpa=0,lpa=0,mpa=0,npa=0,opa=0,ppa=0,qpa=0,rpa=0,spa=0,tpa=0,upa=0,vpa=new Array(4096),wpa=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5],xpa=[0,2,4,6,8,12,14,16],ypa=[0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],zpa=0,Apa=0,Bpa=0,Cpa=null,Dpa=0,Epa=0,Fpa=0,Gpa=0,Hpa=0,Ipa=0,Jpa=null,Kpa=0,Lpa=null,Mpa=0,Npa=0,Opa=[0,1,3,0,15,31,0,0,255,0,0,0,0,0,0,0,65535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1],Ppa="BitBltPlugin 3 November 2014 (e)",Qpa=0,Rpa=0,Spa=0,Tpa=new Array(43),Upa=0,Vpa=null,Wpa=0,Xpa=0,Ypa=0,Zpa=0,$pa=0,_pa=0,aqa=0,bqa=0,cqa=0,dqa=0,eqa=0,fqa=0,gqa=0,hqa=0,iqa=0,jqa=0,kqa=0,lqa=null,mqa=null,nqa=0,oqa=0,pqa=0,qqa=new Array(32),rqa=0,sqa=0,tqa=0,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("BitBltPlugin",{primitiveCopyBits:Rra,copyBits:Uqa,moduleUnloaded:Cra,primitiveDrawLoop:Tra,primitiveDisplayString:Sra,initialiseModule:pra,loadBitBltFrom:sra,setInterpreter:msa,primitiveWarpBits:Vra,getModuleName:kra,primitivePixelValueAt:Ura,copyBitsFromtoat:Vqa}):self.setTimeout(e,100)}(),xDa=1,yDa=11,CDa=0,DDa=null,EDa=0,FDa=null,GDa="FFTPlugin 3 November 2014 (e)",HDa=0,IDa=null,JDa=0,KDa=null,LDa=0,MDa=null,NDa=0,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("FFTPlugin",{primitiveFFTTransformData:VDa,setInterpreter:XDa,primitiveFFTPermuteData:TDa,primitiveFFTScaleData:UDa,getModuleName:QDa}):self.setTimeout(e,100)}(),NEa=1,OEa=11,QEa=null,REa="FloatArrayPlugin 3 November 2014 (e)",function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("FloatArrayPlugin",{primitiveMulFloatArray:bFa,primitiveEqual:$Ea,primitiveAtPut:WEa,primitiveAt:VEa,primitiveNormalize:dFa,primitiveSubFloatArray:eFa,primitiveDivFloatArray:XEa,primitiveAddScalar:UEa,primitiveDotProduct:ZEa,primitiveSubScalar:fFa,setInterpreter:hFa,primitiveSum:gFa,getModuleName:SEa,primitiveHashArray:_Ea,primitiveMulScalar:cFa,primitiveLength:aFa,primitiveAddFloatArray:TEa,primitiveDivScalar:YEa}):self.setTimeout(e,100)}(),UGa=1,VGa=11,YGa=null,ZGa="GeniePlugin v2.0 14 November 2014 (e)",function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("GeniePlugin",{primVersionNO:fHa,setInterpreter:gHa,primSameClassAbsoluteStrokeDistanceMyPoints_otherPoints_myVectors_otherVectors_mySquaredLengths_otherSquaredLengths_myAngles_otherAngles_maxSizeAndReferenceFlag_rowBase_rowInsertRemove_rowInsertRemoveCount:eHa,getModuleName:aHa}):self.setTimeout(e,100)}(),wIa=1,xIa=11,DIa=5,EIa=2,FIa=0,GIa=1,HIa=8,IIa=64,JIa=2446,KIa=22554,LIa=3196,MIa=4433,NIa=46802,OIa=6270,PIa=7373,QIa=9633,RIa=91881,SIa=12299,TIa=116130,UIa=15137,VIa=16069,WIa=16819,XIa=20995,YIa=25172,ZIa=1,$Ia=2,_Ia=4,aJa=8,bJa=16,cJa=128,dJa=255,eJa=11,fJa=10,gJa=0,hJa=127,iJa=3,jJa=null,kJa=0,lJa=new Array(128),mJa=new Array(11),nJa=new Array(128),oJa=new Array(11),pJa=null,qJa=0,rJa=0,sJa=null,tJa=null,uJa=0,vJa=[0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63],wJa=0,xJa=0,yJa=null,zJa=0,AJa=0,BJa="JPEGReaderPlugin 3 November 2014 (e)",CJa=null,DJa=new Array(128),EJa=new Array(11),function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("JPEGReaderPlugin",{setInterpreter:$Ja,primitiveIdctInt:YJa,primitiveColorConvertMCU:WJa,primitiveColorConvertGrayscaleMCU:VJa,primitiveDecodeMCU:XJa,getModuleName:OJa}):self.setTimeout(e,100)}(),cMa=1,dMa=11,iMa=null,jMa=0,kMa="KedamaPlugin 3 November 2014 (e)",lMa=0,mMa=0,nMa=0,oMa=0,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("KedamaPlugin",{makeMaskLog:zMa,vectorGetDistanceTo:fNa,getScalarHeading:uMa,shutdownModule:_Ma,primitiveAddScalar:JMa,primSetPixelsAtXY:FMa,turtleScalarSetX:aNa,primPixelAtXY:BMa,primUpHill:HMa,primScalarForward:EMa,primitiveDivArrays:KMa,getModuleName:tMa,primitiveSubArrays:OMa,scalarGetAngleTo:UMa,randomRange:TMa,setInterpreter:ZMa,kedamaSetRandomSeed:xMa,drawTurtlesInArray:rMa,turtleScalarSetY:bNa,randomIntoIntegerArray:SMa,getHeadingArrayInto:sMa,makeTurtlesMap:AMa,setHeadingArrayFrom:YMa,turtlesSetX:cNa,setScalarHeading:$Ma,makeMask:yMa,primitiveDivScalar:LMa,primitiveSubScalar:PMa,primPixelsAtXY:DMa,vectorGetAngleTo:eNa,primitiveMulArrays:MMa,primPixelAtXYPut:CMa,zoomBitmap:gNa,initialiseModule:vMa,primitiveAddArrays:IMa,scalarGetDistanceTo:VMa,turtlesSetY:dNa,randomIntoFloatArray:RMa,primTurtlesForward:GMa,primitiveMulScalar:NMa}):self.setTimeout(e,100)}(),dWa=1,eWa=11,jWa=null,kWa=0,lWa="KedamaPlugin2 13 November 2014 (e)",mWa=0,nWa=0,oWa=0,pWa=0,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("KedamaPlugin2",{primitiveAddArrays:JWa,getModuleName:uWa,primitiveMulArrays:YWa,drawTurtlesInArray:sWa,primitiveGTScalar:TWa,setScalarHeading:wXa,primitiveSubScalar:lXa,turtleScalarSetY:zXa,vectorGetAngleTo:CXa,primitiveRemArrays:iXa,primitiveLTArrays:WWa,primitiveAddScalar:KWa,primPixelsAtXY:EWa,primitiveMulScalar:ZWa,primSetPixelsAtXY:GWa,setHeadingArrayFrom:uXa,primPixelAtXYPut:DWa,makeMaskLog:AWa,primitiveLTScalar:XWa,scalarGetAngleTo:qXa,primitiveOrByteArray:bXa,primitiveLEArrays:UWa,primitiveRemScalar:jXa,getHeadingArrayInto:tWa,turtlesSetX:AXa,primitivePredicateReplaceBytes:gXa,primitiveDivArrays:MWa,makeMask:zWa,primitiveLEScalar:VWa,kedamaSetRandomSeed:yWa,randomIntoIntegerArray:oXa,setInterpreter:vXa,primitivePredicateAtAllPutColor:dXa,makeTurtlesMap:BWa,randomIntoFloatArray:nXa,primUpHill:IWa,shutdownModule:xXa,primitiveDivScalar:NWa,primitiveGEArrays:QWa,primitiveNotByteArray:aXa,randomRange:pXa,initialiseModule:wWa,getScalarHeading:vWa,primPixelAtXY:CWa,primitivePredicateAtAllPutNumber:eXa,primitiveEQArrays:OWa,primitiveNEArrays:$Wa,primScalarForward:FWa,vectorGetDistanceTo:DXa,turtlesSetY:BXa,turtleScalarSetX:yXa,primTurtlesForward:HWa,primitiveGEScalar:RWa,primitiveAndByteArray:LWa,primitivePredicateReplaceWords:hXa,primitiveGTArrays:SWa,primitivePredicateAtAllPutObject:fXa,primitiveEQScalar:PWa,primitivePredicateAtAllPutBoolean:cXa,zoomBitmap:EXa,primitiveNEScalar:_Wa,scalarGetDistanceTo:rXa,primitiveSubArrays:kXa}):self.setTimeout(e,100)}(),J9a=1,K9a=11,O9a=46,P9a=34,Q9a=47,R9a=35,S9a=48,T9a=36,U9a=49,V9a=37,W9a=38,X9a=45,Y9a=9,Z9a=50,$9a=13,_9a=17,aab=40,bab=19,cab=41,dab=21,eab=42,fab=23,gab=43,hab=25,iab=44,jab=27,kab=29,lab=31,mab=33,nab=39,oab=4,pab=1e-4,qab=0,rab=12,sab=16,tab=18,uab=20,vab=22,wab=24,xab=1,yab=26,zab=28,Aab=10,Bab=30,Cab=32,Dab=51,Eab=2,Fab=3.141592653589793,Gab=12,Hab=3,Iab=13,Jab=7,Kab=4,Lab=14,Mab=8,Nab=5,Oab=15,Pab=9,Qab=6,Rab=16,Sab=10,Tab=17,Uab=11,Vab=18,Wab=19,Xab=7,Yab=8,Zab=20,$ab=1,_ab=21,abb=6,bbb=24,cbb=22,dbb=2,ebb=23,fbb=3,gbb=11,hbb=5,ibb=0,jbb=0,kbb=0,lbb=0,mbb=0,nbb=null,obb=0,pbb=null,qbb="Klatt 3 November 2014 (e)",rbb=0,sbb=0,tbb=0,ubb=0,vbb=0,wbb=0,xbb=null,ybb=0,zbb=0,Abb=0,Bbb=0,Cbb=0,Dbb=0,Ebb=0,Fbb=0,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("Klatt",{setInterpreter:pcb,primitiveSynthesizeFrameIntoStartingAt:Zbb,getModuleName:Qbb}):self.setTimeout(e,100)}(),ofb=1,pfb=11,wfb=0,xfb=null,yfb="LargeIntegers v1.5 (e)",zfb=1,Afb=2,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("LargeIntegers",{primDigitAddWith:pgb,primDigitBitShiftMagnitude:ugb,primGetModuleName:Egb,primDigitBitLogicWithOp:rgb,primCheckIfCModuleExists:mgb,primDigitCompare:wgb,primDigitMultiplyNegative:Agb,primDigitBitShift:tgb,primNormalizePositive:Igb,primDigitSubtractWith:Dgb,_primDigitBitShift:ngb,primDigitMultiplyWithNegative:Bgb,primDigitSubtract:Cgb,primDigitDivNegative:ygb,primNormalizeNegative:Hgb,primDigitBitOr:sgb,primMontgomeryTimesModulo:Fgb,primDigitBitAnd:qgb,primDigitDivWithNegative:zgb,setInterpreter:Jgb,primNormalize:Ggb,primDigitBitXor:vgb,primDigitCompareWith:xgb,primDigitAdd:ogb,getModuleName:egb,primAsLargeInteger:lgb,primAnyBitFromTo:kgb}):self.setTimeout(e,100)}(),cob=1,dob=11,gob=null,hob=0,iob=0,job=0,kob=0,lob="Matrix2x3Plugin 3 November 2014 (e)",function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("Matrix2x3Plugin",{primitiveInvertPoint:uob,primitiveInvertRectInto:vob,primitiveIsIdentity:wob,primitiveComposeMatrix:tob,setInterpreter:Cob,primitiveTransformRectInto:zob,primitiveIsPureTranslation:xob,getModuleName:mob,primitiveTransformPoint:yob}):self.setTimeout(e,100)}(),Tpb=1,Upb=11,Ypb=null,Zpb="MiscPrimitivePlugin 3 November 2014 (e)",function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("MiscPrimitivePlugin",{primitiveConvert8BitSigned:dqb,primitiveCompareString:bqb,primitiveTranslateStringWithTable:jqb,primitiveStringHash:iqb,primitiveCompressToByteArray:cqb,primitiveFindSubstring:gqb,primitiveIndexOfAsciiInString:hqb,setInterpreter:kqb,primitiveDecompressFromByteArray:eqb,getModuleName:aqb,primitiveFindFirstInString:fqb}):self.setTimeout(e,100)}(),Urb=1,Vrb=11,Zrb=null,$rb="ScratchPlugin 3 November 2014 (e)",function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("ScratchPlugin",{primitiveCondenseSound:isb,getModuleName:csb,primitiveFisheye:lsb,primitiveWaterRipples1:ssb,primitiveHalfSizeDiagonal:nsb,primitiveScale:rsb,primitiveDoubleSize:jsb,setInterpreter:usb,primitiveWhirl:tsb,primitiveBlur:gsb,primitiveBrightnessShift:hsb,primitiveHalfSizeAverage:msb,primitiveSaturationShift:qsb,primitiveHueShift:osb,primitiveInterpolate:psb,primitiveExtractChannel:ksb}):self.setTimeout(e,100)}(),registerSocketPlugin(),registerSpeechPlugin(),registerSqueakSSL(),KCb=1,LCb=11,OCb=511,PCb=512,QCb=32768,RCb=536870912,SCb=null,TCb="SoundGenerationPlugin 3 November 2014 (e)",function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("SoundGenerationPlugin",{primitiveMixFMSound:WCb,primitiveMixSampledSound:ZCb,setInterpreter:$Cb,getModuleName:UCb,primitiveApplyReverb:VCb,primitiveMixPluckedSound:YCb,primitiveMixLoopedSampledSound:XCb}):self.setTimeout(e,100)}(),qFb=1,rFb=11,vFb=null,wFb="StarSqueakPlugin 3 November 2014 (e)",function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("StarSqueakPlugin",{primitiveDiffuseFromToWidthHeightDelta:zFb,primitiveEvaporateRate:AFb,setInterpreter:CFb,primitiveMapFromToWidthHeightPatchSizeRgbFlagsShift:BFb,getModuleName:yFb}):self.setTimeout(e,100)}(),AGb=1,BGb=11,JGb=32767,KGb=32768,LGb=32768,MGb=30,NGb=286,OGb=258,PGb=3,QGb=32767,RGb=32768,SGb=16,TGb=1,UGb=null,VGb="ZipPlugin 3 November 2014 (e)",WGb=0,XGb=0,YGb=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],ZGb=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],$Gb=0,_Gb=0,aHb=0,bHb=null,cHb=0,dHb=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],eHb=null,fHb=0,gHb=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],hHb=null,iHb=null,jHb=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],kHb=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],lHb=null,mHb=null,nHb=0,oHb=null,pHb=0,qHb=0,rHb=null,sHb=0,tHb=null,uHb=0,vHb=[257,258,259,260,261,262,263,264,265,265,266,266,267,267,268,268,269,269,269,269,270,270,270,270,271,271,271,271,272,272,272,272,273,273,273,273,273,273,273,273,274,274,274,274,274,274,274,274,275,275,275,275,275,275,275,275,276,276,276,276,276,276,276,276,277,277,277,277,277,277,277,277,277,277,277,277,277,277,277,277,278,278,278,278,278,278,278,278,278,278,278,278,278,278,278,278,279,279,279,279,279,279,279,279,279,279,279,279,279,279,279,279,280,280,280,280,280,280,280,280,280,280,280,280,280,280,280,280,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,281,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,282,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,283,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284,284],wHb=0,xHb=0,yHb=null,zHb=0,AHb=0,BHb=0,function e(){"object"==typeof Squeak&&Squeak.registerExternalModule?Squeak.registerExternalModule("ZipPlugin",{primitiveZipSendBlock:THb,primitiveUpdateAdler32:RHb,primitiveUpdateGZipCrc32:SHb,primitiveDeflateUpdateHashTable:PHb,setInterpreter:VHb,getModuleName:JHb,primitiveDeflateBlock:OHb,primitiveInflateDecompressBlock:QHb}):self.setTimeout(e,100)}();var LZString$1={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(null==e)return"";var t,i,r,a,s,n,o,u="",l=0;for(e=LZString$1.compress(e);l<2*e.length;)l%2==0?(t=e.charCodeAt(l/2)>>8,i=255&e.charCodeAt(l/2),r=l/2+1<e.length?e.charCodeAt(l/2+1)>>8:NaN):(t=255&e.charCodeAt((l-1)/2),(l+1)/2<e.length?(i=e.charCodeAt((l+1)/2)>>8,r=255&e.charCodeAt((l+1)/2)):i=r=NaN),l+=3,a=t>>2,s=(3&t)<<4|i>>4,n=(15&i)<<2|r>>6,o=63&r,isNaN(i)?n=o=64:isNaN(r)&&(o=64),u=u+LZString$1._keyStr.charAt(a)+LZString$1._keyStr.charAt(s)+LZString$1._keyStr.charAt(n)+LZString$1._keyStr.charAt(o);return u},decompressFromBase64:function(e){if(null==e)return"";var t,i,r,a,s,n,o,u="",l=0,c=0,f=LZString$1._f;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)i=LZString$1._keyStr.indexOf(e.charAt(c++))<<2|(s=LZString$1._keyStr.indexOf(e.charAt(c++)))>>4,r=(15&s)<<4|(n=LZString$1._keyStr.indexOf(e.charAt(c++)))>>2,a=(3&n)<<6|(o=LZString$1._keyStr.indexOf(e.charAt(c++))),l%2==0?(t=i<<8,64!=n&&(u+=f(t|r)),64!=o&&(t=a<<8)):(u+=f(t|i),64!=n&&(t=r<<8),64!=o&&(u+=f(t|a))),l+=3;return LZString$1.decompress(u)},compressToUTF16:function(e){if(null==e)return"";var t,i,r,a="",s=0,n=LZString$1._f;for(e=LZString$1.compress(e),t=0;t<e.length;t++)switch(i=e.charCodeAt(t),s++){case 0:a+=n(32+(i>>1)),r=(1&i)<<14;break;case 1:a+=n(r+(i>>2)+32),r=(3&i)<<13;break;case 2:a+=n(r+(i>>3)+32),r=(7&i)<<12;break;case 3:a+=n(r+(i>>4)+32),r=(15&i)<<11;break;case 4:a+=n(r+(i>>5)+32),r=(31&i)<<10;break;case 5:a+=n(r+(i>>6)+32),r=(63&i)<<9;break;case 6:a+=n(r+(i>>7)+32),r=(127&i)<<8;break;case 7:a+=n(r+(i>>8)+32),r=(255&i)<<7;break;case 8:a+=n(r+(i>>9)+32),r=(511&i)<<6;break;case 9:a+=n(r+(i>>10)+32),r=(1023&i)<<5;break;case 10:a+=n(r+(i>>11)+32),r=(2047&i)<<4;break;case 11:a+=n(r+(i>>12)+32),r=(4095&i)<<3;break;case 12:a+=n(r+(i>>13)+32),r=(8191&i)<<2;break;case 13:a+=n(r+(i>>14)+32),r=(16383&i)<<1;break;case 14:a+=n(r+(i>>15)+32,32+(32767&i)),s=0}return a+n(r+32)},decompressFromUTF16:function(e){if(null==e)return"";for(var t,i,r="",a=0,s=0,n=LZString$1._f;s<e.length;){switch(i=e.charCodeAt(s)-32,a++){case 0:t=i<<1;break;case 1:r+=n(t|i>>14),t=(16383&i)<<2;break;case 2:r+=n(t|i>>13),t=(8191&i)<<3;break;case 3:r+=n(t|i>>12),t=(4095&i)<<4;break;case 4:r+=n(t|i>>11),t=(2047&i)<<5;break;case 5:r+=n(t|i>>10),t=(1023&i)<<6;break;case 6:r+=n(t|i>>9),t=(511&i)<<7;break;case 7:r+=n(t|i>>8),t=(255&i)<<8;break;case 8:r+=n(t|i>>7),t=(127&i)<<9;break;case 9:r+=n(t|i>>6),t=(63&i)<<10;break;case 10:r+=n(t|i>>5),t=(31&i)<<11;break;case 11:r+=n(t|i>>4),t=(15&i)<<12;break;case 12:r+=n(t|i>>3),t=(7&i)<<13;break;case 13:r+=n(t|i>>2),t=(3&i)<<14;break;case 14:r+=n(t|i>>1),t=(1&i)<<15;break;case 15:r+=n(t|i),a=0}s++}return LZString$1.decompress(r)},compress:function(e){if(null==e)return"";var t,i,r,a={},s={},n="",o="",u="",l=2,c=3,f=2,h="",p=0,d=0,b=LZString$1._f;for(r=0;r<e.length;r+=1)if(n=e.charAt(r),Object.prototype.hasOwnProperty.call(a,n)||(a[n]=c++,s[n]=!0),o=u+n,Object.prototype.hasOwnProperty.call(a,o))u=o;else{if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(t=0;t<f;t++)p<<=1,15==d?(d=0,h+=b(p),p=0):d++;for(i=u.charCodeAt(0),t=0;t<8;t++)p=p<<1|1&i,15==d?(d=0,h+=b(p),p=0):d++,i>>=1}else{for(i=1,t=0;t<f;t++)p=p<<1|i,15==d?(d=0,h+=b(p),p=0):d++,i=0;for(i=u.charCodeAt(0),t=0;t<16;t++)p=p<<1|1&i,15==d?(d=0,h+=b(p),p=0):d++,i>>=1}0==--l&&(l=Math.pow(2,f),f++),delete s[u]}else for(i=a[u],t=0;t<f;t++)p=p<<1|1&i,15==d?(d=0,h+=b(p),p=0):d++,i>>=1;0==--l&&(l=Math.pow(2,f),f++),a[o]=c++,u=String(n)}if(""!==u){if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(t=0;t<f;t++)p<<=1,15==d?(d=0,h+=b(p),p=0):d++;for(i=u.charCodeAt(0),t=0;t<8;t++)p=p<<1|1&i,15==d?(d=0,h+=b(p),p=0):d++,i>>=1}else{for(i=1,t=0;t<f;t++)p=p<<1|i,15==d?(d=0,h+=b(p),p=0):d++,i=0;for(i=u.charCodeAt(0),t=0;t<16;t++)p=p<<1|1&i,15==d?(d=0,h+=b(p),p=0):d++,i>>=1}0==--l&&(l=Math.pow(2,f),f++),delete s[u]}else for(i=a[u],t=0;t<f;t++)p=p<<1|1&i,15==d?(d=0,h+=b(p),p=0):d++,i>>=1;0==--l&&(l=Math.pow(2,f),f++)}for(i=2,t=0;t<f;t++)p=p<<1|1&i,15==d?(d=0,h+=b(p),p=0):d++,i>>=1;for(;;){if(p<<=1,15==d){h+=b(p);break}d++}return h},decompress:function(e){if(null==e)return"";if(""==e)return null;var t,i,r,a,s,n,o,u=[],l=4,c=4,f=3,h="",p="",d=LZString$1._f,b={string:e,val:e.charCodeAt(0),position:32768,index:1};for(t=0;t<3;t+=1)u[t]=t;for(r=0,s=Math.pow(2,2),n=1;n!=s;)a=b.val&b.position,b.position>>=1,0==b.position&&(b.position=32768,b.val=b.string.charCodeAt(b.index++)),r|=(0<a?1:0)*n,n<<=1;switch(r){case 0:for(r=0,s=Math.pow(2,8),n=1;n!=s;)a=b.val&b.position,b.position>>=1,0==b.position&&(b.position=32768,b.val=b.string.charCodeAt(b.index++)),r|=(0<a?1:0)*n,n<<=1;o=d(r);break;case 1:for(r=0,s=Math.pow(2,16),n=1;n!=s;)a=b.val&b.position,b.position>>=1,0==b.position&&(b.position=32768,b.val=b.string.charCodeAt(b.index++)),r|=(0<a?1:0)*n,n<<=1;o=d(r);break;case 2:return""}for(i=p=u[3]=o;;){if(b.index>b.string.length)return"";for(r=0,s=Math.pow(2,f),n=1;n!=s;)a=b.val&b.position,b.position>>=1,0==b.position&&(b.position=32768,b.val=b.string.charCodeAt(b.index++)),r|=(0<a?1:0)*n,n<<=1;switch(o=r){case 0:for(r=0,s=Math.pow(2,8),n=1;n!=s;)a=b.val&b.position,b.position>>=1,0==b.position&&(b.position=32768,b.val=b.string.charCodeAt(b.index++)),r|=(0<a?1:0)*n,n<<=1;u[c++]=d(r),o=c-1,l--;break;case 1:for(r=0,s=Math.pow(2,16),n=1;n!=s;)a=b.val&b.position,b.position>>=1,0==b.position&&(b.position=32768,b.val=b.string.charCodeAt(b.index++)),r|=(0<a?1:0)*n,n<<=1;u[c++]=d(r),o=c-1,l--;break;case 2:return p}if(0==l&&(l=Math.pow(2,f),f++),u[o])h=u[o];else{if(o!==c)return null;h=i+i.charAt(0)}p+=h,u[c++]=i+h.charAt(0),i=h,0==--l&&(l=Math.pow(2,f),f++)}}};function setupFullscreen(t,e,i){var r,a=e.parentElement,s="fullscreenchange",n="fullscreenElement",o="fullscreenEnabled";function u(e){t.fullscreen=e,a.style.background=e?"black":"",i.header&&(i.header.style.display=e?"none":""),i.footer&&(i.footer.style.display=e?"none":""),i.fullscreenCheckbox&&(i.fullscreenCheckbox.checked=e),setTimeout(window.onresize,0)}if(a.requestFullscreen||[{req:a.webkitRequestFullscreen,exit:document.webkitExitFullscreen,evt:"webkitfullscreenchange",elem:"webkitFullscreenElement",enable:"webkitFullscreenEnabled"},{req:a.mozRequestFullScreen,exit:document.mozCancelFullScreen,evt:"mozfullscreenchange",elem:"mozFullScreenElement",enable:"mozFullScreenEnabled"},{req:a.msRequestFullscreen,exit:document.msExitFullscreen,evt:"MSFullscreenChange",elem:"msFullscreenElement",enable:"msFullscreenEnabled"}].forEach(function(e){e.req&&(a.requestFullscreen=e.req,document.exitFullscreen=e.exit,s=e.evt,n=e.elem,o=e.enable)}),a.requestFullscreen)document.addEventListener(s,function(){u(a==document[n])}),r=function(){document[o]&&a==document[n]!=t.fullscreen&&(t.fullscreen?a.requestFullscreen():document.exitFullscreen())};else{var l=!1;r=function(){(i.header||i.footer)&&l!=t.fullscreen&&u(l=t.fullscreen)}}return i.fullscreenCheckbox&&(i.fullscreenCheckbox.onclick=function(){t.fullscreen=i.fullscreenCheckbox.checked,r()}),r}function setupSwapButtons(e){if(e.swapCheckbox){var t=Squeak.Settings.squeakImageName||"default",i=JSON.parse(Squeak.Settings["squeakSettings:"+t]||"{}");"swapButtons"in i&&(e.swapButtons=i.swapButtons),e.swapCheckbox.checked=e.swapButtons,e.swapCheckbox.onclick=function(){e.swapButtons=e.swapCheckbox.checked,i.swapButtons=e.swapButtons,Squeak.Settings["squeakSettings:"+t]=JSON.stringify(i)}}}function recordModifiers(e,t){var i=e.shiftKey,r=e.ctrlKey&&!e.altKey,a=e.metaKey||e.altKey&&!e.ctrlKey,s=(i?Squeak.Keyboard_Shift:0)+(r?Squeak.Keyboard_Ctrl:0)+(a?Squeak.Keyboard_Cmd:0);return t.buttons=t.buttons&~Squeak.Keyboard_All|s,s}"undefined"!=typeof module&&null!=module&&(module.exports=LZString$1),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).JSZip=e()}}(function(){return function s(n,o,u){function l(i,e){if(!o[i]){if(!n[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(c)return c(i,!0);var r=new Error("Cannot find module '"+i+"'");throw r.code="MODULE_NOT_FOUND",r}var a=o[i]={exports:{}};n[i][0].call(a.exports,function(e){var t=n[i][1][e];return l(t||e)},a,a.exports,s,n,o,u)}return o[i].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,i){var p=e("./utils"),f=e("./support"),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(e){for(var t,i,r,a,s,n,o,u=[],l=0,c=e.length,f=c,h="string"!==p.getTypeOf(e);l<e.length;)f=c-l,r=h?(t=e[l++],i=l<c?e[l++]:0,l<c?e[l++]:0):(t=e.charCodeAt(l++),i=l<c?e.charCodeAt(l++):0,l<c?e.charCodeAt(l++):0),a=t>>2,s=(3&t)<<4|i>>4,n=1<f?(15&i)<<2|r>>6:64,o=2<f?63&r:64,u.push(d.charAt(a)+d.charAt(s)+d.charAt(n)+d.charAt(o));return u.join("")},i.decode=function(e){var t,i,r,a,s,n,o,u=0,l=0,c=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;for(e.charAt(e.length-1)===d.charAt(64)&&c--,e.charAt(e.length-2)===d.charAt(64)&&c--,o=new(f.uint8array?Uint8Array:Array)(c);u<e.length;)t=d.indexOf(e.charAt(u++))<<2|(a=d.indexOf(e.charAt(u++)))>>4,i=(15&a)<<4|(s=d.indexOf(e.charAt(u++)))>>2,r=(3&s)<<6|(n=d.indexOf(e.charAt(u++))),o[l++]=t,64!==s&&(o[l++]=i),64!==n&&(o[l++]=r);return o}},{"./support":27,"./utils":29}],2:[function(e,t,i){var r=e("./external"),a=e("./stream/DataWorker"),s=e("./stream/DataLengthProbe"),n=e("./stream/Crc32Probe");s=e("./stream/DataLengthProbe");function o(e,t,i,r,a){this.compressedSize=e,this.uncompressedSize=t,this.crc32=i,this.compression=r,this.compressedContent=a}o.prototype={getContentWorker:function(){var e=new a(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new a(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,i){return e.pipe(new n).pipe(new s("uncompressedSize")).pipe(t.compressWorker(i)).pipe(new s("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":6,"./stream/Crc32Probe":22,"./stream/DataLengthProbe":23,"./stream/DataWorker":24}],3:[function(e,t,i){var r=e("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(e){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},i.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":25}],4:[function(e,t,i){var r=e("./utils");var o=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?("string"!==r.getTypeOf(e)?function(e,t,i,r){var a=o,s=r+i;e^=-1;for(var n=r;n<s;n++)e=e>>>8^a[255&(e^t[n])];return-1^e}:function(e,t,i,r){var a=o,s=r+i;e^=-1;for(var n=r;n<s;n++)e=e>>>8^a[255&(e^t.charCodeAt(n))];return-1^e})(0|t,e,e.length,0):0}},{"./utils":29}],5:[function(e,t,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(e,t,i){var r=e("es6-promise").Promise;t.exports={Promise:r}},{"es6-promise":37}],7:[function(e,t,i){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,a=e("pako"),s=e("./utils"),n=e("./stream/GenericWorker"),o=r?"uint8array":"array";function u(e,t){n.call(this,"FlateWorker/"+e),this._pako=new a[e]({raw:!0,level:t.level||-1}),this.meta={};var i=this;this._pako.onData=function(e){i.push({data:e,meta:i.meta})}}i.magic="\b\0",s.inherits(u,n),u.prototype.processChunk=function(e){this.meta=e.meta,this._pako.push(s.transformTo(o,e.data),!1)},u.prototype.flush=function(){n.prototype.flush.call(this),this._pako.push([],!0)},u.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this._pako=null},i.compressWorker=function(e){return new u("Deflate",e)},i.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":25,"./utils":29,pako:38}],8:[function(e,t,i){function W(e,t){var i,r="";for(i=0;i<t;i++)r+=String.fromCharCode(255&e),e>>>=8;return r}function r(e,t,i,r,a,s){var n,o,u=e.file,l=e.compression,c=s!==C.utf8encode,f=A.transformTo("string",s(u.name)),h=A.transformTo("string",C.utf8encode(u.name)),p=u.comment,d=A.transformTo("string",s(p)),b=A.transformTo("string",C.utf8encode(p)),m=h.length!==u.name.length,v=b.length!==p.length,g="",k="",S="",y=u.dir,j=u.date,I={crc32:0,compressedSize:0,uncompressedSize:0};t&&!i||(I.crc32=e.crc32,I.compressedSize=e.compressedSize,I.uncompressedSize=e.uncompressedSize);var O=0;t&&(O|=8),c||!m&&!v||(O|=2048);var _,V,F,P=0,w=0;y&&(P|=16),"UNIX"===a?(w=798,P|=(_=u.unixPermissions,V=y,(F=_)||(F=V?16893:33204),(65535&F)<<16)):(w=20,P|=63&(u.dosPermissions||0)),n=j.getUTCHours(),n<<=6,n|=j.getUTCMinutes(),n<<=5,n|=j.getUTCSeconds()/2,o=j.getUTCFullYear()-1980,o<<=4,o|=j.getUTCMonth()+1,o<<=5,o|=j.getUTCDate(),m&&(k=W(1,1)+W(x(f),4)+h,g+="up"+W(k.length,2)+k),v&&(S=W(1,1)+W(x(d),4)+b,g+="uc"+W(S.length,2)+S);var T="";return T+="\n\0",T+=W(O,2),T+=l.magic,T+=W(n,2),T+=W(o,2),T+=W(I.crc32,4),T+=W(I.compressedSize,4),T+=W(I.uncompressedSize,4),T+=W(f.length,2),T+=W(g.length,2),{fileRecord:M.LOCAL_FILE_HEADER+T+f+g,dirRecord:M.CENTRAL_FILE_HEADER+W(w,2)+T+W(d.length,2)+"\0\0\0\0"+W(P,4)+W(r,4)+f+g+d}}var A=e("../utils"),a=e("../stream/GenericWorker"),C=e("../utf8"),x=e("../crc32"),M=e("../signature");function s(e,t,i,r){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=i,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}A.inherits(s,a),s.prototype.push=function(e){var t=e.meta.percent||0,i=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:i?(t+100*(i-r-1))/i:100}}))},s.prototype.openedSource=function(e){if(this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name,this.streamFiles&&!e.file.dir){var t=r(e,this.streamFiles,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:t.fileRecord,meta:{percent:0}})}else this.accumulate=!0},s.prototype.closedSource=function(e){this.accumulate=!1;var t,i=r(e,this.streamFiles,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),this.streamFiles&&!e.file.dir)this.push({data:(t=e,M.DATA_DESCRIPTOR+W(t.crc32,4)+W(t.compressedSize,4)+W(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},s.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var i,r,a,s,n,o,u=this.bytesWritten-e,l=(i=this.dirRecords.length,r=u,a=e,s=this.zipComment,n=this.encodeFileName,o=A.transformTo("string",n(s)),M.CENTRAL_DIRECTORY_END+"\0\0\0\0"+W(i,2)+W(i,2)+W(r,4)+W(a,4)+W(o.length,2)+o);this.push({data:l,meta:{percent:100}})},s.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},s.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},s.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},s.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var i=0;i<t.length;i++)try{t[i].error(e)}catch(e){}return!0},s.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=s},{"../crc32":4,"../signature":20,"../stream/GenericWorker":25,"../utf8":28,"../utils":29}],9:[function(e,t,i){var l=e("../compressions"),r=e("./ZipFileWorker");i.generateWorker=function(e,n,t){var o=new r(n.streamFiles,t,n.platform,n.encodeFileName),u=0;try{e.forEach(function(e,t){u++;var i=function(e,t){var i=e||t,r=l[i];if(!r)throw new Error(i+" is not a valid compression method !");return r}(t.options.compression,n.compression),r=t.options.compressionOptions||n.compressionOptions||{},a=t.dir,s=t.date;t._compressWorker(i,r).withStreamInfo("file",{name:e,dir:a,date:s,comment:t.comment||"",unixPermissions:t.unixPermissions,dosPermissions:t.dosPermissions}).pipe(o)}),o.entriesCount=u}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,i){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":13,"./support":27}],11:[function(e,t,i){var r=e("./utils"),a=e("./external"),o=e("./utf8"),u=(r=e("./utils"),e("./zipEntries")),s=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(r){return new a.Promise(function(e,t){var i=r.decompressed.getContentWorker().pipe(new s);i.on("error",function(e){t(e)}).on("end",function(){i.streamInfo.crc32!==r.decompressed.crc32?t(new Error("Corrupted zip : CRC32 mismatch")):e()}).resume()})}t.exports=function(e,s){var n=this;return s=r.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(e)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,s.optimizedBinaryString,s.base64).then(function(e){var t=new u(s);return t.load(e),t}).then(function(e){var t=[a.Promise.resolve(e)],i=e.files;if(s.checkCRC32)for(var r=0;r<i.length;r++)t.push(c(i[r]));return a.Promise.all(t)}).then(function(e){for(var t=e.shift(),i=t.files,r=0;r<i.length;r++){var a=i[r];n.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:s.createFolders})}return t.zipComment.length&&(n.comment=t.zipComment),n})}},{"./external":6,"./nodejsUtils":12,"./stream/Crc32Probe":22,"./utf8":28,"./utils":29,"./zipEntries":30}],12:[function(e,t,i){(function(i){t.exports={isNode:void 0!==i,newBuffer:function(e,t){return new i(e,t)},isBuffer:function(e){return i.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],13:[function(e,t,i){function s(e,t,i){var r,a=u.getTypeOf(t);(i=u.extend(i||{},c)).date=i.date||new Date,null!==i.compression&&(i.compression=i.compression.toUpperCase()),"string"==typeof i.unixPermissions&&(i.unixPermissions=parseInt(i.unixPermissions,8)),i.unixPermissions&&16384&i.unixPermissions&&(i.dir=!0),i.dosPermissions&&16&i.dosPermissions&&(i.dir=!0),i.dir&&(e=m(e)),i.createFolders&&(r=b(e))&&v.call(this,r,!0);var s="string"===a&&!1===i.binary&&!1===i.base64;i.binary=!s,(t instanceof f&&0===t.uncompressedSize||i.dir||!t||0===t.length)&&(i.base64=!1,i.binary=!0,t="",i.compression="STORE",a="string");var n=null;n=t instanceof f||t instanceof l?t:p.isNode&&p.isStream(t)?new d(e,t):u.prepareContent(e,t,i.binary,i.optimizedBinaryString,i.base64);var o=new h(e,n,i);this.files[e]=o}var a=e("./utf8"),u=e("./utils"),l=e("./stream/GenericWorker"),n=e("./stream/StreamHelper"),c=e("./defaults"),f=e("./compressedObject"),h=e("./zipObject"),o=e("./generate"),p=e("./nodejsUtils"),d=e("./nodejs/NodejsStreamInputAdapter"),b=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},v=function(e,t){return t=void 0!==t?t:c.createFolders,e=m(e),this.files[e]||s.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function g(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var r={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,i,r;for(t in this.files)this.files.hasOwnProperty(t)&&(r=this.files[t],(i=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(i,r))},filter:function(i){var r=[];return this.forEach(function(e,t){i(e,t)&&r.push(t)}),r},file:function(e,t,i){if(1!==arguments.length)return e=this.root+e,s.call(this,e,t,i),this;if(g(e)){var r=e;return this.filter(function(e,t){return!t.dir&&r.test(e)})}var a=this.files[this.root+e];return a&&!a.dir?a:null},folder:function(i){if(!i)return this;if(g(i))return this.filter(function(e,t){return t.dir&&i.test(e)});var e=this.root+i,t=v.call(this,e),r=this.clone();return r.root=t.name,r},remove:function(i){i=this.root+i;var e=this.files[i];if(e||("/"!==i.slice(-1)&&(i+="/"),e=this.files[i]),e&&!e.dir)delete this.files[i];else for(var t=this.filter(function(e,t){return t.name.slice(0,i.length)===i}),r=0;r<t.length;r++)delete this.files[t[r].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,i={};try{if((i=u.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=i.type.toLowerCase(),i.compression=i.compression.toUpperCase(),"binarystring"===i.type&&(i.type="string"),!i.type)throw new Error("No output type specified.");u.checkSupport(i.type),"darwin"!==e.platform&&"freebsd"!==e.platform&&"linux"!==e.platform&&"sunos"!==e.platform||(e.platform="UNIX"),"win32"===e.platform&&(e.platform="DOS");var r=i.comment||this.comment||"";t=o.generateWorker(this,i,r)}catch(e){(t=new l("error")).error(e)}return new n(t,i.type||"string",i.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=r},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":35,"./nodejsUtils":12,"./stream/GenericWorker":25,"./stream/StreamHelper":26,"./utf8":28,"./utils":29,"./zipObject":32}],14:[function(e,t,i){var r=e("./DataReader");function a(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(a,r),a.prototype.byteAt=function(e){return this.data[this.zero+e]},a.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),i=e.charCodeAt(1),r=e.charCodeAt(2),a=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===t&&this.data[s+1]===i&&this.data[s+2]===r&&this.data[s+3]===a)return s-this.zero;return-1},a.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),i=e.charCodeAt(1),r=e.charCodeAt(2),a=e.charCodeAt(3),s=this.readData(4);return t===s[0]&&i===s[1]&&r===s[2]&&a===s[3]},a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":29,"./DataReader":15}],15:[function(e,t,i){var r=e("../utils");function a(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,i=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)i=(i<<8)+this.byteAt(t);return this.index+=e,i},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=a},{"../utils":29}],16:[function(e,t,i){var r=e("./Uint8ArrayReader");function a(e){r.call(this,e)}e("../utils").inherits(a,r),a.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":29,"./Uint8ArrayReader":18}],17:[function(e,t,i){var r=e("./DataReader");function a(e){r.call(this,e)}e("../utils").inherits(a,r),a.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},a.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},a.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},a.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":29,"./DataReader":15}],18:[function(e,t,i){var r=e("./ArrayReader");function a(e){r.call(this,e)}e("../utils").inherits(a,r),a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":29,"./ArrayReader":14}],19:[function(e,t,i){var r=e("../utils"),a=e("../support"),s=e("./ArrayReader"),n=e("./StringReader"),o=e("./NodeBufferReader"),u=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||a.uint8array?"nodebuffer"===t?new o(e):a.uint8array?new u(r.transformTo("uint8array",e)):new s(r.transformTo("array",e)):new n(e)}},{"../support":27,"../utils":29,"./ArrayReader":14,"./NodeBufferReader":16,"./StringReader":17,"./Uint8ArrayReader":18}],20:[function(e,t,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],21:[function(e,t,i){var r=e("./GenericWorker"),a=e("../utils");function s(e){r.call(this,"ConvertWorker to "+e),this.destType=e}a.inherits(s,r),s.prototype.processChunk=function(e){this.push({data:a.transformTo(this.destType,e.data),meta:e.meta})},t.exports=s},{"../utils":29,"./GenericWorker":25}],22:[function(e,t,i){var r=e("./GenericWorker"),a=e("../crc32");function s(){r.call(this,"Crc32Probe")}e("../utils").inherits(s,r),s.prototype.processChunk=function(e){this.streamInfo.crc32=a(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=s},{"../crc32":4,"../utils":29,"./GenericWorker":25}],23:[function(e,t,i){var r=e("../utils"),a=e("./GenericWorker");function s(e){a.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(s,a),s.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}a.prototype.processChunk.call(this,e)},t.exports=s},{"../utils":29,"./GenericWorker":25}],24:[function(e,t,i){var r=e("../utils"),a=e("./GenericWorker");function s(e){a.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}r.inherits(s,a),s.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{"../utils":29,"./GenericWorker":25}],25:[function(e,t,i){function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var i=0;i<this._listeners[e].length;i++)this._listeners[e][i].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],26:[function(n,o,e){(function(u){var l=n("../utils"),a=n("./ConvertWorker"),s=n("./GenericWorker"),c=n("../base64"),t=n("../nodejs/NodejsStreamOutputAdapter"),i=n("../external");function r(e,o){return new i.Promise(function(t,i){var r=[],a=e._internalType,s=e._outputType,n=e._mimeType;e.on("data",function(e,t){r.push(e),o&&o(t)}).on("error",function(e){r=[],i(e)}).on("end",function(){try{var e=function(e,t,i){switch(e){case"blob":return l.newBlob(l.transformTo("arraybuffer",t),i);case"base64":return c.encode(t);default:return l.transformTo(e,t)}}(s,function(e,t){var i,r=0,a=null,s=0;for(i=0;i<t.length;i++)s+=t[i].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(a=new Uint8Array(s),i=0;i<t.length;i++)a.set(t[i],r),r+=t[i].length;return a;case"nodebuffer":return u.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(a,r),n);t(e)}catch(e){i(e)}r=[]}).resume()})}function e(e,t,i){var r=t;switch(t){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=t,this._mimeType=i,l.checkSupport(r),this._worker=e.pipe(new a(r)),e.lock()}catch(e){this._worker=new s("error"),this._worker.error(e)}}e.prototype={accumulate:function(e){return r(this,e)},on:function(e,t){var i=this;return"data"===e?this._worker.on(e,function(e){t.call(i,e.data,e.meta)}):this._worker.on(e,function(){l.delay(t,arguments,i)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(l.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new t(this,{objectMode:"nodebuffer"!==this._outputType},e)}},o.exports=e}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":35,"../utils":29,"./ConvertWorker":21,"./GenericWorker":25}],27:[function(r,e,a){(function(e){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,a.nodebuffer=void 0!==e,a.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)a.blob=!1;else{var t=new ArrayBuffer(0);try{a.blob=0===new Blob([t],{type:"application/zip"}).size}catch(e){try{var i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);i.append(t),a.blob=0===i.getBlob("application/zip").size}catch(e){a.blob=!1}}}a.nodestream=!!r("./nodejs/NodejsStreamOutputAdapter").prototype}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{"./nodejs/NodejsStreamOutputAdapter":35}],28:[function(e,t,s){for(var o=e("./utils"),u=e("./support"),i=e("./nodejsUtils"),r=e("./stream/GenericWorker"),l=new Array(256),a=0;a<256;a++)l[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;l[254]=l[254]=1;function n(){r.call(this,"utf-8 decode"),this.leftOver=null}function c(){r.call(this,"utf-8 encode")}s.utf8encode=function(e){return u.nodebuffer?i.newBuffer(e,"utf-8"):function(e){var t,i,r,a,s,n=e.length,o=0;for(a=0;a<n;a++)55296==(64512&(i=e.charCodeAt(a)))&&a+1<n&&56320==(64512&(r=e.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(r-56320),a++),o+=i<128?1:i<2048?2:i<65536?3:4;for(t=new(u.uint8array?Uint8Array:Array)(o),a=s=0;s<o;a++)55296==(64512&(i=e.charCodeAt(a)))&&a+1<n&&56320==(64512&(r=e.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(r-56320),a++),i<128?t[s++]=i:(i<2048?t[s++]=192|i>>>6:(i<65536?t[s++]=224|i>>>12:(t[s++]=240|i>>>18,t[s++]=128|i>>>12&63),t[s++]=128|i>>>6&63),t[s++]=128|63&i);return t}(e)},s.utf8decode=function(e){return u.nodebuffer?o.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,i,r,a,s=e.length,n=new Array(2*s);for(t=i=0;t<s;)if((r=e[t++])<128)n[i++]=r;else if(4<(a=l[r]))n[i++]=65533,t+=a-1;else{for(r&=2===a?31:3===a?15:7;1<a&&t<s;)r=r<<6|63&e[t++],a--;1<a?n[i++]=65533:r<65536?n[i++]=r:(r-=65536,n[i++]=55296|r>>10&1023,n[i++]=56320|1023&r)}return n.length!==i&&(n.subarray?n=n.subarray(0,i):n.length=i),o.applyFromCharCode(n)}(e=o.transformTo(u.uint8array?"uint8array":"array",e))},o.inherits(n,r),n.prototype.processChunk=function(e){var t=o.transformTo(u.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var i=t;(t=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),t.set(i,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var r=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return!(i<0)&&0!==i&&i+l[e[i]]>t?i:t}(t),a=t;r!==t.length&&(u.uint8array?(a=t.subarray(0,r),this.leftOver=t.subarray(r,t.length)):(a=t.slice(0,r),this.leftOver=t.slice(r,t.length))),this.push({data:s.utf8decode(a),meta:e.meta})},n.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=n,o.inherits(c,r),c.prototype.processChunk=function(e){this.push({data:s.utf8encode(e.data),meta:e.meta})},s.Utf8EncodeWorker=c},{"./nodejsUtils":12,"./stream/GenericWorker":25,"./support":27,"./utils":29}],29:[function(e,t,u){var l=e("./support"),c=e("./base64"),i=e("./nodejsUtils"),r=e("asap"),f=e("./external");function a(e){return e}function h(e,t){for(var i=0;i<e.length;++i)t[i]=255&e.charCodeAt(i);return t}u.newBlob=function(t,i){u.checkSupport("blob");try{return new Blob([t],{type:i})}catch(e){try{var r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return r.append(t),r.getBlob(i)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var s={stringifyByChunk:function(e,t,i){var r=[],a=0,s=e.length;if(s<=i)return String.fromCharCode.apply(null,e);for(;a<s;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(a,Math.min(a+i,s)))):r.push(String.fromCharCode.apply(null,e.subarray(a,Math.min(a+i,s)))),a+=i;return r.join("")},stringifyByChar:function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&1===String.fromCharCode.apply(null,i.newBuffer(1)).length}catch(e){return!1}}()}};function n(e){var t=65536,i=u.getTypeOf(e),r=!0;if("uint8array"===i?r=s.applyCanBeUsed.uint8array:"nodebuffer"===i&&(r=s.applyCanBeUsed.nodebuffer),r)for(;1<t;)try{return s.stringifyByChunk(e,i,t)}catch(e){t=Math.floor(t/2)}return s.stringifyByChar(e)}function o(e,t){for(var i=0;i<e.length;i++)t[i]=e[i];return t}u.applyFromCharCode=n;var p={};p.string={string:a,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:function(e){return h(e,i.newBuffer(e.length))}},p.array={string:n,array:a,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBuffer(e)}},p.arraybuffer={string:function(e){return n(new Uint8Array(e))},array:function(e){return o(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:a,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBuffer(new Uint8Array(e))}},p.uint8array={string:n,array:function(e){return o(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:a,nodebuffer:function(e){return i.newBuffer(e)}},p.nodebuffer={string:n,array:function(e){return o(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return o(e,new Uint8Array(e.length))},nodebuffer:a},u.transformTo=function(e,t){if(t=t||"",!e)return t;u.checkSupport(e);var i=u.getTypeOf(t);return p[i][e](t)},u.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":l.nodebuffer&&i.isBuffer(e)?"nodebuffer":l.uint8array&&e instanceof Uint8Array?"uint8array":l.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},u.checkSupport=function(e){if(!l[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},u.MAX_VALUE_16BITS=65535,u.MAX_VALUE_32BITS=-1,u.pretty=function(e){var t,i,r="";for(i=0;i<(e||"").length;i++)r+="\\x"+((t=e.charCodeAt(i))<16?"0":"")+t.toString(16).toUpperCase();return r},u.delay=function(e,t,i){r(function(){e.apply(i||null,t||[])})},u.inherits=function(e,t){function i(){}i.prototype=t.prototype,e.prototype=new i},u.extend=function(){var e,t,i={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===i[t]&&(i[t]=arguments[e][t]);return i},u.prepareContent=function(r,a,s,n,o){return(l.blob&&a instanceof Blob&&"undefined"!=typeof FileReader?new f.Promise(function(t,i){var e=new FileReader;e.onload=function(e){t(e.target.result)},e.onerror=function(e){i(e.target.error)},e.readAsArrayBuffer(a)}):f.Promise.resolve(a)).then(function(e){var t,i=u.getTypeOf(e);return i?("arraybuffer"===i?e=u.transformTo("uint8array",e):"string"===i&&(o?e=c.decode(e):s&&!0!==n&&(e=h(t=e,new(l.uint8array?Uint8Array:Array)(t.length)))),e):f.Promise.reject(new Error("The data of '"+r+"' is in an unsupported format !"))})}},{"./base64":1,"./external":6,"./nodejsUtils":12,"./support":27,asap:33}],30:[function(e,t,i){var r=e("./reader/readerFor"),a=e("./utils"),s=e("./signature"),n=e("./zipEntry"),o=(e("./utf8"),e("./support"));function u(e){this.files=[],this.loadOptions=e}u.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug : unexpected signature ("+a.pretty(t)+", expected "+a.pretty(e)+")")}},isSignature:function(e,t){var i=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(i),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=o.uint8array?"uint8array":"array",i=a.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,i,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),i=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new n({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw!this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory");this.reader.setIndex(e);var t=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var r=t-i;if(0<r)this.isSignature(t,s.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=u},{"./reader/readerFor":19,"./signature":20,"./support":27,"./utf8":28,"./utils":29,"./zipEntry":31}],31:[function(e,t,i){var r=e("./reader/readerFor"),s=e("./utils"),a=e("./compressedObject"),n=e("./crc32"),o=e("./utf8"),u=e("./compressions"),l=e("./support");function c(e,t){this.options=e,this.loadOptions=t}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,i;if(e.skip(22),this.fileNameLength=e.readInt(2),i=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(i),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in u)if(u.hasOwnProperty(t)&&u[t].magic===e)return u[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=r(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,i,r,a=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index<a;)t=e.readInt(2),i=e.readInt(2),r=e.readData(i),this.extraFields[t]={id:t,length:i,value:r}},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var i=s.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var a=s.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)?null:n(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)?null:n(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null}},t.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":19,"./support":27,"./utf8":28,"./utils":29}],32:[function(e,t,i){function r(e,t,i){this.name=e,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=t,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}}var s=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),n=e("./utf8"),o=e("./compressedObject"),u=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=e.toLowerCase(),i="string"===t||"text"===t;"binarystring"!==t&&"text"!==t||(t="string");var r=this._decompressWorker(),a=!this._dataBinary;return a&&!i&&(r=r.pipe(new n.Utf8EncodeWorker)),!a&&i&&(r=r.pipe(new n.Utf8DecodeWorker)),new s(r,t,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var i=this._decompressWorker();return this._dataBinary||(i=i.pipe(new n.Utf8EncodeWorker)),o.createWorkerFrom(i,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<l.length;f++)r.prototype[l[f]]=c;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":24,"./stream/GenericWorker":25,"./stream/StreamHelper":26,"./utf8":28}],33:[function(e,t,i){var r=e("./raw"),a=[],s=[],n=r.makeRequestCallFromTimer(function(){if(s.length)throw s.shift()});function o(e){var t;(t=a.length?a.pop():new u).task=e,r(t)}function u(){this.task=null}t.exports=o,u.prototype.call=function(){try{this.task.call()}catch(e){o.onerror?o.onerror(e):(s.push(e),n())}finally{this.task=null,a[a.length]=this}}},{"./raw":34}],34:[function(e,f,t){(function(e){function t(e){r.length||i(),r[r.length]=e}f.exports=t;var i,r=[],a=0;function s(){for(;a<r.length;){var e=a;if(a+=1,r[e].call(),1024<a){for(var t=0,i=r.length-a;t<i;t++)r[t]=r[t+a];r.length-=a,a=0}}r.length=0,a=0}var n,o,u,l=e.MutationObserver||e.WebKitMutationObserver;function c(r){return function(){var e=setTimeout(i,0),t=setInterval(i,50);function i(){clearTimeout(e),clearInterval(t),r()}}}i="function"==typeof l?(n=1,o=new l(s),u=document.createTextNode(""),o.observe(u,{characterData:!0}),function(){n=-n,u.data=n}):c(s),t.requestFlush=i,t.makeRequestCallFromTimer=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],35:[function(e,t,i){},{}],36:[function(e,t,i){var r,a=t.exports={},s=[],n=!1,o=-1;function u(){n=!1,r.length?s=r.concat(s):o=-1,s.length&&l()}function l(){if(!n){var e=setTimeout(u);n=!0;for(var t=s.length;t;){for(r=s,s=[];++o<t;)r&&r[o].run();o=-1,t=s.length}r=null,n=!1,clearTimeout(e)}}function c(e,t){this.fun=e,this.array=t}function f(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];s.push(new c(e,t)),1!==s.length||n||setTimeout(l,0)},c.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=f,a.addListener=f,a.once=f,a.off=f,a.removeListener=f,a.removeAllListeners=f,a.emit=f,a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],37:[function(z,H,e){(function(J,Z){(function(){function l(e){return"function"==typeof e}var t,i,n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,o=function(e,t){v[r]=e,v[r+1]=t,2===(r+=2)&&(i?i(g):h())};var e="undefined"!=typeof window?window:void 0,a=e||{},s=a.MutationObserver||a.WebKitMutationObserver,u=void 0!==J&&"[object process]"==={}.toString.call(J),c="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){return function(){setTimeout(g,1)}}var h,p,d,b,m,v=new Array(1e3);function g(){for(var e=0;e<r;e+=2){(0,v[e])(v[e+1]),v[e]=void 0,v[e+1]=void 0}r=0}function k(){}h=u?function(){J.nextTick(g)}:s?(d=0,b=new s(g),m=document.createTextNode(""),b.observe(m,{characterData:!0}),function(){m.data=d=++d%2}):c?((p=new MessageChannel).port1.onmessage=g,function(){p.port2.postMessage(0)}):(void 0===e&&"function"==typeof z?function(){try{var e=z("vertx");return t=e.runOnLoop||e.runOnContext,function(){t(g)}}catch(e){return f()}}:f)();var S=void 0,y=1,j=2,I=new A;function O(e,r,a){o(function(t){var i=!1,e=function(e,t,i,r){try{e.call(t,i,r)}catch(e){return e}}(a,r,function(e){i||(i=!0,(r!==e?V:P)(t,e))},function(e){i||(i=!0,w(t,e))},t._label);!i&&e&&(i=!0,w(t,e))},e)}function _(e,t){if(t.constructor===e.constructor)r=e,(a=t)._state===y?P(r,a._result):a._state===j?w(r,a._result):T(a,void 0,function(e){V(r,e)},function(e){w(r,e)});else{var i=function(e){try{return e.then}catch(e){return I.error=e,I}}(t);i===I?w(e,I.error):void 0!==i&&l(i)?O(e,t,i):P(e,t)}var r,a}function V(e,t){var i;e===t?w(e,new TypeError("You cannot resolve a promise with itself")):("function"==typeof(i=t)||"object"==typeof i&&null!==i?_:P)(e,t)}function F(e){e._onerror&&e._onerror(e._result),W(e)}function P(e,t){e._state===S&&(e._result=t,e._state=y,0!==e._subscribers.length&&o(W,e))}function w(e,t){e._state===S&&(e._state=j,e._result=t,o(F,e))}function T(e,t,i,r){var a=e._subscribers,s=a.length;e._onerror=null,a[s]=t,a[s+y]=i,a[s+j]=r,0===s&&e._state&&o(W,e)}function W(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var r,a,s=e._result,n=0;n<t.length;n+=3)r=t[n],a=t[n+i],r?x(i,r,a,s):a(s);e._subscribers.length=0}}function A(){this.error=null}var C=new A;function x(e,t,i,r){var a,s,n,o,u=l(i);if(u){if((a=function(e,t){try{return e(t)}catch(e){return C.error=e,C}}(i,r))===C?(o=!0,s=a.error,a=null):n=!0,t===a)return void w(t,new TypeError("A promises callback cannot return that same promise."))}else a=r,n=!0;t._state!==S||(u&&n?V(t,a):o?w(t,s):e===y?P(t,a):e===j&&w(t,a))}function M(e,t){var i=this;i._instanceConstructor=e,i.promise=new e(k),i._validateInput(t)?(i._input=t,i.length=t.length,i._remaining=t.length,i._init(),0===i.length?P(i.promise,i._result):(i.length=i.length||0,i._enumerate(),0===i._remaining&&P(i.promise,i._result))):w(i.promise,i._validationError())}M.prototype._validateInput=function(e){return n(e)},M.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},M.prototype._init=function(){this._result=new Array(this.length)};var q=M;M.prototype._enumerate=function(){for(var e=this.length,t=this.promise,i=this._input,r=0;t._state===S&&r<e;r++)this._eachEntry(i[r],r)},M.prototype._eachEntry=function(e,t){var i,r=this._instanceConstructor;"object"==typeof(i=e)&&null!==i?e.constructor===r&&e._state!==S?(e._onerror=null,this._settledAt(e._state,t,e._result)):this._willSettleAt(r.resolve(e),t):(this._remaining--,this._result[t]=e)},M.prototype._settledAt=function(e,t,i){var r=this.promise;r._state===S&&(this._remaining--,e===j?w(r,i):this._result[t]=i),0===this._remaining&&P(r,this._result)},M.prototype._willSettleAt=function(e,t){var i=this;T(e,void 0,function(e){i._settledAt(y,t,e)},function(e){i._settledAt(j,t,e)})};function R(e){var t=new this(k);if(!n(e))return w(t,new TypeError("You must pass an array to race.")),t;var i=e.length;function r(e){V(t,e)}function a(e){w(t,e)}for(var s=0;t._state===S&&s<i;s++)T(this.resolve(e[s]),void 0,r,a);return t}function N(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(k);return V(t,e),t}function B(e){var t=new this(k);return w(t,e),t}var E=0;var U=D;function D(e){this._id=E++,this._state=void 0,this._result=void 0,this._subscribers=[],k!==e&&(l(e)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof D||function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(t,e){try{e(function(e){V(t,e)},function(e){w(t,e)})}catch(e){w(t,e)}}(this,e))}D.all=function(e){return new q(this,e).promise},D.race=R,D.resolve=N,D.reject=B,D._setScheduler=function(e){i=e},D._setAsap=function(e){o=e},D._asap=o,D.prototype={constructor:D,then:function(e,t){var i=this._state;if(i===y&&!e||i===j&&!t)return this;var r=new this.constructor(k),a=this._result;if(i){var s=arguments[i-1];o(function(){x(i,r,s,a)})}else T(this,r,e,t);return r},catch:function(e){return this.then(null,e)}};var G=function(){var e;if(void 0!==Z)e=Z;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=U)},L={Promise:U,polyfill:G};void 0!==H&&H.exports?H.exports=L:void 0!==this&&(this.ES6Promise=L),G()}).call(this)}).call(this,z("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:36}],38:[function(e,t,i){var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,i){var n=e("./zlib/deflate"),o=e("./utils/common"),u=e("./utils/strings"),a=e("./zlib/messages"),s=e("./zlib/zstream"),l=Object.prototype.toString,c=0,f=-1,h=0,p=8;function d(e){if(!(this instanceof d))return new d(e);this.options=o.assign({level:f,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var i=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==c)throw new Error(a[i]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?u.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(i=n.deflateSetDictionary(this.strm,r))!==c)throw new Error(a[i]);this._dict_set=!0}}function r(e,t){var i=new d(t);if(i.push(e,!0),i.err)throw i.msg;return i.result}d.prototype.push=function(e,t){var i,r,a=this.strm,s=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=u.string2buf(e):"[object ArrayBuffer]"===l.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new o.Buf8(s),a.next_out=0,a.avail_out=s),1!==(i=n.deflate(a,r))&&i!==c)return this.onEnd(i),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(u.buf2binstring(o.shrinkBuf(a.output,a.next_out))):this.onData(o.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==i);return 4===r?(i=n.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===c):2!==r||(this.onEnd(c),!(a.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Deflate=d,i.deflate=r,i.deflateRaw=function(e,t){return(t=t||{}).raw=!0,r(e,t)},i.gzip=function(e,t){return(t=t||{}).gzip=!0,r(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,i){var h=e("./zlib/inflate"),p=e("./utils/common"),d=e("./utils/strings"),b=e("./zlib/constants"),r=e("./zlib/messages"),a=e("./zlib/zstream"),s=e("./zlib/gzheader"),m=Object.prototype.toString;function n(e){if(!(this instanceof n))return new n(e);this.options=p.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var i=h.inflateInit2(this.strm,t.windowBits);if(i!==b.Z_OK)throw new Error(r[i]);this.header=new s,h.inflateGetHeader(this.strm,this.header)}function o(e,t){var i=new n(t);if(i.push(e,!0),i.err)throw i.msg;return i.result}n.prototype.push=function(e,t){var i,r,a,s,n,o,u=this.strm,l=this.options.chunkSize,c=this.options.dictionary,f=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?b.Z_FINISH:b.Z_NO_FLUSH,"string"==typeof e?u.input=d.binstring2buf(e):"[object ArrayBuffer]"===m.call(e)?u.input=new Uint8Array(e):u.input=e,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new p.Buf8(l),u.next_out=0,u.avail_out=l),(i=h.inflate(u,b.Z_NO_FLUSH))===b.Z_NEED_DICT&&c&&(o="string"==typeof c?d.string2buf(c):"[object ArrayBuffer]"===m.call(c)?new Uint8Array(c):c,i=h.inflateSetDictionary(this.strm,o)),i===b.Z_BUF_ERROR&&!0===f&&(i=b.Z_OK,f=!1),i!==b.Z_STREAM_END&&i!==b.Z_OK)return this.onEnd(i),!(this.ended=!0);u.next_out&&(0!==u.avail_out&&i!==b.Z_STREAM_END&&(0!==u.avail_in||r!==b.Z_FINISH&&r!==b.Z_SYNC_FLUSH)||("string"===this.options.to?(a=d.utf8border(u.output,u.next_out),s=u.next_out-a,n=d.buf2string(u.output,a),u.next_out=s,u.avail_out=l-s,s&&p.arraySet(u.output,u.output,a,s,0),this.onData(n)):this.onData(p.shrinkBuf(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(f=!0)}while((0<u.avail_in||0===u.avail_out)&&i!==b.Z_STREAM_END);return i===b.Z_STREAM_END&&(r=b.Z_FINISH),r===b.Z_FINISH?(i=h.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===b.Z_OK):r!==b.Z_SYNC_FLUSH||(this.onEnd(b.Z_OK),!(u.avail_out=0))},n.prototype.onData=function(e){this.chunks.push(e)},n.prototype.onEnd=function(e){e===b.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=p.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Inflate=n,i.inflate=o,i.inflateRaw=function(e,t){return(t=t||{}).raw=!0,o(e,t)},i.ungzip=o},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,i){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,i,r,a){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+r),a);else for(var s=0;s<r;s++)e[a+s]=t[i+s]},flattenChunks:function(e){var t,i,r,a,s,n;for(t=r=0,i=e.length;t<i;t++)r+=e[t].length;for(n=new Uint8Array(r),t=a=0,i=e.length;t<i;t++)s=e[t],n.set(s,a),a+=s.length;return n}},s={arraySet:function(e,t,i,r,a){for(var s=0;s<r;s++)e[a+s]=t[i+s]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,s))},i.setTyped(r)},{}],42:[function(e,t,i){var u=e("./common"),a=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var l=new u.Buf8(256),r=0;r<256;r++)l[r]=252<=r?6:248<=r?5:240<=r?4:224<=r?3:192<=r?2:1;function c(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&a))return String.fromCharCode.apply(null,u.shrinkBuf(e,t));for(var i="",r=0;r<t;r++)i+=String.fromCharCode(e[r]);return i}l[254]=l[254]=1,i.string2buf=function(e){var t,i,r,a,s,n=e.length,o=0;for(a=0;a<n;a++)55296==(64512&(i=e.charCodeAt(a)))&&a+1<n&&56320==(64512&(r=e.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(r-56320),a++),o+=i<128?1:i<2048?2:i<65536?3:4;for(t=new u.Buf8(o),a=s=0;s<o;a++)55296==(64512&(i=e.charCodeAt(a)))&&a+1<n&&56320==(64512&(r=e.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(r-56320),a++),i<128?t[s++]=i:(i<2048?t[s++]=192|i>>>6:(i<65536?t[s++]=224|i>>>12:(t[s++]=240|i>>>18,t[s++]=128|i>>>12&63),t[s++]=128|i>>>6&63),t[s++]=128|63&i);return t},i.buf2binstring=function(e){return c(e,e.length)},i.binstring2buf=function(e){for(var t=new u.Buf8(e.length),i=0,r=t.length;i<r;i++)t[i]=e.charCodeAt(i);return t},i.buf2string=function(e,t){var i,r,a,s,n=t||e.length,o=new Array(2*n);for(i=r=0;i<n;)if((a=e[i++])<128)o[r++]=a;else if(4<(s=l[a]))o[r++]=65533,i+=s-1;else{for(a&=2===s?31:3===s?15:7;1<s&&i<n;)a=a<<6|63&e[i++],s--;1<s?o[r++]=65533:a<65536?o[r++]=a:(a-=65536,o[r++]=55296|a>>10&1023,o[r++]=56320|1023&a)}return c(o,r)},i.utf8border=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return!(i<0)&&0!==i&&i+l[e[i]]>t?i:t}},{"./common":41}],43:[function(e,t,i){t.exports=function(e,t,i,r){for(var a=65535&e|0,s=e>>>16&65535|0,n=0;0!==i;){for(i-=n=2e3<i?2e3:i;s=s+(a=a+t[r++]|0)|0,--n;);a%=65521,s%=65521}return a|s<<16|0}},{}],44:[function(e,t,i){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,i){var o=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();t.exports=function(e,t,i,r){var a=o,s=r+i;e^=-1;for(var n=r;n<s;n++)e=e>>>8^a[255&(e^t[n])];return-1^e}},{}],46:[function(e,t,i){var u,h=e("../utils/common"),l=e("./trees"),p=e("./adler32"),d=e("./crc32"),r=e("./messages"),c=0,f=4,b=0,m=-2,v=-1,g=4,a=2,k=8,S=9,s=286,n=30,o=19,y=2*s+1,j=15,I=3,O=258,_=O+I+1,V=42,F=113,P=1,w=2,T=3,W=4;function A(e,t){return e.msg=r[t],t}function C(e){return(e<<1)-(4<e?9:0)}function x(e){for(var t=e.length;0<=--t;)e[t]=0}function M(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(h.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function q(e,t){l._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,M(e.strm)}function R(e,t){e.pending_buf[e.pending++]=t}function N(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function B(e,t){var i,r,a=e.max_chain_length,s=e.strstart,n=e.prev_length,o=e.nice_match,u=e.strstart>e.w_size-_?e.strstart-(e.w_size-_):0,l=e.window,c=e.w_mask,f=e.prev,h=e.strstart+O,p=l[s+n-1],d=l[s+n];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(l[(i=t)+n]===d&&l[i+n-1]===p&&l[i]===l[s]&&l[++i]===l[s+1]){s+=2,i++;do{}while(l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&l[++s]===l[++i]&&s<h);if(r=O-(h-s),s=h-O,n<r){if(e.match_start=t,o<=(n=r))break;p=l[s+n-1],d=l[s+n]}}}while((t=f[t&c])>u&&0!=--a);return n<=e.lookahead?n:e.lookahead}function E(e){var t,i,r,a,s,n,o,u,l,c,f=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-_)){for(h.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=i=e.hash_size;r=e.head[--t],e.head[t]=f<=r?r-f:0,--i;);for(t=i=f;r=e.prev[--t],e.prev[t]=f<=r?r-f:0,--i;);a+=f}if(0===e.strm.avail_in)break;if(n=e.strm,o=e.window,u=e.strstart+e.lookahead,l=a,c=void 0,c=n.avail_in,l<c&&(c=l),i=0===c?0:(n.avail_in-=c,h.arraySet(o,n.input,n.next_in,c,u),1===n.state.wrap?n.adler=p(n.adler,o,c,u):2===n.state.wrap&&(n.adler=d(n.adler,o,c,u)),n.next_in+=c,n.total_in+=c,c),e.lookahead+=i,e.lookahead+e.insert>=I)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+I-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<I)););}while(e.lookahead<_&&0!==e.strm.avail_in)}function U(e,t){for(var i,r;;){if(e.lookahead<_){if(E(e),e.lookahead<_&&t===c)return P;if(0===e.lookahead)break}if(i=0,e.lookahead>=I&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-_&&(e.match_length=B(e,i)),e.match_length>=I)if(r=l._tr_tally(e,e.strstart-e.match_start,e.match_length-I),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=I){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=l._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(q(e,!1),0===e.strm.avail_out))return P}return e.insert=e.strstart<I-1?e.strstart:I-1,t===f?(q(e,!0),0===e.strm.avail_out?T:W):e.last_lit&&(q(e,!1),0===e.strm.avail_out)?P:w}function D(e,t){for(var i,r,a;;){if(e.lookahead<_){if(E(e),e.lookahead<_&&t===c)return P;if(0===e.lookahead)break}if(i=0,e.lookahead>=I&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=I-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-_&&(e.match_length=B(e,i),e.match_length<=5&&(1===e.strategy||e.match_length===I&&4096<e.strstart-e.match_start)&&(e.match_length=I-1)),e.prev_length>=I&&e.match_length<=e.prev_length){for(a=e.strstart+e.lookahead-I,r=l._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-I),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=I-1,e.strstart++,r&&(q(e,!1),0===e.strm.avail_out))return P}else if(e.match_available){if((r=l._tr_tally(e,0,e.window[e.strstart-1]))&&q(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return P}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=l._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<I-1?e.strstart:I-1,t===f?(q(e,!0),0===e.strm.avail_out?T:W):e.last_lit&&(q(e,!1),0===e.strm.avail_out)?P:w}function G(e,t,i,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=r,this.func=a}function L(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new h.Buf16(2*y),this.dyn_dtree=new h.Buf16(2*(2*n+1)),this.bl_tree=new h.Buf16(2*(2*o+1)),x(this.dyn_ltree),x(this.dyn_dtree),x(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new h.Buf16(j+1),this.heap=new h.Buf16(2*s+1),x(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new h.Buf16(2*s+1),x(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function J(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=a,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?V:F,e.adler=2===t.wrap?0:1,t.last_flush=c,l._tr_init(t),b):A(e,m)}function Z(e){var t,i=J(e);return i===b&&((t=e.state).window_size=2*t.w_size,x(t.head),t.max_lazy_match=u[t.level].max_lazy,t.good_match=u[t.level].good_length,t.nice_match=u[t.level].nice_length,t.max_chain_length=u[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=I-1,t.match_available=0,t.ins_h=0),i}function z(e,t,i,r,a,s){if(!e)return m;var n=1;if(t===v&&(t=6),r<0?(n=0,r=-r):15<r&&(n=2,r-=16),a<1||S<a||i!==k||r<8||15<r||t<0||9<t||s<0||g<s)return A(e,m);8===r&&(r=9);var o=new L;return(e.state=o).strm=e,o.wrap=n,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+I-1)/I),o.window=new h.Buf8(2*o.w_size),o.head=new h.Buf16(o.hash_size),o.prev=new h.Buf16(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new h.Buf8(o.pending_buf_size),o.d_buf=o.lit_bufsize>>1,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=s,o.method=i,Z(e)}u=[new G(0,0,0,0,function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(E(e),0===e.lookahead&&t===c)return P;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+i;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,q(e,!1),0===e.strm.avail_out))return P;if(e.strstart-e.block_start>=e.w_size-_&&(q(e,!1),0===e.strm.avail_out))return P}return e.insert=0,t===f?(q(e,!0),0===e.strm.avail_out?T:W):(e.strstart>e.block_start&&(q(e,!1),e.strm.avail_out),P)}),new G(4,4,8,4,U),new G(4,5,16,8,U),new G(4,6,32,32,U),new G(4,4,16,16,D),new G(8,16,32,32,D),new G(8,16,128,128,D),new G(8,32,128,256,D),new G(32,128,258,1024,D),new G(32,258,258,4096,D)],i.deflateInit=function(e,t){return z(e,t,k,15,8,0)},i.deflateInit2=z,i.deflateReset=Z,i.deflateResetKeep=J,i.deflateSetHeader=function(e,t){return!e||!e.state||2!==e.state.wrap?m:(e.state.gzhead=t,b)},i.deflate=function(e,t){var i,r,a,s;if(!e||!e.state||5<t||t<0)return e?A(e,m):m;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||666===r.status&&t!==f)return A(e,0===e.avail_out?-5:m);if(r.strm=e,i=r.last_flush,r.last_flush=t,r.status===V)if(2===r.wrap)e.adler=0,R(r,31),R(r,139),R(r,8),r.gzhead?(R(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),R(r,255&r.gzhead.time),R(r,r.gzhead.time>>8&255),R(r,r.gzhead.time>>16&255),R(r,r.gzhead.time>>24&255),R(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),R(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(R(r,255&r.gzhead.extra.length),R(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=d(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(R(r,0),R(r,0),R(r,0),R(r,0),R(r,0),R(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),R(r,3),r.status=F);else{var n=k+(r.w_bits-8<<4)<<8;n|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(n|=32),n+=31-n%31,r.status=F,N(r,n),0!==r.strstart&&(N(r,e.adler>>>16),N(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(e.adler=d(e.adler,r.pending_buf,r.pending-a,a)),M(e),a=r.pending,r.pending!==r.pending_buf_size));)R(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(e.adler=d(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(e.adler=d(e.adler,r.pending_buf,r.pending-a,a)),M(e),a=r.pending,r.pending===r.pending_buf_size)){s=1;break}s=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,R(r,s)}while(0!==s);r.gzhead.hcrc&&r.pending>a&&(e.adler=d(e.adler,r.pending_buf,r.pending-a,a)),0===s&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(e.adler=d(e.adler,r.pending_buf,r.pending-a,a)),M(e),a=r.pending,r.pending===r.pending_buf_size)){s=1;break}s=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,R(r,s)}while(0!==s);r.gzhead.hcrc&&r.pending>a&&(e.adler=d(e.adler,r.pending_buf,r.pending-a,a)),0===s&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&M(e),r.pending+2<=r.pending_buf_size&&(R(r,255&e.adler),R(r,e.adler>>8&255),e.adler=0,r.status=F)):r.status=F),0!==r.pending){if(M(e),0===e.avail_out)return r.last_flush=-1,b}else if(0===e.avail_in&&C(t)<=C(i)&&t!==f)return A(e,-5);if(666===r.status&&0!==e.avail_in)return A(e,-5);if(0!==e.avail_in||0!==r.lookahead||t!==c&&666!==r.status){var o=2===r.strategy?function(e,t){for(var i;;){if(0===e.lookahead&&(E(e),0===e.lookahead)){if(t===c)return P;break}if(e.match_length=0,i=l._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(q(e,!1),0===e.strm.avail_out))return P}return e.insert=0,t===f?(q(e,!0),0===e.strm.avail_out?T:W):e.last_lit&&(q(e,!1),0===e.strm.avail_out)?P:w}(r,t):3===r.strategy?function(e,t){for(var i,r,a,s,n=e.window;;){if(e.lookahead<=O){if(E(e),e.lookahead<=O&&t===c)return P;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=I&&0<e.strstart&&(r=n[a=e.strstart-1])===n[++a]&&r===n[++a]&&r===n[++a]){s=e.strstart+O;do{}while(r===n[++a]&&r===n[++a]&&r===n[++a]&&r===n[++a]&&r===n[++a]&&r===n[++a]&&r===n[++a]&&r===n[++a]&&a<s);e.match_length=O-(s-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=I?(i=l._tr_tally(e,1,e.match_length-I),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=l._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(q(e,!1),0===e.strm.avail_out))return P}return e.insert=0,t===f?(q(e,!0),0===e.strm.avail_out?T:W):e.last_lit&&(q(e,!1),0===e.strm.avail_out)?P:w}(r,t):u[r.level].func(r,t);if(o!==T&&o!==W||(r.status=666),o===P||o===T)return 0===e.avail_out&&(r.last_flush=-1),b;if(o===w&&(1===t?l._tr_align(r):5!==t&&(l._tr_stored_block(r,0,0,!1),3===t&&(x(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),M(e),0===e.avail_out))return r.last_flush=-1,b}return t!==f?b:r.wrap<=0?1:(2===r.wrap?(R(r,255&e.adler),R(r,e.adler>>8&255),R(r,e.adler>>16&255),R(r,e.adler>>24&255),R(r,255&e.total_in),R(r,e.total_in>>8&255),R(r,e.total_in>>16&255),R(r,e.total_in>>24&255)):(N(r,e.adler>>>16),N(r,65535&e.adler)),M(e),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?b:1)},i.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==V&&69!==t&&73!==t&&91!==t&&103!==t&&t!==F&&666!==t?A(e,m):(e.state=null,t===F?A(e,-3):b):m},i.deflateSetDictionary=function(e,t){var i,r,a,s,n,o,u,l,c=t.length;if(!e||!e.state)return m;if(2===(s=(i=e.state).wrap)||1===s&&i.status!==V||i.lookahead)return m;for(1===s&&(e.adler=p(e.adler,t,c,0)),i.wrap=0,c>=i.w_size&&(0===s&&(x(i.head),i.strstart=0,i.block_start=0,i.insert=0),l=new h.Buf8(i.w_size),h.arraySet(l,t,c-i.w_size,i.w_size,0),t=l,c=i.w_size),n=e.avail_in,o=e.next_in,u=e.input,e.avail_in=c,e.next_in=0,e.input=t,E(i);i.lookahead>=I;){for(r=i.strstart,a=i.lookahead-(I-1);i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+I-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++,--a;);i.strstart=r,i.lookahead=I-1,E(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=I-1,i.match_available=0,e.next_in=o,e.input=u,e.avail_in=n,i.wrap=s,b},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,i){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,i){t.exports=function(e,t){var i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y,j,I,O,_,V;i=e.state,r=e.next_in,_=e.input,a=r+(e.avail_in-5),s=e.next_out,V=e.output,n=s-(t-e.avail_out),o=s+(e.avail_out-257),u=i.dmax,l=i.wsize,c=i.whave,f=i.wnext,h=i.window,p=i.hold,d=i.bits,b=i.lencode,m=i.distcode,v=(1<<i.lenbits)-1,g=(1<<i.distbits)-1;e:do{d<15&&(p+=_[r++]<<d,d+=8,p+=_[r++]<<d,d+=8),k=b[p&v];t:for(;;){if(p>>>=S=k>>>24,d-=S,0===(S=k>>>16&255))V[s++]=65535&k;else{if(!(16&S)){if(0==(64&S)){k=b[(65535&k)+(p&(1<<S)-1)];continue t}if(32&S){i.mode=12;break e}e.msg="invalid literal/length code",i.mode=30;break e}y=65535&k,(S&=15)&&(d<S&&(p+=_[r++]<<d,d+=8),y+=p&(1<<S)-1,p>>>=S,d-=S),d<15&&(p+=_[r++]<<d,d+=8,p+=_[r++]<<d,d+=8),k=m[p&g];i:for(;;){if(p>>>=S=k>>>24,d-=S,!(16&(S=k>>>16&255))){if(0==(64&S)){k=m[(65535&k)+(p&(1<<S)-1)];continue i}e.msg="invalid distance code",i.mode=30;break e}if(j=65535&k,d<(S&=15)&&(p+=_[r++]<<d,(d+=8)<S&&(p+=_[r++]<<d,d+=8)),u<(j+=p&(1<<S)-1)){e.msg="invalid distance too far back",i.mode=30;break e}if(p>>>=S,d-=S,(S=s-n)<j){if(c<(S=j-S)&&i.sane){e.msg="invalid distance too far back",i.mode=30;break e}if(O=h,(I=0)===f){if(I+=l-S,S<y){for(y-=S;V[s++]=h[I++],--S;);I=s-j,O=V}}else if(f<S){if(I+=l+f-S,(S-=f)<y){for(y-=S;V[s++]=h[I++],--S;);if(I=0,f<y){for(y-=S=f;V[s++]=h[I++],--S;);I=s-j,O=V}}}else if(I+=f-S,S<y){for(y-=S;V[s++]=h[I++],--S;);I=s-j,O=V}for(;2<y;)V[s++]=O[I++],V[s++]=O[I++],V[s++]=O[I++],y-=3;y&&(V[s++]=O[I++],1<y&&(V[s++]=O[I++]))}else{for(I=s-j;V[s++]=V[I++],V[s++]=V[I++],V[s++]=V[I++],2<(y-=3););y&&(V[s++]=V[I++],1<y&&(V[s++]=V[I++]))}break}}break}}while(r<a&&s<o);r-=y=d>>3,p&=(1<<(d-=y<<3))-1,e.next_in=r,e.next_out=s,e.avail_in=r<a?a-r+5:5-(r-a),e.avail_out=s<o?o-s+257:257-(s-o),i.hold=p,i.bits=d}},{}],49:[function(e,t,i){var w=e("../utils/common"),T=e("./adler32"),W=e("./crc32"),A=e("./inffast"),C=e("./inftrees"),x=1,M=2,q=0,R=-2,N=1,r=852,a=592;function B(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function s(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new w.Buf16(320),this.work=new w.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function n(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=N,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new w.Buf32(r),t.distcode=t.distdyn=new w.Buf32(a),t.sane=1,t.back=-1,q):R}function o(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,n(e)):R}function u(e,t){var i,r;return e&&e.state?(r=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?R:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=i,r.wbits=t,o(e))):R}function l(e,t){var i,r;return e?(r=new s,(e.state=r).window=null,(i=u(e,t))!==q&&(e.state=null),i):R}var c,f,h=!0;function E(e){if(h){var t;for(c=new w.Buf32(512),f=new w.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(C(x,e.lens,0,288,c,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;C(M,e.lens,0,32,f,0,e.work,{bits:5}),h=!1}e.lencode=c,e.lenbits=9,e.distcode=f,e.distbits=5}function U(e,t,i,r){var a,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new w.Buf8(s.wsize)),r>=s.wsize?(w.arraySet(s.window,t,i-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(r<(a=s.wsize-s.wnext)&&(a=r),w.arraySet(s.window,t,i-r,a,s.wnext),(r-=a)?(w.arraySet(s.window,t,i-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0}i.inflateReset=o,i.inflateReset2=u,i.inflateResetKeep=n,i.inflateInit=function(e){return l(e,15)},i.inflateInit2=l,i.inflate=function(e,t){var i,r,a,s,n,o,u,l,c,f,h,p,d,b,m,v,g,k,S,y,j,I,O,_,V=0,F=new w.Buf8(4),P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return R;12===(i=e.state).mode&&(i.mode=13),n=e.next_out,a=e.output,u=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,l=i.hold,c=i.bits,f=o,h=u,I=q;e:for(;;)switch(i.mode){case N:if(0===i.wrap){i.mode=13;break}for(;c<16;){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}if(2&i.wrap&&35615===l){F[i.check=0]=255&l,F[1]=l>>>8&255,i.check=W(i.check,F,2,0),c=l=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",i.mode=30;break}if(8!=(15&l)){e.msg="unknown compression method",i.mode=30;break}if(c-=4,j=8+(15&(l>>>=4)),0===i.wbits)i.wbits=j;else if(j>i.wbits){e.msg="invalid window size",i.mode=30;break}i.dmax=1<<j,e.adler=i.check=1,i.mode=512&l?10:12,c=l=0;break;case 2:for(;c<16;){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}if(i.flags=l,8!=(255&i.flags)){e.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=l>>8&1),512&i.flags&&(F[0]=255&l,F[1]=l>>>8&255,i.check=W(i.check,F,2,0)),c=l=0,i.mode=3;case 3:for(;c<32;){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}i.head&&(i.head.time=l),512&i.flags&&(F[0]=255&l,F[1]=l>>>8&255,F[2]=l>>>16&255,F[3]=l>>>24&255,i.check=W(i.check,F,4,0)),c=l=0,i.mode=4;case 4:for(;c<16;){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}i.head&&(i.head.xflags=255&l,i.head.os=l>>8),512&i.flags&&(F[0]=255&l,F[1]=l>>>8&255,i.check=W(i.check,F,2,0)),c=l=0,i.mode=5;case 5:if(1024&i.flags){for(;c<16;){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}i.length=l,i.head&&(i.head.extra_len=l),512&i.flags&&(F[0]=255&l,F[1]=l>>>8&255,i.check=W(i.check,F,2,0)),c=l=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(o<(p=i.length)&&(p=o),p&&(i.head&&(j=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),w.arraySet(i.head.extra,r,s,p,j)),512&i.flags&&(i.check=W(i.check,r,p,s)),o-=p,s+=p,i.length-=p),i.length))break e;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===o)break e;for(p=0;j=r[s+p++],i.head&&j&&i.length<65536&&(i.head.name+=String.fromCharCode(j)),j&&p<o;);if(512&i.flags&&(i.check=W(i.check,r,p,s)),o-=p,s+=p,j)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===o)break e;for(p=0;j=r[s+p++],i.head&&j&&i.length<65536&&(i.head.comment+=String.fromCharCode(j)),j&&p<o;);if(512&i.flags&&(i.check=W(i.check,r,p,s)),o-=p,s+=p,j)break e}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;c<16;){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}if(l!==(65535&i.check)){e.msg="header crc mismatch",i.mode=30;break}c=l=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=12;break;case 10:for(;c<32;){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}e.adler=i.check=B(l),c=l=0,i.mode=11;case 11:if(0===i.havedict)return e.next_out=n,e.avail_out=u,e.next_in=s,e.avail_in=o,i.hold=l,i.bits=c,2;e.adler=i.check=1,i.mode=12;case 12:if(5===t||6===t)break e;case 13:if(i.last){l>>>=7&c,c-=7&c,i.mode=27;break}for(;c<3;){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}switch(i.last=1&l,--c,3&(l>>>=1)){case 0:i.mode=14;break;case 1:if(E(i),i.mode=20,6!==t)break;l>>>=2,c-=2;break e;case 2:i.mode=17;break;case 3:e.msg="invalid block type",i.mode=30}l>>>=2,c-=2;break;case 14:for(l>>>=7&c,c-=7&c;c<32;){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&l,c=l=0,i.mode=15,6===t)break e;case 15:i.mode=16;case 16:if(p=i.length){if(o<p&&(p=o),u<p&&(p=u),0===p)break e;w.arraySet(a,r,s,p,n),o-=p,s+=p,u-=p,n+=p,i.length-=p;break}i.mode=12;break;case 17:for(;c<14;){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}if(i.nlen=257+(31&l),l>>>=5,c-=5,i.ndist=1+(31&l),l>>>=5,c-=5,i.ncode=4+(15&l),l>>>=4,c-=4,286<i.nlen||30<i.ndist){e.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;c<3;){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}i.lens[P[i.have++]]=7&l,l>>>=3,c-=3}for(;i.have<19;)i.lens[P[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,O={bits:i.lenbits},I=C(0,i.lens,0,19,i.lencode,0,i.work,O),i.lenbits=O.bits,I){e.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;v=(V=i.lencode[l&(1<<i.lenbits)-1])>>>16&255,g=65535&V,!((m=V>>>24)<=c);){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}if(g<16)l>>>=m,c-=m,i.lens[i.have++]=g;else{if(16===g){for(_=m+2;c<_;){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}if(l>>>=m,c-=m,0===i.have){e.msg="invalid bit length repeat",i.mode=30;break}j=i.lens[i.have-1],p=3+(3&l),l>>>=2,c-=2}else if(17===g){for(_=m+3;c<_;){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}c-=m,j=0,p=3+(7&(l>>>=m)),l>>>=3,c-=3}else{for(_=m+7;c<_;){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}c-=m,j=0,p=11+(127&(l>>>=m)),l>>>=7,c-=7}if(i.have+p>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=30;break}for(;p--;)i.lens[i.have++]=j}}if(30===i.mode)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,O={bits:i.lenbits},I=C(x,i.lens,0,i.nlen,i.lencode,0,i.work,O),i.lenbits=O.bits,I){e.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,O={bits:i.distbits},I=C(M,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,O),i.distbits=O.bits,I){e.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===t)break e;case 20:i.mode=21;case 21:if(6<=o&&258<=u){e.next_out=n,e.avail_out=u,e.next_in=s,e.avail_in=o,i.hold=l,i.bits=c,A(e,h),n=e.next_out,a=e.output,u=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,l=i.hold,c=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;v=(V=i.lencode[l&(1<<i.lenbits)-1])>>>16&255,g=65535&V,!((m=V>>>24)<=c);){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}if(v&&0==(240&v)){for(k=m,S=v,y=g;v=(V=i.lencode[y+((l&(1<<k+S)-1)>>k)])>>>16&255,g=65535&V,!(k+(m=V>>>24)<=c);){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}l>>>=k,c-=k,i.back+=k}if(l>>>=m,c-=m,i.back+=m,i.length=g,0===v){i.mode=26;break}if(32&v){i.back=-1,i.mode=12;break}if(64&v){e.msg="invalid literal/length code",i.mode=30;break}i.extra=15&v,i.mode=22;case 22:if(i.extra){for(_=i.extra;c<_;){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}i.length+=l&(1<<i.extra)-1,l>>>=i.extra,c-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;v=(V=i.distcode[l&(1<<i.distbits)-1])>>>16&255,g=65535&V,!((m=V>>>24)<=c);){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}if(0==(240&v)){for(k=m,S=v,y=g;v=(V=i.distcode[y+((l&(1<<k+S)-1)>>k)])>>>16&255,g=65535&V,!(k+(m=V>>>24)<=c);){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}l>>>=k,c-=k,i.back+=k}if(l>>>=m,c-=m,i.back+=m,64&v){e.msg="invalid distance code",i.mode=30;break}i.offset=g,i.extra=15&v,i.mode=24;case 24:if(i.extra){for(_=i.extra;c<_;){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}i.offset+=l&(1<<i.extra)-1,l>>>=i.extra,c-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===u)break e;if(p=h-u,i.offset>p){if((p=i.offset-p)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=30;break}d=p>i.wnext?(p-=i.wnext,i.wsize-p):i.wnext-p,p>i.length&&(p=i.length),b=i.window}else b=a,d=n-i.offset,p=i.length;for(u<p&&(p=u),u-=p,i.length-=p;a[n++]=b[d++],--p;);0===i.length&&(i.mode=21);break;case 26:if(0===u)break e;a[n++]=i.length,u--,i.mode=21;break;case 27:if(i.wrap){for(;c<32;){if(0===o)break e;o--,l|=r[s++]<<c,c+=8}if(h-=u,e.total_out+=h,i.total+=h,h&&(e.adler=i.check=(i.flags?W:T)(i.check,a,h,n-h)),h=u,(i.flags?l:B(l))!==i.check){e.msg="incorrect data check",i.mode=30;break}c=l=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;c<32;){if(0===o)break e;o--,l+=r[s++]<<c,c+=8}if(l!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=30;break}c=l=0}i.mode=29;case 29:I=1;break e;case 30:I=-3;break e;case 31:return-4;case 32:default:return R}return e.next_out=n,e.avail_out=u,e.next_in=s,e.avail_in=o,i.hold=l,i.bits=c,(i.wsize||h!==e.avail_out&&i.mode<30&&(i.mode<27||4!==t))&&U(e,e.output,e.next_out,h-e.avail_out),f-=e.avail_in,h-=e.avail_out,e.total_in+=f,e.total_out+=h,i.total+=h,i.wrap&&h&&(e.adler=i.check=(i.flags?W:T)(i.check,a,h,e.next_out-h)),e.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0==f&&0===h||4===t)&&I===q&&(I=-5),I},i.inflateEnd=function(e){if(!e||!e.state)return R;var t=e.state;return t.window&&(t.window=null),e.state=null,q},i.inflateGetHeader=function(e,t){var i;return!e||!e.state||0==(2&(i=e.state).wrap)?R:((i.head=t).done=!1,q)},i.inflateSetDictionary=function(e,t){var i,r=t.length;return!e||!e.state||0!==(i=e.state).wrap&&11!==i.mode?R:11===i.mode&&T(1,t,r,0)!==i.check?-3:U(e,t,r,r)?(i.mode=31,-4):(i.havedict=1,q)},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,i){var x=e("../utils/common"),M=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],q=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],R=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],N=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,i,r,a,s,n,o){var u,l,c,f,h,p,d,b,m,v=o.bits,g=0,k=0,S=0,y=0,j=0,I=0,O=0,_=0,V=0,F=0,P=null,w=0,T=new x.Buf16(16),W=new x.Buf16(16),A=null,C=0;for(g=0;g<=15;g++)T[g]=0;for(k=0;k<r;k++)T[t[i+k]]++;for(j=v,y=15;1<=y&&0===T[y];y--);if(y<j&&(j=y),0===y)return a[s++]=20971520,a[s++]=20971520,o.bits=1,0;for(S=1;S<y&&0===T[S];S++);for(j<S&&(j=S),g=_=1;g<=15;g++)if(_<<=1,(_-=T[g])<0)return-1;if(0<_&&(0===e||1!==y))return-1;for(W[1]=0,g=1;g<15;g++)W[g+1]=W[g]+T[g];for(k=0;k<r;k++)0!==t[i+k]&&(n[W[t[i+k]]++]=k);if(p=0===e?(P=A=n,19):1===e?(P=M,w-=257,A=q,C-=257,256):(P=R,A=N,-1),g=S,h=s,O=k=F=0,c=-1,f=(V=1<<(I=j))-1,1===e&&852<V||2===e&&592<V)return 1;for(;;){for(d=g-O,m=n[k]<p?(b=0,n[k]):n[k]>p?(b=A[C+n[k]],P[w+n[k]]):(b=96,0),u=1<<g-O,S=l=1<<I;a[h+(F>>O)+(l-=u)]=d<<24|b<<16|m|0,0!==l;);for(u=1<<g-1;F&u;)u>>=1;if(0!==u?(F&=u-1,F+=u):F=0,k++,0==--T[g]){if(g===y)break;g=t[i+n[k]]}if(j<g&&(F&f)!==c){for(0===O&&(O=j),h+=S,_=1<<(I=g-O);I+O<y&&!((_-=T[I+O])<=0);)I++,_<<=1;if(V+=1<<I,1===e&&852<V||2===e&&592<V)return 1;a[c=F&f]=j<<24|I<<16|h-s|0}}return 0!==F&&(a[h+F]=g-O<<24|64<<16|0),o.bits=j,0}},{"../utils/common":41}],51:[function(e,t,i){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,i){var u=e("../utils/common"),o=0,l=1;function r(e){for(var t=e.length;0<=--t;)e[t]=0}var c=0,n=29,f=256,h=f+1+n,p=30,d=19,m=2*h+1,v=15,a=16,b=7,g=256,k=16,S=17,y=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],_=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(h+2));r(V);var F=new Array(2*p);r(F);var P=new Array(512);r(P);var w=new Array(256);r(w);var T=new Array(n);r(T);var W,A,C,x=new Array(p);function M(e,t,i,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function s(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function q(e){return e<256?P[e]:P[256+(e>>>7)]}function R(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function N(e,t,i){e.bi_valid>a-i?(e.bi_buf|=t<<e.bi_valid&65535,R(e,e.bi_buf),e.bi_buf=t>>a-e.bi_valid,e.bi_valid+=i-a):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function B(e,t,i){N(e,i[2*t],i[2*t+1])}function E(e,t){for(var i=0;i|=1&e,e>>>=1,i<<=1,0<--t;);return i>>>1}function U(e,t,i){var r,a,s=new Array(v+1),n=0;for(r=1;r<=v;r++)s[r]=n=n+i[r-1]<<1;for(a=0;a<=t;a++){var o=e[2*a+1];0!==o&&(e[2*a]=E(s[o]++,o))}}function D(e){var t;for(t=0;t<h;t++)e.dyn_ltree[2*t]=0;for(t=0;t<p;t++)e.dyn_dtree[2*t]=0;for(t=0;t<d;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*g]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function G(e){8<e.bi_valid?R(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function L(e,t,i,r){var a=2*t,s=2*i;return e[a]<e[s]||e[a]===e[s]&&r[t]<=r[i]}function J(e,t,i){for(var r=e.heap[i],a=i<<1;a<=e.heap_len&&(a<e.heap_len&&L(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!L(t,r,e.heap[a],e.depth));)e.heap[i]=e.heap[a],i=a,a<<=1;e.heap[i]=r}function Z(e,t,i){var r,a,s,n,o=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],a=e.pending_buf[e.l_buf+o],o++,0===r?B(e,a,t):(B(e,(s=w[a])+f+1,t),0!==(n=j[s])&&N(e,a-=T[s],n),B(e,s=q(--r),i),0!==(n=I[s])&&N(e,r-=x[s],n)),o<e.last_lit;);B(e,g,t)}function z(e,t){var i,r,a,s=t.dyn_tree,n=t.stat_desc.static_tree,o=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=m,i=0;i<u;i++)0!==s[2*i]?(e.heap[++e.heap_len]=l=i,e.depth[i]=0):s[2*i+1]=0;for(;e.heap_len<2;)s[2*(a=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[a]=0,e.opt_len--,o&&(e.static_len-=n[2*a+1]);for(t.max_code=l,i=e.heap_len>>1;1<=i;i--)J(e,s,i);for(a=u;i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],J(e,s,1),r=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=r,s[2*a]=s[2*i]+s[2*r],e.depth[a]=(e.depth[i]>=e.depth[r]?e.depth[i]:e.depth[r])+1,s[2*i+1]=s[2*r+1]=a,e.heap[1]=a++,J(e,s,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var i,r,a,s,n,o,u=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,f=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,d=t.stat_desc.max_length,b=0;for(s=0;s<=v;s++)e.bl_count[s]=0;for(u[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;i<m;i++)d<(s=u[2*u[2*(r=e.heap[i])+1]+1]+1)&&(s=d,b++),u[2*r+1]=s,l<r||(e.bl_count[s]++,n=0,p<=r&&(n=h[r-p]),o=u[2*r],e.opt_len+=o*(s+n),f&&(e.static_len+=o*(c[2*r+1]+n)));if(0!==b){do{for(s=d-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[d]--,b-=2}while(0<b);for(s=d;0!==s;s--)for(r=e.bl_count[s];0!==r;)l<(a=e.heap[--i])||(u[2*a+1]!==s&&(e.opt_len+=(s-u[2*a+1])*u[2*a],u[2*a+1]=s),r--)}}(e,t),U(s,l,e.bl_count)}function H(e,t,i){var r,a,s=-1,n=t[1],o=0,u=7,l=4;for(0===n&&(u=138,l=3),t[2*(i+1)+1]=65535,r=0;r<=i;r++)a=n,n=t[2*(r+1)+1],++o<u&&a===n||(o<l?e.bl_tree[2*a]+=o:0!==a?(a!==s&&e.bl_tree[2*a]++,e.bl_tree[2*k]++):o<=10?e.bl_tree[2*S]++:e.bl_tree[2*y]++,s=a,l=(o=0)===n?(u=138,3):a===n?(u=6,3):(u=7,4))}function Q(e,t,i){var r,a,s=-1,n=t[1],o=0,u=7,l=4;for(0===n&&(u=138,l=3),r=0;r<=i;r++)if(a=n,n=t[2*(r+1)+1],!(++o<u&&a===n)){if(o<l)for(;B(e,a,e.bl_tree),0!=--o;);else 0!==a?(a!==s&&(B(e,a,e.bl_tree),o--),B(e,k,e.bl_tree),N(e,o-3,2)):o<=10?(B(e,S,e.bl_tree),N(e,o-3,3)):(B(e,y,e.bl_tree),N(e,o-11,7));s=a,l=(o=0)===n?(u=138,3):a===n?(u=6,3):(u=7,4)}}r(x);var X=!1;function Y(e,t,i,r){var a,s,n,o;N(e,(c<<1)+(r?1:0),3),s=t,n=i,o=!0,G(a=e),o&&(R(a,n),R(a,~n)),u.arraySet(a.pending_buf,a.window,s,n,a.pending),a.pending+=n}i._tr_init=function(e){X||(function(){var e,t,i,r,a,s=new Array(v+1);for(r=i=0;r<n-1;r++)for(T[r]=i,e=0;e<1<<j[r];e++)w[i++]=r;for(w[i-1]=r,r=a=0;r<16;r++)for(x[r]=a,e=0;e<1<<I[r];e++)P[a++]=r;for(a>>=7;r<p;r++)for(x[r]=a<<7,e=0;e<1<<I[r]-7;e++)P[256+a++]=r;for(t=0;t<=v;t++)s[t]=0;for(e=0;e<=143;)V[2*e+1]=8,e++,s[8]++;for(;e<=255;)V[2*e+1]=9,e++,s[9]++;for(;e<=279;)V[2*e+1]=7,e++,s[7]++;for(;e<=287;)V[2*e+1]=8,e++,s[8]++;for(U(V,h+1,s),e=0;e<p;e++)F[2*e+1]=5,F[2*e]=E(e,5);W=new M(V,j,f+1,h,v),A=new M(F,I,0,p,v),C=new M(new Array(0),O,0,d,b)}(),X=!0),e.l_desc=new s(e.dyn_ltree,W),e.d_desc=new s(e.dyn_dtree,A),e.bl_desc=new s(e.bl_tree,C),e.bi_buf=0,e.bi_valid=0,D(e)},i._tr_stored_block=Y,i._tr_flush_block=function(e,t,i,r){var a,s,n=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return o;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return l;for(t=32;t<f;t++)if(0!==e.dyn_ltree[2*t])return l;return o}(e)),z(e,e.l_desc),z(e,e.d_desc),n=function(e){var t;for(H(e,e.dyn_ltree,e.l_desc.max_code),H(e,e.dyn_dtree,e.d_desc.max_code),z(e,e.bl_desc),t=d-1;3<=t&&0===e.bl_tree[2*_[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=a&&(a=s)):a=s=i+5,i+4<=a&&-1!==t?Y(e,t,i,r):4===e.strategy||s===a?(N(e,2+(r?1:0),3),Z(e,V,F)):(N(e,4+(r?1:0),3),function(e,t,i,r){var a;for(N(e,t-257,5),N(e,i-1,5),N(e,r-4,4),a=0;a<r;a++)N(e,e.bl_tree[2*_[a]+1],3);Q(e,e.dyn_ltree,t-1),Q(e,e.dyn_dtree,i-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,n+1),Z(e,e.dyn_ltree,e.dyn_dtree)),D(e),r&&G(e)},i._tr_tally=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(w[i]+f+1)]++,e.dyn_dtree[2*q(t)]++),e.last_lit===e.lit_bufsize-1},i._tr_align=function(e){var t;N(e,2,3),B(e,g,V),16===(t=e).bi_valid?(R(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,t,i){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}]},{},[10])(10)}),function(o){if(!(void 0===o||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=o.document,u=function(){return o.URL||o.webkitURL||o},l=e.createElementNS("http://www.w3.org/1999/xhtml","a"),c="download"in l,f=/constructor/i.test(o.HTMLElement)||o.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent),p=o.setImmediate||o.setTimeout,d=function(e){p(function(){throw e},0)},b=function(e){setTimeout(function(){"string"==typeof e?u().revokeObjectURL(e):e.remove()},4e4)},m=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},r=function(e,i,t){t||(e=m(e));function r(){!function(e,t,i){for(var r=(t=[].concat(t)).length;r--;){var a=e["on"+t[r]];if("function"==typeof a)try{a.call(e,i||e)}catch(e){d(e)}}}(s,"writestart progress write writeend".split(" "))}var a,s=this,n="application/octet-stream"===e.type;if(s.readyState=s.INIT,c)return a=u().createObjectURL(e),void p(function(){var e,t;l.href=a,l.download=i,e=l,t=new MouseEvent("click"),e.dispatchEvent(t),r(),b(a),s.readyState=s.DONE},0);!function(){if((h||n&&f)&&o.FileReader){var t=new FileReader;return t.onloadend=function(){var e=h?t.result:t.result.replace(/^data:[^;]*;/,"data:attachment/file;");o.open(e,"_blank")||(o.location.href=e),e=void 0,s.readyState=s.DONE,r()},t.readAsDataURL(e),s.readyState=s.INIT}(a=a||u().createObjectURL(e),n)?o.location.href=a:o.open(a,"_blank")||(o.location.href=a);s.readyState=s.DONE,r(),b(a)}()},t=r.prototype;if("undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob)return;t.abort=function(){},t.readyState=t.INIT=0,t.WRITING=1,t.DONE=2,t.error=t.onwritestart=t.onprogress=t.onwrite=t.onabort=t.onerror=t.onwriteend=null,o.FileSaver_saveAs=function(e,t,i){return new r(e,t||e.name||"download",i)}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0),function(){var root="object"==typeof window?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS&&(root=global);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD="function"==typeof define&&define.amd,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(t){return function(e){return new Sha1(!0).update(e)[t]()}},createMethod=function(){var t=createOutputMethod("hex");NODE_JS&&(t=nodeWrap(t)),t.create=function(){return new Sha1},t.update=function(e){return t.create().update(e)};for(var e=0;e<OUTPUT_TYPES.length;++e){var i=OUTPUT_TYPES[e];t[i]=createOutputMethod(i)}return t},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("sha1").update(e,"utf8").digest("hex");if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return method(e);return crypto.createHash("sha1").update(new Buffer(e)).digest("hex")};return nodeMethod};function Sha1(e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&e.constructor===root.ArrayBuffer&&(e=new Uint8Array(e));for(var i,r,a=0,s=e.length||0,n=this.blocks;a<s;){if(this.hashed&&(this.hashed=!1,n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),t)for(r=this.start;a<s&&r<64;++a)n[r>>2]|=e[a]<<SHIFT[3&r++];else for(r=this.start;a<s&&r<64;++a)(i=e.charCodeAt(a))<128?n[r>>2]|=i<<SHIFT[3&r++]:(i<2048?n[r>>2]|=(192|i>>6)<<SHIFT[3&r++]:(i<55296||57344<=i?n[r>>2]|=(224|i>>12)<<SHIFT[3&r++]:(i=65536+((1023&i)<<10|1023&e.charCodeAt(++a)),n[r>>2]|=(240|i>>18)<<SHIFT[3&r++],n[r>>2]|=(128|i>>12&63)<<SHIFT[3&r++]),n[r>>2]|=(128|i>>6&63)<<SHIFT[3&r++]),n[r>>2]|=(128|63&i)<<SHIFT[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,64<=r?(this.block=n[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],56<=t&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var e,t,i=this.h0,r=this.h1,a=this.h2,s=this.h3,n=this.h4,o=this.blocks;for(e=16;e<80;++e)t=o[e-3]^o[e-8]^o[e-14]^o[e-16],o[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)i=(t=(r=(t=(a=(t=(s=(t=(n=(t=i<<5|i>>>27)+(r&a|~r&s)+n+1518500249+o[e]<<0)<<5|n>>>27)+(i&(r=r<<30|r>>>2)|~i&a)+s+1518500249+o[e+1]<<0)<<5|s>>>27)+(n&(i=i<<30|i>>>2)|~n&r)+a+1518500249+o[e+2]<<0)<<5|a>>>27)+(s&(n=n<<30|n>>>2)|~s&i)+r+1518500249+o[e+3]<<0)<<5|r>>>27)+(a&(s=s<<30|s>>>2)|~a&n)+i+1518500249+o[e+4]<<0,a=a<<30|a>>>2;for(;e<40;e+=5)i=(t=(r=(t=(a=(t=(s=(t=(n=(t=i<<5|i>>>27)+(r^a^s)+n+1859775393+o[e]<<0)<<5|n>>>27)+(i^(r=r<<30|r>>>2)^a)+s+1859775393+o[e+1]<<0)<<5|s>>>27)+(n^(i=i<<30|i>>>2)^r)+a+1859775393+o[e+2]<<0)<<5|a>>>27)+(s^(n=n<<30|n>>>2)^i)+r+1859775393+o[e+3]<<0)<<5|r>>>27)+(a^(s=s<<30|s>>>2)^n)+i+1859775393+o[e+4]<<0,a=a<<30|a>>>2;for(;e<60;e+=5)i=(t=(r=(t=(a=(t=(s=(t=(n=(t=i<<5|i>>>27)+(r&a|r&s|a&s)+n-1894007588+o[e]<<0)<<5|n>>>27)+(i&(r=r<<30|r>>>2)|i&a|r&a)+s-1894007588+o[e+1]<<0)<<5|s>>>27)+(n&(i=i<<30|i>>>2)|n&r|i&r)+a-1894007588+o[e+2]<<0)<<5|a>>>27)+(s&(n=n<<30|n>>>2)|s&i|n&i)+r-1894007588+o[e+3]<<0)<<5|r>>>27)+(a&(s=s<<30|s>>>2)|a&n|s&n)+i-1894007588+o[e+4]<<0,a=a<<30|a>>>2;for(;e<80;e+=5)i=(t=(r=(t=(a=(t=(s=(t=(n=(t=i<<5|i>>>27)+(r^a^s)+n-899497514+o[e]<<0)<<5|n>>>27)+(i^(r=r<<30|r>>>2)^a)+s-899497514+o[e+1]<<0)<<5|s>>>27)+(n^(i=i<<30|i>>>2)^r)+a-899497514+o[e+2]<<0)<<5|a>>>27)+(s^(n=n<<30|n>>>2)^i)+r-899497514+o[e+3]<<0)<<5|r>>>27)+(a^(s=s<<30|s>>>2)^n)+i-899497514+o[e+4]<<0,a=a<<30|a>>>2;this.h0=this.h0+i<<0,this.h1=this.h1+r<<0,this.h2=this.h2+a<<0,this.h3=this.h3+s<<0,this.h4=this.h4+n<<0},Sha1.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,i=this.h2,r=this.h3,a=this.h4;return HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,i=this.h2,r=this.h3,a=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24&255,i>>16&255,i>>8&255,255&i,r>>24&255,r>>16&255,r>>8&255,255&r,a>>24&255,a>>16&255,a>>8&255,255&a]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};var exports=createMethod();COMMON_JS?module.exports=exports:(root.sha1=exports,AMD&&define(function(){return exports}))}(),Object.extend(Squeak,{vmPath:"/",platformSubtype:"Browser",osVersion:navigator.userAgent,windowSystem:"HTML"});var canUseMouseOffset=navigator.userAgent.match("AppleWebKit/");function updateMousePos(e,t,i){var r=canUseMouseOffset?e.offsetX:e.layerX,a=canUseMouseOffset?e.offsetY:e.layerY;i.cursorCanvas&&(i.cursorCanvas.style.left=r+t.offsetLeft+i.cursorOffsetX+"px",i.cursorCanvas.style.top=a+t.offsetTop+i.cursorOffsetY+"px");var s=r*t.width/t.offsetWidth|0,n=a*t.height/t.offsetHeight|0;i.mouseX=Math.max(0,Math.min(i.width,s)),i.mouseY=Math.max(0,Math.min(i.height,n))}function recordMouseEvent(e,t,i,r,a,s){if(updateMousePos(t,i,r),r.vm){var n=r.buttons&Squeak.Mouse_All;switch(e){case"mousedown":switch(t.button||0){case 0:n=Squeak.Mouse_Red;break;case 1:n=Squeak.Mouse_Yellow;break;case 2:n=Squeak.Mouse_Blue}s.swapButtons&&(n==Squeak.Mouse_Yellow?n=Squeak.Mouse_Blue:n==Squeak.Mouse_Blue&&(n=Squeak.Mouse_Yellow));break;case"mousemove":break;case"mouseup":n=0}r.buttons=n|recordModifiers(t,r),a&&(a.push([Squeak.EventTypeMouse,t.timeStamp,r.mouseX,r.mouseY,r.buttons&Squeak.Mouse_All,r.buttons>>3]),r.signalInputEvent&&r.signalInputEvent()),r.idle=0,"mouseup"==e?r.runFor&&r.runFor(100):r.runNow&&r.runNow()}}function recordKeyboardEvent(e,t,i,r){if(i.vm){var a=i.buttons>>3<<8|e;a===i.vm.interruptKeycode?i.vm.interruptPending=!0:r?(r.push([Squeak.EventTypeKeyboard,t,e,Squeak.EventKeyChar,i.buttons>>3,e]),i.signalInputEvent&&i.signalInputEvent()):i.keys.push(a),i.idle=0,i.runNow&&i.runNow()}}function recordDragDropEvent(e,t,i,r,a){r.vm&&a&&(updateMousePos(t,i,r),a.push([Squeak.EventTypeDragDropFiles,t.timeStamp,e,r.mouseX,r.mouseY,r.buttons>>3,r.droppedFiles.length]),r.signalInputEvent&&r.signalInputEvent())}function fakeCmdOrCtrlKey(e,t,i,r){i.buttons&=~Squeak.Keyboard_All,i.buttons|=Squeak.Keyboard_Cmd|Squeak.Keyboard_Ctrl,i.keys=[],recordKeyboardEvent(e,t,i,r)}function makeSqueakEvent(e,t,i){t[0]=e[0],t[1]=e[1]-i&Squeak.MillisecondClockMask;for(var r=2;r<e.length;r++)t[r]=e[r]}function createSqueakDisplay(b,m){(m=m||{}).fullscreen&&(document.body.style.margin=0,document.body.style.backgroundColor="black",document.ontouchmove=function(e){e.preventDefault()},m.header&&(m.header.style.display="none"),m.footer&&(m.footer.style.display="none"));var v={context:b.getContext("2d"),fullscreen:!1,width:0,height:0,mouseX:0,mouseY:0,buttons:0,keys:[],clipboardString:"",clipboardStringChanged:!1,cursorCanvas:!1!==m.cursor&&document.createElement("canvas"),cursorOffsetX:0,cursorOffsetY:0,droppedFiles:[],signalInputEvent:null};setupSwapButtons(m),m.pixelated&&(b.classList.add("pixelated"),v.cursorCanvas&&v.cursorCanvas.classList.add("pixelated"));var o=null;v.reset=function(){o=null,v.signalInputEvent=null,v.lastTick=0,v.getNextEvent=function(e,t){(o=[]).push=function(e){o.offset=Date.now()-e[1],delete o.push,o.push(e)},v.getNextEvent=function(e,t){var i=o.shift();i?makeSqueakEvent(i,e,t-o.offset):e[0]=Squeak.EventTypeNone},v.getNextEvent(e,t)}},v.reset();var u=setupFullscreen(v,b,m);v.fullscreenRequest=function(e,t){v.fullscreen!=e?(v.fullscreen=e,v.resizeTodo=t,v.resizeTodoTimeout=setTimeout(v.resizeDone,1e3),u()):t()},v.resizeDone=function(){clearTimeout(v.resizeTodoTimeout);var e=v.resizeTodo;e&&(v.resizeTodo=null,e())},v.clear=function(){b.width=b.width},v.showBanner=function(e,t){t=t||{};var i=v.context;i.clearRect(0,0,b.width,b.height),i.fillStyle=t.color||"#F90",i.font=t.font||"bold 48px sans-serif",!t.font&&i.measureText(e).width>b.width&&(i.font="bold 24px sans-serif"),i.textAlign="center",i.textBaseline="middle",i.fillText(e,b.width/2,b.height/2)},v.showProgress=function(e,t){t=t||{};var i=v.context,r=b.width/3|0,a=.5*b.width-r/2,s=.5*b.height+48;i.fillStyle=t.background||"#000",i.fillRect(a,s,r,24),i.lineWidth=2,i.strokeStyle=t.color||"#F90",i.strokeRect(a,s,r,24),i.fillStyle=t.color||"#F90",i.fillRect(a,s,r*e,24)},v.executeClipboardPaste=function(e,t){if(!v.vm)return!0;try{v.clipboardString=e,fakeCmdOrCtrlKey("v".charCodeAt(0),t,v,o)}catch(e){console.error("paste error "+e)}},v.executeClipboardCopy=function(e,t){if(!v.vm)return!0;v.clipboardStringChanged=!1,fakeCmdOrCtrlKey((e||"c").charCodeAt(0),t,v,o);for(var i=Date.now();!v.clipboardStringChanged&&Date.now()-i<500;)v.vm.interpret(20);if(v.clipboardStringChanged)try{return v.clipboardString}catch(e){console.error("copy error "+e)}},b.onmousedown=function(e){return u(),recordMouseEvent("mousedown",e,b,v,o,m),e.preventDefault(),!1},b.onmouseup=function(e){recordMouseEvent("mouseup",e,b,v,o,m),u(),e.preventDefault()},b.onmousemove=function(e){recordMouseEvent("mousemove",e,b,v,o,m),e.preventDefault()},b.oncontextmenu=function(){return!1};var g={state:"idle",button:0,x:0,y:0,dist:0,down:{}};function l(e){if(e.touches.length){g.x=g.y=0;for(var t=0;t<e.touches.length;t++)g.x+=e.touches[t].pageX/e.touches.length,g.y+=e.touches[t].pageY/e.touches.length}return{timeStamp:e.timeStamp,button:g.button,offsetX:g.x-b.offsetLeft,offsetY:g.y-b.offsetTop}}function a(e,t,i,r){var a=e-i,s=t-r;return Math.sqrt(a*a+s*s)}function c(e,t){return a(e.pageX,e.pageY,t.pageX,t.pageY)}function f(e,t,i,r){var a=v.cursorCanvas,s=i/b.width;if(b.style.left=(0|e)+"px",b.style.top=(0|t)+"px",b.style.width=(0|i)+"px",b.style.height=(0|r)+"px",a&&(a.style.left=(e+v.cursorOffsetX+v.mouseX*s|0)+"px",a.style.top=(t+v.cursorOffsetY+v.mouseY*s|0)+"px",a.style.width=(a.width*s|0)+"px",a.style.height=(a.height*s|0)+"px"),!m.pixelated){var n=window.devicePixelRatio*s;n%1==0||5<n?(b.classList.add("pixelated"),a&&a.classList.add("pixelated")):(b.classList.remove("pixelated"),a&&v.cursorCanvas.classList.remove("pixelated"))}return s}var h=5;if(b.ontouchstart=function(e){e.preventDefault();for(var t,i=l(e),r=0;r<e.changedTouches.length;r++)switch(g.state){case"idle":g.state="got1stFinger",g.first=i,setTimeout(function(){"got1stFinger"===g.state&&(g.state="mousing",g.button=i.button=0,recordMouseEvent("mousemove",i,b,v,o,m),recordMouseEvent("mousedown",i,b,v,o,m))},100);break;case"got1stFinger":g.state="got2ndFinger",t=e,g.dist=c(t.touches[0],t.touches[1]),g.down.x=g.x,g.down.y=g.y,g.down.dist=g.dist,g.down.left=b.offsetLeft,g.down.top=b.offsetTop,g.down.width=b.offsetWidth,g.down.height=b.offsetHeight,g.orig||(g.orig={left:g.down.left,top:g.down.top,right:g.down.left+g.down.width,bottom:g.down.top+g.down.height,width:g.down.width,height:g.down.height}),setTimeout(function(){"got2ndFinger"===g.state&&(10<Math.abs(g.down.dist-g.dist)||10<a(g.down.x,g.down.y,g.x,g.y)?g.state="zooming":(g.state="mousing",g.button=i.button=2,recordMouseEvent("mousemove",i,b,v,o,m),recordMouseEvent("mousedown",i,b,v,o,m)))},200)}},b.ontouchmove=function(e){e.preventDefault();var t=l(e);switch(g.state){case"got1stFinger":g.state="mousing",g.button=t.button=0,recordMouseEvent("mousemove",t,b,v,o,m),recordMouseEvent("mousedown",t,b,v,o,m);break;case"mousing":return void recordMouseEvent("mousemove",t,b,v,o,m);case"got2ndFinger":return void(1<e.touches.length&&(g.dist=c(e.touches[0],e.touches[1])));case"zooming":return void function(e){if(!(e.touches.length<2)){g.dist=c(e.touches[0],e.touches[1]);var t=g.orig.width/g.down.width,i=g.dist/g.down.dist,r=Math.min(Math.max(i,.95*t),t*h),a=g.down.width*r,s=g.orig.height*a/g.orig.width,n=g.down.left-(g.down.x-g.down.left)*(r-1)+(g.x-g.down.x),o=g.down.top-(g.down.y-g.down.top)*(r-1)+(g.y-g.down.y);f(n=Math.max(Math.min(n,g.orig.left+20),g.orig.right-a-20),o=Math.max(Math.min(o,g.orig.top+20),g.orig.bottom-s-20),a,s)}}(e)}},b.ontouchend=function(e){e.preventDefault(),u();for(var t,i,r,a,s=l(e),n=0;n<e.changedTouches.length;n++)switch(g.state){case"mousing":if(0<e.touches.length)break;return g.state="idle",void recordMouseEvent("mouseup",s,b,v,o,m);case"got1stFinger":return g.state="idle",g.button=s.button=0,recordMouseEvent("mousemove",s,b,v,o,m),recordMouseEvent("mousedown",s,b,v,o,m),void recordMouseEvent("mouseup",s,b,v,o,m);case"got2ndFinger":g.state="mousing",g.button=s.button=2,recordMouseEvent("mousemove",s,b,v,o,m),recordMouseEvent("mousedown",s,b,v,o,m);break;case"zooming":if(0<e.touches.length)break;return g.state="idle",r=i=t=void 0,t=b.offsetLeft,i=b.offsetTop,r=b.offsetWidth,b.offsetHeight,r=Math.min(Math.max(r,g.orig.width),g.orig.width*h),a=g.orig.height*r/g.orig.width,void(f(t=Math.max(Math.min(t,g.orig.left),g.orig.right-r),i=Math.max(Math.min(i,g.orig.top),g.orig.bottom-a),r,a)-v.initialScale<1e-4&&(g.orig=null,window.onresize()))}},b.ontouchcancel=function(e){b.ontouchend(e)},v.cursorCanvas){var e="absolute"===window.getComputedStyle(b).position;v.cursorCanvas.style.display="block",v.cursorCanvas.style.position=e?"absolute":"fixed",v.cursorCanvas.style.cursor="none",v.cursorCanvas.style.background="transparent",v.cursorCanvas.style.pointerEvents="none",b.parentElement.appendChild(v.cursorCanvas),b.style.cursor="none"}if(document.onkeypress=function(e){return!v.vm||(!!/[CXVR]/.test(String.fromCharCode(e.charCode+64))||(recordModifiers(e,v),recordKeyboardEvent(e.charCode,e.timeStamp,v,o),void e.preventDefault()))},document.onkeydown=function(e){if(u(),!v.vm)return!0;recordModifiers(e,v);var t={8:8,9:9,13:13,27:27,32:32,33:11,34:12,35:4,36:1,37:28,38:30,39:29,40:31,45:5,46:127}[e.keyCode];if(t)return recordKeyboardEvent(t,e.timeStamp,v,o),e.preventDefault();if(e.metaKey||e.altKey&&!e.ctrlKey){var i=e.key;if(!i&&e.keyIdentifier&&"U+"==e.keyIdentifier.slice(0,2)&&(i=String.fromCharCode(parseInt(e.keyIdentifier.slice(2),16))),i&&1==i.length){if(/[CXVR]/i.test(i))return!0;var r=i.charCodeAt(0);return/[A-Z]/.test(i)&&!e.shiftKey&&(r+=32),recordKeyboardEvent(r,e.timeStamp,v,o),e.preventDefault()}}},document.onkeyup=function(e){if(!v.vm)return!0;recordModifiers(e,v)},document.oncopy=function(e,t){var i=v.executeClipboardCopy(t,e.timeStamp);"string"==typeof i&&e.clipboardData.setData("Text",i),e.preventDefault()},document.oncut=function(e){if(!v.vm)return!0;document.oncopy(e,"x")},document.onpaste=function(e){var t=e.clipboardData.getData("Text");v.executeClipboardPaste(t,e.timeStamp),e.preventDefault()},"ontouchstart"in document){var t=document.createElement("div");t.innerHTML='<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg width="50px" height="50px" viewBox="0 0 150 150" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="Page-1" stroke="none" fill="#000000"><rect x="33" y="105" width="10" height="10" rx="1"></rect><rect x="26" y="60" width="10" height="10" rx="1"></rect><rect x="41" y="60" width="10" height="10" rx="1"></rect><rect x="56" y="60" width="10" height="10" rx="1"></rect><rect x="71" y="60" width="10" height="10" rx="1"></rect><rect x="86" y="60" width="10" height="10" rx="1"></rect><rect x="101" y="60" width="10" height="10" rx="1"></rect><rect x="116" y="60" width="10" height="10" rx="1"></rect><rect x="108" y="105" width="10" height="10" rx="1"></rect><rect x="33" y="75" width="10" height="10" rx="1"></rect><rect x="48" y="75" width="10" height="10" rx="1"></rect><rect x="63" y="75" width="10" height="10" rx="1"></rect><rect x="78" y="75" width="10" height="10" rx="1"></rect><rect x="93" y="75" width="10" height="10" rx="1"></rect><rect x="108" y="75" width="10" height="10" rx="1"></rect><rect x="41" y="90" width="10" height="10" rx="1"></rect><rect x="26" y="90" width="10" height="10" rx="1"></rect><rect x="56" y="90" width="10" height="10" rx="1"></rect><rect x="71" y="90" width="10" height="10" rx="1"></rect><rect x="86" y="90" width="10" height="10" rx="1"></rect><rect x="101" y="90" width="10" height="10" rx="1"></rect><rect x="116" y="90" width="10" height="10" rx="1"></rect><rect x="48" y="105" width="55" height="10" rx="1"></rect><path d="M20.0056004,51 C18.3456532,51 17.0000001,52.3496496 17.0000001,54.0038284 L17.0000001,85.6824519 L17,120.003453 C17.0000001,121.6584 18.3455253,123 20.0056004,123 L131.9944,123 C133.654347,123 135,121.657592 135,119.997916 L135,54.0020839 C135,52.3440787 133.654475,51 131.9944,51 L20.0056004,51 Z" fill="none" stroke="#000000" stroke-width="2"></path><path d="M52.0410156,36.6054687 L75.5449219,21.6503905 L102.666016,36.6054687" id="Line" stroke="#000000" stroke-width="3" stroke-linecap="round" fill="none"></path></g></svg>',t.setAttribute("style","position:fixed;right:0;bottom:0;background-color:rgba(128,128,128,0.5);border-radius:5px"),b.parentElement.appendChild(t),t.onmousedown=function(e){b.contentEditable=!0,b.setAttribute("autocomplete","off"),b.setAttribute("autocorrect","off"),b.setAttribute("autocapitalize","off"),b.setAttribute("spellcheck","off"),b.focus(),e.preventDefault()},t.ontouchstart=t.onmousedown}function p(e){for(var t=0;t<e.dataTransfer.types.length;t++)if("Files"==e.dataTransfer.types[t])return 1}return document.ondragover=function(e){e.preventDefault(),p(e)?(e.dataTransfer.dropEffect="copy",recordDragDropEvent(Squeak.EventDragMove,e,b,v,o)):e.dataTransfer.dropEffect="none"},document.ondragenter=function(e){p(e)&&recordDragDropEvent(Squeak.EventDragEnter,e,b,v,o)},document.ondragleave=function(e){p(e)&&recordDragDropEvent(Squeak.EventDragLeave,e,b,v,o)},document.ondrop=function(i){if(i.preventDefault(),!p(i))return!1;var r,a=[].slice.call(i.dataTransfer.files),s=[],n=null;return v.droppedFiles=[],a.forEach(function(t){v.droppedFiles.push(t.name);var e=new FileReader;e.onload=function(){var e=this.result;Squeak.filePut(t.name,e),s.push(t.name),r||!/.*image$/.test(t.name)||v.vm&&!confirm("Run "+t.name+" now?\n(cancel to use as file)")||(r=e,n=t.name),s.length==a.length&&(r?(SqueakJS.appName=n.slice(0,-6),SqueakJS.runImage(r,n,v,m)):recordDragDropEvent(Squeak.EventDragDrop,i,b,v,o))},e.readAsArrayBuffer(t)}),!1},window.onresize=function(){if(!g.orig){var e=window.innerWidth,t=window.innerHeight;if(setTimeout(function(){e==window.innerWidth&&t==window.innerHeight&&v.resizeDone()},300),!(m.header&&m.footer||m.fullscreen))return v.width=b.width,void(v.height=b.height);var i=m.fullscreen||v.fullscreen,r=i?0:m.header.offsetTop+m.header.offsetHeight,a=window.innerWidth,s=i?window.innerHeight:Math.max(100,m.footer.offsetTop-r),n=0,o=0;if(m.fixedWidth){v.width=m.fixedWidth,v.height=m.fixedHeight;var u=v.width/v.height;u<a/s?n=a-Math.floor(s*u):o=s-Math.floor(a/u),v.initialScale=(a-n)/v.width}else{m.minWidth||(m.minWidth=700),m.minHeight||(m.minHeight=700);var l=a<m.minWidth?m.minWidth/a:1,c=s<m.minHeight?m.minHeight/s:1,f=Math.max(l,c);v.width=Math.floor(a*f),v.height=Math.floor(s*f),v.initialScale=a/v.width}if(b.style.left=0+Math.floor(n/2)+"px",b.style.top=r+Math.floor(o/2)+"px",b.style.width=a-n+"px",b.style.height=s-o+"px",b.width!=v.width||b.height!=v.height){var h=(m.fixedWidth||!v.resizeTodo)&&v.context.getImageData(0,0,b.width,b.height);b.width=v.width,b.height=v.height,h&&v.context.putImageData(h,0,0)}var p=v.cursorCanvas;f=b.offsetWidth/b.width;if(p&&m.fixedWidth&&(p.style.width=p.width*f+"px",p.style.height=p.height*f+"px"),!m.pixelated){var d=window.devicePixelRatio*f;d%1==0||5<d?(b.classList.add("pixelated"),p&&p.classList.add("pixelated")):(b.classList.remove("pixelated"),p&&v.cursorCanvas.classList.remove("pixelated"))}}},window.onresize(),v}function setupSpinner(t,e){var i=e.spinner;return i?(i.onmousedown=function(e){confirm(SqueakJS.appName+" is busy. Interrupt?")&&(t.interruptPending=!0)},i.style):null}var spinnerAngle=0,becameBusy=0,loop;function updateSpinner(e,t,i,r){var a=0===t,s=i.lastTick-r.lastTick<500;!a||s?(e.display="none",becameBusy=0):0===becameBusy?becameBusy=i.lastTick:1e3<i.lastTick-becameBusy&&(e.display="block",spinnerAngle=(spinnerAngle+30)%360,e.webkitTransform=e.transform="rotate("+spinnerAngle+"deg)")}function processOptions(e){var t=(location.hash||location.search).slice(1),i=t&&t.split("&");if(i)for(var r=0;r<i.length;r++){var a=i[r].split("="),s=a[0],n=!0;if(1<a.length&&(n=decodeURIComponent(a.slice(1).join("="))).match(/^(true|false|null|[0-9"[{].*)$/))try{n=JSON.parse(n)}catch(e){"["===n[0]&&(n=n.slice(1,-1).split(","))}e[s]=n}var o=Squeak.splitFilePath(e.root||"/").fullname;Squeak.dirCreate(o,!0),/\/$/.test(o)||(o+="/"),e.root=o,SqueakJS.options=e}function fetchTemplates(e){if(e.templates){if(e.templates.constructor===Array){var t={};e.templates.forEach(function(e){t[e]=e}),e.templates=t}for(var i in e.templates){var r="/"==i[0]?i:e.root+i,a=Squeak.splitUrl(e.templates[i],e.url).full;Squeak.fetchTemplateDir(r,a)}}}function processFile(e,t,i,r){Squeak.filePut(i.root+e.name,e.data,function(){console.log("Stored "+i.root+e.name),e.zip?processZip(e,t,i,r):r()})}function processZip(s,n,o,u){JSZip().loadAsync(s.data).then(function(e){var r=[];if(e.forEach(function(e){if(!o.image.name&&e.match(/\.image$/)&&(o.image.name=e),o.forceDownload||!Squeak.fileExists(o.root+e))r.push(e);else if(o.image.name===e){var t=u;u=function(){Squeak.fileGet(o.root+e,function(e){return o.image.data=e,t()},function(){return Squeak.fileDelete(o.root+s.name),processZip(s,n,o,t)})}}}),0===r.length)return u();var a=0;n.showBanner("Unzipping "+s.name),n.showProgress(0),r.forEach(function(i){console.log("Inflating "+s.name+": "+i),e.file(i).async("arraybuffer",function(e){n.showProgress((e.percent/100+a)/r.length)}).then(function(e){console.log("Expanded size of "+i+": "+e.byteLength);var t={};o.image.name===i&&(t=o.image),t.name=i,t.data=e,processFile(t,n,o,function(){++a===r.length&&u()})})})})}function checkExisting(t,i,r,a,e){if(!Squeak.fileExists(r.root+t.name))return e();t.image||t.zip?Squeak.fileGet(r.root+t.name,function(e){t.data=e,t.zip?processZip(t,i,r,a):a()},function(){return Squeak.fileDelete(r.root+t.name),e()}):a()}function downloadFile(i,t,r,a){t.showBanner("Downloading "+i.name);var s=new XMLHttpRequest,e=r.proxy||"";s.open("GET",e+i.url),r.ajax&&s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.responseType="arraybuffer",s.onprogress=function(e){e.lengthComputable&&t.showProgress(e.loaded/e.total)},s.onload=function(e){200==this.status?(i.data=this.response,processFile(i,t,r,a)):this.onerror(this.statusText)},s.onerror=function(e){if(r.proxy)return console.error(Squeak.bytesAsString(new Uint8Array(this.response))),alert("Failed to download:\n"+i.url);console.warn("Retrying with CORS proxy: "+i.url);var t=new XMLHttpRequest;t.open("GET","https://crossorigin.me/"+i.url),r.ajax&&t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.responseType=s.responseType,t.onprogress=s.onprogress,t.onload=s.onload,t.onerror=function(){console.error(Squeak.bytesAsString(new Uint8Array(this.response))),alert("Failed to download:\n"+i.url)},t.send()},s.send()}function fetchFiles(i,r,a,s){!function e(){if(0===i.length)return s();var t=i.shift();a.forceDownload||t.forceDownload?downloadFile(t,r,a,e):checkExisting(t,r,a,function(){e()},function(){downloadFile(t,r,a,e)})}()}SqueakJS.runImage=function(t,a,s,n){window.onbeforeunload=function(e){var t=SqueakJS.appName+" is still running";return e.returnValue=t},window.clearTimeout(loop),s.reset(),s.clear(),s.showBanner("Loading "+SqueakJS.appName),s.showProgress(0);var o=this;window.setTimeout(function(){var e=new Squeak.Image(a);e.readFromBuffer(t,function(){s.quitFlag=!1;var t=new Squeak.Interpreter(e,s);SqueakJS.vm=t,Squeak.Settings.squeakImageName=a,setupSwapButtons(n),s.clear(),s.showBanner("Starting "+SqueakJS.appName);var i=setupSpinner(t,n);function r(){try{s.quitFlag?o.onQuit(t,s,n):t.interpret(50,function(e){"sleep"==e&&(e=200),i&&updateSpinner(i,e,t,s),loop=window.setTimeout(r,e)})}catch(e){console.error(e),alert(e)}}s.runNow=function(){window.clearTimeout(loop),r()},s.runFor=function(e){var t=Date.now()+e;do{if(s.quitFlag)return;s.runNow()}while(Date.now()<t)},r()},function(e){s.showProgress(e)})},0)},SqueakJS.runSqueak=function(e,t,i){processOptions(i),!e&&i.image&&(e=i.image);var r=i.url||e&&e.replace(/[^\/]*$/,"")||"";i.url=r,fetchTemplates(i);var a=createSqueakDisplay(t,i),s={url:null,name:null,image:!0,data:null},n=[];if(a.argv=i.argv,e){var o=Squeak.splitUrl(e,r);s.url=o.full,s.name=o.filename}i.files&&i.files.forEach(function(e){var t=Squeak.splitUrl(e,r);s.name===t.filename||(!s.url&&e.match(/\.image$/)?(s.name=t.filename,s.url=t.full):n.push({url:t.full,name:t.filename}))}),i.zip&&("string"==typeof i.zip?[i.zip]:i.zip).forEach(function(e){var t=Squeak.splitUrl(e,r);n.push({url:t.full,name:t.filename,zip:!0})});if(s.url&&n.push(s),i.document){o=Squeak.splitUrl(i.document,r);n.push({url:o.full,name:o.filename,forceDownload:!1!==i.forceDownload}),a.documentName=i.root+o.filename}return i.image=s,fetchFiles(n,a,i,function(){Squeak.fsck();var e=i.image;return e.name?e.data?(SqueakJS.appName=i.appName||e.name.replace(/\.image$/,""),void SqueakJS.runImage(e.data,i.root+e.name,a,i)):alert("could not find image "+e.name):alert("could not find an image")}),Squeak.noFloatDecodeWorkaround=!!i.noFloatDecodeWorkaround,a},SqueakJS.quitSqueak=function(){SqueakJS.vm.quitFlag=!0},SqueakJS.onQuit=function(e,t,i){window.onbeforeunload=null,t.vm=null,i.spinner&&(i.spinner.style.display="none"),i.onQuit?i.onQuit(e,t,i):t.showBanner(SqueakJS.appName+" stopped.")},window.applicationCache&&applicationCache.addEventListener("updateready",function(){var e=window.SqueakJS&&SqueakJS.options&&SqueakJS.options.appName||"SqueakJS";confirm(e+" has been updated. Restart now?")&&(window.onbeforeunload=null,window.location.reload())})}();